var Vr=Object.defineProperty;var Fr=(Nt,s,Ot)=>s in Nt?Vr(Nt,s,{enumerable:!0,configurable:!0,writable:!0,value:Ot}):Nt[s]=Ot;var pr=(Nt,s,Ot)=>(Fr(Nt,typeof s!="symbol"?s+"":s,Ot),Ot);function _mergeNamespaces(Nt,s){for(var Ot=0;Ot<s.length;Ot++){const en=s[Ot];if(typeof en!="string"&&!Array.isArray(en)){for(const tn in en)if(tn!=="default"&&!(tn in Nt)){const nn=Object.getOwnPropertyDescriptor(en,tn);nn&&Object.defineProperty(Nt,tn,nn.get?nn:{enumerable:!0,get:()=>en[tn]})}}}return Object.freeze(Object.defineProperty(Nt,Symbol.toStringTag,{value:"Module"}))}(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const tn of document.querySelectorAll('link[rel="modulepreload"]'))en(tn);new MutationObserver(tn=>{for(const nn of tn)if(nn.type==="childList")for(const rn of nn.addedNodes)rn.tagName==="LINK"&&rn.rel==="modulepreload"&&en(rn)}).observe(document,{childList:!0,subtree:!0});function Ot(tn){const nn={};return tn.integrity&&(nn.integrity=tn.integrity),tn.referrerPolicy&&(nn.referrerPolicy=tn.referrerPolicy),tn.crossOrigin==="use-credentials"?nn.credentials="include":tn.crossOrigin==="anonymous"?nn.credentials="omit":nn.credentials="same-origin",nn}function en(tn){if(tn.ep)return;tn.ep=!0;const nn=Ot(tn);fetch(tn.href,nn)}})();var commonjsGlobal$1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(Nt){return Nt&&Nt.__esModule&&Object.prototype.hasOwnProperty.call(Nt,"default")?Nt.default:Nt}function getAugmentedNamespace(Nt){if(Nt.__esModule)return Nt;var s=Nt.default;if(typeof s=="function"){var Ot=function en(){return this instanceof en?Reflect.construct(s,arguments,this.constructor):s.apply(this,arguments)};Ot.prototype=s.prototype}else Ot={};return Object.defineProperty(Ot,"__esModule",{value:!0}),Object.keys(Nt).forEach(function(en){var tn=Object.getOwnPropertyDescriptor(Nt,en);Object.defineProperty(Ot,en,tn.get?tn:{enumerable:!0,get:function(){return Nt[en]}})}),Ot}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},react={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l$4=Symbol.for("react.element"),n$3=Symbol.for("react.portal"),p$6=Symbol.for("react.fragment"),q$5=Symbol.for("react.strict_mode"),r$6=Symbol.for("react.profiler"),t$3=Symbol.for("react.provider"),u$4=Symbol.for("react.context"),v$5=Symbol.for("react.forward_ref"),w$4=Symbol.for("react.suspense"),x$3=Symbol.for("react.memo"),y$4=Symbol.for("react.lazy"),z$3=Symbol.iterator;function A$3(Nt){return Nt===null||typeof Nt!="object"?null:(Nt=z$3&&Nt[z$3]||Nt["@@iterator"],typeof Nt=="function"?Nt:null)}var B$3={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C$5=Object.assign,D$5={};function E$2(Nt,s,Ot){this.props=Nt,this.context=s,this.refs=D$5,this.updater=Ot||B$3}E$2.prototype.isReactComponent={};E$2.prototype.setState=function(Nt,s){if(typeof Nt!="object"&&typeof Nt!="function"&&Nt!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Nt,s,"setState")};E$2.prototype.forceUpdate=function(Nt){this.updater.enqueueForceUpdate(this,Nt,"forceUpdate")};function F$4(){}F$4.prototype=E$2.prototype;function G$3(Nt,s,Ot){this.props=Nt,this.context=s,this.refs=D$5,this.updater=Ot||B$3}var H$4=G$3.prototype=new F$4;H$4.constructor=G$3;C$5(H$4,E$2.prototype);H$4.isPureReactComponent=!0;var I$4=Array.isArray,J$1=Object.prototype.hasOwnProperty,K$3={current:null},L$3={key:!0,ref:!0,__self:!0,__source:!0};function M$5(Nt,s,Ot){var en,tn={},nn=null,rn=null;if(s!=null)for(en in s.ref!==void 0&&(rn=s.ref),s.key!==void 0&&(nn=""+s.key),s)J$1.call(s,en)&&!L$3.hasOwnProperty(en)&&(tn[en]=s[en]);var on=arguments.length-2;if(on===1)tn.children=Ot;else if(1<on){for(var sn=Array(on),an=0;an<on;an++)sn[an]=arguments[an+2];tn.children=sn}if(Nt&&Nt.defaultProps)for(en in on=Nt.defaultProps,on)tn[en]===void 0&&(tn[en]=on[en]);return{$$typeof:l$4,type:Nt,key:nn,ref:rn,props:tn,_owner:K$3.current}}function N$3(Nt,s){return{$$typeof:l$4,type:Nt.type,key:s,ref:Nt.ref,props:Nt.props,_owner:Nt._owner}}function O$3(Nt){return typeof Nt=="object"&&Nt!==null&&Nt.$$typeof===l$4}function escape$1(Nt){var s={"=":"=0",":":"=2"};return"$"+Nt.replace(/[=:]/g,function(Ot){return s[Ot]})}var P$4=/\/+/g;function Q$2(Nt,s){return typeof Nt=="object"&&Nt!==null&&Nt.key!=null?escape$1(""+Nt.key):s.toString(36)}function R$5(Nt,s,Ot,en,tn){var nn=typeof Nt;(nn==="undefined"||nn==="boolean")&&(Nt=null);var rn=!1;if(Nt===null)rn=!0;else switch(nn){case"string":case"number":rn=!0;break;case"object":switch(Nt.$$typeof){case l$4:case n$3:rn=!0}}if(rn)return rn=Nt,tn=tn(rn),Nt=en===""?"."+Q$2(rn,0):en,I$4(tn)?(Ot="",Nt!=null&&(Ot=Nt.replace(P$4,"$&/")+"/"),R$5(tn,s,Ot,"",function(an){return an})):tn!=null&&(O$3(tn)&&(tn=N$3(tn,Ot+(!tn.key||rn&&rn.key===tn.key?"":(""+tn.key).replace(P$4,"$&/")+"/")+Nt)),s.push(tn)),1;if(rn=0,en=en===""?".":en+":",I$4(Nt))for(var on=0;on<Nt.length;on++){nn=Nt[on];var sn=en+Q$2(nn,on);rn+=R$5(nn,s,Ot,sn,tn)}else if(sn=A$3(Nt),typeof sn=="function")for(Nt=sn.call(Nt),on=0;!(nn=Nt.next()).done;)nn=nn.value,sn=en+Q$2(nn,on++),rn+=R$5(nn,s,Ot,sn,tn);else if(nn==="object")throw s=String(Nt),Error("Objects are not valid as a React child (found: "+(s==="[object Object]"?"object with keys {"+Object.keys(Nt).join(", ")+"}":s)+"). If you meant to render a collection of children, use an array instead.");return rn}function S$4(Nt,s,Ot){if(Nt==null)return Nt;var en=[],tn=0;return R$5(Nt,en,"","",function(nn){return s.call(Ot,nn,tn++)}),en}function T$4(Nt){if(Nt._status===-1){var s=Nt._result;s=s(),s.then(function(Ot){(Nt._status===0||Nt._status===-1)&&(Nt._status=1,Nt._result=Ot)},function(Ot){(Nt._status===0||Nt._status===-1)&&(Nt._status=2,Nt._result=Ot)}),Nt._status===-1&&(Nt._status=0,Nt._result=s)}if(Nt._status===1)return Nt._result.default;throw Nt._result}var U$3={current:null},V$3={transition:null},W$3={ReactCurrentDispatcher:U$3,ReactCurrentBatchConfig:V$3,ReactCurrentOwner:K$3};react_production_min.Children={map:S$4,forEach:function(Nt,s,Ot){S$4(Nt,function(){s.apply(this,arguments)},Ot)},count:function(Nt){var s=0;return S$4(Nt,function(){s++}),s},toArray:function(Nt){return S$4(Nt,function(s){return s})||[]},only:function(Nt){if(!O$3(Nt))throw Error("React.Children.only expected to receive a single React element child.");return Nt}};react_production_min.Component=E$2;react_production_min.Fragment=p$6;react_production_min.Profiler=r$6;react_production_min.PureComponent=G$3;react_production_min.StrictMode=q$5;react_production_min.Suspense=w$4;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W$3;react_production_min.cloneElement=function(Nt,s,Ot){if(Nt==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+Nt+".");var en=C$5({},Nt.props),tn=Nt.key,nn=Nt.ref,rn=Nt._owner;if(s!=null){if(s.ref!==void 0&&(nn=s.ref,rn=K$3.current),s.key!==void 0&&(tn=""+s.key),Nt.type&&Nt.type.defaultProps)var on=Nt.type.defaultProps;for(sn in s)J$1.call(s,sn)&&!L$3.hasOwnProperty(sn)&&(en[sn]=s[sn]===void 0&&on!==void 0?on[sn]:s[sn])}var sn=arguments.length-2;if(sn===1)en.children=Ot;else if(1<sn){on=Array(sn);for(var an=0;an<sn;an++)on[an]=arguments[an+2];en.children=on}return{$$typeof:l$4,type:Nt.type,key:tn,ref:nn,props:en,_owner:rn}};react_production_min.createContext=function(Nt){return Nt={$$typeof:u$4,_currentValue:Nt,_currentValue2:Nt,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},Nt.Provider={$$typeof:t$3,_context:Nt},Nt.Consumer=Nt};react_production_min.createElement=M$5;react_production_min.createFactory=function(Nt){var s=M$5.bind(null,Nt);return s.type=Nt,s};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function(Nt){return{$$typeof:v$5,render:Nt}};react_production_min.isValidElement=O$3;react_production_min.lazy=function(Nt){return{$$typeof:y$4,_payload:{_status:-1,_result:Nt},_init:T$4}};react_production_min.memo=function(Nt,s){return{$$typeof:x$3,type:Nt,compare:s===void 0?null:s}};react_production_min.startTransition=function(Nt){var s=V$3.transition;V$3.transition={};try{Nt()}finally{V$3.transition=s}};react_production_min.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};react_production_min.useCallback=function(Nt,s){return U$3.current.useCallback(Nt,s)};react_production_min.useContext=function(Nt){return U$3.current.useContext(Nt)};react_production_min.useDebugValue=function(){};react_production_min.useDeferredValue=function(Nt){return U$3.current.useDeferredValue(Nt)};react_production_min.useEffect=function(Nt,s){return U$3.current.useEffect(Nt,s)};react_production_min.useId=function(){return U$3.current.useId()};react_production_min.useImperativeHandle=function(Nt,s,Ot){return U$3.current.useImperativeHandle(Nt,s,Ot)};react_production_min.useInsertionEffect=function(Nt,s){return U$3.current.useInsertionEffect(Nt,s)};react_production_min.useLayoutEffect=function(Nt,s){return U$3.current.useLayoutEffect(Nt,s)};react_production_min.useMemo=function(Nt,s){return U$3.current.useMemo(Nt,s)};react_production_min.useReducer=function(Nt,s,Ot){return U$3.current.useReducer(Nt,s,Ot)};react_production_min.useRef=function(Nt){return U$3.current.useRef(Nt)};react_production_min.useState=function(Nt){return U$3.current.useState(Nt)};react_production_min.useSyncExternalStore=function(Nt,s,Ot){return U$3.current.useSyncExternalStore(Nt,s,Ot)};react_production_min.useTransition=function(){return U$3.current.useTransition()};react_production_min.version="18.2.0";react.exports=react_production_min;var reactExports=react.exports;const React$1=getDefaultExportFromCjs(reactExports),React$2=_mergeNamespaces({__proto__:null,default:React$1},[reactExports]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f$2=reactExports,k$5=Symbol.for("react.element"),l$3=Symbol.for("react.fragment"),m$7=Object.prototype.hasOwnProperty,n$2=f$2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p$5={key:!0,ref:!0,__self:!0,__source:!0};function q$4(Nt,s,Ot){var en,tn={},nn=null,rn=null;Ot!==void 0&&(nn=""+Ot),s.key!==void 0&&(nn=""+s.key),s.ref!==void 0&&(rn=s.ref);for(en in s)m$7.call(s,en)&&!p$5.hasOwnProperty(en)&&(tn[en]=s[en]);if(Nt&&Nt.defaultProps)for(en in s=Nt.defaultProps,s)tn[en]===void 0&&(tn[en]=s[en]);return{$$typeof:k$5,type:Nt,key:nn,ref:rn,props:tn,_owner:n$2.current}}reactJsxRuntime_production_min.Fragment=l$3;reactJsxRuntime_production_min.jsx=q$4;reactJsxRuntime_production_min.jsxs=q$4;jsxRuntime.exports=reactJsxRuntime_production_min;var jsxRuntimeExports=jsxRuntime.exports,client={},reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(Nt){function s(Pn,Bn){var Gn=Pn.length;Pn.push(Bn);e:for(;0<Gn;){var zn=Gn-1>>>1,qn=Pn[zn];if(0<tn(qn,Bn))Pn[zn]=Bn,Pn[Gn]=qn,Gn=zn;else break e}}function Ot(Pn){return Pn.length===0?null:Pn[0]}function en(Pn){if(Pn.length===0)return null;var Bn=Pn[0],Gn=Pn.pop();if(Gn!==Bn){Pn[0]=Gn;e:for(var zn=0,qn=Pn.length,Jn=qn>>>1;zn<Jn;){var Qn=2*(zn+1)-1,ar=Pn[Qn],Xn=Qn+1,xn=Pn[Xn];if(0>tn(ar,Gn))Xn<qn&&0>tn(xn,ar)?(Pn[zn]=xn,Pn[Xn]=Gn,zn=Xn):(Pn[zn]=ar,Pn[Qn]=Gn,zn=Qn);else if(Xn<qn&&0>tn(xn,Gn))Pn[zn]=xn,Pn[Xn]=Gn,zn=Xn;else break e}}return Bn}function tn(Pn,Bn){var Gn=Pn.sortIndex-Bn.sortIndex;return Gn!==0?Gn:Pn.id-Bn.id}if(typeof performance=="object"&&typeof performance.now=="function"){var nn=performance;Nt.unstable_now=function(){return nn.now()}}else{var rn=Date,on=rn.now();Nt.unstable_now=function(){return rn.now()-on}}var sn=[],an=[],ln=1,cn=null,un=3,dn=!1,hn=!1,fn=!1,mn=typeof setTimeout=="function"?setTimeout:null,gn=typeof clearTimeout=="function"?clearTimeout:null,pn=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _n(Pn){for(var Bn=Ot(an);Bn!==null;){if(Bn.callback===null)en(an);else if(Bn.startTime<=Pn)en(an),Bn.sortIndex=Bn.expirationTime,s(sn,Bn);else break;Bn=Ot(an)}}function vn(Pn){if(fn=!1,_n(Pn),!hn)if(Ot(sn)!==null)hn=!0,jn(bn);else{var Bn=Ot(an);Bn!==null&&Ln(vn,Bn.startTime-Pn)}}function bn(Pn,Bn){hn=!1,fn&&(fn=!1,gn(kn),kn=-1),dn=!0;var Gn=un;try{for(_n(Bn),cn=Ot(sn);cn!==null&&(!(cn.expirationTime>Bn)||Pn&&!An());){var zn=cn.callback;if(typeof zn=="function"){cn.callback=null,un=cn.priorityLevel;var qn=zn(cn.expirationTime<=Bn);Bn=Nt.unstable_now(),typeof qn=="function"?cn.callback=qn:cn===Ot(sn)&&en(sn),_n(Bn)}else en(sn);cn=Ot(sn)}if(cn!==null)var Jn=!0;else{var Qn=Ot(an);Qn!==null&&Ln(vn,Qn.startTime-Bn),Jn=!1}return Jn}finally{cn=null,un=Gn,dn=!1}}var wn=!1,Sn=null,kn=-1,En=5,In=-1;function An(){return!(Nt.unstable_now()-In<En)}function Rn(){if(Sn!==null){var Pn=Nt.unstable_now();In=Pn;var Bn=!0;try{Bn=Sn(!0,Pn)}finally{Bn?Nn():(wn=!1,Sn=null)}}else wn=!1}var Nn;if(typeof pn=="function")Nn=function(){pn(Rn)};else if(typeof MessageChannel<"u"){var Vn=new MessageChannel,$n=Vn.port2;Vn.port1.onmessage=Rn,Nn=function(){$n.postMessage(null)}}else Nn=function(){mn(Rn,0)};function jn(Pn){Sn=Pn,wn||(wn=!0,Nn())}function Ln(Pn,Bn){kn=mn(function(){Pn(Nt.unstable_now())},Bn)}Nt.unstable_IdlePriority=5,Nt.unstable_ImmediatePriority=1,Nt.unstable_LowPriority=4,Nt.unstable_NormalPriority=3,Nt.unstable_Profiling=null,Nt.unstable_UserBlockingPriority=2,Nt.unstable_cancelCallback=function(Pn){Pn.callback=null},Nt.unstable_continueExecution=function(){hn||dn||(hn=!0,jn(bn))},Nt.unstable_forceFrameRate=function(Pn){0>Pn||125<Pn?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):En=0<Pn?Math.floor(1e3/Pn):5},Nt.unstable_getCurrentPriorityLevel=function(){return un},Nt.unstable_getFirstCallbackNode=function(){return Ot(sn)},Nt.unstable_next=function(Pn){switch(un){case 1:case 2:case 3:var Bn=3;break;default:Bn=un}var Gn=un;un=Bn;try{return Pn()}finally{un=Gn}},Nt.unstable_pauseExecution=function(){},Nt.unstable_requestPaint=function(){},Nt.unstable_runWithPriority=function(Pn,Bn){switch(Pn){case 1:case 2:case 3:case 4:case 5:break;default:Pn=3}var Gn=un;un=Pn;try{return Bn()}finally{un=Gn}},Nt.unstable_scheduleCallback=function(Pn,Bn,Gn){var zn=Nt.unstable_now();switch(typeof Gn=="object"&&Gn!==null?(Gn=Gn.delay,Gn=typeof Gn=="number"&&0<Gn?zn+Gn:zn):Gn=zn,Pn){case 1:var qn=-1;break;case 2:qn=250;break;case 5:qn=1073741823;break;case 4:qn=1e4;break;default:qn=5e3}return qn=Gn+qn,Pn={id:ln++,callback:Bn,priorityLevel:Pn,startTime:Gn,expirationTime:qn,sortIndex:-1},Gn>zn?(Pn.sortIndex=Gn,s(an,Pn),Ot(sn)===null&&Pn===Ot(an)&&(fn?(gn(kn),kn=-1):fn=!0,Ln(vn,Gn-zn))):(Pn.sortIndex=qn,s(sn,Pn),hn||dn||(hn=!0,jn(bn))),Pn},Nt.unstable_shouldYield=An,Nt.unstable_wrapCallback=function(Pn){var Bn=un;return function(){var Gn=un;un=Bn;try{return Pn.apply(this,arguments)}finally{un=Gn}}}})(scheduler_production_min);scheduler.exports=scheduler_production_min;var schedulerExports=scheduler.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa$1=reactExports,ca$1=schedulerExports;function p$4(Nt){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+Nt,Ot=1;Ot<arguments.length;Ot++)s+="&args[]="+encodeURIComponent(arguments[Ot]);return"Minified React error #"+Nt+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var da$1=new Set,ea$1={};function fa$1(Nt,s){ha$1(Nt,s),ha$1(Nt+"Capture",s)}function ha$1(Nt,s){for(ea$1[Nt]=s,Nt=0;Nt<s.length;Nt++)da$1.add(s[Nt])}var ia$1=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ja=Object.prototype.hasOwnProperty,ka$1=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,la={},ma$1={};function oa$1(Nt){return ja.call(ma$1,Nt)?!0:ja.call(la,Nt)?!1:ka$1.test(Nt)?ma$1[Nt]=!0:(la[Nt]=!0,!1)}function pa$1(Nt,s,Ot,en){if(Ot!==null&&Ot.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return en?!1:Ot!==null?!Ot.acceptsBooleans:(Nt=Nt.toLowerCase().slice(0,5),Nt!=="data-"&&Nt!=="aria-");default:return!1}}function qa$1(Nt,s,Ot,en){if(s===null||typeof s>"u"||pa$1(Nt,s,Ot,en))return!0;if(en)return!1;if(Ot!==null)switch(Ot.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function v$4(Nt,s,Ot,en,tn,nn,rn){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=en,this.attributeNamespace=tn,this.mustUseProperty=Ot,this.propertyName=Nt,this.type=s,this.sanitizeURL=nn,this.removeEmptyString=rn}var z$2={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(Nt){z$2[Nt]=new v$4(Nt,0,!1,Nt,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(Nt){var s=Nt[0];z$2[s]=new v$4(s,1,!1,Nt[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(Nt){z$2[Nt]=new v$4(Nt,2,!1,Nt.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(Nt){z$2[Nt]=new v$4(Nt,2,!1,Nt,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(Nt){z$2[Nt]=new v$4(Nt,3,!1,Nt.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(Nt){z$2[Nt]=new v$4(Nt,3,!0,Nt,null,!1,!1)});["capture","download"].forEach(function(Nt){z$2[Nt]=new v$4(Nt,4,!1,Nt,null,!1,!1)});["cols","rows","size","span"].forEach(function(Nt){z$2[Nt]=new v$4(Nt,6,!1,Nt,null,!1,!1)});["rowSpan","start"].forEach(function(Nt){z$2[Nt]=new v$4(Nt,5,!1,Nt.toLowerCase(),null,!1,!1)});var ra$1=/[\-:]([a-z])/g;function sa$1(Nt){return Nt[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(Nt){var s=Nt.replace(ra$1,sa$1);z$2[s]=new v$4(s,1,!1,Nt,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(Nt){var s=Nt.replace(ra$1,sa$1);z$2[s]=new v$4(s,1,!1,Nt,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(Nt){var s=Nt.replace(ra$1,sa$1);z$2[s]=new v$4(s,1,!1,Nt,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(Nt){z$2[Nt]=new v$4(Nt,1,!1,Nt.toLowerCase(),null,!1,!1)});z$2.xlinkHref=new v$4("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(Nt){z$2[Nt]=new v$4(Nt,1,!1,Nt.toLowerCase(),null,!0,!0)});function ta$1(Nt,s,Ot,en){var tn=z$2.hasOwnProperty(s)?z$2[s]:null;(tn!==null?tn.type!==0:en||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(qa$1(s,Ot,tn,en)&&(Ot=null),en||tn===null?oa$1(s)&&(Ot===null?Nt.removeAttribute(s):Nt.setAttribute(s,""+Ot)):tn.mustUseProperty?Nt[tn.propertyName]=Ot===null?tn.type===3?!1:"":Ot:(s=tn.attributeName,en=tn.attributeNamespace,Ot===null?Nt.removeAttribute(s):(tn=tn.type,Ot=tn===3||tn===4&&Ot===!0?"":""+Ot,en?Nt.setAttributeNS(en,s,Ot):Nt.setAttribute(s,Ot))))}var ua$1=aa$1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,va$1=Symbol.for("react.element"),wa$1=Symbol.for("react.portal"),ya$1=Symbol.for("react.fragment"),za$1=Symbol.for("react.strict_mode"),Aa$1=Symbol.for("react.profiler"),Ba$1=Symbol.for("react.provider"),Ca$1=Symbol.for("react.context"),Da$1=Symbol.for("react.forward_ref"),Ea$1=Symbol.for("react.suspense"),Fa$1=Symbol.for("react.suspense_list"),Ga$1=Symbol.for("react.memo"),Ha$1=Symbol.for("react.lazy"),Ia$1=Symbol.for("react.offscreen"),Ja$1=Symbol.iterator;function Ka(Nt){return Nt===null||typeof Nt!="object"?null:(Nt=Ja$1&&Nt[Ja$1]||Nt["@@iterator"],typeof Nt=="function"?Nt:null)}var A$2=Object.assign,La;function Ma$1(Nt){if(La===void 0)try{throw Error()}catch(Ot){var s=Ot.stack.trim().match(/\n( *(at )?)/);La=s&&s[1]||""}return`
`+La+Nt}var Na$1=!1;function Oa$1(Nt,s){if(!Nt||Na$1)return"";Na$1=!0;var Ot=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(an){var en=an}Reflect.construct(Nt,[],s)}else{try{s.call()}catch(an){en=an}Nt.call(s.prototype)}else{try{throw Error()}catch(an){en=an}Nt()}}catch(an){if(an&&en&&typeof an.stack=="string"){for(var tn=an.stack.split(`
`),nn=en.stack.split(`
`),rn=tn.length-1,on=nn.length-1;1<=rn&&0<=on&&tn[rn]!==nn[on];)on--;for(;1<=rn&&0<=on;rn--,on--)if(tn[rn]!==nn[on]){if(rn!==1||on!==1)do if(rn--,on--,0>on||tn[rn]!==nn[on]){var sn=`
`+tn[rn].replace(" at new "," at ");return Nt.displayName&&sn.includes("<anonymous>")&&(sn=sn.replace("<anonymous>",Nt.displayName)),sn}while(1<=rn&&0<=on);break}}}finally{Na$1=!1,Error.prepareStackTrace=Ot}return(Nt=Nt?Nt.displayName||Nt.name:"")?Ma$1(Nt):""}function Pa$1(Nt){switch(Nt.tag){case 5:return Ma$1(Nt.type);case 16:return Ma$1("Lazy");case 13:return Ma$1("Suspense");case 19:return Ma$1("SuspenseList");case 0:case 2:case 15:return Nt=Oa$1(Nt.type,!1),Nt;case 11:return Nt=Oa$1(Nt.type.render,!1),Nt;case 1:return Nt=Oa$1(Nt.type,!0),Nt;default:return""}}function Qa$1(Nt){if(Nt==null)return null;if(typeof Nt=="function")return Nt.displayName||Nt.name||null;if(typeof Nt=="string")return Nt;switch(Nt){case ya$1:return"Fragment";case wa$1:return"Portal";case Aa$1:return"Profiler";case za$1:return"StrictMode";case Ea$1:return"Suspense";case Fa$1:return"SuspenseList"}if(typeof Nt=="object")switch(Nt.$$typeof){case Ca$1:return(Nt.displayName||"Context")+".Consumer";case Ba$1:return(Nt._context.displayName||"Context")+".Provider";case Da$1:var s=Nt.render;return Nt=Nt.displayName,Nt||(Nt=s.displayName||s.name||"",Nt=Nt!==""?"ForwardRef("+Nt+")":"ForwardRef"),Nt;case Ga$1:return s=Nt.displayName||null,s!==null?s:Qa$1(Nt.type)||"Memo";case Ha$1:s=Nt._payload,Nt=Nt._init;try{return Qa$1(Nt(s))}catch{}}return null}function Ra$1(Nt){var s=Nt.type;switch(Nt.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return Nt=s.render,Nt=Nt.displayName||Nt.name||"",s.displayName||(Nt!==""?"ForwardRef("+Nt+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qa$1(s);case 8:return s===za$1?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function Sa$1(Nt){switch(typeof Nt){case"boolean":case"number":case"string":case"undefined":return Nt;case"object":return Nt;default:return""}}function Ta$1(Nt){var s=Nt.type;return(Nt=Nt.nodeName)&&Nt.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Ua$1(Nt){var s=Ta$1(Nt)?"checked":"value",Ot=Object.getOwnPropertyDescriptor(Nt.constructor.prototype,s),en=""+Nt[s];if(!Nt.hasOwnProperty(s)&&typeof Ot<"u"&&typeof Ot.get=="function"&&typeof Ot.set=="function"){var tn=Ot.get,nn=Ot.set;return Object.defineProperty(Nt,s,{configurable:!0,get:function(){return tn.call(this)},set:function(rn){en=""+rn,nn.call(this,rn)}}),Object.defineProperty(Nt,s,{enumerable:Ot.enumerable}),{getValue:function(){return en},setValue:function(rn){en=""+rn},stopTracking:function(){Nt._valueTracker=null,delete Nt[s]}}}}function Va$1(Nt){Nt._valueTracker||(Nt._valueTracker=Ua$1(Nt))}function Wa$1(Nt){if(!Nt)return!1;var s=Nt._valueTracker;if(!s)return!0;var Ot=s.getValue(),en="";return Nt&&(en=Ta$1(Nt)?Nt.checked?"true":"false":Nt.value),Nt=en,Nt!==Ot?(s.setValue(Nt),!0):!1}function Xa(Nt){if(Nt=Nt||(typeof document<"u"?document:void 0),typeof Nt>"u")return null;try{return Nt.activeElement||Nt.body}catch{return Nt.body}}function Ya$1(Nt,s){var Ot=s.checked;return A$2({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:Ot??Nt._wrapperState.initialChecked})}function Za$1(Nt,s){var Ot=s.defaultValue==null?"":s.defaultValue,en=s.checked!=null?s.checked:s.defaultChecked;Ot=Sa$1(s.value!=null?s.value:Ot),Nt._wrapperState={initialChecked:en,initialValue:Ot,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function ab$1(Nt,s){s=s.checked,s!=null&&ta$1(Nt,"checked",s,!1)}function bb$1(Nt,s){ab$1(Nt,s);var Ot=Sa$1(s.value),en=s.type;if(Ot!=null)en==="number"?(Ot===0&&Nt.value===""||Nt.value!=Ot)&&(Nt.value=""+Ot):Nt.value!==""+Ot&&(Nt.value=""+Ot);else if(en==="submit"||en==="reset"){Nt.removeAttribute("value");return}s.hasOwnProperty("value")?cb$1(Nt,s.type,Ot):s.hasOwnProperty("defaultValue")&&cb$1(Nt,s.type,Sa$1(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(Nt.defaultChecked=!!s.defaultChecked)}function db$2(Nt,s,Ot){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var en=s.type;if(!(en!=="submit"&&en!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+Nt._wrapperState.initialValue,Ot||s===Nt.value||(Nt.value=s),Nt.defaultValue=s}Ot=Nt.name,Ot!==""&&(Nt.name=""),Nt.defaultChecked=!!Nt._wrapperState.initialChecked,Ot!==""&&(Nt.name=Ot)}function cb$1(Nt,s,Ot){(s!=="number"||Xa(Nt.ownerDocument)!==Nt)&&(Ot==null?Nt.defaultValue=""+Nt._wrapperState.initialValue:Nt.defaultValue!==""+Ot&&(Nt.defaultValue=""+Ot))}var eb$1=Array.isArray;function fb$1(Nt,s,Ot,en){if(Nt=Nt.options,s){s={};for(var tn=0;tn<Ot.length;tn++)s["$"+Ot[tn]]=!0;for(Ot=0;Ot<Nt.length;Ot++)tn=s.hasOwnProperty("$"+Nt[Ot].value),Nt[Ot].selected!==tn&&(Nt[Ot].selected=tn),tn&&en&&(Nt[Ot].defaultSelected=!0)}else{for(Ot=""+Sa$1(Ot),s=null,tn=0;tn<Nt.length;tn++){if(Nt[tn].value===Ot){Nt[tn].selected=!0,en&&(Nt[tn].defaultSelected=!0);return}s!==null||Nt[tn].disabled||(s=Nt[tn])}s!==null&&(s.selected=!0)}}function gb$1(Nt,s){if(s.dangerouslySetInnerHTML!=null)throw Error(p$4(91));return A$2({},s,{value:void 0,defaultValue:void 0,children:""+Nt._wrapperState.initialValue})}function hb$1(Nt,s){var Ot=s.value;if(Ot==null){if(Ot=s.children,s=s.defaultValue,Ot!=null){if(s!=null)throw Error(p$4(92));if(eb$1(Ot)){if(1<Ot.length)throw Error(p$4(93));Ot=Ot[0]}s=Ot}s==null&&(s=""),Ot=s}Nt._wrapperState={initialValue:Sa$1(Ot)}}function ib$1(Nt,s){var Ot=Sa$1(s.value),en=Sa$1(s.defaultValue);Ot!=null&&(Ot=""+Ot,Ot!==Nt.value&&(Nt.value=Ot),s.defaultValue==null&&Nt.defaultValue!==Ot&&(Nt.defaultValue=Ot)),en!=null&&(Nt.defaultValue=""+en)}function jb$1(Nt){var s=Nt.textContent;s===Nt._wrapperState.initialValue&&s!==""&&s!==null&&(Nt.value=s)}function kb$1(Nt){switch(Nt){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lb$1(Nt,s){return Nt==null||Nt==="http://www.w3.org/1999/xhtml"?kb$1(s):Nt==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":Nt}var mb$1,nb$1=function(Nt){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,Ot,en,tn){MSApp.execUnsafeLocalFunction(function(){return Nt(s,Ot,en,tn)})}:Nt}(function(Nt,s){if(Nt.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in Nt)Nt.innerHTML=s;else{for(mb$1=mb$1||document.createElement("div"),mb$1.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=mb$1.firstChild;Nt.firstChild;)Nt.removeChild(Nt.firstChild);for(;s.firstChild;)Nt.appendChild(s.firstChild)}});function ob$1(Nt,s){if(s){var Ot=Nt.firstChild;if(Ot&&Ot===Nt.lastChild&&Ot.nodeType===3){Ot.nodeValue=s;return}}Nt.textContent=s}var pb$1={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qb$1=["Webkit","ms","Moz","O"];Object.keys(pb$1).forEach(function(Nt){qb$1.forEach(function(s){s=s+Nt.charAt(0).toUpperCase()+Nt.substring(1),pb$1[s]=pb$1[Nt]})});function rb$1(Nt,s,Ot){return s==null||typeof s=="boolean"||s===""?"":Ot||typeof s!="number"||s===0||pb$1.hasOwnProperty(Nt)&&pb$1[Nt]?(""+s).trim():s+"px"}function sb$1(Nt,s){Nt=Nt.style;for(var Ot in s)if(s.hasOwnProperty(Ot)){var en=Ot.indexOf("--")===0,tn=rb$1(Ot,s[Ot],en);Ot==="float"&&(Ot="cssFloat"),en?Nt.setProperty(Ot,tn):Nt[Ot]=tn}}var tb$1=A$2({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ub$1(Nt,s){if(s){if(tb$1[Nt]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(p$4(137,Nt));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(p$4(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(p$4(61))}if(s.style!=null&&typeof s.style!="object")throw Error(p$4(62))}}function vb$1(Nt,s){if(Nt.indexOf("-")===-1)return typeof s.is=="string";switch(Nt){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wb$1=null;function xb$1(Nt){return Nt=Nt.target||Nt.srcElement||window,Nt.correspondingUseElement&&(Nt=Nt.correspondingUseElement),Nt.nodeType===3?Nt.parentNode:Nt}var yb$1=null,zb$1=null,Ab$1=null;function Bb$1(Nt){if(Nt=Cb$1(Nt)){if(typeof yb$1!="function")throw Error(p$4(280));var s=Nt.stateNode;s&&(s=Db(s),yb$1(Nt.stateNode,Nt.type,s))}}function Eb$1(Nt){zb$1?Ab$1?Ab$1.push(Nt):Ab$1=[Nt]:zb$1=Nt}function Fb$1(){if(zb$1){var Nt=zb$1,s=Ab$1;if(Ab$1=zb$1=null,Bb$1(Nt),s)for(Nt=0;Nt<s.length;Nt++)Bb$1(s[Nt])}}function Gb$1(Nt,s){return Nt(s)}function Hb$1(){}var Ib$1=!1;function Jb$1(Nt,s,Ot){if(Ib$1)return Nt(s,Ot);Ib$1=!0;try{return Gb$1(Nt,s,Ot)}finally{Ib$1=!1,(zb$1!==null||Ab$1!==null)&&(Hb$1(),Fb$1())}}function Kb$1(Nt,s){var Ot=Nt.stateNode;if(Ot===null)return null;var en=Db(Ot);if(en===null)return null;Ot=en[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(en=!en.disabled)||(Nt=Nt.type,en=!(Nt==="button"||Nt==="input"||Nt==="select"||Nt==="textarea")),Nt=!en;break e;default:Nt=!1}if(Nt)return null;if(Ot&&typeof Ot!="function")throw Error(p$4(231,s,typeof Ot));return Ot}var Lb$1=!1;if(ia$1)try{var Mb$1={};Object.defineProperty(Mb$1,"passive",{get:function(){Lb$1=!0}}),window.addEventListener("test",Mb$1,Mb$1),window.removeEventListener("test",Mb$1,Mb$1)}catch{Lb$1=!1}function Nb$1(Nt,s,Ot,en,tn,nn,rn,on,sn){var an=Array.prototype.slice.call(arguments,3);try{s.apply(Ot,an)}catch(ln){this.onError(ln)}}var Ob$1=!1,Pb$1=null,Qb$1=!1,Rb$1=null,Sb$1={onError:function(Nt){Ob$1=!0,Pb$1=Nt}};function Tb$1(Nt,s,Ot,en,tn,nn,rn,on,sn){Ob$1=!1,Pb$1=null,Nb$1.apply(Sb$1,arguments)}function Ub$1(Nt,s,Ot,en,tn,nn,rn,on,sn){if(Tb$1.apply(this,arguments),Ob$1){if(Ob$1){var an=Pb$1;Ob$1=!1,Pb$1=null}else throw Error(p$4(198));Qb$1||(Qb$1=!0,Rb$1=an)}}function Vb$1(Nt){var s=Nt,Ot=Nt;if(Nt.alternate)for(;s.return;)s=s.return;else{Nt=s;do s=Nt,s.flags&4098&&(Ot=s.return),Nt=s.return;while(Nt)}return s.tag===3?Ot:null}function Wb$1(Nt){if(Nt.tag===13){var s=Nt.memoizedState;if(s===null&&(Nt=Nt.alternate,Nt!==null&&(s=Nt.memoizedState)),s!==null)return s.dehydrated}return null}function Xb$1(Nt){if(Vb$1(Nt)!==Nt)throw Error(p$4(188))}function Yb$1(Nt){var s=Nt.alternate;if(!s){if(s=Vb$1(Nt),s===null)throw Error(p$4(188));return s!==Nt?null:Nt}for(var Ot=Nt,en=s;;){var tn=Ot.return;if(tn===null)break;var nn=tn.alternate;if(nn===null){if(en=tn.return,en!==null){Ot=en;continue}break}if(tn.child===nn.child){for(nn=tn.child;nn;){if(nn===Ot)return Xb$1(tn),Nt;if(nn===en)return Xb$1(tn),s;nn=nn.sibling}throw Error(p$4(188))}if(Ot.return!==en.return)Ot=tn,en=nn;else{for(var rn=!1,on=tn.child;on;){if(on===Ot){rn=!0,Ot=tn,en=nn;break}if(on===en){rn=!0,en=tn,Ot=nn;break}on=on.sibling}if(!rn){for(on=nn.child;on;){if(on===Ot){rn=!0,Ot=nn,en=tn;break}if(on===en){rn=!0,en=nn,Ot=tn;break}on=on.sibling}if(!rn)throw Error(p$4(189))}}if(Ot.alternate!==en)throw Error(p$4(190))}if(Ot.tag!==3)throw Error(p$4(188));return Ot.stateNode.current===Ot?Nt:s}function Zb$1(Nt){return Nt=Yb$1(Nt),Nt!==null?$b$1(Nt):null}function $b$1(Nt){if(Nt.tag===5||Nt.tag===6)return Nt;for(Nt=Nt.child;Nt!==null;){var s=$b$1(Nt);if(s!==null)return s;Nt=Nt.sibling}return null}var ac$1=ca$1.unstable_scheduleCallback,bc$1=ca$1.unstable_cancelCallback,cc$1=ca$1.unstable_shouldYield,dc$1=ca$1.unstable_requestPaint,B$2=ca$1.unstable_now,ec$1=ca$1.unstable_getCurrentPriorityLevel,fc$1=ca$1.unstable_ImmediatePriority,gc$1=ca$1.unstable_UserBlockingPriority,hc$1=ca$1.unstable_NormalPriority,ic$1=ca$1.unstable_LowPriority,jc$1=ca$1.unstable_IdlePriority,kc$1=null,lc$1=null;function mc$1(Nt){if(lc$1&&typeof lc$1.onCommitFiberRoot=="function")try{lc$1.onCommitFiberRoot(kc$1,Nt,void 0,(Nt.current.flags&128)===128)}catch{}}var oc$1=Math.clz32?Math.clz32:nc$1,pc$1=Math.log,qc$1=Math.LN2;function nc$1(Nt){return Nt>>>=0,Nt===0?32:31-(pc$1(Nt)/qc$1|0)|0}var rc$1=64,sc$1=4194304;function tc$1(Nt){switch(Nt&-Nt){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return Nt&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return Nt&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return Nt}}function uc$1(Nt,s){var Ot=Nt.pendingLanes;if(Ot===0)return 0;var en=0,tn=Nt.suspendedLanes,nn=Nt.pingedLanes,rn=Ot&268435455;if(rn!==0){var on=rn&~tn;on!==0?en=tc$1(on):(nn&=rn,nn!==0&&(en=tc$1(nn)))}else rn=Ot&~tn,rn!==0?en=tc$1(rn):nn!==0&&(en=tc$1(nn));if(en===0)return 0;if(s!==0&&s!==en&&!(s&tn)&&(tn=en&-en,nn=s&-s,tn>=nn||tn===16&&(nn&4194240)!==0))return s;if(en&4&&(en|=Ot&16),s=Nt.entangledLanes,s!==0)for(Nt=Nt.entanglements,s&=en;0<s;)Ot=31-oc$1(s),tn=1<<Ot,en|=Nt[Ot],s&=~tn;return en}function vc$1(Nt,s){switch(Nt){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wc$1(Nt,s){for(var Ot=Nt.suspendedLanes,en=Nt.pingedLanes,tn=Nt.expirationTimes,nn=Nt.pendingLanes;0<nn;){var rn=31-oc$1(nn),on=1<<rn,sn=tn[rn];sn===-1?(!(on&Ot)||on&en)&&(tn[rn]=vc$1(on,s)):sn<=s&&(Nt.expiredLanes|=on),nn&=~on}}function xc$1(Nt){return Nt=Nt.pendingLanes&-1073741825,Nt!==0?Nt:Nt&1073741824?1073741824:0}function yc$1(){var Nt=rc$1;return rc$1<<=1,!(rc$1&4194240)&&(rc$1=64),Nt}function zc$1(Nt){for(var s=[],Ot=0;31>Ot;Ot++)s.push(Nt);return s}function Ac$1(Nt,s,Ot){Nt.pendingLanes|=s,s!==536870912&&(Nt.suspendedLanes=0,Nt.pingedLanes=0),Nt=Nt.eventTimes,s=31-oc$1(s),Nt[s]=Ot}function Bc$1(Nt,s){var Ot=Nt.pendingLanes&~s;Nt.pendingLanes=s,Nt.suspendedLanes=0,Nt.pingedLanes=0,Nt.expiredLanes&=s,Nt.mutableReadLanes&=s,Nt.entangledLanes&=s,s=Nt.entanglements;var en=Nt.eventTimes;for(Nt=Nt.expirationTimes;0<Ot;){var tn=31-oc$1(Ot),nn=1<<tn;s[tn]=0,en[tn]=-1,Nt[tn]=-1,Ot&=~nn}}function Cc$1(Nt,s){var Ot=Nt.entangledLanes|=s;for(Nt=Nt.entanglements;Ot;){var en=31-oc$1(Ot),tn=1<<en;tn&s|Nt[en]&s&&(Nt[en]|=s),Ot&=~tn}}var C$4=0;function Dc$1(Nt){return Nt&=-Nt,1<Nt?4<Nt?Nt&268435455?16:536870912:4:1}var Ec$1,Fc$1,Gc$1,Hc$1,Ic$1,Jc$1=!1,Kc$1=[],Lc$1=null,Mc$1=null,Nc$1=null,Oc$1=new Map,Pc$1=new Map,Qc$1=[],Rc$1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sc$1(Nt,s){switch(Nt){case"focusin":case"focusout":Lc$1=null;break;case"dragenter":case"dragleave":Mc$1=null;break;case"mouseover":case"mouseout":Nc$1=null;break;case"pointerover":case"pointerout":Oc$1.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pc$1.delete(s.pointerId)}}function Tc$1(Nt,s,Ot,en,tn,nn){return Nt===null||Nt.nativeEvent!==nn?(Nt={blockedOn:s,domEventName:Ot,eventSystemFlags:en,nativeEvent:nn,targetContainers:[tn]},s!==null&&(s=Cb$1(s),s!==null&&Fc$1(s)),Nt):(Nt.eventSystemFlags|=en,s=Nt.targetContainers,tn!==null&&s.indexOf(tn)===-1&&s.push(tn),Nt)}function Uc$1(Nt,s,Ot,en,tn){switch(s){case"focusin":return Lc$1=Tc$1(Lc$1,Nt,s,Ot,en,tn),!0;case"dragenter":return Mc$1=Tc$1(Mc$1,Nt,s,Ot,en,tn),!0;case"mouseover":return Nc$1=Tc$1(Nc$1,Nt,s,Ot,en,tn),!0;case"pointerover":var nn=tn.pointerId;return Oc$1.set(nn,Tc$1(Oc$1.get(nn)||null,Nt,s,Ot,en,tn)),!0;case"gotpointercapture":return nn=tn.pointerId,Pc$1.set(nn,Tc$1(Pc$1.get(nn)||null,Nt,s,Ot,en,tn)),!0}return!1}function Vc$1(Nt){var s=Wc$1(Nt.target);if(s!==null){var Ot=Vb$1(s);if(Ot!==null){if(s=Ot.tag,s===13){if(s=Wb$1(Ot),s!==null){Nt.blockedOn=s,Ic$1(Nt.priority,function(){Gc$1(Ot)});return}}else if(s===3&&Ot.stateNode.current.memoizedState.isDehydrated){Nt.blockedOn=Ot.tag===3?Ot.stateNode.containerInfo:null;return}}}Nt.blockedOn=null}function Xc$1(Nt){if(Nt.blockedOn!==null)return!1;for(var s=Nt.targetContainers;0<s.length;){var Ot=Yc$1(Nt.domEventName,Nt.eventSystemFlags,s[0],Nt.nativeEvent);if(Ot===null){Ot=Nt.nativeEvent;var en=new Ot.constructor(Ot.type,Ot);wb$1=en,Ot.target.dispatchEvent(en),wb$1=null}else return s=Cb$1(Ot),s!==null&&Fc$1(s),Nt.blockedOn=Ot,!1;s.shift()}return!0}function Zc$1(Nt,s,Ot){Xc$1(Nt)&&Ot.delete(s)}function $c$1(){Jc$1=!1,Lc$1!==null&&Xc$1(Lc$1)&&(Lc$1=null),Mc$1!==null&&Xc$1(Mc$1)&&(Mc$1=null),Nc$1!==null&&Xc$1(Nc$1)&&(Nc$1=null),Oc$1.forEach(Zc$1),Pc$1.forEach(Zc$1)}function ad$1(Nt,s){Nt.blockedOn===s&&(Nt.blockedOn=null,Jc$1||(Jc$1=!0,ca$1.unstable_scheduleCallback(ca$1.unstable_NormalPriority,$c$1)))}function bd$1(Nt){function s(tn){return ad$1(tn,Nt)}if(0<Kc$1.length){ad$1(Kc$1[0],Nt);for(var Ot=1;Ot<Kc$1.length;Ot++){var en=Kc$1[Ot];en.blockedOn===Nt&&(en.blockedOn=null)}}for(Lc$1!==null&&ad$1(Lc$1,Nt),Mc$1!==null&&ad$1(Mc$1,Nt),Nc$1!==null&&ad$1(Nc$1,Nt),Oc$1.forEach(s),Pc$1.forEach(s),Ot=0;Ot<Qc$1.length;Ot++)en=Qc$1[Ot],en.blockedOn===Nt&&(en.blockedOn=null);for(;0<Qc$1.length&&(Ot=Qc$1[0],Ot.blockedOn===null);)Vc$1(Ot),Ot.blockedOn===null&&Qc$1.shift()}var cd$1=ua$1.ReactCurrentBatchConfig,dd$1=!0;function ed$1(Nt,s,Ot,en){var tn=C$4,nn=cd$1.transition;cd$1.transition=null;try{C$4=1,fd$1(Nt,s,Ot,en)}finally{C$4=tn,cd$1.transition=nn}}function gd$1(Nt,s,Ot,en){var tn=C$4,nn=cd$1.transition;cd$1.transition=null;try{C$4=4,fd$1(Nt,s,Ot,en)}finally{C$4=tn,cd$1.transition=nn}}function fd$1(Nt,s,Ot,en){if(dd$1){var tn=Yc$1(Nt,s,Ot,en);if(tn===null)hd$1(Nt,s,en,id$1,Ot),Sc$1(Nt,en);else if(Uc$1(tn,Nt,s,Ot,en))en.stopPropagation();else if(Sc$1(Nt,en),s&4&&-1<Rc$1.indexOf(Nt)){for(;tn!==null;){var nn=Cb$1(tn);if(nn!==null&&Ec$1(nn),nn=Yc$1(Nt,s,Ot,en),nn===null&&hd$1(Nt,s,en,id$1,Ot),nn===tn)break;tn=nn}tn!==null&&en.stopPropagation()}else hd$1(Nt,s,en,null,Ot)}}var id$1=null;function Yc$1(Nt,s,Ot,en){if(id$1=null,Nt=xb$1(en),Nt=Wc$1(Nt),Nt!==null)if(s=Vb$1(Nt),s===null)Nt=null;else if(Ot=s.tag,Ot===13){if(Nt=Wb$1(s),Nt!==null)return Nt;Nt=null}else if(Ot===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;Nt=null}else s!==Nt&&(Nt=null);return id$1=Nt,null}function jd$1(Nt){switch(Nt){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ec$1()){case fc$1:return 1;case gc$1:return 4;case hc$1:case ic$1:return 16;case jc$1:return 536870912;default:return 16}default:return 16}}var kd$1=null,ld$1=null,md$1=null;function nd$1(){if(md$1)return md$1;var Nt,s=ld$1,Ot=s.length,en,tn="value"in kd$1?kd$1.value:kd$1.textContent,nn=tn.length;for(Nt=0;Nt<Ot&&s[Nt]===tn[Nt];Nt++);var rn=Ot-Nt;for(en=1;en<=rn&&s[Ot-en]===tn[nn-en];en++);return md$1=tn.slice(Nt,1<en?1-en:void 0)}function od$1(Nt){var s=Nt.keyCode;return"charCode"in Nt?(Nt=Nt.charCode,Nt===0&&s===13&&(Nt=13)):Nt=s,Nt===10&&(Nt=13),32<=Nt||Nt===13?Nt:0}function pd$1(){return!0}function qd$1(){return!1}function rd$1(Nt){function s(Ot,en,tn,nn,rn){this._reactName=Ot,this._targetInst=tn,this.type=en,this.nativeEvent=nn,this.target=rn,this.currentTarget=null;for(var on in Nt)Nt.hasOwnProperty(on)&&(Ot=Nt[on],this[on]=Ot?Ot(nn):nn[on]);return this.isDefaultPrevented=(nn.defaultPrevented!=null?nn.defaultPrevented:nn.returnValue===!1)?pd$1:qd$1,this.isPropagationStopped=qd$1,this}return A$2(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var Ot=this.nativeEvent;Ot&&(Ot.preventDefault?Ot.preventDefault():typeof Ot.returnValue!="unknown"&&(Ot.returnValue=!1),this.isDefaultPrevented=pd$1)},stopPropagation:function(){var Ot=this.nativeEvent;Ot&&(Ot.stopPropagation?Ot.stopPropagation():typeof Ot.cancelBubble!="unknown"&&(Ot.cancelBubble=!0),this.isPropagationStopped=pd$1)},persist:function(){},isPersistent:pd$1}),s}var sd$1={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(Nt){return Nt.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td$1=rd$1(sd$1),ud$1=A$2({},sd$1,{view:0,detail:0}),vd$1=rd$1(ud$1),wd$1,xd$1,yd$1,Ad$1=A$2({},ud$1,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd$1,button:0,buttons:0,relatedTarget:function(Nt){return Nt.relatedTarget===void 0?Nt.fromElement===Nt.srcElement?Nt.toElement:Nt.fromElement:Nt.relatedTarget},movementX:function(Nt){return"movementX"in Nt?Nt.movementX:(Nt!==yd$1&&(yd$1&&Nt.type==="mousemove"?(wd$1=Nt.screenX-yd$1.screenX,xd$1=Nt.screenY-yd$1.screenY):xd$1=wd$1=0,yd$1=Nt),wd$1)},movementY:function(Nt){return"movementY"in Nt?Nt.movementY:xd$1}}),Bd$1=rd$1(Ad$1),Cd$1=A$2({},Ad$1,{dataTransfer:0}),Dd$1=rd$1(Cd$1),Ed$1=A$2({},ud$1,{relatedTarget:0}),Fd$1=rd$1(Ed$1),Gd$1=A$2({},sd$1,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd$1=rd$1(Gd$1),Id$1=A$2({},sd$1,{clipboardData:function(Nt){return"clipboardData"in Nt?Nt.clipboardData:window.clipboardData}}),Jd$1=rd$1(Id$1),Kd$1=A$2({},sd$1,{data:0}),Ld$1=rd$1(Kd$1),Md$1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nd$1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Od$1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pd$1(Nt){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(Nt):(Nt=Od$1[Nt])?!!s[Nt]:!1}function zd$1(){return Pd$1}var Qd$1=A$2({},ud$1,{key:function(Nt){if(Nt.key){var s=Md$1[Nt.key]||Nt.key;if(s!=="Unidentified")return s}return Nt.type==="keypress"?(Nt=od$1(Nt),Nt===13?"Enter":String.fromCharCode(Nt)):Nt.type==="keydown"||Nt.type==="keyup"?Nd$1[Nt.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd$1,charCode:function(Nt){return Nt.type==="keypress"?od$1(Nt):0},keyCode:function(Nt){return Nt.type==="keydown"||Nt.type==="keyup"?Nt.keyCode:0},which:function(Nt){return Nt.type==="keypress"?od$1(Nt):Nt.type==="keydown"||Nt.type==="keyup"?Nt.keyCode:0}}),Rd$1=rd$1(Qd$1),Sd$1=A$2({},Ad$1,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td$1=rd$1(Sd$1),Ud$1=A$2({},ud$1,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd$1}),Vd$1=rd$1(Ud$1),Wd$1=A$2({},sd$1,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd$1=rd$1(Wd$1),Yd$1=A$2({},Ad$1,{deltaX:function(Nt){return"deltaX"in Nt?Nt.deltaX:"wheelDeltaX"in Nt?-Nt.wheelDeltaX:0},deltaY:function(Nt){return"deltaY"in Nt?Nt.deltaY:"wheelDeltaY"in Nt?-Nt.wheelDeltaY:"wheelDelta"in Nt?-Nt.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd$1=rd$1(Yd$1),$d$1=[9,13,27,32],ae$3=ia$1&&"CompositionEvent"in window,be$2=null;ia$1&&"documentMode"in document&&(be$2=document.documentMode);var ce=ia$1&&"TextEvent"in window&&!be$2,de=ia$1&&(!ae$3||be$2&&8<be$2&&11>=be$2),ee$2=" ",fe$2=!1;function ge$2(Nt,s){switch(Nt){case"keyup":return $d$1.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function he$2(Nt){return Nt=Nt.detail,typeof Nt=="object"&&"data"in Nt?Nt.data:null}var ie$2=!1;function je$1(Nt,s){switch(Nt){case"compositionend":return he$2(s);case"keypress":return s.which!==32?null:(fe$2=!0,ee$2);case"textInput":return Nt=s.data,Nt===ee$2&&fe$2?null:Nt;default:return null}}function ke$1(Nt,s){if(ie$2)return Nt==="compositionend"||!ae$3&&ge$2(Nt,s)?(Nt=nd$1(),md$1=ld$1=kd$1=null,ie$2=!1,Nt):null;switch(Nt){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return de&&s.locale!=="ko"?null:s.data;default:return null}}var le$2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me$2(Nt){var s=Nt&&Nt.nodeName&&Nt.nodeName.toLowerCase();return s==="input"?!!le$2[Nt.type]:s==="textarea"}function ne$1(Nt,s,Ot,en){Eb$1(en),s=oe$2(s,"onChange"),0<s.length&&(Ot=new td$1("onChange","change",null,Ot,en),Nt.push({event:Ot,listeners:s}))}var pe$1=null,qe$1=null;function re$2(Nt){se$2(Nt,0)}function te$2(Nt){var s=ue$2(Nt);if(Wa$1(s))return Nt}function ve$1(Nt,s){if(Nt==="change")return s}var we$2=!1;if(ia$1){var xe$1;if(ia$1){var ye$2="oninput"in document;if(!ye$2){var ze$1=document.createElement("div");ze$1.setAttribute("oninput","return;"),ye$2=typeof ze$1.oninput=="function"}xe$1=ye$2}else xe$1=!1;we$2=xe$1&&(!document.documentMode||9<document.documentMode)}function Ae$2(){pe$1&&(pe$1.detachEvent("onpropertychange",Be$1),qe$1=pe$1=null)}function Be$1(Nt){if(Nt.propertyName==="value"&&te$2(qe$1)){var s=[];ne$1(s,qe$1,Nt,xb$1(Nt)),Jb$1(re$2,s)}}function Ce(Nt,s,Ot){Nt==="focusin"?(Ae$2(),pe$1=s,qe$1=Ot,pe$1.attachEvent("onpropertychange",Be$1)):Nt==="focusout"&&Ae$2()}function De$1(Nt){if(Nt==="selectionchange"||Nt==="keyup"||Nt==="keydown")return te$2(qe$1)}function Ee$1(Nt,s){if(Nt==="click")return te$2(s)}function Fe$1(Nt,s){if(Nt==="input"||Nt==="change")return te$2(s)}function Ge(Nt,s){return Nt===s&&(Nt!==0||1/Nt===1/s)||Nt!==Nt&&s!==s}var He$1=typeof Object.is=="function"?Object.is:Ge;function Ie$2(Nt,s){if(He$1(Nt,s))return!0;if(typeof Nt!="object"||Nt===null||typeof s!="object"||s===null)return!1;var Ot=Object.keys(Nt),en=Object.keys(s);if(Ot.length!==en.length)return!1;for(en=0;en<Ot.length;en++){var tn=Ot[en];if(!ja.call(s,tn)||!He$1(Nt[tn],s[tn]))return!1}return!0}function Je$1(Nt){for(;Nt&&Nt.firstChild;)Nt=Nt.firstChild;return Nt}function Ke$1(Nt,s){var Ot=Je$1(Nt);Nt=0;for(var en;Ot;){if(Ot.nodeType===3){if(en=Nt+Ot.textContent.length,Nt<=s&&en>=s)return{node:Ot,offset:s-Nt};Nt=en}e:{for(;Ot;){if(Ot.nextSibling){Ot=Ot.nextSibling;break e}Ot=Ot.parentNode}Ot=void 0}Ot=Je$1(Ot)}}function Le$1(Nt,s){return Nt&&s?Nt===s?!0:Nt&&Nt.nodeType===3?!1:s&&s.nodeType===3?Le$1(Nt,s.parentNode):"contains"in Nt?Nt.contains(s):Nt.compareDocumentPosition?!!(Nt.compareDocumentPosition(s)&16):!1:!1}function Me$1(){for(var Nt=window,s=Xa();s instanceof Nt.HTMLIFrameElement;){try{var Ot=typeof s.contentWindow.location.href=="string"}catch{Ot=!1}if(Ot)Nt=s.contentWindow;else break;s=Xa(Nt.document)}return s}function Ne$1(Nt){var s=Nt&&Nt.nodeName&&Nt.nodeName.toLowerCase();return s&&(s==="input"&&(Nt.type==="text"||Nt.type==="search"||Nt.type==="tel"||Nt.type==="url"||Nt.type==="password")||s==="textarea"||Nt.contentEditable==="true")}function Oe$1(Nt){var s=Me$1(),Ot=Nt.focusedElem,en=Nt.selectionRange;if(s!==Ot&&Ot&&Ot.ownerDocument&&Le$1(Ot.ownerDocument.documentElement,Ot)){if(en!==null&&Ne$1(Ot)){if(s=en.start,Nt=en.end,Nt===void 0&&(Nt=s),"selectionStart"in Ot)Ot.selectionStart=s,Ot.selectionEnd=Math.min(Nt,Ot.value.length);else if(Nt=(s=Ot.ownerDocument||document)&&s.defaultView||window,Nt.getSelection){Nt=Nt.getSelection();var tn=Ot.textContent.length,nn=Math.min(en.start,tn);en=en.end===void 0?nn:Math.min(en.end,tn),!Nt.extend&&nn>en&&(tn=en,en=nn,nn=tn),tn=Ke$1(Ot,nn);var rn=Ke$1(Ot,en);tn&&rn&&(Nt.rangeCount!==1||Nt.anchorNode!==tn.node||Nt.anchorOffset!==tn.offset||Nt.focusNode!==rn.node||Nt.focusOffset!==rn.offset)&&(s=s.createRange(),s.setStart(tn.node,tn.offset),Nt.removeAllRanges(),nn>en?(Nt.addRange(s),Nt.extend(rn.node,rn.offset)):(s.setEnd(rn.node,rn.offset),Nt.addRange(s)))}}for(s=[],Nt=Ot;Nt=Nt.parentNode;)Nt.nodeType===1&&s.push({element:Nt,left:Nt.scrollLeft,top:Nt.scrollTop});for(typeof Ot.focus=="function"&&Ot.focus(),Ot=0;Ot<s.length;Ot++)Nt=s[Ot],Nt.element.scrollLeft=Nt.left,Nt.element.scrollTop=Nt.top}}var Pe$2=ia$1&&"documentMode"in document&&11>=document.documentMode,Qe$1=null,Re$2=null,Se$1=null,Te$1=!1;function Ue$1(Nt,s,Ot){var en=Ot.window===Ot?Ot.document:Ot.nodeType===9?Ot:Ot.ownerDocument;Te$1||Qe$1==null||Qe$1!==Xa(en)||(en=Qe$1,"selectionStart"in en&&Ne$1(en)?en={start:en.selectionStart,end:en.selectionEnd}:(en=(en.ownerDocument&&en.ownerDocument.defaultView||window).getSelection(),en={anchorNode:en.anchorNode,anchorOffset:en.anchorOffset,focusNode:en.focusNode,focusOffset:en.focusOffset}),Se$1&&Ie$2(Se$1,en)||(Se$1=en,en=oe$2(Re$2,"onSelect"),0<en.length&&(s=new td$1("onSelect","select",null,s,Ot),Nt.push({event:s,listeners:en}),s.target=Qe$1)))}function Ve$2(Nt,s){var Ot={};return Ot[Nt.toLowerCase()]=s.toLowerCase(),Ot["Webkit"+Nt]="webkit"+s,Ot["Moz"+Nt]="moz"+s,Ot}var We$1={animationend:Ve$2("Animation","AnimationEnd"),animationiteration:Ve$2("Animation","AnimationIteration"),animationstart:Ve$2("Animation","AnimationStart"),transitionend:Ve$2("Transition","TransitionEnd")},Xe$1={},Ye$1={};ia$1&&(Ye$1=document.createElement("div").style,"AnimationEvent"in window||(delete We$1.animationend.animation,delete We$1.animationiteration.animation,delete We$1.animationstart.animation),"TransitionEvent"in window||delete We$1.transitionend.transition);function Ze$1(Nt){if(Xe$1[Nt])return Xe$1[Nt];if(!We$1[Nt])return Nt;var s=We$1[Nt],Ot;for(Ot in s)if(s.hasOwnProperty(Ot)&&Ot in Ye$1)return Xe$1[Nt]=s[Ot];return Nt}var $e$1=Ze$1("animationend"),af=Ze$1("animationiteration"),bf=Ze$1("animationstart"),cf=Ze$1("transitionend"),df=new Map,ef="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ff(Nt,s){df.set(Nt,s),fa$1(s,[Nt])}for(var gf=0;gf<ef.length;gf++){var hf=ef[gf],jf=hf.toLowerCase(),kf=hf[0].toUpperCase()+hf.slice(1);ff(jf,"on"+kf)}ff($e$1,"onAnimationEnd");ff(af,"onAnimationIteration");ff(bf,"onAnimationStart");ff("dblclick","onDoubleClick");ff("focusin","onFocus");ff("focusout","onBlur");ff(cf,"onTransitionEnd");ha$1("onMouseEnter",["mouseout","mouseover"]);ha$1("onMouseLeave",["mouseout","mouseover"]);ha$1("onPointerEnter",["pointerout","pointerover"]);ha$1("onPointerLeave",["pointerout","pointerover"]);fa$1("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fa$1("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fa$1("onBeforeInput",["compositionend","keypress","textInput","paste"]);fa$1("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fa$1("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fa$1("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mf=new Set("cancel close invalid load scroll toggle".split(" ").concat(lf));function nf(Nt,s,Ot){var en=Nt.type||"unknown-event";Nt.currentTarget=Ot,Ub$1(en,s,void 0,Nt),Nt.currentTarget=null}function se$2(Nt,s){s=(s&4)!==0;for(var Ot=0;Ot<Nt.length;Ot++){var en=Nt[Ot],tn=en.event;en=en.listeners;e:{var nn=void 0;if(s)for(var rn=en.length-1;0<=rn;rn--){var on=en[rn],sn=on.instance,an=on.currentTarget;if(on=on.listener,sn!==nn&&tn.isPropagationStopped())break e;nf(tn,on,an),nn=sn}else for(rn=0;rn<en.length;rn++){if(on=en[rn],sn=on.instance,an=on.currentTarget,on=on.listener,sn!==nn&&tn.isPropagationStopped())break e;nf(tn,on,an),nn=sn}}}if(Qb$1)throw Nt=Rb$1,Qb$1=!1,Rb$1=null,Nt}function D$4(Nt,s){var Ot=s[of];Ot===void 0&&(Ot=s[of]=new Set);var en=Nt+"__bubble";Ot.has(en)||(pf(s,Nt,2,!1),Ot.add(en))}function qf(Nt,s,Ot){var en=0;s&&(en|=4),pf(Ot,Nt,en,s)}var rf="_reactListening"+Math.random().toString(36).slice(2);function sf(Nt){if(!Nt[rf]){Nt[rf]=!0,da$1.forEach(function(Ot){Ot!=="selectionchange"&&(mf.has(Ot)||qf(Ot,!1,Nt),qf(Ot,!0,Nt))});var s=Nt.nodeType===9?Nt:Nt.ownerDocument;s===null||s[rf]||(s[rf]=!0,qf("selectionchange",!1,s))}}function pf(Nt,s,Ot,en){switch(jd$1(s)){case 1:var tn=ed$1;break;case 4:tn=gd$1;break;default:tn=fd$1}Ot=tn.bind(null,s,Ot,Nt),tn=void 0,!Lb$1||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(tn=!0),en?tn!==void 0?Nt.addEventListener(s,Ot,{capture:!0,passive:tn}):Nt.addEventListener(s,Ot,!0):tn!==void 0?Nt.addEventListener(s,Ot,{passive:tn}):Nt.addEventListener(s,Ot,!1)}function hd$1(Nt,s,Ot,en,tn){var nn=en;if(!(s&1)&&!(s&2)&&en!==null)e:for(;;){if(en===null)return;var rn=en.tag;if(rn===3||rn===4){var on=en.stateNode.containerInfo;if(on===tn||on.nodeType===8&&on.parentNode===tn)break;if(rn===4)for(rn=en.return;rn!==null;){var sn=rn.tag;if((sn===3||sn===4)&&(sn=rn.stateNode.containerInfo,sn===tn||sn.nodeType===8&&sn.parentNode===tn))return;rn=rn.return}for(;on!==null;){if(rn=Wc$1(on),rn===null)return;if(sn=rn.tag,sn===5||sn===6){en=nn=rn;continue e}on=on.parentNode}}en=en.return}Jb$1(function(){var an=nn,ln=xb$1(Ot),cn=[];e:{var un=df.get(Nt);if(un!==void 0){var dn=td$1,hn=Nt;switch(Nt){case"keypress":if(od$1(Ot)===0)break e;case"keydown":case"keyup":dn=Rd$1;break;case"focusin":hn="focus",dn=Fd$1;break;case"focusout":hn="blur",dn=Fd$1;break;case"beforeblur":case"afterblur":dn=Fd$1;break;case"click":if(Ot.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":dn=Bd$1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":dn=Dd$1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":dn=Vd$1;break;case $e$1:case af:case bf:dn=Hd$1;break;case cf:dn=Xd$1;break;case"scroll":dn=vd$1;break;case"wheel":dn=Zd$1;break;case"copy":case"cut":case"paste":dn=Jd$1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":dn=Td$1}var fn=(s&4)!==0,mn=!fn&&Nt==="scroll",gn=fn?un!==null?un+"Capture":null:un;fn=[];for(var pn=an,_n;pn!==null;){_n=pn;var vn=_n.stateNode;if(_n.tag===5&&vn!==null&&(_n=vn,gn!==null&&(vn=Kb$1(pn,gn),vn!=null&&fn.push(tf(pn,vn,_n)))),mn)break;pn=pn.return}0<fn.length&&(un=new dn(un,hn,null,Ot,ln),cn.push({event:un,listeners:fn}))}}if(!(s&7)){e:{if(un=Nt==="mouseover"||Nt==="pointerover",dn=Nt==="mouseout"||Nt==="pointerout",un&&Ot!==wb$1&&(hn=Ot.relatedTarget||Ot.fromElement)&&(Wc$1(hn)||hn[uf]))break e;if((dn||un)&&(un=ln.window===ln?ln:(un=ln.ownerDocument)?un.defaultView||un.parentWindow:window,dn?(hn=Ot.relatedTarget||Ot.toElement,dn=an,hn=hn?Wc$1(hn):null,hn!==null&&(mn=Vb$1(hn),hn!==mn||hn.tag!==5&&hn.tag!==6)&&(hn=null)):(dn=null,hn=an),dn!==hn)){if(fn=Bd$1,vn="onMouseLeave",gn="onMouseEnter",pn="mouse",(Nt==="pointerout"||Nt==="pointerover")&&(fn=Td$1,vn="onPointerLeave",gn="onPointerEnter",pn="pointer"),mn=dn==null?un:ue$2(dn),_n=hn==null?un:ue$2(hn),un=new fn(vn,pn+"leave",dn,Ot,ln),un.target=mn,un.relatedTarget=_n,vn=null,Wc$1(ln)===an&&(fn=new fn(gn,pn+"enter",hn,Ot,ln),fn.target=_n,fn.relatedTarget=mn,vn=fn),mn=vn,dn&&hn)t:{for(fn=dn,gn=hn,pn=0,_n=fn;_n;_n=vf(_n))pn++;for(_n=0,vn=gn;vn;vn=vf(vn))_n++;for(;0<pn-_n;)fn=vf(fn),pn--;for(;0<_n-pn;)gn=vf(gn),_n--;for(;pn--;){if(fn===gn||gn!==null&&fn===gn.alternate)break t;fn=vf(fn),gn=vf(gn)}fn=null}else fn=null;dn!==null&&wf(cn,un,dn,fn,!1),hn!==null&&mn!==null&&wf(cn,mn,hn,fn,!0)}}e:{if(un=an?ue$2(an):window,dn=un.nodeName&&un.nodeName.toLowerCase(),dn==="select"||dn==="input"&&un.type==="file")var bn=ve$1;else if(me$2(un))if(we$2)bn=Fe$1;else{bn=De$1;var wn=Ce}else(dn=un.nodeName)&&dn.toLowerCase()==="input"&&(un.type==="checkbox"||un.type==="radio")&&(bn=Ee$1);if(bn&&(bn=bn(Nt,an))){ne$1(cn,bn,Ot,ln);break e}wn&&wn(Nt,un,an),Nt==="focusout"&&(wn=un._wrapperState)&&wn.controlled&&un.type==="number"&&cb$1(un,"number",un.value)}switch(wn=an?ue$2(an):window,Nt){case"focusin":(me$2(wn)||wn.contentEditable==="true")&&(Qe$1=wn,Re$2=an,Se$1=null);break;case"focusout":Se$1=Re$2=Qe$1=null;break;case"mousedown":Te$1=!0;break;case"contextmenu":case"mouseup":case"dragend":Te$1=!1,Ue$1(cn,Ot,ln);break;case"selectionchange":if(Pe$2)break;case"keydown":case"keyup":Ue$1(cn,Ot,ln)}var Sn;if(ae$3)e:{switch(Nt){case"compositionstart":var kn="onCompositionStart";break e;case"compositionend":kn="onCompositionEnd";break e;case"compositionupdate":kn="onCompositionUpdate";break e}kn=void 0}else ie$2?ge$2(Nt,Ot)&&(kn="onCompositionEnd"):Nt==="keydown"&&Ot.keyCode===229&&(kn="onCompositionStart");kn&&(de&&Ot.locale!=="ko"&&(ie$2||kn!=="onCompositionStart"?kn==="onCompositionEnd"&&ie$2&&(Sn=nd$1()):(kd$1=ln,ld$1="value"in kd$1?kd$1.value:kd$1.textContent,ie$2=!0)),wn=oe$2(an,kn),0<wn.length&&(kn=new Ld$1(kn,Nt,null,Ot,ln),cn.push({event:kn,listeners:wn}),Sn?kn.data=Sn:(Sn=he$2(Ot),Sn!==null&&(kn.data=Sn)))),(Sn=ce?je$1(Nt,Ot):ke$1(Nt,Ot))&&(an=oe$2(an,"onBeforeInput"),0<an.length&&(ln=new Ld$1("onBeforeInput","beforeinput",null,Ot,ln),cn.push({event:ln,listeners:an}),ln.data=Sn))}se$2(cn,s)})}function tf(Nt,s,Ot){return{instance:Nt,listener:s,currentTarget:Ot}}function oe$2(Nt,s){for(var Ot=s+"Capture",en=[];Nt!==null;){var tn=Nt,nn=tn.stateNode;tn.tag===5&&nn!==null&&(tn=nn,nn=Kb$1(Nt,Ot),nn!=null&&en.unshift(tf(Nt,nn,tn)),nn=Kb$1(Nt,s),nn!=null&&en.push(tf(Nt,nn,tn))),Nt=Nt.return}return en}function vf(Nt){if(Nt===null)return null;do Nt=Nt.return;while(Nt&&Nt.tag!==5);return Nt||null}function wf(Nt,s,Ot,en,tn){for(var nn=s._reactName,rn=[];Ot!==null&&Ot!==en;){var on=Ot,sn=on.alternate,an=on.stateNode;if(sn!==null&&sn===en)break;on.tag===5&&an!==null&&(on=an,tn?(sn=Kb$1(Ot,nn),sn!=null&&rn.unshift(tf(Ot,sn,on))):tn||(sn=Kb$1(Ot,nn),sn!=null&&rn.push(tf(Ot,sn,on)))),Ot=Ot.return}rn.length!==0&&Nt.push({event:s,listeners:rn})}var xf=/\r\n?/g,yf=/\u0000|\uFFFD/g;function zf(Nt){return(typeof Nt=="string"?Nt:""+Nt).replace(xf,`
`).replace(yf,"")}function Af(Nt,s,Ot){if(s=zf(s),zf(Nt)!==s&&Ot)throw Error(p$4(425))}function Bf(){}var Cf=null,Df=null;function Ef(Nt,s){return Nt==="textarea"||Nt==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Ff=typeof setTimeout=="function"?setTimeout:void 0,Gf=typeof clearTimeout=="function"?clearTimeout:void 0,Hf=typeof Promise=="function"?Promise:void 0,Jf=typeof queueMicrotask=="function"?queueMicrotask:typeof Hf<"u"?function(Nt){return Hf.resolve(null).then(Nt).catch(If)}:Ff;function If(Nt){setTimeout(function(){throw Nt})}function Kf(Nt,s){var Ot=s,en=0;do{var tn=Ot.nextSibling;if(Nt.removeChild(Ot),tn&&tn.nodeType===8)if(Ot=tn.data,Ot==="/$"){if(en===0){Nt.removeChild(tn),bd$1(s);return}en--}else Ot!=="$"&&Ot!=="$?"&&Ot!=="$!"||en++;Ot=tn}while(Ot);bd$1(s)}function Lf(Nt){for(;Nt!=null;Nt=Nt.nextSibling){var s=Nt.nodeType;if(s===1||s===3)break;if(s===8){if(s=Nt.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return Nt}function Mf(Nt){Nt=Nt.previousSibling;for(var s=0;Nt;){if(Nt.nodeType===8){var Ot=Nt.data;if(Ot==="$"||Ot==="$!"||Ot==="$?"){if(s===0)return Nt;s--}else Ot==="/$"&&s++}Nt=Nt.previousSibling}return null}var Nf=Math.random().toString(36).slice(2),Of="__reactFiber$"+Nf,Pf="__reactProps$"+Nf,uf="__reactContainer$"+Nf,of="__reactEvents$"+Nf,Qf="__reactListeners$"+Nf,Rf="__reactHandles$"+Nf;function Wc$1(Nt){var s=Nt[Of];if(s)return s;for(var Ot=Nt.parentNode;Ot;){if(s=Ot[uf]||Ot[Of]){if(Ot=s.alternate,s.child!==null||Ot!==null&&Ot.child!==null)for(Nt=Mf(Nt);Nt!==null;){if(Ot=Nt[Of])return Ot;Nt=Mf(Nt)}return s}Nt=Ot,Ot=Nt.parentNode}return null}function Cb$1(Nt){return Nt=Nt[Of]||Nt[uf],!Nt||Nt.tag!==5&&Nt.tag!==6&&Nt.tag!==13&&Nt.tag!==3?null:Nt}function ue$2(Nt){if(Nt.tag===5||Nt.tag===6)return Nt.stateNode;throw Error(p$4(33))}function Db(Nt){return Nt[Pf]||null}var Sf=[],Tf=-1;function Uf(Nt){return{current:Nt}}function E$1(Nt){0>Tf||(Nt.current=Sf[Tf],Sf[Tf]=null,Tf--)}function G$2(Nt,s){Tf++,Sf[Tf]=Nt.current,Nt.current=s}var Vf={},H$3=Uf(Vf),Wf=Uf(!1),Xf=Vf;function Yf(Nt,s){var Ot=Nt.type.contextTypes;if(!Ot)return Vf;var en=Nt.stateNode;if(en&&en.__reactInternalMemoizedUnmaskedChildContext===s)return en.__reactInternalMemoizedMaskedChildContext;var tn={},nn;for(nn in Ot)tn[nn]=s[nn];return en&&(Nt=Nt.stateNode,Nt.__reactInternalMemoizedUnmaskedChildContext=s,Nt.__reactInternalMemoizedMaskedChildContext=tn),tn}function Zf(Nt){return Nt=Nt.childContextTypes,Nt!=null}function $f(){E$1(Wf),E$1(H$3)}function ag(Nt,s,Ot){if(H$3.current!==Vf)throw Error(p$4(168));G$2(H$3,s),G$2(Wf,Ot)}function bg(Nt,s,Ot){var en=Nt.stateNode;if(s=s.childContextTypes,typeof en.getChildContext!="function")return Ot;en=en.getChildContext();for(var tn in en)if(!(tn in s))throw Error(p$4(108,Ra$1(Nt)||"Unknown",tn));return A$2({},Ot,en)}function cg(Nt){return Nt=(Nt=Nt.stateNode)&&Nt.__reactInternalMemoizedMergedChildContext||Vf,Xf=H$3.current,G$2(H$3,Nt),G$2(Wf,Wf.current),!0}function dg(Nt,s,Ot){var en=Nt.stateNode;if(!en)throw Error(p$4(169));Ot?(Nt=bg(Nt,s,Xf),en.__reactInternalMemoizedMergedChildContext=Nt,E$1(Wf),E$1(H$3),G$2(H$3,Nt)):E$1(Wf),G$2(Wf,Ot)}var eg=null,fg=!1,gg=!1;function hg(Nt){eg===null?eg=[Nt]:eg.push(Nt)}function ig(Nt){fg=!0,hg(Nt)}function jg(){if(!gg&&eg!==null){gg=!0;var Nt=0,s=C$4;try{var Ot=eg;for(C$4=1;Nt<Ot.length;Nt++){var en=Ot[Nt];do en=en(!0);while(en!==null)}eg=null,fg=!1}catch(tn){throw eg!==null&&(eg=eg.slice(Nt+1)),ac$1(fc$1,jg),tn}finally{C$4=s,gg=!1}}return null}var kg=[],lg=0,mg=null,ng=0,og=[],pg=0,qg=null,rg=1,sg="";function tg(Nt,s){kg[lg++]=ng,kg[lg++]=mg,mg=Nt,ng=s}function ug(Nt,s,Ot){og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,qg=Nt;var en=rg;Nt=sg;var tn=32-oc$1(en)-1;en&=~(1<<tn),Ot+=1;var nn=32-oc$1(s)+tn;if(30<nn){var rn=tn-tn%5;nn=(en&(1<<rn)-1).toString(32),en>>=rn,tn-=rn,rg=1<<32-oc$1(s)+tn|Ot<<tn|en,sg=nn+Nt}else rg=1<<nn|Ot<<tn|en,sg=Nt}function vg(Nt){Nt.return!==null&&(tg(Nt,1),ug(Nt,1,0))}function wg(Nt){for(;Nt===mg;)mg=kg[--lg],kg[lg]=null,ng=kg[--lg],kg[lg]=null;for(;Nt===qg;)qg=og[--pg],og[pg]=null,sg=og[--pg],og[pg]=null,rg=og[--pg],og[pg]=null}var xg=null,yg=null,I$3=!1,zg=null;function Ag(Nt,s){var Ot=Bg(5,null,null,0);Ot.elementType="DELETED",Ot.stateNode=s,Ot.return=Nt,s=Nt.deletions,s===null?(Nt.deletions=[Ot],Nt.flags|=16):s.push(Ot)}function Cg(Nt,s){switch(Nt.tag){case 5:var Ot=Nt.type;return s=s.nodeType!==1||Ot.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(Nt.stateNode=s,xg=Nt,yg=Lf(s.firstChild),!0):!1;case 6:return s=Nt.pendingProps===""||s.nodeType!==3?null:s,s!==null?(Nt.stateNode=s,xg=Nt,yg=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(Ot=qg!==null?{id:rg,overflow:sg}:null,Nt.memoizedState={dehydrated:s,treeContext:Ot,retryLane:1073741824},Ot=Bg(18,null,null,0),Ot.stateNode=s,Ot.return=Nt,Nt.child=Ot,xg=Nt,yg=null,!0):!1;default:return!1}}function Dg(Nt){return(Nt.mode&1)!==0&&(Nt.flags&128)===0}function Eg(Nt){if(I$3){var s=yg;if(s){var Ot=s;if(!Cg(Nt,s)){if(Dg(Nt))throw Error(p$4(418));s=Lf(Ot.nextSibling);var en=xg;s&&Cg(Nt,s)?Ag(en,Ot):(Nt.flags=Nt.flags&-4097|2,I$3=!1,xg=Nt)}}else{if(Dg(Nt))throw Error(p$4(418));Nt.flags=Nt.flags&-4097|2,I$3=!1,xg=Nt}}}function Fg(Nt){for(Nt=Nt.return;Nt!==null&&Nt.tag!==5&&Nt.tag!==3&&Nt.tag!==13;)Nt=Nt.return;xg=Nt}function Gg(Nt){if(Nt!==xg)return!1;if(!I$3)return Fg(Nt),I$3=!0,!1;var s;if((s=Nt.tag!==3)&&!(s=Nt.tag!==5)&&(s=Nt.type,s=s!=="head"&&s!=="body"&&!Ef(Nt.type,Nt.memoizedProps)),s&&(s=yg)){if(Dg(Nt))throw Hg(),Error(p$4(418));for(;s;)Ag(Nt,s),s=Lf(s.nextSibling)}if(Fg(Nt),Nt.tag===13){if(Nt=Nt.memoizedState,Nt=Nt!==null?Nt.dehydrated:null,!Nt)throw Error(p$4(317));e:{for(Nt=Nt.nextSibling,s=0;Nt;){if(Nt.nodeType===8){var Ot=Nt.data;if(Ot==="/$"){if(s===0){yg=Lf(Nt.nextSibling);break e}s--}else Ot!=="$"&&Ot!=="$!"&&Ot!=="$?"||s++}Nt=Nt.nextSibling}yg=null}}else yg=xg?Lf(Nt.stateNode.nextSibling):null;return!0}function Hg(){for(var Nt=yg;Nt;)Nt=Lf(Nt.nextSibling)}function Ig(){yg=xg=null,I$3=!1}function Jg(Nt){zg===null?zg=[Nt]:zg.push(Nt)}var Kg=ua$1.ReactCurrentBatchConfig;function Lg(Nt,s){if(Nt&&Nt.defaultProps){s=A$2({},s),Nt=Nt.defaultProps;for(var Ot in Nt)s[Ot]===void 0&&(s[Ot]=Nt[Ot]);return s}return s}var Mg=Uf(null),Ng=null,Og=null,Pg=null;function Qg(){Pg=Og=Ng=null}function Rg(Nt){var s=Mg.current;E$1(Mg),Nt._currentValue=s}function Sg(Nt,s,Ot){for(;Nt!==null;){var en=Nt.alternate;if((Nt.childLanes&s)!==s?(Nt.childLanes|=s,en!==null&&(en.childLanes|=s)):en!==null&&(en.childLanes&s)!==s&&(en.childLanes|=s),Nt===Ot)break;Nt=Nt.return}}function Tg(Nt,s){Ng=Nt,Pg=Og=null,Nt=Nt.dependencies,Nt!==null&&Nt.firstContext!==null&&(Nt.lanes&s&&(Ug=!0),Nt.firstContext=null)}function Vg(Nt){var s=Nt._currentValue;if(Pg!==Nt)if(Nt={context:Nt,memoizedValue:s,next:null},Og===null){if(Ng===null)throw Error(p$4(308));Og=Nt,Ng.dependencies={lanes:0,firstContext:Nt}}else Og=Og.next=Nt;return s}var Wg=null;function Xg(Nt){Wg===null?Wg=[Nt]:Wg.push(Nt)}function Yg(Nt,s,Ot,en){var tn=s.interleaved;return tn===null?(Ot.next=Ot,Xg(s)):(Ot.next=tn.next,tn.next=Ot),s.interleaved=Ot,Zg(Nt,en)}function Zg(Nt,s){Nt.lanes|=s;var Ot=Nt.alternate;for(Ot!==null&&(Ot.lanes|=s),Ot=Nt,Nt=Nt.return;Nt!==null;)Nt.childLanes|=s,Ot=Nt.alternate,Ot!==null&&(Ot.childLanes|=s),Ot=Nt,Nt=Nt.return;return Ot.tag===3?Ot.stateNode:null}var $g=!1;function ah(Nt){Nt.updateQueue={baseState:Nt.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function bh(Nt,s){Nt=Nt.updateQueue,s.updateQueue===Nt&&(s.updateQueue={baseState:Nt.baseState,firstBaseUpdate:Nt.firstBaseUpdate,lastBaseUpdate:Nt.lastBaseUpdate,shared:Nt.shared,effects:Nt.effects})}function ch(Nt,s){return{eventTime:Nt,lane:s,tag:0,payload:null,callback:null,next:null}}function dh(Nt,s,Ot){var en=Nt.updateQueue;if(en===null)return null;if(en=en.shared,K$2&2){var tn=en.pending;return tn===null?s.next=s:(s.next=tn.next,tn.next=s),en.pending=s,Zg(Nt,Ot)}return tn=en.interleaved,tn===null?(s.next=s,Xg(en)):(s.next=tn.next,tn.next=s),en.interleaved=s,Zg(Nt,Ot)}function eh(Nt,s,Ot){if(s=s.updateQueue,s!==null&&(s=s.shared,(Ot&4194240)!==0)){var en=s.lanes;en&=Nt.pendingLanes,Ot|=en,s.lanes=Ot,Cc$1(Nt,Ot)}}function fh(Nt,s){var Ot=Nt.updateQueue,en=Nt.alternate;if(en!==null&&(en=en.updateQueue,Ot===en)){var tn=null,nn=null;if(Ot=Ot.firstBaseUpdate,Ot!==null){do{var rn={eventTime:Ot.eventTime,lane:Ot.lane,tag:Ot.tag,payload:Ot.payload,callback:Ot.callback,next:null};nn===null?tn=nn=rn:nn=nn.next=rn,Ot=Ot.next}while(Ot!==null);nn===null?tn=nn=s:nn=nn.next=s}else tn=nn=s;Ot={baseState:en.baseState,firstBaseUpdate:tn,lastBaseUpdate:nn,shared:en.shared,effects:en.effects},Nt.updateQueue=Ot;return}Nt=Ot.lastBaseUpdate,Nt===null?Ot.firstBaseUpdate=s:Nt.next=s,Ot.lastBaseUpdate=s}function gh(Nt,s,Ot,en){var tn=Nt.updateQueue;$g=!1;var nn=tn.firstBaseUpdate,rn=tn.lastBaseUpdate,on=tn.shared.pending;if(on!==null){tn.shared.pending=null;var sn=on,an=sn.next;sn.next=null,rn===null?nn=an:rn.next=an,rn=sn;var ln=Nt.alternate;ln!==null&&(ln=ln.updateQueue,on=ln.lastBaseUpdate,on!==rn&&(on===null?ln.firstBaseUpdate=an:on.next=an,ln.lastBaseUpdate=sn))}if(nn!==null){var cn=tn.baseState;rn=0,ln=an=sn=null,on=nn;do{var un=on.lane,dn=on.eventTime;if((en&un)===un){ln!==null&&(ln=ln.next={eventTime:dn,lane:0,tag:on.tag,payload:on.payload,callback:on.callback,next:null});e:{var hn=Nt,fn=on;switch(un=s,dn=Ot,fn.tag){case 1:if(hn=fn.payload,typeof hn=="function"){cn=hn.call(dn,cn,un);break e}cn=hn;break e;case 3:hn.flags=hn.flags&-65537|128;case 0:if(hn=fn.payload,un=typeof hn=="function"?hn.call(dn,cn,un):hn,un==null)break e;cn=A$2({},cn,un);break e;case 2:$g=!0}}on.callback!==null&&on.lane!==0&&(Nt.flags|=64,un=tn.effects,un===null?tn.effects=[on]:un.push(on))}else dn={eventTime:dn,lane:un,tag:on.tag,payload:on.payload,callback:on.callback,next:null},ln===null?(an=ln=dn,sn=cn):ln=ln.next=dn,rn|=un;if(on=on.next,on===null){if(on=tn.shared.pending,on===null)break;un=on,on=un.next,un.next=null,tn.lastBaseUpdate=un,tn.shared.pending=null}}while(!0);if(ln===null&&(sn=cn),tn.baseState=sn,tn.firstBaseUpdate=an,tn.lastBaseUpdate=ln,s=tn.shared.interleaved,s!==null){tn=s;do rn|=tn.lane,tn=tn.next;while(tn!==s)}else nn===null&&(tn.shared.lanes=0);hh|=rn,Nt.lanes=rn,Nt.memoizedState=cn}}function ih(Nt,s,Ot){if(Nt=s.effects,s.effects=null,Nt!==null)for(s=0;s<Nt.length;s++){var en=Nt[s],tn=en.callback;if(tn!==null){if(en.callback=null,en=Ot,typeof tn!="function")throw Error(p$4(191,tn));tn.call(en)}}}var jh=new aa$1.Component().refs;function kh(Nt,s,Ot,en){s=Nt.memoizedState,Ot=Ot(en,s),Ot=Ot==null?s:A$2({},s,Ot),Nt.memoizedState=Ot,Nt.lanes===0&&(Nt.updateQueue.baseState=Ot)}var nh={isMounted:function(Nt){return(Nt=Nt._reactInternals)?Vb$1(Nt)===Nt:!1},enqueueSetState:function(Nt,s,Ot){Nt=Nt._reactInternals;var en=L$2(),tn=lh(Nt),nn=ch(en,tn);nn.payload=s,Ot!=null&&(nn.callback=Ot),s=dh(Nt,nn,tn),s!==null&&(mh(s,Nt,tn,en),eh(s,Nt,tn))},enqueueReplaceState:function(Nt,s,Ot){Nt=Nt._reactInternals;var en=L$2(),tn=lh(Nt),nn=ch(en,tn);nn.tag=1,nn.payload=s,Ot!=null&&(nn.callback=Ot),s=dh(Nt,nn,tn),s!==null&&(mh(s,Nt,tn,en),eh(s,Nt,tn))},enqueueForceUpdate:function(Nt,s){Nt=Nt._reactInternals;var Ot=L$2(),en=lh(Nt),tn=ch(Ot,en);tn.tag=2,s!=null&&(tn.callback=s),s=dh(Nt,tn,en),s!==null&&(mh(s,Nt,en,Ot),eh(s,Nt,en))}};function oh(Nt,s,Ot,en,tn,nn,rn){return Nt=Nt.stateNode,typeof Nt.shouldComponentUpdate=="function"?Nt.shouldComponentUpdate(en,nn,rn):s.prototype&&s.prototype.isPureReactComponent?!Ie$2(Ot,en)||!Ie$2(tn,nn):!0}function ph(Nt,s,Ot){var en=!1,tn=Vf,nn=s.contextType;return typeof nn=="object"&&nn!==null?nn=Vg(nn):(tn=Zf(s)?Xf:H$3.current,en=s.contextTypes,nn=(en=en!=null)?Yf(Nt,tn):Vf),s=new s(Ot,nn),Nt.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=nh,Nt.stateNode=s,s._reactInternals=Nt,en&&(Nt=Nt.stateNode,Nt.__reactInternalMemoizedUnmaskedChildContext=tn,Nt.__reactInternalMemoizedMaskedChildContext=nn),s}function qh(Nt,s,Ot,en){Nt=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(Ot,en),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(Ot,en),s.state!==Nt&&nh.enqueueReplaceState(s,s.state,null)}function rh(Nt,s,Ot,en){var tn=Nt.stateNode;tn.props=Ot,tn.state=Nt.memoizedState,tn.refs=jh,ah(Nt);var nn=s.contextType;typeof nn=="object"&&nn!==null?tn.context=Vg(nn):(nn=Zf(s)?Xf:H$3.current,tn.context=Yf(Nt,nn)),tn.state=Nt.memoizedState,nn=s.getDerivedStateFromProps,typeof nn=="function"&&(kh(Nt,s,nn,Ot),tn.state=Nt.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof tn.getSnapshotBeforeUpdate=="function"||typeof tn.UNSAFE_componentWillMount!="function"&&typeof tn.componentWillMount!="function"||(s=tn.state,typeof tn.componentWillMount=="function"&&tn.componentWillMount(),typeof tn.UNSAFE_componentWillMount=="function"&&tn.UNSAFE_componentWillMount(),s!==tn.state&&nh.enqueueReplaceState(tn,tn.state,null),gh(Nt,Ot,tn,en),tn.state=Nt.memoizedState),typeof tn.componentDidMount=="function"&&(Nt.flags|=4194308)}function sh(Nt,s,Ot){if(Nt=Ot.ref,Nt!==null&&typeof Nt!="function"&&typeof Nt!="object"){if(Ot._owner){if(Ot=Ot._owner,Ot){if(Ot.tag!==1)throw Error(p$4(309));var en=Ot.stateNode}if(!en)throw Error(p$4(147,Nt));var tn=en,nn=""+Nt;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===nn?s.ref:(s=function(rn){var on=tn.refs;on===jh&&(on=tn.refs={}),rn===null?delete on[nn]:on[nn]=rn},s._stringRef=nn,s)}if(typeof Nt!="string")throw Error(p$4(284));if(!Ot._owner)throw Error(p$4(290,Nt))}return Nt}function th(Nt,s){throw Nt=Object.prototype.toString.call(s),Error(p$4(31,Nt==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":Nt))}function uh(Nt){var s=Nt._init;return s(Nt._payload)}function vh(Nt){function s(gn,pn){if(Nt){var _n=gn.deletions;_n===null?(gn.deletions=[pn],gn.flags|=16):_n.push(pn)}}function Ot(gn,pn){if(!Nt)return null;for(;pn!==null;)s(gn,pn),pn=pn.sibling;return null}function en(gn,pn){for(gn=new Map;pn!==null;)pn.key!==null?gn.set(pn.key,pn):gn.set(pn.index,pn),pn=pn.sibling;return gn}function tn(gn,pn){return gn=wh(gn,pn),gn.index=0,gn.sibling=null,gn}function nn(gn,pn,_n){return gn.index=_n,Nt?(_n=gn.alternate,_n!==null?(_n=_n.index,_n<pn?(gn.flags|=2,pn):_n):(gn.flags|=2,pn)):(gn.flags|=1048576,pn)}function rn(gn){return Nt&&gn.alternate===null&&(gn.flags|=2),gn}function on(gn,pn,_n,vn){return pn===null||pn.tag!==6?(pn=xh(_n,gn.mode,vn),pn.return=gn,pn):(pn=tn(pn,_n),pn.return=gn,pn)}function sn(gn,pn,_n,vn){var bn=_n.type;return bn===ya$1?ln(gn,pn,_n.props.children,vn,_n.key):pn!==null&&(pn.elementType===bn||typeof bn=="object"&&bn!==null&&bn.$$typeof===Ha$1&&uh(bn)===pn.type)?(vn=tn(pn,_n.props),vn.ref=sh(gn,pn,_n),vn.return=gn,vn):(vn=yh(_n.type,_n.key,_n.props,null,gn.mode,vn),vn.ref=sh(gn,pn,_n),vn.return=gn,vn)}function an(gn,pn,_n,vn){return pn===null||pn.tag!==4||pn.stateNode.containerInfo!==_n.containerInfo||pn.stateNode.implementation!==_n.implementation?(pn=zh(_n,gn.mode,vn),pn.return=gn,pn):(pn=tn(pn,_n.children||[]),pn.return=gn,pn)}function ln(gn,pn,_n,vn,bn){return pn===null||pn.tag!==7?(pn=Ah(_n,gn.mode,vn,bn),pn.return=gn,pn):(pn=tn(pn,_n),pn.return=gn,pn)}function cn(gn,pn,_n){if(typeof pn=="string"&&pn!==""||typeof pn=="number")return pn=xh(""+pn,gn.mode,_n),pn.return=gn,pn;if(typeof pn=="object"&&pn!==null){switch(pn.$$typeof){case va$1:return _n=yh(pn.type,pn.key,pn.props,null,gn.mode,_n),_n.ref=sh(gn,null,pn),_n.return=gn,_n;case wa$1:return pn=zh(pn,gn.mode,_n),pn.return=gn,pn;case Ha$1:var vn=pn._init;return cn(gn,vn(pn._payload),_n)}if(eb$1(pn)||Ka(pn))return pn=Ah(pn,gn.mode,_n,null),pn.return=gn,pn;th(gn,pn)}return null}function un(gn,pn,_n,vn){var bn=pn!==null?pn.key:null;if(typeof _n=="string"&&_n!==""||typeof _n=="number")return bn!==null?null:on(gn,pn,""+_n,vn);if(typeof _n=="object"&&_n!==null){switch(_n.$$typeof){case va$1:return _n.key===bn?sn(gn,pn,_n,vn):null;case wa$1:return _n.key===bn?an(gn,pn,_n,vn):null;case Ha$1:return bn=_n._init,un(gn,pn,bn(_n._payload),vn)}if(eb$1(_n)||Ka(_n))return bn!==null?null:ln(gn,pn,_n,vn,null);th(gn,_n)}return null}function dn(gn,pn,_n,vn,bn){if(typeof vn=="string"&&vn!==""||typeof vn=="number")return gn=gn.get(_n)||null,on(pn,gn,""+vn,bn);if(typeof vn=="object"&&vn!==null){switch(vn.$$typeof){case va$1:return gn=gn.get(vn.key===null?_n:vn.key)||null,sn(pn,gn,vn,bn);case wa$1:return gn=gn.get(vn.key===null?_n:vn.key)||null,an(pn,gn,vn,bn);case Ha$1:var wn=vn._init;return dn(gn,pn,_n,wn(vn._payload),bn)}if(eb$1(vn)||Ka(vn))return gn=gn.get(_n)||null,ln(pn,gn,vn,bn,null);th(pn,vn)}return null}function hn(gn,pn,_n,vn){for(var bn=null,wn=null,Sn=pn,kn=pn=0,En=null;Sn!==null&&kn<_n.length;kn++){Sn.index>kn?(En=Sn,Sn=null):En=Sn.sibling;var In=un(gn,Sn,_n[kn],vn);if(In===null){Sn===null&&(Sn=En);break}Nt&&Sn&&In.alternate===null&&s(gn,Sn),pn=nn(In,pn,kn),wn===null?bn=In:wn.sibling=In,wn=In,Sn=En}if(kn===_n.length)return Ot(gn,Sn),I$3&&tg(gn,kn),bn;if(Sn===null){for(;kn<_n.length;kn++)Sn=cn(gn,_n[kn],vn),Sn!==null&&(pn=nn(Sn,pn,kn),wn===null?bn=Sn:wn.sibling=Sn,wn=Sn);return I$3&&tg(gn,kn),bn}for(Sn=en(gn,Sn);kn<_n.length;kn++)En=dn(Sn,gn,kn,_n[kn],vn),En!==null&&(Nt&&En.alternate!==null&&Sn.delete(En.key===null?kn:En.key),pn=nn(En,pn,kn),wn===null?bn=En:wn.sibling=En,wn=En);return Nt&&Sn.forEach(function(An){return s(gn,An)}),I$3&&tg(gn,kn),bn}function fn(gn,pn,_n,vn){var bn=Ka(_n);if(typeof bn!="function")throw Error(p$4(150));if(_n=bn.call(_n),_n==null)throw Error(p$4(151));for(var wn=bn=null,Sn=pn,kn=pn=0,En=null,In=_n.next();Sn!==null&&!In.done;kn++,In=_n.next()){Sn.index>kn?(En=Sn,Sn=null):En=Sn.sibling;var An=un(gn,Sn,In.value,vn);if(An===null){Sn===null&&(Sn=En);break}Nt&&Sn&&An.alternate===null&&s(gn,Sn),pn=nn(An,pn,kn),wn===null?bn=An:wn.sibling=An,wn=An,Sn=En}if(In.done)return Ot(gn,Sn),I$3&&tg(gn,kn),bn;if(Sn===null){for(;!In.done;kn++,In=_n.next())In=cn(gn,In.value,vn),In!==null&&(pn=nn(In,pn,kn),wn===null?bn=In:wn.sibling=In,wn=In);return I$3&&tg(gn,kn),bn}for(Sn=en(gn,Sn);!In.done;kn++,In=_n.next())In=dn(Sn,gn,kn,In.value,vn),In!==null&&(Nt&&In.alternate!==null&&Sn.delete(In.key===null?kn:In.key),pn=nn(In,pn,kn),wn===null?bn=In:wn.sibling=In,wn=In);return Nt&&Sn.forEach(function(Rn){return s(gn,Rn)}),I$3&&tg(gn,kn),bn}function mn(gn,pn,_n,vn){if(typeof _n=="object"&&_n!==null&&_n.type===ya$1&&_n.key===null&&(_n=_n.props.children),typeof _n=="object"&&_n!==null){switch(_n.$$typeof){case va$1:e:{for(var bn=_n.key,wn=pn;wn!==null;){if(wn.key===bn){if(bn=_n.type,bn===ya$1){if(wn.tag===7){Ot(gn,wn.sibling),pn=tn(wn,_n.props.children),pn.return=gn,gn=pn;break e}}else if(wn.elementType===bn||typeof bn=="object"&&bn!==null&&bn.$$typeof===Ha$1&&uh(bn)===wn.type){Ot(gn,wn.sibling),pn=tn(wn,_n.props),pn.ref=sh(gn,wn,_n),pn.return=gn,gn=pn;break e}Ot(gn,wn);break}else s(gn,wn);wn=wn.sibling}_n.type===ya$1?(pn=Ah(_n.props.children,gn.mode,vn,_n.key),pn.return=gn,gn=pn):(vn=yh(_n.type,_n.key,_n.props,null,gn.mode,vn),vn.ref=sh(gn,pn,_n),vn.return=gn,gn=vn)}return rn(gn);case wa$1:e:{for(wn=_n.key;pn!==null;){if(pn.key===wn)if(pn.tag===4&&pn.stateNode.containerInfo===_n.containerInfo&&pn.stateNode.implementation===_n.implementation){Ot(gn,pn.sibling),pn=tn(pn,_n.children||[]),pn.return=gn,gn=pn;break e}else{Ot(gn,pn);break}else s(gn,pn);pn=pn.sibling}pn=zh(_n,gn.mode,vn),pn.return=gn,gn=pn}return rn(gn);case Ha$1:return wn=_n._init,mn(gn,pn,wn(_n._payload),vn)}if(eb$1(_n))return hn(gn,pn,_n,vn);if(Ka(_n))return fn(gn,pn,_n,vn);th(gn,_n)}return typeof _n=="string"&&_n!==""||typeof _n=="number"?(_n=""+_n,pn!==null&&pn.tag===6?(Ot(gn,pn.sibling),pn=tn(pn,_n),pn.return=gn,gn=pn):(Ot(gn,pn),pn=xh(_n,gn.mode,vn),pn.return=gn,gn=pn),rn(gn)):Ot(gn,pn)}return mn}var Bh=vh(!0),Ch=vh(!1),Dh={},Eh=Uf(Dh),Fh=Uf(Dh),Gh=Uf(Dh);function Hh(Nt){if(Nt===Dh)throw Error(p$4(174));return Nt}function Ih(Nt,s){switch(G$2(Gh,s),G$2(Fh,Nt),G$2(Eh,Dh),Nt=s.nodeType,Nt){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:lb$1(null,"");break;default:Nt=Nt===8?s.parentNode:s,s=Nt.namespaceURI||null,Nt=Nt.tagName,s=lb$1(s,Nt)}E$1(Eh),G$2(Eh,s)}function Jh(){E$1(Eh),E$1(Fh),E$1(Gh)}function Kh(Nt){Hh(Gh.current);var s=Hh(Eh.current),Ot=lb$1(s,Nt.type);s!==Ot&&(G$2(Fh,Nt),G$2(Eh,Ot))}function Lh(Nt){Fh.current===Nt&&(E$1(Eh),E$1(Fh))}var M$4=Uf(0);function Mh(Nt){for(var s=Nt;s!==null;){if(s.tag===13){var Ot=s.memoizedState;if(Ot!==null&&(Ot=Ot.dehydrated,Ot===null||Ot.data==="$?"||Ot.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if(s.flags&128)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===Nt)break;for(;s.sibling===null;){if(s.return===null||s.return===Nt)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Nh=[];function Oh(){for(var Nt=0;Nt<Nh.length;Nt++)Nh[Nt]._workInProgressVersionPrimary=null;Nh.length=0}var Ph=ua$1.ReactCurrentDispatcher,Qh=ua$1.ReactCurrentBatchConfig,Rh=0,N$2=null,O$2=null,P$3=null,Sh=!1,Th=!1,Uh=0,Vh=0;function Q$1(){throw Error(p$4(321))}function Wh(Nt,s){if(s===null)return!1;for(var Ot=0;Ot<s.length&&Ot<Nt.length;Ot++)if(!He$1(Nt[Ot],s[Ot]))return!1;return!0}function Xh(Nt,s,Ot,en,tn,nn){if(Rh=nn,N$2=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Ph.current=Nt===null||Nt.memoizedState===null?Yh:Zh,Nt=Ot(en,tn),Th){nn=0;do{if(Th=!1,Uh=0,25<=nn)throw Error(p$4(301));nn+=1,P$3=O$2=null,s.updateQueue=null,Ph.current=$h,Nt=Ot(en,tn)}while(Th)}if(Ph.current=ai$1,s=O$2!==null&&O$2.next!==null,Rh=0,P$3=O$2=N$2=null,Sh=!1,s)throw Error(p$4(300));return Nt}function bi$1(){var Nt=Uh!==0;return Uh=0,Nt}function ci$1(){var Nt={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return P$3===null?N$2.memoizedState=P$3=Nt:P$3=P$3.next=Nt,P$3}function di$1(){if(O$2===null){var Nt=N$2.alternate;Nt=Nt!==null?Nt.memoizedState:null}else Nt=O$2.next;var s=P$3===null?N$2.memoizedState:P$3.next;if(s!==null)P$3=s,O$2=Nt;else{if(Nt===null)throw Error(p$4(310));O$2=Nt,Nt={memoizedState:O$2.memoizedState,baseState:O$2.baseState,baseQueue:O$2.baseQueue,queue:O$2.queue,next:null},P$3===null?N$2.memoizedState=P$3=Nt:P$3=P$3.next=Nt}return P$3}function ei$1(Nt,s){return typeof s=="function"?s(Nt):s}function fi$2(Nt){var s=di$1(),Ot=s.queue;if(Ot===null)throw Error(p$4(311));Ot.lastRenderedReducer=Nt;var en=O$2,tn=en.baseQueue,nn=Ot.pending;if(nn!==null){if(tn!==null){var rn=tn.next;tn.next=nn.next,nn.next=rn}en.baseQueue=tn=nn,Ot.pending=null}if(tn!==null){nn=tn.next,en=en.baseState;var on=rn=null,sn=null,an=nn;do{var ln=an.lane;if((Rh&ln)===ln)sn!==null&&(sn=sn.next={lane:0,action:an.action,hasEagerState:an.hasEagerState,eagerState:an.eagerState,next:null}),en=an.hasEagerState?an.eagerState:Nt(en,an.action);else{var cn={lane:ln,action:an.action,hasEagerState:an.hasEagerState,eagerState:an.eagerState,next:null};sn===null?(on=sn=cn,rn=en):sn=sn.next=cn,N$2.lanes|=ln,hh|=ln}an=an.next}while(an!==null&&an!==nn);sn===null?rn=en:sn.next=on,He$1(en,s.memoizedState)||(Ug=!0),s.memoizedState=en,s.baseState=rn,s.baseQueue=sn,Ot.lastRenderedState=en}if(Nt=Ot.interleaved,Nt!==null){tn=Nt;do nn=tn.lane,N$2.lanes|=nn,hh|=nn,tn=tn.next;while(tn!==Nt)}else tn===null&&(Ot.lanes=0);return[s.memoizedState,Ot.dispatch]}function gi$1(Nt){var s=di$1(),Ot=s.queue;if(Ot===null)throw Error(p$4(311));Ot.lastRenderedReducer=Nt;var en=Ot.dispatch,tn=Ot.pending,nn=s.memoizedState;if(tn!==null){Ot.pending=null;var rn=tn=tn.next;do nn=Nt(nn,rn.action),rn=rn.next;while(rn!==tn);He$1(nn,s.memoizedState)||(Ug=!0),s.memoizedState=nn,s.baseQueue===null&&(s.baseState=nn),Ot.lastRenderedState=nn}return[nn,en]}function hi$1(){}function ii$1(Nt,s){var Ot=N$2,en=di$1(),tn=s(),nn=!He$1(en.memoizedState,tn);if(nn&&(en.memoizedState=tn,Ug=!0),en=en.queue,ji(ki$1.bind(null,Ot,en,Nt),[Nt]),en.getSnapshot!==s||nn||P$3!==null&&P$3.memoizedState.tag&1){if(Ot.flags|=2048,li$1(9,mi$1.bind(null,Ot,en,tn,s),void 0,null),R$4===null)throw Error(p$4(349));Rh&30||ni$1(Ot,s,tn)}return tn}function ni$1(Nt,s,Ot){Nt.flags|=16384,Nt={getSnapshot:s,value:Ot},s=N$2.updateQueue,s===null?(s={lastEffect:null,stores:null},N$2.updateQueue=s,s.stores=[Nt]):(Ot=s.stores,Ot===null?s.stores=[Nt]:Ot.push(Nt))}function mi$1(Nt,s,Ot,en){s.value=Ot,s.getSnapshot=en,oi$1(s)&&pi$1(Nt)}function ki$1(Nt,s,Ot){return Ot(function(){oi$1(s)&&pi$1(Nt)})}function oi$1(Nt){var s=Nt.getSnapshot;Nt=Nt.value;try{var Ot=s();return!He$1(Nt,Ot)}catch{return!0}}function pi$1(Nt){var s=Zg(Nt,1);s!==null&&mh(s,Nt,1,-1)}function qi(Nt){var s=ci$1();return typeof Nt=="function"&&(Nt=Nt()),s.memoizedState=s.baseState=Nt,Nt={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ei$1,lastRenderedState:Nt},s.queue=Nt,Nt=Nt.dispatch=ri$1.bind(null,N$2,Nt),[s.memoizedState,Nt]}function li$1(Nt,s,Ot,en){return Nt={tag:Nt,create:s,destroy:Ot,deps:en,next:null},s=N$2.updateQueue,s===null?(s={lastEffect:null,stores:null},N$2.updateQueue=s,s.lastEffect=Nt.next=Nt):(Ot=s.lastEffect,Ot===null?s.lastEffect=Nt.next=Nt:(en=Ot.next,Ot.next=Nt,Nt.next=en,s.lastEffect=Nt)),Nt}function si$1(){return di$1().memoizedState}function ti$1(Nt,s,Ot,en){var tn=ci$1();N$2.flags|=Nt,tn.memoizedState=li$1(1|s,Ot,void 0,en===void 0?null:en)}function ui$1(Nt,s,Ot,en){var tn=di$1();en=en===void 0?null:en;var nn=void 0;if(O$2!==null){var rn=O$2.memoizedState;if(nn=rn.destroy,en!==null&&Wh(en,rn.deps)){tn.memoizedState=li$1(s,Ot,nn,en);return}}N$2.flags|=Nt,tn.memoizedState=li$1(1|s,Ot,nn,en)}function vi$1(Nt,s){return ti$1(8390656,8,Nt,s)}function ji(Nt,s){return ui$1(2048,8,Nt,s)}function wi$1(Nt,s){return ui$1(4,2,Nt,s)}function xi$1(Nt,s){return ui$1(4,4,Nt,s)}function yi$1(Nt,s){if(typeof s=="function")return Nt=Nt(),s(Nt),function(){s(null)};if(s!=null)return Nt=Nt(),s.current=Nt,function(){s.current=null}}function zi(Nt,s,Ot){return Ot=Ot!=null?Ot.concat([Nt]):null,ui$1(4,4,yi$1.bind(null,s,Nt),Ot)}function Ai(){}function Bi(Nt,s){var Ot=di$1();s=s===void 0?null:s;var en=Ot.memoizedState;return en!==null&&s!==null&&Wh(s,en[1])?en[0]:(Ot.memoizedState=[Nt,s],Nt)}function Ci(Nt,s){var Ot=di$1();s=s===void 0?null:s;var en=Ot.memoizedState;return en!==null&&s!==null&&Wh(s,en[1])?en[0]:(Nt=Nt(),Ot.memoizedState=[Nt,s],Nt)}function Di(Nt,s,Ot){return Rh&21?(He$1(Ot,s)||(Ot=yc$1(),N$2.lanes|=Ot,hh|=Ot,Nt.baseState=!0),s):(Nt.baseState&&(Nt.baseState=!1,Ug=!0),Nt.memoizedState=Ot)}function Ei$1(Nt,s){var Ot=C$4;C$4=Ot!==0&&4>Ot?Ot:4,Nt(!0);var en=Qh.transition;Qh.transition={};try{Nt(!1),s()}finally{C$4=Ot,Qh.transition=en}}function Fi(){return di$1().memoizedState}function Gi(Nt,s,Ot){var en=lh(Nt);if(Ot={lane:en,action:Ot,hasEagerState:!1,eagerState:null,next:null},Hi(Nt))Ii(s,Ot);else if(Ot=Yg(Nt,s,Ot,en),Ot!==null){var tn=L$2();mh(Ot,Nt,en,tn),Ji(Ot,s,en)}}function ri$1(Nt,s,Ot){var en=lh(Nt),tn={lane:en,action:Ot,hasEagerState:!1,eagerState:null,next:null};if(Hi(Nt))Ii(s,tn);else{var nn=Nt.alternate;if(Nt.lanes===0&&(nn===null||nn.lanes===0)&&(nn=s.lastRenderedReducer,nn!==null))try{var rn=s.lastRenderedState,on=nn(rn,Ot);if(tn.hasEagerState=!0,tn.eagerState=on,He$1(on,rn)){var sn=s.interleaved;sn===null?(tn.next=tn,Xg(s)):(tn.next=sn.next,sn.next=tn),s.interleaved=tn;return}}catch{}finally{}Ot=Yg(Nt,s,tn,en),Ot!==null&&(tn=L$2(),mh(Ot,Nt,en,tn),Ji(Ot,s,en))}}function Hi(Nt){var s=Nt.alternate;return Nt===N$2||s!==null&&s===N$2}function Ii(Nt,s){Th=Sh=!0;var Ot=Nt.pending;Ot===null?s.next=s:(s.next=Ot.next,Ot.next=s),Nt.pending=s}function Ji(Nt,s,Ot){if(Ot&4194240){var en=s.lanes;en&=Nt.pendingLanes,Ot|=en,s.lanes=Ot,Cc$1(Nt,Ot)}}var ai$1={readContext:Vg,useCallback:Q$1,useContext:Q$1,useEffect:Q$1,useImperativeHandle:Q$1,useInsertionEffect:Q$1,useLayoutEffect:Q$1,useMemo:Q$1,useReducer:Q$1,useRef:Q$1,useState:Q$1,useDebugValue:Q$1,useDeferredValue:Q$1,useTransition:Q$1,useMutableSource:Q$1,useSyncExternalStore:Q$1,useId:Q$1,unstable_isNewReconciler:!1},Yh={readContext:Vg,useCallback:function(Nt,s){return ci$1().memoizedState=[Nt,s===void 0?null:s],Nt},useContext:Vg,useEffect:vi$1,useImperativeHandle:function(Nt,s,Ot){return Ot=Ot!=null?Ot.concat([Nt]):null,ti$1(4194308,4,yi$1.bind(null,s,Nt),Ot)},useLayoutEffect:function(Nt,s){return ti$1(4194308,4,Nt,s)},useInsertionEffect:function(Nt,s){return ti$1(4,2,Nt,s)},useMemo:function(Nt,s){var Ot=ci$1();return s=s===void 0?null:s,Nt=Nt(),Ot.memoizedState=[Nt,s],Nt},useReducer:function(Nt,s,Ot){var en=ci$1();return s=Ot!==void 0?Ot(s):s,en.memoizedState=en.baseState=s,Nt={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Nt,lastRenderedState:s},en.queue=Nt,Nt=Nt.dispatch=Gi.bind(null,N$2,Nt),[en.memoizedState,Nt]},useRef:function(Nt){var s=ci$1();return Nt={current:Nt},s.memoizedState=Nt},useState:qi,useDebugValue:Ai,useDeferredValue:function(Nt){return ci$1().memoizedState=Nt},useTransition:function(){var Nt=qi(!1),s=Nt[0];return Nt=Ei$1.bind(null,Nt[1]),ci$1().memoizedState=Nt,[s,Nt]},useMutableSource:function(){},useSyncExternalStore:function(Nt,s,Ot){var en=N$2,tn=ci$1();if(I$3){if(Ot===void 0)throw Error(p$4(407));Ot=Ot()}else{if(Ot=s(),R$4===null)throw Error(p$4(349));Rh&30||ni$1(en,s,Ot)}tn.memoizedState=Ot;var nn={value:Ot,getSnapshot:s};return tn.queue=nn,vi$1(ki$1.bind(null,en,nn,Nt),[Nt]),en.flags|=2048,li$1(9,mi$1.bind(null,en,nn,Ot,s),void 0,null),Ot},useId:function(){var Nt=ci$1(),s=R$4.identifierPrefix;if(I$3){var Ot=sg,en=rg;Ot=(en&~(1<<32-oc$1(en)-1)).toString(32)+Ot,s=":"+s+"R"+Ot,Ot=Uh++,0<Ot&&(s+="H"+Ot.toString(32)),s+=":"}else Ot=Vh++,s=":"+s+"r"+Ot.toString(32)+":";return Nt.memoizedState=s},unstable_isNewReconciler:!1},Zh={readContext:Vg,useCallback:Bi,useContext:Vg,useEffect:ji,useImperativeHandle:zi,useInsertionEffect:wi$1,useLayoutEffect:xi$1,useMemo:Ci,useReducer:fi$2,useRef:si$1,useState:function(){return fi$2(ei$1)},useDebugValue:Ai,useDeferredValue:function(Nt){var s=di$1();return Di(s,O$2.memoizedState,Nt)},useTransition:function(){var Nt=fi$2(ei$1)[0],s=di$1().memoizedState;return[Nt,s]},useMutableSource:hi$1,useSyncExternalStore:ii$1,useId:Fi,unstable_isNewReconciler:!1},$h={readContext:Vg,useCallback:Bi,useContext:Vg,useEffect:ji,useImperativeHandle:zi,useInsertionEffect:wi$1,useLayoutEffect:xi$1,useMemo:Ci,useReducer:gi$1,useRef:si$1,useState:function(){return gi$1(ei$1)},useDebugValue:Ai,useDeferredValue:function(Nt){var s=di$1();return O$2===null?s.memoizedState=Nt:Di(s,O$2.memoizedState,Nt)},useTransition:function(){var Nt=gi$1(ei$1)[0],s=di$1().memoizedState;return[Nt,s]},useMutableSource:hi$1,useSyncExternalStore:ii$1,useId:Fi,unstable_isNewReconciler:!1};function Ki(Nt,s){try{var Ot="",en=s;do Ot+=Pa$1(en),en=en.return;while(en);var tn=Ot}catch(nn){tn=`
Error generating stack: `+nn.message+`
`+nn.stack}return{value:Nt,source:s,stack:tn,digest:null}}function Li(Nt,s,Ot){return{value:Nt,source:null,stack:Ot??null,digest:s??null}}function Mi(Nt,s){try{console.error(s.value)}catch(Ot){setTimeout(function(){throw Ot})}}var Ni=typeof WeakMap=="function"?WeakMap:Map;function Oi(Nt,s,Ot){Ot=ch(-1,Ot),Ot.tag=3,Ot.payload={element:null};var en=s.value;return Ot.callback=function(){Pi||(Pi=!0,Qi=en),Mi(Nt,s)},Ot}function Ri(Nt,s,Ot){Ot=ch(-1,Ot),Ot.tag=3;var en=Nt.type.getDerivedStateFromError;if(typeof en=="function"){var tn=s.value;Ot.payload=function(){return en(tn)},Ot.callback=function(){Mi(Nt,s)}}var nn=Nt.stateNode;return nn!==null&&typeof nn.componentDidCatch=="function"&&(Ot.callback=function(){Mi(Nt,s),typeof en!="function"&&(Si===null?Si=new Set([this]):Si.add(this));var rn=s.stack;this.componentDidCatch(s.value,{componentStack:rn!==null?rn:""})}),Ot}function Ti(Nt,s,Ot){var en=Nt.pingCache;if(en===null){en=Nt.pingCache=new Ni;var tn=new Set;en.set(s,tn)}else tn=en.get(s),tn===void 0&&(tn=new Set,en.set(s,tn));tn.has(Ot)||(tn.add(Ot),Nt=Ui.bind(null,Nt,s,Ot),s.then(Nt,Nt))}function Vi(Nt){do{var s;if((s=Nt.tag===13)&&(s=Nt.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return Nt;Nt=Nt.return}while(Nt!==null);return null}function Wi(Nt,s,Ot,en,tn){return Nt.mode&1?(Nt.flags|=65536,Nt.lanes=tn,Nt):(Nt===s?Nt.flags|=65536:(Nt.flags|=128,Ot.flags|=131072,Ot.flags&=-52805,Ot.tag===1&&(Ot.alternate===null?Ot.tag=17:(s=ch(-1,1),s.tag=2,dh(Ot,s,1))),Ot.lanes|=1),Nt)}var Xi=ua$1.ReactCurrentOwner,Ug=!1;function Yi(Nt,s,Ot,en){s.child=Nt===null?Ch(s,null,Ot,en):Bh(s,Nt.child,Ot,en)}function Zi(Nt,s,Ot,en,tn){Ot=Ot.render;var nn=s.ref;return Tg(s,tn),en=Xh(Nt,s,Ot,en,nn,tn),Ot=bi$1(),Nt!==null&&!Ug?(s.updateQueue=Nt.updateQueue,s.flags&=-2053,Nt.lanes&=~tn,$i(Nt,s,tn)):(I$3&&Ot&&vg(s),s.flags|=1,Yi(Nt,s,en,tn),s.child)}function aj(Nt,s,Ot,en,tn){if(Nt===null){var nn=Ot.type;return typeof nn=="function"&&!bj(nn)&&nn.defaultProps===void 0&&Ot.compare===null&&Ot.defaultProps===void 0?(s.tag=15,s.type=nn,cj(Nt,s,nn,en,tn)):(Nt=yh(Ot.type,null,en,s,s.mode,tn),Nt.ref=s.ref,Nt.return=s,s.child=Nt)}if(nn=Nt.child,!(Nt.lanes&tn)){var rn=nn.memoizedProps;if(Ot=Ot.compare,Ot=Ot!==null?Ot:Ie$2,Ot(rn,en)&&Nt.ref===s.ref)return $i(Nt,s,tn)}return s.flags|=1,Nt=wh(nn,en),Nt.ref=s.ref,Nt.return=s,s.child=Nt}function cj(Nt,s,Ot,en,tn){if(Nt!==null){var nn=Nt.memoizedProps;if(Ie$2(nn,en)&&Nt.ref===s.ref)if(Ug=!1,s.pendingProps=en=nn,(Nt.lanes&tn)!==0)Nt.flags&131072&&(Ug=!0);else return s.lanes=Nt.lanes,$i(Nt,s,tn)}return dj(Nt,s,Ot,en,tn)}function ej(Nt,s,Ot){var en=s.pendingProps,tn=en.children,nn=Nt!==null?Nt.memoizedState:null;if(en.mode==="hidden")if(!(s.mode&1))s.memoizedState={baseLanes:0,cachePool:null,transitions:null},G$2(fj,gj),gj|=Ot;else{if(!(Ot&1073741824))return Nt=nn!==null?nn.baseLanes|Ot:Ot,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:Nt,cachePool:null,transitions:null},s.updateQueue=null,G$2(fj,gj),gj|=Nt,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},en=nn!==null?nn.baseLanes:Ot,G$2(fj,gj),gj|=en}else nn!==null?(en=nn.baseLanes|Ot,s.memoizedState=null):en=Ot,G$2(fj,gj),gj|=en;return Yi(Nt,s,tn,Ot),s.child}function hj(Nt,s){var Ot=s.ref;(Nt===null&&Ot!==null||Nt!==null&&Nt.ref!==Ot)&&(s.flags|=512,s.flags|=2097152)}function dj(Nt,s,Ot,en,tn){var nn=Zf(Ot)?Xf:H$3.current;return nn=Yf(s,nn),Tg(s,tn),Ot=Xh(Nt,s,Ot,en,nn,tn),en=bi$1(),Nt!==null&&!Ug?(s.updateQueue=Nt.updateQueue,s.flags&=-2053,Nt.lanes&=~tn,$i(Nt,s,tn)):(I$3&&en&&vg(s),s.flags|=1,Yi(Nt,s,Ot,tn),s.child)}function ij(Nt,s,Ot,en,tn){if(Zf(Ot)){var nn=!0;cg(s)}else nn=!1;if(Tg(s,tn),s.stateNode===null)jj(Nt,s),ph(s,Ot,en),rh(s,Ot,en,tn),en=!0;else if(Nt===null){var rn=s.stateNode,on=s.memoizedProps;rn.props=on;var sn=rn.context,an=Ot.contextType;typeof an=="object"&&an!==null?an=Vg(an):(an=Zf(Ot)?Xf:H$3.current,an=Yf(s,an));var ln=Ot.getDerivedStateFromProps,cn=typeof ln=="function"||typeof rn.getSnapshotBeforeUpdate=="function";cn||typeof rn.UNSAFE_componentWillReceiveProps!="function"&&typeof rn.componentWillReceiveProps!="function"||(on!==en||sn!==an)&&qh(s,rn,en,an),$g=!1;var un=s.memoizedState;rn.state=un,gh(s,en,rn,tn),sn=s.memoizedState,on!==en||un!==sn||Wf.current||$g?(typeof ln=="function"&&(kh(s,Ot,ln,en),sn=s.memoizedState),(on=$g||oh(s,Ot,on,en,un,sn,an))?(cn||typeof rn.UNSAFE_componentWillMount!="function"&&typeof rn.componentWillMount!="function"||(typeof rn.componentWillMount=="function"&&rn.componentWillMount(),typeof rn.UNSAFE_componentWillMount=="function"&&rn.UNSAFE_componentWillMount()),typeof rn.componentDidMount=="function"&&(s.flags|=4194308)):(typeof rn.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=en,s.memoizedState=sn),rn.props=en,rn.state=sn,rn.context=an,en=on):(typeof rn.componentDidMount=="function"&&(s.flags|=4194308),en=!1)}else{rn=s.stateNode,bh(Nt,s),on=s.memoizedProps,an=s.type===s.elementType?on:Lg(s.type,on),rn.props=an,cn=s.pendingProps,un=rn.context,sn=Ot.contextType,typeof sn=="object"&&sn!==null?sn=Vg(sn):(sn=Zf(Ot)?Xf:H$3.current,sn=Yf(s,sn));var dn=Ot.getDerivedStateFromProps;(ln=typeof dn=="function"||typeof rn.getSnapshotBeforeUpdate=="function")||typeof rn.UNSAFE_componentWillReceiveProps!="function"&&typeof rn.componentWillReceiveProps!="function"||(on!==cn||un!==sn)&&qh(s,rn,en,sn),$g=!1,un=s.memoizedState,rn.state=un,gh(s,en,rn,tn);var hn=s.memoizedState;on!==cn||un!==hn||Wf.current||$g?(typeof dn=="function"&&(kh(s,Ot,dn,en),hn=s.memoizedState),(an=$g||oh(s,Ot,an,en,un,hn,sn)||!1)?(ln||typeof rn.UNSAFE_componentWillUpdate!="function"&&typeof rn.componentWillUpdate!="function"||(typeof rn.componentWillUpdate=="function"&&rn.componentWillUpdate(en,hn,sn),typeof rn.UNSAFE_componentWillUpdate=="function"&&rn.UNSAFE_componentWillUpdate(en,hn,sn)),typeof rn.componentDidUpdate=="function"&&(s.flags|=4),typeof rn.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof rn.componentDidUpdate!="function"||on===Nt.memoizedProps&&un===Nt.memoizedState||(s.flags|=4),typeof rn.getSnapshotBeforeUpdate!="function"||on===Nt.memoizedProps&&un===Nt.memoizedState||(s.flags|=1024),s.memoizedProps=en,s.memoizedState=hn),rn.props=en,rn.state=hn,rn.context=sn,en=an):(typeof rn.componentDidUpdate!="function"||on===Nt.memoizedProps&&un===Nt.memoizedState||(s.flags|=4),typeof rn.getSnapshotBeforeUpdate!="function"||on===Nt.memoizedProps&&un===Nt.memoizedState||(s.flags|=1024),en=!1)}return kj(Nt,s,Ot,en,nn,tn)}function kj(Nt,s,Ot,en,tn,nn){hj(Nt,s);var rn=(s.flags&128)!==0;if(!en&&!rn)return tn&&dg(s,Ot,!1),$i(Nt,s,nn);en=s.stateNode,Xi.current=s;var on=rn&&typeof Ot.getDerivedStateFromError!="function"?null:en.render();return s.flags|=1,Nt!==null&&rn?(s.child=Bh(s,Nt.child,null,nn),s.child=Bh(s,null,on,nn)):Yi(Nt,s,on,nn),s.memoizedState=en.state,tn&&dg(s,Ot,!0),s.child}function lj(Nt){var s=Nt.stateNode;s.pendingContext?ag(Nt,s.pendingContext,s.pendingContext!==s.context):s.context&&ag(Nt,s.context,!1),Ih(Nt,s.containerInfo)}function mj(Nt,s,Ot,en,tn){return Ig(),Jg(tn),s.flags|=256,Yi(Nt,s,Ot,en),s.child}var nj={dehydrated:null,treeContext:null,retryLane:0};function oj(Nt){return{baseLanes:Nt,cachePool:null,transitions:null}}function pj(Nt,s,Ot){var en=s.pendingProps,tn=M$4.current,nn=!1,rn=(s.flags&128)!==0,on;if((on=rn)||(on=Nt!==null&&Nt.memoizedState===null?!1:(tn&2)!==0),on?(nn=!0,s.flags&=-129):(Nt===null||Nt.memoizedState!==null)&&(tn|=1),G$2(M$4,tn&1),Nt===null)return Eg(s),Nt=s.memoizedState,Nt!==null&&(Nt=Nt.dehydrated,Nt!==null)?(s.mode&1?Nt.data==="$!"?s.lanes=8:s.lanes=1073741824:s.lanes=1,null):(rn=en.children,Nt=en.fallback,nn?(en=s.mode,nn=s.child,rn={mode:"hidden",children:rn},!(en&1)&&nn!==null?(nn.childLanes=0,nn.pendingProps=rn):nn=qj(rn,en,0,null),Nt=Ah(Nt,en,Ot,null),nn.return=s,Nt.return=s,nn.sibling=Nt,s.child=nn,s.child.memoizedState=oj(Ot),s.memoizedState=nj,Nt):rj(s,rn));if(tn=Nt.memoizedState,tn!==null&&(on=tn.dehydrated,on!==null))return sj(Nt,s,rn,en,on,tn,Ot);if(nn){nn=en.fallback,rn=s.mode,tn=Nt.child,on=tn.sibling;var sn={mode:"hidden",children:en.children};return!(rn&1)&&s.child!==tn?(en=s.child,en.childLanes=0,en.pendingProps=sn,s.deletions=null):(en=wh(tn,sn),en.subtreeFlags=tn.subtreeFlags&14680064),on!==null?nn=wh(on,nn):(nn=Ah(nn,rn,Ot,null),nn.flags|=2),nn.return=s,en.return=s,en.sibling=nn,s.child=en,en=nn,nn=s.child,rn=Nt.child.memoizedState,rn=rn===null?oj(Ot):{baseLanes:rn.baseLanes|Ot,cachePool:null,transitions:rn.transitions},nn.memoizedState=rn,nn.childLanes=Nt.childLanes&~Ot,s.memoizedState=nj,en}return nn=Nt.child,Nt=nn.sibling,en=wh(nn,{mode:"visible",children:en.children}),!(s.mode&1)&&(en.lanes=Ot),en.return=s,en.sibling=null,Nt!==null&&(Ot=s.deletions,Ot===null?(s.deletions=[Nt],s.flags|=16):Ot.push(Nt)),s.child=en,s.memoizedState=null,en}function rj(Nt,s){return s=qj({mode:"visible",children:s},Nt.mode,0,null),s.return=Nt,Nt.child=s}function tj(Nt,s,Ot,en){return en!==null&&Jg(en),Bh(s,Nt.child,null,Ot),Nt=rj(s,s.pendingProps.children),Nt.flags|=2,s.memoizedState=null,Nt}function sj(Nt,s,Ot,en,tn,nn,rn){if(Ot)return s.flags&256?(s.flags&=-257,en=Li(Error(p$4(422))),tj(Nt,s,rn,en)):s.memoizedState!==null?(s.child=Nt.child,s.flags|=128,null):(nn=en.fallback,tn=s.mode,en=qj({mode:"visible",children:en.children},tn,0,null),nn=Ah(nn,tn,rn,null),nn.flags|=2,en.return=s,nn.return=s,en.sibling=nn,s.child=en,s.mode&1&&Bh(s,Nt.child,null,rn),s.child.memoizedState=oj(rn),s.memoizedState=nj,nn);if(!(s.mode&1))return tj(Nt,s,rn,null);if(tn.data==="$!"){if(en=tn.nextSibling&&tn.nextSibling.dataset,en)var on=en.dgst;return en=on,nn=Error(p$4(419)),en=Li(nn,en,void 0),tj(Nt,s,rn,en)}if(on=(rn&Nt.childLanes)!==0,Ug||on){if(en=R$4,en!==null){switch(rn&-rn){case 4:tn=2;break;case 16:tn=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:tn=32;break;case 536870912:tn=268435456;break;default:tn=0}tn=tn&(en.suspendedLanes|rn)?0:tn,tn!==0&&tn!==nn.retryLane&&(nn.retryLane=tn,Zg(Nt,tn),mh(en,Nt,tn,-1))}return uj(),en=Li(Error(p$4(421))),tj(Nt,s,rn,en)}return tn.data==="$?"?(s.flags|=128,s.child=Nt.child,s=vj.bind(null,Nt),tn._reactRetry=s,null):(Nt=nn.treeContext,yg=Lf(tn.nextSibling),xg=s,I$3=!0,zg=null,Nt!==null&&(og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,rg=Nt.id,sg=Nt.overflow,qg=s),s=rj(s,en.children),s.flags|=4096,s)}function wj(Nt,s,Ot){Nt.lanes|=s;var en=Nt.alternate;en!==null&&(en.lanes|=s),Sg(Nt.return,s,Ot)}function xj(Nt,s,Ot,en,tn){var nn=Nt.memoizedState;nn===null?Nt.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:en,tail:Ot,tailMode:tn}:(nn.isBackwards=s,nn.rendering=null,nn.renderingStartTime=0,nn.last=en,nn.tail=Ot,nn.tailMode=tn)}function yj(Nt,s,Ot){var en=s.pendingProps,tn=en.revealOrder,nn=en.tail;if(Yi(Nt,s,en.children,Ot),en=M$4.current,en&2)en=en&1|2,s.flags|=128;else{if(Nt!==null&&Nt.flags&128)e:for(Nt=s.child;Nt!==null;){if(Nt.tag===13)Nt.memoizedState!==null&&wj(Nt,Ot,s);else if(Nt.tag===19)wj(Nt,Ot,s);else if(Nt.child!==null){Nt.child.return=Nt,Nt=Nt.child;continue}if(Nt===s)break e;for(;Nt.sibling===null;){if(Nt.return===null||Nt.return===s)break e;Nt=Nt.return}Nt.sibling.return=Nt.return,Nt=Nt.sibling}en&=1}if(G$2(M$4,en),!(s.mode&1))s.memoizedState=null;else switch(tn){case"forwards":for(Ot=s.child,tn=null;Ot!==null;)Nt=Ot.alternate,Nt!==null&&Mh(Nt)===null&&(tn=Ot),Ot=Ot.sibling;Ot=tn,Ot===null?(tn=s.child,s.child=null):(tn=Ot.sibling,Ot.sibling=null),xj(s,!1,tn,Ot,nn);break;case"backwards":for(Ot=null,tn=s.child,s.child=null;tn!==null;){if(Nt=tn.alternate,Nt!==null&&Mh(Nt)===null){s.child=tn;break}Nt=tn.sibling,tn.sibling=Ot,Ot=tn,tn=Nt}xj(s,!0,Ot,null,nn);break;case"together":xj(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function jj(Nt,s){!(s.mode&1)&&Nt!==null&&(Nt.alternate=null,s.alternate=null,s.flags|=2)}function $i(Nt,s,Ot){if(Nt!==null&&(s.dependencies=Nt.dependencies),hh|=s.lanes,!(Ot&s.childLanes))return null;if(Nt!==null&&s.child!==Nt.child)throw Error(p$4(153));if(s.child!==null){for(Nt=s.child,Ot=wh(Nt,Nt.pendingProps),s.child=Ot,Ot.return=s;Nt.sibling!==null;)Nt=Nt.sibling,Ot=Ot.sibling=wh(Nt,Nt.pendingProps),Ot.return=s;Ot.sibling=null}return s.child}function zj(Nt,s,Ot){switch(s.tag){case 3:lj(s),Ig();break;case 5:Kh(s);break;case 1:Zf(s.type)&&cg(s);break;case 4:Ih(s,s.stateNode.containerInfo);break;case 10:var en=s.type._context,tn=s.memoizedProps.value;G$2(Mg,en._currentValue),en._currentValue=tn;break;case 13:if(en=s.memoizedState,en!==null)return en.dehydrated!==null?(G$2(M$4,M$4.current&1),s.flags|=128,null):Ot&s.child.childLanes?pj(Nt,s,Ot):(G$2(M$4,M$4.current&1),Nt=$i(Nt,s,Ot),Nt!==null?Nt.sibling:null);G$2(M$4,M$4.current&1);break;case 19:if(en=(Ot&s.childLanes)!==0,Nt.flags&128){if(en)return yj(Nt,s,Ot);s.flags|=128}if(tn=s.memoizedState,tn!==null&&(tn.rendering=null,tn.tail=null,tn.lastEffect=null),G$2(M$4,M$4.current),en)break;return null;case 22:case 23:return s.lanes=0,ej(Nt,s,Ot)}return $i(Nt,s,Ot)}var Aj,Bj,Cj,Dj;Aj=function(Nt,s){for(var Ot=s.child;Ot!==null;){if(Ot.tag===5||Ot.tag===6)Nt.appendChild(Ot.stateNode);else if(Ot.tag!==4&&Ot.child!==null){Ot.child.return=Ot,Ot=Ot.child;continue}if(Ot===s)break;for(;Ot.sibling===null;){if(Ot.return===null||Ot.return===s)return;Ot=Ot.return}Ot.sibling.return=Ot.return,Ot=Ot.sibling}};Bj=function(){};Cj=function(Nt,s,Ot,en){var tn=Nt.memoizedProps;if(tn!==en){Nt=s.stateNode,Hh(Eh.current);var nn=null;switch(Ot){case"input":tn=Ya$1(Nt,tn),en=Ya$1(Nt,en),nn=[];break;case"select":tn=A$2({},tn,{value:void 0}),en=A$2({},en,{value:void 0}),nn=[];break;case"textarea":tn=gb$1(Nt,tn),en=gb$1(Nt,en),nn=[];break;default:typeof tn.onClick!="function"&&typeof en.onClick=="function"&&(Nt.onclick=Bf)}ub$1(Ot,en);var rn;Ot=null;for(an in tn)if(!en.hasOwnProperty(an)&&tn.hasOwnProperty(an)&&tn[an]!=null)if(an==="style"){var on=tn[an];for(rn in on)on.hasOwnProperty(rn)&&(Ot||(Ot={}),Ot[rn]="")}else an!=="dangerouslySetInnerHTML"&&an!=="children"&&an!=="suppressContentEditableWarning"&&an!=="suppressHydrationWarning"&&an!=="autoFocus"&&(ea$1.hasOwnProperty(an)?nn||(nn=[]):(nn=nn||[]).push(an,null));for(an in en){var sn=en[an];if(on=tn!=null?tn[an]:void 0,en.hasOwnProperty(an)&&sn!==on&&(sn!=null||on!=null))if(an==="style")if(on){for(rn in on)!on.hasOwnProperty(rn)||sn&&sn.hasOwnProperty(rn)||(Ot||(Ot={}),Ot[rn]="");for(rn in sn)sn.hasOwnProperty(rn)&&on[rn]!==sn[rn]&&(Ot||(Ot={}),Ot[rn]=sn[rn])}else Ot||(nn||(nn=[]),nn.push(an,Ot)),Ot=sn;else an==="dangerouslySetInnerHTML"?(sn=sn?sn.__html:void 0,on=on?on.__html:void 0,sn!=null&&on!==sn&&(nn=nn||[]).push(an,sn)):an==="children"?typeof sn!="string"&&typeof sn!="number"||(nn=nn||[]).push(an,""+sn):an!=="suppressContentEditableWarning"&&an!=="suppressHydrationWarning"&&(ea$1.hasOwnProperty(an)?(sn!=null&&an==="onScroll"&&D$4("scroll",Nt),nn||on===sn||(nn=[])):(nn=nn||[]).push(an,sn))}Ot&&(nn=nn||[]).push("style",Ot);var an=nn;(s.updateQueue=an)&&(s.flags|=4)}};Dj=function(Nt,s,Ot,en){Ot!==en&&(s.flags|=4)};function Ej(Nt,s){if(!I$3)switch(Nt.tailMode){case"hidden":s=Nt.tail;for(var Ot=null;s!==null;)s.alternate!==null&&(Ot=s),s=s.sibling;Ot===null?Nt.tail=null:Ot.sibling=null;break;case"collapsed":Ot=Nt.tail;for(var en=null;Ot!==null;)Ot.alternate!==null&&(en=Ot),Ot=Ot.sibling;en===null?s||Nt.tail===null?Nt.tail=null:Nt.tail.sibling=null:en.sibling=null}}function S$3(Nt){var s=Nt.alternate!==null&&Nt.alternate.child===Nt.child,Ot=0,en=0;if(s)for(var tn=Nt.child;tn!==null;)Ot|=tn.lanes|tn.childLanes,en|=tn.subtreeFlags&14680064,en|=tn.flags&14680064,tn.return=Nt,tn=tn.sibling;else for(tn=Nt.child;tn!==null;)Ot|=tn.lanes|tn.childLanes,en|=tn.subtreeFlags,en|=tn.flags,tn.return=Nt,tn=tn.sibling;return Nt.subtreeFlags|=en,Nt.childLanes=Ot,s}function Fj(Nt,s,Ot){var en=s.pendingProps;switch(wg(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return S$3(s),null;case 1:return Zf(s.type)&&$f(),S$3(s),null;case 3:return en=s.stateNode,Jh(),E$1(Wf),E$1(H$3),Oh(),en.pendingContext&&(en.context=en.pendingContext,en.pendingContext=null),(Nt===null||Nt.child===null)&&(Gg(s)?s.flags|=4:Nt===null||Nt.memoizedState.isDehydrated&&!(s.flags&256)||(s.flags|=1024,zg!==null&&(Gj(zg),zg=null))),Bj(Nt,s),S$3(s),null;case 5:Lh(s);var tn=Hh(Gh.current);if(Ot=s.type,Nt!==null&&s.stateNode!=null)Cj(Nt,s,Ot,en,tn),Nt.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!en){if(s.stateNode===null)throw Error(p$4(166));return S$3(s),null}if(Nt=Hh(Eh.current),Gg(s)){en=s.stateNode,Ot=s.type;var nn=s.memoizedProps;switch(en[Of]=s,en[Pf]=nn,Nt=(s.mode&1)!==0,Ot){case"dialog":D$4("cancel",en),D$4("close",en);break;case"iframe":case"object":case"embed":D$4("load",en);break;case"video":case"audio":for(tn=0;tn<lf.length;tn++)D$4(lf[tn],en);break;case"source":D$4("error",en);break;case"img":case"image":case"link":D$4("error",en),D$4("load",en);break;case"details":D$4("toggle",en);break;case"input":Za$1(en,nn),D$4("invalid",en);break;case"select":en._wrapperState={wasMultiple:!!nn.multiple},D$4("invalid",en);break;case"textarea":hb$1(en,nn),D$4("invalid",en)}ub$1(Ot,nn),tn=null;for(var rn in nn)if(nn.hasOwnProperty(rn)){var on=nn[rn];rn==="children"?typeof on=="string"?en.textContent!==on&&(nn.suppressHydrationWarning!==!0&&Af(en.textContent,on,Nt),tn=["children",on]):typeof on=="number"&&en.textContent!==""+on&&(nn.suppressHydrationWarning!==!0&&Af(en.textContent,on,Nt),tn=["children",""+on]):ea$1.hasOwnProperty(rn)&&on!=null&&rn==="onScroll"&&D$4("scroll",en)}switch(Ot){case"input":Va$1(en),db$2(en,nn,!0);break;case"textarea":Va$1(en),jb$1(en);break;case"select":case"option":break;default:typeof nn.onClick=="function"&&(en.onclick=Bf)}en=tn,s.updateQueue=en,en!==null&&(s.flags|=4)}else{rn=tn.nodeType===9?tn:tn.ownerDocument,Nt==="http://www.w3.org/1999/xhtml"&&(Nt=kb$1(Ot)),Nt==="http://www.w3.org/1999/xhtml"?Ot==="script"?(Nt=rn.createElement("div"),Nt.innerHTML="<script><\/script>",Nt=Nt.removeChild(Nt.firstChild)):typeof en.is=="string"?Nt=rn.createElement(Ot,{is:en.is}):(Nt=rn.createElement(Ot),Ot==="select"&&(rn=Nt,en.multiple?rn.multiple=!0:en.size&&(rn.size=en.size))):Nt=rn.createElementNS(Nt,Ot),Nt[Of]=s,Nt[Pf]=en,Aj(Nt,s,!1,!1),s.stateNode=Nt;e:{switch(rn=vb$1(Ot,en),Ot){case"dialog":D$4("cancel",Nt),D$4("close",Nt),tn=en;break;case"iframe":case"object":case"embed":D$4("load",Nt),tn=en;break;case"video":case"audio":for(tn=0;tn<lf.length;tn++)D$4(lf[tn],Nt);tn=en;break;case"source":D$4("error",Nt),tn=en;break;case"img":case"image":case"link":D$4("error",Nt),D$4("load",Nt),tn=en;break;case"details":D$4("toggle",Nt),tn=en;break;case"input":Za$1(Nt,en),tn=Ya$1(Nt,en),D$4("invalid",Nt);break;case"option":tn=en;break;case"select":Nt._wrapperState={wasMultiple:!!en.multiple},tn=A$2({},en,{value:void 0}),D$4("invalid",Nt);break;case"textarea":hb$1(Nt,en),tn=gb$1(Nt,en),D$4("invalid",Nt);break;default:tn=en}ub$1(Ot,tn),on=tn;for(nn in on)if(on.hasOwnProperty(nn)){var sn=on[nn];nn==="style"?sb$1(Nt,sn):nn==="dangerouslySetInnerHTML"?(sn=sn?sn.__html:void 0,sn!=null&&nb$1(Nt,sn)):nn==="children"?typeof sn=="string"?(Ot!=="textarea"||sn!=="")&&ob$1(Nt,sn):typeof sn=="number"&&ob$1(Nt,""+sn):nn!=="suppressContentEditableWarning"&&nn!=="suppressHydrationWarning"&&nn!=="autoFocus"&&(ea$1.hasOwnProperty(nn)?sn!=null&&nn==="onScroll"&&D$4("scroll",Nt):sn!=null&&ta$1(Nt,nn,sn,rn))}switch(Ot){case"input":Va$1(Nt),db$2(Nt,en,!1);break;case"textarea":Va$1(Nt),jb$1(Nt);break;case"option":en.value!=null&&Nt.setAttribute("value",""+Sa$1(en.value));break;case"select":Nt.multiple=!!en.multiple,nn=en.value,nn!=null?fb$1(Nt,!!en.multiple,nn,!1):en.defaultValue!=null&&fb$1(Nt,!!en.multiple,en.defaultValue,!0);break;default:typeof tn.onClick=="function"&&(Nt.onclick=Bf)}switch(Ot){case"button":case"input":case"select":case"textarea":en=!!en.autoFocus;break e;case"img":en=!0;break e;default:en=!1}}en&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return S$3(s),null;case 6:if(Nt&&s.stateNode!=null)Dj(Nt,s,Nt.memoizedProps,en);else{if(typeof en!="string"&&s.stateNode===null)throw Error(p$4(166));if(Ot=Hh(Gh.current),Hh(Eh.current),Gg(s)){if(en=s.stateNode,Ot=s.memoizedProps,en[Of]=s,(nn=en.nodeValue!==Ot)&&(Nt=xg,Nt!==null))switch(Nt.tag){case 3:Af(en.nodeValue,Ot,(Nt.mode&1)!==0);break;case 5:Nt.memoizedProps.suppressHydrationWarning!==!0&&Af(en.nodeValue,Ot,(Nt.mode&1)!==0)}nn&&(s.flags|=4)}else en=(Ot.nodeType===9?Ot:Ot.ownerDocument).createTextNode(en),en[Of]=s,s.stateNode=en}return S$3(s),null;case 13:if(E$1(M$4),en=s.memoizedState,Nt===null||Nt.memoizedState!==null&&Nt.memoizedState.dehydrated!==null){if(I$3&&yg!==null&&s.mode&1&&!(s.flags&128))Hg(),Ig(),s.flags|=98560,nn=!1;else if(nn=Gg(s),en!==null&&en.dehydrated!==null){if(Nt===null){if(!nn)throw Error(p$4(318));if(nn=s.memoizedState,nn=nn!==null?nn.dehydrated:null,!nn)throw Error(p$4(317));nn[Of]=s}else Ig(),!(s.flags&128)&&(s.memoizedState=null),s.flags|=4;S$3(s),nn=!1}else zg!==null&&(Gj(zg),zg=null),nn=!0;if(!nn)return s.flags&65536?s:null}return s.flags&128?(s.lanes=Ot,s):(en=en!==null,en!==(Nt!==null&&Nt.memoizedState!==null)&&en&&(s.child.flags|=8192,s.mode&1&&(Nt===null||M$4.current&1?T$3===0&&(T$3=3):uj())),s.updateQueue!==null&&(s.flags|=4),S$3(s),null);case 4:return Jh(),Bj(Nt,s),Nt===null&&sf(s.stateNode.containerInfo),S$3(s),null;case 10:return Rg(s.type._context),S$3(s),null;case 17:return Zf(s.type)&&$f(),S$3(s),null;case 19:if(E$1(M$4),nn=s.memoizedState,nn===null)return S$3(s),null;if(en=(s.flags&128)!==0,rn=nn.rendering,rn===null)if(en)Ej(nn,!1);else{if(T$3!==0||Nt!==null&&Nt.flags&128)for(Nt=s.child;Nt!==null;){if(rn=Mh(Nt),rn!==null){for(s.flags|=128,Ej(nn,!1),en=rn.updateQueue,en!==null&&(s.updateQueue=en,s.flags|=4),s.subtreeFlags=0,en=Ot,Ot=s.child;Ot!==null;)nn=Ot,Nt=en,nn.flags&=14680066,rn=nn.alternate,rn===null?(nn.childLanes=0,nn.lanes=Nt,nn.child=null,nn.subtreeFlags=0,nn.memoizedProps=null,nn.memoizedState=null,nn.updateQueue=null,nn.dependencies=null,nn.stateNode=null):(nn.childLanes=rn.childLanes,nn.lanes=rn.lanes,nn.child=rn.child,nn.subtreeFlags=0,nn.deletions=null,nn.memoizedProps=rn.memoizedProps,nn.memoizedState=rn.memoizedState,nn.updateQueue=rn.updateQueue,nn.type=rn.type,Nt=rn.dependencies,nn.dependencies=Nt===null?null:{lanes:Nt.lanes,firstContext:Nt.firstContext}),Ot=Ot.sibling;return G$2(M$4,M$4.current&1|2),s.child}Nt=Nt.sibling}nn.tail!==null&&B$2()>Hj&&(s.flags|=128,en=!0,Ej(nn,!1),s.lanes=4194304)}else{if(!en)if(Nt=Mh(rn),Nt!==null){if(s.flags|=128,en=!0,Ot=Nt.updateQueue,Ot!==null&&(s.updateQueue=Ot,s.flags|=4),Ej(nn,!0),nn.tail===null&&nn.tailMode==="hidden"&&!rn.alternate&&!I$3)return S$3(s),null}else 2*B$2()-nn.renderingStartTime>Hj&&Ot!==1073741824&&(s.flags|=128,en=!0,Ej(nn,!1),s.lanes=4194304);nn.isBackwards?(rn.sibling=s.child,s.child=rn):(Ot=nn.last,Ot!==null?Ot.sibling=rn:s.child=rn,nn.last=rn)}return nn.tail!==null?(s=nn.tail,nn.rendering=s,nn.tail=s.sibling,nn.renderingStartTime=B$2(),s.sibling=null,Ot=M$4.current,G$2(M$4,en?Ot&1|2:Ot&1),s):(S$3(s),null);case 22:case 23:return Ij(),en=s.memoizedState!==null,Nt!==null&&Nt.memoizedState!==null!==en&&(s.flags|=8192),en&&s.mode&1?gj&1073741824&&(S$3(s),s.subtreeFlags&6&&(s.flags|=8192)):S$3(s),null;case 24:return null;case 25:return null}throw Error(p$4(156,s.tag))}function Jj(Nt,s){switch(wg(s),s.tag){case 1:return Zf(s.type)&&$f(),Nt=s.flags,Nt&65536?(s.flags=Nt&-65537|128,s):null;case 3:return Jh(),E$1(Wf),E$1(H$3),Oh(),Nt=s.flags,Nt&65536&&!(Nt&128)?(s.flags=Nt&-65537|128,s):null;case 5:return Lh(s),null;case 13:if(E$1(M$4),Nt=s.memoizedState,Nt!==null&&Nt.dehydrated!==null){if(s.alternate===null)throw Error(p$4(340));Ig()}return Nt=s.flags,Nt&65536?(s.flags=Nt&-65537|128,s):null;case 19:return E$1(M$4),null;case 4:return Jh(),null;case 10:return Rg(s.type._context),null;case 22:case 23:return Ij(),null;case 24:return null;default:return null}}var Kj=!1,U$2=!1,Lj=typeof WeakSet=="function"?WeakSet:Set,V$2=null;function Mj(Nt,s){var Ot=Nt.ref;if(Ot!==null)if(typeof Ot=="function")try{Ot(null)}catch(en){W$2(Nt,s,en)}else Ot.current=null}function Nj(Nt,s,Ot){try{Ot()}catch(en){W$2(Nt,s,en)}}var Oj=!1;function Pj(Nt,s){if(Cf=dd$1,Nt=Me$1(),Ne$1(Nt)){if("selectionStart"in Nt)var Ot={start:Nt.selectionStart,end:Nt.selectionEnd};else e:{Ot=(Ot=Nt.ownerDocument)&&Ot.defaultView||window;var en=Ot.getSelection&&Ot.getSelection();if(en&&en.rangeCount!==0){Ot=en.anchorNode;var tn=en.anchorOffset,nn=en.focusNode;en=en.focusOffset;try{Ot.nodeType,nn.nodeType}catch{Ot=null;break e}var rn=0,on=-1,sn=-1,an=0,ln=0,cn=Nt,un=null;t:for(;;){for(var dn;cn!==Ot||tn!==0&&cn.nodeType!==3||(on=rn+tn),cn!==nn||en!==0&&cn.nodeType!==3||(sn=rn+en),cn.nodeType===3&&(rn+=cn.nodeValue.length),(dn=cn.firstChild)!==null;)un=cn,cn=dn;for(;;){if(cn===Nt)break t;if(un===Ot&&++an===tn&&(on=rn),un===nn&&++ln===en&&(sn=rn),(dn=cn.nextSibling)!==null)break;cn=un,un=cn.parentNode}cn=dn}Ot=on===-1||sn===-1?null:{start:on,end:sn}}else Ot=null}Ot=Ot||{start:0,end:0}}else Ot=null;for(Df={focusedElem:Nt,selectionRange:Ot},dd$1=!1,V$2=s;V$2!==null;)if(s=V$2,Nt=s.child,(s.subtreeFlags&1028)!==0&&Nt!==null)Nt.return=s,V$2=Nt;else for(;V$2!==null;){s=V$2;try{var hn=s.alternate;if(s.flags&1024)switch(s.tag){case 0:case 11:case 15:break;case 1:if(hn!==null){var fn=hn.memoizedProps,mn=hn.memoizedState,gn=s.stateNode,pn=gn.getSnapshotBeforeUpdate(s.elementType===s.type?fn:Lg(s.type,fn),mn);gn.__reactInternalSnapshotBeforeUpdate=pn}break;case 3:var _n=s.stateNode.containerInfo;_n.nodeType===1?_n.textContent="":_n.nodeType===9&&_n.documentElement&&_n.removeChild(_n.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(p$4(163))}}catch(vn){W$2(s,s.return,vn)}if(Nt=s.sibling,Nt!==null){Nt.return=s.return,V$2=Nt;break}V$2=s.return}return hn=Oj,Oj=!1,hn}function Qj(Nt,s,Ot){var en=s.updateQueue;if(en=en!==null?en.lastEffect:null,en!==null){var tn=en=en.next;do{if((tn.tag&Nt)===Nt){var nn=tn.destroy;tn.destroy=void 0,nn!==void 0&&Nj(s,Ot,nn)}tn=tn.next}while(tn!==en)}}function Rj(Nt,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var Ot=s=s.next;do{if((Ot.tag&Nt)===Nt){var en=Ot.create;Ot.destroy=en()}Ot=Ot.next}while(Ot!==s)}}function Sj(Nt){var s=Nt.ref;if(s!==null){var Ot=Nt.stateNode;switch(Nt.tag){case 5:Nt=Ot;break;default:Nt=Ot}typeof s=="function"?s(Nt):s.current=Nt}}function Tj(Nt){var s=Nt.alternate;s!==null&&(Nt.alternate=null,Tj(s)),Nt.child=null,Nt.deletions=null,Nt.sibling=null,Nt.tag===5&&(s=Nt.stateNode,s!==null&&(delete s[Of],delete s[Pf],delete s[of],delete s[Qf],delete s[Rf])),Nt.stateNode=null,Nt.return=null,Nt.dependencies=null,Nt.memoizedProps=null,Nt.memoizedState=null,Nt.pendingProps=null,Nt.stateNode=null,Nt.updateQueue=null}function Uj(Nt){return Nt.tag===5||Nt.tag===3||Nt.tag===4}function Vj(Nt){e:for(;;){for(;Nt.sibling===null;){if(Nt.return===null||Uj(Nt.return))return null;Nt=Nt.return}for(Nt.sibling.return=Nt.return,Nt=Nt.sibling;Nt.tag!==5&&Nt.tag!==6&&Nt.tag!==18;){if(Nt.flags&2||Nt.child===null||Nt.tag===4)continue e;Nt.child.return=Nt,Nt=Nt.child}if(!(Nt.flags&2))return Nt.stateNode}}function Wj(Nt,s,Ot){var en=Nt.tag;if(en===5||en===6)Nt=Nt.stateNode,s?Ot.nodeType===8?Ot.parentNode.insertBefore(Nt,s):Ot.insertBefore(Nt,s):(Ot.nodeType===8?(s=Ot.parentNode,s.insertBefore(Nt,Ot)):(s=Ot,s.appendChild(Nt)),Ot=Ot._reactRootContainer,Ot!=null||s.onclick!==null||(s.onclick=Bf));else if(en!==4&&(Nt=Nt.child,Nt!==null))for(Wj(Nt,s,Ot),Nt=Nt.sibling;Nt!==null;)Wj(Nt,s,Ot),Nt=Nt.sibling}function Xj(Nt,s,Ot){var en=Nt.tag;if(en===5||en===6)Nt=Nt.stateNode,s?Ot.insertBefore(Nt,s):Ot.appendChild(Nt);else if(en!==4&&(Nt=Nt.child,Nt!==null))for(Xj(Nt,s,Ot),Nt=Nt.sibling;Nt!==null;)Xj(Nt,s,Ot),Nt=Nt.sibling}var X$2=null,Yj=!1;function Zj(Nt,s,Ot){for(Ot=Ot.child;Ot!==null;)ak(Nt,s,Ot),Ot=Ot.sibling}function ak(Nt,s,Ot){if(lc$1&&typeof lc$1.onCommitFiberUnmount=="function")try{lc$1.onCommitFiberUnmount(kc$1,Ot)}catch{}switch(Ot.tag){case 5:U$2||Mj(Ot,s);case 6:var en=X$2,tn=Yj;X$2=null,Zj(Nt,s,Ot),X$2=en,Yj=tn,X$2!==null&&(Yj?(Nt=X$2,Ot=Ot.stateNode,Nt.nodeType===8?Nt.parentNode.removeChild(Ot):Nt.removeChild(Ot)):X$2.removeChild(Ot.stateNode));break;case 18:X$2!==null&&(Yj?(Nt=X$2,Ot=Ot.stateNode,Nt.nodeType===8?Kf(Nt.parentNode,Ot):Nt.nodeType===1&&Kf(Nt,Ot),bd$1(Nt)):Kf(X$2,Ot.stateNode));break;case 4:en=X$2,tn=Yj,X$2=Ot.stateNode.containerInfo,Yj=!0,Zj(Nt,s,Ot),X$2=en,Yj=tn;break;case 0:case 11:case 14:case 15:if(!U$2&&(en=Ot.updateQueue,en!==null&&(en=en.lastEffect,en!==null))){tn=en=en.next;do{var nn=tn,rn=nn.destroy;nn=nn.tag,rn!==void 0&&(nn&2||nn&4)&&Nj(Ot,s,rn),tn=tn.next}while(tn!==en)}Zj(Nt,s,Ot);break;case 1:if(!U$2&&(Mj(Ot,s),en=Ot.stateNode,typeof en.componentWillUnmount=="function"))try{en.props=Ot.memoizedProps,en.state=Ot.memoizedState,en.componentWillUnmount()}catch(on){W$2(Ot,s,on)}Zj(Nt,s,Ot);break;case 21:Zj(Nt,s,Ot);break;case 22:Ot.mode&1?(U$2=(en=U$2)||Ot.memoizedState!==null,Zj(Nt,s,Ot),U$2=en):Zj(Nt,s,Ot);break;default:Zj(Nt,s,Ot)}}function bk(Nt){var s=Nt.updateQueue;if(s!==null){Nt.updateQueue=null;var Ot=Nt.stateNode;Ot===null&&(Ot=Nt.stateNode=new Lj),s.forEach(function(en){var tn=ck.bind(null,Nt,en);Ot.has(en)||(Ot.add(en),en.then(tn,tn))})}}function dk(Nt,s){var Ot=s.deletions;if(Ot!==null)for(var en=0;en<Ot.length;en++){var tn=Ot[en];try{var nn=Nt,rn=s,on=rn;e:for(;on!==null;){switch(on.tag){case 5:X$2=on.stateNode,Yj=!1;break e;case 3:X$2=on.stateNode.containerInfo,Yj=!0;break e;case 4:X$2=on.stateNode.containerInfo,Yj=!0;break e}on=on.return}if(X$2===null)throw Error(p$4(160));ak(nn,rn,tn),X$2=null,Yj=!1;var sn=tn.alternate;sn!==null&&(sn.return=null),tn.return=null}catch(an){W$2(tn,s,an)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)ek(s,Nt),s=s.sibling}function ek(Nt,s){var Ot=Nt.alternate,en=Nt.flags;switch(Nt.tag){case 0:case 11:case 14:case 15:if(dk(s,Nt),fk(Nt),en&4){try{Qj(3,Nt,Nt.return),Rj(3,Nt)}catch(fn){W$2(Nt,Nt.return,fn)}try{Qj(5,Nt,Nt.return)}catch(fn){W$2(Nt,Nt.return,fn)}}break;case 1:dk(s,Nt),fk(Nt),en&512&&Ot!==null&&Mj(Ot,Ot.return);break;case 5:if(dk(s,Nt),fk(Nt),en&512&&Ot!==null&&Mj(Ot,Ot.return),Nt.flags&32){var tn=Nt.stateNode;try{ob$1(tn,"")}catch(fn){W$2(Nt,Nt.return,fn)}}if(en&4&&(tn=Nt.stateNode,tn!=null)){var nn=Nt.memoizedProps,rn=Ot!==null?Ot.memoizedProps:nn,on=Nt.type,sn=Nt.updateQueue;if(Nt.updateQueue=null,sn!==null)try{on==="input"&&nn.type==="radio"&&nn.name!=null&&ab$1(tn,nn),vb$1(on,rn);var an=vb$1(on,nn);for(rn=0;rn<sn.length;rn+=2){var ln=sn[rn],cn=sn[rn+1];ln==="style"?sb$1(tn,cn):ln==="dangerouslySetInnerHTML"?nb$1(tn,cn):ln==="children"?ob$1(tn,cn):ta$1(tn,ln,cn,an)}switch(on){case"input":bb$1(tn,nn);break;case"textarea":ib$1(tn,nn);break;case"select":var un=tn._wrapperState.wasMultiple;tn._wrapperState.wasMultiple=!!nn.multiple;var dn=nn.value;dn!=null?fb$1(tn,!!nn.multiple,dn,!1):un!==!!nn.multiple&&(nn.defaultValue!=null?fb$1(tn,!!nn.multiple,nn.defaultValue,!0):fb$1(tn,!!nn.multiple,nn.multiple?[]:"",!1))}tn[Pf]=nn}catch(fn){W$2(Nt,Nt.return,fn)}}break;case 6:if(dk(s,Nt),fk(Nt),en&4){if(Nt.stateNode===null)throw Error(p$4(162));tn=Nt.stateNode,nn=Nt.memoizedProps;try{tn.nodeValue=nn}catch(fn){W$2(Nt,Nt.return,fn)}}break;case 3:if(dk(s,Nt),fk(Nt),en&4&&Ot!==null&&Ot.memoizedState.isDehydrated)try{bd$1(s.containerInfo)}catch(fn){W$2(Nt,Nt.return,fn)}break;case 4:dk(s,Nt),fk(Nt);break;case 13:dk(s,Nt),fk(Nt),tn=Nt.child,tn.flags&8192&&(nn=tn.memoizedState!==null,tn.stateNode.isHidden=nn,!nn||tn.alternate!==null&&tn.alternate.memoizedState!==null||(gk=B$2())),en&4&&bk(Nt);break;case 22:if(ln=Ot!==null&&Ot.memoizedState!==null,Nt.mode&1?(U$2=(an=U$2)||ln,dk(s,Nt),U$2=an):dk(s,Nt),fk(Nt),en&8192){if(an=Nt.memoizedState!==null,(Nt.stateNode.isHidden=an)&&!ln&&Nt.mode&1)for(V$2=Nt,ln=Nt.child;ln!==null;){for(cn=V$2=ln;V$2!==null;){switch(un=V$2,dn=un.child,un.tag){case 0:case 11:case 14:case 15:Qj(4,un,un.return);break;case 1:Mj(un,un.return);var hn=un.stateNode;if(typeof hn.componentWillUnmount=="function"){en=un,Ot=un.return;try{s=en,hn.props=s.memoizedProps,hn.state=s.memoizedState,hn.componentWillUnmount()}catch(fn){W$2(en,Ot,fn)}}break;case 5:Mj(un,un.return);break;case 22:if(un.memoizedState!==null){hk(cn);continue}}dn!==null?(dn.return=un,V$2=dn):hk(cn)}ln=ln.sibling}e:for(ln=null,cn=Nt;;){if(cn.tag===5){if(ln===null){ln=cn;try{tn=cn.stateNode,an?(nn=tn.style,typeof nn.setProperty=="function"?nn.setProperty("display","none","important"):nn.display="none"):(on=cn.stateNode,sn=cn.memoizedProps.style,rn=sn!=null&&sn.hasOwnProperty("display")?sn.display:null,on.style.display=rb$1("display",rn))}catch(fn){W$2(Nt,Nt.return,fn)}}}else if(cn.tag===6){if(ln===null)try{cn.stateNode.nodeValue=an?"":cn.memoizedProps}catch(fn){W$2(Nt,Nt.return,fn)}}else if((cn.tag!==22&&cn.tag!==23||cn.memoizedState===null||cn===Nt)&&cn.child!==null){cn.child.return=cn,cn=cn.child;continue}if(cn===Nt)break e;for(;cn.sibling===null;){if(cn.return===null||cn.return===Nt)break e;ln===cn&&(ln=null),cn=cn.return}ln===cn&&(ln=null),cn.sibling.return=cn.return,cn=cn.sibling}}break;case 19:dk(s,Nt),fk(Nt),en&4&&bk(Nt);break;case 21:break;default:dk(s,Nt),fk(Nt)}}function fk(Nt){var s=Nt.flags;if(s&2){try{e:{for(var Ot=Nt.return;Ot!==null;){if(Uj(Ot)){var en=Ot;break e}Ot=Ot.return}throw Error(p$4(160))}switch(en.tag){case 5:var tn=en.stateNode;en.flags&32&&(ob$1(tn,""),en.flags&=-33);var nn=Vj(Nt);Xj(Nt,nn,tn);break;case 3:case 4:var rn=en.stateNode.containerInfo,on=Vj(Nt);Wj(Nt,on,rn);break;default:throw Error(p$4(161))}}catch(sn){W$2(Nt,Nt.return,sn)}Nt.flags&=-3}s&4096&&(Nt.flags&=-4097)}function ik(Nt,s,Ot){V$2=Nt,jk(Nt)}function jk(Nt,s,Ot){for(var en=(Nt.mode&1)!==0;V$2!==null;){var tn=V$2,nn=tn.child;if(tn.tag===22&&en){var rn=tn.memoizedState!==null||Kj;if(!rn){var on=tn.alternate,sn=on!==null&&on.memoizedState!==null||U$2;on=Kj;var an=U$2;if(Kj=rn,(U$2=sn)&&!an)for(V$2=tn;V$2!==null;)rn=V$2,sn=rn.child,rn.tag===22&&rn.memoizedState!==null?kk(tn):sn!==null?(sn.return=rn,V$2=sn):kk(tn);for(;nn!==null;)V$2=nn,jk(nn),nn=nn.sibling;V$2=tn,Kj=on,U$2=an}lk(Nt)}else tn.subtreeFlags&8772&&nn!==null?(nn.return=tn,V$2=nn):lk(Nt)}}function lk(Nt){for(;V$2!==null;){var s=V$2;if(s.flags&8772){var Ot=s.alternate;try{if(s.flags&8772)switch(s.tag){case 0:case 11:case 15:U$2||Rj(5,s);break;case 1:var en=s.stateNode;if(s.flags&4&&!U$2)if(Ot===null)en.componentDidMount();else{var tn=s.elementType===s.type?Ot.memoizedProps:Lg(s.type,Ot.memoizedProps);en.componentDidUpdate(tn,Ot.memoizedState,en.__reactInternalSnapshotBeforeUpdate)}var nn=s.updateQueue;nn!==null&&ih(s,nn,en);break;case 3:var rn=s.updateQueue;if(rn!==null){if(Ot=null,s.child!==null)switch(s.child.tag){case 5:Ot=s.child.stateNode;break;case 1:Ot=s.child.stateNode}ih(s,rn,Ot)}break;case 5:var on=s.stateNode;if(Ot===null&&s.flags&4){Ot=on;var sn=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":sn.autoFocus&&Ot.focus();break;case"img":sn.src&&(Ot.src=sn.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var an=s.alternate;if(an!==null){var ln=an.memoizedState;if(ln!==null){var cn=ln.dehydrated;cn!==null&&bd$1(cn)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(p$4(163))}U$2||s.flags&512&&Sj(s)}catch(un){W$2(s,s.return,un)}}if(s===Nt){V$2=null;break}if(Ot=s.sibling,Ot!==null){Ot.return=s.return,V$2=Ot;break}V$2=s.return}}function hk(Nt){for(;V$2!==null;){var s=V$2;if(s===Nt){V$2=null;break}var Ot=s.sibling;if(Ot!==null){Ot.return=s.return,V$2=Ot;break}V$2=s.return}}function kk(Nt){for(;V$2!==null;){var s=V$2;try{switch(s.tag){case 0:case 11:case 15:var Ot=s.return;try{Rj(4,s)}catch(sn){W$2(s,Ot,sn)}break;case 1:var en=s.stateNode;if(typeof en.componentDidMount=="function"){var tn=s.return;try{en.componentDidMount()}catch(sn){W$2(s,tn,sn)}}var nn=s.return;try{Sj(s)}catch(sn){W$2(s,nn,sn)}break;case 5:var rn=s.return;try{Sj(s)}catch(sn){W$2(s,rn,sn)}}}catch(sn){W$2(s,s.return,sn)}if(s===Nt){V$2=null;break}var on=s.sibling;if(on!==null){on.return=s.return,V$2=on;break}V$2=s.return}}var mk=Math.ceil,nk=ua$1.ReactCurrentDispatcher,ok=ua$1.ReactCurrentOwner,pk=ua$1.ReactCurrentBatchConfig,K$2=0,R$4=null,Y$2=null,Z$1=0,gj=0,fj=Uf(0),T$3=0,qk=null,hh=0,rk=0,sk=0,tk=null,uk=null,gk=0,Hj=1/0,vk=null,Pi=!1,Qi=null,Si=null,wk=!1,xk=null,yk=0,zk=0,Ak=null,Bk=-1,Ck=0;function L$2(){return K$2&6?B$2():Bk!==-1?Bk:Bk=B$2()}function lh(Nt){return Nt.mode&1?K$2&2&&Z$1!==0?Z$1&-Z$1:Kg.transition!==null?(Ck===0&&(Ck=yc$1()),Ck):(Nt=C$4,Nt!==0||(Nt=window.event,Nt=Nt===void 0?16:jd$1(Nt.type)),Nt):1}function mh(Nt,s,Ot,en){if(50<zk)throw zk=0,Ak=null,Error(p$4(185));Ac$1(Nt,Ot,en),(!(K$2&2)||Nt!==R$4)&&(Nt===R$4&&(!(K$2&2)&&(rk|=Ot),T$3===4&&Dk(Nt,Z$1)),Ek(Nt,en),Ot===1&&K$2===0&&!(s.mode&1)&&(Hj=B$2()+500,fg&&jg()))}function Ek(Nt,s){var Ot=Nt.callbackNode;wc$1(Nt,s);var en=uc$1(Nt,Nt===R$4?Z$1:0);if(en===0)Ot!==null&&bc$1(Ot),Nt.callbackNode=null,Nt.callbackPriority=0;else if(s=en&-en,Nt.callbackPriority!==s){if(Ot!=null&&bc$1(Ot),s===1)Nt.tag===0?ig(Fk.bind(null,Nt)):hg(Fk.bind(null,Nt)),Jf(function(){!(K$2&6)&&jg()}),Ot=null;else{switch(Dc$1(en)){case 1:Ot=fc$1;break;case 4:Ot=gc$1;break;case 16:Ot=hc$1;break;case 536870912:Ot=jc$1;break;default:Ot=hc$1}Ot=Gk(Ot,Hk.bind(null,Nt))}Nt.callbackPriority=s,Nt.callbackNode=Ot}}function Hk(Nt,s){if(Bk=-1,Ck=0,K$2&6)throw Error(p$4(327));var Ot=Nt.callbackNode;if(Ik()&&Nt.callbackNode!==Ot)return null;var en=uc$1(Nt,Nt===R$4?Z$1:0);if(en===0)return null;if(en&30||en&Nt.expiredLanes||s)s=Jk(Nt,en);else{s=en;var tn=K$2;K$2|=2;var nn=Kk();(R$4!==Nt||Z$1!==s)&&(vk=null,Hj=B$2()+500,Lk(Nt,s));do try{Mk();break}catch(on){Nk(Nt,on)}while(!0);Qg(),nk.current=nn,K$2=tn,Y$2!==null?s=0:(R$4=null,Z$1=0,s=T$3)}if(s!==0){if(s===2&&(tn=xc$1(Nt),tn!==0&&(en=tn,s=Ok(Nt,tn))),s===1)throw Ot=qk,Lk(Nt,0),Dk(Nt,en),Ek(Nt,B$2()),Ot;if(s===6)Dk(Nt,en);else{if(tn=Nt.current.alternate,!(en&30)&&!Pk(tn)&&(s=Jk(Nt,en),s===2&&(nn=xc$1(Nt),nn!==0&&(en=nn,s=Ok(Nt,nn))),s===1))throw Ot=qk,Lk(Nt,0),Dk(Nt,en),Ek(Nt,B$2()),Ot;switch(Nt.finishedWork=tn,Nt.finishedLanes=en,s){case 0:case 1:throw Error(p$4(345));case 2:Qk(Nt,uk,vk);break;case 3:if(Dk(Nt,en),(en&130023424)===en&&(s=gk+500-B$2(),10<s)){if(uc$1(Nt,0)!==0)break;if(tn=Nt.suspendedLanes,(tn&en)!==en){L$2(),Nt.pingedLanes|=Nt.suspendedLanes&tn;break}Nt.timeoutHandle=Ff(Qk.bind(null,Nt,uk,vk),s);break}Qk(Nt,uk,vk);break;case 4:if(Dk(Nt,en),(en&4194240)===en)break;for(s=Nt.eventTimes,tn=-1;0<en;){var rn=31-oc$1(en);nn=1<<rn,rn=s[rn],rn>tn&&(tn=rn),en&=~nn}if(en=tn,en=B$2()-en,en=(120>en?120:480>en?480:1080>en?1080:1920>en?1920:3e3>en?3e3:4320>en?4320:1960*mk(en/1960))-en,10<en){Nt.timeoutHandle=Ff(Qk.bind(null,Nt,uk,vk),en);break}Qk(Nt,uk,vk);break;case 5:Qk(Nt,uk,vk);break;default:throw Error(p$4(329))}}}return Ek(Nt,B$2()),Nt.callbackNode===Ot?Hk.bind(null,Nt):null}function Ok(Nt,s){var Ot=tk;return Nt.current.memoizedState.isDehydrated&&(Lk(Nt,s).flags|=256),Nt=Jk(Nt,s),Nt!==2&&(s=uk,uk=Ot,s!==null&&Gj(s)),Nt}function Gj(Nt){uk===null?uk=Nt:uk.push.apply(uk,Nt)}function Pk(Nt){for(var s=Nt;;){if(s.flags&16384){var Ot=s.updateQueue;if(Ot!==null&&(Ot=Ot.stores,Ot!==null))for(var en=0;en<Ot.length;en++){var tn=Ot[en],nn=tn.getSnapshot;tn=tn.value;try{if(!He$1(nn(),tn))return!1}catch{return!1}}}if(Ot=s.child,s.subtreeFlags&16384&&Ot!==null)Ot.return=s,s=Ot;else{if(s===Nt)break;for(;s.sibling===null;){if(s.return===null||s.return===Nt)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Dk(Nt,s){for(s&=~sk,s&=~rk,Nt.suspendedLanes|=s,Nt.pingedLanes&=~s,Nt=Nt.expirationTimes;0<s;){var Ot=31-oc$1(s),en=1<<Ot;Nt[Ot]=-1,s&=~en}}function Fk(Nt){if(K$2&6)throw Error(p$4(327));Ik();var s=uc$1(Nt,0);if(!(s&1))return Ek(Nt,B$2()),null;var Ot=Jk(Nt,s);if(Nt.tag!==0&&Ot===2){var en=xc$1(Nt);en!==0&&(s=en,Ot=Ok(Nt,en))}if(Ot===1)throw Ot=qk,Lk(Nt,0),Dk(Nt,s),Ek(Nt,B$2()),Ot;if(Ot===6)throw Error(p$4(345));return Nt.finishedWork=Nt.current.alternate,Nt.finishedLanes=s,Qk(Nt,uk,vk),Ek(Nt,B$2()),null}function Rk(Nt,s){var Ot=K$2;K$2|=1;try{return Nt(s)}finally{K$2=Ot,K$2===0&&(Hj=B$2()+500,fg&&jg())}}function Sk(Nt){xk!==null&&xk.tag===0&&!(K$2&6)&&Ik();var s=K$2;K$2|=1;var Ot=pk.transition,en=C$4;try{if(pk.transition=null,C$4=1,Nt)return Nt()}finally{C$4=en,pk.transition=Ot,K$2=s,!(K$2&6)&&jg()}}function Ij(){gj=fj.current,E$1(fj)}function Lk(Nt,s){Nt.finishedWork=null,Nt.finishedLanes=0;var Ot=Nt.timeoutHandle;if(Ot!==-1&&(Nt.timeoutHandle=-1,Gf(Ot)),Y$2!==null)for(Ot=Y$2.return;Ot!==null;){var en=Ot;switch(wg(en),en.tag){case 1:en=en.type.childContextTypes,en!=null&&$f();break;case 3:Jh(),E$1(Wf),E$1(H$3),Oh();break;case 5:Lh(en);break;case 4:Jh();break;case 13:E$1(M$4);break;case 19:E$1(M$4);break;case 10:Rg(en.type._context);break;case 22:case 23:Ij()}Ot=Ot.return}if(R$4=Nt,Y$2=Nt=wh(Nt.current,null),Z$1=gj=s,T$3=0,qk=null,sk=rk=hh=0,uk=tk=null,Wg!==null){for(s=0;s<Wg.length;s++)if(Ot=Wg[s],en=Ot.interleaved,en!==null){Ot.interleaved=null;var tn=en.next,nn=Ot.pending;if(nn!==null){var rn=nn.next;nn.next=tn,en.next=rn}Ot.pending=en}Wg=null}return Nt}function Nk(Nt,s){do{var Ot=Y$2;try{if(Qg(),Ph.current=ai$1,Sh){for(var en=N$2.memoizedState;en!==null;){var tn=en.queue;tn!==null&&(tn.pending=null),en=en.next}Sh=!1}if(Rh=0,P$3=O$2=N$2=null,Th=!1,Uh=0,ok.current=null,Ot===null||Ot.return===null){T$3=1,qk=s,Y$2=null;break}e:{var nn=Nt,rn=Ot.return,on=Ot,sn=s;if(s=Z$1,on.flags|=32768,sn!==null&&typeof sn=="object"&&typeof sn.then=="function"){var an=sn,ln=on,cn=ln.tag;if(!(ln.mode&1)&&(cn===0||cn===11||cn===15)){var un=ln.alternate;un?(ln.updateQueue=un.updateQueue,ln.memoizedState=un.memoizedState,ln.lanes=un.lanes):(ln.updateQueue=null,ln.memoizedState=null)}var dn=Vi(rn);if(dn!==null){dn.flags&=-257,Wi(dn,rn,on,nn,s),dn.mode&1&&Ti(nn,an,s),s=dn,sn=an;var hn=s.updateQueue;if(hn===null){var fn=new Set;fn.add(sn),s.updateQueue=fn}else hn.add(sn);break e}else{if(!(s&1)){Ti(nn,an,s),uj();break e}sn=Error(p$4(426))}}else if(I$3&&on.mode&1){var mn=Vi(rn);if(mn!==null){!(mn.flags&65536)&&(mn.flags|=256),Wi(mn,rn,on,nn,s),Jg(Ki(sn,on));break e}}nn=sn=Ki(sn,on),T$3!==4&&(T$3=2),tk===null?tk=[nn]:tk.push(nn),nn=rn;do{switch(nn.tag){case 3:nn.flags|=65536,s&=-s,nn.lanes|=s;var gn=Oi(nn,sn,s);fh(nn,gn);break e;case 1:on=sn;var pn=nn.type,_n=nn.stateNode;if(!(nn.flags&128)&&(typeof pn.getDerivedStateFromError=="function"||_n!==null&&typeof _n.componentDidCatch=="function"&&(Si===null||!Si.has(_n)))){nn.flags|=65536,s&=-s,nn.lanes|=s;var vn=Ri(nn,on,s);fh(nn,vn);break e}}nn=nn.return}while(nn!==null)}Tk(Ot)}catch(bn){s=bn,Y$2===Ot&&Ot!==null&&(Y$2=Ot=Ot.return);continue}break}while(!0)}function Kk(){var Nt=nk.current;return nk.current=ai$1,Nt===null?ai$1:Nt}function uj(){(T$3===0||T$3===3||T$3===2)&&(T$3=4),R$4===null||!(hh&268435455)&&!(rk&268435455)||Dk(R$4,Z$1)}function Jk(Nt,s){var Ot=K$2;K$2|=2;var en=Kk();(R$4!==Nt||Z$1!==s)&&(vk=null,Lk(Nt,s));do try{Uk();break}catch(tn){Nk(Nt,tn)}while(!0);if(Qg(),K$2=Ot,nk.current=en,Y$2!==null)throw Error(p$4(261));return R$4=null,Z$1=0,T$3}function Uk(){for(;Y$2!==null;)Vk(Y$2)}function Mk(){for(;Y$2!==null&&!cc$1();)Vk(Y$2)}function Vk(Nt){var s=Wk(Nt.alternate,Nt,gj);Nt.memoizedProps=Nt.pendingProps,s===null?Tk(Nt):Y$2=s,ok.current=null}function Tk(Nt){var s=Nt;do{var Ot=s.alternate;if(Nt=s.return,s.flags&32768){if(Ot=Jj(Ot,s),Ot!==null){Ot.flags&=32767,Y$2=Ot;return}if(Nt!==null)Nt.flags|=32768,Nt.subtreeFlags=0,Nt.deletions=null;else{T$3=6,Y$2=null;return}}else if(Ot=Fj(Ot,s,gj),Ot!==null){Y$2=Ot;return}if(s=s.sibling,s!==null){Y$2=s;return}Y$2=s=Nt}while(s!==null);T$3===0&&(T$3=5)}function Qk(Nt,s,Ot){var en=C$4,tn=pk.transition;try{pk.transition=null,C$4=1,Xk(Nt,s,Ot,en)}finally{pk.transition=tn,C$4=en}return null}function Xk(Nt,s,Ot,en){do Ik();while(xk!==null);if(K$2&6)throw Error(p$4(327));Ot=Nt.finishedWork;var tn=Nt.finishedLanes;if(Ot===null)return null;if(Nt.finishedWork=null,Nt.finishedLanes=0,Ot===Nt.current)throw Error(p$4(177));Nt.callbackNode=null,Nt.callbackPriority=0;var nn=Ot.lanes|Ot.childLanes;if(Bc$1(Nt,nn),Nt===R$4&&(Y$2=R$4=null,Z$1=0),!(Ot.subtreeFlags&2064)&&!(Ot.flags&2064)||wk||(wk=!0,Gk(hc$1,function(){return Ik(),null})),nn=(Ot.flags&15990)!==0,Ot.subtreeFlags&15990||nn){nn=pk.transition,pk.transition=null;var rn=C$4;C$4=1;var on=K$2;K$2|=4,ok.current=null,Pj(Nt,Ot),ek(Ot,Nt),Oe$1(Df),dd$1=!!Cf,Df=Cf=null,Nt.current=Ot,ik(Ot),dc$1(),K$2=on,C$4=rn,pk.transition=nn}else Nt.current=Ot;if(wk&&(wk=!1,xk=Nt,yk=tn),nn=Nt.pendingLanes,nn===0&&(Si=null),mc$1(Ot.stateNode),Ek(Nt,B$2()),s!==null)for(en=Nt.onRecoverableError,Ot=0;Ot<s.length;Ot++)tn=s[Ot],en(tn.value,{componentStack:tn.stack,digest:tn.digest});if(Pi)throw Pi=!1,Nt=Qi,Qi=null,Nt;return yk&1&&Nt.tag!==0&&Ik(),nn=Nt.pendingLanes,nn&1?Nt===Ak?zk++:(zk=0,Ak=Nt):zk=0,jg(),null}function Ik(){if(xk!==null){var Nt=Dc$1(yk),s=pk.transition,Ot=C$4;try{if(pk.transition=null,C$4=16>Nt?16:Nt,xk===null)var en=!1;else{if(Nt=xk,xk=null,yk=0,K$2&6)throw Error(p$4(331));var tn=K$2;for(K$2|=4,V$2=Nt.current;V$2!==null;){var nn=V$2,rn=nn.child;if(V$2.flags&16){var on=nn.deletions;if(on!==null){for(var sn=0;sn<on.length;sn++){var an=on[sn];for(V$2=an;V$2!==null;){var ln=V$2;switch(ln.tag){case 0:case 11:case 15:Qj(8,ln,nn)}var cn=ln.child;if(cn!==null)cn.return=ln,V$2=cn;else for(;V$2!==null;){ln=V$2;var un=ln.sibling,dn=ln.return;if(Tj(ln),ln===an){V$2=null;break}if(un!==null){un.return=dn,V$2=un;break}V$2=dn}}}var hn=nn.alternate;if(hn!==null){var fn=hn.child;if(fn!==null){hn.child=null;do{var mn=fn.sibling;fn.sibling=null,fn=mn}while(fn!==null)}}V$2=nn}}if(nn.subtreeFlags&2064&&rn!==null)rn.return=nn,V$2=rn;else e:for(;V$2!==null;){if(nn=V$2,nn.flags&2048)switch(nn.tag){case 0:case 11:case 15:Qj(9,nn,nn.return)}var gn=nn.sibling;if(gn!==null){gn.return=nn.return,V$2=gn;break e}V$2=nn.return}}var pn=Nt.current;for(V$2=pn;V$2!==null;){rn=V$2;var _n=rn.child;if(rn.subtreeFlags&2064&&_n!==null)_n.return=rn,V$2=_n;else e:for(rn=pn;V$2!==null;){if(on=V$2,on.flags&2048)try{switch(on.tag){case 0:case 11:case 15:Rj(9,on)}}catch(bn){W$2(on,on.return,bn)}if(on===rn){V$2=null;break e}var vn=on.sibling;if(vn!==null){vn.return=on.return,V$2=vn;break e}V$2=on.return}}if(K$2=tn,jg(),lc$1&&typeof lc$1.onPostCommitFiberRoot=="function")try{lc$1.onPostCommitFiberRoot(kc$1,Nt)}catch{}en=!0}return en}finally{C$4=Ot,pk.transition=s}}return!1}function Yk(Nt,s,Ot){s=Ki(Ot,s),s=Oi(Nt,s,1),Nt=dh(Nt,s,1),s=L$2(),Nt!==null&&(Ac$1(Nt,1,s),Ek(Nt,s))}function W$2(Nt,s,Ot){if(Nt.tag===3)Yk(Nt,Nt,Ot);else for(;s!==null;){if(s.tag===3){Yk(s,Nt,Ot);break}else if(s.tag===1){var en=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof en.componentDidCatch=="function"&&(Si===null||!Si.has(en))){Nt=Ki(Ot,Nt),Nt=Ri(s,Nt,1),s=dh(s,Nt,1),Nt=L$2(),s!==null&&(Ac$1(s,1,Nt),Ek(s,Nt));break}}s=s.return}}function Ui(Nt,s,Ot){var en=Nt.pingCache;en!==null&&en.delete(s),s=L$2(),Nt.pingedLanes|=Nt.suspendedLanes&Ot,R$4===Nt&&(Z$1&Ot)===Ot&&(T$3===4||T$3===3&&(Z$1&130023424)===Z$1&&500>B$2()-gk?Lk(Nt,0):sk|=Ot),Ek(Nt,s)}function Zk(Nt,s){s===0&&(Nt.mode&1?(s=sc$1,sc$1<<=1,!(sc$1&130023424)&&(sc$1=4194304)):s=1);var Ot=L$2();Nt=Zg(Nt,s),Nt!==null&&(Ac$1(Nt,s,Ot),Ek(Nt,Ot))}function vj(Nt){var s=Nt.memoizedState,Ot=0;s!==null&&(Ot=s.retryLane),Zk(Nt,Ot)}function ck(Nt,s){var Ot=0;switch(Nt.tag){case 13:var en=Nt.stateNode,tn=Nt.memoizedState;tn!==null&&(Ot=tn.retryLane);break;case 19:en=Nt.stateNode;break;default:throw Error(p$4(314))}en!==null&&en.delete(s),Zk(Nt,Ot)}var Wk;Wk=function(Nt,s,Ot){if(Nt!==null)if(Nt.memoizedProps!==s.pendingProps||Wf.current)Ug=!0;else{if(!(Nt.lanes&Ot)&&!(s.flags&128))return Ug=!1,zj(Nt,s,Ot);Ug=!!(Nt.flags&131072)}else Ug=!1,I$3&&s.flags&1048576&&ug(s,ng,s.index);switch(s.lanes=0,s.tag){case 2:var en=s.type;jj(Nt,s),Nt=s.pendingProps;var tn=Yf(s,H$3.current);Tg(s,Ot),tn=Xh(null,s,en,Nt,tn,Ot);var nn=bi$1();return s.flags|=1,typeof tn=="object"&&tn!==null&&typeof tn.render=="function"&&tn.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,Zf(en)?(nn=!0,cg(s)):nn=!1,s.memoizedState=tn.state!==null&&tn.state!==void 0?tn.state:null,ah(s),tn.updater=nh,s.stateNode=tn,tn._reactInternals=s,rh(s,en,Nt,Ot),s=kj(null,s,en,!0,nn,Ot)):(s.tag=0,I$3&&nn&&vg(s),Yi(null,s,tn,Ot),s=s.child),s;case 16:en=s.elementType;e:{switch(jj(Nt,s),Nt=s.pendingProps,tn=en._init,en=tn(en._payload),s.type=en,tn=s.tag=$k(en),Nt=Lg(en,Nt),tn){case 0:s=dj(null,s,en,Nt,Ot);break e;case 1:s=ij(null,s,en,Nt,Ot);break e;case 11:s=Zi(null,s,en,Nt,Ot);break e;case 14:s=aj(null,s,en,Lg(en.type,Nt),Ot);break e}throw Error(p$4(306,en,""))}return s;case 0:return en=s.type,tn=s.pendingProps,tn=s.elementType===en?tn:Lg(en,tn),dj(Nt,s,en,tn,Ot);case 1:return en=s.type,tn=s.pendingProps,tn=s.elementType===en?tn:Lg(en,tn),ij(Nt,s,en,tn,Ot);case 3:e:{if(lj(s),Nt===null)throw Error(p$4(387));en=s.pendingProps,nn=s.memoizedState,tn=nn.element,bh(Nt,s),gh(s,en,null,Ot);var rn=s.memoizedState;if(en=rn.element,nn.isDehydrated)if(nn={element:en,isDehydrated:!1,cache:rn.cache,pendingSuspenseBoundaries:rn.pendingSuspenseBoundaries,transitions:rn.transitions},s.updateQueue.baseState=nn,s.memoizedState=nn,s.flags&256){tn=Ki(Error(p$4(423)),s),s=mj(Nt,s,en,Ot,tn);break e}else if(en!==tn){tn=Ki(Error(p$4(424)),s),s=mj(Nt,s,en,Ot,tn);break e}else for(yg=Lf(s.stateNode.containerInfo.firstChild),xg=s,I$3=!0,zg=null,Ot=Ch(s,null,en,Ot),s.child=Ot;Ot;)Ot.flags=Ot.flags&-3|4096,Ot=Ot.sibling;else{if(Ig(),en===tn){s=$i(Nt,s,Ot);break e}Yi(Nt,s,en,Ot)}s=s.child}return s;case 5:return Kh(s),Nt===null&&Eg(s),en=s.type,tn=s.pendingProps,nn=Nt!==null?Nt.memoizedProps:null,rn=tn.children,Ef(en,tn)?rn=null:nn!==null&&Ef(en,nn)&&(s.flags|=32),hj(Nt,s),Yi(Nt,s,rn,Ot),s.child;case 6:return Nt===null&&Eg(s),null;case 13:return pj(Nt,s,Ot);case 4:return Ih(s,s.stateNode.containerInfo),en=s.pendingProps,Nt===null?s.child=Bh(s,null,en,Ot):Yi(Nt,s,en,Ot),s.child;case 11:return en=s.type,tn=s.pendingProps,tn=s.elementType===en?tn:Lg(en,tn),Zi(Nt,s,en,tn,Ot);case 7:return Yi(Nt,s,s.pendingProps,Ot),s.child;case 8:return Yi(Nt,s,s.pendingProps.children,Ot),s.child;case 12:return Yi(Nt,s,s.pendingProps.children,Ot),s.child;case 10:e:{if(en=s.type._context,tn=s.pendingProps,nn=s.memoizedProps,rn=tn.value,G$2(Mg,en._currentValue),en._currentValue=rn,nn!==null)if(He$1(nn.value,rn)){if(nn.children===tn.children&&!Wf.current){s=$i(Nt,s,Ot);break e}}else for(nn=s.child,nn!==null&&(nn.return=s);nn!==null;){var on=nn.dependencies;if(on!==null){rn=nn.child;for(var sn=on.firstContext;sn!==null;){if(sn.context===en){if(nn.tag===1){sn=ch(-1,Ot&-Ot),sn.tag=2;var an=nn.updateQueue;if(an!==null){an=an.shared;var ln=an.pending;ln===null?sn.next=sn:(sn.next=ln.next,ln.next=sn),an.pending=sn}}nn.lanes|=Ot,sn=nn.alternate,sn!==null&&(sn.lanes|=Ot),Sg(nn.return,Ot,s),on.lanes|=Ot;break}sn=sn.next}}else if(nn.tag===10)rn=nn.type===s.type?null:nn.child;else if(nn.tag===18){if(rn=nn.return,rn===null)throw Error(p$4(341));rn.lanes|=Ot,on=rn.alternate,on!==null&&(on.lanes|=Ot),Sg(rn,Ot,s),rn=nn.sibling}else rn=nn.child;if(rn!==null)rn.return=nn;else for(rn=nn;rn!==null;){if(rn===s){rn=null;break}if(nn=rn.sibling,nn!==null){nn.return=rn.return,rn=nn;break}rn=rn.return}nn=rn}Yi(Nt,s,tn.children,Ot),s=s.child}return s;case 9:return tn=s.type,en=s.pendingProps.children,Tg(s,Ot),tn=Vg(tn),en=en(tn),s.flags|=1,Yi(Nt,s,en,Ot),s.child;case 14:return en=s.type,tn=Lg(en,s.pendingProps),tn=Lg(en.type,tn),aj(Nt,s,en,tn,Ot);case 15:return cj(Nt,s,s.type,s.pendingProps,Ot);case 17:return en=s.type,tn=s.pendingProps,tn=s.elementType===en?tn:Lg(en,tn),jj(Nt,s),s.tag=1,Zf(en)?(Nt=!0,cg(s)):Nt=!1,Tg(s,Ot),ph(s,en,tn),rh(s,en,tn,Ot),kj(null,s,en,!0,Nt,Ot);case 19:return yj(Nt,s,Ot);case 22:return ej(Nt,s,Ot)}throw Error(p$4(156,s.tag))};function Gk(Nt,s){return ac$1(Nt,s)}function al(Nt,s,Ot,en){this.tag=Nt,this.key=Ot,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=en,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bg(Nt,s,Ot,en){return new al(Nt,s,Ot,en)}function bj(Nt){return Nt=Nt.prototype,!(!Nt||!Nt.isReactComponent)}function $k(Nt){if(typeof Nt=="function")return bj(Nt)?1:0;if(Nt!=null){if(Nt=Nt.$$typeof,Nt===Da$1)return 11;if(Nt===Ga$1)return 14}return 2}function wh(Nt,s){var Ot=Nt.alternate;return Ot===null?(Ot=Bg(Nt.tag,s,Nt.key,Nt.mode),Ot.elementType=Nt.elementType,Ot.type=Nt.type,Ot.stateNode=Nt.stateNode,Ot.alternate=Nt,Nt.alternate=Ot):(Ot.pendingProps=s,Ot.type=Nt.type,Ot.flags=0,Ot.subtreeFlags=0,Ot.deletions=null),Ot.flags=Nt.flags&14680064,Ot.childLanes=Nt.childLanes,Ot.lanes=Nt.lanes,Ot.child=Nt.child,Ot.memoizedProps=Nt.memoizedProps,Ot.memoizedState=Nt.memoizedState,Ot.updateQueue=Nt.updateQueue,s=Nt.dependencies,Ot.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},Ot.sibling=Nt.sibling,Ot.index=Nt.index,Ot.ref=Nt.ref,Ot}function yh(Nt,s,Ot,en,tn,nn){var rn=2;if(en=Nt,typeof Nt=="function")bj(Nt)&&(rn=1);else if(typeof Nt=="string")rn=5;else e:switch(Nt){case ya$1:return Ah(Ot.children,tn,nn,s);case za$1:rn=8,tn|=8;break;case Aa$1:return Nt=Bg(12,Ot,s,tn|2),Nt.elementType=Aa$1,Nt.lanes=nn,Nt;case Ea$1:return Nt=Bg(13,Ot,s,tn),Nt.elementType=Ea$1,Nt.lanes=nn,Nt;case Fa$1:return Nt=Bg(19,Ot,s,tn),Nt.elementType=Fa$1,Nt.lanes=nn,Nt;case Ia$1:return qj(Ot,tn,nn,s);default:if(typeof Nt=="object"&&Nt!==null)switch(Nt.$$typeof){case Ba$1:rn=10;break e;case Ca$1:rn=9;break e;case Da$1:rn=11;break e;case Ga$1:rn=14;break e;case Ha$1:rn=16,en=null;break e}throw Error(p$4(130,Nt==null?Nt:typeof Nt,""))}return s=Bg(rn,Ot,s,tn),s.elementType=Nt,s.type=en,s.lanes=nn,s}function Ah(Nt,s,Ot,en){return Nt=Bg(7,Nt,en,s),Nt.lanes=Ot,Nt}function qj(Nt,s,Ot,en){return Nt=Bg(22,Nt,en,s),Nt.elementType=Ia$1,Nt.lanes=Ot,Nt.stateNode={isHidden:!1},Nt}function xh(Nt,s,Ot){return Nt=Bg(6,Nt,null,s),Nt.lanes=Ot,Nt}function zh(Nt,s,Ot){return s=Bg(4,Nt.children!==null?Nt.children:[],Nt.key,s),s.lanes=Ot,s.stateNode={containerInfo:Nt.containerInfo,pendingChildren:null,implementation:Nt.implementation},s}function bl(Nt,s,Ot,en,tn){this.tag=s,this.containerInfo=Nt,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zc$1(0),this.expirationTimes=zc$1(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zc$1(0),this.identifierPrefix=en,this.onRecoverableError=tn,this.mutableSourceEagerHydrationData=null}function cl(Nt,s,Ot,en,tn,nn,rn,on,sn){return Nt=new bl(Nt,s,Ot,on,sn),s===1?(s=1,nn===!0&&(s|=8)):s=0,nn=Bg(3,null,null,s),Nt.current=nn,nn.stateNode=Nt,nn.memoizedState={element:en,isDehydrated:Ot,cache:null,transitions:null,pendingSuspenseBoundaries:null},ah(nn),Nt}function dl(Nt,s,Ot){var en=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wa$1,key:en==null?null:""+en,children:Nt,containerInfo:s,implementation:Ot}}function el(Nt){if(!Nt)return Vf;Nt=Nt._reactInternals;e:{if(Vb$1(Nt)!==Nt||Nt.tag!==1)throw Error(p$4(170));var s=Nt;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(Zf(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(p$4(171))}if(Nt.tag===1){var Ot=Nt.type;if(Zf(Ot))return bg(Nt,Ot,s)}return s}function fl(Nt,s,Ot,en,tn,nn,rn,on,sn){return Nt=cl(Ot,en,!0,Nt,tn,nn,rn,on,sn),Nt.context=el(null),Ot=Nt.current,en=L$2(),tn=lh(Ot),nn=ch(en,tn),nn.callback=s??null,dh(Ot,nn,tn),Nt.current.lanes=tn,Ac$1(Nt,tn,en),Ek(Nt,en),Nt}function gl(Nt,s,Ot,en){var tn=s.current,nn=L$2(),rn=lh(tn);return Ot=el(Ot),s.context===null?s.context=Ot:s.pendingContext=Ot,s=ch(nn,rn),s.payload={element:Nt},en=en===void 0?null:en,en!==null&&(s.callback=en),Nt=dh(tn,s,rn),Nt!==null&&(mh(Nt,tn,rn,nn),eh(Nt,tn,rn)),rn}function hl(Nt){if(Nt=Nt.current,!Nt.child)return null;switch(Nt.child.tag){case 5:return Nt.child.stateNode;default:return Nt.child.stateNode}}function il(Nt,s){if(Nt=Nt.memoizedState,Nt!==null&&Nt.dehydrated!==null){var Ot=Nt.retryLane;Nt.retryLane=Ot!==0&&Ot<s?Ot:s}}function jl(Nt,s){il(Nt,s),(Nt=Nt.alternate)&&il(Nt,s)}function kl(){return null}var ll=typeof reportError=="function"?reportError:function(Nt){console.error(Nt)};function ml(Nt){this._internalRoot=Nt}nl.prototype.render=ml.prototype.render=function(Nt){var s=this._internalRoot;if(s===null)throw Error(p$4(409));gl(Nt,s,null,null)};nl.prototype.unmount=ml.prototype.unmount=function(){var Nt=this._internalRoot;if(Nt!==null){this._internalRoot=null;var s=Nt.containerInfo;Sk(function(){gl(null,Nt,null,null)}),s[uf]=null}};function nl(Nt){this._internalRoot=Nt}nl.prototype.unstable_scheduleHydration=function(Nt){if(Nt){var s=Hc$1();Nt={blockedOn:null,target:Nt,priority:s};for(var Ot=0;Ot<Qc$1.length&&s!==0&&s<Qc$1[Ot].priority;Ot++);Qc$1.splice(Ot,0,Nt),Ot===0&&Vc$1(Nt)}};function ol(Nt){return!(!Nt||Nt.nodeType!==1&&Nt.nodeType!==9&&Nt.nodeType!==11)}function pl(Nt){return!(!Nt||Nt.nodeType!==1&&Nt.nodeType!==9&&Nt.nodeType!==11&&(Nt.nodeType!==8||Nt.nodeValue!==" react-mount-point-unstable "))}function ql(){}function rl(Nt,s,Ot,en,tn){if(tn){if(typeof en=="function"){var nn=en;en=function(){var an=hl(rn);nn.call(an)}}var rn=fl(s,en,Nt,0,null,!1,!1,"",ql);return Nt._reactRootContainer=rn,Nt[uf]=rn.current,sf(Nt.nodeType===8?Nt.parentNode:Nt),Sk(),rn}for(;tn=Nt.lastChild;)Nt.removeChild(tn);if(typeof en=="function"){var on=en;en=function(){var an=hl(sn);on.call(an)}}var sn=cl(Nt,0,!1,null,null,!1,!1,"",ql);return Nt._reactRootContainer=sn,Nt[uf]=sn.current,sf(Nt.nodeType===8?Nt.parentNode:Nt),Sk(function(){gl(s,sn,Ot,en)}),sn}function sl(Nt,s,Ot,en,tn){var nn=Ot._reactRootContainer;if(nn){var rn=nn;if(typeof tn=="function"){var on=tn;tn=function(){var sn=hl(rn);on.call(sn)}}gl(s,rn,Nt,tn)}else rn=rl(Ot,s,Nt,tn,en);return hl(rn)}Ec$1=function(Nt){switch(Nt.tag){case 3:var s=Nt.stateNode;if(s.current.memoizedState.isDehydrated){var Ot=tc$1(s.pendingLanes);Ot!==0&&(Cc$1(s,Ot|1),Ek(s,B$2()),!(K$2&6)&&(Hj=B$2()+500,jg()))}break;case 13:Sk(function(){var en=Zg(Nt,1);if(en!==null){var tn=L$2();mh(en,Nt,1,tn)}}),jl(Nt,1)}};Fc$1=function(Nt){if(Nt.tag===13){var s=Zg(Nt,134217728);if(s!==null){var Ot=L$2();mh(s,Nt,134217728,Ot)}jl(Nt,134217728)}};Gc$1=function(Nt){if(Nt.tag===13){var s=lh(Nt),Ot=Zg(Nt,s);if(Ot!==null){var en=L$2();mh(Ot,Nt,s,en)}jl(Nt,s)}};Hc$1=function(){return C$4};Ic$1=function(Nt,s){var Ot=C$4;try{return C$4=Nt,s()}finally{C$4=Ot}};yb$1=function(Nt,s,Ot){switch(s){case"input":if(bb$1(Nt,Ot),s=Ot.name,Ot.type==="radio"&&s!=null){for(Ot=Nt;Ot.parentNode;)Ot=Ot.parentNode;for(Ot=Ot.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<Ot.length;s++){var en=Ot[s];if(en!==Nt&&en.form===Nt.form){var tn=Db(en);if(!tn)throw Error(p$4(90));Wa$1(en),bb$1(en,tn)}}}break;case"textarea":ib$1(Nt,Ot);break;case"select":s=Ot.value,s!=null&&fb$1(Nt,!!Ot.multiple,s,!1)}};Gb$1=Rk;Hb$1=Sk;var tl={usingClientEntryPoint:!1,Events:[Cb$1,ue$2,Db,Eb$1,Fb$1,Rk]},ul={findFiberByHostInstance:Wc$1,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},vl={bundleType:ul.bundleType,version:ul.version,rendererPackageName:ul.rendererPackageName,rendererConfig:ul.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ua$1.ReactCurrentDispatcher,findHostInstanceByFiber:function(Nt){return Nt=Zb$1(Nt),Nt===null?null:Nt.stateNode},findFiberByHostInstance:ul.findFiberByHostInstance||kl,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wl.isDisabled&&wl.supportsFiber)try{kc$1=wl.inject(vl),lc$1=wl}catch{}}reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl;reactDom_production_min.createPortal=function(Nt,s){var Ot=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ol(s))throw Error(p$4(200));return dl(Nt,s,null,Ot)};reactDom_production_min.createRoot=function(Nt,s){if(!ol(Nt))throw Error(p$4(299));var Ot=!1,en="",tn=ll;return s!=null&&(s.unstable_strictMode===!0&&(Ot=!0),s.identifierPrefix!==void 0&&(en=s.identifierPrefix),s.onRecoverableError!==void 0&&(tn=s.onRecoverableError)),s=cl(Nt,1,!1,null,null,Ot,!1,en,tn),Nt[uf]=s.current,sf(Nt.nodeType===8?Nt.parentNode:Nt),new ml(s)};reactDom_production_min.findDOMNode=function(Nt){if(Nt==null)return null;if(Nt.nodeType===1)return Nt;var s=Nt._reactInternals;if(s===void 0)throw typeof Nt.render=="function"?Error(p$4(188)):(Nt=Object.keys(Nt).join(","),Error(p$4(268,Nt)));return Nt=Zb$1(s),Nt=Nt===null?null:Nt.stateNode,Nt};reactDom_production_min.flushSync=function(Nt){return Sk(Nt)};reactDom_production_min.hydrate=function(Nt,s,Ot){if(!pl(s))throw Error(p$4(200));return sl(null,Nt,s,!0,Ot)};reactDom_production_min.hydrateRoot=function(Nt,s,Ot){if(!ol(Nt))throw Error(p$4(405));var en=Ot!=null&&Ot.hydratedSources||null,tn=!1,nn="",rn=ll;if(Ot!=null&&(Ot.unstable_strictMode===!0&&(tn=!0),Ot.identifierPrefix!==void 0&&(nn=Ot.identifierPrefix),Ot.onRecoverableError!==void 0&&(rn=Ot.onRecoverableError)),s=fl(s,null,Nt,1,Ot??null,tn,!1,nn,rn),Nt[uf]=s.current,sf(Nt),en)for(Nt=0;Nt<en.length;Nt++)Ot=en[Nt],tn=Ot._getVersion,tn=tn(Ot._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[Ot,tn]:s.mutableSourceEagerHydrationData.push(Ot,tn);return new nl(s)};reactDom_production_min.render=function(Nt,s,Ot){if(!pl(s))throw Error(p$4(200));return sl(null,Nt,s,!1,Ot)};reactDom_production_min.unmountComponentAtNode=function(Nt){if(!pl(Nt))throw Error(p$4(40));return Nt._reactRootContainer?(Sk(function(){sl(null,null,Nt,!1,function(){Nt._reactRootContainer=null,Nt[uf]=null})}),!0):!1};reactDom_production_min.unstable_batchedUpdates=Rk;reactDom_production_min.unstable_renderSubtreeIntoContainer=function(Nt,s,Ot,en){if(!pl(Ot))throw Error(p$4(200));if(Nt==null||Nt._reactInternals===void 0)throw Error(p$4(38));return sl(Nt,s,Ot,!1,en)};reactDom_production_min.version="18.2.0-next-9e3b772b8-20220608";function checkDCE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(Nt){console.error(Nt)}}checkDCE(),reactDom.exports=reactDom_production_min;var reactDomExports=reactDom.exports,m$6=reactDomExports;client.createRoot=m$6.createRoot,client.hydrateRoot=m$6.hydrateRoot;var a$4=typeof window<"u"&&new class{constructor(){this.raf=Nt=>{requestAnimationFrame(this.raf);const s=Nt-this.now;this.now=Nt;for(let Ot=0;Ot<this.callbacks.length;Ot++)this.callbacks[Ot].callback(Nt,s)},this.callbacks=[],this.now=performance.now(),requestAnimationFrame(this.raf)}add(Nt,s=0){return this.callbacks.push({callback:Nt,priority:s}),this.callbacks.sort((Ot,en)=>Ot.priority-en.priority),()=>this.remove(Nt)}remove(Nt){this.callbacks=this.callbacks.filter(({callback:s})=>Nt!==s)}},define_import_meta_env_default$1={BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const createStoreImpl=Nt=>{let s;const Ot=new Set,en=(ln,cn)=>{const un=typeof ln=="function"?ln(s):ln;if(!Object.is(un,s)){const dn=s;s=cn??(typeof un!="object"||un===null)?un:Object.assign({},s,un),Ot.forEach(hn=>hn(s,dn))}},tn=()=>s,sn={setState:en,getState:tn,getInitialState:()=>an,subscribe:ln=>(Ot.add(ln),()=>Ot.delete(ln)),destroy:()=>{(define_import_meta_env_default$1?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),Ot.clear()}},an=s=Nt(en,tn,sn);return sn},createStore=Nt=>Nt?createStoreImpl(Nt):createStoreImpl;var withSelector={exports:{}},withSelector_production_min={},shim={exports:{}},useSyncExternalStoreShim_production_min={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e$1=reactExports;function h$1(Nt,s){return Nt===s&&(Nt!==0||1/Nt===1/s)||Nt!==Nt&&s!==s}var k$4=typeof Object.is=="function"?Object.is:h$1,l$2=e$1.useState,m$5=e$1.useEffect,n$1=e$1.useLayoutEffect,p$3=e$1.useDebugValue;function q$3(Nt,s){var Ot=s(),en=l$2({inst:{value:Ot,getSnapshot:s}}),tn=en[0].inst,nn=en[1];return n$1(function(){tn.value=Ot,tn.getSnapshot=s,r$5(tn)&&nn({inst:tn})},[Nt,Ot,s]),m$5(function(){return r$5(tn)&&nn({inst:tn}),Nt(function(){r$5(tn)&&nn({inst:tn})})},[Nt]),p$3(Ot),Ot}function r$5(Nt){var s=Nt.getSnapshot;Nt=Nt.value;try{var Ot=s();return!k$4(Nt,Ot)}catch{return!0}}function t$2(Nt,s){return s()}var u$3=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?t$2:q$3;useSyncExternalStoreShim_production_min.useSyncExternalStore=e$1.useSyncExternalStore!==void 0?e$1.useSyncExternalStore:u$3;shim.exports=useSyncExternalStoreShim_production_min;var shimExports=shim.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var h=reactExports,n=shimExports;function p$2(Nt,s){return Nt===s&&(Nt!==0||1/Nt===1/s)||Nt!==Nt&&s!==s}var q$2=typeof Object.is=="function"?Object.is:p$2,r$4=n.useSyncExternalStore,t$1=h.useRef,u$2=h.useEffect,v$3=h.useMemo,w$3=h.useDebugValue;withSelector_production_min.useSyncExternalStoreWithSelector=function(Nt,s,Ot,en,tn){var nn=t$1(null);if(nn.current===null){var rn={hasValue:!1,value:null};nn.current=rn}else rn=nn.current;nn=v$3(function(){function sn(dn){if(!an){if(an=!0,ln=dn,dn=en(dn),tn!==void 0&&rn.hasValue){var hn=rn.value;if(tn(hn,dn))return cn=hn}return cn=dn}if(hn=cn,q$2(ln,dn))return hn;var fn=en(dn);return tn!==void 0&&tn(hn,fn)?hn:(ln=dn,cn=fn)}var an=!1,ln,cn,un=Ot===void 0?null:Ot;return[function(){return sn(s())},un===null?void 0:function(){return sn(un())}]},[s,Ot,en,tn]);var on=r$4(Nt,nn[0],nn[1]);return u$2(function(){rn.hasValue=!0,rn.value=on},[on]),w$3(on),on};withSelector.exports=withSelector_production_min;var withSelectorExports=withSelector.exports;const useSyncExternalStoreExports=getDefaultExportFromCjs(withSelectorExports);var define_import_meta_env_default={BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{useDebugValue}=React$1,{useSyncExternalStoreWithSelector}=useSyncExternalStoreExports;let didWarnAboutEqualityFn=!1;const identity=Nt=>Nt;function useStore(Nt,s=identity,Ot){(define_import_meta_env_default?"production":void 0)!=="production"&&Ot&&!didWarnAboutEqualityFn&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),didWarnAboutEqualityFn=!0);const en=useSyncExternalStoreWithSelector(Nt.subscribe,Nt.getState,Nt.getServerState||Nt.getInitialState,s,Ot);return useDebugValue(en),en}const createImpl=Nt=>{(define_import_meta_env_default?"production":void 0)!=="production"&&typeof Nt!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const s=typeof Nt=="function"?createStore(Nt):Nt,Ot=(en,tn)=>useStore(s,en,tn);return Object.assign(Ot,s),Ot},create=Nt=>Nt?createImpl(Nt):createImpl;function m$4(Nt,s=0){reactExports.useEffect(()=>{if(Nt)return a$4.add(Nt,s),()=>a$4.remove(Nt)},[Nt,s])}create(Nt=>({elements:[],addElement:s=>{Nt(Ot=>({elements:[...Ot.elements,s]}))},removeElement:s=>{Nt(Ot=>({elements:Ot.elements.filter(en=>en!==s)}))}}));function t(Nt,s,Ot){return Math.max(Nt,Math.min(s,Ot))}class Animate{advance(s){var on;if(!this.isRunning)return;let Ot=!1;if(this.lerp)this.value=(en=this.value,tn=this.to,nn=60*this.lerp,rn=s,function(sn,an,ln){return(1-ln)*sn+ln*an}(en,tn,1-Math.exp(-nn*rn))),Math.round(this.value)===this.to&&(this.value=this.to,Ot=!0);else{this.currentTime+=s;const sn=t(0,this.currentTime/this.duration,1);Ot=sn>=1;const an=Ot?1:this.easing(sn);this.value=this.from+(this.to-this.from)*an}var en,tn,nn,rn;(on=this.onUpdate)==null||on.call(this,this.value,Ot),Ot&&this.stop()}stop(){this.isRunning=!1}fromTo(s,Ot,{lerp:en=.1,duration:tn=1,easing:nn=sn=>sn,onStart:rn,onUpdate:on}){this.from=this.value=s,this.to=Ot,this.lerp=en,this.duration=tn,this.easing=nn,this.currentTime=0,this.isRunning=!0,rn==null||rn(),this.onUpdate=on}}class Dimensions{constructor({wrapper:s,content:Ot,autoResize:en=!0,debounce:tn=250}={}){pr(this,"resize",()=>{this.onWrapperResize(),this.onContentResize()});pr(this,"onWrapperResize",()=>{this.wrapper===window?(this.width=window.innerWidth,this.height=window.innerHeight):(this.width=this.wrapper.clientWidth,this.height=this.wrapper.clientHeight)});pr(this,"onContentResize",()=>{this.wrapper===window?(this.scrollHeight=this.content.scrollHeight,this.scrollWidth=this.content.scrollWidth):(this.scrollHeight=this.wrapper.scrollHeight,this.scrollWidth=this.wrapper.scrollWidth)});this.wrapper=s,this.content=Ot,en&&(this.debouncedResize=function(nn,rn){let on;return function(){let sn=arguments,an=this;clearTimeout(on),on=setTimeout(function(){nn.apply(an,sn)},rn)}}(this.resize,tn),this.wrapper===window?window.addEventListener("resize",this.debouncedResize,!1):(this.wrapperResizeObserver=new ResizeObserver(this.debouncedResize),this.wrapperResizeObserver.observe(this.wrapper)),this.contentResizeObserver=new ResizeObserver(this.debouncedResize),this.contentResizeObserver.observe(this.content)),this.resize()}destroy(){var s,Ot;(s=this.wrapperResizeObserver)==null||s.disconnect(),(Ot=this.contentResizeObserver)==null||Ot.disconnect(),window.removeEventListener("resize",this.debouncedResize,!1)}get limit(){return{x:this.scrollWidth-this.width,y:this.scrollHeight-this.height}}}class Emitter{constructor(){this.events={}}emit(s,...Ot){let en=this.events[s]||[];for(let tn=0,nn=en.length;tn<nn;tn++)en[tn](...Ot)}on(s,Ot){var en;return(en=this.events[s])!=null&&en.push(Ot)||(this.events[s]=[Ot]),()=>{var tn;this.events[s]=(tn=this.events[s])==null?void 0:tn.filter(nn=>Ot!==nn)}}off(s,Ot){var en;this.events[s]=(en=this.events[s])==null?void 0:en.filter(tn=>Ot!==tn)}destroy(){this.events={}}}const e=100/6;class VirtualScroll{constructor(s,{wheelMultiplier:Ot=1,touchMultiplier:en=1}){pr(this,"onTouchStart",s=>{const{clientX:Ot,clientY:en}=s.targetTouches?s.targetTouches[0]:s;this.touchStart.x=Ot,this.touchStart.y=en,this.lastDelta={x:0,y:0},this.emitter.emit("scroll",{deltaX:0,deltaY:0,event:s})});pr(this,"onTouchMove",s=>{const{clientX:Ot,clientY:en}=s.targetTouches?s.targetTouches[0]:s,tn=-(Ot-this.touchStart.x)*this.touchMultiplier,nn=-(en-this.touchStart.y)*this.touchMultiplier;this.touchStart.x=Ot,this.touchStart.y=en,this.lastDelta={x:tn,y:nn},this.emitter.emit("scroll",{deltaX:tn,deltaY:nn,event:s})});pr(this,"onTouchEnd",s=>{this.emitter.emit("scroll",{deltaX:this.lastDelta.x,deltaY:this.lastDelta.y,event:s})});pr(this,"onWheel",s=>{let{deltaX:Ot,deltaY:en,deltaMode:tn}=s;Ot*=tn===1?e:tn===2?this.windowWidth:1,en*=tn===1?e:tn===2?this.windowHeight:1,Ot*=this.wheelMultiplier,en*=this.wheelMultiplier,this.emitter.emit("scroll",{deltaX:Ot,deltaY:en,event:s})});pr(this,"onWindowResize",()=>{this.windowWidth=window.innerWidth,this.windowHeight=window.innerHeight});this.element=s,this.wheelMultiplier=Ot,this.touchMultiplier=en,this.touchStart={x:null,y:null},this.emitter=new Emitter,window.addEventListener("resize",this.onWindowResize,!1),this.onWindowResize(),this.element.addEventListener("wheel",this.onWheel,{passive:!1}),this.element.addEventListener("touchstart",this.onTouchStart,{passive:!1}),this.element.addEventListener("touchmove",this.onTouchMove,{passive:!1}),this.element.addEventListener("touchend",this.onTouchEnd,{passive:!1})}on(s,Ot){return this.emitter.on(s,Ot)}destroy(){this.emitter.destroy(),window.removeEventListener("resize",this.onWindowResize,!1),this.element.removeEventListener("wheel",this.onWheel,{passive:!1}),this.element.removeEventListener("touchstart",this.onTouchStart,{passive:!1}),this.element.removeEventListener("touchmove",this.onTouchMove,{passive:!1}),this.element.removeEventListener("touchend",this.onTouchEnd,{passive:!1})}}class Lenis{constructor({wrapper:s=window,content:Ot=document.documentElement,wheelEventsTarget:en=s,eventsTarget:tn=en,smoothWheel:nn=!0,syncTouch:rn=!1,syncTouchLerp:on=.075,touchInertiaMultiplier:sn=35,duration:an,easing:ln=_n=>Math.min(1,1.001-Math.pow(2,-10*_n)),lerp:cn=!an&&.1,infinite:un=!1,orientation:dn="vertical",gestureOrientation:hn="vertical",touchMultiplier:fn=1,wheelMultiplier:mn=1,autoResize:gn=!0,__experimental__naiveDimensions:pn=!1}={}){this.__isSmooth=!1,this.__isScrolling=!1,this.__isStopped=!1,this.__isLocked=!1,this.onVirtualScroll=({deltaX:_n,deltaY:vn,event:bn})=>{if(bn.ctrlKey)return;const wn=bn.type.includes("touch"),Sn=bn.type.includes("wheel");if(this.options.syncTouch&&wn&&bn.type==="touchstart"&&!this.isStopped&&!this.isLocked)return void this.reset();const kn=_n===0&&vn===0,En=this.options.gestureOrientation==="vertical"&&vn===0||this.options.gestureOrientation==="horizontal"&&_n===0;if(kn||En)return;let In=bn.composedPath();if(In=In.slice(0,In.indexOf(this.rootElement)),In.find(Vn=>{var $n,jn,Ln,Pn,Bn;return(($n=Vn.hasAttribute)===null||$n===void 0?void 0:$n.call(Vn,"data-lenis-prevent"))||wn&&((jn=Vn.hasAttribute)===null||jn===void 0?void 0:jn.call(Vn,"data-lenis-prevent-touch"))||Sn&&((Ln=Vn.hasAttribute)===null||Ln===void 0?void 0:Ln.call(Vn,"data-lenis-prevent-wheel"))||((Pn=Vn.classList)===null||Pn===void 0?void 0:Pn.contains("lenis"))&&!(!((Bn=Vn.classList)===null||Bn===void 0)&&Bn.contains("lenis-stopped"))}))return;if(this.isStopped||this.isLocked)return void bn.preventDefault();if(this.isSmooth=this.options.syncTouch&&wn||this.options.smoothWheel&&Sn,!this.isSmooth)return this.isScrolling=!1,void this.animate.stop();bn.preventDefault();let An=vn;this.options.gestureOrientation==="both"?An=Math.abs(vn)>Math.abs(_n)?vn:_n:this.options.gestureOrientation==="horizontal"&&(An=_n);const Rn=wn&&this.options.syncTouch,Nn=wn&&bn.type==="touchend"&&Math.abs(An)>5;Nn&&(An=this.velocity*this.options.touchInertiaMultiplier),this.scrollTo(this.targetScroll+An,Object.assign({programmatic:!1},Rn?{lerp:Nn?this.options.syncTouchLerp:1}:{lerp:this.options.lerp,duration:this.options.duration,easing:this.options.easing}))},this.onNativeScroll=()=>{if(!this.__preventNextScrollEvent&&!this.isScrolling){const _n=this.animatedScroll;this.animatedScroll=this.targetScroll=this.actualScroll,this.velocity=0,this.direction=Math.sign(this.animatedScroll-_n),this.emit()}},window.lenisVersion="1.0.42",s!==document.documentElement&&s!==document.body||(s=window),this.options={wrapper:s,content:Ot,wheelEventsTarget:en,eventsTarget:tn,smoothWheel:nn,syncTouch:rn,syncTouchLerp:on,touchInertiaMultiplier:sn,duration:an,easing:ln,lerp:cn,infinite:un,gestureOrientation:hn,orientation:dn,touchMultiplier:fn,wheelMultiplier:mn,autoResize:gn,__experimental__naiveDimensions:pn},this.animate=new Animate,this.emitter=new Emitter,this.dimensions=new Dimensions({wrapper:s,content:Ot,autoResize:gn}),this.toggleClassName("lenis",!0),this.velocity=0,this.isLocked=!1,this.isStopped=!1,this.isSmooth=rn||nn,this.isScrolling=!1,this.targetScroll=this.animatedScroll=this.actualScroll,this.options.wrapper.addEventListener("scroll",this.onNativeScroll,!1),this.virtualScroll=new VirtualScroll(tn,{touchMultiplier:fn,wheelMultiplier:mn}),this.virtualScroll.on("scroll",this.onVirtualScroll)}destroy(){this.emitter.destroy(),this.options.wrapper.removeEventListener("scroll",this.onNativeScroll,!1),this.virtualScroll.destroy(),this.dimensions.destroy(),this.toggleClassName("lenis",!1),this.toggleClassName("lenis-smooth",!1),this.toggleClassName("lenis-scrolling",!1),this.toggleClassName("lenis-stopped",!1),this.toggleClassName("lenis-locked",!1)}on(s,Ot){return this.emitter.on(s,Ot)}off(s,Ot){return this.emitter.off(s,Ot)}setScroll(s){this.isHorizontal?this.rootElement.scrollLeft=s:this.rootElement.scrollTop=s}resize(){this.dimensions.resize()}emit(){this.emitter.emit("scroll",this)}reset(){this.isLocked=!1,this.isScrolling=!1,this.animatedScroll=this.targetScroll=this.actualScroll,this.velocity=0,this.animate.stop()}start(){this.isStopped&&(this.isStopped=!1,this.reset())}stop(){this.isStopped||(this.isStopped=!0,this.animate.stop(),this.reset())}raf(s){const Ot=s-(this.time||s);this.time=s,this.animate.advance(.001*Ot)}scrollTo(s,{offset:Ot=0,immediate:en=!1,lock:tn=!1,duration:nn=this.options.duration,easing:rn=this.options.easing,lerp:on=!nn&&this.options.lerp,onComplete:sn,force:an=!1,programmatic:ln=!0}={}){if(!this.isStopped&&!this.isLocked||an){if(["top","left","start"].includes(s))s=0;else if(["bottom","right","end"].includes(s))s=this.limit;else{let cn;if(typeof s=="string"?cn=document.querySelector(s):s!=null&&s.nodeType&&(cn=s),cn){if(this.options.wrapper!==window){const dn=this.options.wrapper.getBoundingClientRect();Ot-=this.isHorizontal?dn.left:dn.top}const un=cn.getBoundingClientRect();s=(this.isHorizontal?un.left:un.top)+this.animatedScroll}}if(typeof s=="number"){if(s+=Ot,s=Math.round(s),this.options.infinite?ln&&(this.targetScroll=this.animatedScroll=this.scroll):s=t(0,s,this.limit),en)return this.animatedScroll=this.targetScroll=s,this.setScroll(this.scroll),this.reset(),void(sn==null||sn(this));if(!ln){if(s===this.targetScroll)return;this.targetScroll=s}this.animate.fromTo(this.animatedScroll,s,{duration:nn,easing:rn,lerp:on,onStart:()=>{tn&&(this.isLocked=!0),this.isScrolling=!0},onUpdate:(cn,un)=>{this.isScrolling=!0,this.velocity=cn-this.animatedScroll,this.direction=Math.sign(this.velocity),this.animatedScroll=cn,this.setScroll(this.scroll),ln&&(this.targetScroll=cn),un||this.emit(),un&&(this.reset(),this.emit(),sn==null||sn(this),this.__preventNextScrollEvent=!0,requestAnimationFrame(()=>{delete this.__preventNextScrollEvent}))}})}}}get rootElement(){return this.options.wrapper===window?document.documentElement:this.options.wrapper}get limit(){return this.options.__experimental__naiveDimensions?this.isHorizontal?this.rootElement.scrollWidth-this.rootElement.clientWidth:this.rootElement.scrollHeight-this.rootElement.clientHeight:this.dimensions.limit[this.isHorizontal?"x":"y"]}get isHorizontal(){return this.options.orientation==="horizontal"}get actualScroll(){return this.isHorizontal?this.rootElement.scrollLeft:this.rootElement.scrollTop}get scroll(){return this.options.infinite?(s=this.animatedScroll,Ot=this.limit,(s%Ot+Ot)%Ot):this.animatedScroll;var s,Ot}get progress(){return this.limit===0?1:this.scroll/this.limit}get isSmooth(){return this.__isSmooth}set isSmooth(s){this.__isSmooth!==s&&(this.__isSmooth=s,this.toggleClassName("lenis-smooth",s))}get isScrolling(){return this.__isScrolling}set isScrolling(s){this.__isScrolling!==s&&(this.__isScrolling=s,this.toggleClassName("lenis-scrolling",s))}get isStopped(){return this.__isStopped}set isStopped(s){this.__isStopped!==s&&(this.__isStopped=s,this.toggleClassName("lenis-stopped",s))}get isLocked(){return this.__isLocked}set isLocked(s){this.__isLocked!==s&&(this.__isLocked=s,this.toggleClassName("lenis-locked",s))}get className(){let s="lenis";return this.isStopped&&(s+=" lenis-stopped"),this.isLocked&&(s+=" lenis-locked"),this.isScrolling&&(s+=" lenis-scrolling"),this.isSmooth&&(s+=" lenis-smooth"),s}toggleClassName(s,Ot){this.rootElement.classList.toggle(s,Ot),this.emitter.emit("className change",this)}}function r$3(Nt){var s,Ot,en="";if(typeof Nt=="string"||typeof Nt=="number")en+=Nt;else if(typeof Nt=="object")if(Array.isArray(Nt)){var tn=Nt.length;for(s=0;s<tn;s++)Nt[s]&&(Ot=r$3(Nt[s]))&&(en&&(en+=" "),en+=Ot)}else for(Ot in Nt)Nt[Ot]&&(en&&(en+=" "),en+=Ot);return en}function clsx(){for(var Nt,s,Ot=0,en="",tn=arguments.length;Ot<tn;Ot++)(Nt=arguments[Ot])&&(s=r$3(Nt))&&(en&&(en+=" "),en+=s);return en}typeof window<"u"&&(window.reactLenisVersion="0.0.46");const m$3=reactExports.createContext(),d$2=create(()=>({})),y$3=reactExports.forwardRef((Nt,s)=>{var{children:Ot,root:en=!1,options:tn={},autoRaf:nn=!0,rafPriority:rn=0,className:on}=Nt,sn=function(pn,_n){var vn={};for(var bn in pn)Object.prototype.hasOwnProperty.call(pn,bn)&&_n.indexOf(bn)<0&&(vn[bn]=pn[bn]);if(pn!=null&&typeof Object.getOwnPropertySymbols=="function"){var wn=0;for(bn=Object.getOwnPropertySymbols(pn);wn<bn.length;wn++)_n.indexOf(bn[wn])<0&&Object.prototype.propertyIsEnumerable.call(pn,bn[wn])&&(vn[bn[wn]]=pn[bn[wn]])}return vn}(Nt,["children","root","options","autoRaf","rafPriority","className"]);const an=reactExports.useRef(),ln=reactExports.useRef(),[cn,un]=reactExports.useState(),dn=reactExports.useRef([]),hn=reactExports.useCallback((pn,_n)=>{dn.current.push({callback:pn,priority:_n}),dn.current.sort((vn,bn)=>vn.priority-bn.priority)},[]),fn=reactExports.useCallback(pn=>{dn.current=dn.current.filter(_n=>_n.callback!==pn)},[]);reactExports.useImperativeHandle(s,()=>({wrapper:an.current,content:ln.current,lenis:cn}),[cn]),reactExports.useEffect(()=>{const pn=new Lenis(Object.assign(Object.assign({},tn),!en&&{wrapper:an.current,content:ln.current}));return un(pn),()=>{pn.destroy(),un(void 0)}},[en,JSON.stringify(tn)]),m$4(pn=>{nn&&(cn==null||cn.raf(pn))},rn),reactExports.useEffect(()=>{en&&cn&&d$2.setState({lenis:cn,addCallback:hn,removeCallback:fn})},[en,cn,hn,fn]);const mn=reactExports.useCallback(pn=>{for(let _n=0;_n<dn.current.length;_n++)dn.current[_n].callback(pn)},[]);reactExports.useEffect(()=>(cn==null||cn.on("scroll",mn),()=>{cn==null||cn.off("scroll",mn)}),[cn,mn]);const gn=reactExports.useCallback(()=>{an.current&&(an.current.className=clsx(cn==null?void 0:cn.className,on))},[cn,on]);return reactExports.useEffect(()=>(gn(),cn==null||cn.on("className change",gn),()=>{cn==null||cn.off("className change",gn)}),[cn,gn]),React$1.createElement(m$3.Provider,{value:{lenis:cn,addCallback:hn,removeCallback:fn}},en?Ot:React$1.createElement("div",Object.assign({ref:an,className:clsx(cn==null?void 0:cn.className,on)},sn),React$1.createElement("div",{ref:ln},Ot)))});/**
 * @remix-run/router v1.15.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$3(){return _extends$3=Object.assign?Object.assign.bind():function(Nt){for(var s=1;s<arguments.length;s++){var Ot=arguments[s];for(var en in Ot)Object.prototype.hasOwnProperty.call(Ot,en)&&(Nt[en]=Ot[en])}return Nt},_extends$3.apply(this,arguments)}var Action;(function(Nt){Nt.Pop="POP",Nt.Push="PUSH",Nt.Replace="REPLACE"})(Action||(Action={}));const PopStateEventType="popstate";function createBrowserHistory(Nt){Nt===void 0&&(Nt={});function s(en,tn){let{pathname:nn,search:rn,hash:on}=en.location;return createLocation("",{pathname:nn,search:rn,hash:on},tn.state&&tn.state.usr||null,tn.state&&tn.state.key||"default")}function Ot(en,tn){return typeof tn=="string"?tn:createPath(tn)}return getUrlBasedHistory(s,Ot,null,Nt)}function invariant(Nt,s){if(Nt===!1||Nt===null||typeof Nt>"u")throw new Error(s)}function warning(Nt,s){if(!Nt){typeof console<"u"&&console.warn(s);try{throw new Error(s)}catch{}}}function createKey(){return Math.random().toString(36).substr(2,8)}function getHistoryState(Nt,s){return{usr:Nt.state,key:Nt.key,idx:s}}function createLocation(Nt,s,Ot,en){return Ot===void 0&&(Ot=null),_extends$3({pathname:typeof Nt=="string"?Nt:Nt.pathname,search:"",hash:""},typeof s=="string"?parsePath(s):s,{state:Ot,key:s&&s.key||en||createKey()})}function createPath(Nt){let{pathname:s="/",search:Ot="",hash:en=""}=Nt;return Ot&&Ot!=="?"&&(s+=Ot.charAt(0)==="?"?Ot:"?"+Ot),en&&en!=="#"&&(s+=en.charAt(0)==="#"?en:"#"+en),s}function parsePath(Nt){let s={};if(Nt){let Ot=Nt.indexOf("#");Ot>=0&&(s.hash=Nt.substr(Ot),Nt=Nt.substr(0,Ot));let en=Nt.indexOf("?");en>=0&&(s.search=Nt.substr(en),Nt=Nt.substr(0,en)),Nt&&(s.pathname=Nt)}return s}function getUrlBasedHistory(Nt,s,Ot,en){en===void 0&&(en={});let{window:tn=document.defaultView,v5Compat:nn=!1}=en,rn=tn.history,on=Action.Pop,sn=null,an=ln();an==null&&(an=0,rn.replaceState(_extends$3({},rn.state,{idx:an}),""));function ln(){return(rn.state||{idx:null}).idx}function cn(){on=Action.Pop;let mn=ln(),gn=mn==null?null:mn-an;an=mn,sn&&sn({action:on,location:fn.location,delta:gn})}function un(mn,gn){on=Action.Push;let pn=createLocation(fn.location,mn,gn);Ot&&Ot(pn,mn),an=ln()+1;let _n=getHistoryState(pn,an),vn=fn.createHref(pn);try{rn.pushState(_n,"",vn)}catch(bn){if(bn instanceof DOMException&&bn.name==="DataCloneError")throw bn;tn.location.assign(vn)}nn&&sn&&sn({action:on,location:fn.location,delta:1})}function dn(mn,gn){on=Action.Replace;let pn=createLocation(fn.location,mn,gn);Ot&&Ot(pn,mn),an=ln();let _n=getHistoryState(pn,an),vn=fn.createHref(pn);rn.replaceState(_n,"",vn),nn&&sn&&sn({action:on,location:fn.location,delta:0})}function hn(mn){let gn=tn.location.origin!=="null"?tn.location.origin:tn.location.href,pn=typeof mn=="string"?mn:createPath(mn);return pn=pn.replace(/ $/,"%20"),invariant(gn,"No window.location.(origin|href) available to create URL for href: "+pn),new URL(pn,gn)}let fn={get action(){return on},get location(){return Nt(tn,rn)},listen(mn){if(sn)throw new Error("A history only accepts one active listener");return tn.addEventListener(PopStateEventType,cn),sn=mn,()=>{tn.removeEventListener(PopStateEventType,cn),sn=null}},createHref(mn){return s(tn,mn)},createURL:hn,encodeLocation(mn){let gn=hn(mn);return{pathname:gn.pathname,search:gn.search,hash:gn.hash}},push:un,replace:dn,go(mn){return rn.go(mn)}};return fn}var ResultType;(function(Nt){Nt.data="data",Nt.deferred="deferred",Nt.redirect="redirect",Nt.error="error"})(ResultType||(ResultType={}));function matchRoutes(Nt,s,Ot){Ot===void 0&&(Ot="/");let en=typeof s=="string"?parsePath(s):s,tn=stripBasename(en.pathname||"/",Ot);if(tn==null)return null;let nn=flattenRoutes(Nt);rankRouteBranches(nn);let rn=null;for(let on=0;rn==null&&on<nn.length;++on){let sn=decodePath$1(tn);rn=matchRouteBranch(nn[on],sn)}return rn}function flattenRoutes(Nt,s,Ot,en){s===void 0&&(s=[]),Ot===void 0&&(Ot=[]),en===void 0&&(en="");let tn=(nn,rn,on)=>{let sn={relativePath:on===void 0?nn.path||"":on,caseSensitive:nn.caseSensitive===!0,childrenIndex:rn,route:nn};sn.relativePath.startsWith("/")&&(invariant(sn.relativePath.startsWith(en),'Absolute route path "'+sn.relativePath+'" nested under path '+('"'+en+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),sn.relativePath=sn.relativePath.slice(en.length));let an=joinPaths([en,sn.relativePath]),ln=Ot.concat(sn);nn.children&&nn.children.length>0&&(invariant(nn.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+an+'".')),flattenRoutes(nn.children,s,ln,an)),!(nn.path==null&&!nn.index)&&s.push({path:an,score:computeScore(an,nn.index),routesMeta:ln})};return Nt.forEach((nn,rn)=>{var on;if(nn.path===""||!((on=nn.path)!=null&&on.includes("?")))tn(nn,rn);else for(let sn of explodeOptionalSegments(nn.path))tn(nn,rn,sn)}),s}function explodeOptionalSegments(Nt){let s=Nt.split("/");if(s.length===0)return[];let[Ot,...en]=s,tn=Ot.endsWith("?"),nn=Ot.replace(/\?$/,"");if(en.length===0)return tn?[nn,""]:[nn];let rn=explodeOptionalSegments(en.join("/")),on=[];return on.push(...rn.map(sn=>sn===""?nn:[nn,sn].join("/"))),tn&&on.push(...rn),on.map(sn=>Nt.startsWith("/")&&sn===""?"/":sn)}function rankRouteBranches(Nt){Nt.sort((s,Ot)=>s.score!==Ot.score?Ot.score-s.score:compareIndexes(s.routesMeta.map(en=>en.childrenIndex),Ot.routesMeta.map(en=>en.childrenIndex)))}const paramRe=/^:[\w-]+$/,dynamicSegmentValue=3,indexRouteValue=2,emptySegmentValue=1,staticSegmentValue=10,splatPenalty=-2,isSplat=Nt=>Nt==="*";function computeScore(Nt,s){let Ot=Nt.split("/"),en=Ot.length;return Ot.some(isSplat)&&(en+=splatPenalty),s&&(en+=indexRouteValue),Ot.filter(tn=>!isSplat(tn)).reduce((tn,nn)=>tn+(paramRe.test(nn)?dynamicSegmentValue:nn===""?emptySegmentValue:staticSegmentValue),en)}function compareIndexes(Nt,s){return Nt.length===s.length&&Nt.slice(0,-1).every((en,tn)=>en===s[tn])?Nt[Nt.length-1]-s[s.length-1]:0}function matchRouteBranch(Nt,s){let{routesMeta:Ot}=Nt,en={},tn="/",nn=[];for(let rn=0;rn<Ot.length;++rn){let on=Ot[rn],sn=rn===Ot.length-1,an=tn==="/"?s:s.slice(tn.length)||"/",ln=matchPath({path:on.relativePath,caseSensitive:on.caseSensitive,end:sn},an);if(!ln)return null;Object.assign(en,ln.params);let cn=on.route;nn.push({params:en,pathname:joinPaths([tn,ln.pathname]),pathnameBase:normalizePathname(joinPaths([tn,ln.pathnameBase])),route:cn}),ln.pathnameBase!=="/"&&(tn=joinPaths([tn,ln.pathnameBase]))}return nn}function matchPath(Nt,s){typeof Nt=="string"&&(Nt={path:Nt,caseSensitive:!1,end:!0});let[Ot,en]=compilePath(Nt.path,Nt.caseSensitive,Nt.end),tn=s.match(Ot);if(!tn)return null;let nn=tn[0],rn=nn.replace(/(.)\/+$/,"$1"),on=tn.slice(1);return{params:en.reduce((an,ln,cn)=>{let{paramName:un,isOptional:dn}=ln;if(un==="*"){let fn=on[cn]||"";rn=nn.slice(0,nn.length-fn.length).replace(/(.)\/+$/,"$1")}const hn=on[cn];return dn&&!hn?an[un]=void 0:an[un]=(hn||"").replace(/%2F/g,"/"),an},{}),pathname:nn,pathnameBase:rn,pattern:Nt}}function compilePath(Nt,s,Ot){s===void 0&&(s=!1),Ot===void 0&&(Ot=!0),warning(Nt==="*"||!Nt.endsWith("*")||Nt.endsWith("/*"),'Route path "'+Nt+'" will be treated as if it were '+('"'+Nt.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+Nt.replace(/\*$/,"/*")+'".'));let en=[],tn="^"+Nt.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(rn,on,sn)=>(en.push({paramName:on,isOptional:sn!=null}),sn?"/?([^\\/]+)?":"/([^\\/]+)"));return Nt.endsWith("*")?(en.push({paramName:"*"}),tn+=Nt==="*"||Nt==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):Ot?tn+="\\/*$":Nt!==""&&Nt!=="/"&&(tn+="(?:(?=\\/|$))"),[new RegExp(tn,s?void 0:"i"),en]}function decodePath$1(Nt){try{return Nt.split("/").map(s=>decodeURIComponent(s).replace(/\//g,"%2F")).join("/")}catch(s){return warning(!1,'The URL path "'+Nt+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+s+").")),Nt}}function stripBasename(Nt,s){if(s==="/")return Nt;if(!Nt.toLowerCase().startsWith(s.toLowerCase()))return null;let Ot=s.endsWith("/")?s.length-1:s.length,en=Nt.charAt(Ot);return en&&en!=="/"?null:Nt.slice(Ot)||"/"}function resolvePath(Nt,s){s===void 0&&(s="/");let{pathname:Ot,search:en="",hash:tn=""}=typeof Nt=="string"?parsePath(Nt):Nt;return{pathname:Ot?Ot.startsWith("/")?Ot:resolvePathname(Ot,s):s,search:normalizeSearch(en),hash:normalizeHash(tn)}}function resolvePathname(Nt,s){let Ot=s.replace(/\/+$/,"").split("/");return Nt.split("/").forEach(tn=>{tn===".."?Ot.length>1&&Ot.pop():tn!=="."&&Ot.push(tn)}),Ot.length>1?Ot.join("/"):"/"}function getInvalidPathError(Nt,s,Ot,en){return"Cannot include a '"+Nt+"' character in a manually specified "+("`to."+s+"` field ["+JSON.stringify(en)+"].  Please separate it out to the ")+("`to."+Ot+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function getPathContributingMatches(Nt){return Nt.filter((s,Ot)=>Ot===0||s.route.path&&s.route.path.length>0)}function getResolveToMatches(Nt,s){let Ot=getPathContributingMatches(Nt);return s?Ot.map((en,tn)=>tn===Nt.length-1?en.pathname:en.pathnameBase):Ot.map(en=>en.pathnameBase)}function resolveTo(Nt,s,Ot,en){en===void 0&&(en=!1);let tn;typeof Nt=="string"?tn=parsePath(Nt):(tn=_extends$3({},Nt),invariant(!tn.pathname||!tn.pathname.includes("?"),getInvalidPathError("?","pathname","search",tn)),invariant(!tn.pathname||!tn.pathname.includes("#"),getInvalidPathError("#","pathname","hash",tn)),invariant(!tn.search||!tn.search.includes("#"),getInvalidPathError("#","search","hash",tn)));let nn=Nt===""||tn.pathname==="",rn=nn?"/":tn.pathname,on;if(rn==null)on=Ot;else{let cn=s.length-1;if(!en&&rn.startsWith("..")){let un=rn.split("/");for(;un[0]==="..";)un.shift(),cn-=1;tn.pathname=un.join("/")}on=cn>=0?s[cn]:"/"}let sn=resolvePath(tn,on),an=rn&&rn!=="/"&&rn.endsWith("/"),ln=(nn||rn===".")&&Ot.endsWith("/");return!sn.pathname.endsWith("/")&&(an||ln)&&(sn.pathname+="/"),sn}const joinPaths=Nt=>Nt.join("/").replace(/\/\/+/g,"/"),normalizePathname=Nt=>Nt.replace(/\/+$/,"").replace(/^\/*/,"/"),normalizeSearch=Nt=>!Nt||Nt==="?"?"":Nt.startsWith("?")?Nt:"?"+Nt,normalizeHash=Nt=>!Nt||Nt==="#"?"":Nt.startsWith("#")?Nt:"#"+Nt;function isRouteErrorResponse(Nt){return Nt!=null&&typeof Nt.status=="number"&&typeof Nt.statusText=="string"&&typeof Nt.internal=="boolean"&&"data"in Nt}const validMutationMethodsArr=["post","put","patch","delete"];new Set(validMutationMethodsArr);const validRequestMethodsArr=["get",...validMutationMethodsArr];new Set(validRequestMethodsArr);/**
 * React Router v6.22.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$2(){return _extends$2=Object.assign?Object.assign.bind():function(Nt){for(var s=1;s<arguments.length;s++){var Ot=arguments[s];for(var en in Ot)Object.prototype.hasOwnProperty.call(Ot,en)&&(Nt[en]=Ot[en])}return Nt},_extends$2.apply(this,arguments)}const DataRouterContext=reactExports.createContext(null),DataRouterStateContext=reactExports.createContext(null),NavigationContext=reactExports.createContext(null),LocationContext=reactExports.createContext(null),RouteContext=reactExports.createContext({outlet:null,matches:[],isDataRoute:!1}),RouteErrorContext=reactExports.createContext(null);function useHref(Nt,s){let{relative:Ot}=s===void 0?{}:s;useInRouterContext()||invariant(!1);let{basename:en,navigator:tn}=reactExports.useContext(NavigationContext),{hash:nn,pathname:rn,search:on}=useResolvedPath(Nt,{relative:Ot}),sn=rn;return en!=="/"&&(sn=rn==="/"?en:joinPaths([en,rn])),tn.createHref({pathname:sn,search:on,hash:nn})}function useInRouterContext(){return reactExports.useContext(LocationContext)!=null}function useLocation(){return useInRouterContext()||invariant(!1),reactExports.useContext(LocationContext).location}function useIsomorphicLayoutEffect(Nt){reactExports.useContext(NavigationContext).static||reactExports.useLayoutEffect(Nt)}function useNavigate(){let{isDataRoute:Nt}=reactExports.useContext(RouteContext);return Nt?useNavigateStable():useNavigateUnstable()}function useNavigateUnstable(){useInRouterContext()||invariant(!1);let Nt=reactExports.useContext(DataRouterContext),{basename:s,future:Ot,navigator:en}=reactExports.useContext(NavigationContext),{matches:tn}=reactExports.useContext(RouteContext),{pathname:nn}=useLocation(),rn=JSON.stringify(getResolveToMatches(tn,Ot.v7_relativeSplatPath)),on=reactExports.useRef(!1);return useIsomorphicLayoutEffect(()=>{on.current=!0}),reactExports.useCallback(function(an,ln){if(ln===void 0&&(ln={}),!on.current)return;if(typeof an=="number"){en.go(an);return}let cn=resolveTo(an,JSON.parse(rn),nn,ln.relative==="path");Nt==null&&s!=="/"&&(cn.pathname=cn.pathname==="/"?s:joinPaths([s,cn.pathname])),(ln.replace?en.replace:en.push)(cn,ln.state,ln)},[s,en,rn,nn,Nt])}function useParams(){let{matches:Nt}=reactExports.useContext(RouteContext),s=Nt[Nt.length-1];return s?s.params:{}}function useResolvedPath(Nt,s){let{relative:Ot}=s===void 0?{}:s,{future:en}=reactExports.useContext(NavigationContext),{matches:tn}=reactExports.useContext(RouteContext),{pathname:nn}=useLocation(),rn=JSON.stringify(getResolveToMatches(tn,en.v7_relativeSplatPath));return reactExports.useMemo(()=>resolveTo(Nt,JSON.parse(rn),nn,Ot==="path"),[Nt,rn,nn,Ot])}function useRoutes(Nt,s){return useRoutesImpl(Nt,s)}function useRoutesImpl(Nt,s,Ot,en){useInRouterContext()||invariant(!1);let{navigator:tn}=reactExports.useContext(NavigationContext),{matches:nn}=reactExports.useContext(RouteContext),rn=nn[nn.length-1],on=rn?rn.params:{};rn&&rn.pathname;let sn=rn?rn.pathnameBase:"/";rn&&rn.route;let an=useLocation(),ln;if(s){var cn;let mn=typeof s=="string"?parsePath(s):s;sn==="/"||(cn=mn.pathname)!=null&&cn.startsWith(sn)||invariant(!1),ln=mn}else ln=an;let un=ln.pathname||"/",dn=un;if(sn!=="/"){let mn=sn.replace(/^\//,"").split("/");dn="/"+un.replace(/^\//,"").split("/").slice(mn.length).join("/")}let hn=matchRoutes(Nt,{pathname:dn}),fn=_renderMatches(hn&&hn.map(mn=>Object.assign({},mn,{params:Object.assign({},on,mn.params),pathname:joinPaths([sn,tn.encodeLocation?tn.encodeLocation(mn.pathname).pathname:mn.pathname]),pathnameBase:mn.pathnameBase==="/"?sn:joinPaths([sn,tn.encodeLocation?tn.encodeLocation(mn.pathnameBase).pathname:mn.pathnameBase])})),nn,Ot,en);return s&&fn?reactExports.createElement(LocationContext.Provider,{value:{location:_extends$2({pathname:"/",search:"",hash:"",state:null,key:"default"},ln),navigationType:Action.Pop}},fn):fn}function DefaultErrorComponent(){let Nt=useRouteError(),s=isRouteErrorResponse(Nt)?Nt.status+" "+Nt.statusText:Nt instanceof Error?Nt.message:JSON.stringify(Nt),Ot=Nt instanceof Error?Nt.stack:null,tn={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("h2",null,"Unexpected Application Error!"),reactExports.createElement("h3",{style:{fontStyle:"italic"}},s),Ot?reactExports.createElement("pre",{style:tn},Ot):null,null)}const defaultErrorElement=reactExports.createElement(DefaultErrorComponent,null);class RenderErrorBoundary extends reactExports.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,Ot){return Ot.location!==s.location||Ot.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:Ot.error,location:Ot.location,revalidation:s.revalidation||Ot.revalidation}}componentDidCatch(s,Ot){console.error("React Router caught the following error during render",s,Ot)}render(){return this.state.error!==void 0?reactExports.createElement(RouteContext.Provider,{value:this.props.routeContext},reactExports.createElement(RouteErrorContext.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function RenderedRoute(Nt){let{routeContext:s,match:Ot,children:en}=Nt,tn=reactExports.useContext(DataRouterContext);return tn&&tn.static&&tn.staticContext&&(Ot.route.errorElement||Ot.route.ErrorBoundary)&&(tn.staticContext._deepestRenderedBoundaryId=Ot.route.id),reactExports.createElement(RouteContext.Provider,{value:s},en)}function _renderMatches(Nt,s,Ot,en){var tn;if(s===void 0&&(s=[]),Ot===void 0&&(Ot=null),en===void 0&&(en=null),Nt==null){var nn;if((nn=Ot)!=null&&nn.errors)Nt=Ot.matches;else return null}let rn=Nt,on=(tn=Ot)==null?void 0:tn.errors;if(on!=null){let ln=rn.findIndex(cn=>cn.route.id&&(on==null?void 0:on[cn.route.id]));ln>=0||invariant(!1),rn=rn.slice(0,Math.min(rn.length,ln+1))}let sn=!1,an=-1;if(Ot&&en&&en.v7_partialHydration)for(let ln=0;ln<rn.length;ln++){let cn=rn[ln];if((cn.route.HydrateFallback||cn.route.hydrateFallbackElement)&&(an=ln),cn.route.id){let{loaderData:un,errors:dn}=Ot,hn=cn.route.loader&&un[cn.route.id]===void 0&&(!dn||dn[cn.route.id]===void 0);if(cn.route.lazy||hn){sn=!0,an>=0?rn=rn.slice(0,an+1):rn=[rn[0]];break}}}return rn.reduceRight((ln,cn,un)=>{let dn,hn=!1,fn=null,mn=null;Ot&&(dn=on&&cn.route.id?on[cn.route.id]:void 0,fn=cn.route.errorElement||defaultErrorElement,sn&&(an<0&&un===0?(warningOnce("route-fallback",!1),hn=!0,mn=null):an===un&&(hn=!0,mn=cn.route.hydrateFallbackElement||null)));let gn=s.concat(rn.slice(0,un+1)),pn=()=>{let _n;return dn?_n=fn:hn?_n=mn:cn.route.Component?_n=reactExports.createElement(cn.route.Component,null):cn.route.element?_n=cn.route.element:_n=ln,reactExports.createElement(RenderedRoute,{match:cn,routeContext:{outlet:ln,matches:gn,isDataRoute:Ot!=null},children:_n})};return Ot&&(cn.route.ErrorBoundary||cn.route.errorElement||un===0)?reactExports.createElement(RenderErrorBoundary,{location:Ot.location,revalidation:Ot.revalidation,component:fn,error:dn,children:pn(),routeContext:{outlet:null,matches:gn,isDataRoute:!0}}):pn()},null)}var DataRouterHook$1=function(Nt){return Nt.UseBlocker="useBlocker",Nt.UseRevalidator="useRevalidator",Nt.UseNavigateStable="useNavigate",Nt}(DataRouterHook$1||{}),DataRouterStateHook$1=function(Nt){return Nt.UseBlocker="useBlocker",Nt.UseLoaderData="useLoaderData",Nt.UseActionData="useActionData",Nt.UseRouteError="useRouteError",Nt.UseNavigation="useNavigation",Nt.UseRouteLoaderData="useRouteLoaderData",Nt.UseMatches="useMatches",Nt.UseRevalidator="useRevalidator",Nt.UseNavigateStable="useNavigate",Nt.UseRouteId="useRouteId",Nt}(DataRouterStateHook$1||{});function useDataRouterContext$1(Nt){let s=reactExports.useContext(DataRouterContext);return s||invariant(!1),s}function useDataRouterState(Nt){let s=reactExports.useContext(DataRouterStateContext);return s||invariant(!1),s}function useRouteContext(Nt){let s=reactExports.useContext(RouteContext);return s||invariant(!1),s}function useCurrentRouteId(Nt){let s=useRouteContext(),Ot=s.matches[s.matches.length-1];return Ot.route.id||invariant(!1),Ot.route.id}function useRouteError(){var Nt;let s=reactExports.useContext(RouteErrorContext),Ot=useDataRouterState(DataRouterStateHook$1.UseRouteError),en=useCurrentRouteId(DataRouterStateHook$1.UseRouteError);return s!==void 0?s:(Nt=Ot.errors)==null?void 0:Nt[en]}function useNavigateStable(){let{router:Nt}=useDataRouterContext$1(DataRouterHook$1.UseNavigateStable),s=useCurrentRouteId(DataRouterStateHook$1.UseNavigateStable),Ot=reactExports.useRef(!1);return useIsomorphicLayoutEffect(()=>{Ot.current=!0}),reactExports.useCallback(function(tn,nn){nn===void 0&&(nn={}),Ot.current&&(typeof tn=="number"?Nt.navigate(tn):Nt.navigate(tn,_extends$2({fromRouteId:s},nn)))},[Nt,s])}const alreadyWarned={};function warningOnce(Nt,s,Ot){!s&&!alreadyWarned[Nt]&&(alreadyWarned[Nt]=!0)}function Navigate(Nt){let{to:s,replace:Ot,state:en,relative:tn}=Nt;useInRouterContext()||invariant(!1);let{future:nn,static:rn}=reactExports.useContext(NavigationContext),{matches:on}=reactExports.useContext(RouteContext),{pathname:sn}=useLocation(),an=useNavigate(),ln=resolveTo(s,getResolveToMatches(on,nn.v7_relativeSplatPath),sn,tn==="path"),cn=JSON.stringify(ln);return reactExports.useEffect(()=>an(JSON.parse(cn),{replace:Ot,state:en,relative:tn}),[an,cn,tn,Ot,en]),null}function Route(Nt){invariant(!1)}function Router(Nt){let{basename:s="/",children:Ot=null,location:en,navigationType:tn=Action.Pop,navigator:nn,static:rn=!1,future:on}=Nt;useInRouterContext()&&invariant(!1);let sn=s.replace(/^\/*/,"/"),an=reactExports.useMemo(()=>({basename:sn,navigator:nn,static:rn,future:_extends$2({v7_relativeSplatPath:!1},on)}),[sn,on,nn,rn]);typeof en=="string"&&(en=parsePath(en));let{pathname:ln="/",search:cn="",hash:un="",state:dn=null,key:hn="default"}=en,fn=reactExports.useMemo(()=>{let mn=stripBasename(ln,sn);return mn==null?null:{location:{pathname:mn,search:cn,hash:un,state:dn,key:hn},navigationType:tn}},[sn,ln,cn,un,dn,hn,tn]);return fn==null?null:reactExports.createElement(NavigationContext.Provider,{value:an},reactExports.createElement(LocationContext.Provider,{children:Ot,value:fn}))}function Routes(Nt){let{children:s,location:Ot}=Nt;return useRoutes(createRoutesFromChildren(s),Ot)}new Promise(()=>{});function createRoutesFromChildren(Nt,s){s===void 0&&(s=[]);let Ot=[];return reactExports.Children.forEach(Nt,(en,tn)=>{if(!reactExports.isValidElement(en))return;let nn=[...s,tn];if(en.type===reactExports.Fragment){Ot.push.apply(Ot,createRoutesFromChildren(en.props.children,nn));return}en.type!==Route&&invariant(!1),!en.props.index||!en.props.children||invariant(!1);let rn={id:en.props.id||nn.join("-"),caseSensitive:en.props.caseSensitive,element:en.props.element,Component:en.props.Component,index:en.props.index,path:en.props.path,loader:en.props.loader,action:en.props.action,errorElement:en.props.errorElement,ErrorBoundary:en.props.ErrorBoundary,hasErrorBoundary:en.props.ErrorBoundary!=null||en.props.errorElement!=null,shouldRevalidate:en.props.shouldRevalidate,handle:en.props.handle,lazy:en.props.lazy};en.props.children&&(rn.children=createRoutesFromChildren(en.props.children,nn)),Ot.push(rn)}),Ot}/**
 * React Router DOM v6.22.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$1(){return _extends$1=Object.assign?Object.assign.bind():function(Nt){for(var s=1;s<arguments.length;s++){var Ot=arguments[s];for(var en in Ot)Object.prototype.hasOwnProperty.call(Ot,en)&&(Nt[en]=Ot[en])}return Nt},_extends$1.apply(this,arguments)}function _objectWithoutPropertiesLoose(Nt,s){if(Nt==null)return{};var Ot={},en=Object.keys(Nt),tn,nn;for(nn=0;nn<en.length;nn++)tn=en[nn],!(s.indexOf(tn)>=0)&&(Ot[tn]=Nt[tn]);return Ot}function isModifiedEvent(Nt){return!!(Nt.metaKey||Nt.altKey||Nt.ctrlKey||Nt.shiftKey)}function shouldProcessLinkClick(Nt,s){return Nt.button===0&&(!s||s==="_self")&&!isModifiedEvent(Nt)}const _excluded=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],_excluded2=["aria-current","caseSensitive","className","end","style","to","unstable_viewTransition","children"],REACT_ROUTER_VERSION="6";try{window.__reactRouterVersion=REACT_ROUTER_VERSION}catch{}const ViewTransitionContext=reactExports.createContext({isTransitioning:!1}),START_TRANSITION="startTransition",startTransitionImpl=React$2[START_TRANSITION];function BrowserRouter(Nt){let{basename:s,children:Ot,future:en,window:tn}=Nt,nn=reactExports.useRef();nn.current==null&&(nn.current=createBrowserHistory({window:tn,v5Compat:!0}));let rn=nn.current,[on,sn]=reactExports.useState({action:rn.action,location:rn.location}),{v7_startTransition:an}=en||{},ln=reactExports.useCallback(cn=>{an&&startTransitionImpl?startTransitionImpl(()=>sn(cn)):sn(cn)},[sn,an]);return reactExports.useLayoutEffect(()=>rn.listen(ln),[rn,ln]),reactExports.createElement(Router,{basename:s,children:Ot,location:on.location,navigationType:on.action,navigator:rn,future:en})}const isBrowser=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",ABSOLUTE_URL_REGEX=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Link=reactExports.forwardRef(function(s,Ot){let{onClick:en,relative:tn,reloadDocument:nn,replace:rn,state:on,target:sn,to:an,preventScrollReset:ln,unstable_viewTransition:cn}=s,un=_objectWithoutPropertiesLoose(s,_excluded),{basename:dn}=reactExports.useContext(NavigationContext),hn,fn=!1;if(typeof an=="string"&&ABSOLUTE_URL_REGEX.test(an)&&(hn=an,isBrowser))try{let _n=new URL(window.location.href),vn=an.startsWith("//")?new URL(_n.protocol+an):new URL(an),bn=stripBasename(vn.pathname,dn);vn.origin===_n.origin&&bn!=null?an=bn+vn.search+vn.hash:fn=!0}catch{}let mn=useHref(an,{relative:tn}),gn=useLinkClickHandler(an,{replace:rn,state:on,target:sn,preventScrollReset:ln,relative:tn,unstable_viewTransition:cn});function pn(_n){en&&en(_n),_n.defaultPrevented||gn(_n)}return reactExports.createElement("a",_extends$1({},un,{href:hn||mn,onClick:fn||nn?en:pn,ref:Ot,target:sn}))}),NavLink=reactExports.forwardRef(function(s,Ot){let{"aria-current":en="page",caseSensitive:tn=!1,className:nn="",end:rn=!1,style:on,to:sn,unstable_viewTransition:an,children:ln}=s,cn=_objectWithoutPropertiesLoose(s,_excluded2),un=useResolvedPath(sn,{relative:cn.relative}),dn=useLocation(),hn=reactExports.useContext(DataRouterStateContext),{navigator:fn,basename:mn}=reactExports.useContext(NavigationContext),gn=hn!=null&&useViewTransitionState(un)&&an===!0,pn=fn.encodeLocation?fn.encodeLocation(un).pathname:un.pathname,_n=dn.pathname,vn=hn&&hn.navigation&&hn.navigation.location?hn.navigation.location.pathname:null;tn||(_n=_n.toLowerCase(),vn=vn?vn.toLowerCase():null,pn=pn.toLowerCase()),vn&&mn&&(vn=stripBasename(vn,mn)||vn);const bn=pn!=="/"&&pn.endsWith("/")?pn.length-1:pn.length;let wn=_n===pn||!rn&&_n.startsWith(pn)&&_n.charAt(bn)==="/",Sn=vn!=null&&(vn===pn||!rn&&vn.startsWith(pn)&&vn.charAt(pn.length)==="/"),kn={isActive:wn,isPending:Sn,isTransitioning:gn},En=wn?en:void 0,In;typeof nn=="function"?In=nn(kn):In=[nn,wn?"active":null,Sn?"pending":null,gn?"transitioning":null].filter(Boolean).join(" ");let An=typeof on=="function"?on(kn):on;return reactExports.createElement(Link,_extends$1({},cn,{"aria-current":En,className:In,ref:Ot,style:An,to:sn,unstable_viewTransition:an}),typeof ln=="function"?ln(kn):ln)});var DataRouterHook;(function(Nt){Nt.UseScrollRestoration="useScrollRestoration",Nt.UseSubmit="useSubmit",Nt.UseSubmitFetcher="useSubmitFetcher",Nt.UseFetcher="useFetcher",Nt.useViewTransitionState="useViewTransitionState"})(DataRouterHook||(DataRouterHook={}));var DataRouterStateHook;(function(Nt){Nt.UseFetcher="useFetcher",Nt.UseFetchers="useFetchers",Nt.UseScrollRestoration="useScrollRestoration"})(DataRouterStateHook||(DataRouterStateHook={}));function useDataRouterContext(Nt){let s=reactExports.useContext(DataRouterContext);return s||invariant(!1),s}function useLinkClickHandler(Nt,s){let{target:Ot,replace:en,state:tn,preventScrollReset:nn,relative:rn,unstable_viewTransition:on}=s===void 0?{}:s,sn=useNavigate(),an=useLocation(),ln=useResolvedPath(Nt,{relative:rn});return reactExports.useCallback(cn=>{if(shouldProcessLinkClick(cn,Ot)){cn.preventDefault();let un=en!==void 0?en:createPath(an)===createPath(ln);sn(Nt,{replace:un,state:tn,preventScrollReset:nn,relative:rn,unstable_viewTransition:on})}},[an,sn,ln,en,tn,Ot,Nt,nn,rn,on])}function useViewTransitionState(Nt,s){s===void 0&&(s={});let Ot=reactExports.useContext(ViewTransitionContext);Ot==null&&invariant(!1);let{basename:en}=useDataRouterContext(DataRouterHook.useViewTransitionState),tn=useResolvedPath(Nt,{relative:s.relative});if(!Ot.isTransitioning)return!1;let nn=stripBasename(Ot.currentLocation.pathname,en)||Ot.currentLocation.pathname,rn=stripBasename(Ot.nextLocation.pathname,en)||Ot.nextLocation.pathname;return matchPath(tn.pathname,rn)!=null||matchPath(tn.pathname,nn)!=null}function Navbar({theme:Nt,setTheme:s}){const Ot=new Date("19 April 2024"),en=({mobile:cn})=>jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Link,{className:"w-fit",to:"/services/branding",children:jsxRuntimeExports.jsxs("li",{className:cn?"border-b-[2px] border-transparent dark:hover:border-violet-500":"border-b-[2px] border-transparent hover:border-violet-700 dark:hover:border-violet-500",index:"1",children:[jsxRuntimeExports.jsx("p",{className:cn&&"hidden",children:"Branding"}),jsxRuntimeExports.jsx("p",{className:"_hover",children:"Branding"})]})}),jsxRuntimeExports.jsx(Link,{className:"w-fit",to:"/services/development",children:jsxRuntimeExports.jsxs("li",{className:"border-b-[2px] border-transparent hover:border-violet-700 dark:hover:border-violet-500",index:"3",children:[jsxRuntimeExports.jsx("p",{className:cn&&"hidden",children:"Development"}),jsxRuntimeExports.jsx("p",{className:"_hover",children:"Development"})]})}),jsxRuntimeExports.jsx(Link,{className:"w-fit",to:"/services/brand-advisory",children:jsxRuntimeExports.jsxs("li",{className:"border-b-[2px] border-transparent hover:border-violet-700 dark:hover:border-violet-500",index:"2",children:[jsxRuntimeExports.jsx("p",{className:cn&&"hidden",children:"Brand Advisory"}),jsxRuntimeExports.jsx("p",{className:"_hover",children:"Brand Advisory"})]})}),jsxRuntimeExports.jsx(Link,{className:"w-fit",to:"/services/marketing",children:jsxRuntimeExports.jsxs("li",{className:"border-b-[2px] border-transparent hover:border-violet-700 dark:hover:border-violet-500",index:"4",children:[jsxRuntimeExports.jsx("p",{className:cn&&"hidden",children:"Marketing"}),jsxRuntimeExports.jsx("p",{className:"_hover",children:"Marketing"})]})}),jsxRuntimeExports.jsx(Link,{className:"w-fit",to:"/services/content-writing",children:jsxRuntimeExports.jsxs("li",{className:"border-b-[2px] border-transparent hover:border-violet-700 dark:hover:border-violet-500",index:"5",children:[jsxRuntimeExports.jsx("p",{className:cn&&"hidden",children:"Content Writing"}),jsxRuntimeExports.jsx("p",{className:"_hover",children:"Content Writing"})]})}),jsxRuntimeExports.jsx(Link,{className:"w-fit",to:"/services/software-testing",children:jsxRuntimeExports.jsxs("li",{className:"border-b-[2px] border-transparent hover:border-violet-700 dark:hover:border-violet-500",index:"6",children:[jsxRuntimeExports.jsx("p",{className:cn&&"hidden",children:"Software Testing"}),jsxRuntimeExports.jsx("p",{className:"_hover",children:"Software Testing"})]})})]}),tn=()=>{document.querySelector("._navbar").classList.add("border-[#ddd]","bg-white/80","backdrop-blur-lg","dark:bg-slate-800/80","dark:border-slate-700")},nn=()=>{document.querySelector("._navbar").classList.remove("border-[#ddd]","bg-white/80","backdrop-blur-lg","dark:bg-slate-800/80","dark:border-slate-700")},rn=()=>{document.getElementById("homepage")&&document.querySelector("._services-menu").classList.contains("-translate-y-[100rem]")?window.scrollY>50?tn():nn():tn()},on=()=>jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("li",{children:jsxRuntimeExports.jsx(NavLink,{to:"/",children:"Home"})}),jsxRuntimeExports.jsxs("li",{className:"relative",onMouseLeave:()=>{window.scrollY<50&&nn(),sn()},children:[jsxRuntimeExports.jsxs(NavLink,{to:"/services",id:"navServiceMenuItem",className:"hidden lg:block",onMouseEnter:()=>{tn(),document.querySelector("._services-menu").classList.remove("transform"),document.querySelector("._services-menu").classList.remove("-translate-y-[100rem]"),document.querySelector("._services-menu").classList.add("opacity-100")},children:["Services"," ",jsxRuntimeExports.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:"w-4 h-4 inline-block",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 9l-7 7-7-7"})})]}),jsxRuntimeExports.jsxs("button",{className:"lg:hidden",onClick:()=>{document.getElementById("service-lists-in-mob").classList.toggle("hidden")},children:["Services"," ",jsxRuntimeExports.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:"w-4 h-4 inline-block",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 9l-7 7-7-7"})})]}),jsxRuntimeExports.jsx("div",{id:"service-lists-in-mob",className:"mt-3 mb-4 lg:hidden",children:jsxRuntimeExports.jsx("ol",{className:"flex flex-col",children:jsxRuntimeExports.jsx(en,{mobile:!0})})}),jsxRuntimeExports.jsx("div",{className:"_services-menu bg-white dark:bg-slate-800 absolute -translate-y-[100rem] transition-all duration-500 ease-in-out px-6 shadow-md opacity-0 hidden md:block w-auto whitespace-nowrap",role:"menu",style:{zIndex:"10"},children:jsxRuntimeExports.jsx("ol",{className:"custom flex flex-col gap-3 text-lg font-[500] text-slate-700 dark:text-white py-[1.5rem] ",onClick:sn,children:jsxRuntimeExports.jsx(en,{})})})]}),jsxRuntimeExports.jsx("li",{children:jsxRuntimeExports.jsx(NavLink,{to:"/about-us",children:"About Us"})}),jsxRuntimeExports.jsx("li",{children:jsxRuntimeExports.jsx(NavLink,{to:"/blog",children:"Blog"})}),jsxRuntimeExports.jsx("li",{className:"block lg:hidden",children:jsxRuntimeExports.jsx("a",{href:"/#contact",children:"Contact Us"})})]}),sn=()=>{document.getElementById("homepage")||tn(),document.querySelector("._services-menu").classList.add("transform"),document.querySelector("._services-menu").classList.add("-translate-y-[100rem]"),document.querySelector("._services-menu").classList.remove("opacity-100")},an=()=>{document.querySelector("._drawer-menu-layer").classList.add("hidden"),document.querySelector("._drawer-menu").classList.add("transform"),document.querySelector("._drawer-menu").classList.add("translate-x-full"),document.querySelector("._drawer-menu").classList.add("-translate-y-[100rem]")};React$1.useEffect(()=>{window.onscroll=function(){document.querySelector(".bottom-to-top")&&(document.body.scrollTop>20||document.documentElement.scrollTop>20?document.querySelector(".bottom-to-top").style.display="block":document.querySelector(".bottom-to-top").style.display="none")}},[]),React$1.useEffect(()=>{const cn=document.querySelectorAll("._services-menu ol li");cn.forEach(un=>{un.addEventListener("mouseenter",dn=>{cn.forEach(hn=>{hn.classList.remove("active")}),un.classList.add("active")}),un.addEventListener("mouseleave",()=>{cn.forEach(dn=>{dn.classList.remove("active")})})}),rn(),window.addEventListener("scroll",rn),document.getElementById("homepage")?document.querySelector("._ad").style.display="block":document.querySelector("._ad").style.display="none"},[document.querySelector("._services-menu ol li")]);const ln=()=>{const cn=Math.floor((Ot.getTime()-new Date().getTime())/1e3),un=Math.floor(cn/3600/24),dn=Math.floor(cn/3600)%24,hn=Math.floor(cn%3660/60),fn=Math.floor(cn%60);document.getElementById("offerDays").textContent=un+"d",document.getElementById("offerHours").textContent=dn+"h",document.getElementById("offerMinutes").textContent=hn+"m",document.getElementById("offerSeconds").textContent=fn+"s"};return React$1.useEffect(()=>{const cn=setInterval(()=>{ln()},1e3);return ln(),()=>{clearInterval(cn)}},[]),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"_ad w-full relative bg-violet-300 dark:bg-gradient-to-r dark:from-violet-500 dark:to-violet-600 z-20 py-3",children:jsxRuntimeExports.jsxs("div",{className:"container mx-auto max-w-[1300px] text-slate-700 dark:text-white flex flex-col md:flex-row justify-center md:items-center gap-6 text-sm md:text-md lg:text-2md",children:[jsxRuntimeExports.jsxs("div",{className:"md:ml-auto flex flex-col md:flex-row md:gap-3",children:[jsxRuntimeExports.jsx("p",{className:"font-[600]",children:"Black Friday Sale!"}),jsxRuntimeExports.jsx("p",{children:"Up to 20% off in all packages!"})]}),jsxRuntimeExports.jsxs("div",{className:"flex md:flex",children:[jsxRuntimeExports.jsxs("code",{className:"text-sm md:text-xl",children:[jsxRuntimeExports.jsx("span",{className:"bg-white text-black px-2 py-1 rounded-md",id:"offerDays",children:"0d"}),":",jsxRuntimeExports.jsx("span",{className:"bg-white text-black px-2 py-1 rounded-md",id:"offerHours",children:"0h"}),":",jsxRuntimeExports.jsx("span",{className:"bg-white text-black px-2 py-1 rounded-md",id:"offerMinutes",children:"0m"}),":",jsxRuntimeExports.jsx("span",{className:"bg-white text-black px-2 py-1 rounded-md",id:"offerSeconds",children:"0s"})]}),jsxRuntimeExports.jsx("button",{className:"ml-auto block md:hidden",onClick:()=>{document.querySelector("._ad").style.display="none"},children:jsxRuntimeExports.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"})})})]}),jsxRuntimeExports.jsx("button",{className:"ml-auto hidden md:block",onClick:()=>{document.querySelector("._ad").style.display="none"},children:jsxRuntimeExports.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"})})})]})}),jsxRuntimeExports.jsx("nav",{className:"_navbar sticky top-0 left-0 z-50 py-4 lg:p-0 text-black dark:text-white border-b border-transparent",role:"navigation",children:jsxRuntimeExports.jsxs("div",{className:"container mx-auto flex justify-between lg:grid grid-cols-3 gap-4 max-w-[1300px]",children:[jsxRuntimeExports.jsx("div",{className:"_logo flex items-center",children:jsxRuntimeExports.jsx(NavLink,{to:"/",children:jsxRuntimeExports.jsxs("h1",{className:"font-medium text-lg flex items-center",children:[jsxRuntimeExports.jsx("img",{src:"/logo.jpg",alt:"Videophics",className:"h-8 w-8 object-cover rounded-md mr-2"}),jsxRuntimeExports.jsx("span",{children:"Videophics"})]})})}),jsxRuntimeExports.jsx("ol",{className:"_menu text-sm items-center hidden lg:flex",onClick:sn,children:jsxRuntimeExports.jsx(on,{})}),jsxRuntimeExports.jsxs("div",{className:"flex gap-5 md:gap-4 justify-end items-center",children:[jsxRuntimeExports.jsx(NavLink,{to:"/contact-us",className:"bg-purple-700 text-white text-sm px-6 py-3 rounded-full from-purple-500 to-purple-700 bg-gradient-to-l hover:from-purple-600 hover:to-purple-800 active:scale-95 hidden md:block",children:"Contact Us"}),jsxRuntimeExports.jsx("button",{className:"text-black p-2 rounded-full active:scale-95 active:bg-gray-100 dark:text-white dark:active:bg-slate-700 dark:active:text-white",onClick:()=>{s(Nt==="dark"?"light":"dark")},children:Nt==="dark"?jsxRuntimeExports.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.752 15.002A9.72 9.72 0 0 1 18 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 0 0 3 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753 0 0 0 9.002-5.998Z"})}):jsxRuntimeExports.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3v2.25m6.364.386-1.591 1.591M21 12h-2.25m-.386 6.364-1.591-1.591M12 18.75V21m-4.773-4.227-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0Z"})})}),jsxRuntimeExports.jsx("button",{className:"text-black p-2 rounded-full active:scale-95 active:bg-gray-100 block lg:hidden dark:text-white dark:active:bg-slate-800 dark:active:text-white",onClick:()=>{document.querySelector("._drawer-menu-layer").classList.toggle("hidden"),document.querySelector("._drawer-menu").classList.toggle("transform"),document.querySelector("._drawer-menu").classList.toggle("translate-x-full"),document.querySelector("._drawer-menu").classList.toggle("-translate-y-[100rem]")},children:jsxRuntimeExports.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"})})})]})]})}),jsxRuntimeExports.jsxs("div",{className:"_drawer-menu max-w-[380px] w-[70%] bg-white dark:bg-slate-800 dark:text-white fixed top-0 right-0 h-full transform translate-x-full -translate-y-[100rem] transition-all duration-500 ease-in-out p-6 shadow text-xl rounded-lg",role:"menu",style:{zIndex:"60"},children:[jsxRuntimeExports.jsx("div",{className:"brand mb-10",children:jsxRuntimeExports.jsxs("h1",{className:"font-medium text-lg flex items-center",children:[jsxRuntimeExports.jsx("img",{src:"/logo.jpg",alt:"Videophics",className:"h-8 w-8 object-cover rounded-md mr-2"}),jsxRuntimeExports.jsx("span",{children:"Videophics"})]})}),jsxRuntimeExports.jsx("ol",{onClick:an,children:jsxRuntimeExports.jsx(on,{})})]}),jsxRuntimeExports.jsx("div",{className:"_drawer-menu-layer fixed top-0 left-0 h-screen w-full hidden z-50 bg-black bg-opacity-50 transition-all duration-500 ease-in-out",onClick:an}),jsxRuntimeExports.jsx("div",{className:"bottom-to-top fixed right-4 bottom-4 z-50 hidden animate-bounce",children:jsxRuntimeExports.jsx("button",{className:"p-3 bg-white rounded-full active:scale-95 active:bg-gray-100 shadow-md",onClick:()=>{window.scrollTo({top:0,behavior:"smooth"})},children:jsxRuntimeExports.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:"w-6 h-6",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 15l7-7 7 7"})})})})]})}function Footer(){return jsxRuntimeExports.jsxs("footer",{className:"_footer bg-violet-700 dark:bg-gray-800 text-white py-8",children:[jsxRuntimeExports.jsxs("div",{className:"container mx-auto mt-6 mb-10 max-w-[1300px] gap-12 flex flex-col md:flex-row md:justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"md:max-w-[350px] lg:max-w-[450px]",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4",children:[jsxRuntimeExports.jsx("img",{src:"/logo.jpg",className:"w-[50px] rounded-lg"}),jsxRuntimeExports.jsx("h1",{className:"font-[500] text-xl",children:"Videophics"})]}),jsxRuntimeExports.jsx("p",{className:"text-sm leading-6 mt-4 dark:text-gray-300",children:"Videophics is a graphic design agency dedicated to empowering brands, businesses, and individuals through impactful visual storytelling. We craft compelling designs for a wide range of clients, including companies, organizations, publications, and personal promotions."}),jsxRuntimeExports.jsxs("button",{className:"text-slate-800 dark:text-white bg-white dark:bg-violet-700 dark:bg-violet-700 dark:text-white rounded-full px-6 py-3 mt-6 text-sm flex gap-2",children:["Company Deck",jsxRuntimeExports.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"})})]})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-20 flex-row sm:justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-md uppercase",children:"Quick Links"}),jsxRuntimeExports.jsxs("div",{className:"text-white dark:text-gray-300 flex flex-col gap-2 mt-5 text-[15px]",children:[jsxRuntimeExports.jsx("a",{href:"/",className:"hover:underline",children:"Home"}),jsxRuntimeExports.jsx("a",{href:"/services",className:"hover:underline",children:"Services"}),jsxRuntimeExports.jsx("a",{href:"/about-us",className:"hover:underline",children:"About"}),jsxRuntimeExports.jsx("a",{href:"/contact-us",className:"hover:underline",children:"Contact"}),jsxRuntimeExports.jsx("a",{href:"/blog",className:"hover:underline",children:"Blog"})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-md uppercase",children:"Services"}),jsxRuntimeExports.jsxs("div",{className:"text-white dark:text-gray-300 flex flex-col gap-2 mt-5 text-[15px]",children:[jsxRuntimeExports.jsx("a",{href:"/services/branding",className:"hover:underline",children:"Branding"}),jsxRuntimeExports.jsx("a",{href:"/services/development",className:"hover:underline",children:"Development"}),jsxRuntimeExports.jsx("a",{href:"/services/brand-advisory",className:"hover:underline",children:"Brand Advisory"}),jsxRuntimeExports.jsx("a",{href:"/services/marketing",className:"hover:underline",children:"Marketing"}),jsxRuntimeExports.jsx("a",{href:"/services/content-writing",className:"hover:underline",children:"Content Writing"}),jsxRuntimeExports.jsx("a",{href:"/services/software-testing",className:"hover:underline",children:"Software Testing"})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-md uppercase",children:"Legal"}),jsxRuntimeExports.jsxs("div",{className:"text-white dark:text-gray-300 flex flex-col gap-2 mt-5 text-[15px]",children:[jsxRuntimeExports.jsx("a",{href:"/legal/privacy-policy",className:"hover:underline",children:"Privacy Policy"}),jsxRuntimeExports.jsx("a",{href:"/legal/cookies-policy",className:"hover:underline",children:"Cookies Policy"}),jsxRuntimeExports.jsx("a",{href:"/legal/terms-and-conditions",className:"hover:underline",children:"Terms & Conditions"})]})]})]}),jsxRuntimeExports.jsx("div",{className:"min-w-[10px]"})]}),jsxRuntimeExports.jsxs("div",{className:"container mx-auto max-w-[1300px] gap-4 flex flex-col items-center sm:flex-row sm:justify-between border-t border-[rgba(255,255,255,0.1)] dark:border-gray-700 pt-6",children:[jsxRuntimeExports.jsx("p",{className:"text-md dark:text-slate-400",children:" 2024 Videophics, All Rights Reserved."}),jsxRuntimeExports.jsxs("div",{className:"flex space-x-5",children:[jsxRuntimeExports.jsx("a",{href:"https://www.facebook.com/videophics/",className:"text-gray-300 hover:text-gray-100",children:jsxRuntimeExports.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",className:"w-5 h-5",viewBox:"0 0 512 512",children:jsxRuntimeExports.jsx("path",{d:"M480 257.35c0-123.7-100.3-224-224-224s-224 100.3-224 224c0 111.8 81.9 204.47 189 221.29V322.12h-56.89v-64.77H221V208c0-56.13 33.45-87.16 84.61-87.16 24.51 0 50.15 4.38 50.15 4.38v55.13H327.5c-27.81 0-36.51 17.26-36.51 35v42h62.12l-9.92 64.77H291v156.54c107.1-16.81 189-109.48 189-221.31z",fillRule:"evenodd"})})}),jsxRuntimeExports.jsx("a",{href:"https://twitter.com/videophics24/",className:"text-gray-300 hover:text-gray-100",children:jsxRuntimeExports.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",className:"w-5 h-5",viewBox:"0 0 512 512",children:jsxRuntimeExports.jsx("path",{d:"M496 109.5a201.8 201.8 0 01-56.55 15.3 97.51 97.51 0 0043.33-53.6 197.74 197.74 0 01-62.56 23.5A99.14 99.14 0 00348.31 64c-54.42 0-98.46 43.4-98.46 96.9a93.21 93.21 0 002.54 22.1 280.7 280.7 0 01-203-101.3A95.69 95.69 0 0036 130.4c0 33.6 17.53 63.3 44 80.7A97.5 97.5 0 0135.22 199v1.2c0 47 34 86.1 79 95a100.76 100.76 0 01-25.94 3.4 94.38 94.38 0 01-18.51-1.8c12.51 38.5 48.92 66.5 92.05 67.3A199.59 199.59 0 0139.5 405.6a203 203 0 01-23.5-1.4A278.68 278.68 0 00166.74 448c181.36 0 280.44-147.7 280.44-275.8 0-4.2-.11-8.4-.31-12.5A198.48 198.48 0 00496 109.5z"})})}),jsxRuntimeExports.jsx("a",{href:"https://www.instagram.com/videophics/",className:"text-gray-300 hover:text-gray-100",children:jsxRuntimeExports.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",className:"w-5 h-5",viewBox:"0 0 512 512",children:[jsxRuntimeExports.jsx("path",{d:"M349.33 69.33a93.62 93.62 0 0193.34 93.34v186.66a93.62 93.62 0 01-93.34 93.34H162.67a93.62 93.62 0 01-93.34-93.34V162.67a93.62 93.62 0 0193.34-93.34h186.66m0-37.33H162.67C90.8 32 32 90.8 32 162.67v186.66C32 421.2 90.8 480 162.67 480h186.66C421.2 480 480 421.2 480 349.33V162.67C480 90.8 421.2 32 349.33 32z"}),jsxRuntimeExports.jsx("path",{d:"M377.33 162.67a28 28 0 1128-28 27.94 27.94 0 01-28 28zM256 181.33A74.67 74.67 0 11181.33 256 74.75 74.75 0 01256 181.33m0-37.33a112 112 0 10112 112 112 112 0 00-112-112z"})]})})]})]})]})}var propTypes={exports:{}},ReactPropTypesSecret$1="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",ReactPropTypesSecret_1=ReactPropTypesSecret$1,ReactPropTypesSecret=ReactPropTypesSecret_1;function emptyFunction(){}function emptyFunctionWithReset(){}emptyFunctionWithReset.resetWarningCache=emptyFunction;var factoryWithThrowingShims=function(){function Nt(en,tn,nn,rn,on,sn){if(sn!==ReactPropTypesSecret){var an=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw an.name="Invariant Violation",an}}Nt.isRequired=Nt;function s(){return Nt}var Ot={array:Nt,bigint:Nt,bool:Nt,func:Nt,number:Nt,object:Nt,string:Nt,symbol:Nt,any:Nt,arrayOf:s,element:Nt,elementType:Nt,instanceOf:s,node:Nt,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:emptyFunctionWithReset,resetWarningCache:emptyFunction};return Ot.PropTypes=Ot,Ot};propTypes.exports=factoryWithThrowingShims();var propTypesExports=propTypes.exports;const PropTypes=getDefaultExportFromCjs(propTypesExports);function _interopDefault(Nt){return Nt&&typeof Nt=="object"&&"default"in Nt?Nt.default:Nt}var React=reactExports,React__default=_interopDefault(React);function _defineProperty$1(Nt,s,Ot){return s in Nt?Object.defineProperty(Nt,s,{value:Ot,enumerable:!0,configurable:!0,writable:!0}):Nt[s]=Ot,Nt}function _inheritsLoose(Nt,s){Nt.prototype=Object.create(s.prototype),Nt.prototype.constructor=Nt,Nt.__proto__=s}var canUseDOM=!!(typeof window<"u"&&window.document&&window.document.createElement);function withSideEffect(Nt,s,Ot){if(typeof Nt!="function")throw new Error("Expected reducePropsToState to be a function.");if(typeof s!="function")throw new Error("Expected handleStateChangeOnClient to be a function.");if(typeof Ot<"u"&&typeof Ot!="function")throw new Error("Expected mapStateOnServer to either be undefined or a function.");function en(tn){return tn.displayName||tn.name||"Component"}return function(nn){if(typeof nn!="function")throw new Error("Expected WrappedComponent to be a React component.");var rn=[],on;function sn(){on=Nt(rn.map(function(ln){return ln.props})),an.canUseDOM?s(on):Ot&&(on=Ot(on))}var an=function(ln){_inheritsLoose(cn,ln);function cn(){return ln.apply(this,arguments)||this}cn.peek=function(){return on},cn.rewind=function(){if(cn.canUseDOM)throw new Error("You may only call rewind() on the server. Call peek() to read the current state.");var hn=on;return on=void 0,rn=[],hn};var un=cn.prototype;return un.UNSAFE_componentWillMount=function(){rn.push(this),sn()},un.componentDidUpdate=function(){sn()},un.componentWillUnmount=function(){var hn=rn.indexOf(this);rn.splice(hn,1),sn()},un.render=function(){return React__default.createElement(nn,this.props)},cn}(React.PureComponent);return _defineProperty$1(an,"displayName","SideEffect("+en(nn)+")"),_defineProperty$1(an,"canUseDOM",canUseDOM),an}}var lib$1=withSideEffect;const withSideEffect$1=getDefaultExportFromCjs(lib$1);var hasElementType=typeof Element<"u",hasMap=typeof Map=="function",hasSet=typeof Set=="function",hasArrayBuffer=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function equal(Nt,s){if(Nt===s)return!0;if(Nt&&s&&typeof Nt=="object"&&typeof s=="object"){if(Nt.constructor!==s.constructor)return!1;var Ot,en,tn;if(Array.isArray(Nt)){if(Ot=Nt.length,Ot!=s.length)return!1;for(en=Ot;en--!==0;)if(!equal(Nt[en],s[en]))return!1;return!0}var nn;if(hasMap&&Nt instanceof Map&&s instanceof Map){if(Nt.size!==s.size)return!1;for(nn=Nt.entries();!(en=nn.next()).done;)if(!s.has(en.value[0]))return!1;for(nn=Nt.entries();!(en=nn.next()).done;)if(!equal(en.value[1],s.get(en.value[0])))return!1;return!0}if(hasSet&&Nt instanceof Set&&s instanceof Set){if(Nt.size!==s.size)return!1;for(nn=Nt.entries();!(en=nn.next()).done;)if(!s.has(en.value[0]))return!1;return!0}if(hasArrayBuffer&&ArrayBuffer.isView(Nt)&&ArrayBuffer.isView(s)){if(Ot=Nt.length,Ot!=s.length)return!1;for(en=Ot;en--!==0;)if(Nt[en]!==s[en])return!1;return!0}if(Nt.constructor===RegExp)return Nt.source===s.source&&Nt.flags===s.flags;if(Nt.valueOf!==Object.prototype.valueOf&&typeof Nt.valueOf=="function"&&typeof s.valueOf=="function")return Nt.valueOf()===s.valueOf();if(Nt.toString!==Object.prototype.toString&&typeof Nt.toString=="function"&&typeof s.toString=="function")return Nt.toString()===s.toString();if(tn=Object.keys(Nt),Ot=tn.length,Ot!==Object.keys(s).length)return!1;for(en=Ot;en--!==0;)if(!Object.prototype.hasOwnProperty.call(s,tn[en]))return!1;if(hasElementType&&Nt instanceof Element)return!1;for(en=Ot;en--!==0;)if(!((tn[en]==="_owner"||tn[en]==="__v"||tn[en]==="__o")&&Nt.$$typeof)&&!equal(Nt[tn[en]],s[tn[en]]))return!1;return!0}return Nt!==Nt&&s!==s}var reactFastCompare=function(s,Ot){try{return equal(s,Ot)}catch(en){if((en.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw en}};const isEqual=getDefaultExportFromCjs(reactFastCompare);/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var getOwnPropertySymbols=Object.getOwnPropertySymbols,hasOwnProperty=Object.prototype.hasOwnProperty,propIsEnumerable=Object.prototype.propertyIsEnumerable;function toObject(Nt){if(Nt==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(Nt)}function shouldUseNative(){try{if(!Object.assign)return!1;var Nt=new String("abc");if(Nt[5]="de",Object.getOwnPropertyNames(Nt)[0]==="5")return!1;for(var s={},Ot=0;Ot<10;Ot++)s["_"+String.fromCharCode(Ot)]=Ot;var en=Object.getOwnPropertyNames(s).map(function(nn){return s[nn]});if(en.join("")!=="0123456789")return!1;var tn={};return"abcdefghijklmnopqrst".split("").forEach(function(nn){tn[nn]=nn}),Object.keys(Object.assign({},tn)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var objectAssign=shouldUseNative()?Object.assign:function(Nt,s){for(var Ot,en=toObject(Nt),tn,nn=1;nn<arguments.length;nn++){Ot=Object(arguments[nn]);for(var rn in Ot)hasOwnProperty.call(Ot,rn)&&(en[rn]=Ot[rn]);if(getOwnPropertySymbols){tn=getOwnPropertySymbols(Ot);for(var on=0;on<tn.length;on++)propIsEnumerable.call(Ot,tn[on])&&(en[tn[on]]=Ot[tn[on]])}}return en};const objectAssign$1=getDefaultExportFromCjs(objectAssign);var ATTRIBUTE_NAMES={BODY:"bodyAttributes",HTML:"htmlAttributes",TITLE:"titleAttributes"},TAG_NAMES={BASE:"base",BODY:"body",HEAD:"head",HTML:"html",LINK:"link",META:"meta",NOSCRIPT:"noscript",SCRIPT:"script",STYLE:"style",TITLE:"title"};Object.keys(TAG_NAMES).map(function(Nt){return TAG_NAMES[Nt]});var TAG_PROPERTIES={CHARSET:"charset",CSS_TEXT:"cssText",HREF:"href",HTTPEQUIV:"http-equiv",INNER_HTML:"innerHTML",ITEM_PROP:"itemprop",NAME:"name",PROPERTY:"property",REL:"rel",SRC:"src",TARGET:"target"},REACT_TAG_MAP={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},HELMET_PROPS={DEFAULT_TITLE:"defaultTitle",DEFER:"defer",ENCODE_SPECIAL_CHARACTERS:"encodeSpecialCharacters",ON_CHANGE_CLIENT_STATE:"onChangeClientState",TITLE_TEMPLATE:"titleTemplate"},HTML_TAG_MAP=Object.keys(REACT_TAG_MAP).reduce(function(Nt,s){return Nt[REACT_TAG_MAP[s]]=s,Nt},{}),SELF_CLOSING_TAGS=[TAG_NAMES.NOSCRIPT,TAG_NAMES.SCRIPT,TAG_NAMES.STYLE],HELMET_ATTRIBUTE="data-react-helmet",_typeof$1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Nt){return typeof Nt}:function(Nt){return Nt&&typeof Symbol=="function"&&Nt.constructor===Symbol&&Nt!==Symbol.prototype?"symbol":typeof Nt},classCallCheck=function(Nt,s){if(!(Nt instanceof s))throw new TypeError("Cannot call a class as a function")},createClass=function(){function Nt(s,Ot){for(var en=0;en<Ot.length;en++){var tn=Ot[en];tn.enumerable=tn.enumerable||!1,tn.configurable=!0,"value"in tn&&(tn.writable=!0),Object.defineProperty(s,tn.key,tn)}}return function(s,Ot,en){return Ot&&Nt(s.prototype,Ot),en&&Nt(s,en),s}}(),_extends=Object.assign||function(Nt){for(var s=1;s<arguments.length;s++){var Ot=arguments[s];for(var en in Ot)Object.prototype.hasOwnProperty.call(Ot,en)&&(Nt[en]=Ot[en])}return Nt},inherits=function(Nt,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof s);Nt.prototype=Object.create(s&&s.prototype,{constructor:{value:Nt,enumerable:!1,writable:!0,configurable:!0}}),s&&(Object.setPrototypeOf?Object.setPrototypeOf(Nt,s):Nt.__proto__=s)},objectWithoutProperties=function(Nt,s){var Ot={};for(var en in Nt)s.indexOf(en)>=0||Object.prototype.hasOwnProperty.call(Nt,en)&&(Ot[en]=Nt[en]);return Ot},possibleConstructorReturn=function(Nt,s){if(!Nt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s&&(typeof s=="object"||typeof s=="function")?s:Nt},encodeSpecialCharacters=function(s){var Ot=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return Ot===!1?String(s):String(s).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")},getTitleFromPropsList=function(s){var Ot=getInnermostProperty(s,TAG_NAMES.TITLE),en=getInnermostProperty(s,HELMET_PROPS.TITLE_TEMPLATE);if(en&&Ot)return en.replace(/%s/g,function(){return Array.isArray(Ot)?Ot.join(""):Ot});var tn=getInnermostProperty(s,HELMET_PROPS.DEFAULT_TITLE);return Ot||tn||void 0},getOnChangeClientState=function(s){return getInnermostProperty(s,HELMET_PROPS.ON_CHANGE_CLIENT_STATE)||function(){}},getAttributesFromPropsList=function(s,Ot){return Ot.filter(function(en){return typeof en[s]<"u"}).map(function(en){return en[s]}).reduce(function(en,tn){return _extends({},en,tn)},{})},getBaseTagFromPropsList=function(s,Ot){return Ot.filter(function(en){return typeof en[TAG_NAMES.BASE]<"u"}).map(function(en){return en[TAG_NAMES.BASE]}).reverse().reduce(function(en,tn){if(!en.length)for(var nn=Object.keys(tn),rn=0;rn<nn.length;rn++){var on=nn[rn],sn=on.toLowerCase();if(s.indexOf(sn)!==-1&&tn[sn])return en.concat(tn)}return en},[])},getTagsFromPropsList=function(s,Ot,en){var tn={};return en.filter(function(nn){return Array.isArray(nn[s])?!0:(typeof nn[s]<"u"&&warn$1("Helmet: "+s+' should be of type "Array". Instead found type "'+_typeof$1(nn[s])+'"'),!1)}).map(function(nn){return nn[s]}).reverse().reduce(function(nn,rn){var on={};rn.filter(function(un){for(var dn=void 0,hn=Object.keys(un),fn=0;fn<hn.length;fn++){var mn=hn[fn],gn=mn.toLowerCase();Ot.indexOf(gn)!==-1&&!(dn===TAG_PROPERTIES.REL&&un[dn].toLowerCase()==="canonical")&&!(gn===TAG_PROPERTIES.REL&&un[gn].toLowerCase()==="stylesheet")&&(dn=gn),Ot.indexOf(mn)!==-1&&(mn===TAG_PROPERTIES.INNER_HTML||mn===TAG_PROPERTIES.CSS_TEXT||mn===TAG_PROPERTIES.ITEM_PROP)&&(dn=mn)}if(!dn||!un[dn])return!1;var pn=un[dn].toLowerCase();return tn[dn]||(tn[dn]={}),on[dn]||(on[dn]={}),tn[dn][pn]?!1:(on[dn][pn]=!0,!0)}).reverse().forEach(function(un){return nn.push(un)});for(var sn=Object.keys(on),an=0;an<sn.length;an++){var ln=sn[an],cn=objectAssign$1({},tn[ln],on[ln]);tn[ln]=cn}return nn},[]).reverse()},getInnermostProperty=function(s,Ot){for(var en=s.length-1;en>=0;en--){var tn=s[en];if(tn.hasOwnProperty(Ot))return tn[Ot]}return null},reducePropsToState=function(s){return{baseTag:getBaseTagFromPropsList([TAG_PROPERTIES.HREF,TAG_PROPERTIES.TARGET],s),bodyAttributes:getAttributesFromPropsList(ATTRIBUTE_NAMES.BODY,s),defer:getInnermostProperty(s,HELMET_PROPS.DEFER),encode:getInnermostProperty(s,HELMET_PROPS.ENCODE_SPECIAL_CHARACTERS),htmlAttributes:getAttributesFromPropsList(ATTRIBUTE_NAMES.HTML,s),linkTags:getTagsFromPropsList(TAG_NAMES.LINK,[TAG_PROPERTIES.REL,TAG_PROPERTIES.HREF],s),metaTags:getTagsFromPropsList(TAG_NAMES.META,[TAG_PROPERTIES.NAME,TAG_PROPERTIES.CHARSET,TAG_PROPERTIES.HTTPEQUIV,TAG_PROPERTIES.PROPERTY,TAG_PROPERTIES.ITEM_PROP],s),noscriptTags:getTagsFromPropsList(TAG_NAMES.NOSCRIPT,[TAG_PROPERTIES.INNER_HTML],s),onChangeClientState:getOnChangeClientState(s),scriptTags:getTagsFromPropsList(TAG_NAMES.SCRIPT,[TAG_PROPERTIES.SRC,TAG_PROPERTIES.INNER_HTML],s),styleTags:getTagsFromPropsList(TAG_NAMES.STYLE,[TAG_PROPERTIES.CSS_TEXT],s),title:getTitleFromPropsList(s),titleAttributes:getAttributesFromPropsList(ATTRIBUTE_NAMES.TITLE,s)}},rafPolyfill=function(){var Nt=Date.now();return function(s){var Ot=Date.now();Ot-Nt>16?(Nt=Ot,s(Ot)):setTimeout(function(){rafPolyfill(s)},0)}}(),cafPolyfill=function(s){return clearTimeout(s)},requestAnimationFrame$1=typeof window<"u"?window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||rafPolyfill:global.requestAnimationFrame||rafPolyfill,cancelAnimationFrame=typeof window<"u"?window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||cafPolyfill:global.cancelAnimationFrame||cafPolyfill,warn$1=function(s){return console&&typeof console.warn=="function"&&console.warn(s)},_helmetCallback=null,handleClientStateChange=function(s){_helmetCallback&&cancelAnimationFrame(_helmetCallback),s.defer?_helmetCallback=requestAnimationFrame$1(function(){commitTagChanges(s,function(){_helmetCallback=null})}):(commitTagChanges(s),_helmetCallback=null)},commitTagChanges=function(s,Ot){var en=s.baseTag,tn=s.bodyAttributes,nn=s.htmlAttributes,rn=s.linkTags,on=s.metaTags,sn=s.noscriptTags,an=s.onChangeClientState,ln=s.scriptTags,cn=s.styleTags,un=s.title,dn=s.titleAttributes;updateAttributes(TAG_NAMES.BODY,tn),updateAttributes(TAG_NAMES.HTML,nn),updateTitle(un,dn);var hn={baseTag:updateTags(TAG_NAMES.BASE,en),linkTags:updateTags(TAG_NAMES.LINK,rn),metaTags:updateTags(TAG_NAMES.META,on),noscriptTags:updateTags(TAG_NAMES.NOSCRIPT,sn),scriptTags:updateTags(TAG_NAMES.SCRIPT,ln),styleTags:updateTags(TAG_NAMES.STYLE,cn)},fn={},mn={};Object.keys(hn).forEach(function(gn){var pn=hn[gn],_n=pn.newTags,vn=pn.oldTags;_n.length&&(fn[gn]=_n),vn.length&&(mn[gn]=hn[gn].oldTags)}),Ot&&Ot(),an(s,fn,mn)},flattenArray=function(s){return Array.isArray(s)?s.join(""):s},updateTitle=function(s,Ot){typeof s<"u"&&document.title!==s&&(document.title=flattenArray(s)),updateAttributes(TAG_NAMES.TITLE,Ot)},updateAttributes=function(s,Ot){var en=document.getElementsByTagName(s)[0];if(en){for(var tn=en.getAttribute(HELMET_ATTRIBUTE),nn=tn?tn.split(","):[],rn=[].concat(nn),on=Object.keys(Ot),sn=0;sn<on.length;sn++){var an=on[sn],ln=Ot[an]||"";en.getAttribute(an)!==ln&&en.setAttribute(an,ln),nn.indexOf(an)===-1&&nn.push(an);var cn=rn.indexOf(an);cn!==-1&&rn.splice(cn,1)}for(var un=rn.length-1;un>=0;un--)en.removeAttribute(rn[un]);nn.length===rn.length?en.removeAttribute(HELMET_ATTRIBUTE):en.getAttribute(HELMET_ATTRIBUTE)!==on.join(",")&&en.setAttribute(HELMET_ATTRIBUTE,on.join(","))}},updateTags=function(s,Ot){var en=document.head||document.querySelector(TAG_NAMES.HEAD),tn=en.querySelectorAll(s+"["+HELMET_ATTRIBUTE+"]"),nn=Array.prototype.slice.call(tn),rn=[],on=void 0;return Ot&&Ot.length&&Ot.forEach(function(sn){var an=document.createElement(s);for(var ln in sn)if(sn.hasOwnProperty(ln))if(ln===TAG_PROPERTIES.INNER_HTML)an.innerHTML=sn.innerHTML;else if(ln===TAG_PROPERTIES.CSS_TEXT)an.styleSheet?an.styleSheet.cssText=sn.cssText:an.appendChild(document.createTextNode(sn.cssText));else{var cn=typeof sn[ln]>"u"?"":sn[ln];an.setAttribute(ln,cn)}an.setAttribute(HELMET_ATTRIBUTE,"true"),nn.some(function(un,dn){return on=dn,an.isEqualNode(un)})?nn.splice(on,1):rn.push(an)}),nn.forEach(function(sn){return sn.parentNode.removeChild(sn)}),rn.forEach(function(sn){return en.appendChild(sn)}),{oldTags:nn,newTags:rn}},generateElementAttributesAsString=function(s){return Object.keys(s).reduce(function(Ot,en){var tn=typeof s[en]<"u"?en+'="'+s[en]+'"':""+en;return Ot?Ot+" "+tn:tn},"")},generateTitleAsString=function(s,Ot,en,tn){var nn=generateElementAttributesAsString(en),rn=flattenArray(Ot);return nn?"<"+s+" "+HELMET_ATTRIBUTE+'="true" '+nn+">"+encodeSpecialCharacters(rn,tn)+"</"+s+">":"<"+s+" "+HELMET_ATTRIBUTE+'="true">'+encodeSpecialCharacters(rn,tn)+"</"+s+">"},generateTagsAsString=function(s,Ot,en){return Ot.reduce(function(tn,nn){var rn=Object.keys(nn).filter(function(an){return!(an===TAG_PROPERTIES.INNER_HTML||an===TAG_PROPERTIES.CSS_TEXT)}).reduce(function(an,ln){var cn=typeof nn[ln]>"u"?ln:ln+'="'+encodeSpecialCharacters(nn[ln],en)+'"';return an?an+" "+cn:cn},""),on=nn.innerHTML||nn.cssText||"",sn=SELF_CLOSING_TAGS.indexOf(s)===-1;return tn+"<"+s+" "+HELMET_ATTRIBUTE+'="true" '+rn+(sn?"/>":">"+on+"</"+s+">")},"")},convertElementAttributestoReactProps=function(s){var Ot=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Object.keys(s).reduce(function(en,tn){return en[REACT_TAG_MAP[tn]||tn]=s[tn],en},Ot)},convertReactPropstoHtmlAttributes=function(s){var Ot=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Object.keys(s).reduce(function(en,tn){return en[HTML_TAG_MAP[tn]||tn]=s[tn],en},Ot)},generateTitleAsReactComponent=function(s,Ot,en){var tn,nn=(tn={key:Ot},tn[HELMET_ATTRIBUTE]=!0,tn),rn=convertElementAttributestoReactProps(en,nn);return[React$1.createElement(TAG_NAMES.TITLE,rn,Ot)]},generateTagsAsReactComponent=function(s,Ot){return Ot.map(function(en,tn){var nn,rn=(nn={key:tn},nn[HELMET_ATTRIBUTE]=!0,nn);return Object.keys(en).forEach(function(on){var sn=REACT_TAG_MAP[on]||on;if(sn===TAG_PROPERTIES.INNER_HTML||sn===TAG_PROPERTIES.CSS_TEXT){var an=en.innerHTML||en.cssText;rn.dangerouslySetInnerHTML={__html:an}}else rn[sn]=en[on]}),React$1.createElement(s,rn)})},getMethodsForTag=function(s,Ot,en){switch(s){case TAG_NAMES.TITLE:return{toComponent:function(){return generateTitleAsReactComponent(s,Ot.title,Ot.titleAttributes)},toString:function(){return generateTitleAsString(s,Ot.title,Ot.titleAttributes,en)}};case ATTRIBUTE_NAMES.BODY:case ATTRIBUTE_NAMES.HTML:return{toComponent:function(){return convertElementAttributestoReactProps(Ot)},toString:function(){return generateElementAttributesAsString(Ot)}};default:return{toComponent:function(){return generateTagsAsReactComponent(s,Ot)},toString:function(){return generateTagsAsString(s,Ot,en)}}}},mapStateOnServer=function(s){var Ot=s.baseTag,en=s.bodyAttributes,tn=s.encode,nn=s.htmlAttributes,rn=s.linkTags,on=s.metaTags,sn=s.noscriptTags,an=s.scriptTags,ln=s.styleTags,cn=s.title,un=cn===void 0?"":cn,dn=s.titleAttributes;return{base:getMethodsForTag(TAG_NAMES.BASE,Ot,tn),bodyAttributes:getMethodsForTag(ATTRIBUTE_NAMES.BODY,en,tn),htmlAttributes:getMethodsForTag(ATTRIBUTE_NAMES.HTML,nn,tn),link:getMethodsForTag(TAG_NAMES.LINK,rn,tn),meta:getMethodsForTag(TAG_NAMES.META,on,tn),noscript:getMethodsForTag(TAG_NAMES.NOSCRIPT,sn,tn),script:getMethodsForTag(TAG_NAMES.SCRIPT,an,tn),style:getMethodsForTag(TAG_NAMES.STYLE,ln,tn),title:getMethodsForTag(TAG_NAMES.TITLE,{title:un,titleAttributes:dn},tn)}},Helmet=function(s){var Ot,en;return en=Ot=function(tn){inherits(nn,tn);function nn(){return classCallCheck(this,nn),possibleConstructorReturn(this,tn.apply(this,arguments))}return nn.prototype.shouldComponentUpdate=function(on){return!isEqual(this.props,on)},nn.prototype.mapNestedChildrenToProps=function(on,sn){if(!sn)return null;switch(on.type){case TAG_NAMES.SCRIPT:case TAG_NAMES.NOSCRIPT:return{innerHTML:sn};case TAG_NAMES.STYLE:return{cssText:sn}}throw new Error("<"+on.type+" /> elements are self-closing and can not contain children. Refer to our API for more information.")},nn.prototype.flattenArrayTypeChildren=function(on){var sn,an=on.child,ln=on.arrayTypeChildren,cn=on.newChildProps,un=on.nestedChildren;return _extends({},ln,(sn={},sn[an.type]=[].concat(ln[an.type]||[],[_extends({},cn,this.mapNestedChildrenToProps(an,un))]),sn))},nn.prototype.mapObjectTypeChildren=function(on){var sn,an,ln=on.child,cn=on.newProps,un=on.newChildProps,dn=on.nestedChildren;switch(ln.type){case TAG_NAMES.TITLE:return _extends({},cn,(sn={},sn[ln.type]=dn,sn.titleAttributes=_extends({},un),sn));case TAG_NAMES.BODY:return _extends({},cn,{bodyAttributes:_extends({},un)});case TAG_NAMES.HTML:return _extends({},cn,{htmlAttributes:_extends({},un)})}return _extends({},cn,(an={},an[ln.type]=_extends({},un),an))},nn.prototype.mapArrayTypeChildrenToProps=function(on,sn){var an=_extends({},sn);return Object.keys(on).forEach(function(ln){var cn;an=_extends({},an,(cn={},cn[ln]=on[ln],cn))}),an},nn.prototype.warnOnInvalidChildren=function(on,sn){return!0},nn.prototype.mapChildrenToProps=function(on,sn){var an=this,ln={};return React$1.Children.forEach(on,function(cn){if(!(!cn||!cn.props)){var un=cn.props,dn=un.children,hn=objectWithoutProperties(un,["children"]),fn=convertReactPropstoHtmlAttributes(hn);switch(an.warnOnInvalidChildren(cn,dn),cn.type){case TAG_NAMES.LINK:case TAG_NAMES.META:case TAG_NAMES.NOSCRIPT:case TAG_NAMES.SCRIPT:case TAG_NAMES.STYLE:ln=an.flattenArrayTypeChildren({child:cn,arrayTypeChildren:ln,newChildProps:fn,nestedChildren:dn});break;default:sn=an.mapObjectTypeChildren({child:cn,newProps:sn,newChildProps:fn,nestedChildren:dn});break}}}),sn=this.mapArrayTypeChildrenToProps(ln,sn),sn},nn.prototype.render=function(){var on=this.props,sn=on.children,an=objectWithoutProperties(on,["children"]),ln=_extends({},an);return sn&&(ln=this.mapChildrenToProps(sn,ln)),React$1.createElement(s,ln)},createClass(nn,null,[{key:"canUseDOM",set:function(on){s.canUseDOM=on}}]),nn}(React$1.Component),Ot.propTypes={base:PropTypes.object,bodyAttributes:PropTypes.object,children:PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.node),PropTypes.node]),defaultTitle:PropTypes.string,defer:PropTypes.bool,encodeSpecialCharacters:PropTypes.bool,htmlAttributes:PropTypes.object,link:PropTypes.arrayOf(PropTypes.object),meta:PropTypes.arrayOf(PropTypes.object),noscript:PropTypes.arrayOf(PropTypes.object),onChangeClientState:PropTypes.func,script:PropTypes.arrayOf(PropTypes.object),style:PropTypes.arrayOf(PropTypes.object),title:PropTypes.string,titleAttributes:PropTypes.object,titleTemplate:PropTypes.string},Ot.defaultProps={defer:!0,encodeSpecialCharacters:!0},Ot.peek=s.peek,Ot.rewind=function(){var tn=s.rewind();return tn||(tn=mapStateOnServer({baseTag:[],bodyAttributes:{},encodeSpecialCharacters:!0,htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}})),tn},en},NullComponent=function(){return null},HelmetSideEffects=withSideEffect$1(reducePropsToState,handleClientStateChange,mapStateOnServer)(NullComponent),HelmetExport=Helmet(HelmetSideEffects);HelmetExport.renderStatic=HelmetExport.rewind;const Collapsible=({title:Nt,children:s})=>{const[Ot,en]=React$1.useState(!1),tn=React$1.useRef(),[nn,rn]=React$1.useState(),on=ln=>{ln.preventDefault(),en(!Ot),rn(tn.current.clientHeight)},sn=`w-full ${Ot?"is-expanded":null}`,an=Ot?nn:0;return jsxRuntimeExports.jsx("div",{className:sn,onClick:on,children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-2 mb-3 border-b border-slate-300 dark:border-slate-700",children:[jsxRuntimeExports.jsxs("button",{className:"text-xl font-[500] text-slate-700 dark:text-white text-left _collapsible flex",children:[Nt+" ",jsxRuntimeExports.jsx("span",{className:"inline-block w-fit ml-auto",children:""})]}),jsxRuntimeExports.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400 leading-6 _card-collapse mb-3",style:{height:an+"px"},children:jsxRuntimeExports.jsx("div",{className:"_card-body",ref:tn,children:s})})]})})};Collapsible.propTypes={title:PropTypes.string};function Contact(){return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-3xl lg:text-4xl font-[600] mb-4 text-slate-500 dark:text-white leading-10",children:"Let's talk about your project."}),jsxRuntimeExports.jsxs("p",{className:"text-md text-slate-500 dark:text-white pt-6",children:[jsxRuntimeExports.jsxs("p",{className:"flex gap-2 leading-6 text-lg",children:[jsxRuntimeExports.jsx("span",{className:"text-slate-700 dark:text-white",children:jsxRuntimeExports.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.75 6.75v10.5a2.25 2.25 0 0 1-2.25 2.25h-15a2.25 2.25 0 0 1-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25m19.5 0v.243a2.25 2.25 0 0 1-1.07 1.916l-7.5 4.615a2.25 2.25 0 0 1-2.36 0L3.32 8.91a2.25 2.25 0 0 1-1.07-1.916V6.75"})})})," ",jsxRuntimeExports.jsx("span",{className:"text-blue-700 dark:text-blue-400",children:"contact@videophics.com"})]}),jsxRuntimeExports.jsxs("p",{className:"leading-6 mt-6",children:[jsxRuntimeExports.jsx("span",{className:"text-violet-700 dark:text-violet-400",children:"Office Hours:"})," ","9:00 AM - 9:00 PM (GMT+6)"]}),jsxRuntimeExports.jsxs("p",{className:"leading-6",children:[jsxRuntimeExports.jsx("span",{className:"text-violet-700 dark:text-violet-400",children:"Address:"})," ","Dhaka, Bangladesh"]}),jsxRuntimeExports.jsxs("p",{className:"leading-6",children:[jsxRuntimeExports.jsx("span",{className:"text-violet-700 dark:text-violet-400",children:"Facebook:"})," ","https://facebook.com/videophics"]})]}),jsxRuntimeExports.jsx("iframe",{src:"https://www.google.com/maps/embed/v1/place?key=AIzaSyA0s1a7phLN0iaD6-UE7m4qP-z21pH0eSc&q=Dhaka, Bangladesh",width:"600",height:"278",frameBorder:"0",style:{width:"100%",marginTop:"2rem"},allowFullScreen:""})]}),jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsxs("form",{className:"flex flex-col gap-4 rounded-md py-8 lg:p-8 md:py-10",onSubmit:Nt=>{Nt.preventDefault();let s=`Hello, I am ${document.getElementById("name").value&&document.getElementById("name").value+" "}from ${document.getElementById("company").value} and I am interested in your ${document.getElementById("service").value} service.

My budget range is ${document.getElementById("range").value}. Here are the details of my project:

${document.getElementById("message").value}
                    `;window.location.href=`mailto:${document.getElementById("email").value}?subject=Inquiry from ${document.getElementById("name").value}&body=${encodeURIComponent(s)}`},children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-2",children:[jsxRuntimeExports.jsx("label",{htmlFor:"name",className:"text-sm text-slate-500 dark:text-white",children:"Full Name"}),jsxRuntimeExports.jsx("input",{type:"text",id:"name",className:"p-3 rounded-md border-2 border-slate-200 focus:outline-none focus:border-violet-500 dark:bg-slate-800 dark:text-white dark:border-slate-500",placeholder:"Abdullah"})]}),jsxRuntimeExports.jsxs("div",{className:"grid sm:grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-2",children:[jsxRuntimeExports.jsx("label",{htmlFor:"company",className:"text-sm text-slate-500 dark:text-white",children:"Company Name *"}),jsxRuntimeExports.jsx("input",{type:"text",id:"company",className:"p-3 rounded-md border-2 border-slate-200 focus:outline-none focus:border-violet-500 dark:bg-slate-800 dark:text-white dark:border-slate-500",placeholder:"Example Inc.",required:!0})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-2",children:[jsxRuntimeExports.jsx("label",{htmlFor:"email",className:"text-sm text-slate-500 dark:text-white",children:"Email Address *"}),jsxRuntimeExports.jsx("input",{type:"email",id:"email",className:"p-3 rounded-md border-2 border-slate-200 focus:outline-none focus:border-violet-500 dark:bg-slate-800 dark:text-white dark:border-slate-500",placeholder:"contact@example.com",required:!0})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-2",children:[jsxRuntimeExports.jsx("label",{htmlFor:"service",className:"text-sm text-slate-500 dark:text-white",children:"Select Service *"}),jsxRuntimeExports.jsxs("select",{className:"p-3 rounded-md border-2 bg-white border-slate-200 focus:outline-none focus:border-violet-500 dark:bg-slate-800 dark:text-white dark:border-slate-500",id:"service",required:!0,children:[jsxRuntimeExports.jsx("option",{value:"Branding",children:"Branding"}),jsxRuntimeExports.jsx("option",{value:"Development",children:"Development"}),jsxRuntimeExports.jsx("option",{value:"Brand Advisory",children:"Brand Advisory"}),jsxRuntimeExports.jsx("option",{value:"Marketing",children:"Marketing"}),jsxRuntimeExports.jsx("option",{value:"Content Writing",children:"Content Writing"}),jsxRuntimeExports.jsx("option",{value:"Software Testing",children:"Software Testing"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-2",children:[jsxRuntimeExports.jsx("label",{htmlFor:"range",className:"text-sm text-slate-500 dark:text-white",children:"Budget Range *"}),jsxRuntimeExports.jsxs("select",{className:"p-3 rounded-md border-2 bg-white border-slate-200 focus:outline-none focus:border-violet-500 dark:bg-slate-800 dark:text-white dark:border-slate-500",id:"range",required:!0,children:[jsxRuntimeExports.jsx("option",{value:"0-1000",children:"$0 - $1000"}),jsxRuntimeExports.jsx("option",{value:"1000-5000",children:"$1000 - $5000"}),jsxRuntimeExports.jsx("option",{value:"5000-10000",children:"$5000 - $10000"}),jsxRuntimeExports.jsx("option",{value:"10000+",children:"$10000+"})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-2",children:[jsxRuntimeExports.jsx("label",{htmlFor:"message",className:"text-sm text-slate-500 dark:text-white",children:"Details *"}),jsxRuntimeExports.jsx("textarea",{id:"message",className:"p-3 rounded-md border-2 border-slate-200 focus:outline-none focus:border-violet-500 dark:bg-slate-800 dark:text-white dark:border-slate-500",placeholder:"Your project details",required:!0})]}),jsxRuntimeExports.jsx("button",{className:"bg-violet-700 text-white text-sm md:text-[16px] px-8 py-3 rounded-md from-violet-500 to-violet-700 bg-gradient-to-l hover:from-violet-600 hover:to-violet-800 active:scale-95",type:"submit",title:"Click here to submit your message",children:"Submit inquiry"})]})})]})}function Animated({children:Nt,varient:s="fade-in",speed:Ot="",amount:en=35,className:tn=""}){const nn=React$1.useRef(null),rn={"fade-in":["__animation-fadeIn"],"fade-up":["__animation-fadeUp"],"fade-left":["__animation-fadeLeft"],"fade-right":["__animation-fadeRight"],"motion-left":["__animation-motionLeft",on=>`translateX(${Math.abs(on/en)}px)`],"motion-right":["__animation-motionRight",on=>`translateX(-${Math.abs(on/en)}px)`],"motion-up":["__animation-motionUp",on=>`translateY(${Math.abs(on/en)}px)`],"motion-down":["__animation-motionDown",on=>`translateY(-${Math.abs(on/en)}px)`]};return React$1.useEffect(()=>{function on(an){if(an!=null){var ln=an.getBoundingClientRect().top-window.innerHeight;ln&&(ln<0?an.classList.add("active"):an.classList.remove("active"))}}function sn(an,ln){window.addEventListener("scroll",function(){if(an!=null){if(window.innerWidth<768)return an.style.transform="translateX(0px) translateY(0px)";var cn=an.getBoundingClientRect().top-window.innerHeight;cn&&an.getBoundingClientRect().top<window.innerHeight&&an.getBoundingClientRect().bottom>0&&(cn<0?an.style.transform=rn[ln][1](cn):an.style.transform="translateX(0px) translateY(0px)")}})}s.includes("motion")?sn(nn.current,s):(on(nn.current),window.addEventListener("scroll",function(){on(nn.current)}))},[]),jsxRuntimeExports.jsx("div",{className:"__animation "+rn[s][0]+" "+tn,ref:nn,"data-speed":Ot,"data-animation":s,children:Nt})}function Booking(){return jsxRuntimeExports.jsx("div",{className:"container mx-auto max-w-[1300px]",children:jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsxs(Animated,{varient:"fade-left",speed:"slow",children:[jsxRuntimeExports.jsx("img",{src:"/images/static/appointment.png",alt:"Appointment",className:"w-12 h-12 mx-auto mb-4"}),jsxRuntimeExports.jsx("h1",{className:"text-3xl md:text-4xl lg:text-5xl font-[600] mb-4 text-white leading-10",children:"Book an Appointment"})]}),jsxRuntimeExports.jsx(Animated,{varient:"fade-right",speed:"slow",children:jsxRuntimeExports.jsx("p",{className:"text-[14px] md:text-[17px] text-white dark:text-slate-500 leading-6 md:leading-7 mb-8",children:"Schedule an appointment with us and let's get started on your project."})}),jsxRuntimeExports.jsx(Animated,{varient:"fade-up",speed:"slow",children:jsxRuntimeExports.jsx("button",{className:"bg-white text-sm md:text-[16px] px-8 py-3 rounded-md to-white from-gray-200 bg-gradient-to-l hover:from-gray-100 hover:to-gray-200 active:scale-95 text-slate-900 dark:from-slate-800 dark:to-slate-700 dark:text-white",title:"Click here to book an appointment",onClick:()=>(Calendly.initPopupWidget({url:"https://calendly.com/videophics?hide_gdpr_banner=1"}),!1),children:"Book Now "})})]})})}function Home$1(){const[Nt,s]=React$1.useState(!0);return jsxRuntimeExports.jsxs("div",{id:"homepage",children:[jsxRuntimeExports.jsxs(HelmetExport,{children:[jsxRuntimeExports.jsx("title",{children:"Videophics - Your Premier Branding Agency & Branding Experts"}),jsxRuntimeExports.jsx("meta",{name:"description",content:"Videophics is a leading branding agency dedicated to empowering your brand's growth and success. Through our expertise in emotion-driven storytelling and strategic branding, we create enduring experiences that resonate with your audience."}),jsxRuntimeExports.jsx("script",{src:"https://assets.calendly.com/assets/external/widget.js",type:"text/javascript",async:!0})]}),jsxRuntimeExports.jsx("div",{className:"hidden md:block absolute right-0 top-0 h-[400px] w-[500px] bg-gradient-to-r from-violet-100 to-violet-50 dark:from-slate-800 dark:to-slate-900 rounded-l-full z-5"}),jsxRuntimeExports.jsx("div",{className:"hidden md:block absolute right-0 top-[300px] h-[200px] w-[200px] bg-gradient-to-r from-violet-200 to-violet-50 dark:from-slate-800 dark:to-slate-900 rounded-full z-5 animate-[bounce_3s_infinite]"}),jsxRuntimeExports.jsxs("section",{className:"_hero-section relative py-10 lg:min-h-[calc(100vh-80px)] flex justify-center",children:[jsxRuntimeExports.jsx("div",{className:"_sketch h-[200px] w-[100px] absolute from-violet-300 to-violet-100 bg-gradient-to-r blur-3xl filter top-0 left-0 dark:opacity-50 animate-[bounce_3s_infinite]"}),jsxRuntimeExports.jsx("div",{className:"_sketch h-[200px] w-[300px] absolute from-violet-300 to-violet-100 bg-gradient-to-r blur-3xl filter right-0 md:left-[40%] bottom-10 dark:hidden animate-[bounce_3s_infinite]"}),jsxRuntimeExports.jsx("div",{className:"_sketch h-[100px] w-[300px] absolute from-violet-300 to-violet-100 bg-gradient-to-r blur-3xl filter top-0 right-0 hidden md:block dark:bottom-20 dark:top-auto dark:opacity-50 animate-[bounce_3s_infinite]"}),jsxRuntimeExports.jsxs("div",{className:"container mx-auto max-w-[1300px] flex flex-col gap-10 lg:items-center",children:[jsxRuntimeExports.jsx(Animated,{varient:"fade-up",speed:"fast",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col justify-center md:items-center md:text-center z-10 max-w-[620px] lg:max-w-[730px] mx-auto lg:mx-0 md:py-10",children:[jsxRuntimeExports.jsxs("h1",{className:"text-3xl sm:text-4xl lg:text-5xl font-[600] mb-4 text-slate-700 dark:text-white sm:leading-10 xl:leading-13",style:{letterSpacing:"-0.02em"},children:[jsxRuntimeExports.jsx(Animated,{varient:"fade-left",className:"inline",children:"Branding is all about"})," ",jsxRuntimeExports.jsxs(Animated,{varient:"fade-right",className:"inline",children:[jsxRuntimeExports.jsx("span",{className:"text-violet-500 dark:text-violet-400",children:"storytelling"}),". We"," ",jsxRuntimeExports.jsx(Animated,{varient:"fade-right",className:"inline",children:jsxRuntimeExports.jsx("span",{className:"text-violet-500 dark:text-violet-400",children:"visualize"})})," ","your touchy stories"]})]}),jsxRuntimeExports.jsx("p",{className:"text-[14px] md:text-[17px] mt-4 mb-7 text-slate-500 dark:text-slate-400 leading-6 md:leading-7 _heroPara",children:"We bring brands and people closer. With a focus on emotion-driven connections, we craft experiences that resonate and endure."}),jsxRuntimeExports.jsx(NavLink,{to:"/about-us",children:jsxRuntimeExports.jsx("button",{className:"px-7 text-sm md:text-[16px] md:px-8 py-3 text-white rounded-md from-violet-400 to-violet-600 bg-gradient-to-l hover:from-violet-500 hover:to-violet-700 active:scale-95 animate-[pulse_2s_infinite]",title:"Clixk here to learn more",children:"See more "})})]})}),jsxRuntimeExports.jsx("div",{className:"z-10 w-full",children:jsxRuntimeExports.jsxs("div",{className:"bg-violet-100 dark:bg-slate-700 rounded-lg relative",children:[jsxRuntimeExports.jsx("video",{srcc:"https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4",autoPlay:!0,muted:Nt,controls:!1,alt:"A visual representation of videophics",className:"object-cover rounded-lg w-full",id:"hero-video",style:{aspectRatio:"16/9"}}),jsxRuntimeExports.jsx("button",{className:"absolute top-[10px] right-[10px] bg-violet-700 text-white p-2 hover:scale-90 active:opacity-75 active:scale-95 rounded-full",onClick:()=>{document.getElementById("hero-video").muted=!Nt,s(!Nt)},children:Nt?jsxRuntimeExports.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.25 9.75 19.5 12m0 0 2.25 2.25M19.5 12l2.25-2.25M19.5 12l-2.25 2.25m-10.5-6 4.72-4.72a.75.75 0 0 1 1.28.53v15.88a.75.75 0 0 1-1.28.53l-4.72-4.72H4.51c-.88 0-1.704-.507-1.938-1.354A9.009 9.009 0 0 1 2.25 12c0-.83.112-1.633.322-2.396C2.806 8.756 3.63 8.25 4.51 8.25H6.75Z"})}):jsxRuntimeExports.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.114 5.636a9 9 0 0 1 0 12.728M16.463 8.288a5.25 5.25 0 0 1 0 7.424M6.75 8.25l4.72-4.72a.75.75 0 0 1 1.28.53v15.88a.75.75 0 0 1-1.28.53l-4.72-4.72H4.51c-.88 0-1.704-.507-1.938-1.354A9.009 9.009 0 0 1 2.25 12c0-.83.112-1.633.322-2.396C2.806 8.756 3.63 8.25 4.51 8.25H6.75Z"})})})]})})]})]}),jsxRuntimeExports.jsx("section",{className:"_services-section py-[7rem] md:min-h-[calc(100vh-80px)]",children:jsxRuntimeExports.jsxs("div",{className:"container mx-auto max-w-[1300px]",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col justify-center items-center text-center",children:[jsxRuntimeExports.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 leading-6 md:leading-7 uppercase",children:"Our Services"}),jsxRuntimeExports.jsx("h1",{className:"text-2xl md:text-3xl lg:text-4xl font-[600] mb-4 text-slate-700 dark:text-white leading-8 md:leading-10 mt-2",children:"Growing Brands. Touching Souls."})]}),jsxRuntimeExports.jsxs("div",{className:"_services-box mt-[4rem] grid md:grid-cols-2 gap-12",children:[jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(Animated,{varient:"motion-left",speed:"fast",children:jsxRuntimeExports.jsx(Animated,{varient:"fade-in",speed:"fast",children:jsxRuntimeExports.jsx(Link,{to:"/services/branding",children:jsxRuntimeExports.jsx("div",{className:"main bg-white dark:bg-slate-800 w-full h-full min-h-[300px] flex items-center rounded-lg",children:jsxRuntimeExports.jsxs("div",{className:"p-6",children:[jsxRuntimeExports.jsx("img",{src:"/images/static/branding.png",alt:"Branding",className:"w-15 h-15 mb-5"}),jsxRuntimeExports.jsxs("h3",{className:"text-3xl md:text-4xl font-[600] mb-2 text-slate-700 dark:text-white leading-10",children:[jsxRuntimeExports.jsx("span",{className:"text-violet-700",children:"1."})," Branding"]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-300 leading-6",children:"We create brand identities, brand guidelines, and more."})]})})})})})}),jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(Animated,{varient:"motion-left",speed:"fast",children:jsxRuntimeExports.jsx(Animated,{varient:"fade-in",speed:"fast",children:jsxRuntimeExports.jsx(Link,{to:"/services/development",children:jsxRuntimeExports.jsx("div",{className:"main bg-white dark:bg-slate-800 w-full h-full min-h-[300px] flex items-center rounded-lg",children:jsxRuntimeExports.jsxs("div",{className:"p-6",children:[jsxRuntimeExports.jsx("img",{src:"/images/static/development.png",alt:"Design",className:"w-15 h-15 mb-5"}),jsxRuntimeExports.jsxs("h3",{className:"text-3xl md:text-4xl font-[600] mb-2 text-slate-700 dark:text-white leading-10",children:[jsxRuntimeExports.jsx("span",{className:"text-violet-700",children:"2."})," ","Development"]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-300 leading-6",children:"We develop websites, web applications, and more."})]})})})})})}),jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(Animated,{varient:"motion-right",speed:"fast",children:jsxRuntimeExports.jsx(Animated,{varient:"fade-in",speed:"fast",children:jsxRuntimeExports.jsx(Link,{to:"/services/brand-advisory",children:jsxRuntimeExports.jsx("div",{className:"main bg-white dark:bg-slate-800 w-full h-full min-h-[300px] flex items-center rounded-lg",children:jsxRuntimeExports.jsxs("div",{className:"p-6",children:[jsxRuntimeExports.jsx("img",{src:"/images/static/advisory.png",alt:"BNrand Advisory",className:"w-15 h-15 mb-5"}),jsxRuntimeExports.jsxs("h3",{className:"text-3xl md:text-4xl font-[600] mb-2 text-slate-700 dark:text-white leading-10",children:[jsxRuntimeExports.jsx("span",{className:"text-violet-700",children:"3."})," Brand Advisory"]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-300 leading-6",children:"We provide brand advisory services to help you grow."})]})})})})})}),jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(Animated,{varient:"motion-right",speed:"fast",children:jsxRuntimeExports.jsx(Animated,{varient:"fade-in",speed:"fast",children:jsxRuntimeExports.jsx(Link,{to:"/services/marketing",children:jsxRuntimeExports.jsx("div",{className:"main bg-white dark:bg-slate-800 w-full h-full min-h-[300px] flex items-center rounded-lg",children:jsxRuntimeExports.jsxs("div",{className:"p-6",children:[jsxRuntimeExports.jsx("img",{src:"/images/static/marketing.png",alt:"Marketing",className:"w-15 h-15 mb-5"}),jsxRuntimeExports.jsxs("h3",{className:"text-3xl md:text-4xl font-[600] mb-2 text-slate-700 dark:text-white leading-10",children:[jsxRuntimeExports.jsx("span",{className:"text-violet-700",children:"4."})," Marketing"]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-300 leading-6",children:"We market your brand, products, and services."})]})})})})})}),jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(Animated,{varient:"motion-left",speed:"fast",children:jsxRuntimeExports.jsx(Animated,{varient:"fade-in",speed:"fast",children:jsxRuntimeExports.jsx(Link,{to:"/services/content-writing",children:jsxRuntimeExports.jsx("div",{className:"main bg-white dark:bg-slate-800 w-full h-full min-h-[300px] flex items-center rounded-lg",children:jsxRuntimeExports.jsxs("div",{className:"p-6",children:[jsxRuntimeExports.jsx("img",{src:"/images/static/content.png",alt:"Content Writing",className:"w-15 h-15 mb-5"}),jsxRuntimeExports.jsxs("h3",{className:"text-3xl md:text-4xl font-[600] mb-2 text-slate-700 dark:text-white leading-10",children:[jsxRuntimeExports.jsx("span",{className:"text-violet-700",children:"5."})," Content Writing"]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-300 leading-6",children:"We write compelling content for your brand."})]})})})})})}),jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(Animated,{varient:"motion-left",speed:"fast",children:jsxRuntimeExports.jsx(Animated,{varient:"fade-in",speed:"fast",children:jsxRuntimeExports.jsx(Link,{to:"/services/software-testing",children:jsxRuntimeExports.jsx("div",{className:"main bg-white dark:bg-slate-800 w-full h-full min-h-[300px] flex items-center rounded-lg",children:jsxRuntimeExports.jsxs("div",{className:"p-6",children:[jsxRuntimeExports.jsx("img",{src:"/images/static/patch.png",alt:"Software Testing",className:"w-15 h-15 mb-5"}),jsxRuntimeExports.jsxs("h3",{className:"text-3xl md:text-4xl font-[600] mb-2 text-slate-700 dark:text-white leading-10",children:[jsxRuntimeExports.jsx("span",{className:"text-violet-700",children:"6."})," Software Testing"]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-300 leading-6",children:"We test your software to ensure quality and performance."})]})})})})})})]}),jsxRuntimeExports.jsx("div",{className:"_unique-features pt-[10rem] flex flex-col gap-12",children:jsxRuntimeExports.jsxs("div",{className:"min-h-[40vh] flex flex-col justify-center",children:[jsxRuntimeExports.jsx("h3",{className:"text-3xl lg:text-4xl font-[600] text-slate-700 dark:text-white leading-10 text-center mb-2",children:"Why Choose Us?"}),jsxRuntimeExports.jsx("p",{className:"text-[14px] md:text-[17px] text-slate-500 dark:text-slate-400 leading-6 md:leading-7 text-center mb-[4rem]",children:"What makes us different from others in the industry."}),jsxRuntimeExports.jsxs("div",{className:"grid md:grid-cols-3 gap-12",children:[jsxRuntimeExports.jsx(Animated,{varient:"fade-up",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col bg-slate-200 dark:bg-slate-800 p-6 rounded-lg h-full",children:[jsxRuntimeExports.jsx("img",{src:"/images/static/organic.png",alt:"Quality",className:"w-16 h-16 mb-4"}),jsxRuntimeExports.jsx("h4",{className:"text-xl font-[600] mb-2 text-slate-700 dark:text-white leading-8",children:"Organic Reach"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 leading-6",children:"We help you reach your audience organically without any paid ads."})]})}),jsxRuntimeExports.jsx(Animated,{varient:"fade-up",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col bg-slate-200 dark:bg-slate-800 p-6 rounded-lg h-full",children:[jsxRuntimeExports.jsx("img",{src:"/images/static/emotion.png",alt:"Emotion",className:"w-16 h-16 mb-4"}),jsxRuntimeExports.jsx("h4",{className:"text-xl font-[600] mb-2 text-slate-700 dark:text-white leading-8",children:"Emotional Connection"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 leading-6",children:"We help you building emotional connection between brand and customer."})]})}),jsxRuntimeExports.jsx(Animated,{varient:"fade-up",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col bg-slate-200 dark:bg-slate-800 p-6 rounded-lg h-full",children:[jsxRuntimeExports.jsx("img",{src:"/images/static/story.png",alt:"Story",className:"w-16 h-16 mb-4"}),jsxRuntimeExports.jsx("h4",{className:"text-xl font-[600] mb-2 text-slate-700 dark:text-white leading-8",children:"Story Telling"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 leading-6",children:"We help you finding the real connecting story of your brand."})]})})]})]})})]})}),jsxRuntimeExports.jsx("section",{className:"_team-section py-[8rem] pt-[6rem] flex flex-col justify-center items-center",children:jsxRuntimeExports.jsxs("div",{className:"container mx-auto max-w-[1300px]",children:[jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 leading-6 md:leading-7 mb-2 uppercase",children:"Our Team"}),jsxRuntimeExports.jsx("h3",{className:"text-3xl lg:text-4xl font-[600] mb-4 text-slate-700 dark:text-white leading-10",children:"Meet Our Team"})]}),jsxRuntimeExports.jsxs("div",{className:"_persons grid md:grid-cols-3 gap-9 pt-[4rem]",children:[jsxRuntimeExports.jsx(Animated,{varient:"fade-in",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center",children:[jsxRuntimeExports.jsx("img",{src:"",className:"w-full max-w-[300px] bg-violet-300 rounded-md object-cover",style:{aspectRatio:"3/3"}}),jsxRuntimeExports.jsx("h4",{className:"text-xl font-[600] mt-4 text-slate-700 dark:text-white leading-8",children:"Saad Al Amin"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 leading-6",children:"CEO & Founder"})]})}),jsxRuntimeExports.jsx(Animated,{varient:"fade-in",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center",children:[jsxRuntimeExports.jsx("img",{src:"",className:"w-full max-w-[300px] bg-violet-300 rounded-md object-cover",style:{aspectRatio:"3/3"}}),jsxRuntimeExports.jsx("h4",{className:"text-xl font-[600] mt-4 text-slate-700 dark:text-white leading-8",children:"Unknown"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 leading-6",children:"Unknown"})]})}),jsxRuntimeExports.jsx(Animated,{varient:"fade-in",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center",children:[jsxRuntimeExports.jsx("img",{src:"",className:"w-full max-w-[300px] bg-violet-300 rounded-md object-cover",style:{aspectRatio:"3/3"}}),jsxRuntimeExports.jsx("h4",{className:"text-xl font-[600] mt-4 text-slate-700 dark:text-white leading-8",children:"Zadid Al Lisan"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 leading-6",children:"CTO"})]})}),jsxRuntimeExports.jsx(Animated,{varient:"fade-in",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center",children:[jsxRuntimeExports.jsx("img",{src:"",className:"w-full max-w-[300px] bg-violet-300 rounded-md object-cover",style:{aspectRatio:"3/3"}}),jsxRuntimeExports.jsx("h4",{className:"text-xl font-[600] mt-4 text-slate-700 dark:text-white leading-8",children:"Tahmidur Rahman"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 leading-6",children:"Unknown"})]})}),jsxRuntimeExports.jsx(Animated,{varient:"fade-in",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center",children:[jsxRuntimeExports.jsx("img",{src:"",className:"w-full max-w-[300px] bg-violet-300 rounded-md object-cover",style:{aspectRatio:"3/3"}}),jsxRuntimeExports.jsx("h4",{className:"text-xl font-[600] mt-4 text-slate-700 dark:text-white leading-8",children:"Mohammad Sefatullah"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 leading-6",children:"Web Developer"})]})})]})]})}),jsxRuntimeExports.jsxs("div",{className:"bg-violet-100 dark:bg-slate-800 py-[4rem]",children:[jsxRuntimeExports.jsx("section",{className:"_clients-section pb-[9rem] flex flex-col justify-center items-center pt-[4rem]",children:jsxRuntimeExports.jsxs("div",{className:"container mx-auto max-w-[1300px]",children:[jsxRuntimeExports.jsxs("div",{className:"text-center mb-8",children:[jsxRuntimeExports.jsx("p",{className:"text-sm text-slate-500 dark:text-gray-300 leading-6 md:leading-7 uppercase mb-2",children:"Our Clients"}),jsxRuntimeExports.jsx("h3",{className:"text-3xl md:text-4xl font-[600] mb-2 text-slate-700 dark:text-white leading-10",children:"We're trusted by our clients."})]}),jsxRuntimeExports.jsx(Animated,{varient:"fade-up",children:jsxRuntimeExports.jsxs("div",{className:"_clients flex justify-center items-center gap-4 mt-2 flex-wrap",children:[jsxRuntimeExports.jsx("div",{className:"w-16 h-16",children:jsxRuntimeExports.jsx("img",{src:"/images/static/qweekai.png",alt:"Client Logo",className:"w-full h-full"})}),jsxRuntimeExports.jsx("div",{className:"w-16 h-16",children:jsxRuntimeExports.jsx("img",{src:"/images/static/dhanshalik.jpg",alt:"Client Logo",className:"w-full h-full"})}),jsxRuntimeExports.jsx("div",{className:"w-16 h-16",children:jsxRuntimeExports.jsx("img",{src:"/images/static/specialstars.jpeg",alt:"Client Logo",className:"w-full h-full"})}),jsxRuntimeExports.jsx("div",{className:"w-16 h-16",children:jsxRuntimeExports.jsx("img",{src:"/images/static/dropbox.png",alt:"Client Logo",className:"w-full h-full"})})]})})]})}),jsxRuntimeExports.jsx(Animated,{varient:"fade-up",speed:"fast",children:jsxRuntimeExports.jsx("div",{className:"container mx-auto max-w-[1300px]",children:jsxRuntimeExports.jsx("section",{id:"booking",className:"_booking-section py-12 md:py-[6.5rem] bg-violet-500 dark:bg-slate-950 flex flex-col justify-center items-center rounded-lg",children:jsxRuntimeExports.jsx(Booking,{})})})}),jsxRuntimeExports.jsx("section",{className:"_faq-section py-[8rem] pb-[3rem] md:min-h-[calc(100vh-80px)] flex flex-col justify-center items-center",id:"faq",children:jsxRuntimeExports.jsxs("div",{className:"container mx-auto max-w-[1300px]",children:[jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("h3",{className:"text-3xl lg:text-4xl font-[600] text-slate-700 dark:text-white leading-10",children:"Frequently Asked Questions"}),jsxRuntimeExports.jsxs("p",{className:"text-[14px] mt-4 md:text-[17px] text-slate-500 dark:text-slate-400 leading-6 md:leading-7 mb-8",children:["Can't find what you're looking for? Reach out to our"," ",jsxRuntimeExports.jsx("a",{className:"text-violet-700 dark:text-violet-400",href:"/support",children:"support team"}),"."]})]}),jsxRuntimeExports.jsx(Animated,{varient:"fade-up",speed:"fast",children:jsxRuntimeExports.jsx("div",{className:"flex justify-center",children:jsxRuntimeExports.jsxs("div",{className:"max-w-[500px] md:max-w-[700px] pt-[3rem]",children:[jsxRuntimeExports.jsx(Collapsible,{title:"What is your refund policy?",children:jsxRuntimeExports.jsx("p",{children:"Lorem ipsum dolor, sit amet consectetur adipisicing elit. Atque, veniam excepturi sequi eius libero dolorem impedit dolores natus cum, a nostrum illum minima! Doloremque architecto cum expedita dolorem porro culpa."})}),jsxRuntimeExports.jsx(Collapsible,{title:"How do I cancel my subscription?",children:jsxRuntimeExports.jsx("p",{children:"Lorem ipsum dolor sit, amet consectetur adipisicing elit. Aut, neque tenetur repellat obcaecati illum autem officiis odit excepturi exercitationem repudiandae atque unde nemo, corporis ratione saepe vitae, eveniet nesciunt beatae."})}),jsxRuntimeExports.jsx(Collapsible,{title:"How do I cancel my subscription?",children:jsxRuntimeExports.jsx("p",{children:"Lorem ipsum dolor sit, amet consectetur adipisicing elit. Eum vitae neque quidem, in architecto a nam, atque doloribus eos sequi molestias cumque quo dignissimos culpa, omnis maiores repudiandae amet dolorum?"})}),jsxRuntimeExports.jsx(Collapsible,{title:"Can I upgrade my plan?",children:jsxRuntimeExports.jsx("p",{children:"Lorem ipsum, dolor sit amet consectetur adipisicing elit. Et libero cupiditate suscipit nisi ipsum quae distinctio quos architecto cum placeat eum quia, reprehenderit alias officia accusamus dolores recusandae dolore. Delectus."})}),jsxRuntimeExports.jsx(Collapsible,{title:"Can I upgrade my plan?",children:jsxRuntimeExports.jsx("p",{children:"Lorem ipsum dolor sit amet consectetur adipisicing elit. Voluptates qui fugit provident vitae unde obcaecati blanditiis error quo in consequatur aperiam, quis quibusdam ad quidem dolor explicabo dignissimos facilis odio!"})})]})})})]})})]}),jsxRuntimeExports.jsx("section",{className:"_contact-section py-[8rem] flex flex-col justify-center items-center",id:"contact",children:jsxRuntimeExports.jsx("div",{className:"container mx-auto max-w-[1300px] grid md:grid-cols-2 gap-10",children:jsxRuntimeExports.jsx(Contact,{})})})]})}function NotFound(){return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(HelmetExport,{children:jsxRuntimeExports.jsx("title",{children:"404 Not Found - Videophics"})}),jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center h-[90vh]",children:jsxRuntimeExports.jsx("h1",{className:"text-2xl md:text-4xl font-bold text-violet-900 dark:text-slate-50",children:"404 Not Found"})})]})}const Branding=()=>jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("section",{className:"_hero-section min-h-[90vh] grid lg:grid-cols-2 gap-9 items-center py-12",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:"text-5xl font-bold",children:"Branding"}),jsxRuntimeExports.jsx("p",{className:"text-xl text-slate-700 dark:text-slate-300 mt-8 leading-8",children:"Elevate your brand with our comprehensive branding solutions. We help you create a strong brand identity that resonates with your audience."}),jsxRuntimeExports.jsx("a",{href:"#list",className:"inline-block bg-orange-600 text-white px-6 py-3 mt-8 rounded-full",children:"Find out solutions!"})]}),jsxRuntimeExports.jsx("img",{src:"/images/static/brandingView.webp",alt:"Branding",className:"w-full object-cover rounded-lg bg-slate-300 dark:bg-slate-700",style:{aspectRatio:"16/9"}})]}),jsxRuntimeExports.jsx("section",{className:"_list-section min-h-screen py-12 pb-20",id:"list",children:jsxRuntimeExports.jsxs("div",{className:"max-w-6xl mx-auto",children:[jsxRuntimeExports.jsx("h2",{className:"text-4xl font-bold text-center mb-12",children:"Branding Services"}),jsxRuntimeExports.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[jsxRuntimeExports.jsx(Animated,{varient:"fade-in",children:jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("img",{src:"/images/static/mr4JG4SYOF8-unsplash.jpg",alt:"Logo Design",className:"w-full object-cover rounded-t-md mx-auto bg-slate-300 bg-slate-500",style:{aspectRatio:"3/2"}}),jsxRuntimeExports.jsxs("div",{className:"bg-slate-300 dark:bg-slate-800 p-6 rounded-b-md",children:[jsxRuntimeExports.jsx("h3",{className:"text-2xl font-semibold",children:"Logo Design"}),jsxRuntimeExports.jsx("p",{className:"mt-3 text-slate-500 dark:text-slate-400",children:"Create a memorable logo to represent your brand across all platforms."})]})]})}),jsxRuntimeExports.jsx(Animated,{varient:"fade-in",children:jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("img",{src:"/images/static/QL0FAxaq2z0-unsplash.jpg",alt:"Brand Messaging",className:"w-full object-cover rounded-t-md mx-auto bg-slate-300 bg-slate-500",style:{aspectRatio:"3/2"}}),jsxRuntimeExports.jsxs("div",{className:"bg-slate-300 dark:bg-slate-800 p-6 rounded-b-md",children:[jsxRuntimeExports.jsx("h3",{className:"text-2xl font-semibold",children:"Brand Messaging"}),jsxRuntimeExports.jsx("p",{className:"mt-3 text-slate-500 dark:text-slate-400",children:"Develop a unique brand voice that resonates with your audience."})]})]})}),jsxRuntimeExports.jsx(Animated,{varient:"fade-in",children:jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("img",{src:"/images/static/yeB9jDmHm6M-unsplash.jpg",alt:"Social Media Branding",className:"w-full object-cover rounded-t-md mx-auto bg-slate-300 bg-slate-500",style:{aspectRatio:"3/2"}}),jsxRuntimeExports.jsxs("div",{className:"bg-slate-300 dark:bg-slate-800 p-6 rounded-b-md",children:[jsxRuntimeExports.jsx("h3",{className:"text-2xl font-semibold",children:"Social Media Branding"}),jsxRuntimeExports.jsx("p",{className:"mt-3 text-slate-500 dark:text-slate-400",children:"Create a consistent brand image across all social media platforms."})]})]})}),jsxRuntimeExports.jsx(Animated,{varient:"fade-in",children:jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("img",{src:"/images/static/IyaNci0CyRk-unsplash.jpg",alt:"UI/UX Design",className:"w-full object-cover rounded-t-md mx-auto bg-slate-300 bg-slate-500",style:{aspectRatio:"3/2"}}),jsxRuntimeExports.jsxs("div",{className:"bg-slate-300 dark:bg-slate-800 p-6 rounded-b-md",children:[jsxRuntimeExports.jsx("h3",{className:"text-2xl font-semibold",children:"UI/UX Design"}),jsxRuntimeExports.jsx("p",{className:"mt-3 text-slate-500 dark:text-slate-400",children:"Create a visually appealing and user-friendly interface for your website or app."})]})]})}),jsxRuntimeExports.jsx(Animated,{varient:"fade-in",children:jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("img",{src:"/images/static/bs2Ba7t69mM-unsplash.jpg",alt:"Web Design",className:"w-full object-cover rounded-t-md mx-auto bg-slate-300 bg-slate-500",style:{aspectRatio:"3/2"}}),jsxRuntimeExports.jsxs("div",{className:"bg-slate-300 dark:bg-slate-800 p-6 rounded-b-md",children:[jsxRuntimeExports.jsx("h3",{className:"text-2xl font-semibold",children:"Web Design"}),jsxRuntimeExports.jsx("p",{className:"mt-3 text-slate-500 dark:text-slate-400",children:"Build a stunning website that is easy to navigate and use."})]})]})}),jsxRuntimeExports.jsx(Animated,{varient:"fade-in",children:jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("img",{src:"/images/static/v9vII5gV8Lw-unsplash.jpg",alt:"Graphic Design",className:"w-full object-cover rounded-t-md mx-auto bg-slate-300 bg-slate-500",style:{aspectRatio:"3/2"}}),jsxRuntimeExports.jsxs("div",{className:"bg-slate-300 dark:bg-slate-800 p-6 rounded-b-md",children:[jsxRuntimeExports.jsx("h3",{className:"text-2xl font-semibold",children:"Graphic Design"}),jsxRuntimeExports.jsx("p",{className:"mt-3 text-slate-500 dark:text-slate-400",children:"Create visually appealing graphics for your website and social media."})]})]})})]})]})})]}),BrandAdvisory=()=>jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("section",{className:"_hero-section min-h-[90vh] grid lg:grid-cols-2 gap-9 items-center py-12",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:"text-5xl font-bold",children:"Brand Advisory"}),jsxRuntimeExports.jsx("p",{className:"text-xl text-slate-700 dark:text-slate-300 mt-8 leading-8",children:"Get expert advice on building and growing your brand with our brand advisory solutions. We help you develop a strategic brand plan that aligns with your business goals."}),jsxRuntimeExports.jsx("a",{href:"#list",className:"inline-block bg-orange-600 text-white px-6 py-3 mt-8 rounded-full",children:"Get advice for your brand!"})]}),jsxRuntimeExports.jsx("img",{src:"/images/static/designOne.webp",alt:"Brand Advisory",className:"w-full object-cover rounded-lg bg-slate-300 dark:bg-slate-700",style:{aspectRatio:"16/9"}})]}),jsxRuntimeExports.jsx("section",{className:"_list-section min-h-screen py-12 pb-20",id:"list",children:jsxRuntimeExports.jsxs("div",{className:"max-w-6xl mx-auto",children:[jsxRuntimeExports.jsx("h2",{className:"text-4xl font-bold text-center mb-12",children:"Brand Advisory Services"}),jsxRuntimeExports.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[jsxRuntimeExports.jsx(Animated,{varient:"fade-in",children:jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("img",{src:"/images/static/5fNmWej4tAA-unsplash.jpg",alt:"Brand Consulting",className:"w-full object-cover rounded-t-md mx-auto bg-slate-300 bg-slate-500",style:{aspectRatio:"3/2"}}),jsxRuntimeExports.jsxs("div",{className:"bg-slate-300 dark:bg-slate-800 p-6 rounded-b-md",children:[jsxRuntimeExports.jsx("h3",{className:"text-2xl font-semibold",children:"Brand Consulting"}),jsxRuntimeExports.jsx("p",{className:"mt-3 text-slate-500 dark:text-slate-400",children:"Get expert advice on building and growing your brand with a strategic brand plan."})]})]})}),jsxRuntimeExports.jsx(Animated,{varient:"fade-in",children:jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("img",{src:"/images/static/QL0FAxaq2z0-unsplash.jpg",alt:"Brand Strategy",className:"w-full object-cover rounded-t-md mx-auto bg-slate-300 bg-slate-500",style:{aspectRatio:"3/2"}}),jsxRuntimeExports.jsxs("div",{className:"bg-slate-300 dark:bg-slate-800 p-6 rounded-b-md",children:[jsxRuntimeExports.jsx("h3",{className:"text-2xl font-semibold",children:"Brand Strategy"}),jsxRuntimeExports.jsx("p",{className:"mt-3 text-slate-500 dark:text-slate-400",children:"Develop a comprehensive brand strategy that defines your brand's identity and positioning."})]})]})}),jsxRuntimeExports.jsx(Animated,{varient:"fade-in",children:jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("img",{src:"/images/static/PEJtZfT6C1Q-unsplash.jpg",alt:"Brand Messaging",className:"w-full object-cover rounded-t-md mx-auto bg-slate-300 bg-slate-500",style:{aspectRatio:"3/2"}}),jsxRuntimeExports.jsxs("div",{className:"bg-slate-300 dark:bg-slate-800 p-6 rounded-b-md",children:[jsxRuntimeExports.jsx("h3",{className:"text-2xl font-semibold",children:"Brand Messaging"}),jsxRuntimeExports.jsx("p",{className:"mt-3 text-slate-500 dark:text-slate-400",children:"Develop a compelling brand story that resonates with your audience and communicates your brand values."})]})]})})]})]})})]}),Development=()=>jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("section",{className:"_hero-section min-h-[90vh] grid lg:grid-cols-2 gap-9 items-center py-12",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:"text-5xl font-bold",children:"Web Development"}),jsxRuntimeExports.jsx("p",{className:"text-xl text-slate-700 dark:text-slate-300 mt-8 leading-8",children:"Build a stunning website or web application with our development solutions. We help you create a functional and user-friendly web app that meets your business needs."}),jsxRuntimeExports.jsx("a",{href:"#list",className:"inline-block bg-orange-600 text-white px-6 py-3 mt-8 rounded-full",children:"Develop your website!"})]}),jsxRuntimeExports.jsx("img",{src:"/images/static/eYpcLDXHVb0-unsplash.jpg",alt:"Web Development",className:"w-full object-cover rounded-lg bg-slate-300 dark:bg-slate-700",style:{aspectRatio:"16/9"}})]}),jsxRuntimeExports.jsx("section",{className:"_list-section min-h-screen py-12 pb-20",id:"list",children:jsxRuntimeExports.jsxs("div",{className:"max-w-6xl mx-auto",children:[jsxRuntimeExports.jsx("h2",{className:"text-4xl font-bold text-center mb-12",children:"Development Services"}),jsxRuntimeExports.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:[jsxRuntimeExports.jsx(Animated,{varient:"fade-in",children:jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("img",{src:"/images/static/ayjnmG4oUX4-unsplash.jpg",alt:"Frontend Development",className:"w-full object-cover rounded-t-md mx-auto bg-slate-300 bg-slate-500",style:{aspectRatio:"3/2"}}),jsxRuntimeExports.jsxs("div",{className:"bg-slate-300 dark:bg-slate-800 p-6 rounded-b-md",children:[jsxRuntimeExports.jsx("h3",{className:"text-2xl font-semibold",children:"Frontend Development"}),jsxRuntimeExports.jsx("p",{className:"mt-3 text-slate-500 dark:text-slate-400",children:"Create frontend interfaces that are visually appealing and user-friendly."})]})]})}),jsxRuntimeExports.jsx(Animated,{varient:"fade-in",children:jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("img",{src:"/images/static/M5tzZtFCOfs-unsplash.jpg",alt:"Backend Development",className:"w-full object-cover rounded-t-md mx-auto bg-slate-300 bg-slate-500",style:{aspectRatio:"3/2"}}),jsxRuntimeExports.jsxs("div",{className:"bg-slate-300 dark:bg-slate-800 p-6 rounded-b-md",children:[jsxRuntimeExports.jsx("h3",{className:"text-2xl font-semibold",children:"Backend Development"}),jsxRuntimeExports.jsx("p",{className:"mt-3 text-slate-500 dark:text-slate-400",children:"Develop backend systems that power your website or web application."})]})]})}),jsxRuntimeExports.jsx(Animated,{varient:"fade-in",children:jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("img",{src:"/images/static/ehyV_XOZ4iA-unsplash.jpg",alt:"API Development",className:"w-full object-cover rounded-t-md mx-auto bg-slate-300 bg-slate-500",style:{aspectRatio:"3/2"}}),jsxRuntimeExports.jsxs("div",{className:"bg-slate-300 dark:bg-slate-800 p-6 rounded-b-md",children:[jsxRuntimeExports.jsx("h3",{className:"text-2xl font-semibold",children:"API Development"}),jsxRuntimeExports.jsx("p",{className:"mt-3 text-slate-500 dark:text-slate-400",children:"Build custom APIs to connect your website or app to external services."})]})]})})]})]})})]}),Marketing=()=>jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("section",{className:"_hero-section min-h-[90vh] grid lg:grid-cols-2 gap-9 items-center py-12",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:"text-5xl font-bold",children:"Digital Marketing"}),jsxRuntimeExports.jsx("p",{className:"text-xl text-slate-700 dark:text-slate-300 mt-8 leading-8",children:"Grow your online presence with our digital marketing solutions. We help you reach your target audience and drive traffic to your website or app."}),jsxRuntimeExports.jsx("a",{href:"#list",className:"inline-block bg-orange-600 text-white px-6 py-3 mt-8 rounded-full",children:"Boost your marketing!"})]}),jsxRuntimeExports.jsx("img",{src:"/images/static/tZc3vjPCk-Q-unsplash.jpg",alt:"Marketing",className:"w-full object-cover rounded-lg bg-slate-300 dark:bg-slate-700",style:{aspectRatio:"16/9"}})]}),jsxRuntimeExports.jsx("section",{className:"_list-section min-h-screen py-12 pb-20",id:"list",children:jsxRuntimeExports.jsxs("div",{className:"max-w-6xl mx-auto",children:[jsxRuntimeExports.jsx("h2",{className:"text-4xl font-bold text-center mb-12",children:"Marketing Services"}),jsxRuntimeExports.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[jsxRuntimeExports.jsx(Animated,{varient:"fade-in",children:jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("img",{src:"/images/static/shrXn8S8QU-unsplash.jpg",alt:"SEO",className:"w-full object-cover rounded-t-md mx-auto bg-slate-300 bg-slate-500",style:{aspectRatio:"3/2"}}),jsxRuntimeExports.jsxs("div",{className:"bg-slate-300 dark:bg-slate-800 p-6 rounded-b-md",children:[jsxRuntimeExports.jsx("h3",{className:"text-2xl font-semibold",children:"SEO"}),jsxRuntimeExports.jsx("p",{className:"mt-3 text-slate-500 dark:text-slate-400",children:"Improve your website's search engine rankings and visibility."})]})]})}),jsxRuntimeExports.jsx(Animated,{varient:"fade-in",children:jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("img",{src:"/images/static/kLmt1mpGJVg-unsplash.jpg",alt:"Social Media Marketing",className:"w-full object-cover rounded-t-md mx-auto bg-slate-300 bg-slate-500",style:{aspectRatio:"3/2"}}),jsxRuntimeExports.jsxs("div",{className:"bg-slate-300 dark:bg-slate-800 p-6 rounded-b-md",children:[jsxRuntimeExports.jsx("h3",{className:"text-2xl font-semibold",children:"Social Media Marketing"}),jsxRuntimeExports.jsx("p",{className:"mt-3 text-slate-500 dark:text-slate-400",children:"Promote your brand and engage with your audience on social media platforms."})]})]})}),jsxRuntimeExports.jsx(Animated,{varient:"fade-in",children:jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("img",{src:"/images/static/3GZNPBLImWc-unsplash.jpg",alt:"Content Marketing",className:"w-full object-cover rounded-t-md mx-auto bg-slate-300 bg-slate-500",style:{aspectRatio:"3/2"}}),jsxRuntimeExports.jsxs("div",{className:"bg-slate-300 dark:bg-slate-800 p-6 rounded-b-md",children:[jsxRuntimeExports.jsx("h3",{className:"text-2xl font-semibold",children:"Content Marketing"}),jsxRuntimeExports.jsx("p",{className:"mt-3 text-slate-500 dark:text-slate-400",children:"Create valuable content that attracts and engages your target audience."})]})]})})]})]})})]}),ContentWriting=()=>jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("section",{className:"_hero-section min-h-[90vh] grid lg:grid-cols-2 gap-9 items-center py-12",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:"text-5xl font-bold",children:"Content Writing"}),jsxRuntimeExports.jsx("p",{className:"text-xl text-slate-700 dark:text-slate-300 mt-8 leading-8",children:"Create engaging and informative content with our content writing solutions. We help you develop high-quality content that drives traffic and conversions."}),jsxRuntimeExports.jsx("a",{href:"#list",className:"inline-block bg-orange-600 text-white px-6 py-3 mt-8 rounded-full",children:"Write your content!"})]}),jsxRuntimeExports.jsx("img",{src:"/images/static/zIwAchjDirM-unsplash.jpg",alt:"Content Writing",className:"w-full object-cover rounded-lg bg-slate-300 dark:bg-slate-700",style:{aspectRatio:"16/9"}})]}),jsxRuntimeExports.jsx("section",{className:"_list-section min-h-screen py-12 pb-20",id:"list",children:jsxRuntimeExports.jsxs("div",{className:"max-w-6xl mx-auto",children:[jsxRuntimeExports.jsx("h2",{className:"text-4xl font-bold text-center mb-12",children:"Content Writing Services"}),jsxRuntimeExports.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[jsxRuntimeExports.jsx(Animated,{varient:"fade-in",children:jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("img",{src:"/images/static/FHnnjk1Yj7Y-unsplash.jpg",alt:"Blog Writing",className:"w-full object-cover rounded-t-md mx-auto bg-slate-300 bg-slate-500",style:{aspectRatio:"3/2"}}),jsxRuntimeExports.jsxs("div",{className:"bg-slate-300 dark:bg-slate-800 p-6 rounded-b-md",children:[jsxRuntimeExports.jsx("h3",{className:"text-2xl font-semibold",children:"Blog Writing"}),jsxRuntimeExports.jsx("p",{className:"mt-3 text-slate-500 dark:text-slate-400",children:"Create engaging blog posts that attract and inform your audience."})]})]})}),jsxRuntimeExports.jsx(Animated,{varient:"fade-in",children:jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("img",{src:"/images/static/EKy2OTRPXdw-unsplash.jpg",alt:"Copywriting",className:"w-full object-cover rounded-t-md mx-auto bg-slate-300 bg-slate-500",style:{aspectRatio:"3/2"}}),jsxRuntimeExports.jsxs("div",{className:"bg-slate-300 dark:bg-slate-800 p-6 rounded-b-md",children:[jsxRuntimeExports.jsx("h3",{className:"text-2xl font-semibold",children:"Copywriting"}),jsxRuntimeExports.jsx("p",{className:"mt-3 text-slate-500 dark:text-slate-400",children:"Develop compelling copy that drives conversions and sales."})]})]})}),jsxRuntimeExports.jsx(Animated,{varient:"fade-in",children:jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("img",{src:"/images/static/XJXWbfSo2f0-unsplash.jpg",alt:"SEO Writing",className:"w-full object-cover rounded-t-md mx-auto bg-slate-300 bg-slate-500",style:{aspectRatio:"3/2"}}),jsxRuntimeExports.jsxs("div",{className:"bg-slate-300 dark:bg-slate-800 p-6 rounded-b-md",children:[jsxRuntimeExports.jsx("h3",{className:"text-2xl font-semibold",children:"SEO Writing"}),jsxRuntimeExports.jsx("p",{className:"mt-3 text-slate-500 dark:text-slate-400",children:"Write SEO-friendly content that ranks well in search engines."})]})]})})]})]})})]}),SoftwareTesting=()=>jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsxs("div",{className:"container mx-auto text-slate-800 dark:text-white",children:[jsxRuntimeExports.jsxs("section",{className:"_hero-section min-h-[90vh] grid lg:grid-cols-2 gap-9 items-center py-12",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:"text-5xl font-bold",children:"Software Testing"}),jsxRuntimeExports.jsx("p",{className:"text-xl text-slate-700 dark:text-slate-300 mt-8 leading-8",children:"Fix bugs and issues in your website or web application with our software testing solutions. We help you identify and resolve technical problems to ensure a smooth user experience."}),jsxRuntimeExports.jsx("a",{href:"#list",className:"inline-block bg-orange-600 text-white px-6 py-3 mt-8 rounded-full",children:"Fix your bugs!"})]}),jsxRuntimeExports.jsx("img",{src:"/images/static/wvJuYrM5iuw-unsplash.jpg",alt:"Software Testing",className:"w-full object-cover rounded-lg bg-slate-300 dark:bg-slate-700",style:{aspectRatio:"16/9"}})]}),jsxRuntimeExports.jsx("section",{className:"_list-section min-h-screen py-12 pb-20",id:"list",children:jsxRuntimeExports.jsxs("div",{className:"max-w-6xl mx-auto",children:[jsxRuntimeExports.jsx("h2",{className:"text-4xl font-bold text-center mb-12",children:"Software Testing Services"}),jsxRuntimeExports.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[jsxRuntimeExports.jsx(Animated,{varient:"fade-in",children:jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("img",{src:"/images/static/5fNmWej4tAA-unsplash.jpg",alt:"Software Testing",className:"w-full object-cover rounded-t-md mx-auto bg-slate-300 bg-slate-500",style:{aspectRatio:"3/2"}}),jsxRuntimeExports.jsxs("div",{className:"bg-slate-300 dark:bg-slate-800 p-6 rounded-b-md",children:[jsxRuntimeExports.jsx("h3",{className:"text-2xl font-semibold",children:"Website Debugging"}),jsxRuntimeExports.jsx("p",{className:"mt-3 text-slate-500 dark:text-slate-400",children:"Identify and fix technical issues in your website to ensure optimal performance."})]})]})}),jsxRuntimeExports.jsx(Animated,{varient:"fade-in",children:jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("img",{src:"/images/static/XJXWbfSo2f0-unsplash.jpg",alt:"Code Refactoring",className:"w-full object-cover rounded-t-md mx-auto bg-slate-300 bg-slate-500",style:{aspectRatio:"3/2"}}),jsxRuntimeExports.jsxs("div",{className:"bg-slate-300 dark:bg-slate-800 p-6 rounded-b-md",children:[jsxRuntimeExports.jsx("h3",{className:"text-2xl font-semibold",children:"Code Refactoring"}),jsxRuntimeExports.jsx("p",{className:"mt-3 text-slate-500 dark:text-slate-400",children:"Improve the structure and readability of your code for better performance."})]})]})}),jsxRuntimeExports.jsx(Animated,{varient:"fade-in",children:jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("img",{src:"/images/static/GNyjCePVRs8-unsplash.jpg",alt:"Database Optimization",className:"w-full object-cover rounded-t-md mx-auto bg-slate-300 bg-slate-500",style:{aspectRatio:"3/2"}}),jsxRuntimeExports.jsxs("div",{className:"bg-slate-300 dark:bg-slate-800 p-6 rounded-b-md",children:[jsxRuntimeExports.jsx("h3",{className:"text-2xl font-semibold",children:"Database Optimization"}),jsxRuntimeExports.jsx("p",{className:"mt-3 text-slate-500 dark:text-slate-400",children:"Optimize your database to improve data retrieval and storage efficiency."})]})]})})]})]})})]})}),Layout=({children:Nt})=>(React$1.useEffect(()=>{window.scrollTo(0,0)},[Nt]),Nt);function ServicesView(){const Nt=useParams().service.charAt(0).toUpperCase()+useParams().service.slice(1).replace(/-/g," "),s=["branding","development","brand-advisory","marketing","content-writing","software-testing"],Ot={branding:jsxRuntimeExports.jsx(Layout,{children:jsxRuntimeExports.jsx(Branding,{})}),development:jsxRuntimeExports.jsx(Layout,{children:jsxRuntimeExports.jsx(Development,{})}),"brand-advisory":jsxRuntimeExports.jsx(Layout,{children:jsxRuntimeExports.jsx(BrandAdvisory,{})}),marketing:jsxRuntimeExports.jsx(Layout,{children:jsxRuntimeExports.jsx(Marketing,{})}),"content-writing":jsxRuntimeExports.jsx(Layout,{children:jsxRuntimeExports.jsx(ContentWriting,{})}),"software-testing":jsxRuntimeExports.jsx(Layout,{children:jsxRuntimeExports.jsx(SoftwareTesting,{})})};return s.includes(useParams().service)?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs(HelmetExport,{children:[jsxRuntimeExports.jsx("title",{children:Nt?Nt.replace(/\b\w/g,en=>en.toUpperCase())+" | Videophics Agency":"Services - Videophics"}),jsxRuntimeExports.jsx("meta",{name:"description",content:Nt?"Explore our "+Nt+" services and take your business to the next level.":"Discover our comprehensive services including branding, marketing, development, and more."})]}),jsxRuntimeExports.jsx("div",{className:"container mx-auto text-slate-800 dark:text-white max-w-[1300px]",children:useParams().service&&Ot[useParams().service]?Ot[useParams().service]:jsxRuntimeExports.jsx(NotFound,{})})]}):jsxRuntimeExports.jsx(NotFound,{})}function AboutUs(){return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs(HelmetExport,{children:[jsxRuntimeExports.jsx("title",{children:"About Us - Videophics"}),jsxRuntimeExports.jsx("meta",{name:"description",content:"We are a branding agency that helps businesses grow organically. We provide best solutions for your business."})]}),jsxRuntimeExports.jsxs("div",{className:"container mx-auto max-w-[1300px] py-20 text-slate-800 dark:text-white",children:[jsxRuntimeExports.jsxs("h1",{className:"text-4xl font-bold text-center",children:["Branding Agency "," ",jsxRuntimeExports.jsx("span",{className:"text-violet-700 dark:text-violet-500",children:"Organic Growth"})]}),jsxRuntimeExports.jsx("img",{src:"/images/static/aboutView.webp",alt:"Branding",className:"w-full h-96 object-cover mt-10 rounded-md bg-slate-200 dark:bg-slate-800"}),jsxRuntimeExports.jsx("p",{className:"mt-10 text-lg leading-relaxed",children:"Videophics is a branding agency that helps businesses grow organically. We provide the best solutions for your business. Our services include branding, development, brand advisory, marketing, content writing, and software testing. We have a team of experts who are dedicated to helping you grow your business. We are committed to providing you with the best services at an affordable price. Contact us today to learn more about how we can help you grow your business."})]})]})}var define_process_env_default$2={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CONSTANTS={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const assert=function(Nt,s){if(!Nt)throw assertionError(s)},assertionError=function(Nt){return new Error("Firebase Database ("+CONSTANTS.SDK_VERSION+") INTERNAL ASSERT FAILED: "+Nt)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const stringToByteArray$1$1=function(Nt){const s=[];let Ot=0;for(let en=0;en<Nt.length;en++){let tn=Nt.charCodeAt(en);tn<128?s[Ot++]=tn:tn<2048?(s[Ot++]=tn>>6|192,s[Ot++]=tn&63|128):(tn&64512)===55296&&en+1<Nt.length&&(Nt.charCodeAt(en+1)&64512)===56320?(tn=65536+((tn&1023)<<10)+(Nt.charCodeAt(++en)&1023),s[Ot++]=tn>>18|240,s[Ot++]=tn>>12&63|128,s[Ot++]=tn>>6&63|128,s[Ot++]=tn&63|128):(s[Ot++]=tn>>12|224,s[Ot++]=tn>>6&63|128,s[Ot++]=tn&63|128)}return s},byteArrayToString$1=function(Nt){const s=[];let Ot=0,en=0;for(;Ot<Nt.length;){const tn=Nt[Ot++];if(tn<128)s[en++]=String.fromCharCode(tn);else if(tn>191&&tn<224){const nn=Nt[Ot++];s[en++]=String.fromCharCode((tn&31)<<6|nn&63)}else if(tn>239&&tn<365){const nn=Nt[Ot++],rn=Nt[Ot++],on=Nt[Ot++],sn=((tn&7)<<18|(nn&63)<<12|(rn&63)<<6|on&63)-65536;s[en++]=String.fromCharCode(55296+(sn>>10)),s[en++]=String.fromCharCode(56320+(sn&1023))}else{const nn=Nt[Ot++],rn=Nt[Ot++];s[en++]=String.fromCharCode((tn&15)<<12|(nn&63)<<6|rn&63)}}return s.join("")},base64$1={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(Nt,s){if(!Array.isArray(Nt))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Ot=s?this.byteToCharMapWebSafe_:this.byteToCharMap_,en=[];for(let tn=0;tn<Nt.length;tn+=3){const nn=Nt[tn],rn=tn+1<Nt.length,on=rn?Nt[tn+1]:0,sn=tn+2<Nt.length,an=sn?Nt[tn+2]:0,ln=nn>>2,cn=(nn&3)<<4|on>>4;let un=(on&15)<<2|an>>6,dn=an&63;sn||(dn=64,rn||(un=64)),en.push(Ot[ln],Ot[cn],Ot[un],Ot[dn])}return en.join("")},encodeString(Nt,s){return this.HAS_NATIVE_SUPPORT&&!s?btoa(Nt):this.encodeByteArray(stringToByteArray$1$1(Nt),s)},decodeString(Nt,s){return this.HAS_NATIVE_SUPPORT&&!s?atob(Nt):byteArrayToString$1(this.decodeStringToByteArray(Nt,s))},decodeStringToByteArray(Nt,s){this.init_();const Ot=s?this.charToByteMapWebSafe_:this.charToByteMap_,en=[];for(let tn=0;tn<Nt.length;){const nn=Ot[Nt.charAt(tn++)],on=tn<Nt.length?Ot[Nt.charAt(tn)]:0;++tn;const an=tn<Nt.length?Ot[Nt.charAt(tn)]:64;++tn;const cn=tn<Nt.length?Ot[Nt.charAt(tn)]:64;if(++tn,nn==null||on==null||an==null||cn==null)throw new DecodeBase64StringError$1;const un=nn<<2|on>>4;if(en.push(un),an!==64){const dn=on<<4&240|an>>2;if(en.push(dn),cn!==64){const hn=an<<6&192|cn;en.push(hn)}}}return en},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let Nt=0;Nt<this.ENCODED_VALS.length;Nt++)this.byteToCharMap_[Nt]=this.ENCODED_VALS.charAt(Nt),this.charToByteMap_[this.byteToCharMap_[Nt]]=Nt,this.byteToCharMapWebSafe_[Nt]=this.ENCODED_VALS_WEBSAFE.charAt(Nt),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[Nt]]=Nt,Nt>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(Nt)]=Nt,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(Nt)]=Nt)}}};let DecodeBase64StringError$1=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}};const base64Encode$1=function(Nt){const s=stringToByteArray$1$1(Nt);return base64$1.encodeByteArray(s,!0)},base64urlEncodeWithoutPadding$1=function(Nt){return base64Encode$1(Nt).replace(/\./g,"")},base64Decode$1=function(Nt){try{return base64$1.decodeString(Nt,!0)}catch(s){console.error("base64Decode failed: ",s)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function deepCopy(Nt){return deepExtend(void 0,Nt)}function deepExtend(Nt,s){if(!(s instanceof Object))return s;switch(s.constructor){case Date:const Ot=s;return new Date(Ot.getTime());case Object:Nt===void 0&&(Nt={});break;case Array:Nt=[];break;default:return s}for(const Ot in s)!s.hasOwnProperty(Ot)||!isValidKey$1(Ot)||(Nt[Ot]=deepExtend(Nt[Ot],s[Ot]));return Nt}function isValidKey$1(Nt){return Nt!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getGlobal$1(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const getDefaultsFromGlobal$1=()=>getGlobal$1().__FIREBASE_DEFAULTS__,getDefaultsFromEnvVariable$1=()=>{if(typeof process>"u"||typeof define_process_env_default$2>"u")return;const Nt=define_process_env_default$2.__FIREBASE_DEFAULTS__;if(Nt)return JSON.parse(Nt)},getDefaultsFromCookie$1=()=>{if(typeof document>"u")return;let Nt;try{Nt=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const s=Nt&&base64Decode$1(Nt[1]);return s&&JSON.parse(s)},getDefaults$1=()=>{try{return getDefaultsFromGlobal$1()||getDefaultsFromEnvVariable$1()||getDefaultsFromCookie$1()}catch(Nt){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${Nt}`);return}},getDefaultEmulatorHost$1=Nt=>{var s,Ot;return(Ot=(s=getDefaults$1())===null||s===void 0?void 0:s.emulatorHosts)===null||Ot===void 0?void 0:Ot[Nt]},getDefaultEmulatorHostnameAndPort$1=Nt=>{const s=getDefaultEmulatorHost$1(Nt);if(!s)return;const Ot=s.lastIndexOf(":");if(Ot<=0||Ot+1===s.length)throw new Error(`Invalid host ${s} with no separate hostname and port!`);const en=parseInt(s.substring(Ot+1),10);return s[0]==="["?[s.substring(1,Ot-1),en]:[s.substring(0,Ot),en]},getDefaultAppConfig=()=>{var Nt;return(Nt=getDefaults$1())===null||Nt===void 0?void 0:Nt.config},getExperimentalSetting=Nt=>{var s;return(s=getDefaults$1())===null||s===void 0?void 0:s[`_${Nt}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Deferred{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((s,Ot)=>{this.resolve=s,this.reject=Ot})}wrapCallback(s){return(Ot,en)=>{Ot?this.reject(Ot):this.resolve(en),typeof s=="function"&&(this.promise.catch(()=>{}),s.length===1?s(Ot):s(Ot,en))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function createMockUserToken$1(Nt,s){if(Nt.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Ot={alg:"none",type:"JWT"},en=s||"demo-project",tn=Nt.iat||0,nn=Nt.sub||Nt.user_id;if(!nn)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const rn=Object.assign({iss:`https://securetoken.google.com/${en}`,aud:en,iat:tn,exp:tn+3600,auth_time:tn,sub:nn,user_id:nn,firebase:{sign_in_provider:"custom",identities:{}}},Nt);return[base64urlEncodeWithoutPadding$1(JSON.stringify(Ot)),base64urlEncodeWithoutPadding$1(JSON.stringify(rn)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getUA(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function isMobileCordova(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(getUA())}function isNode(){var Nt;const s=(Nt=getDefaults$1())===null||Nt===void 0?void 0:Nt.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function isBrowserExtension(){const Nt=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof Nt=="object"&&Nt.id!==void 0}function isReactNative(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function isIE(){const Nt=getUA();return Nt.indexOf("MSIE ")>=0||Nt.indexOf("Trident/")>=0}function isNodeSdk(){return CONSTANTS.NODE_ADMIN===!0}function isSafari(){return!isNode()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function isIndexedDBAvailable(){try{return typeof indexedDB=="object"}catch{return!1}}function validateIndexedDBOpenable(){return new Promise((Nt,s)=>{try{let Ot=!0;const en="validate-browser-context-for-indexeddb-analytics-module",tn=self.indexedDB.open(en);tn.onsuccess=()=>{tn.result.close(),Ot||self.indexedDB.deleteDatabase(en),Nt(!0)},tn.onupgradeneeded=()=>{Ot=!1},tn.onerror=()=>{var nn;s(((nn=tn.error)===null||nn===void 0?void 0:nn.message)||"")}}catch(Ot){s(Ot)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ERROR_NAME$1="FirebaseError";let FirebaseError$1=class Or extends Error{constructor(s,Ot,en){super(Ot),this.code=s,this.customData=en,this.name=ERROR_NAME$1,Object.setPrototypeOf(this,Or.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ErrorFactory$1.prototype.create)}},ErrorFactory$1=class{constructor(s,Ot,en){this.service=s,this.serviceName=Ot,this.errors=en}create(s,...Ot){const en=Ot[0]||{},tn=`${this.service}/${s}`,nn=this.errors[s],rn=nn?replaceTemplate$1(nn,en):"Error",on=`${this.serviceName}: ${rn} (${tn}).`;return new FirebaseError$1(tn,on,en)}};function replaceTemplate$1(Nt,s){return Nt.replace(PATTERN$1,(Ot,en)=>{const tn=s[en];return tn!=null?String(tn):`<${en}?>`})}const PATTERN$1=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jsonEval(Nt){return JSON.parse(Nt)}function stringify(Nt){return JSON.stringify(Nt)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const decode$1=function(Nt){let s={},Ot={},en={},tn="";try{const nn=Nt.split(".");s=jsonEval(base64Decode$1(nn[0])||""),Ot=jsonEval(base64Decode$1(nn[1])||""),tn=nn[2],en=Ot.d||{},delete Ot.d}catch{}return{header:s,claims:Ot,data:en,signature:tn}},isValidFormat=function(Nt){const s=decode$1(Nt),Ot=s.claims;return!!Ot&&typeof Ot=="object"&&Ot.hasOwnProperty("iat")},isAdmin=function(Nt){const s=decode$1(Nt).claims;return typeof s=="object"&&s.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function contains(Nt,s){return Object.prototype.hasOwnProperty.call(Nt,s)}function safeGet(Nt,s){if(Object.prototype.hasOwnProperty.call(Nt,s))return Nt[s]}function isEmpty$1(Nt){for(const s in Nt)if(Object.prototype.hasOwnProperty.call(Nt,s))return!1;return!0}function map(Nt,s,Ot){const en={};for(const tn in Nt)Object.prototype.hasOwnProperty.call(Nt,tn)&&(en[tn]=s.call(Ot,Nt[tn],tn,Nt));return en}function deepEqual(Nt,s){if(Nt===s)return!0;const Ot=Object.keys(Nt),en=Object.keys(s);for(const tn of Ot){if(!en.includes(tn))return!1;const nn=Nt[tn],rn=s[tn];if(isObject$2(nn)&&isObject$2(rn)){if(!deepEqual(nn,rn))return!1}else if(nn!==rn)return!1}for(const tn of en)if(!Ot.includes(tn))return!1;return!0}function isObject$2(Nt){return Nt!==null&&typeof Nt=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function querystring(Nt){const s=[];for(const[Ot,en]of Object.entries(Nt))Array.isArray(en)?en.forEach(tn=>{s.push(encodeURIComponent(Ot)+"="+encodeURIComponent(tn))}):s.push(encodeURIComponent(Ot)+"="+encodeURIComponent(en));return s.length?"&"+s.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sha1{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let s=1;s<this.blockSize;++s)this.pad_[s]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(s,Ot){Ot||(Ot=0);const en=this.W_;if(typeof s=="string")for(let cn=0;cn<16;cn++)en[cn]=s.charCodeAt(Ot)<<24|s.charCodeAt(Ot+1)<<16|s.charCodeAt(Ot+2)<<8|s.charCodeAt(Ot+3),Ot+=4;else for(let cn=0;cn<16;cn++)en[cn]=s[Ot]<<24|s[Ot+1]<<16|s[Ot+2]<<8|s[Ot+3],Ot+=4;for(let cn=16;cn<80;cn++){const un=en[cn-3]^en[cn-8]^en[cn-14]^en[cn-16];en[cn]=(un<<1|un>>>31)&4294967295}let tn=this.chain_[0],nn=this.chain_[1],rn=this.chain_[2],on=this.chain_[3],sn=this.chain_[4],an,ln;for(let cn=0;cn<80;cn++){cn<40?cn<20?(an=on^nn&(rn^on),ln=1518500249):(an=nn^rn^on,ln=1859775393):cn<60?(an=nn&rn|on&(nn|rn),ln=2400959708):(an=nn^rn^on,ln=3395469782);const un=(tn<<5|tn>>>27)+an+sn+ln+en[cn]&4294967295;sn=on,on=rn,rn=(nn<<30|nn>>>2)&4294967295,nn=tn,tn=un}this.chain_[0]=this.chain_[0]+tn&4294967295,this.chain_[1]=this.chain_[1]+nn&4294967295,this.chain_[2]=this.chain_[2]+rn&4294967295,this.chain_[3]=this.chain_[3]+on&4294967295,this.chain_[4]=this.chain_[4]+sn&4294967295}update(s,Ot){if(s==null)return;Ot===void 0&&(Ot=s.length);const en=Ot-this.blockSize;let tn=0;const nn=this.buf_;let rn=this.inbuf_;for(;tn<Ot;){if(rn===0)for(;tn<=en;)this.compress_(s,tn),tn+=this.blockSize;if(typeof s=="string"){for(;tn<Ot;)if(nn[rn]=s.charCodeAt(tn),++rn,++tn,rn===this.blockSize){this.compress_(nn),rn=0;break}}else for(;tn<Ot;)if(nn[rn]=s[tn],++rn,++tn,rn===this.blockSize){this.compress_(nn),rn=0;break}}this.inbuf_=rn,this.total_+=Ot}digest(){const s=[];let Ot=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let tn=this.blockSize-1;tn>=56;tn--)this.buf_[tn]=Ot&255,Ot/=256;this.compress_(this.buf_);let en=0;for(let tn=0;tn<5;tn++)for(let nn=24;nn>=0;nn-=8)s[en]=this.chain_[tn]>>nn&255,++en;return s}}function createSubscribe(Nt,s){const Ot=new ObserverProxy(Nt,s);return Ot.subscribe.bind(Ot)}class ObserverProxy{constructor(s,Ot){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Ot,this.task.then(()=>{s(this)}).catch(en=>{this.error(en)})}next(s){this.forEachObserver(Ot=>{Ot.next(s)})}error(s){this.forEachObserver(Ot=>{Ot.error(s)}),this.close(s)}complete(){this.forEachObserver(s=>{s.complete()}),this.close()}subscribe(s,Ot,en){let tn;if(s===void 0&&Ot===void 0&&en===void 0)throw new Error("Missing Observer.");implementsAnyMethods(s,["next","error","complete"])?tn=s:tn={next:s,error:Ot,complete:en},tn.next===void 0&&(tn.next=noop$2),tn.error===void 0&&(tn.error=noop$2),tn.complete===void 0&&(tn.complete=noop$2);const nn=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?tn.error(this.finalError):tn.complete()}catch{}}),this.observers.push(tn),nn}unsubscribeOne(s){this.observers===void 0||this.observers[s]===void 0||(delete this.observers[s],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(s){if(!this.finalized)for(let Ot=0;Ot<this.observers.length;Ot++)this.sendOne(Ot,s)}sendOne(s,Ot){this.task.then(()=>{if(this.observers!==void 0&&this.observers[s]!==void 0)try{Ot(this.observers[s])}catch(en){typeof console<"u"&&console.error&&console.error(en)}})}close(s){this.finalized||(this.finalized=!0,s!==void 0&&(this.finalError=s),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function implementsAnyMethods(Nt,s){if(typeof Nt!="object"||Nt===null)return!1;for(const Ot of s)if(Ot in Nt&&typeof Nt[Ot]=="function")return!0;return!1}function noop$2(){}function errorPrefix(Nt,s){return`${Nt} failed: ${s} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const stringToByteArray=function(Nt){const s=[];let Ot=0;for(let en=0;en<Nt.length;en++){let tn=Nt.charCodeAt(en);if(tn>=55296&&tn<=56319){const nn=tn-55296;en++,assert(en<Nt.length,"Surrogate pair missing trail surrogate.");const rn=Nt.charCodeAt(en)-56320;tn=65536+(nn<<10)+rn}tn<128?s[Ot++]=tn:tn<2048?(s[Ot++]=tn>>6|192,s[Ot++]=tn&63|128):tn<65536?(s[Ot++]=tn>>12|224,s[Ot++]=tn>>6&63|128,s[Ot++]=tn&63|128):(s[Ot++]=tn>>18|240,s[Ot++]=tn>>12&63|128,s[Ot++]=tn>>6&63|128,s[Ot++]=tn&63|128)}return s},stringLength=function(Nt){let s=0;for(let Ot=0;Ot<Nt.length;Ot++){const en=Nt.charCodeAt(Ot);en<128?s++:en<2048?s+=2:en>=55296&&en<=56319?(s+=4,Ot++):s+=3}return s};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getModularInstance$1(Nt){return Nt&&Nt._delegate?Nt._delegate:Nt}let Component$1=class{constructor(s,Ot,en){this.name=s,this.instanceFactory=Ot,this.type=en,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(s){return this.instantiationMode=s,this}setMultipleInstances(s){return this.multipleInstances=s,this}setServiceProps(s){return this.serviceProps=s,this}setInstanceCreatedCallback(s){return this.onInstanceCreated=s,this}};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DEFAULT_ENTRY_NAME$1="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Provider{constructor(s,Ot){this.name=s,this.container=Ot,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(s){const Ot=this.normalizeInstanceIdentifier(s);if(!this.instancesDeferred.has(Ot)){const en=new Deferred;if(this.instancesDeferred.set(Ot,en),this.isInitialized(Ot)||this.shouldAutoInitialize())try{const tn=this.getOrInitializeService({instanceIdentifier:Ot});tn&&en.resolve(tn)}catch{}}return this.instancesDeferred.get(Ot).promise}getImmediate(s){var Ot;const en=this.normalizeInstanceIdentifier(s==null?void 0:s.identifier),tn=(Ot=s==null?void 0:s.optional)!==null&&Ot!==void 0?Ot:!1;if(this.isInitialized(en)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:en})}catch(nn){if(tn)return null;throw nn}else{if(tn)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(s){if(s.name!==this.name)throw Error(`Mismatching Component ${s.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=s,!!this.shouldAutoInitialize()){if(isComponentEager(s))try{this.getOrInitializeService({instanceIdentifier:DEFAULT_ENTRY_NAME$1})}catch{}for(const[Ot,en]of this.instancesDeferred.entries()){const tn=this.normalizeInstanceIdentifier(Ot);try{const nn=this.getOrInitializeService({instanceIdentifier:tn});en.resolve(nn)}catch{}}}}clearInstance(s=DEFAULT_ENTRY_NAME$1){this.instancesDeferred.delete(s),this.instancesOptions.delete(s),this.instances.delete(s)}async delete(){const s=Array.from(this.instances.values());await Promise.all([...s.filter(Ot=>"INTERNAL"in Ot).map(Ot=>Ot.INTERNAL.delete()),...s.filter(Ot=>"_delete"in Ot).map(Ot=>Ot._delete())])}isComponentSet(){return this.component!=null}isInitialized(s=DEFAULT_ENTRY_NAME$1){return this.instances.has(s)}getOptions(s=DEFAULT_ENTRY_NAME$1){return this.instancesOptions.get(s)||{}}initialize(s={}){const{options:Ot={}}=s,en=this.normalizeInstanceIdentifier(s.instanceIdentifier);if(this.isInitialized(en))throw Error(`${this.name}(${en}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const tn=this.getOrInitializeService({instanceIdentifier:en,options:Ot});for(const[nn,rn]of this.instancesDeferred.entries()){const on=this.normalizeInstanceIdentifier(nn);en===on&&rn.resolve(tn)}return tn}onInit(s,Ot){var en;const tn=this.normalizeInstanceIdentifier(Ot),nn=(en=this.onInitCallbacks.get(tn))!==null&&en!==void 0?en:new Set;nn.add(s),this.onInitCallbacks.set(tn,nn);const rn=this.instances.get(tn);return rn&&s(rn,tn),()=>{nn.delete(s)}}invokeOnInitCallbacks(s,Ot){const en=this.onInitCallbacks.get(Ot);if(en)for(const tn of en)try{tn(s,Ot)}catch{}}getOrInitializeService({instanceIdentifier:s,options:Ot={}}){let en=this.instances.get(s);if(!en&&this.component&&(en=this.component.instanceFactory(this.container,{instanceIdentifier:normalizeIdentifierForFactory(s),options:Ot}),this.instances.set(s,en),this.instancesOptions.set(s,Ot),this.invokeOnInitCallbacks(en,s),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,s,en)}catch{}return en||null}normalizeInstanceIdentifier(s=DEFAULT_ENTRY_NAME$1){return this.component?this.component.multipleInstances?s:DEFAULT_ENTRY_NAME$1:s}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function normalizeIdentifierForFactory(Nt){return Nt===DEFAULT_ENTRY_NAME$1?void 0:Nt}function isComponentEager(Nt){return Nt.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ComponentContainer{constructor(s){this.name=s,this.providers=new Map}addComponent(s){const Ot=this.getProvider(s.name);if(Ot.isComponentSet())throw new Error(`Component ${s.name} has already been registered with ${this.name}`);Ot.setComponent(s)}addOrOverwriteComponent(s){this.getProvider(s.name).isComponentSet()&&this.providers.delete(s.name),this.addComponent(s)}getProvider(s){if(this.providers.has(s))return this.providers.get(s);const Ot=new Provider(s,this);return this.providers.set(s,Ot),Ot}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var LogLevel;(function(Nt){Nt[Nt.DEBUG=0]="DEBUG",Nt[Nt.VERBOSE=1]="VERBOSE",Nt[Nt.INFO=2]="INFO",Nt[Nt.WARN=3]="WARN",Nt[Nt.ERROR=4]="ERROR",Nt[Nt.SILENT=5]="SILENT"})(LogLevel||(LogLevel={}));const levelStringToEnum={debug:LogLevel.DEBUG,verbose:LogLevel.VERBOSE,info:LogLevel.INFO,warn:LogLevel.WARN,error:LogLevel.ERROR,silent:LogLevel.SILENT},defaultLogLevel=LogLevel.INFO,ConsoleMethod={[LogLevel.DEBUG]:"log",[LogLevel.VERBOSE]:"log",[LogLevel.INFO]:"info",[LogLevel.WARN]:"warn",[LogLevel.ERROR]:"error"},defaultLogHandler=(Nt,s,...Ot)=>{if(s<Nt.logLevel)return;const en=new Date().toISOString(),tn=ConsoleMethod[s];if(tn)console[tn](`[${en}]  ${Nt.name}:`,...Ot);else throw new Error(`Attempted to log a message with an invalid logType (value: ${s})`)};class Logger{constructor(s){this.name=s,this._logLevel=defaultLogLevel,this._logHandler=defaultLogHandler,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(s){if(!(s in LogLevel))throw new TypeError(`Invalid value "${s}" assigned to \`logLevel\``);this._logLevel=s}setLogLevel(s){this._logLevel=typeof s=="string"?levelStringToEnum[s]:s}get logHandler(){return this._logHandler}set logHandler(s){if(typeof s!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=s}get userLogHandler(){return this._userLogHandler}set userLogHandler(s){this._userLogHandler=s}debug(...s){this._userLogHandler&&this._userLogHandler(this,LogLevel.DEBUG,...s),this._logHandler(this,LogLevel.DEBUG,...s)}log(...s){this._userLogHandler&&this._userLogHandler(this,LogLevel.VERBOSE,...s),this._logHandler(this,LogLevel.VERBOSE,...s)}info(...s){this._userLogHandler&&this._userLogHandler(this,LogLevel.INFO,...s),this._logHandler(this,LogLevel.INFO,...s)}warn(...s){this._userLogHandler&&this._userLogHandler(this,LogLevel.WARN,...s),this._logHandler(this,LogLevel.WARN,...s)}error(...s){this._userLogHandler&&this._userLogHandler(this,LogLevel.ERROR,...s),this._logHandler(this,LogLevel.ERROR,...s)}}const instanceOfAny=(Nt,s)=>s.some(Ot=>Nt instanceof Ot);let idbProxyableTypes,cursorAdvanceMethods;function getIdbProxyableTypes(){return idbProxyableTypes||(idbProxyableTypes=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function getCursorAdvanceMethods(){return cursorAdvanceMethods||(cursorAdvanceMethods=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const cursorRequestMap=new WeakMap,transactionDoneMap=new WeakMap,transactionStoreNamesMap=new WeakMap,transformCache=new WeakMap,reverseTransformCache=new WeakMap;function promisifyRequest(Nt){const s=new Promise((Ot,en)=>{const tn=()=>{Nt.removeEventListener("success",nn),Nt.removeEventListener("error",rn)},nn=()=>{Ot(wrap(Nt.result)),tn()},rn=()=>{en(Nt.error),tn()};Nt.addEventListener("success",nn),Nt.addEventListener("error",rn)});return s.then(Ot=>{Ot instanceof IDBCursor&&cursorRequestMap.set(Ot,Nt)}).catch(()=>{}),reverseTransformCache.set(s,Nt),s}function cacheDonePromiseForTransaction(Nt){if(transactionDoneMap.has(Nt))return;const s=new Promise((Ot,en)=>{const tn=()=>{Nt.removeEventListener("complete",nn),Nt.removeEventListener("error",rn),Nt.removeEventListener("abort",rn)},nn=()=>{Ot(),tn()},rn=()=>{en(Nt.error||new DOMException("AbortError","AbortError")),tn()};Nt.addEventListener("complete",nn),Nt.addEventListener("error",rn),Nt.addEventListener("abort",rn)});transactionDoneMap.set(Nt,s)}let idbProxyTraps={get(Nt,s,Ot){if(Nt instanceof IDBTransaction){if(s==="done")return transactionDoneMap.get(Nt);if(s==="objectStoreNames")return Nt.objectStoreNames||transactionStoreNamesMap.get(Nt);if(s==="store")return Ot.objectStoreNames[1]?void 0:Ot.objectStore(Ot.objectStoreNames[0])}return wrap(Nt[s])},set(Nt,s,Ot){return Nt[s]=Ot,!0},has(Nt,s){return Nt instanceof IDBTransaction&&(s==="done"||s==="store")?!0:s in Nt}};function replaceTraps(Nt){idbProxyTraps=Nt(idbProxyTraps)}function wrapFunction(Nt){return Nt===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(s,...Ot){const en=Nt.call(unwrap(this),s,...Ot);return transactionStoreNamesMap.set(en,s.sort?s.sort():[s]),wrap(en)}:getCursorAdvanceMethods().includes(Nt)?function(...s){return Nt.apply(unwrap(this),s),wrap(cursorRequestMap.get(this))}:function(...s){return wrap(Nt.apply(unwrap(this),s))}}function transformCachableValue(Nt){return typeof Nt=="function"?wrapFunction(Nt):(Nt instanceof IDBTransaction&&cacheDonePromiseForTransaction(Nt),instanceOfAny(Nt,getIdbProxyableTypes())?new Proxy(Nt,idbProxyTraps):Nt)}function wrap(Nt){if(Nt instanceof IDBRequest)return promisifyRequest(Nt);if(transformCache.has(Nt))return transformCache.get(Nt);const s=transformCachableValue(Nt);return s!==Nt&&(transformCache.set(Nt,s),reverseTransformCache.set(s,Nt)),s}const unwrap=Nt=>reverseTransformCache.get(Nt);function openDB(Nt,s,{blocked:Ot,upgrade:en,blocking:tn,terminated:nn}={}){const rn=indexedDB.open(Nt,s),on=wrap(rn);return en&&rn.addEventListener("upgradeneeded",sn=>{en(wrap(rn.result),sn.oldVersion,sn.newVersion,wrap(rn.transaction),sn)}),Ot&&rn.addEventListener("blocked",sn=>Ot(sn.oldVersion,sn.newVersion,sn)),on.then(sn=>{nn&&sn.addEventListener("close",()=>nn()),tn&&sn.addEventListener("versionchange",an=>tn(an.oldVersion,an.newVersion,an))}).catch(()=>{}),on}const readMethods=["get","getKey","getAll","getAllKeys","count"],writeMethods=["put","add","delete","clear"],cachedMethods=new Map;function getMethod(Nt,s){if(!(Nt instanceof IDBDatabase&&!(s in Nt)&&typeof s=="string"))return;if(cachedMethods.get(s))return cachedMethods.get(s);const Ot=s.replace(/FromIndex$/,""),en=s!==Ot,tn=writeMethods.includes(Ot);if(!(Ot in(en?IDBIndex:IDBObjectStore).prototype)||!(tn||readMethods.includes(Ot)))return;const nn=async function(rn,...on){const sn=this.transaction(rn,tn?"readwrite":"readonly");let an=sn.store;return en&&(an=an.index(on.shift())),(await Promise.all([an[Ot](...on),tn&&sn.done]))[0]};return cachedMethods.set(s,nn),nn}replaceTraps(Nt=>({...Nt,get:(s,Ot,en)=>getMethod(s,Ot)||Nt.get(s,Ot,en),has:(s,Ot)=>!!getMethod(s,Ot)||Nt.has(s,Ot)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PlatformLoggerServiceImpl{constructor(s){this.container=s}getPlatformInfoString(){return this.container.getProviders().map(Ot=>{if(isVersionServiceProvider(Ot)){const en=Ot.getImmediate();return`${en.library}/${en.version}`}else return null}).filter(Ot=>Ot).join(" ")}}function isVersionServiceProvider(Nt){const s=Nt.getComponent();return(s==null?void 0:s.type)==="VERSION"}const name$o="@firebase/app",version$1$1="0.9.29";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const logger$1=new Logger("@firebase/app"),name$n="@firebase/app-compat",name$m="@firebase/analytics-compat",name$l="@firebase/analytics",name$k="@firebase/app-check-compat",name$j="@firebase/app-check",name$i="@firebase/auth",name$h="@firebase/auth-compat",name$g="@firebase/database",name$f="@firebase/database-compat",name$e="@firebase/functions",name$d="@firebase/functions-compat",name$c="@firebase/installations",name$b="@firebase/installations-compat",name$a="@firebase/messaging",name$9="@firebase/messaging-compat",name$8="@firebase/performance",name$7="@firebase/performance-compat",name$6="@firebase/remote-config",name$5="@firebase/remote-config-compat",name$4="@firebase/storage",name$3="@firebase/storage-compat",name$2$1="@firebase/firestore",name$1$1="@firebase/firestore-compat",name$p="firebase",version$4="10.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DEFAULT_ENTRY_NAME="[DEFAULT]",PLATFORM_LOG_STRING={[name$o]:"fire-core",[name$n]:"fire-core-compat",[name$l]:"fire-analytics",[name$m]:"fire-analytics-compat",[name$j]:"fire-app-check",[name$k]:"fire-app-check-compat",[name$i]:"fire-auth",[name$h]:"fire-auth-compat",[name$g]:"fire-rtdb",[name$f]:"fire-rtdb-compat",[name$e]:"fire-fn",[name$d]:"fire-fn-compat",[name$c]:"fire-iid",[name$b]:"fire-iid-compat",[name$a]:"fire-fcm",[name$9]:"fire-fcm-compat",[name$8]:"fire-perf",[name$7]:"fire-perf-compat",[name$6]:"fire-rc",[name$5]:"fire-rc-compat",[name$4]:"fire-gcs",[name$3]:"fire-gcs-compat",[name$2$1]:"fire-fst",[name$1$1]:"fire-fst-compat","fire-js":"fire-js",[name$p]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _apps=new Map,_components=new Map;function _addComponent(Nt,s){try{Nt.container.addComponent(s)}catch(Ot){logger$1.debug(`Component ${s.name} failed to register with FirebaseApp ${Nt.name}`,Ot)}}function _registerComponent(Nt){const s=Nt.name;if(_components.has(s))return logger$1.debug(`There were multiple attempts to register component ${s}.`),!1;_components.set(s,Nt);for(const Ot of _apps.values())_addComponent(Ot,Nt);return!0}function _getProvider(Nt,s){const Ot=Nt.container.getProvider("heartbeat").getImmediate({optional:!0});return Ot&&Ot.triggerHeartbeat(),Nt.container.getProvider(s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ERRORS={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},ERROR_FACTORY=new ErrorFactory$1("app","Firebase",ERRORS);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FirebaseAppImpl{constructor(s,Ot,en){this._isDeleted=!1,this._options=Object.assign({},s),this._config=Object.assign({},Ot),this._name=Ot.name,this._automaticDataCollectionEnabled=Ot.automaticDataCollectionEnabled,this._container=en,this.container.addComponent(new Component$1("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(s){this.checkDestroyed(),this._automaticDataCollectionEnabled=s}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(s){this._isDeleted=s}checkDestroyed(){if(this.isDeleted)throw ERROR_FACTORY.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SDK_VERSION$1=version$4;function initializeApp(Nt,s={}){let Ot=Nt;typeof s!="object"&&(s={name:s});const en=Object.assign({name:DEFAULT_ENTRY_NAME,automaticDataCollectionEnabled:!1},s),tn=en.name;if(typeof tn!="string"||!tn)throw ERROR_FACTORY.create("bad-app-name",{appName:String(tn)});if(Ot||(Ot=getDefaultAppConfig()),!Ot)throw ERROR_FACTORY.create("no-options");const nn=_apps.get(tn);if(nn){if(deepEqual(Ot,nn.options)&&deepEqual(en,nn.config))return nn;throw ERROR_FACTORY.create("duplicate-app",{appName:tn})}const rn=new ComponentContainer(tn);for(const sn of _components.values())rn.addComponent(sn);const on=new FirebaseAppImpl(Ot,en,rn);return _apps.set(tn,on),on}function getApp(Nt=DEFAULT_ENTRY_NAME){const s=_apps.get(Nt);if(!s&&Nt===DEFAULT_ENTRY_NAME&&getDefaultAppConfig())return initializeApp();if(!s)throw ERROR_FACTORY.create("no-app",{appName:Nt});return s}function registerVersion(Nt,s,Ot){var en;let tn=(en=PLATFORM_LOG_STRING[Nt])!==null&&en!==void 0?en:Nt;Ot&&(tn+=`-${Ot}`);const nn=tn.match(/\s|\//),rn=s.match(/\s|\//);if(nn||rn){const on=[`Unable to register library "${tn}" with version "${s}":`];nn&&on.push(`library name "${tn}" contains illegal characters (whitespace or "/")`),nn&&rn&&on.push("and"),rn&&on.push(`version name "${s}" contains illegal characters (whitespace or "/")`),logger$1.warn(on.join(" "));return}_registerComponent(new Component$1(`${tn}-version`,()=>({library:tn,version:s}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DB_NAME$1="firebase-heartbeat-database",DB_VERSION$1=1,STORE_NAME="firebase-heartbeat-store";let dbPromise=null;function getDbPromise(){return dbPromise||(dbPromise=openDB(DB_NAME$1,DB_VERSION$1,{upgrade:(Nt,s)=>{switch(s){case 0:try{Nt.createObjectStore(STORE_NAME)}catch(Ot){console.warn(Ot)}}}}).catch(Nt=>{throw ERROR_FACTORY.create("idb-open",{originalErrorMessage:Nt.message})})),dbPromise}async function readHeartbeatsFromIndexedDB(Nt){try{const Ot=(await getDbPromise()).transaction(STORE_NAME),en=await Ot.objectStore(STORE_NAME).get(computeKey(Nt));return await Ot.done,en}catch(s){if(s instanceof FirebaseError$1)logger$1.warn(s.message);else{const Ot=ERROR_FACTORY.create("idb-get",{originalErrorMessage:s==null?void 0:s.message});logger$1.warn(Ot.message)}}}async function writeHeartbeatsToIndexedDB(Nt,s){try{const en=(await getDbPromise()).transaction(STORE_NAME,"readwrite");await en.objectStore(STORE_NAME).put(s,computeKey(Nt)),await en.done}catch(Ot){if(Ot instanceof FirebaseError$1)logger$1.warn(Ot.message);else{const en=ERROR_FACTORY.create("idb-set",{originalErrorMessage:Ot==null?void 0:Ot.message});logger$1.warn(en.message)}}}function computeKey(Nt){return`${Nt.name}!${Nt.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MAX_HEADER_BYTES=1024,STORED_HEARTBEAT_RETENTION_MAX_MILLIS=30*24*60*60*1e3;class HeartbeatServiceImpl{constructor(s){this.container=s,this._heartbeatsCache=null;const Ot=this.container.getProvider("app").getImmediate();this._storage=new HeartbeatStorageImpl(Ot),this._heartbeatsCachePromise=this._storage.read().then(en=>(this._heartbeatsCache=en,en))}async triggerHeartbeat(){var s,Ot;const tn=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),nn=getUTCDateString();if(!(((s=this._heartbeatsCache)===null||s===void 0?void 0:s.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((Ot=this._heartbeatsCache)===null||Ot===void 0?void 0:Ot.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===nn||this._heartbeatsCache.heartbeats.some(rn=>rn.date===nn)))return this._heartbeatsCache.heartbeats.push({date:nn,agent:tn}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(rn=>{const on=new Date(rn.date).valueOf();return Date.now()-on<=STORED_HEARTBEAT_RETENTION_MAX_MILLIS}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var s;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((s=this._heartbeatsCache)===null||s===void 0?void 0:s.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const Ot=getUTCDateString(),{heartbeatsToSend:en,unsentEntries:tn}=extractHeartbeatsForHeader(this._heartbeatsCache.heartbeats),nn=base64urlEncodeWithoutPadding$1(JSON.stringify({version:2,heartbeats:en}));return this._heartbeatsCache.lastSentHeartbeatDate=Ot,tn.length>0?(this._heartbeatsCache.heartbeats=tn,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),nn}}function getUTCDateString(){return new Date().toISOString().substring(0,10)}function extractHeartbeatsForHeader(Nt,s=MAX_HEADER_BYTES){const Ot=[];let en=Nt.slice();for(const tn of Nt){const nn=Ot.find(rn=>rn.agent===tn.agent);if(nn){if(nn.dates.push(tn.date),countBytes(Ot)>s){nn.dates.pop();break}}else if(Ot.push({agent:tn.agent,dates:[tn.date]}),countBytes(Ot)>s){Ot.pop();break}en=en.slice(1)}return{heartbeatsToSend:Ot,unsentEntries:en}}class HeartbeatStorageImpl{constructor(s){this.app=s,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return isIndexedDBAvailable()?validateIndexedDBOpenable().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const Ot=await readHeartbeatsFromIndexedDB(this.app);return Ot!=null&&Ot.heartbeats?Ot:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(s){var Ot;if(await this._canUseIndexedDBPromise){const tn=await this.read();return writeHeartbeatsToIndexedDB(this.app,{lastSentHeartbeatDate:(Ot=s.lastSentHeartbeatDate)!==null&&Ot!==void 0?Ot:tn.lastSentHeartbeatDate,heartbeats:s.heartbeats})}else return}async add(s){var Ot;if(await this._canUseIndexedDBPromise){const tn=await this.read();return writeHeartbeatsToIndexedDB(this.app,{lastSentHeartbeatDate:(Ot=s.lastSentHeartbeatDate)!==null&&Ot!==void 0?Ot:tn.lastSentHeartbeatDate,heartbeats:[...tn.heartbeats,...s.heartbeats]})}else return}}function countBytes(Nt){return base64urlEncodeWithoutPadding$1(JSON.stringify({version:2,heartbeats:Nt})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function registerCoreComponents(Nt){_registerComponent(new Component$1("platform-logger",s=>new PlatformLoggerServiceImpl(s),"PRIVATE")),_registerComponent(new Component$1("heartbeat",s=>new HeartbeatServiceImpl(s),"PRIVATE")),registerVersion(name$o,version$1$1,Nt),registerVersion(name$o,version$1$1,"esm2017"),registerVersion("fire-js","")}registerCoreComponents("");var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},k$3,goog=goog||{},l$1=commonjsGlobal||self;function aa(Nt){var s=typeof Nt;return s=s!="object"?s:Nt?Array.isArray(Nt)?"array":s:"null",s=="array"||s=="object"&&typeof Nt.length=="number"}function p$1(Nt){var s=typeof Nt;return s=="object"&&Nt!=null||s=="function"}function ba(Nt){return Object.prototype.hasOwnProperty.call(Nt,ca)&&Nt[ca]||(Nt[ca]=++da)}var ca="closure_uid_"+(1e9*Math.random()>>>0),da=0;function ea(Nt,s,Ot){return Nt.call.apply(Nt.bind,arguments)}function fa(Nt,s,Ot){if(!Nt)throw Error();if(2<arguments.length){var en=Array.prototype.slice.call(arguments,2);return function(){var tn=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(tn,en),Nt.apply(s,tn)}}return function(){return Nt.apply(s,arguments)}}function q$1(Nt,s,Ot){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?q$1=ea:q$1=fa,q$1.apply(null,arguments)}function ha(Nt,s){var Ot=Array.prototype.slice.call(arguments,1);return function(){var en=Ot.slice();return en.push.apply(en,arguments),Nt.apply(this,en)}}function r$2(Nt,s){function Ot(){}Ot.prototype=s.prototype,Nt.$=s.prototype,Nt.prototype=new Ot,Nt.prototype.constructor=Nt,Nt.ac=function(en,tn,nn){for(var rn=Array(arguments.length-2),on=2;on<arguments.length;on++)rn[on-2]=arguments[on];return s.prototype[tn].apply(en,rn)}}function v$2(){this.s=this.s,this.o=this.o}var ia=0;v$2.prototype.s=!1;v$2.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),ia!=0)&&ba(this)};v$2.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const ka=Array.prototype.indexOf?function(Nt,s){return Array.prototype.indexOf.call(Nt,s,void 0)}:function(Nt,s){if(typeof Nt=="string")return typeof s!="string"||s.length!=1?-1:Nt.indexOf(s,0);for(let Ot=0;Ot<Nt.length;Ot++)if(Ot in Nt&&Nt[Ot]===s)return Ot;return-1};function ma(Nt){const s=Nt.length;if(0<s){const Ot=Array(s);for(let en=0;en<s;en++)Ot[en]=Nt[en];return Ot}return[]}function na(Nt,s){for(let Ot=1;Ot<arguments.length;Ot++){const en=arguments[Ot];if(aa(en)){const tn=Nt.length||0,nn=en.length||0;Nt.length=tn+nn;for(let rn=0;rn<nn;rn++)Nt[tn+rn]=en[rn]}else Nt.push(en)}}function w$2(Nt,s){this.type=Nt,this.g=this.target=s,this.defaultPrevented=!1}w$2.prototype.h=function(){this.defaultPrevented=!0};var oa=function(){if(!l$1.addEventListener||!Object.defineProperty)return!1;var Nt=!1,s=Object.defineProperty({},"passive",{get:function(){Nt=!0}});try{const Ot=()=>{};l$1.addEventListener("test",Ot,s),l$1.removeEventListener("test",Ot,s)}catch{}return Nt}();function x$2(Nt){return/^[\s\xa0]*$/.test(Nt)}function pa(){var Nt=l$1.navigator;return Nt&&(Nt=Nt.userAgent)?Nt:""}function y$2(Nt){return pa().indexOf(Nt)!=-1}function qa(Nt){return qa[" "](Nt),Nt}qa[" "]=function(){};function ra(Nt,s){var Ot=sa;return Object.prototype.hasOwnProperty.call(Ot,Nt)?Ot[Nt]:Ot[Nt]=s(Nt)}var ta=y$2("Opera"),z$1=y$2("Trident")||y$2("MSIE"),ua=y$2("Edge"),va=ua||z$1,wa=y$2("Gecko")&&!(pa().toLowerCase().indexOf("webkit")!=-1&&!y$2("Edge"))&&!(y$2("Trident")||y$2("MSIE"))&&!y$2("Edge"),xa=pa().toLowerCase().indexOf("webkit")!=-1&&!y$2("Edge");function ya(){var Nt=l$1.document;return Nt?Nt.documentMode:void 0}var za;e:{var Aa="",Ba=function(){var Nt=pa();if(wa)return/rv:([^\);]+)(\)|;)/.exec(Nt);if(ua)return/Edge\/([\d\.]+)/.exec(Nt);if(z$1)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Nt);if(xa)return/WebKit\/(\S+)/.exec(Nt);if(ta)return/(?:Version)[ \/]?(\S+)/.exec(Nt)}();if(Ba&&(Aa=Ba?Ba[1]:""),z$1){var Ca=ya();if(Ca!=null&&Ca>parseFloat(Aa)){za=String(Ca);break e}}za=Aa}var Da;if(l$1.document&&z$1){var Ea=ya();Da=Ea||parseInt(za,10)||void 0}else Da=void 0;var Fa=Da;function A$1(Nt,s){if(w$2.call(this,Nt?Nt.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,Nt){var Ot=this.type=Nt.type,en=Nt.changedTouches&&Nt.changedTouches.length?Nt.changedTouches[0]:null;if(this.target=Nt.target||Nt.srcElement,this.g=s,s=Nt.relatedTarget){if(wa){e:{try{qa(s.nodeName);var tn=!0;break e}catch{}tn=!1}tn||(s=null)}}else Ot=="mouseover"?s=Nt.fromElement:Ot=="mouseout"&&(s=Nt.toElement);this.relatedTarget=s,en?(this.clientX=en.clientX!==void 0?en.clientX:en.pageX,this.clientY=en.clientY!==void 0?en.clientY:en.pageY,this.screenX=en.screenX||0,this.screenY=en.screenY||0):(this.clientX=Nt.clientX!==void 0?Nt.clientX:Nt.pageX,this.clientY=Nt.clientY!==void 0?Nt.clientY:Nt.pageY,this.screenX=Nt.screenX||0,this.screenY=Nt.screenY||0),this.button=Nt.button,this.key=Nt.key||"",this.ctrlKey=Nt.ctrlKey,this.altKey=Nt.altKey,this.shiftKey=Nt.shiftKey,this.metaKey=Nt.metaKey,this.pointerId=Nt.pointerId||0,this.pointerType=typeof Nt.pointerType=="string"?Nt.pointerType:Ga[Nt.pointerType]||"",this.state=Nt.state,this.i=Nt,Nt.defaultPrevented&&A$1.$.h.call(this)}}r$2(A$1,w$2);var Ga={2:"touch",3:"pen",4:"mouse"};A$1.prototype.h=function(){A$1.$.h.call(this);var Nt=this.i;Nt.preventDefault?Nt.preventDefault():Nt.returnValue=!1};var Ha="closure_listenable_"+(1e6*Math.random()|0),Ia=0;function Ja(Nt,s,Ot,en,tn){this.listener=Nt,this.proxy=null,this.src=s,this.type=Ot,this.capture=!!en,this.la=tn,this.key=++Ia,this.fa=this.ia=!1}function Ma(Nt){Nt.fa=!0,Nt.listener=null,Nt.proxy=null,Nt.src=null,Nt.la=null}function Na(Nt,s,Ot){for(const en in Nt)s.call(Ot,Nt[en],en,Nt)}function Oa(Nt,s){for(const Ot in Nt)s.call(void 0,Nt[Ot],Ot,Nt)}function Pa(Nt){const s={};for(const Ot in Nt)s[Ot]=Nt[Ot];return s}const Qa="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ra(Nt,s){let Ot,en;for(let tn=1;tn<arguments.length;tn++){en=arguments[tn];for(Ot in en)Nt[Ot]=en[Ot];for(let nn=0;nn<Qa.length;nn++)Ot=Qa[nn],Object.prototype.hasOwnProperty.call(en,Ot)&&(Nt[Ot]=en[Ot])}}function Sa(Nt){this.src=Nt,this.g={},this.h=0}Sa.prototype.add=function(Nt,s,Ot,en,tn){var nn=Nt.toString();Nt=this.g[nn],Nt||(Nt=this.g[nn]=[],this.h++);var rn=Ta(Nt,s,en,tn);return-1<rn?(s=Nt[rn],Ot||(s.ia=!1)):(s=new Ja(s,this.src,nn,!!en,tn),s.ia=Ot,Nt.push(s)),s};function Ua(Nt,s){var Ot=s.type;if(Ot in Nt.g){var en=Nt.g[Ot],tn=ka(en,s),nn;(nn=0<=tn)&&Array.prototype.splice.call(en,tn,1),nn&&(Ma(s),Nt.g[Ot].length==0&&(delete Nt.g[Ot],Nt.h--))}}function Ta(Nt,s,Ot,en){for(var tn=0;tn<Nt.length;++tn){var nn=Nt[tn];if(!nn.fa&&nn.listener==s&&nn.capture==!!Ot&&nn.la==en)return tn}return-1}var Va="closure_lm_"+(1e6*Math.random()|0),Wa={};function Ya(Nt,s,Ot,en,tn){if(en&&en.once)return Za(Nt,s,Ot,en,tn);if(Array.isArray(s)){for(var nn=0;nn<s.length;nn++)Ya(Nt,s[nn],Ot,en,tn);return null}return Ot=$a(Ot),Nt&&Nt[Ha]?Nt.O(s,Ot,p$1(en)?!!en.capture:!!en,tn):ab(Nt,s,Ot,!1,en,tn)}function ab(Nt,s,Ot,en,tn,nn){if(!s)throw Error("Invalid event type");var rn=p$1(tn)?!!tn.capture:!!tn,on=bb(Nt);if(on||(Nt[Va]=on=new Sa(Nt)),Ot=on.add(s,Ot,en,rn,nn),Ot.proxy)return Ot;if(en=cb(),Ot.proxy=en,en.src=Nt,en.listener=Ot,Nt.addEventListener)oa||(tn=rn),tn===void 0&&(tn=!1),Nt.addEventListener(s.toString(),en,tn);else if(Nt.attachEvent)Nt.attachEvent(db$1(s.toString()),en);else if(Nt.addListener&&Nt.removeListener)Nt.addListener(en);else throw Error("addEventListener and attachEvent are unavailable.");return Ot}function cb(){function Nt(Ot){return s.call(Nt.src,Nt.listener,Ot)}const s=eb;return Nt}function Za(Nt,s,Ot,en,tn){if(Array.isArray(s)){for(var nn=0;nn<s.length;nn++)Za(Nt,s[nn],Ot,en,tn);return null}return Ot=$a(Ot),Nt&&Nt[Ha]?Nt.P(s,Ot,p$1(en)?!!en.capture:!!en,tn):ab(Nt,s,Ot,!0,en,tn)}function fb(Nt,s,Ot,en,tn){if(Array.isArray(s))for(var nn=0;nn<s.length;nn++)fb(Nt,s[nn],Ot,en,tn);else en=p$1(en)?!!en.capture:!!en,Ot=$a(Ot),Nt&&Nt[Ha]?(Nt=Nt.i,s=String(s).toString(),s in Nt.g&&(nn=Nt.g[s],Ot=Ta(nn,Ot,en,tn),-1<Ot&&(Ma(nn[Ot]),Array.prototype.splice.call(nn,Ot,1),nn.length==0&&(delete Nt.g[s],Nt.h--)))):Nt&&(Nt=bb(Nt))&&(s=Nt.g[s.toString()],Nt=-1,s&&(Nt=Ta(s,Ot,en,tn)),(Ot=-1<Nt?s[Nt]:null)&&gb(Ot))}function gb(Nt){if(typeof Nt!="number"&&Nt&&!Nt.fa){var s=Nt.src;if(s&&s[Ha])Ua(s.i,Nt);else{var Ot=Nt.type,en=Nt.proxy;s.removeEventListener?s.removeEventListener(Ot,en,Nt.capture):s.detachEvent?s.detachEvent(db$1(Ot),en):s.addListener&&s.removeListener&&s.removeListener(en),(Ot=bb(s))?(Ua(Ot,Nt),Ot.h==0&&(Ot.src=null,s[Va]=null)):Ma(Nt)}}}function db$1(Nt){return Nt in Wa?Wa[Nt]:Wa[Nt]="on"+Nt}function eb(Nt,s){if(Nt.fa)Nt=!0;else{s=new A$1(s,this);var Ot=Nt.listener,en=Nt.la||Nt.src;Nt.ia&&gb(Nt),Nt=Ot.call(en,s)}return Nt}function bb(Nt){return Nt=Nt[Va],Nt instanceof Sa?Nt:null}var hb="__closure_events_fn_"+(1e9*Math.random()>>>0);function $a(Nt){return typeof Nt=="function"?Nt:(Nt[hb]||(Nt[hb]=function(s){return Nt.handleEvent(s)}),Nt[hb])}function B$1(){v$2.call(this),this.i=new Sa(this),this.S=this,this.J=null}r$2(B$1,v$2);B$1.prototype[Ha]=!0;B$1.prototype.removeEventListener=function(Nt,s,Ot,en){fb(this,Nt,s,Ot,en)};function C$3(Nt,s){var Ot,en=Nt.J;if(en)for(Ot=[];en;en=en.J)Ot.push(en);if(Nt=Nt.S,en=s.type||s,typeof s=="string")s=new w$2(s,Nt);else if(s instanceof w$2)s.target=s.target||Nt;else{var tn=s;s=new w$2(en,Nt),Ra(s,tn)}if(tn=!0,Ot)for(var nn=Ot.length-1;0<=nn;nn--){var rn=s.g=Ot[nn];tn=ib(rn,en,!0,s)&&tn}if(rn=s.g=Nt,tn=ib(rn,en,!0,s)&&tn,tn=ib(rn,en,!1,s)&&tn,Ot)for(nn=0;nn<Ot.length;nn++)rn=s.g=Ot[nn],tn=ib(rn,en,!1,s)&&tn}B$1.prototype.N=function(){if(B$1.$.N.call(this),this.i){var Nt=this.i,s;for(s in Nt.g){for(var Ot=Nt.g[s],en=0;en<Ot.length;en++)Ma(Ot[en]);delete Nt.g[s],Nt.h--}}this.J=null};B$1.prototype.O=function(Nt,s,Ot,en){return this.i.add(String(Nt),s,!1,Ot,en)};B$1.prototype.P=function(Nt,s,Ot,en){return this.i.add(String(Nt),s,!0,Ot,en)};function ib(Nt,s,Ot,en){if(s=Nt.i.g[String(s)],!s)return!0;s=s.concat();for(var tn=!0,nn=0;nn<s.length;++nn){var rn=s[nn];if(rn&&!rn.fa&&rn.capture==Ot){var on=rn.listener,sn=rn.la||rn.src;rn.ia&&Ua(Nt.i,rn),tn=on.call(sn,en)!==!1&&tn}}return tn&&!en.defaultPrevented}var jb=l$1.JSON.stringify;class kb{constructor(s,Ot){this.i=s,this.j=Ot,this.h=0,this.g=null}get(){let s;return 0<this.h?(this.h--,s=this.g,this.g=s.next,s.next=null):s=this.i(),s}}function lb(){var Nt=mb;let s=null;return Nt.g&&(s=Nt.g,Nt.g=Nt.g.next,Nt.g||(Nt.h=null),s.next=null),s}class nb{constructor(){this.h=this.g=null}add(s,Ot){const en=ob.get();en.set(s,Ot),this.h?this.h.next=en:this.g=en,this.h=en}}var ob=new kb(()=>new pb,Nt=>Nt.reset());class pb{constructor(){this.next=this.g=this.h=null}set(s,Ot){this.h=s,this.g=Ot,this.next=null}reset(){this.next=this.g=this.h=null}}function qb(Nt){var s=1;Nt=Nt.split(":");const Ot=[];for(;0<s&&Nt.length;)Ot.push(Nt.shift()),s--;return Nt.length&&Ot.push(Nt.join(":")),Ot}function rb(Nt){l$1.setTimeout(()=>{throw Nt},0)}let sb,tb=!1,mb=new nb,vb=()=>{const Nt=l$1.Promise.resolve(void 0);sb=()=>{Nt.then(ub)}};var ub=()=>{for(var Nt;Nt=lb();){try{Nt.h.call(Nt.g)}catch(Ot){rb(Ot)}var s=ob;s.j(Nt),100>s.h&&(s.h++,Nt.next=s.g,s.g=Nt)}tb=!1};function wb(Nt,s){B$1.call(this),this.h=Nt||1,this.g=s||l$1,this.j=q$1(this.qb,this),this.l=Date.now()}r$2(wb,B$1);k$3=wb.prototype;k$3.ga=!1;k$3.T=null;k$3.qb=function(){if(this.ga){var Nt=Date.now()-this.l;0<Nt&&Nt<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-Nt):(this.T&&(this.g.clearTimeout(this.T),this.T=null),C$3(this,"tick"),this.ga&&(xb(this),this.start()))}};k$3.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function xb(Nt){Nt.ga=!1,Nt.T&&(Nt.g.clearTimeout(Nt.T),Nt.T=null)}k$3.N=function(){wb.$.N.call(this),xb(this),delete this.g};function yb(Nt,s,Ot){if(typeof Nt=="function")Ot&&(Nt=q$1(Nt,Ot));else if(Nt&&typeof Nt.handleEvent=="function")Nt=q$1(Nt.handleEvent,Nt);else throw Error("Invalid listener argument");return 2147483647<Number(s)?-1:l$1.setTimeout(Nt,s||0)}function zb(Nt){Nt.g=yb(()=>{Nt.g=null,Nt.i&&(Nt.i=!1,zb(Nt))},Nt.j);const s=Nt.h;Nt.h=null,Nt.m.apply(null,s)}class Ab extends v$2{constructor(s,Ot){super(),this.m=s,this.j=Ot,this.h=null,this.i=!1,this.g=null}l(s){this.h=arguments,this.g?this.i=!0:zb(this)}N(){super.N(),this.g&&(l$1.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Bb(Nt){v$2.call(this),this.h=Nt,this.g={}}r$2(Bb,v$2);var Cb=[];function Eb(Nt,s,Ot,en){Array.isArray(Ot)||(Ot&&(Cb[0]=Ot.toString()),Ot=Cb);for(var tn=0;tn<Ot.length;tn++){var nn=Ya(s,Ot[tn],en||Nt.handleEvent,!1,Nt.h||Nt);if(!nn)break;Nt.g[nn.key]=nn}}function Fb(Nt){Na(Nt.g,function(s,Ot){this.g.hasOwnProperty(Ot)&&gb(s)},Nt),Nt.g={}}Bb.prototype.N=function(){Bb.$.N.call(this),Fb(this)};Bb.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Gb(){this.g=!0}Gb.prototype.Ea=function(){this.g=!1};function Hb(Nt,s,Ot,en,tn,nn){Nt.info(function(){if(Nt.g)if(nn)for(var rn="",on=nn.split("&"),sn=0;sn<on.length;sn++){var an=on[sn].split("=");if(1<an.length){var ln=an[0];an=an[1];var cn=ln.split("_");rn=2<=cn.length&&cn[1]=="type"?rn+(ln+"="+an+"&"):rn+(ln+"=redacted&")}}else rn=null;else rn=nn;return"XMLHTTP REQ ("+en+") [attempt "+tn+"]: "+s+`
`+Ot+`
`+rn})}function Ib(Nt,s,Ot,en,tn,nn,rn){Nt.info(function(){return"XMLHTTP RESP ("+en+") [ attempt "+tn+"]: "+s+`
`+Ot+`
`+nn+" "+rn})}function D$3(Nt,s,Ot,en){Nt.info(function(){return"XMLHTTP TEXT ("+s+"): "+Jb(Nt,Ot)+(en?" "+en:"")})}function Kb(Nt,s){Nt.info(function(){return"TIMEOUT: "+s})}Gb.prototype.info=function(){};function Jb(Nt,s){if(!Nt.g)return s;if(!s)return null;try{var Ot=JSON.parse(s);if(Ot){for(Nt=0;Nt<Ot.length;Nt++)if(Array.isArray(Ot[Nt])){var en=Ot[Nt];if(!(2>en.length)){var tn=en[1];if(Array.isArray(tn)&&!(1>tn.length)){var nn=tn[0];if(nn!="noop"&&nn!="stop"&&nn!="close")for(var rn=1;rn<tn.length;rn++)tn[rn]=""}}}}return jb(Ot)}catch{return s}}var E={},Lb=null;function Mb(){return Lb=Lb||new B$1}E.Ta="serverreachability";function Nb(Nt){w$2.call(this,E.Ta,Nt)}r$2(Nb,w$2);function Ob(Nt){const s=Mb();C$3(s,new Nb(s))}E.STAT_EVENT="statevent";function Pb(Nt,s){w$2.call(this,E.STAT_EVENT,Nt),this.stat=s}r$2(Pb,w$2);function F$3(Nt){const s=Mb();C$3(s,new Pb(s,Nt))}E.Ua="timingevent";function Qb(Nt,s){w$2.call(this,E.Ua,Nt),this.size=s}r$2(Qb,w$2);function Rb(Nt,s){if(typeof Nt!="function")throw Error("Fn must not be null and must be a function");return l$1.setTimeout(function(){Nt()},s)}var Sb={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Tb={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Ub(){}Ub.prototype.h=null;function Vb(Nt){return Nt.h||(Nt.h=Nt.i())}function Wb(){}var Xb={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Yb(){w$2.call(this,"d")}r$2(Yb,w$2);function Zb(){w$2.call(this,"c")}r$2(Zb,w$2);var $b;function ac(){}r$2(ac,Ub);ac.prototype.g=function(){return new XMLHttpRequest};ac.prototype.i=function(){return{}};$b=new ac;function bc(Nt,s,Ot,en){this.l=Nt,this.j=s,this.m=Ot,this.W=en||1,this.U=new Bb(this),this.P=cc,Nt=va?125:void 0,this.V=new wb(Nt),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new dc}function dc(){this.i=null,this.g="",this.h=!1}var cc=45e3,ec={},fc={};k$3=bc.prototype;k$3.setTimeout=function(Nt){this.P=Nt};function gc(Nt,s,Ot){Nt.L=1,Nt.A=hc(G$1(s)),Nt.u=Ot,Nt.S=!0,ic(Nt,null)}function ic(Nt,s){Nt.G=Date.now(),jc(Nt),Nt.B=G$1(Nt.A);var Ot=Nt.B,en=Nt.W;Array.isArray(en)||(en=[String(en)]),kc(Ot.i,"t",en),Nt.o=0,Ot=Nt.l.J,Nt.h=new dc,Nt.g=lc(Nt.l,Ot?s:null,!Nt.u),0<Nt.O&&(Nt.M=new Ab(q$1(Nt.Pa,Nt,Nt.g),Nt.O)),Eb(Nt.U,Nt.g,"readystatechange",Nt.nb),s=Nt.I?Pa(Nt.I):{},Nt.u?(Nt.v||(Nt.v="POST"),s["Content-Type"]="application/x-www-form-urlencoded",Nt.g.ha(Nt.B,Nt.v,Nt.u,s)):(Nt.v="GET",Nt.g.ha(Nt.B,Nt.v,null,s)),Ob(),Hb(Nt.j,Nt.v,Nt.B,Nt.m,Nt.W,Nt.u)}k$3.nb=function(Nt){Nt=Nt.target;const s=this.M;s&&H$2(Nt)==3?s.l():this.Pa(Nt)};k$3.Pa=function(Nt){try{if(Nt==this.g)e:{const ln=H$2(this.g);var s=this.g.Ia();const cn=this.g.da();if(!(3>ln)&&(ln!=3||va||this.g&&(this.h.h||this.g.ja()||mc(this.g)))){this.J||ln!=4||s==7||(s==8||0>=cn?Ob(3):Ob(2)),nc(this);var Ot=this.g.da();this.ca=Ot;t:if(oc(this)){var en=mc(this.g);Nt="";var tn=en.length,nn=H$2(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){I$2(this),pc(this);var rn="";break t}this.h.i=new l$1.TextDecoder}for(s=0;s<tn;s++)this.h.h=!0,Nt+=this.h.i.decode(en[s],{stream:nn&&s==tn-1});en.length=0,this.h.g+=Nt,this.o=0,rn=this.h.g}else rn=this.g.ja();if(this.i=Ot==200,Ib(this.j,this.v,this.B,this.m,this.W,ln,Ot),this.i){if(this.aa&&!this.K){t:{if(this.g){var on,sn=this.g;if((on=sn.g?sn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!x$2(on)){var an=on;break t}}an=null}if(Ot=an)D$3(this.j,this.m,Ot,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,qc(this,Ot);else{this.i=!1,this.s=3,F$3(12),I$2(this),pc(this);break e}}this.S?(rc(this,ln,rn),va&&this.i&&ln==3&&(Eb(this.U,this.V,"tick",this.mb),this.V.start())):(D$3(this.j,this.m,rn,null),qc(this,rn)),ln==4&&I$2(this),this.i&&!this.J&&(ln==4?sc(this.l,this):(this.i=!1,jc(this)))}else tc(this.g),Ot==400&&0<rn.indexOf("Unknown SID")?(this.s=3,F$3(12)):(this.s=0,F$3(13)),I$2(this),pc(this)}}}catch{}finally{}};function oc(Nt){return Nt.g?Nt.v=="GET"&&Nt.L!=2&&Nt.l.Ha:!1}function rc(Nt,s,Ot){let en=!0,tn;for(;!Nt.J&&Nt.o<Ot.length;)if(tn=uc(Nt,Ot),tn==fc){s==4&&(Nt.s=4,F$3(14),en=!1),D$3(Nt.j,Nt.m,null,"[Incomplete Response]");break}else if(tn==ec){Nt.s=4,F$3(15),D$3(Nt.j,Nt.m,Ot,"[Invalid Chunk]"),en=!1;break}else D$3(Nt.j,Nt.m,tn,null),qc(Nt,tn);oc(Nt)&&Nt.o!=0&&(Nt.h.g=Nt.h.g.slice(Nt.o),Nt.o=0),s!=4||Ot.length!=0||Nt.h.h||(Nt.s=1,F$3(16),en=!1),Nt.i=Nt.i&&en,en?0<Ot.length&&!Nt.ba&&(Nt.ba=!0,s=Nt.l,s.g==Nt&&s.ca&&!s.M&&(s.l.info("Great, no buffering proxy detected. Bytes received: "+Ot.length),vc(s),s.M=!0,F$3(11))):(D$3(Nt.j,Nt.m,Ot,"[Invalid Chunked Response]"),I$2(Nt),pc(Nt))}k$3.mb=function(){if(this.g){var Nt=H$2(this.g),s=this.g.ja();this.o<s.length&&(nc(this),rc(this,Nt,s),this.i&&Nt!=4&&jc(this))}};function uc(Nt,s){var Ot=Nt.o,en=s.indexOf(`
`,Ot);return en==-1?fc:(Ot=Number(s.substring(Ot,en)),isNaN(Ot)?ec:(en+=1,en+Ot>s.length?fc:(s=s.slice(en,en+Ot),Nt.o=en+Ot,s)))}k$3.cancel=function(){this.J=!0,I$2(this)};function jc(Nt){Nt.Y=Date.now()+Nt.P,wc(Nt,Nt.P)}function wc(Nt,s){if(Nt.C!=null)throw Error("WatchDog timer not null");Nt.C=Rb(q$1(Nt.lb,Nt),s)}function nc(Nt){Nt.C&&(l$1.clearTimeout(Nt.C),Nt.C=null)}k$3.lb=function(){this.C=null;const Nt=Date.now();0<=Nt-this.Y?(Kb(this.j,this.B),this.L!=2&&(Ob(),F$3(17)),I$2(this),this.s=2,pc(this)):wc(this,this.Y-Nt)};function pc(Nt){Nt.l.H==0||Nt.J||sc(Nt.l,Nt)}function I$2(Nt){nc(Nt);var s=Nt.M;s&&typeof s.sa=="function"&&s.sa(),Nt.M=null,xb(Nt.V),Fb(Nt.U),Nt.g&&(s=Nt.g,Nt.g=null,s.abort(),s.sa())}function qc(Nt,s){try{var Ot=Nt.l;if(Ot.H!=0&&(Ot.g==Nt||xc(Ot.i,Nt))){if(!Nt.K&&xc(Ot.i,Nt)&&Ot.H==3){try{var en=Ot.Ja.g.parse(s)}catch{en=null}if(Array.isArray(en)&&en.length==3){var tn=en;if(tn[0]==0){e:if(!Ot.u){if(Ot.g)if(Ot.g.G+3e3<Nt.G)yc(Ot),zc(Ot);else break e;Ac(Ot),F$3(18)}}else Ot.Fa=tn[1],0<Ot.Fa-Ot.V&&37500>tn[2]&&Ot.G&&Ot.A==0&&!Ot.v&&(Ot.v=Rb(q$1(Ot.ib,Ot),6e3));if(1>=Bc(Ot.i)&&Ot.oa){try{Ot.oa()}catch{}Ot.oa=void 0}}else J(Ot,11)}else if((Nt.K||Ot.g==Nt)&&yc(Ot),!x$2(s))for(tn=Ot.Ja.g.parse(s),s=0;s<tn.length;s++){let an=tn[s];if(Ot.V=an[0],an=an[1],Ot.H==2)if(an[0]=="c"){Ot.K=an[1],Ot.pa=an[2];const ln=an[3];ln!=null&&(Ot.ra=ln,Ot.l.info("VER="+Ot.ra));const cn=an[4];cn!=null&&(Ot.Ga=cn,Ot.l.info("SVER="+Ot.Ga));const un=an[5];un!=null&&typeof un=="number"&&0<un&&(en=1.5*un,Ot.L=en,Ot.l.info("backChannelRequestTimeoutMs_="+en)),en=Ot;const dn=Nt.g;if(dn){const hn=dn.g?dn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(hn){var nn=en.i;nn.g||hn.indexOf("spdy")==-1&&hn.indexOf("quic")==-1&&hn.indexOf("h2")==-1||(nn.j=nn.l,nn.g=new Set,nn.h&&(Cc(nn,nn.h),nn.h=null))}if(en.F){const fn=dn.g?dn.g.getResponseHeader("X-HTTP-Session-Id"):null;fn&&(en.Da=fn,K$1(en.I,en.F,fn))}}Ot.H=3,Ot.h&&Ot.h.Ba(),Ot.ca&&(Ot.S=Date.now()-Nt.G,Ot.l.info("Handshake RTT: "+Ot.S+"ms")),en=Ot;var rn=Nt;if(en.wa=Dc(en,en.J?en.pa:null,en.Y),rn.K){Ec(en.i,rn);var on=rn,sn=en.L;sn&&on.setTimeout(sn),on.C&&(nc(on),jc(on)),en.g=rn}else Fc(en);0<Ot.j.length&&Gc(Ot)}else an[0]!="stop"&&an[0]!="close"||J(Ot,7);else Ot.H==3&&(an[0]=="stop"||an[0]=="close"?an[0]=="stop"?J(Ot,7):Hc(Ot):an[0]!="noop"&&Ot.h&&Ot.h.Aa(an),Ot.A=0)}}Ob(4)}catch{}}function Ic(Nt){if(Nt.Z&&typeof Nt.Z=="function")return Nt.Z();if(typeof Map<"u"&&Nt instanceof Map||typeof Set<"u"&&Nt instanceof Set)return Array.from(Nt.values());if(typeof Nt=="string")return Nt.split("");if(aa(Nt)){for(var s=[],Ot=Nt.length,en=0;en<Ot;en++)s.push(Nt[en]);return s}s=[],Ot=0;for(en in Nt)s[Ot++]=Nt[en];return s}function Jc(Nt){if(Nt.ta&&typeof Nt.ta=="function")return Nt.ta();if(!Nt.Z||typeof Nt.Z!="function"){if(typeof Map<"u"&&Nt instanceof Map)return Array.from(Nt.keys());if(!(typeof Set<"u"&&Nt instanceof Set)){if(aa(Nt)||typeof Nt=="string"){var s=[];Nt=Nt.length;for(var Ot=0;Ot<Nt;Ot++)s.push(Ot);return s}s=[],Ot=0;for(const en in Nt)s[Ot++]=en;return s}}}function Kc(Nt,s){if(Nt.forEach&&typeof Nt.forEach=="function")Nt.forEach(s,void 0);else if(aa(Nt)||typeof Nt=="string")Array.prototype.forEach.call(Nt,s,void 0);else for(var Ot=Jc(Nt),en=Ic(Nt),tn=en.length,nn=0;nn<tn;nn++)s.call(void 0,en[nn],Ot&&Ot[nn],Nt)}var Lc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Mc(Nt,s){if(Nt){Nt=Nt.split("&");for(var Ot=0;Ot<Nt.length;Ot++){var en=Nt[Ot].indexOf("="),tn=null;if(0<=en){var nn=Nt[Ot].substring(0,en);tn=Nt[Ot].substring(en+1)}else nn=Nt[Ot];s(nn,tn?decodeURIComponent(tn.replace(/\+/g," ")):"")}}}function M$3(Nt){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,Nt instanceof M$3){this.h=Nt.h,Nc(this,Nt.j),this.s=Nt.s,this.g=Nt.g,Oc(this,Nt.m),this.l=Nt.l;var s=Nt.i,Ot=new Pc;Ot.i=s.i,s.g&&(Ot.g=new Map(s.g),Ot.h=s.h),Qc(this,Ot),this.o=Nt.o}else Nt&&(s=String(Nt).match(Lc))?(this.h=!1,Nc(this,s[1]||"",!0),this.s=Rc(s[2]||""),this.g=Rc(s[3]||"",!0),Oc(this,s[4]),this.l=Rc(s[5]||"",!0),Qc(this,s[6]||"",!0),this.o=Rc(s[7]||"")):(this.h=!1,this.i=new Pc(null,this.h))}M$3.prototype.toString=function(){var Nt=[],s=this.j;s&&Nt.push(Sc(s,Tc,!0),":");var Ot=this.g;return(Ot||s=="file")&&(Nt.push("//"),(s=this.s)&&Nt.push(Sc(s,Tc,!0),"@"),Nt.push(encodeURIComponent(String(Ot)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),Ot=this.m,Ot!=null&&Nt.push(":",String(Ot))),(Ot=this.l)&&(this.g&&Ot.charAt(0)!="/"&&Nt.push("/"),Nt.push(Sc(Ot,Ot.charAt(0)=="/"?Uc:Vc,!0))),(Ot=this.i.toString())&&Nt.push("?",Ot),(Ot=this.o)&&Nt.push("#",Sc(Ot,Wc)),Nt.join("")};function G$1(Nt){return new M$3(Nt)}function Nc(Nt,s,Ot){Nt.j=Ot?Rc(s,!0):s,Nt.j&&(Nt.j=Nt.j.replace(/:$/,""))}function Oc(Nt,s){if(s){if(s=Number(s),isNaN(s)||0>s)throw Error("Bad port number "+s);Nt.m=s}else Nt.m=null}function Qc(Nt,s,Ot){s instanceof Pc?(Nt.i=s,Xc(Nt.i,Nt.h)):(Ot||(s=Sc(s,Yc)),Nt.i=new Pc(s,Nt.h))}function K$1(Nt,s,Ot){Nt.i.set(s,Ot)}function hc(Nt){return K$1(Nt,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),Nt}function Rc(Nt,s){return Nt?s?decodeURI(Nt.replace(/%25/g,"%2525")):decodeURIComponent(Nt):""}function Sc(Nt,s,Ot){return typeof Nt=="string"?(Nt=encodeURI(Nt).replace(s,Zc),Ot&&(Nt=Nt.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),Nt):null}function Zc(Nt){return Nt=Nt.charCodeAt(0),"%"+(Nt>>4&15).toString(16)+(Nt&15).toString(16)}var Tc=/[#\/\?@]/g,Vc=/[#\?:]/g,Uc=/[#\?]/g,Yc=/[#\?@]/g,Wc=/#/g;function Pc(Nt,s){this.h=this.g=null,this.i=Nt||null,this.j=!!s}function N$1(Nt){Nt.g||(Nt.g=new Map,Nt.h=0,Nt.i&&Mc(Nt.i,function(s,Ot){Nt.add(decodeURIComponent(s.replace(/\+/g," ")),Ot)}))}k$3=Pc.prototype;k$3.add=function(Nt,s){N$1(this),this.i=null,Nt=O$1(this,Nt);var Ot=this.g.get(Nt);return Ot||this.g.set(Nt,Ot=[]),Ot.push(s),this.h+=1,this};function $c(Nt,s){N$1(Nt),s=O$1(Nt,s),Nt.g.has(s)&&(Nt.i=null,Nt.h-=Nt.g.get(s).length,Nt.g.delete(s))}function ad(Nt,s){return N$1(Nt),s=O$1(Nt,s),Nt.g.has(s)}k$3.forEach=function(Nt,s){N$1(this),this.g.forEach(function(Ot,en){Ot.forEach(function(tn){Nt.call(s,tn,en,this)},this)},this)};k$3.ta=function(){N$1(this);const Nt=Array.from(this.g.values()),s=Array.from(this.g.keys()),Ot=[];for(let en=0;en<s.length;en++){const tn=Nt[en];for(let nn=0;nn<tn.length;nn++)Ot.push(s[en])}return Ot};k$3.Z=function(Nt){N$1(this);let s=[];if(typeof Nt=="string")ad(this,Nt)&&(s=s.concat(this.g.get(O$1(this,Nt))));else{Nt=Array.from(this.g.values());for(let Ot=0;Ot<Nt.length;Ot++)s=s.concat(Nt[Ot])}return s};k$3.set=function(Nt,s){return N$1(this),this.i=null,Nt=O$1(this,Nt),ad(this,Nt)&&(this.h-=this.g.get(Nt).length),this.g.set(Nt,[s]),this.h+=1,this};k$3.get=function(Nt,s){return Nt?(Nt=this.Z(Nt),0<Nt.length?String(Nt[0]):s):s};function kc(Nt,s,Ot){$c(Nt,s),0<Ot.length&&(Nt.i=null,Nt.g.set(O$1(Nt,s),ma(Ot)),Nt.h+=Ot.length)}k$3.toString=function(){if(this.i)return this.i;if(!this.g)return"";const Nt=[],s=Array.from(this.g.keys());for(var Ot=0;Ot<s.length;Ot++){var en=s[Ot];const nn=encodeURIComponent(String(en)),rn=this.Z(en);for(en=0;en<rn.length;en++){var tn=nn;rn[en]!==""&&(tn+="="+encodeURIComponent(String(rn[en]))),Nt.push(tn)}}return this.i=Nt.join("&")};function O$1(Nt,s){return s=String(s),Nt.j&&(s=s.toLowerCase()),s}function Xc(Nt,s){s&&!Nt.j&&(N$1(Nt),Nt.i=null,Nt.g.forEach(function(Ot,en){var tn=en.toLowerCase();en!=tn&&($c(this,en),kc(this,tn,Ot))},Nt)),Nt.j=s}var bd=class{constructor(Nt,s){this.g=Nt,this.map=s}};function cd(Nt){this.l=Nt||dd,l$1.PerformanceNavigationTiming?(Nt=l$1.performance.getEntriesByType("navigation"),Nt=0<Nt.length&&(Nt[0].nextHopProtocol=="hq"||Nt[0].nextHopProtocol=="h2")):Nt=!!(l$1.g&&l$1.g.Ka&&l$1.g.Ka()&&l$1.g.Ka().dc),this.j=Nt?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var dd=10;function ed(Nt){return Nt.h?!0:Nt.g?Nt.g.size>=Nt.j:!1}function Bc(Nt){return Nt.h?1:Nt.g?Nt.g.size:0}function xc(Nt,s){return Nt.h?Nt.h==s:Nt.g?Nt.g.has(s):!1}function Cc(Nt,s){Nt.g?Nt.g.add(s):Nt.h=s}function Ec(Nt,s){Nt.h&&Nt.h==s?Nt.h=null:Nt.g&&Nt.g.has(s)&&Nt.g.delete(s)}cd.prototype.cancel=function(){if(this.i=fd(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const Nt of this.g.values())Nt.cancel();this.g.clear()}};function fd(Nt){if(Nt.h!=null)return Nt.i.concat(Nt.h.F);if(Nt.g!=null&&Nt.g.size!==0){let s=Nt.i;for(const Ot of Nt.g.values())s=s.concat(Ot.F);return s}return ma(Nt.i)}var gd=class{stringify(Nt){return l$1.JSON.stringify(Nt,void 0)}parse(Nt){return l$1.JSON.parse(Nt,void 0)}};function hd(){this.g=new gd}function id(Nt,s,Ot){const en=Ot||"";try{Kc(Nt,function(tn,nn){let rn=tn;p$1(tn)&&(rn=jb(tn)),s.push(en+nn+"="+encodeURIComponent(rn))})}catch(tn){throw s.push(en+"type="+encodeURIComponent("_badmap")),tn}}function jd(Nt,s){const Ot=new Gb;if(l$1.Image){const en=new Image;en.onload=ha(kd,Ot,en,"TestLoadImage: loaded",!0,s),en.onerror=ha(kd,Ot,en,"TestLoadImage: error",!1,s),en.onabort=ha(kd,Ot,en,"TestLoadImage: abort",!1,s),en.ontimeout=ha(kd,Ot,en,"TestLoadImage: timeout",!1,s),l$1.setTimeout(function(){en.ontimeout&&en.ontimeout()},1e4),en.src=Nt}else s(!1)}function kd(Nt,s,Ot,en,tn){try{s.onload=null,s.onerror=null,s.onabort=null,s.ontimeout=null,tn(en)}catch{}}function ld(Nt){this.l=Nt.ec||null,this.j=Nt.ob||!1}r$2(ld,Ub);ld.prototype.g=function(){return new md(this.l,this.j)};ld.prototype.i=function(Nt){return function(){return Nt}}({});function md(Nt,s){B$1.call(this),this.F=Nt,this.u=s,this.m=void 0,this.readyState=nd,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}r$2(md,B$1);var nd=0;k$3=md.prototype;k$3.open=function(Nt,s){if(this.readyState!=nd)throw this.abort(),Error("Error reopening a connection");this.C=Nt,this.B=s,this.readyState=1,od(this)};k$3.send=function(Nt){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const s={headers:this.v,method:this.C,credentials:this.m,cache:void 0};Nt&&(s.body=Nt),(this.F||l$1).fetch(new Request(this.B,s)).then(this.$a.bind(this),this.ka.bind(this))};k$3.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,pd(this)),this.readyState=nd};k$3.$a=function(Nt){if(this.g&&(this.l=Nt,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=Nt.headers,this.readyState=2,od(this)),this.g&&(this.readyState=3,od(this),this.g)))if(this.responseType==="arraybuffer")Nt.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof l$1.ReadableStream<"u"&&"body"in Nt){if(this.j=Nt.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;qd(this)}else Nt.text().then(this.Za.bind(this),this.ka.bind(this))};function qd(Nt){Nt.j.read().then(Nt.Xa.bind(Nt)).catch(Nt.ka.bind(Nt))}k$3.Xa=function(Nt){if(this.g){if(this.u&&Nt.value)this.response.push(Nt.value);else if(!this.u){var s=Nt.value?Nt.value:new Uint8Array(0);(s=this.A.decode(s,{stream:!Nt.done}))&&(this.response=this.responseText+=s)}Nt.done?pd(this):od(this),this.readyState==3&&qd(this)}};k$3.Za=function(Nt){this.g&&(this.response=this.responseText=Nt,pd(this))};k$3.Ya=function(Nt){this.g&&(this.response=Nt,pd(this))};k$3.ka=function(){this.g&&pd(this)};function pd(Nt){Nt.readyState=4,Nt.l=null,Nt.j=null,Nt.A=null,od(Nt)}k$3.setRequestHeader=function(Nt,s){this.v.append(Nt,s)};k$3.getResponseHeader=function(Nt){return this.h&&this.h.get(Nt.toLowerCase())||""};k$3.getAllResponseHeaders=function(){if(!this.h)return"";const Nt=[],s=this.h.entries();for(var Ot=s.next();!Ot.done;)Ot=Ot.value,Nt.push(Ot[0]+": "+Ot[1]),Ot=s.next();return Nt.join(`\r
`)};function od(Nt){Nt.onreadystatechange&&Nt.onreadystatechange.call(Nt)}Object.defineProperty(md.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(Nt){this.m=Nt?"include":"same-origin"}});var rd=l$1.JSON.parse;function P$2(Nt){B$1.call(this),this.headers=new Map,this.u=Nt||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=sd,this.L=this.M=!1}r$2(P$2,B$1);var sd="",td=/^https?$/i,ud=["POST","PUT"];k$3=P$2.prototype;k$3.Oa=function(Nt){this.M=Nt};k$3.ha=function(Nt,s,Ot,en){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+Nt);s=s?s.toUpperCase():"GET",this.I=Nt,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():$b.g(),this.C=this.u?Vb(this.u):Vb($b),this.g.onreadystatechange=q$1(this.La,this);try{this.G=!0,this.g.open(s,String(Nt),!0),this.G=!1}catch(nn){vd(this,nn);return}if(Nt=Ot||"",Ot=new Map(this.headers),en)if(Object.getPrototypeOf(en)===Object.prototype)for(var tn in en)Ot.set(tn,en[tn]);else if(typeof en.keys=="function"&&typeof en.get=="function")for(const nn of en.keys())Ot.set(nn,en.get(nn));else throw Error("Unknown input type for opt_headers: "+String(en));en=Array.from(Ot.keys()).find(nn=>nn.toLowerCase()=="content-type"),tn=l$1.FormData&&Nt instanceof l$1.FormData,!(0<=ka(ud,s))||en||tn||Ot.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[nn,rn]of Ot)this.g.setRequestHeader(nn,rn);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{wd(this),0<this.B&&((this.L=xd(this.g))?(this.g.timeout=this.B,this.g.ontimeout=q$1(this.ua,this)):this.A=yb(this.ua,this.B,this)),this.v=!0,this.g.send(Nt),this.v=!1}catch(nn){vd(this,nn)}};function xd(Nt){return z$1&&typeof Nt.timeout=="number"&&Nt.ontimeout!==void 0}k$3.ua=function(){typeof goog<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,C$3(this,"timeout"),this.abort(8))};function vd(Nt,s){Nt.h=!1,Nt.g&&(Nt.l=!0,Nt.g.abort(),Nt.l=!1),Nt.j=s,Nt.m=5,yd(Nt),zd(Nt)}function yd(Nt){Nt.F||(Nt.F=!0,C$3(Nt,"complete"),C$3(Nt,"error"))}k$3.abort=function(Nt){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=Nt||7,C$3(this,"complete"),C$3(this,"abort"),zd(this))};k$3.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),zd(this,!0)),P$2.$.N.call(this)};k$3.La=function(){this.s||(this.G||this.v||this.l?Ad(this):this.kb())};k$3.kb=function(){Ad(this)};function Ad(Nt){if(Nt.h&&typeof goog<"u"&&(!Nt.C[1]||H$2(Nt)!=4||Nt.da()!=2)){if(Nt.v&&H$2(Nt)==4)yb(Nt.La,0,Nt);else if(C$3(Nt,"readystatechange"),H$2(Nt)==4){Nt.h=!1;try{const rn=Nt.da();e:switch(rn){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var s=!0;break e;default:s=!1}var Ot;if(!(Ot=s)){var en;if(en=rn===0){var tn=String(Nt.I).match(Lc)[1]||null;!tn&&l$1.self&&l$1.self.location&&(tn=l$1.self.location.protocol.slice(0,-1)),en=!td.test(tn?tn.toLowerCase():"")}Ot=en}if(Ot)C$3(Nt,"complete"),C$3(Nt,"success");else{Nt.m=6;try{var nn=2<H$2(Nt)?Nt.g.statusText:""}catch{nn=""}Nt.j=nn+" ["+Nt.da()+"]",yd(Nt)}}finally{zd(Nt)}}}}function zd(Nt,s){if(Nt.g){wd(Nt);const Ot=Nt.g,en=Nt.C[0]?()=>{}:null;Nt.g=null,Nt.C=null,s||C$3(Nt,"ready");try{Ot.onreadystatechange=en}catch{}}}function wd(Nt){Nt.g&&Nt.L&&(Nt.g.ontimeout=null),Nt.A&&(l$1.clearTimeout(Nt.A),Nt.A=null)}k$3.isActive=function(){return!!this.g};function H$2(Nt){return Nt.g?Nt.g.readyState:0}k$3.da=function(){try{return 2<H$2(this)?this.g.status:-1}catch{return-1}};k$3.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};k$3.Wa=function(Nt){if(this.g){var s=this.g.responseText;return Nt&&s.indexOf(Nt)==0&&(s=s.substring(Nt.length)),rd(s)}};function mc(Nt){try{if(!Nt.g)return null;if("response"in Nt.g)return Nt.g.response;switch(Nt.K){case sd:case"text":return Nt.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in Nt.g)return Nt.g.mozResponseArrayBuffer}return null}catch{return null}}function tc(Nt){const s={};Nt=(Nt.g&&2<=H$2(Nt)&&Nt.g.getAllResponseHeaders()||"").split(`\r
`);for(let en=0;en<Nt.length;en++){if(x$2(Nt[en]))continue;var Ot=qb(Nt[en]);const tn=Ot[0];if(Ot=Ot[1],typeof Ot!="string")continue;Ot=Ot.trim();const nn=s[tn]||[];s[tn]=nn,nn.push(Ot)}Oa(s,function(en){return en.join(", ")})}k$3.Ia=function(){return this.m};k$3.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function Bd(Nt){let s="";return Na(Nt,function(Ot,en){s+=en,s+=":",s+=Ot,s+=`\r
`}),s}function Cd(Nt,s,Ot){e:{for(en in Ot){var en=!1;break e}en=!0}en||(Ot=Bd(Ot),typeof Nt=="string"?Ot!=null&&encodeURIComponent(String(Ot)):K$1(Nt,s,Ot))}function Dd(Nt,s,Ot){return Ot&&Ot.internalChannelParams&&Ot.internalChannelParams[Nt]||s}function Ed(Nt){this.Ga=0,this.j=[],this.l=new Gb,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Dd("failFast",!1,Nt),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Dd("baseRetryDelayMs",5e3,Nt),this.hb=Dd("retryDelaySeedMs",1e4,Nt),this.eb=Dd("forwardChannelMaxRetries",2,Nt),this.xa=Dd("forwardChannelRequestTimeoutMs",2e4,Nt),this.va=Nt&&Nt.xmlHttpFactory||void 0,this.Ha=Nt&&Nt.useFetchStreams||!1,this.L=void 0,this.J=Nt&&Nt.supportsCrossDomainXhr||!1,this.K="",this.i=new cd(Nt&&Nt.concurrentRequestLimit),this.Ja=new hd,this.P=Nt&&Nt.fastHandshake||!1,this.O=Nt&&Nt.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=Nt&&Nt.bc||!1,Nt&&Nt.Ea&&this.l.Ea(),Nt&&Nt.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&Nt&&Nt.detectBufferingProxy||!1,this.qa=void 0,Nt&&Nt.longPollingTimeout&&0<Nt.longPollingTimeout&&(this.qa=Nt.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}k$3=Ed.prototype;k$3.ra=8;k$3.H=1;function Hc(Nt){if(Fd(Nt),Nt.H==3){var s=Nt.W++,Ot=G$1(Nt.I);if(K$1(Ot,"SID",Nt.K),K$1(Ot,"RID",s),K$1(Ot,"TYPE","terminate"),Gd(Nt,Ot),s=new bc(Nt,Nt.l,s),s.L=2,s.A=hc(G$1(Ot)),Ot=!1,l$1.navigator&&l$1.navigator.sendBeacon)try{Ot=l$1.navigator.sendBeacon(s.A.toString(),"")}catch{}!Ot&&l$1.Image&&(new Image().src=s.A,Ot=!0),Ot||(s.g=lc(s.l,null),s.g.ha(s.A)),s.G=Date.now(),jc(s)}Hd(Nt)}function zc(Nt){Nt.g&&(vc(Nt),Nt.g.cancel(),Nt.g=null)}function Fd(Nt){zc(Nt),Nt.u&&(l$1.clearTimeout(Nt.u),Nt.u=null),yc(Nt),Nt.i.cancel(),Nt.m&&(typeof Nt.m=="number"&&l$1.clearTimeout(Nt.m),Nt.m=null)}function Gc(Nt){if(!ed(Nt.i)&&!Nt.m){Nt.m=!0;var s=Nt.Na;sb||vb(),tb||(sb(),tb=!0),mb.add(s,Nt),Nt.C=0}}function Id(Nt,s){return Bc(Nt.i)>=Nt.i.j-(Nt.m?1:0)?!1:Nt.m?(Nt.j=s.F.concat(Nt.j),!0):Nt.H==1||Nt.H==2||Nt.C>=(Nt.cb?0:Nt.eb)?!1:(Nt.m=Rb(q$1(Nt.Na,Nt,s),Jd(Nt,Nt.C)),Nt.C++,!0)}k$3.Na=function(Nt){if(this.m)if(this.m=null,this.H==1){if(!Nt){this.W=Math.floor(1e5*Math.random()),Nt=this.W++;const tn=new bc(this,this.l,Nt);let nn=this.s;if(this.U&&(nn?(nn=Pa(nn),Ra(nn,this.U)):nn=this.U),this.o!==null||this.O||(tn.I=nn,nn=null),this.P)e:{for(var s=0,Ot=0;Ot<this.j.length;Ot++){t:{var en=this.j[Ot];if("__data__"in en.map&&(en=en.map.__data__,typeof en=="string")){en=en.length;break t}en=void 0}if(en===void 0)break;if(s+=en,4096<s){s=Ot;break e}if(s===4096||Ot===this.j.length-1){s=Ot+1;break e}}s=1e3}else s=1e3;s=Kd(this,tn,s),Ot=G$1(this.I),K$1(Ot,"RID",Nt),K$1(Ot,"CVER",22),this.F&&K$1(Ot,"X-HTTP-Session-Id",this.F),Gd(this,Ot),nn&&(this.O?s="headers="+encodeURIComponent(String(Bd(nn)))+"&"+s:this.o&&Cd(Ot,this.o,nn)),Cc(this.i,tn),this.bb&&K$1(Ot,"TYPE","init"),this.P?(K$1(Ot,"$req",s),K$1(Ot,"SID","null"),tn.aa=!0,gc(tn,Ot,null)):gc(tn,Ot,s),this.H=2}}else this.H==3&&(Nt?Ld(this,Nt):this.j.length==0||ed(this.i)||Ld(this))};function Ld(Nt,s){var Ot;s?Ot=s.m:Ot=Nt.W++;const en=G$1(Nt.I);K$1(en,"SID",Nt.K),K$1(en,"RID",Ot),K$1(en,"AID",Nt.V),Gd(Nt,en),Nt.o&&Nt.s&&Cd(en,Nt.o,Nt.s),Ot=new bc(Nt,Nt.l,Ot,Nt.C+1),Nt.o===null&&(Ot.I=Nt.s),s&&(Nt.j=s.F.concat(Nt.j)),s=Kd(Nt,Ot,1e3),Ot.setTimeout(Math.round(.5*Nt.xa)+Math.round(.5*Nt.xa*Math.random())),Cc(Nt.i,Ot),gc(Ot,en,s)}function Gd(Nt,s){Nt.na&&Na(Nt.na,function(Ot,en){K$1(s,en,Ot)}),Nt.h&&Kc({},function(Ot,en){K$1(s,en,Ot)})}function Kd(Nt,s,Ot){Ot=Math.min(Nt.j.length,Ot);var en=Nt.h?q$1(Nt.h.Va,Nt.h,Nt):null;e:{var tn=Nt.j;let nn=-1;for(;;){const rn=["count="+Ot];nn==-1?0<Ot?(nn=tn[0].g,rn.push("ofs="+nn)):nn=0:rn.push("ofs="+nn);let on=!0;for(let sn=0;sn<Ot;sn++){let an=tn[sn].g;const ln=tn[sn].map;if(an-=nn,0>an)nn=Math.max(0,tn[sn].g-100),on=!1;else try{id(ln,rn,"req"+an+"_")}catch{en&&en(ln)}}if(on){en=rn.join("&");break e}}}return Nt=Nt.j.splice(0,Ot),s.F=Nt,en}function Fc(Nt){if(!Nt.g&&!Nt.u){Nt.ba=1;var s=Nt.Ma;sb||vb(),tb||(sb(),tb=!0),mb.add(s,Nt),Nt.A=0}}function Ac(Nt){return Nt.g||Nt.u||3<=Nt.A?!1:(Nt.ba++,Nt.u=Rb(q$1(Nt.Ma,Nt),Jd(Nt,Nt.A)),Nt.A++,!0)}k$3.Ma=function(){if(this.u=null,Md(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var Nt=2*this.S;this.l.info("BP detection timer enabled: "+Nt),this.B=Rb(q$1(this.jb,this),Nt)}};k$3.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,F$3(10),zc(this),Md(this))};function vc(Nt){Nt.B!=null&&(l$1.clearTimeout(Nt.B),Nt.B=null)}function Md(Nt){Nt.g=new bc(Nt,Nt.l,"rpc",Nt.ba),Nt.o===null&&(Nt.g.I=Nt.s),Nt.g.O=0;var s=G$1(Nt.wa);K$1(s,"RID","rpc"),K$1(s,"SID",Nt.K),K$1(s,"AID",Nt.V),K$1(s,"CI",Nt.G?"0":"1"),!Nt.G&&Nt.qa&&K$1(s,"TO",Nt.qa),K$1(s,"TYPE","xmlhttp"),Gd(Nt,s),Nt.o&&Nt.s&&Cd(s,Nt.o,Nt.s),Nt.L&&Nt.g.setTimeout(Nt.L);var Ot=Nt.g;Nt=Nt.pa,Ot.L=1,Ot.A=hc(G$1(s)),Ot.u=null,Ot.S=!0,ic(Ot,Nt)}k$3.ib=function(){this.v!=null&&(this.v=null,zc(this),Ac(this),F$3(19))};function yc(Nt){Nt.v!=null&&(l$1.clearTimeout(Nt.v),Nt.v=null)}function sc(Nt,s){var Ot=null;if(Nt.g==s){yc(Nt),vc(Nt),Nt.g=null;var en=2}else if(xc(Nt.i,s))Ot=s.F,Ec(Nt.i,s),en=1;else return;if(Nt.H!=0){if(s.i)if(en==1){Ot=s.u?s.u.length:0,s=Date.now()-s.G;var tn=Nt.C;en=Mb(),C$3(en,new Qb(en,Ot)),Gc(Nt)}else Fc(Nt);else if(tn=s.s,tn==3||tn==0&&0<s.ca||!(en==1&&Id(Nt,s)||en==2&&Ac(Nt)))switch(Ot&&0<Ot.length&&(s=Nt.i,s.i=s.i.concat(Ot)),tn){case 1:J(Nt,5);break;case 4:J(Nt,10);break;case 3:J(Nt,6);break;default:J(Nt,2)}}}function Jd(Nt,s){let Ot=Nt.ab+Math.floor(Math.random()*Nt.hb);return Nt.isActive()||(Ot*=2),Ot*s}function J(Nt,s){if(Nt.l.info("Error code "+s),s==2){var Ot=null;Nt.h&&(Ot=null);var en=q$1(Nt.pb,Nt);Ot||(Ot=new M$3("//www.google.com/images/cleardot.gif"),l$1.location&&l$1.location.protocol=="http"||Nc(Ot,"https"),hc(Ot)),jd(Ot.toString(),en)}else F$3(2);Nt.H=0,Nt.h&&Nt.h.za(s),Hd(Nt),Fd(Nt)}k$3.pb=function(Nt){Nt?(this.l.info("Successfully pinged google.com"),F$3(2)):(this.l.info("Failed to ping google.com"),F$3(1))};function Hd(Nt){if(Nt.H=0,Nt.ma=[],Nt.h){const s=fd(Nt.i);(s.length!=0||Nt.j.length!=0)&&(na(Nt.ma,s),na(Nt.ma,Nt.j),Nt.i.i.length=0,ma(Nt.j),Nt.j.length=0),Nt.h.ya()}}function Dc(Nt,s,Ot){var en=Ot instanceof M$3?G$1(Ot):new M$3(Ot);if(en.g!="")s&&(en.g=s+"."+en.g),Oc(en,en.m);else{var tn=l$1.location;en=tn.protocol,s=s?s+"."+tn.hostname:tn.hostname,tn=+tn.port;var nn=new M$3(null);en&&Nc(nn,en),s&&(nn.g=s),tn&&Oc(nn,tn),Ot&&(nn.l=Ot),en=nn}return Ot=Nt.F,s=Nt.Da,Ot&&s&&K$1(en,Ot,s),K$1(en,"VER",Nt.ra),Gd(Nt,en),en}function lc(Nt,s,Ot){if(s&&!Nt.J)throw Error("Can't create secondary domain capable XhrIo object.");return s=Nt.Ha&&!Nt.va?new P$2(new ld({ob:Ot})):new P$2(Nt.va),s.Oa(Nt.J),s}k$3.isActive=function(){return!!this.h&&this.h.isActive(this)};function Nd(){}k$3=Nd.prototype;k$3.Ba=function(){};k$3.Aa=function(){};k$3.za=function(){};k$3.ya=function(){};k$3.isActive=function(){return!0};k$3.Va=function(){};function Od(){if(z$1&&!(10<=Number(Fa)))throw Error("Environmental error: no available transport.")}Od.prototype.g=function(Nt,s){return new Q(Nt,s)};function Q(Nt,s){B$1.call(this),this.g=new Ed(s),this.l=Nt,this.h=s&&s.messageUrlParams||null,Nt=s&&s.messageHeaders||null,s&&s.clientProtocolHeaderRequired&&(Nt?Nt["X-Client-Protocol"]="webchannel":Nt={"X-Client-Protocol":"webchannel"}),this.g.s=Nt,Nt=s&&s.initMessageHeaders||null,s&&s.messageContentType&&(Nt?Nt["X-WebChannel-Content-Type"]=s.messageContentType:Nt={"X-WebChannel-Content-Type":s.messageContentType}),s&&s.Ca&&(Nt?Nt["X-WebChannel-Client-Profile"]=s.Ca:Nt={"X-WebChannel-Client-Profile":s.Ca}),this.g.U=Nt,(Nt=s&&s.cc)&&!x$2(Nt)&&(this.g.o=Nt),this.A=s&&s.supportsCrossDomainXhr||!1,this.v=s&&s.sendRawJson||!1,(s=s&&s.httpSessionIdParam)&&!x$2(s)&&(this.g.F=s,Nt=this.h,Nt!==null&&s in Nt&&(Nt=this.h,s in Nt&&delete Nt[s])),this.j=new R$3(this)}r$2(Q,B$1);Q.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var Nt=this.g,s=this.l,Ot=this.h||void 0;F$3(0),Nt.Y=s,Nt.na=Ot||{},Nt.G=Nt.aa,Nt.I=Dc(Nt,null,Nt.Y),Gc(Nt)};Q.prototype.close=function(){Hc(this.g)};Q.prototype.u=function(Nt){var s=this.g;if(typeof Nt=="string"){var Ot={};Ot.__data__=Nt,Nt=Ot}else this.v&&(Ot={},Ot.__data__=jb(Nt),Nt=Ot);s.j.push(new bd(s.fb++,Nt)),s.H==3&&Gc(s)};Q.prototype.N=function(){this.g.h=null,delete this.j,Hc(this.g),delete this.g,Q.$.N.call(this)};function Pd(Nt){Yb.call(this),Nt.__headers__&&(this.headers=Nt.__headers__,this.statusCode=Nt.__status__,delete Nt.__headers__,delete Nt.__status__);var s=Nt.__sm__;if(s){e:{for(const Ot in s){Nt=Ot;break e}Nt=void 0}(this.i=Nt)&&(Nt=this.i,s=s!==null&&Nt in s?s[Nt]:void 0),this.data=s}else this.data=Nt}r$2(Pd,Yb);function Qd(){Zb.call(this),this.status=1}r$2(Qd,Zb);function R$3(Nt){this.g=Nt}r$2(R$3,Nd);R$3.prototype.Ba=function(){C$3(this.g,"a")};R$3.prototype.Aa=function(Nt){C$3(this.g,new Pd(Nt))};R$3.prototype.za=function(Nt){C$3(this.g,new Qd)};R$3.prototype.ya=function(){C$3(this.g,"b")};function Rd(){this.blockSize=-1}function S$2(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}r$2(S$2,Rd);S$2.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function Sd(Nt,s,Ot){Ot||(Ot=0);var en=Array(16);if(typeof s=="string")for(var tn=0;16>tn;++tn)en[tn]=s.charCodeAt(Ot++)|s.charCodeAt(Ot++)<<8|s.charCodeAt(Ot++)<<16|s.charCodeAt(Ot++)<<24;else for(tn=0;16>tn;++tn)en[tn]=s[Ot++]|s[Ot++]<<8|s[Ot++]<<16|s[Ot++]<<24;s=Nt.g[0],Ot=Nt.g[1],tn=Nt.g[2];var nn=Nt.g[3],rn=s+(nn^Ot&(tn^nn))+en[0]+3614090360&4294967295;s=Ot+(rn<<7&4294967295|rn>>>25),rn=nn+(tn^s&(Ot^tn))+en[1]+3905402710&4294967295,nn=s+(rn<<12&4294967295|rn>>>20),rn=tn+(Ot^nn&(s^Ot))+en[2]+606105819&4294967295,tn=nn+(rn<<17&4294967295|rn>>>15),rn=Ot+(s^tn&(nn^s))+en[3]+3250441966&4294967295,Ot=tn+(rn<<22&4294967295|rn>>>10),rn=s+(nn^Ot&(tn^nn))+en[4]+4118548399&4294967295,s=Ot+(rn<<7&4294967295|rn>>>25),rn=nn+(tn^s&(Ot^tn))+en[5]+1200080426&4294967295,nn=s+(rn<<12&4294967295|rn>>>20),rn=tn+(Ot^nn&(s^Ot))+en[6]+2821735955&4294967295,tn=nn+(rn<<17&4294967295|rn>>>15),rn=Ot+(s^tn&(nn^s))+en[7]+4249261313&4294967295,Ot=tn+(rn<<22&4294967295|rn>>>10),rn=s+(nn^Ot&(tn^nn))+en[8]+1770035416&4294967295,s=Ot+(rn<<7&4294967295|rn>>>25),rn=nn+(tn^s&(Ot^tn))+en[9]+2336552879&4294967295,nn=s+(rn<<12&4294967295|rn>>>20),rn=tn+(Ot^nn&(s^Ot))+en[10]+4294925233&4294967295,tn=nn+(rn<<17&4294967295|rn>>>15),rn=Ot+(s^tn&(nn^s))+en[11]+2304563134&4294967295,Ot=tn+(rn<<22&4294967295|rn>>>10),rn=s+(nn^Ot&(tn^nn))+en[12]+1804603682&4294967295,s=Ot+(rn<<7&4294967295|rn>>>25),rn=nn+(tn^s&(Ot^tn))+en[13]+4254626195&4294967295,nn=s+(rn<<12&4294967295|rn>>>20),rn=tn+(Ot^nn&(s^Ot))+en[14]+2792965006&4294967295,tn=nn+(rn<<17&4294967295|rn>>>15),rn=Ot+(s^tn&(nn^s))+en[15]+1236535329&4294967295,Ot=tn+(rn<<22&4294967295|rn>>>10),rn=s+(tn^nn&(Ot^tn))+en[1]+4129170786&4294967295,s=Ot+(rn<<5&4294967295|rn>>>27),rn=nn+(Ot^tn&(s^Ot))+en[6]+3225465664&4294967295,nn=s+(rn<<9&4294967295|rn>>>23),rn=tn+(s^Ot&(nn^s))+en[11]+643717713&4294967295,tn=nn+(rn<<14&4294967295|rn>>>18),rn=Ot+(nn^s&(tn^nn))+en[0]+3921069994&4294967295,Ot=tn+(rn<<20&4294967295|rn>>>12),rn=s+(tn^nn&(Ot^tn))+en[5]+3593408605&4294967295,s=Ot+(rn<<5&4294967295|rn>>>27),rn=nn+(Ot^tn&(s^Ot))+en[10]+38016083&4294967295,nn=s+(rn<<9&4294967295|rn>>>23),rn=tn+(s^Ot&(nn^s))+en[15]+3634488961&4294967295,tn=nn+(rn<<14&4294967295|rn>>>18),rn=Ot+(nn^s&(tn^nn))+en[4]+3889429448&4294967295,Ot=tn+(rn<<20&4294967295|rn>>>12),rn=s+(tn^nn&(Ot^tn))+en[9]+568446438&4294967295,s=Ot+(rn<<5&4294967295|rn>>>27),rn=nn+(Ot^tn&(s^Ot))+en[14]+3275163606&4294967295,nn=s+(rn<<9&4294967295|rn>>>23),rn=tn+(s^Ot&(nn^s))+en[3]+4107603335&4294967295,tn=nn+(rn<<14&4294967295|rn>>>18),rn=Ot+(nn^s&(tn^nn))+en[8]+1163531501&4294967295,Ot=tn+(rn<<20&4294967295|rn>>>12),rn=s+(tn^nn&(Ot^tn))+en[13]+2850285829&4294967295,s=Ot+(rn<<5&4294967295|rn>>>27),rn=nn+(Ot^tn&(s^Ot))+en[2]+4243563512&4294967295,nn=s+(rn<<9&4294967295|rn>>>23),rn=tn+(s^Ot&(nn^s))+en[7]+1735328473&4294967295,tn=nn+(rn<<14&4294967295|rn>>>18),rn=Ot+(nn^s&(tn^nn))+en[12]+2368359562&4294967295,Ot=tn+(rn<<20&4294967295|rn>>>12),rn=s+(Ot^tn^nn)+en[5]+4294588738&4294967295,s=Ot+(rn<<4&4294967295|rn>>>28),rn=nn+(s^Ot^tn)+en[8]+2272392833&4294967295,nn=s+(rn<<11&4294967295|rn>>>21),rn=tn+(nn^s^Ot)+en[11]+1839030562&4294967295,tn=nn+(rn<<16&4294967295|rn>>>16),rn=Ot+(tn^nn^s)+en[14]+4259657740&4294967295,Ot=tn+(rn<<23&4294967295|rn>>>9),rn=s+(Ot^tn^nn)+en[1]+2763975236&4294967295,s=Ot+(rn<<4&4294967295|rn>>>28),rn=nn+(s^Ot^tn)+en[4]+1272893353&4294967295,nn=s+(rn<<11&4294967295|rn>>>21),rn=tn+(nn^s^Ot)+en[7]+4139469664&4294967295,tn=nn+(rn<<16&4294967295|rn>>>16),rn=Ot+(tn^nn^s)+en[10]+3200236656&4294967295,Ot=tn+(rn<<23&4294967295|rn>>>9),rn=s+(Ot^tn^nn)+en[13]+681279174&4294967295,s=Ot+(rn<<4&4294967295|rn>>>28),rn=nn+(s^Ot^tn)+en[0]+3936430074&4294967295,nn=s+(rn<<11&4294967295|rn>>>21),rn=tn+(nn^s^Ot)+en[3]+3572445317&4294967295,tn=nn+(rn<<16&4294967295|rn>>>16),rn=Ot+(tn^nn^s)+en[6]+76029189&4294967295,Ot=tn+(rn<<23&4294967295|rn>>>9),rn=s+(Ot^tn^nn)+en[9]+3654602809&4294967295,s=Ot+(rn<<4&4294967295|rn>>>28),rn=nn+(s^Ot^tn)+en[12]+3873151461&4294967295,nn=s+(rn<<11&4294967295|rn>>>21),rn=tn+(nn^s^Ot)+en[15]+530742520&4294967295,tn=nn+(rn<<16&4294967295|rn>>>16),rn=Ot+(tn^nn^s)+en[2]+3299628645&4294967295,Ot=tn+(rn<<23&4294967295|rn>>>9),rn=s+(tn^(Ot|~nn))+en[0]+4096336452&4294967295,s=Ot+(rn<<6&4294967295|rn>>>26),rn=nn+(Ot^(s|~tn))+en[7]+1126891415&4294967295,nn=s+(rn<<10&4294967295|rn>>>22),rn=tn+(s^(nn|~Ot))+en[14]+2878612391&4294967295,tn=nn+(rn<<15&4294967295|rn>>>17),rn=Ot+(nn^(tn|~s))+en[5]+4237533241&4294967295,Ot=tn+(rn<<21&4294967295|rn>>>11),rn=s+(tn^(Ot|~nn))+en[12]+1700485571&4294967295,s=Ot+(rn<<6&4294967295|rn>>>26),rn=nn+(Ot^(s|~tn))+en[3]+2399980690&4294967295,nn=s+(rn<<10&4294967295|rn>>>22),rn=tn+(s^(nn|~Ot))+en[10]+4293915773&4294967295,tn=nn+(rn<<15&4294967295|rn>>>17),rn=Ot+(nn^(tn|~s))+en[1]+2240044497&4294967295,Ot=tn+(rn<<21&4294967295|rn>>>11),rn=s+(tn^(Ot|~nn))+en[8]+1873313359&4294967295,s=Ot+(rn<<6&4294967295|rn>>>26),rn=nn+(Ot^(s|~tn))+en[15]+4264355552&4294967295,nn=s+(rn<<10&4294967295|rn>>>22),rn=tn+(s^(nn|~Ot))+en[6]+2734768916&4294967295,tn=nn+(rn<<15&4294967295|rn>>>17),rn=Ot+(nn^(tn|~s))+en[13]+1309151649&4294967295,Ot=tn+(rn<<21&4294967295|rn>>>11),rn=s+(tn^(Ot|~nn))+en[4]+4149444226&4294967295,s=Ot+(rn<<6&4294967295|rn>>>26),rn=nn+(Ot^(s|~tn))+en[11]+3174756917&4294967295,nn=s+(rn<<10&4294967295|rn>>>22),rn=tn+(s^(nn|~Ot))+en[2]+718787259&4294967295,tn=nn+(rn<<15&4294967295|rn>>>17),rn=Ot+(nn^(tn|~s))+en[9]+3951481745&4294967295,Nt.g[0]=Nt.g[0]+s&4294967295,Nt.g[1]=Nt.g[1]+(tn+(rn<<21&4294967295|rn>>>11))&4294967295,Nt.g[2]=Nt.g[2]+tn&4294967295,Nt.g[3]=Nt.g[3]+nn&4294967295}S$2.prototype.j=function(Nt,s){s===void 0&&(s=Nt.length);for(var Ot=s-this.blockSize,en=this.m,tn=this.h,nn=0;nn<s;){if(tn==0)for(;nn<=Ot;)Sd(this,Nt,nn),nn+=this.blockSize;if(typeof Nt=="string"){for(;nn<s;)if(en[tn++]=Nt.charCodeAt(nn++),tn==this.blockSize){Sd(this,en),tn=0;break}}else for(;nn<s;)if(en[tn++]=Nt[nn++],tn==this.blockSize){Sd(this,en),tn=0;break}}this.h=tn,this.i+=s};S$2.prototype.l=function(){var Nt=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);Nt[0]=128;for(var s=1;s<Nt.length-8;++s)Nt[s]=0;var Ot=8*this.i;for(s=Nt.length-8;s<Nt.length;++s)Nt[s]=Ot&255,Ot/=256;for(this.j(Nt),Nt=Array(16),s=Ot=0;4>s;++s)for(var en=0;32>en;en+=8)Nt[Ot++]=this.g[s]>>>en&255;return Nt};function T$2(Nt,s){this.h=s;for(var Ot=[],en=!0,tn=Nt.length-1;0<=tn;tn--){var nn=Nt[tn]|0;en&&nn==s||(Ot[tn]=nn,en=!1)}this.g=Ot}var sa={};function Td(Nt){return-128<=Nt&&128>Nt?ra(Nt,function(s){return new T$2([s|0],0>s?-1:0)}):new T$2([Nt|0],0>Nt?-1:0)}function U$1(Nt){if(isNaN(Nt)||!isFinite(Nt))return V$1;if(0>Nt)return W$1(U$1(-Nt));for(var s=[],Ot=1,en=0;Nt>=Ot;en++)s[en]=Nt/Ot|0,Ot*=Ud;return new T$2(s,0)}function Vd(Nt,s){if(Nt.length==0)throw Error("number format error: empty string");if(s=s||10,2>s||36<s)throw Error("radix out of range: "+s);if(Nt.charAt(0)=="-")return W$1(Vd(Nt.substring(1),s));if(0<=Nt.indexOf("-"))throw Error('number format error: interior "-" character');for(var Ot=U$1(Math.pow(s,8)),en=V$1,tn=0;tn<Nt.length;tn+=8){var nn=Math.min(8,Nt.length-tn),rn=parseInt(Nt.substring(tn,tn+nn),s);8>nn?(nn=U$1(Math.pow(s,nn)),en=en.R(nn).add(U$1(rn))):(en=en.R(Ot),en=en.add(U$1(rn)))}return en}var Ud=4294967296,V$1=Td(0),Wd=Td(1),Xd=Td(16777216);k$3=T$2.prototype;k$3.ea=function(){if(X$1(this))return-W$1(this).ea();for(var Nt=0,s=1,Ot=0;Ot<this.g.length;Ot++){var en=this.D(Ot);Nt+=(0<=en?en:Ud+en)*s,s*=Ud}return Nt};k$3.toString=function(Nt){if(Nt=Nt||10,2>Nt||36<Nt)throw Error("radix out of range: "+Nt);if(Y$1(this))return"0";if(X$1(this))return"-"+W$1(this).toString(Nt);for(var s=U$1(Math.pow(Nt,6)),Ot=this,en="";;){var tn=Yd(Ot,s).g;Ot=Zd(Ot,tn.R(s));var nn=((0<Ot.g.length?Ot.g[0]:Ot.h)>>>0).toString(Nt);if(Ot=tn,Y$1(Ot))return nn+en;for(;6>nn.length;)nn="0"+nn;en=nn+en}};k$3.D=function(Nt){return 0>Nt?0:Nt<this.g.length?this.g[Nt]:this.h};function Y$1(Nt){if(Nt.h!=0)return!1;for(var s=0;s<Nt.g.length;s++)if(Nt.g[s]!=0)return!1;return!0}function X$1(Nt){return Nt.h==-1}k$3.X=function(Nt){return Nt=Zd(this,Nt),X$1(Nt)?-1:Y$1(Nt)?0:1};function W$1(Nt){for(var s=Nt.g.length,Ot=[],en=0;en<s;en++)Ot[en]=~Nt.g[en];return new T$2(Ot,~Nt.h).add(Wd)}k$3.abs=function(){return X$1(this)?W$1(this):this};k$3.add=function(Nt){for(var s=Math.max(this.g.length,Nt.g.length),Ot=[],en=0,tn=0;tn<=s;tn++){var nn=en+(this.D(tn)&65535)+(Nt.D(tn)&65535),rn=(nn>>>16)+(this.D(tn)>>>16)+(Nt.D(tn)>>>16);en=rn>>>16,nn&=65535,rn&=65535,Ot[tn]=rn<<16|nn}return new T$2(Ot,Ot[Ot.length-1]&-2147483648?-1:0)};function Zd(Nt,s){return Nt.add(W$1(s))}k$3.R=function(Nt){if(Y$1(this)||Y$1(Nt))return V$1;if(X$1(this))return X$1(Nt)?W$1(this).R(W$1(Nt)):W$1(W$1(this).R(Nt));if(X$1(Nt))return W$1(this.R(W$1(Nt)));if(0>this.X(Xd)&&0>Nt.X(Xd))return U$1(this.ea()*Nt.ea());for(var s=this.g.length+Nt.g.length,Ot=[],en=0;en<2*s;en++)Ot[en]=0;for(en=0;en<this.g.length;en++)for(var tn=0;tn<Nt.g.length;tn++){var nn=this.D(en)>>>16,rn=this.D(en)&65535,on=Nt.D(tn)>>>16,sn=Nt.D(tn)&65535;Ot[2*en+2*tn]+=rn*sn,$d(Ot,2*en+2*tn),Ot[2*en+2*tn+1]+=nn*sn,$d(Ot,2*en+2*tn+1),Ot[2*en+2*tn+1]+=rn*on,$d(Ot,2*en+2*tn+1),Ot[2*en+2*tn+2]+=nn*on,$d(Ot,2*en+2*tn+2)}for(en=0;en<s;en++)Ot[en]=Ot[2*en+1]<<16|Ot[2*en];for(en=s;en<2*s;en++)Ot[en]=0;return new T$2(Ot,0)};function $d(Nt,s){for(;(Nt[s]&65535)!=Nt[s];)Nt[s+1]+=Nt[s]>>>16,Nt[s]&=65535,s++}function ae$2(Nt,s){this.g=Nt,this.h=s}function Yd(Nt,s){if(Y$1(s))throw Error("division by zero");if(Y$1(Nt))return new ae$2(V$1,V$1);if(X$1(Nt))return s=Yd(W$1(Nt),s),new ae$2(W$1(s.g),W$1(s.h));if(X$1(s))return s=Yd(Nt,W$1(s)),new ae$2(W$1(s.g),s.h);if(30<Nt.g.length){if(X$1(Nt)||X$1(s))throw Error("slowDivide_ only works with positive integers.");for(var Ot=Wd,en=s;0>=en.X(Nt);)Ot=be$1(Ot),en=be$1(en);var tn=Z(Ot,1),nn=Z(en,1);for(en=Z(en,2),Ot=Z(Ot,2);!Y$1(en);){var rn=nn.add(en);0>=rn.X(Nt)&&(tn=tn.add(Ot),nn=rn),en=Z(en,1),Ot=Z(Ot,1)}return s=Zd(Nt,tn.R(s)),new ae$2(tn,s)}for(tn=V$1;0<=Nt.X(s);){for(Ot=Math.max(1,Math.floor(Nt.ea()/s.ea())),en=Math.ceil(Math.log(Ot)/Math.LN2),en=48>=en?1:Math.pow(2,en-48),nn=U$1(Ot),rn=nn.R(s);X$1(rn)||0<rn.X(Nt);)Ot-=en,nn=U$1(Ot),rn=nn.R(s);Y$1(nn)&&(nn=Wd),tn=tn.add(nn),Nt=Zd(Nt,rn)}return new ae$2(tn,Nt)}k$3.gb=function(Nt){return Yd(this,Nt).h};k$3.and=function(Nt){for(var s=Math.max(this.g.length,Nt.g.length),Ot=[],en=0;en<s;en++)Ot[en]=this.D(en)&Nt.D(en);return new T$2(Ot,this.h&Nt.h)};k$3.or=function(Nt){for(var s=Math.max(this.g.length,Nt.g.length),Ot=[],en=0;en<s;en++)Ot[en]=this.D(en)|Nt.D(en);return new T$2(Ot,this.h|Nt.h)};k$3.xor=function(Nt){for(var s=Math.max(this.g.length,Nt.g.length),Ot=[],en=0;en<s;en++)Ot[en]=this.D(en)^Nt.D(en);return new T$2(Ot,this.h^Nt.h)};function be$1(Nt){for(var s=Nt.g.length+1,Ot=[],en=0;en<s;en++)Ot[en]=Nt.D(en)<<1|Nt.D(en-1)>>>31;return new T$2(Ot,Nt.h)}function Z(Nt,s){var Ot=s>>5;s%=32;for(var en=Nt.g.length-Ot,tn=[],nn=0;nn<en;nn++)tn[nn]=0<s?Nt.D(nn+Ot)>>>s|Nt.D(nn+Ot+1)<<32-s:Nt.D(nn+Ot);return new T$2(tn,Nt.h)}Od.prototype.createWebChannel=Od.prototype.g;Q.prototype.send=Q.prototype.u;Q.prototype.open=Q.prototype.m;Q.prototype.close=Q.prototype.close;Sb.NO_ERROR=0;Sb.TIMEOUT=8;Sb.HTTP_ERROR=6;Tb.COMPLETE="complete";Wb.EventType=Xb;Xb.OPEN="a";Xb.CLOSE="b";Xb.ERROR="c";Xb.MESSAGE="d";B$1.prototype.listen=B$1.prototype.O;P$2.prototype.listenOnce=P$2.prototype.P;P$2.prototype.getLastError=P$2.prototype.Sa;P$2.prototype.getLastErrorCode=P$2.prototype.Ia;P$2.prototype.getStatus=P$2.prototype.da;P$2.prototype.getResponseJson=P$2.prototype.Wa;P$2.prototype.getResponseText=P$2.prototype.ja;P$2.prototype.send=P$2.prototype.ha;P$2.prototype.setWithCredentials=P$2.prototype.Oa;S$2.prototype.digest=S$2.prototype.l;S$2.prototype.reset=S$2.prototype.reset;S$2.prototype.update=S$2.prototype.j;T$2.prototype.add=T$2.prototype.add;T$2.prototype.multiply=T$2.prototype.R;T$2.prototype.modulo=T$2.prototype.gb;T$2.prototype.compare=T$2.prototype.X;T$2.prototype.toNumber=T$2.prototype.ea;T$2.prototype.toString=T$2.prototype.toString;T$2.prototype.getBits=T$2.prototype.D;T$2.fromNumber=U$1;T$2.fromString=Vd;var createWebChannelTransport=function(){return new Od},getStatEventTarget=function(){return Mb()},ErrorCode$1=Sb,EventType=Tb,Event=E,Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},WebChannel=Wb,XhrIo=P$2,Md5=S$2,Integer=T$2;const w$1="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class User{constructor(s){this.uid=s}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(s){return s.uid===this.uid}}User.UNAUTHENTICATED=new User(null),User.GOOGLE_CREDENTIALS=new User("google-credentials-uid"),User.FIRST_PARTY=new User("first-party-uid"),User.MOCK_USER=new User("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let S$1="10.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b$2=new Logger("@firebase/firestore");function __PRIVATE_getLogLevel(){return b$2.logLevel}function __PRIVATE_logDebug(Nt,...s){if(b$2.logLevel<=LogLevel.DEBUG){const Ot=s.map(__PRIVATE_argToString);b$2.debug(`Firestore (${S$1}): ${Nt}`,...Ot)}}function __PRIVATE_logError(Nt,...s){if(b$2.logLevel<=LogLevel.ERROR){const Ot=s.map(__PRIVATE_argToString);b$2.error(`Firestore (${S$1}): ${Nt}`,...Ot)}}function __PRIVATE_logWarn(Nt,...s){if(b$2.logLevel<=LogLevel.WARN){const Ot=s.map(__PRIVATE_argToString);b$2.warn(`Firestore (${S$1}): ${Nt}`,...Ot)}}function __PRIVATE_argToString(Nt){if(typeof Nt=="string")return Nt;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(Ot){return JSON.stringify(Ot)}(Nt)}catch{return Nt}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fail(Nt="Unexpected state"){const s=`FIRESTORE (${S$1}) INTERNAL ASSERTION FAILED: `+Nt;throw __PRIVATE_logError(s),new Error(s)}function __PRIVATE_hardAssert(Nt,s){Nt||fail()}function __PRIVATE_debugCast(Nt,s){return Nt}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D$2={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class FirestoreError extends FirebaseError$1{constructor(s,Ot){super(s,Ot),this.code=s,this.message=Ot,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_Deferred{constructor(){this.promise=new Promise((s,Ot)=>{this.resolve=s,this.reject=Ot})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_OAuthToken{constructor(s,Ot){this.user=Ot,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${s}`)}}class __PRIVATE_EmptyAuthCredentialsProvider{getToken(){return Promise.resolve(null)}invalidateToken(){}start(s,Ot){s.enqueueRetryable(()=>Ot(User.UNAUTHENTICATED))}shutdown(){}}class __PRIVATE_EmulatorAuthCredentialsProvider{constructor(s){this.token=s,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(s,Ot){this.changeListener=Ot,s.enqueueRetryable(()=>Ot(this.token.user))}shutdown(){this.changeListener=null}}class __PRIVATE_FirebaseAuthCredentialsProvider{constructor(s){this.t=s,this.currentUser=User.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(s,Ot){let en=this.i;const tn=sn=>this.i!==en?(en=this.i,Ot(sn)):Promise.resolve();let nn=new __PRIVATE_Deferred;this.o=()=>{this.i++,this.currentUser=this.u(),nn.resolve(),nn=new __PRIVATE_Deferred,s.enqueueRetryable(()=>tn(this.currentUser))};const rn=()=>{const sn=nn;s.enqueueRetryable(async()=>{await sn.promise,await tn(this.currentUser)})},on=sn=>{__PRIVATE_logDebug("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=sn,this.auth.addAuthTokenListener(this.o),rn()};this.t.onInit(sn=>on(sn)),setTimeout(()=>{if(!this.auth){const sn=this.t.getImmediate({optional:!0});sn?on(sn):(__PRIVATE_logDebug("FirebaseAuthCredentialsProvider","Auth not yet detected"),nn.resolve(),nn=new __PRIVATE_Deferred)}},0),rn()}getToken(){const s=this.i,Ot=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(Ot).then(en=>this.i!==s?(__PRIVATE_logDebug("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):en?(__PRIVATE_hardAssert(typeof en.accessToken=="string"),new __PRIVATE_OAuthToken(en.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const s=this.auth&&this.auth.getUid();return __PRIVATE_hardAssert(s===null||typeof s=="string"),new User(s)}}class __PRIVATE_FirstPartyToken{constructor(s,Ot,en){this.l=s,this.h=Ot,this.P=en,this.type="FirstParty",this.user=User.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const s=this.T();return s&&this.I.set("Authorization",s),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class __PRIVATE_FirstPartyAuthCredentialsProvider{constructor(s,Ot,en){this.l=s,this.h=Ot,this.P=en}getToken(){return Promise.resolve(new __PRIVATE_FirstPartyToken(this.l,this.h,this.P))}start(s,Ot){s.enqueueRetryable(()=>Ot(User.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class AppCheckToken{constructor(s){this.value=s,this.type="AppCheck",this.headers=new Map,s&&s.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class __PRIVATE_FirebaseAppCheckTokenProvider{constructor(s){this.A=s,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(s,Ot){const en=nn=>{nn.error!=null&&__PRIVATE_logDebug("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${nn.error.message}`);const rn=nn.token!==this.R;return this.R=nn.token,__PRIVATE_logDebug("FirebaseAppCheckTokenProvider",`Received ${rn?"new":"existing"} token.`),rn?Ot(nn.token):Promise.resolve()};this.o=nn=>{s.enqueueRetryable(()=>en(nn))};const tn=nn=>{__PRIVATE_logDebug("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=nn,this.appCheck.addTokenListener(this.o)};this.A.onInit(nn=>tn(nn)),setTimeout(()=>{if(!this.appCheck){const nn=this.A.getImmediate({optional:!0});nn?tn(nn):__PRIVATE_logDebug("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const s=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(s).then(Ot=>Ot?(__PRIVATE_hardAssert(typeof Ot.token=="string"),this.R=Ot.token,new AppCheckToken(Ot.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_randomBytes(Nt){const s=typeof self<"u"&&(self.crypto||self.msCrypto),Ot=new Uint8Array(Nt);if(s&&typeof s.getRandomValues=="function")s.getRandomValues(Ot);else for(let en=0;en<Nt;en++)Ot[en]=Math.floor(256*Math.random());return Ot}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_AutoId{static newId(){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",Ot=Math.floor(256/s.length)*s.length;let en="";for(;en.length<20;){const tn=__PRIVATE_randomBytes(40);for(let nn=0;nn<tn.length;++nn)en.length<20&&tn[nn]<Ot&&(en+=s.charAt(tn[nn]%s.length))}return en}}function __PRIVATE_primitiveComparator(Nt,s){return Nt<s?-1:Nt>s?1:0}function __PRIVATE_arrayEquals(Nt,s,Ot){return Nt.length===s.length&&Nt.every((en,tn)=>Ot(en,s[tn]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Timestamp{constructor(s,Ot){if(this.seconds=s,this.nanoseconds=Ot,Ot<0)throw new FirestoreError(D$2.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+Ot);if(Ot>=1e9)throw new FirestoreError(D$2.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+Ot);if(s<-62135596800)throw new FirestoreError(D$2.INVALID_ARGUMENT,"Timestamp seconds out of range: "+s);if(s>=253402300800)throw new FirestoreError(D$2.INVALID_ARGUMENT,"Timestamp seconds out of range: "+s)}static now(){return Timestamp.fromMillis(Date.now())}static fromDate(s){return Timestamp.fromMillis(s.getTime())}static fromMillis(s){const Ot=Math.floor(s/1e3),en=Math.floor(1e6*(s-1e3*Ot));return new Timestamp(Ot,en)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(s){return this.seconds===s.seconds?__PRIVATE_primitiveComparator(this.nanoseconds,s.nanoseconds):__PRIVATE_primitiveComparator(this.seconds,s.seconds)}isEqual(s){return s.seconds===this.seconds&&s.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const s=this.seconds- -62135596800;return String(s).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SnapshotVersion{constructor(s){this.timestamp=s}static fromTimestamp(s){return new SnapshotVersion(s)}static min(){return new SnapshotVersion(new Timestamp(0,0))}static max(){return new SnapshotVersion(new Timestamp(253402300799,999999999))}compareTo(s){return this.timestamp._compareTo(s.timestamp)}isEqual(s){return this.timestamp.isEqual(s.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BasePath{constructor(s,Ot,en){Ot===void 0?Ot=0:Ot>s.length&&fail(),en===void 0?en=s.length-Ot:en>s.length-Ot&&fail(),this.segments=s,this.offset=Ot,this.len=en}get length(){return this.len}isEqual(s){return BasePath.comparator(this,s)===0}child(s){const Ot=this.segments.slice(this.offset,this.limit());return s instanceof BasePath?s.forEach(en=>{Ot.push(en)}):Ot.push(s),this.construct(Ot)}limit(){return this.offset+this.length}popFirst(s){return s=s===void 0?1:s,this.construct(this.segments,this.offset+s,this.length-s)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(s){return this.segments[this.offset+s]}isEmpty(){return this.length===0}isPrefixOf(s){if(s.length<this.length)return!1;for(let Ot=0;Ot<this.length;Ot++)if(this.get(Ot)!==s.get(Ot))return!1;return!0}isImmediateParentOf(s){if(this.length+1!==s.length)return!1;for(let Ot=0;Ot<this.length;Ot++)if(this.get(Ot)!==s.get(Ot))return!1;return!0}forEach(s){for(let Ot=this.offset,en=this.limit();Ot<en;Ot++)s(this.segments[Ot])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(s,Ot){const en=Math.min(s.length,Ot.length);for(let tn=0;tn<en;tn++){const nn=s.get(tn),rn=Ot.get(tn);if(nn<rn)return-1;if(nn>rn)return 1}return s.length<Ot.length?-1:s.length>Ot.length?1:0}}class ResourcePath extends BasePath{construct(s,Ot,en){return new ResourcePath(s,Ot,en)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...s){const Ot=[];for(const en of s){if(en.indexOf("//")>=0)throw new FirestoreError(D$2.INVALID_ARGUMENT,`Invalid segment (${en}). Paths must not contain // in them.`);Ot.push(...en.split("/").filter(tn=>tn.length>0))}return new ResourcePath(Ot)}static emptyPath(){return new ResourcePath([])}}const C$2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class FieldPath$1 extends BasePath{construct(s,Ot,en){return new FieldPath$1(s,Ot,en)}static isValidIdentifier(s){return C$2.test(s)}canonicalString(){return this.toArray().map(s=>(s=s.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),FieldPath$1.isValidIdentifier(s)||(s="`"+s+"`"),s)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new FieldPath$1(["__name__"])}static fromServerFormat(s){const Ot=[];let en="",tn=0;const nn=()=>{if(en.length===0)throw new FirestoreError(D$2.INVALID_ARGUMENT,`Invalid field path (${s}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);Ot.push(en),en=""};let rn=!1;for(;tn<s.length;){const on=s[tn];if(on==="\\"){if(tn+1===s.length)throw new FirestoreError(D$2.INVALID_ARGUMENT,"Path has trailing escape character: "+s);const sn=s[tn+1];if(sn!=="\\"&&sn!=="."&&sn!=="`")throw new FirestoreError(D$2.INVALID_ARGUMENT,"Path has invalid escape sequence: "+s);en+=sn,tn+=2}else on==="`"?(rn=!rn,tn++):on!=="."||rn?(en+=on,tn++):(nn(),tn++)}if(nn(),rn)throw new FirestoreError(D$2.INVALID_ARGUMENT,"Unterminated ` in path: "+s);return new FieldPath$1(Ot)}static emptyPath(){return new FieldPath$1([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DocumentKey{constructor(s){this.path=s}static fromPath(s){return new DocumentKey(ResourcePath.fromString(s))}static fromName(s){return new DocumentKey(ResourcePath.fromString(s).popFirst(5))}static empty(){return new DocumentKey(ResourcePath.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(s){return this.path.length>=2&&this.path.get(this.path.length-2)===s}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(s){return s!==null&&ResourcePath.comparator(this.path,s.path)===0}toString(){return this.path.toString()}static comparator(s,Ot){return ResourcePath.comparator(s.path,Ot.path)}static isDocumentKey(s){return s.length%2==0}static fromSegments(s){return new DocumentKey(new ResourcePath(s.slice()))}}function __PRIVATE_newIndexOffsetSuccessorFromReadTime(Nt,s){const Ot=Nt.toTimestamp().seconds,en=Nt.toTimestamp().nanoseconds+1,tn=SnapshotVersion.fromTimestamp(en===1e9?new Timestamp(Ot+1,0):new Timestamp(Ot,en));return new IndexOffset(tn,DocumentKey.empty(),s)}function __PRIVATE_newIndexOffsetFromDocument(Nt){return new IndexOffset(Nt.readTime,Nt.key,-1)}class IndexOffset{constructor(s,Ot,en){this.readTime=s,this.documentKey=Ot,this.largestBatchId=en}static min(){return new IndexOffset(SnapshotVersion.min(),DocumentKey.empty(),-1)}static max(){return new IndexOffset(SnapshotVersion.max(),DocumentKey.empty(),-1)}}function __PRIVATE_indexOffsetComparator(Nt,s){let Ot=Nt.readTime.compareTo(s.readTime);return Ot!==0?Ot:(Ot=DocumentKey.comparator(Nt.documentKey,s.documentKey),Ot!==0?Ot:__PRIVATE_primitiveComparator(Nt.largestBatchId,s.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v$1="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class PersistenceTransaction{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(s){this.onCommittedListeners.push(s)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(s=>s())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function __PRIVATE_ignoreIfPrimaryLeaseLoss(Nt){if(Nt.code!==D$2.FAILED_PRECONDITION||Nt.message!==v$1)throw Nt;__PRIVATE_logDebug("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PersistencePromise{constructor(s){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,s(Ot=>{this.isDone=!0,this.result=Ot,this.nextCallback&&this.nextCallback(Ot)},Ot=>{this.isDone=!0,this.error=Ot,this.catchCallback&&this.catchCallback(Ot)})}catch(s){return this.next(void 0,s)}next(s,Ot){return this.callbackAttached&&fail(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(Ot,this.error):this.wrapSuccess(s,this.result):new PersistencePromise((en,tn)=>{this.nextCallback=nn=>{this.wrapSuccess(s,nn).next(en,tn)},this.catchCallback=nn=>{this.wrapFailure(Ot,nn).next(en,tn)}})}toPromise(){return new Promise((s,Ot)=>{this.next(s,Ot)})}wrapUserFunction(s){try{const Ot=s();return Ot instanceof PersistencePromise?Ot:PersistencePromise.resolve(Ot)}catch(Ot){return PersistencePromise.reject(Ot)}}wrapSuccess(s,Ot){return s?this.wrapUserFunction(()=>s(Ot)):PersistencePromise.resolve(Ot)}wrapFailure(s,Ot){return s?this.wrapUserFunction(()=>s(Ot)):PersistencePromise.reject(Ot)}static resolve(s){return new PersistencePromise((Ot,en)=>{Ot(s)})}static reject(s){return new PersistencePromise((Ot,en)=>{en(s)})}static waitFor(s){return new PersistencePromise((Ot,en)=>{let tn=0,nn=0,rn=!1;s.forEach(on=>{++tn,on.next(()=>{++nn,rn&&nn===tn&&Ot()},sn=>en(sn))}),rn=!0,nn===tn&&Ot()})}static or(s){let Ot=PersistencePromise.resolve(!1);for(const en of s)Ot=Ot.next(tn=>tn?PersistencePromise.resolve(tn):en());return Ot}static forEach(s,Ot){const en=[];return s.forEach((tn,nn)=>{en.push(Ot.call(this,tn,nn))}),this.waitFor(en)}static mapArray(s,Ot){return new PersistencePromise((en,tn)=>{const nn=s.length,rn=new Array(nn);let on=0;for(let sn=0;sn<nn;sn++){const an=sn;Ot(s[an]).next(ln=>{rn[an]=ln,++on,on===nn&&en(rn)},ln=>tn(ln))}})}static doWhile(s,Ot){return new PersistencePromise((en,tn)=>{const nn=()=>{s()===!0?Ot().next(()=>{nn()},tn):en()};nn()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_SimpleDbTransaction{constructor(s,Ot){this.action=s,this.transaction=Ot,this.aborted=!1,this.V=new __PRIVATE_Deferred,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{Ot.error?this.V.reject(new __PRIVATE_IndexedDbTransactionError(s,Ot.error)):this.V.resolve()},this.transaction.onerror=en=>{const tn=__PRIVATE_checkForAndReportiOSError(en.target.error);this.V.reject(new __PRIVATE_IndexedDbTransactionError(s,tn))}}static open(s,Ot,en,tn){try{return new __PRIVATE_SimpleDbTransaction(Ot,s.transaction(tn,en))}catch(nn){throw new __PRIVATE_IndexedDbTransactionError(Ot,nn)}}get m(){return this.V.promise}abort(s){s&&this.V.reject(s),this.aborted||(__PRIVATE_logDebug("SimpleDb","Aborting transaction:",s?s.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const s=this.transaction;this.aborted||typeof s.commit!="function"||s.commit()}store(s){const Ot=this.transaction.objectStore(s);return new __PRIVATE_SimpleDbStore(Ot)}}class __PRIVATE_SimpleDb{constructor(s,Ot,en){this.name=s,this.version=Ot,this.p=en,__PRIVATE_SimpleDb.S(getUA())===12.2&&__PRIVATE_logError("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(s){return __PRIVATE_logDebug("SimpleDb","Removing database:",s),__PRIVATE_wrapRequest(window.indexedDB.deleteDatabase(s)).toPromise()}static D(){if(!isIndexedDBAvailable())return!1;if(__PRIVATE_SimpleDb.C())return!0;const s=getUA(),Ot=__PRIVATE_SimpleDb.S(s),en=0<Ot&&Ot<10,tn=__PRIVATE_SimpleDb.v(s),nn=0<tn&&tn<4.5;return!(s.indexOf("MSIE ")>0||s.indexOf("Trident/")>0||s.indexOf("Edge/")>0||en||nn)}static C(){var s;return typeof process<"u"&&((s=process.__PRIVATE_env)===null||s===void 0?void 0:s.F)==="YES"}static M(s,Ot){return s.store(Ot)}static S(s){const Ot=s.match(/i(?:phone|pad|pod) os ([\d_]+)/i),en=Ot?Ot[1].split("_").slice(0,2).join("."):"-1";return Number(en)}static v(s){const Ot=s.match(/Android ([\d.]+)/i),en=Ot?Ot[1].split(".").slice(0,2).join("."):"-1";return Number(en)}async O(s){return this.db||(__PRIVATE_logDebug("SimpleDb","Opening database:",this.name),this.db=await new Promise((Ot,en)=>{const tn=indexedDB.open(this.name,this.version);tn.onsuccess=nn=>{const rn=nn.target.result;Ot(rn)},tn.onblocked=()=>{en(new __PRIVATE_IndexedDbTransactionError(s,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},tn.onerror=nn=>{const rn=nn.target.error;rn.name==="VersionError"?en(new FirestoreError(D$2.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):rn.name==="InvalidStateError"?en(new FirestoreError(D$2.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+rn)):en(new __PRIVATE_IndexedDbTransactionError(s,rn))},tn.onupgradeneeded=nn=>{__PRIVATE_logDebug("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',nn.oldVersion);const rn=nn.target.result;this.p.N(rn,tn.transaction,nn.oldVersion,this.version).next(()=>{__PRIVATE_logDebug("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.L&&(this.db.onversionchange=Ot=>this.L(Ot)),this.db}B(s){this.L=s,this.db&&(this.db.onversionchange=Ot=>s(Ot))}async runTransaction(s,Ot,en,tn){const nn=Ot==="readonly";let rn=0;for(;;){++rn;try{this.db=await this.O(s);const on=__PRIVATE_SimpleDbTransaction.open(this.db,s,nn?"readonly":"readwrite",en),sn=tn(on).next(an=>(on.g(),an)).catch(an=>(on.abort(an),PersistencePromise.reject(an))).toPromise();return sn.catch(()=>{}),await on.m,sn}catch(on){const sn=on,an=sn.name!=="FirebaseError"&&rn<3;if(__PRIVATE_logDebug("SimpleDb","Transaction failed with error:",sn.message,"Retrying:",an),this.close(),!an)return Promise.reject(sn)}}}close(){this.db&&this.db.close(),this.db=void 0}}class __PRIVATE_IterationController{constructor(s){this.k=s,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(s){this.k=s}done(){this.q=!0}U(s){this.K=s}delete(){return __PRIVATE_wrapRequest(this.k.delete())}}class __PRIVATE_IndexedDbTransactionError extends FirestoreError{constructor(s,Ot){super(D$2.UNAVAILABLE,`IndexedDB transaction '${s}' failed: ${Ot}`),this.name="IndexedDbTransactionError"}}function __PRIVATE_isIndexedDbTransactionError(Nt){return Nt.name==="IndexedDbTransactionError"}class __PRIVATE_SimpleDbStore{constructor(s){this.store=s}put(s,Ot){let en;return Ot!==void 0?(__PRIVATE_logDebug("SimpleDb","PUT",this.store.name,s,Ot),en=this.store.put(Ot,s)):(__PRIVATE_logDebug("SimpleDb","PUT",this.store.name,"<auto-key>",s),en=this.store.put(s)),__PRIVATE_wrapRequest(en)}add(s){return __PRIVATE_logDebug("SimpleDb","ADD",this.store.name,s,s),__PRIVATE_wrapRequest(this.store.add(s))}get(s){return __PRIVATE_wrapRequest(this.store.get(s)).next(Ot=>(Ot===void 0&&(Ot=null),__PRIVATE_logDebug("SimpleDb","GET",this.store.name,s,Ot),Ot))}delete(s){return __PRIVATE_logDebug("SimpleDb","DELETE",this.store.name,s),__PRIVATE_wrapRequest(this.store.delete(s))}count(){return __PRIVATE_logDebug("SimpleDb","COUNT",this.store.name),__PRIVATE_wrapRequest(this.store.count())}W(s,Ot){const en=this.options(s,Ot),tn=en.index?this.store.index(en.index):this.store;if(typeof tn.getAll=="function"){const nn=tn.getAll(en.range);return new PersistencePromise((rn,on)=>{nn.onerror=sn=>{on(sn.target.error)},nn.onsuccess=sn=>{rn(sn.target.result)}})}{const nn=this.cursor(en),rn=[];return this.G(nn,(on,sn)=>{rn.push(sn)}).next(()=>rn)}}j(s,Ot){const en=this.store.getAll(s,Ot===null?void 0:Ot);return new PersistencePromise((tn,nn)=>{en.onerror=rn=>{nn(rn.target.error)},en.onsuccess=rn=>{tn(rn.target.result)}})}H(s,Ot){__PRIVATE_logDebug("SimpleDb","DELETE ALL",this.store.name);const en=this.options(s,Ot);en.J=!1;const tn=this.cursor(en);return this.G(tn,(nn,rn,on)=>on.delete())}Y(s,Ot){let en;Ot?en=s:(en={},Ot=s);const tn=this.cursor(en);return this.G(tn,Ot)}Z(s){const Ot=this.cursor({});return new PersistencePromise((en,tn)=>{Ot.onerror=nn=>{const rn=__PRIVATE_checkForAndReportiOSError(nn.target.error);tn(rn)},Ot.onsuccess=nn=>{const rn=nn.target.result;rn?s(rn.primaryKey,rn.value).next(on=>{on?rn.continue():en()}):en()}})}G(s,Ot){const en=[];return new PersistencePromise((tn,nn)=>{s.onerror=rn=>{nn(rn.target.error)},s.onsuccess=rn=>{const on=rn.target.result;if(!on)return void tn();const sn=new __PRIVATE_IterationController(on),an=Ot(on.primaryKey,on.value,sn);if(an instanceof PersistencePromise){const ln=an.catch(cn=>(sn.done(),PersistencePromise.reject(cn)));en.push(ln)}sn.isDone?tn():sn.$===null?on.continue():on.continue(sn.$)}}).next(()=>PersistencePromise.waitFor(en))}options(s,Ot){let en;return s!==void 0&&(typeof s=="string"?en=s:Ot=s),{index:en,range:Ot}}cursor(s){let Ot="next";if(s.reverse&&(Ot="prev"),s.index){const en=this.store.index(s.index);return s.J?en.openKeyCursor(s.range,Ot):en.openCursor(s.range,Ot)}return this.store.openCursor(s.range,Ot)}}function __PRIVATE_wrapRequest(Nt){return new PersistencePromise((s,Ot)=>{Nt.onsuccess=en=>{const tn=en.target.result;s(tn)},Nt.onerror=en=>{const tn=__PRIVATE_checkForAndReportiOSError(en.target.error);Ot(tn)}})}let F$2=!1;function __PRIVATE_checkForAndReportiOSError(Nt){const s=__PRIVATE_SimpleDb.S(getUA());if(s>=12.2&&s<13){const Ot="An internal error was encountered in the Indexed Database server";if(Nt.message.indexOf(Ot)>=0){const en=new FirestoreError("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${Ot}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return F$2||(F$2=!0,setTimeout(()=>{throw en},0)),en}}return Nt}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_ListenSequence{constructor(s,Ot){this.previousValue=s,Ot&&(Ot.sequenceNumberHandler=en=>this.se(en),this.oe=en=>Ot.writeSequenceNumber(en))}se(s){return this.previousValue=Math.max(s,this.previousValue),this.previousValue}next(){const s=++this.previousValue;return this.oe&&this.oe(s),s}}__PRIVATE_ListenSequence._e=-1;function __PRIVATE_isNullOrUndefined(Nt){return Nt==null}function __PRIVATE_isNegativeZero(Nt){return Nt===0&&1/Nt==-1/0}function isSafeInteger(Nt){return typeof Nt=="number"&&Number.isInteger(Nt)&&!__PRIVATE_isNegativeZero(Nt)&&Nt<=Number.MAX_SAFE_INTEGER&&Nt>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_objectSize(Nt){let s=0;for(const Ot in Nt)Object.prototype.hasOwnProperty.call(Nt,Ot)&&s++;return s}function forEach(Nt,s){for(const Ot in Nt)Object.prototype.hasOwnProperty.call(Nt,Ot)&&s(Ot,Nt[Ot])}function isEmpty(Nt){for(const s in Nt)if(Object.prototype.hasOwnProperty.call(Nt,s))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let SortedMap$1=class Cr{constructor(s,Ot){this.comparator=s,this.root=Ot||LLRBNode$1.EMPTY}insert(s,Ot){return new Cr(this.comparator,this.root.insert(s,Ot,this.comparator).copy(null,null,LLRBNode$1.BLACK,null,null))}remove(s){return new Cr(this.comparator,this.root.remove(s,this.comparator).copy(null,null,LLRBNode$1.BLACK,null,null))}get(s){let Ot=this.root;for(;!Ot.isEmpty();){const en=this.comparator(s,Ot.key);if(en===0)return Ot.value;en<0?Ot=Ot.left:en>0&&(Ot=Ot.right)}return null}indexOf(s){let Ot=0,en=this.root;for(;!en.isEmpty();){const tn=this.comparator(s,en.key);if(tn===0)return Ot+en.left.size;tn<0?en=en.left:(Ot+=en.left.size+1,en=en.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(s){return this.root.inorderTraversal(s)}forEach(s){this.inorderTraversal((Ot,en)=>(s(Ot,en),!1))}toString(){const s=[];return this.inorderTraversal((Ot,en)=>(s.push(`${Ot}:${en}`),!1)),`{${s.join(", ")}}`}reverseTraversal(s){return this.root.reverseTraversal(s)}getIterator(){return new SortedMapIterator$1(this.root,null,this.comparator,!1)}getIteratorFrom(s){return new SortedMapIterator$1(this.root,s,this.comparator,!1)}getReverseIterator(){return new SortedMapIterator$1(this.root,null,this.comparator,!0)}getReverseIteratorFrom(s){return new SortedMapIterator$1(this.root,s,this.comparator,!0)}},SortedMapIterator$1=class{constructor(s,Ot,en,tn){this.isReverse=tn,this.nodeStack=[];let nn=1;for(;!s.isEmpty();)if(nn=Ot?en(s.key,Ot):1,Ot&&tn&&(nn*=-1),nn<0)s=this.isReverse?s.left:s.right;else{if(nn===0){this.nodeStack.push(s);break}this.nodeStack.push(s),s=this.isReverse?s.right:s.left}}getNext(){let s=this.nodeStack.pop();const Ot={key:s.key,value:s.value};if(this.isReverse)for(s=s.left;!s.isEmpty();)this.nodeStack.push(s),s=s.right;else for(s=s.right;!s.isEmpty();)this.nodeStack.push(s),s=s.left;return Ot}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const s=this.nodeStack[this.nodeStack.length-1];return{key:s.key,value:s.value}}},LLRBNode$1=class mr{constructor(s,Ot,en,tn,nn){this.key=s,this.value=Ot,this.color=en??mr.RED,this.left=tn??mr.EMPTY,this.right=nn??mr.EMPTY,this.size=this.left.size+1+this.right.size}copy(s,Ot,en,tn,nn){return new mr(s??this.key,Ot??this.value,en??this.color,tn??this.left,nn??this.right)}isEmpty(){return!1}inorderTraversal(s){return this.left.inorderTraversal(s)||s(this.key,this.value)||this.right.inorderTraversal(s)}reverseTraversal(s){return this.right.reverseTraversal(s)||s(this.key,this.value)||this.left.reverseTraversal(s)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(s,Ot,en){let tn=this;const nn=en(s,tn.key);return tn=nn<0?tn.copy(null,null,null,tn.left.insert(s,Ot,en),null):nn===0?tn.copy(null,Ot,null,null,null):tn.copy(null,null,null,null,tn.right.insert(s,Ot,en)),tn.fixUp()}removeMin(){if(this.left.isEmpty())return mr.EMPTY;let s=this;return s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.removeMin(),null),s.fixUp()}remove(s,Ot){let en,tn=this;if(Ot(s,tn.key)<0)tn.left.isEmpty()||tn.left.isRed()||tn.left.left.isRed()||(tn=tn.moveRedLeft()),tn=tn.copy(null,null,null,tn.left.remove(s,Ot),null);else{if(tn.left.isRed()&&(tn=tn.rotateRight()),tn.right.isEmpty()||tn.right.isRed()||tn.right.left.isRed()||(tn=tn.moveRedRight()),Ot(s,tn.key)===0){if(tn.right.isEmpty())return mr.EMPTY;en=tn.right.min(),tn=tn.copy(en.key,en.value,null,null,tn.right.removeMin())}tn=tn.copy(null,null,null,null,tn.right.remove(s,Ot))}return tn.fixUp()}isRed(){return this.color}fixUp(){let s=this;return s.right.isRed()&&!s.left.isRed()&&(s=s.rotateLeft()),s.left.isRed()&&s.left.left.isRed()&&(s=s.rotateRight()),s.left.isRed()&&s.right.isRed()&&(s=s.colorFlip()),s}moveRedLeft(){let s=this.colorFlip();return s.right.left.isRed()&&(s=s.copy(null,null,null,null,s.right.rotateRight()),s=s.rotateLeft(),s=s.colorFlip()),s}moveRedRight(){let s=this.colorFlip();return s.left.left.isRed()&&(s=s.rotateRight(),s=s.colorFlip()),s}rotateLeft(){const s=this.copy(null,null,mr.RED,null,this.right.left);return this.right.copy(null,null,this.color,s,null)}rotateRight(){const s=this.copy(null,null,mr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,s)}colorFlip(){const s=this.left.copy(null,null,!this.left.color,null,null),Ot=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,s,Ot)}checkMaxDepth(){const s=this.check();return Math.pow(2,s)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw fail();const s=this.left.check();if(s!==this.right.check())throw fail();return s+(this.isRed()?0:1)}};LLRBNode$1.EMPTY=null,LLRBNode$1.RED=!0,LLRBNode$1.BLACK=!1;LLRBNode$1.EMPTY=new class{constructor(){this.size=0}get key(){throw fail()}get value(){throw fail()}get color(){throw fail()}get left(){throw fail()}get right(){throw fail()}copy(s,Ot,en,tn,nn){return this}insert(s,Ot,en){return new LLRBNode$1(s,Ot)}remove(s,Ot){return this}isEmpty(){return!0}inorderTraversal(s){return!1}reverseTraversal(s){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SortedSet{constructor(s){this.comparator=s,this.data=new SortedMap$1(this.comparator)}has(s){return this.data.get(s)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(s){return this.data.indexOf(s)}forEach(s){this.data.inorderTraversal((Ot,en)=>(s(Ot),!1))}forEachInRange(s,Ot){const en=this.data.getIteratorFrom(s[0]);for(;en.hasNext();){const tn=en.getNext();if(this.comparator(tn.key,s[1])>=0)return;Ot(tn.key)}}forEachWhile(s,Ot){let en;for(en=Ot!==void 0?this.data.getIteratorFrom(Ot):this.data.getIterator();en.hasNext();)if(!s(en.getNext().key))return}firstAfterOrEqual(s){const Ot=this.data.getIteratorFrom(s);return Ot.hasNext()?Ot.getNext().key:null}getIterator(){return new SortedSetIterator(this.data.getIterator())}getIteratorFrom(s){return new SortedSetIterator(this.data.getIteratorFrom(s))}add(s){return this.copy(this.data.remove(s).insert(s,!0))}delete(s){return this.has(s)?this.copy(this.data.remove(s)):this}isEmpty(){return this.data.isEmpty()}unionWith(s){let Ot=this;return Ot.size<s.size&&(Ot=s,s=this),s.forEach(en=>{Ot=Ot.add(en)}),Ot}isEqual(s){if(!(s instanceof SortedSet)||this.size!==s.size)return!1;const Ot=this.data.getIterator(),en=s.data.getIterator();for(;Ot.hasNext();){const tn=Ot.getNext().key,nn=en.getNext().key;if(this.comparator(tn,nn)!==0)return!1}return!0}toArray(){const s=[];return this.forEach(Ot=>{s.push(Ot)}),s}toString(){const s=[];return this.forEach(Ot=>s.push(Ot)),"SortedSet("+s.toString()+")"}copy(s){const Ot=new SortedSet(this.comparator);return Ot.data=s,Ot}}class SortedSetIterator{constructor(s){this.iter=s}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FieldMask{constructor(s){this.fields=s,s.sort(FieldPath$1.comparator)}static empty(){return new FieldMask([])}unionWith(s){let Ot=new SortedSet(FieldPath$1.comparator);for(const en of this.fields)Ot=Ot.add(en);for(const en of s)Ot=Ot.add(en);return new FieldMask(Ot.toArray())}covers(s){for(const Ot of this.fields)if(Ot.isPrefixOf(s))return!0;return!1}isEqual(s){return __PRIVATE_arrayEquals(this.fields,s.fields,(Ot,en)=>Ot.isEqual(en))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_Base64DecodeError extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ByteString{constructor(s){this.binaryString=s}static fromBase64String(s){const Ot=function(tn){try{return atob(tn)}catch(nn){throw typeof DOMException<"u"&&nn instanceof DOMException?new __PRIVATE_Base64DecodeError("Invalid base64 string: "+nn):nn}}(s);return new ByteString(Ot)}static fromUint8Array(s){const Ot=function(tn){let nn="";for(let rn=0;rn<tn.length;++rn)nn+=String.fromCharCode(tn[rn]);return nn}(s);return new ByteString(Ot)}[Symbol.iterator](){let s=0;return{next:()=>s<this.binaryString.length?{value:this.binaryString.charCodeAt(s++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(Ot){return btoa(Ot)}(this.binaryString)}toUint8Array(){return function(Ot){const en=new Uint8Array(Ot.length);for(let tn=0;tn<Ot.length;tn++)en[tn]=Ot.charCodeAt(tn);return en}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(s){return __PRIVATE_primitiveComparator(this.binaryString,s.binaryString)}isEqual(s){return this.binaryString===s.binaryString}}ByteString.EMPTY_BYTE_STRING=new ByteString("");const ee$1=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function __PRIVATE_normalizeTimestamp(Nt){if(__PRIVATE_hardAssert(!!Nt),typeof Nt=="string"){let s=0;const Ot=ee$1.exec(Nt);if(__PRIVATE_hardAssert(!!Ot),Ot[1]){let tn=Ot[1];tn=(tn+"000000000").substr(0,9),s=Number(tn)}const en=new Date(Nt);return{seconds:Math.floor(en.getTime()/1e3),nanos:s}}return{seconds:__PRIVATE_normalizeNumber(Nt.seconds),nanos:__PRIVATE_normalizeNumber(Nt.nanos)}}function __PRIVATE_normalizeNumber(Nt){return typeof Nt=="number"?Nt:typeof Nt=="string"?Number(Nt):0}function __PRIVATE_normalizeByteString(Nt){return typeof Nt=="string"?ByteString.fromBase64String(Nt):ByteString.fromUint8Array(Nt)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_isServerTimestamp(Nt){var s,Ot;return((Ot=(((s=Nt==null?void 0:Nt.mapValue)===null||s===void 0?void 0:s.fields)||{}).__type__)===null||Ot===void 0?void 0:Ot.stringValue)==="server_timestamp"}function __PRIVATE_getPreviousValue(Nt){const s=Nt.mapValue.fields.__previous_value__;return __PRIVATE_isServerTimestamp(s)?__PRIVATE_getPreviousValue(s):s}function __PRIVATE_getLocalWriteTime(Nt){const s=__PRIVATE_normalizeTimestamp(Nt.mapValue.fields.__local_write_time__.timestampValue);return new Timestamp(s.seconds,s.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DatabaseInfo{constructor(s,Ot,en,tn,nn,rn,on,sn,an){this.databaseId=s,this.appId=Ot,this.persistenceKey=en,this.host=tn,this.ssl=nn,this.forceLongPolling=rn,this.autoDetectLongPolling=on,this.longPollingOptions=sn,this.useFetchStreams=an}}class DatabaseId{constructor(s,Ot){this.projectId=s,this.database=Ot||"(default)"}static empty(){return new DatabaseId("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(s){return s instanceof DatabaseId&&s.projectId===this.projectId&&s.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const te$1={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function __PRIVATE_typeOrder(Nt){return"nullValue"in Nt?0:"booleanValue"in Nt?1:"integerValue"in Nt||"doubleValue"in Nt?2:"timestampValue"in Nt?3:"stringValue"in Nt?5:"bytesValue"in Nt?6:"referenceValue"in Nt?7:"geoPointValue"in Nt?8:"arrayValue"in Nt?9:"mapValue"in Nt?__PRIVATE_isServerTimestamp(Nt)?4:__PRIVATE_isMaxValue(Nt)?9007199254740991:10:fail()}function __PRIVATE_valueEquals(Nt,s){if(Nt===s)return!0;const Ot=__PRIVATE_typeOrder(Nt);if(Ot!==__PRIVATE_typeOrder(s))return!1;switch(Ot){case 0:case 9007199254740991:return!0;case 1:return Nt.booleanValue===s.booleanValue;case 4:return __PRIVATE_getLocalWriteTime(Nt).isEqual(__PRIVATE_getLocalWriteTime(s));case 3:return function(tn,nn){if(typeof tn.timestampValue=="string"&&typeof nn.timestampValue=="string"&&tn.timestampValue.length===nn.timestampValue.length)return tn.timestampValue===nn.timestampValue;const rn=__PRIVATE_normalizeTimestamp(tn.timestampValue),on=__PRIVATE_normalizeTimestamp(nn.timestampValue);return rn.seconds===on.seconds&&rn.nanos===on.nanos}(Nt,s);case 5:return Nt.stringValue===s.stringValue;case 6:return function(tn,nn){return __PRIVATE_normalizeByteString(tn.bytesValue).isEqual(__PRIVATE_normalizeByteString(nn.bytesValue))}(Nt,s);case 7:return Nt.referenceValue===s.referenceValue;case 8:return function(tn,nn){return __PRIVATE_normalizeNumber(tn.geoPointValue.latitude)===__PRIVATE_normalizeNumber(nn.geoPointValue.latitude)&&__PRIVATE_normalizeNumber(tn.geoPointValue.longitude)===__PRIVATE_normalizeNumber(nn.geoPointValue.longitude)}(Nt,s);case 2:return function(tn,nn){if("integerValue"in tn&&"integerValue"in nn)return __PRIVATE_normalizeNumber(tn.integerValue)===__PRIVATE_normalizeNumber(nn.integerValue);if("doubleValue"in tn&&"doubleValue"in nn){const rn=__PRIVATE_normalizeNumber(tn.doubleValue),on=__PRIVATE_normalizeNumber(nn.doubleValue);return rn===on?__PRIVATE_isNegativeZero(rn)===__PRIVATE_isNegativeZero(on):isNaN(rn)&&isNaN(on)}return!1}(Nt,s);case 9:return __PRIVATE_arrayEquals(Nt.arrayValue.values||[],s.arrayValue.values||[],__PRIVATE_valueEquals);case 10:return function(tn,nn){const rn=tn.mapValue.fields||{},on=nn.mapValue.fields||{};if(__PRIVATE_objectSize(rn)!==__PRIVATE_objectSize(on))return!1;for(const sn in rn)if(rn.hasOwnProperty(sn)&&(on[sn]===void 0||!__PRIVATE_valueEquals(rn[sn],on[sn])))return!1;return!0}(Nt,s);default:return fail()}}function __PRIVATE_arrayValueContains(Nt,s){return(Nt.values||[]).find(Ot=>__PRIVATE_valueEquals(Ot,s))!==void 0}function __PRIVATE_valueCompare(Nt,s){if(Nt===s)return 0;const Ot=__PRIVATE_typeOrder(Nt),en=__PRIVATE_typeOrder(s);if(Ot!==en)return __PRIVATE_primitiveComparator(Ot,en);switch(Ot){case 0:case 9007199254740991:return 0;case 1:return __PRIVATE_primitiveComparator(Nt.booleanValue,s.booleanValue);case 2:return function(nn,rn){const on=__PRIVATE_normalizeNumber(nn.integerValue||nn.doubleValue),sn=__PRIVATE_normalizeNumber(rn.integerValue||rn.doubleValue);return on<sn?-1:on>sn?1:on===sn?0:isNaN(on)?isNaN(sn)?0:-1:1}(Nt,s);case 3:return __PRIVATE_compareTimestamps(Nt.timestampValue,s.timestampValue);case 4:return __PRIVATE_compareTimestamps(__PRIVATE_getLocalWriteTime(Nt),__PRIVATE_getLocalWriteTime(s));case 5:return __PRIVATE_primitiveComparator(Nt.stringValue,s.stringValue);case 6:return function(nn,rn){const on=__PRIVATE_normalizeByteString(nn),sn=__PRIVATE_normalizeByteString(rn);return on.compareTo(sn)}(Nt.bytesValue,s.bytesValue);case 7:return function(nn,rn){const on=nn.split("/"),sn=rn.split("/");for(let an=0;an<on.length&&an<sn.length;an++){const ln=__PRIVATE_primitiveComparator(on[an],sn[an]);if(ln!==0)return ln}return __PRIVATE_primitiveComparator(on.length,sn.length)}(Nt.referenceValue,s.referenceValue);case 8:return function(nn,rn){const on=__PRIVATE_primitiveComparator(__PRIVATE_normalizeNumber(nn.latitude),__PRIVATE_normalizeNumber(rn.latitude));return on!==0?on:__PRIVATE_primitiveComparator(__PRIVATE_normalizeNumber(nn.longitude),__PRIVATE_normalizeNumber(rn.longitude))}(Nt.geoPointValue,s.geoPointValue);case 9:return function(nn,rn){const on=nn.values||[],sn=rn.values||[];for(let an=0;an<on.length&&an<sn.length;++an){const ln=__PRIVATE_valueCompare(on[an],sn[an]);if(ln)return ln}return __PRIVATE_primitiveComparator(on.length,sn.length)}(Nt.arrayValue,s.arrayValue);case 10:return function(nn,rn){if(nn===te$1.mapValue&&rn===te$1.mapValue)return 0;if(nn===te$1.mapValue)return 1;if(rn===te$1.mapValue)return-1;const on=nn.fields||{},sn=Object.keys(on),an=rn.fields||{},ln=Object.keys(an);sn.sort(),ln.sort();for(let cn=0;cn<sn.length&&cn<ln.length;++cn){const un=__PRIVATE_primitiveComparator(sn[cn],ln[cn]);if(un!==0)return un;const dn=__PRIVATE_valueCompare(on[sn[cn]],an[ln[cn]]);if(dn!==0)return dn}return __PRIVATE_primitiveComparator(sn.length,ln.length)}(Nt.mapValue,s.mapValue);default:throw fail()}}function __PRIVATE_compareTimestamps(Nt,s){if(typeof Nt=="string"&&typeof s=="string"&&Nt.length===s.length)return __PRIVATE_primitiveComparator(Nt,s);const Ot=__PRIVATE_normalizeTimestamp(Nt),en=__PRIVATE_normalizeTimestamp(s),tn=__PRIVATE_primitiveComparator(Ot.seconds,en.seconds);return tn!==0?tn:__PRIVATE_primitiveComparator(Ot.nanos,en.nanos)}function canonicalId(Nt){return __PRIVATE_canonifyValue(Nt)}function __PRIVATE_canonifyValue(Nt){return"nullValue"in Nt?"null":"booleanValue"in Nt?""+Nt.booleanValue:"integerValue"in Nt?""+Nt.integerValue:"doubleValue"in Nt?""+Nt.doubleValue:"timestampValue"in Nt?function(Ot){const en=__PRIVATE_normalizeTimestamp(Ot);return`time(${en.seconds},${en.nanos})`}(Nt.timestampValue):"stringValue"in Nt?Nt.stringValue:"bytesValue"in Nt?function(Ot){return __PRIVATE_normalizeByteString(Ot).toBase64()}(Nt.bytesValue):"referenceValue"in Nt?function(Ot){return DocumentKey.fromName(Ot).toString()}(Nt.referenceValue):"geoPointValue"in Nt?function(Ot){return`geo(${Ot.latitude},${Ot.longitude})`}(Nt.geoPointValue):"arrayValue"in Nt?function(Ot){let en="[",tn=!0;for(const nn of Ot.values||[])tn?tn=!1:en+=",",en+=__PRIVATE_canonifyValue(nn);return en+"]"}(Nt.arrayValue):"mapValue"in Nt?function(Ot){const en=Object.keys(Ot.fields||{}).sort();let tn="{",nn=!0;for(const rn of en)nn?nn=!1:tn+=",",tn+=`${rn}:${__PRIVATE_canonifyValue(Ot.fields[rn])}`;return tn+"}"}(Nt.mapValue):fail()}function __PRIVATE_refValue(Nt,s){return{referenceValue:`projects/${Nt.projectId}/databases/${Nt.database}/documents/${s.path.canonicalString()}`}}function isInteger(Nt){return!!Nt&&"integerValue"in Nt}function isArray$3(Nt){return!!Nt&&"arrayValue"in Nt}function __PRIVATE_isNullValue(Nt){return!!Nt&&"nullValue"in Nt}function __PRIVATE_isNanValue(Nt){return!!Nt&&"doubleValue"in Nt&&isNaN(Number(Nt.doubleValue))}function __PRIVATE_isMapValue(Nt){return!!Nt&&"mapValue"in Nt}function __PRIVATE_deepClone(Nt){if(Nt.geoPointValue)return{geoPointValue:Object.assign({},Nt.geoPointValue)};if(Nt.timestampValue&&typeof Nt.timestampValue=="object")return{timestampValue:Object.assign({},Nt.timestampValue)};if(Nt.mapValue){const s={mapValue:{fields:{}}};return forEach(Nt.mapValue.fields,(Ot,en)=>s.mapValue.fields[Ot]=__PRIVATE_deepClone(en)),s}if(Nt.arrayValue){const s={arrayValue:{values:[]}};for(let Ot=0;Ot<(Nt.arrayValue.values||[]).length;++Ot)s.arrayValue.values[Ot]=__PRIVATE_deepClone(Nt.arrayValue.values[Ot]);return s}return Object.assign({},Nt)}function __PRIVATE_isMaxValue(Nt){return(((Nt.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ObjectValue{constructor(s){this.value=s}static empty(){return new ObjectValue({mapValue:{}})}field(s){if(s.isEmpty())return this.value;{let Ot=this.value;for(let en=0;en<s.length-1;++en)if(Ot=(Ot.mapValue.fields||{})[s.get(en)],!__PRIVATE_isMapValue(Ot))return null;return Ot=(Ot.mapValue.fields||{})[s.lastSegment()],Ot||null}}set(s,Ot){this.getFieldsMap(s.popLast())[s.lastSegment()]=__PRIVATE_deepClone(Ot)}setAll(s){let Ot=FieldPath$1.emptyPath(),en={},tn=[];s.forEach((rn,on)=>{if(!Ot.isImmediateParentOf(on)){const sn=this.getFieldsMap(Ot);this.applyChanges(sn,en,tn),en={},tn=[],Ot=on.popLast()}rn?en[on.lastSegment()]=__PRIVATE_deepClone(rn):tn.push(on.lastSegment())});const nn=this.getFieldsMap(Ot);this.applyChanges(nn,en,tn)}delete(s){const Ot=this.field(s.popLast());__PRIVATE_isMapValue(Ot)&&Ot.mapValue.fields&&delete Ot.mapValue.fields[s.lastSegment()]}isEqual(s){return __PRIVATE_valueEquals(this.value,s.value)}getFieldsMap(s){let Ot=this.value;Ot.mapValue.fields||(Ot.mapValue={fields:{}});for(let en=0;en<s.length;++en){let tn=Ot.mapValue.fields[s.get(en)];__PRIVATE_isMapValue(tn)&&tn.mapValue.fields||(tn={mapValue:{fields:{}}},Ot.mapValue.fields[s.get(en)]=tn),Ot=tn}return Ot.mapValue.fields}applyChanges(s,Ot,en){forEach(Ot,(tn,nn)=>s[tn]=nn);for(const tn of en)delete s[tn]}clone(){return new ObjectValue(__PRIVATE_deepClone(this.value))}}function __PRIVATE_extractFieldMask(Nt){const s=[];return forEach(Nt.fields,(Ot,en)=>{const tn=new FieldPath$1([Ot]);if(__PRIVATE_isMapValue(en)){const nn=__PRIVATE_extractFieldMask(en.mapValue).fields;if(nn.length===0)s.push(tn);else for(const rn of nn)s.push(tn.child(rn))}else s.push(tn)}),new FieldMask(s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MutableDocument{constructor(s,Ot,en,tn,nn,rn,on){this.key=s,this.documentType=Ot,this.version=en,this.readTime=tn,this.createTime=nn,this.data=rn,this.documentState=on}static newInvalidDocument(s){return new MutableDocument(s,0,SnapshotVersion.min(),SnapshotVersion.min(),SnapshotVersion.min(),ObjectValue.empty(),0)}static newFoundDocument(s,Ot,en,tn){return new MutableDocument(s,1,Ot,SnapshotVersion.min(),en,tn,0)}static newNoDocument(s,Ot){return new MutableDocument(s,2,Ot,SnapshotVersion.min(),SnapshotVersion.min(),ObjectValue.empty(),0)}static newUnknownDocument(s,Ot){return new MutableDocument(s,3,Ot,SnapshotVersion.min(),SnapshotVersion.min(),ObjectValue.empty(),2)}convertToFoundDocument(s,Ot){return!this.createTime.isEqual(SnapshotVersion.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=s),this.version=s,this.documentType=1,this.data=Ot,this.documentState=0,this}convertToNoDocument(s){return this.version=s,this.documentType=2,this.data=ObjectValue.empty(),this.documentState=0,this}convertToUnknownDocument(s){return this.version=s,this.documentType=3,this.data=ObjectValue.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=SnapshotVersion.min(),this}setReadTime(s){return this.readTime=s,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(s){return s instanceof MutableDocument&&this.key.isEqual(s.key)&&this.version.isEqual(s.version)&&this.documentType===s.documentType&&this.documentState===s.documentState&&this.data.isEqual(s.data)}mutableCopy(){return new MutableDocument(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bound{constructor(s,Ot){this.position=s,this.inclusive=Ot}}function __PRIVATE_boundCompareToDocument(Nt,s,Ot){let en=0;for(let tn=0;tn<Nt.position.length;tn++){const nn=s[tn],rn=Nt.position[tn];if(nn.field.isKeyField()?en=DocumentKey.comparator(DocumentKey.fromName(rn.referenceValue),Ot.key):en=__PRIVATE_valueCompare(rn,Ot.data.field(nn.field)),nn.dir==="desc"&&(en*=-1),en!==0)break}return en}function __PRIVATE_boundEquals(Nt,s){if(Nt===null)return s===null;if(s===null||Nt.inclusive!==s.inclusive||Nt.position.length!==s.position.length)return!1;for(let Ot=0;Ot<Nt.position.length;Ot++)if(!__PRIVATE_valueEquals(Nt.position[Ot],s.position[Ot]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OrderBy{constructor(s,Ot="asc"){this.field=s,this.dir=Ot}}function __PRIVATE_orderByEquals(Nt,s){return Nt.dir===s.dir&&Nt.field.isEqual(s.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Filter{}class FieldFilter extends Filter{constructor(s,Ot,en){super(),this.field=s,this.op=Ot,this.value=en}static create(s,Ot,en){return s.isKeyField()?Ot==="in"||Ot==="not-in"?this.createKeyFieldInFilter(s,Ot,en):new __PRIVATE_KeyFieldFilter(s,Ot,en):Ot==="array-contains"?new __PRIVATE_ArrayContainsFilter(s,en):Ot==="in"?new __PRIVATE_InFilter(s,en):Ot==="not-in"?new __PRIVATE_NotInFilter(s,en):Ot==="array-contains-any"?new __PRIVATE_ArrayContainsAnyFilter(s,en):new FieldFilter(s,Ot,en)}static createKeyFieldInFilter(s,Ot,en){return Ot==="in"?new __PRIVATE_KeyFieldInFilter(s,en):new __PRIVATE_KeyFieldNotInFilter(s,en)}matches(s){const Ot=s.data.field(this.field);return this.op==="!="?Ot!==null&&this.matchesComparison(__PRIVATE_valueCompare(Ot,this.value)):Ot!==null&&__PRIVATE_typeOrder(this.value)===__PRIVATE_typeOrder(Ot)&&this.matchesComparison(__PRIVATE_valueCompare(Ot,this.value))}matchesComparison(s){switch(this.op){case"<":return s<0;case"<=":return s<=0;case"==":return s===0;case"!=":return s!==0;case">":return s>0;case">=":return s>=0;default:return fail()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class CompositeFilter extends Filter{constructor(s,Ot){super(),this.filters=s,this.op=Ot,this.ue=null}static create(s,Ot){return new CompositeFilter(s,Ot)}matches(s){return __PRIVATE_compositeFilterIsConjunction(this)?this.filters.find(Ot=>!Ot.matches(s))===void 0:this.filters.find(Ot=>Ot.matches(s))!==void 0}getFlattenedFilters(){return this.ue!==null||(this.ue=this.filters.reduce((s,Ot)=>s.concat(Ot.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function __PRIVATE_compositeFilterIsConjunction(Nt){return Nt.op==="and"}function __PRIVATE_compositeFilterIsFlatConjunction(Nt){return __PRIVATE_compositeFilterIsFlat(Nt)&&__PRIVATE_compositeFilterIsConjunction(Nt)}function __PRIVATE_compositeFilterIsFlat(Nt){for(const s of Nt.filters)if(s instanceof CompositeFilter)return!1;return!0}function __PRIVATE_canonifyFilter(Nt){if(Nt instanceof FieldFilter)return Nt.field.canonicalString()+Nt.op.toString()+canonicalId(Nt.value);if(__PRIVATE_compositeFilterIsFlatConjunction(Nt))return Nt.filters.map(s=>__PRIVATE_canonifyFilter(s)).join(",");{const s=Nt.filters.map(Ot=>__PRIVATE_canonifyFilter(Ot)).join(",");return`${Nt.op}(${s})`}}function __PRIVATE_filterEquals(Nt,s){return Nt instanceof FieldFilter?function(en,tn){return tn instanceof FieldFilter&&en.op===tn.op&&en.field.isEqual(tn.field)&&__PRIVATE_valueEquals(en.value,tn.value)}(Nt,s):Nt instanceof CompositeFilter?function(en,tn){return tn instanceof CompositeFilter&&en.op===tn.op&&en.filters.length===tn.filters.length?en.filters.reduce((nn,rn,on)=>nn&&__PRIVATE_filterEquals(rn,tn.filters[on]),!0):!1}(Nt,s):void fail()}function __PRIVATE_stringifyFilter(Nt){return Nt instanceof FieldFilter?function(Ot){return`${Ot.field.canonicalString()} ${Ot.op} ${canonicalId(Ot.value)}`}(Nt):Nt instanceof CompositeFilter?function(Ot){return Ot.op.toString()+" {"+Ot.getFilters().map(__PRIVATE_stringifyFilter).join(" ,")+"}"}(Nt):"Filter"}class __PRIVATE_KeyFieldFilter extends FieldFilter{constructor(s,Ot,en){super(s,Ot,en),this.key=DocumentKey.fromName(en.referenceValue)}matches(s){const Ot=DocumentKey.comparator(s.key,this.key);return this.matchesComparison(Ot)}}class __PRIVATE_KeyFieldInFilter extends FieldFilter{constructor(s,Ot){super(s,"in",Ot),this.keys=__PRIVATE_extractDocumentKeysFromArrayValue("in",Ot)}matches(s){return this.keys.some(Ot=>Ot.isEqual(s.key))}}class __PRIVATE_KeyFieldNotInFilter extends FieldFilter{constructor(s,Ot){super(s,"not-in",Ot),this.keys=__PRIVATE_extractDocumentKeysFromArrayValue("not-in",Ot)}matches(s){return!this.keys.some(Ot=>Ot.isEqual(s.key))}}function __PRIVATE_extractDocumentKeysFromArrayValue(Nt,s){var Ot;return(((Ot=s.arrayValue)===null||Ot===void 0?void 0:Ot.values)||[]).map(en=>DocumentKey.fromName(en.referenceValue))}class __PRIVATE_ArrayContainsFilter extends FieldFilter{constructor(s,Ot){super(s,"array-contains",Ot)}matches(s){const Ot=s.data.field(this.field);return isArray$3(Ot)&&__PRIVATE_arrayValueContains(Ot.arrayValue,this.value)}}class __PRIVATE_InFilter extends FieldFilter{constructor(s,Ot){super(s,"in",Ot)}matches(s){const Ot=s.data.field(this.field);return Ot!==null&&__PRIVATE_arrayValueContains(this.value.arrayValue,Ot)}}class __PRIVATE_NotInFilter extends FieldFilter{constructor(s,Ot){super(s,"not-in",Ot)}matches(s){if(__PRIVATE_arrayValueContains(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const Ot=s.data.field(this.field);return Ot!==null&&!__PRIVATE_arrayValueContains(this.value.arrayValue,Ot)}}class __PRIVATE_ArrayContainsAnyFilter extends FieldFilter{constructor(s,Ot){super(s,"array-contains-any",Ot)}matches(s){const Ot=s.data.field(this.field);return!(!isArray$3(Ot)||!Ot.arrayValue.values)&&Ot.arrayValue.values.some(en=>__PRIVATE_arrayValueContains(this.value.arrayValue,en))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_TargetImpl{constructor(s,Ot=null,en=[],tn=[],nn=null,rn=null,on=null){this.path=s,this.collectionGroup=Ot,this.orderBy=en,this.filters=tn,this.limit=nn,this.startAt=rn,this.endAt=on,this.ce=null}}function __PRIVATE_newTarget(Nt,s=null,Ot=[],en=[],tn=null,nn=null,rn=null){return new __PRIVATE_TargetImpl(Nt,s,Ot,en,tn,nn,rn)}function __PRIVATE_canonifyTarget(Nt){const s=__PRIVATE_debugCast(Nt);if(s.ce===null){let Ot=s.path.canonicalString();s.collectionGroup!==null&&(Ot+="|cg:"+s.collectionGroup),Ot+="|f:",Ot+=s.filters.map(en=>__PRIVATE_canonifyFilter(en)).join(","),Ot+="|ob:",Ot+=s.orderBy.map(en=>function(nn){return nn.field.canonicalString()+nn.dir}(en)).join(","),__PRIVATE_isNullOrUndefined(s.limit)||(Ot+="|l:",Ot+=s.limit),s.startAt&&(Ot+="|lb:",Ot+=s.startAt.inclusive?"b:":"a:",Ot+=s.startAt.position.map(en=>canonicalId(en)).join(",")),s.endAt&&(Ot+="|ub:",Ot+=s.endAt.inclusive?"a:":"b:",Ot+=s.endAt.position.map(en=>canonicalId(en)).join(",")),s.ce=Ot}return s.ce}function __PRIVATE_targetEquals(Nt,s){if(Nt.limit!==s.limit||Nt.orderBy.length!==s.orderBy.length)return!1;for(let Ot=0;Ot<Nt.orderBy.length;Ot++)if(!__PRIVATE_orderByEquals(Nt.orderBy[Ot],s.orderBy[Ot]))return!1;if(Nt.filters.length!==s.filters.length)return!1;for(let Ot=0;Ot<Nt.filters.length;Ot++)if(!__PRIVATE_filterEquals(Nt.filters[Ot],s.filters[Ot]))return!1;return Nt.collectionGroup===s.collectionGroup&&!!Nt.path.isEqual(s.path)&&!!__PRIVATE_boundEquals(Nt.startAt,s.startAt)&&__PRIVATE_boundEquals(Nt.endAt,s.endAt)}function __PRIVATE_targetIsDocumentTarget(Nt){return DocumentKey.isDocumentKey(Nt.path)&&Nt.collectionGroup===null&&Nt.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_QueryImpl{constructor(s,Ot=null,en=[],tn=[],nn=null,rn="F",on=null,sn=null){this.path=s,this.collectionGroup=Ot,this.explicitOrderBy=en,this.filters=tn,this.limit=nn,this.limitType=rn,this.startAt=on,this.endAt=sn,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}}function __PRIVATE_newQuery(Nt,s,Ot,en,tn,nn,rn,on){return new __PRIVATE_QueryImpl(Nt,s,Ot,en,tn,nn,rn,on)}function __PRIVATE_newQueryForPath(Nt){return new __PRIVATE_QueryImpl(Nt)}function __PRIVATE_queryMatchesAllDocuments(Nt){return Nt.filters.length===0&&Nt.limit===null&&Nt.startAt==null&&Nt.endAt==null&&(Nt.explicitOrderBy.length===0||Nt.explicitOrderBy.length===1&&Nt.explicitOrderBy[0].field.isKeyField())}function __PRIVATE_isCollectionGroupQuery(Nt){return Nt.collectionGroup!==null}function __PRIVATE_queryNormalizedOrderBy(Nt){const s=__PRIVATE_debugCast(Nt);if(s.le===null){s.le=[];const Ot=new Set;for(const nn of s.explicitOrderBy)s.le.push(nn),Ot.add(nn.field.canonicalString());const en=s.explicitOrderBy.length>0?s.explicitOrderBy[s.explicitOrderBy.length-1].dir:"asc";(function(rn){let on=new SortedSet(FieldPath$1.comparator);return rn.filters.forEach(sn=>{sn.getFlattenedFilters().forEach(an=>{an.isInequality()&&(on=on.add(an.field))})}),on})(s).forEach(nn=>{Ot.has(nn.canonicalString())||nn.isKeyField()||s.le.push(new OrderBy(nn,en))}),Ot.has(FieldPath$1.keyField().canonicalString())||s.le.push(new OrderBy(FieldPath$1.keyField(),en))}return s.le}function __PRIVATE_queryToTarget(Nt){const s=__PRIVATE_debugCast(Nt);return s.he||(s.he=__PRIVATE__queryToTarget(s,__PRIVATE_queryNormalizedOrderBy(Nt))),s.he}function __PRIVATE__queryToTarget(Nt,s){if(Nt.limitType==="F")return __PRIVATE_newTarget(Nt.path,Nt.collectionGroup,s,Nt.filters,Nt.limit,Nt.startAt,Nt.endAt);{s=s.map(tn=>{const nn=tn.dir==="desc"?"asc":"desc";return new OrderBy(tn.field,nn)});const Ot=Nt.endAt?new Bound(Nt.endAt.position,Nt.endAt.inclusive):null,en=Nt.startAt?new Bound(Nt.startAt.position,Nt.startAt.inclusive):null;return __PRIVATE_newTarget(Nt.path,Nt.collectionGroup,s,Nt.filters,Nt.limit,Ot,en)}}function __PRIVATE_queryWithAddedFilter(Nt,s){const Ot=Nt.filters.concat([s]);return new __PRIVATE_QueryImpl(Nt.path,Nt.collectionGroup,Nt.explicitOrderBy.slice(),Ot,Nt.limit,Nt.limitType,Nt.startAt,Nt.endAt)}function __PRIVATE_queryWithLimit(Nt,s,Ot){return new __PRIVATE_QueryImpl(Nt.path,Nt.collectionGroup,Nt.explicitOrderBy.slice(),Nt.filters.slice(),s,Ot,Nt.startAt,Nt.endAt)}function __PRIVATE_queryEquals(Nt,s){return __PRIVATE_targetEquals(__PRIVATE_queryToTarget(Nt),__PRIVATE_queryToTarget(s))&&Nt.limitType===s.limitType}function __PRIVATE_canonifyQuery(Nt){return`${__PRIVATE_canonifyTarget(__PRIVATE_queryToTarget(Nt))}|lt:${Nt.limitType}`}function __PRIVATE_stringifyQuery(Nt){return`Query(target=${function(Ot){let en=Ot.path.canonicalString();return Ot.collectionGroup!==null&&(en+=" collectionGroup="+Ot.collectionGroup),Ot.filters.length>0&&(en+=`, filters: [${Ot.filters.map(tn=>__PRIVATE_stringifyFilter(tn)).join(", ")}]`),__PRIVATE_isNullOrUndefined(Ot.limit)||(en+=", limit: "+Ot.limit),Ot.orderBy.length>0&&(en+=`, orderBy: [${Ot.orderBy.map(tn=>function(rn){return`${rn.field.canonicalString()} (${rn.dir})`}(tn)).join(", ")}]`),Ot.startAt&&(en+=", startAt: ",en+=Ot.startAt.inclusive?"b:":"a:",en+=Ot.startAt.position.map(tn=>canonicalId(tn)).join(",")),Ot.endAt&&(en+=", endAt: ",en+=Ot.endAt.inclusive?"a:":"b:",en+=Ot.endAt.position.map(tn=>canonicalId(tn)).join(",")),`Target(${en})`}(__PRIVATE_queryToTarget(Nt))}; limitType=${Nt.limitType})`}function __PRIVATE_queryMatches(Nt,s){return s.isFoundDocument()&&function(en,tn){const nn=tn.key.path;return en.collectionGroup!==null?tn.key.hasCollectionId(en.collectionGroup)&&en.path.isPrefixOf(nn):DocumentKey.isDocumentKey(en.path)?en.path.isEqual(nn):en.path.isImmediateParentOf(nn)}(Nt,s)&&function(en,tn){for(const nn of __PRIVATE_queryNormalizedOrderBy(en))if(!nn.field.isKeyField()&&tn.data.field(nn.field)===null)return!1;return!0}(Nt,s)&&function(en,tn){for(const nn of en.filters)if(!nn.matches(tn))return!1;return!0}(Nt,s)&&function(en,tn){return!(en.startAt&&!function(rn,on,sn){const an=__PRIVATE_boundCompareToDocument(rn,on,sn);return rn.inclusive?an<=0:an<0}(en.startAt,__PRIVATE_queryNormalizedOrderBy(en),tn)||en.endAt&&!function(rn,on,sn){const an=__PRIVATE_boundCompareToDocument(rn,on,sn);return rn.inclusive?an>=0:an>0}(en.endAt,__PRIVATE_queryNormalizedOrderBy(en),tn))}(Nt,s)}function __PRIVATE_queryCollectionGroup(Nt){return Nt.collectionGroup||(Nt.path.length%2==1?Nt.path.lastSegment():Nt.path.get(Nt.path.length-2))}function __PRIVATE_newQueryComparator(Nt){return(s,Ot)=>{let en=!1;for(const tn of __PRIVATE_queryNormalizedOrderBy(Nt)){const nn=__PRIVATE_compareDocs(tn,s,Ot);if(nn!==0)return nn;en=en||tn.field.isKeyField()}return 0}}function __PRIVATE_compareDocs(Nt,s,Ot){const en=Nt.field.isKeyField()?DocumentKey.comparator(s.key,Ot.key):function(nn,rn,on){const sn=rn.data.field(nn),an=on.data.field(nn);return sn!==null&&an!==null?__PRIVATE_valueCompare(sn,an):fail()}(Nt.field,s,Ot);switch(Nt.dir){case"asc":return en;case"desc":return-1*en;default:return fail()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ObjectMap{constructor(s,Ot){this.mapKeyFn=s,this.equalsFn=Ot,this.inner={},this.innerSize=0}get(s){const Ot=this.mapKeyFn(s),en=this.inner[Ot];if(en!==void 0){for(const[tn,nn]of en)if(this.equalsFn(tn,s))return nn}}has(s){return this.get(s)!==void 0}set(s,Ot){const en=this.mapKeyFn(s),tn=this.inner[en];if(tn===void 0)return this.inner[en]=[[s,Ot]],void this.innerSize++;for(let nn=0;nn<tn.length;nn++)if(this.equalsFn(tn[nn][0],s))return void(tn[nn]=[s,Ot]);tn.push([s,Ot]),this.innerSize++}delete(s){const Ot=this.mapKeyFn(s),en=this.inner[Ot];if(en===void 0)return!1;for(let tn=0;tn<en.length;tn++)if(this.equalsFn(en[tn][0],s))return en.length===1?delete this.inner[Ot]:en.splice(tn,1),this.innerSize--,!0;return!1}forEach(s){forEach(this.inner,(Ot,en)=>{for(const[tn,nn]of en)s(tn,nn)})}isEmpty(){return isEmpty(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const re$1=new SortedMap$1(DocumentKey.comparator);function __PRIVATE_mutableDocumentMap(){return re$1}const ie$1=new SortedMap$1(DocumentKey.comparator);function documentMap(...Nt){let s=ie$1;for(const Ot of Nt)s=s.insert(Ot.key,Ot);return s}function __PRIVATE_convertOverlayedDocumentMapToDocumentMap(Nt){let s=ie$1;return Nt.forEach((Ot,en)=>s=s.insert(Ot,en.overlayedDocument)),s}function __PRIVATE_newOverlayMap(){return __PRIVATE_newDocumentKeyMap()}function __PRIVATE_newMutationMap(){return __PRIVATE_newDocumentKeyMap()}function __PRIVATE_newDocumentKeyMap(){return new ObjectMap(Nt=>Nt.toString(),(Nt,s)=>Nt.isEqual(s))}const se$1=new SortedMap$1(DocumentKey.comparator),oe$1=new SortedSet(DocumentKey.comparator);function __PRIVATE_documentKeySet(...Nt){let s=oe$1;for(const Ot of Nt)s=s.add(Ot);return s}const _e$1=new SortedSet(__PRIVATE_primitiveComparator);function __PRIVATE_targetIdSet(){return _e$1}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_toDouble(Nt,s){if(Nt.useProto3Json){if(isNaN(s))return{doubleValue:"NaN"};if(s===1/0)return{doubleValue:"Infinity"};if(s===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:__PRIVATE_isNegativeZero(s)?"-0":s}}function __PRIVATE_toInteger(Nt){return{integerValue:""+Nt}}function toNumber(Nt,s){return isSafeInteger(s)?__PRIVATE_toInteger(s):__PRIVATE_toDouble(Nt,s)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TransformOperation{constructor(){this._=void 0}}function __PRIVATE_applyTransformOperationToLocalView(Nt,s,Ot){return Nt instanceof __PRIVATE_ServerTimestampTransform?function(tn,nn){const rn={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:tn.seconds,nanos:tn.nanoseconds}}}};return nn&&__PRIVATE_isServerTimestamp(nn)&&(nn=__PRIVATE_getPreviousValue(nn)),nn&&(rn.fields.__previous_value__=nn),{mapValue:rn}}(Ot,s):Nt instanceof __PRIVATE_ArrayUnionTransformOperation?__PRIVATE_applyArrayUnionTransformOperation(Nt,s):Nt instanceof __PRIVATE_ArrayRemoveTransformOperation?__PRIVATE_applyArrayRemoveTransformOperation(Nt,s):function(tn,nn){const rn=__PRIVATE_computeTransformOperationBaseValue(tn,nn),on=asNumber(rn)+asNumber(tn.Ie);return isInteger(rn)&&isInteger(tn.Ie)?__PRIVATE_toInteger(on):__PRIVATE_toDouble(tn.serializer,on)}(Nt,s)}function __PRIVATE_applyTransformOperationToRemoteDocument(Nt,s,Ot){return Nt instanceof __PRIVATE_ArrayUnionTransformOperation?__PRIVATE_applyArrayUnionTransformOperation(Nt,s):Nt instanceof __PRIVATE_ArrayRemoveTransformOperation?__PRIVATE_applyArrayRemoveTransformOperation(Nt,s):Ot}function __PRIVATE_computeTransformOperationBaseValue(Nt,s){return Nt instanceof __PRIVATE_NumericIncrementTransformOperation?function(en){return isInteger(en)||function(nn){return!!nn&&"doubleValue"in nn}(en)}(s)?s:{integerValue:0}:null}class __PRIVATE_ServerTimestampTransform extends TransformOperation{}class __PRIVATE_ArrayUnionTransformOperation extends TransformOperation{constructor(s){super(),this.elements=s}}function __PRIVATE_applyArrayUnionTransformOperation(Nt,s){const Ot=__PRIVATE_coercedFieldValuesArray(s);for(const en of Nt.elements)Ot.some(tn=>__PRIVATE_valueEquals(tn,en))||Ot.push(en);return{arrayValue:{values:Ot}}}class __PRIVATE_ArrayRemoveTransformOperation extends TransformOperation{constructor(s){super(),this.elements=s}}function __PRIVATE_applyArrayRemoveTransformOperation(Nt,s){let Ot=__PRIVATE_coercedFieldValuesArray(s);for(const en of Nt.elements)Ot=Ot.filter(tn=>!__PRIVATE_valueEquals(tn,en));return{arrayValue:{values:Ot}}}class __PRIVATE_NumericIncrementTransformOperation extends TransformOperation{constructor(s,Ot){super(),this.serializer=s,this.Ie=Ot}}function asNumber(Nt){return __PRIVATE_normalizeNumber(Nt.integerValue||Nt.doubleValue)}function __PRIVATE_coercedFieldValuesArray(Nt){return isArray$3(Nt)&&Nt.arrayValue.values?Nt.arrayValue.values.slice():[]}function __PRIVATE_fieldTransformEquals(Nt,s){return Nt.field.isEqual(s.field)&&function(en,tn){return en instanceof __PRIVATE_ArrayUnionTransformOperation&&tn instanceof __PRIVATE_ArrayUnionTransformOperation||en instanceof __PRIVATE_ArrayRemoveTransformOperation&&tn instanceof __PRIVATE_ArrayRemoveTransformOperation?__PRIVATE_arrayEquals(en.elements,tn.elements,__PRIVATE_valueEquals):en instanceof __PRIVATE_NumericIncrementTransformOperation&&tn instanceof __PRIVATE_NumericIncrementTransformOperation?__PRIVATE_valueEquals(en.Ie,tn.Ie):en instanceof __PRIVATE_ServerTimestampTransform&&tn instanceof __PRIVATE_ServerTimestampTransform}(Nt.transform,s.transform)}class MutationResult{constructor(s,Ot){this.version=s,this.transformResults=Ot}}class Precondition{constructor(s,Ot){this.updateTime=s,this.exists=Ot}static none(){return new Precondition}static exists(s){return new Precondition(void 0,s)}static updateTime(s){return new Precondition(s)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(s){return this.exists===s.exists&&(this.updateTime?!!s.updateTime&&this.updateTime.isEqual(s.updateTime):!s.updateTime)}}function __PRIVATE_preconditionIsValidForDocument(Nt,s){return Nt.updateTime!==void 0?s.isFoundDocument()&&s.version.isEqual(Nt.updateTime):Nt.exists===void 0||Nt.exists===s.isFoundDocument()}class Mutation{}function __PRIVATE_calculateOverlayMutation(Nt,s){if(!Nt.hasLocalMutations||s&&s.fields.length===0)return null;if(s===null)return Nt.isNoDocument()?new __PRIVATE_DeleteMutation(Nt.key,Precondition.none()):new __PRIVATE_SetMutation(Nt.key,Nt.data,Precondition.none());{const Ot=Nt.data,en=ObjectValue.empty();let tn=new SortedSet(FieldPath$1.comparator);for(let nn of s.fields)if(!tn.has(nn)){let rn=Ot.field(nn);rn===null&&nn.length>1&&(nn=nn.popLast(),rn=Ot.field(nn)),rn===null?en.delete(nn):en.set(nn,rn),tn=tn.add(nn)}return new __PRIVATE_PatchMutation(Nt.key,en,new FieldMask(tn.toArray()),Precondition.none())}}function __PRIVATE_mutationApplyToRemoteDocument(Nt,s,Ot){Nt instanceof __PRIVATE_SetMutation?function(tn,nn,rn){const on=tn.value.clone(),sn=__PRIVATE_serverTransformResults(tn.fieldTransforms,nn,rn.transformResults);on.setAll(sn),nn.convertToFoundDocument(rn.version,on).setHasCommittedMutations()}(Nt,s,Ot):Nt instanceof __PRIVATE_PatchMutation?function(tn,nn,rn){if(!__PRIVATE_preconditionIsValidForDocument(tn.precondition,nn))return void nn.convertToUnknownDocument(rn.version);const on=__PRIVATE_serverTransformResults(tn.fieldTransforms,nn,rn.transformResults),sn=nn.data;sn.setAll(__PRIVATE_getPatch(tn)),sn.setAll(on),nn.convertToFoundDocument(rn.version,sn).setHasCommittedMutations()}(Nt,s,Ot):function(tn,nn,rn){nn.convertToNoDocument(rn.version).setHasCommittedMutations()}(0,s,Ot)}function __PRIVATE_mutationApplyToLocalView(Nt,s,Ot,en){return Nt instanceof __PRIVATE_SetMutation?function(nn,rn,on,sn){if(!__PRIVATE_preconditionIsValidForDocument(nn.precondition,rn))return on;const an=nn.value.clone(),ln=__PRIVATE_localTransformResults(nn.fieldTransforms,sn,rn);return an.setAll(ln),rn.convertToFoundDocument(rn.version,an).setHasLocalMutations(),null}(Nt,s,Ot,en):Nt instanceof __PRIVATE_PatchMutation?function(nn,rn,on,sn){if(!__PRIVATE_preconditionIsValidForDocument(nn.precondition,rn))return on;const an=__PRIVATE_localTransformResults(nn.fieldTransforms,sn,rn),ln=rn.data;return ln.setAll(__PRIVATE_getPatch(nn)),ln.setAll(an),rn.convertToFoundDocument(rn.version,ln).setHasLocalMutations(),on===null?null:on.unionWith(nn.fieldMask.fields).unionWith(nn.fieldTransforms.map(cn=>cn.field))}(Nt,s,Ot,en):function(nn,rn,on){return __PRIVATE_preconditionIsValidForDocument(nn.precondition,rn)?(rn.convertToNoDocument(rn.version).setHasLocalMutations(),null):on}(Nt,s,Ot)}function __PRIVATE_mutationExtractBaseValue(Nt,s){let Ot=null;for(const en of Nt.fieldTransforms){const tn=s.data.field(en.field),nn=__PRIVATE_computeTransformOperationBaseValue(en.transform,tn||null);nn!=null&&(Ot===null&&(Ot=ObjectValue.empty()),Ot.set(en.field,nn))}return Ot||null}function __PRIVATE_mutationEquals(Nt,s){return Nt.type===s.type&&!!Nt.key.isEqual(s.key)&&!!Nt.precondition.isEqual(s.precondition)&&!!function(en,tn){return en===void 0&&tn===void 0||!(!en||!tn)&&__PRIVATE_arrayEquals(en,tn,(nn,rn)=>__PRIVATE_fieldTransformEquals(nn,rn))}(Nt.fieldTransforms,s.fieldTransforms)&&(Nt.type===0?Nt.value.isEqual(s.value):Nt.type!==1||Nt.data.isEqual(s.data)&&Nt.fieldMask.isEqual(s.fieldMask))}class __PRIVATE_SetMutation extends Mutation{constructor(s,Ot,en,tn=[]){super(),this.key=s,this.value=Ot,this.precondition=en,this.fieldTransforms=tn,this.type=0}getFieldMask(){return null}}class __PRIVATE_PatchMutation extends Mutation{constructor(s,Ot,en,tn,nn=[]){super(),this.key=s,this.data=Ot,this.fieldMask=en,this.precondition=tn,this.fieldTransforms=nn,this.type=1}getFieldMask(){return this.fieldMask}}function __PRIVATE_getPatch(Nt){const s=new Map;return Nt.fieldMask.fields.forEach(Ot=>{if(!Ot.isEmpty()){const en=Nt.data.field(Ot);s.set(Ot,en)}}),s}function __PRIVATE_serverTransformResults(Nt,s,Ot){const en=new Map;__PRIVATE_hardAssert(Nt.length===Ot.length);for(let tn=0;tn<Ot.length;tn++){const nn=Nt[tn],rn=nn.transform,on=s.data.field(nn.field);en.set(nn.field,__PRIVATE_applyTransformOperationToRemoteDocument(rn,on,Ot[tn]))}return en}function __PRIVATE_localTransformResults(Nt,s,Ot){const en=new Map;for(const tn of Nt){const nn=tn.transform,rn=Ot.data.field(tn.field);en.set(tn.field,__PRIVATE_applyTransformOperationToLocalView(nn,rn,s))}return en}class __PRIVATE_DeleteMutation extends Mutation{constructor(s,Ot){super(),this.key=s,this.precondition=Ot,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class __PRIVATE_VerifyMutation extends Mutation{constructor(s,Ot){super(),this.key=s,this.precondition=Ot,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MutationBatch{constructor(s,Ot,en,tn){this.batchId=s,this.localWriteTime=Ot,this.baseMutations=en,this.mutations=tn}applyToRemoteDocument(s,Ot){const en=Ot.mutationResults;for(let tn=0;tn<this.mutations.length;tn++){const nn=this.mutations[tn];nn.key.isEqual(s.key)&&__PRIVATE_mutationApplyToRemoteDocument(nn,s,en[tn])}}applyToLocalView(s,Ot){for(const en of this.baseMutations)en.key.isEqual(s.key)&&(Ot=__PRIVATE_mutationApplyToLocalView(en,s,Ot,this.localWriteTime));for(const en of this.mutations)en.key.isEqual(s.key)&&(Ot=__PRIVATE_mutationApplyToLocalView(en,s,Ot,this.localWriteTime));return Ot}applyToLocalDocumentSet(s,Ot){const en=__PRIVATE_newMutationMap();return this.mutations.forEach(tn=>{const nn=s.get(tn.key),rn=nn.overlayedDocument;let on=this.applyToLocalView(rn,nn.mutatedFields);on=Ot.has(tn.key)?null:on;const sn=__PRIVATE_calculateOverlayMutation(rn,on);sn!==null&&en.set(tn.key,sn),rn.isValidDocument()||rn.convertToNoDocument(SnapshotVersion.min())}),en}keys(){return this.mutations.reduce((s,Ot)=>s.add(Ot.key),__PRIVATE_documentKeySet())}isEqual(s){return this.batchId===s.batchId&&__PRIVATE_arrayEquals(this.mutations,s.mutations,(Ot,en)=>__PRIVATE_mutationEquals(Ot,en))&&__PRIVATE_arrayEquals(this.baseMutations,s.baseMutations,(Ot,en)=>__PRIVATE_mutationEquals(Ot,en))}}class MutationBatchResult{constructor(s,Ot,en,tn){this.batch=s,this.commitVersion=Ot,this.mutationResults=en,this.docVersions=tn}static from(s,Ot,en){__PRIVATE_hardAssert(s.mutations.length===en.length);let tn=function(){return se$1}();const nn=s.mutations;for(let rn=0;rn<nn.length;rn++)tn=tn.insert(nn[rn].key,en[rn].version);return new MutationBatchResult(s,Ot,en,tn)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Overlay{constructor(s,Ot){this.largestBatchId=s,this.mutation=Ot}getKey(){return this.mutation.key}isEqual(s){return s!==null&&this.mutation===s.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ExistenceFilter{constructor(s,Ot){this.count=s,this.unchangedNames=Ot}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ae$1,ue$1;function __PRIVATE_isPermanentError(Nt){switch(Nt){default:return fail();case D$2.CANCELLED:case D$2.UNKNOWN:case D$2.DEADLINE_EXCEEDED:case D$2.RESOURCE_EXHAUSTED:case D$2.INTERNAL:case D$2.UNAVAILABLE:case D$2.UNAUTHENTICATED:return!1;case D$2.INVALID_ARGUMENT:case D$2.NOT_FOUND:case D$2.ALREADY_EXISTS:case D$2.PERMISSION_DENIED:case D$2.FAILED_PRECONDITION:case D$2.ABORTED:case D$2.OUT_OF_RANGE:case D$2.UNIMPLEMENTED:case D$2.DATA_LOSS:return!0}}function __PRIVATE_mapCodeFromRpcCode(Nt){if(Nt===void 0)return __PRIVATE_logError("GRPC error has no .code"),D$2.UNKNOWN;switch(Nt){case ae$1.OK:return D$2.OK;case ae$1.CANCELLED:return D$2.CANCELLED;case ae$1.UNKNOWN:return D$2.UNKNOWN;case ae$1.DEADLINE_EXCEEDED:return D$2.DEADLINE_EXCEEDED;case ae$1.RESOURCE_EXHAUSTED:return D$2.RESOURCE_EXHAUSTED;case ae$1.INTERNAL:return D$2.INTERNAL;case ae$1.UNAVAILABLE:return D$2.UNAVAILABLE;case ae$1.UNAUTHENTICATED:return D$2.UNAUTHENTICATED;case ae$1.INVALID_ARGUMENT:return D$2.INVALID_ARGUMENT;case ae$1.NOT_FOUND:return D$2.NOT_FOUND;case ae$1.ALREADY_EXISTS:return D$2.ALREADY_EXISTS;case ae$1.PERMISSION_DENIED:return D$2.PERMISSION_DENIED;case ae$1.FAILED_PRECONDITION:return D$2.FAILED_PRECONDITION;case ae$1.ABORTED:return D$2.ABORTED;case ae$1.OUT_OF_RANGE:return D$2.OUT_OF_RANGE;case ae$1.UNIMPLEMENTED:return D$2.UNIMPLEMENTED;case ae$1.DATA_LOSS:return D$2.DATA_LOSS;default:return fail()}}(ue$1=ae$1||(ae$1={}))[ue$1.OK=0]="OK",ue$1[ue$1.CANCELLED=1]="CANCELLED",ue$1[ue$1.UNKNOWN=2]="UNKNOWN",ue$1[ue$1.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ue$1[ue$1.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ue$1[ue$1.NOT_FOUND=5]="NOT_FOUND",ue$1[ue$1.ALREADY_EXISTS=6]="ALREADY_EXISTS",ue$1[ue$1.PERMISSION_DENIED=7]="PERMISSION_DENIED",ue$1[ue$1.UNAUTHENTICATED=16]="UNAUTHENTICATED",ue$1[ue$1.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ue$1[ue$1.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ue$1[ue$1.ABORTED=10]="ABORTED",ue$1[ue$1.OUT_OF_RANGE=11]="OUT_OF_RANGE",ue$1[ue$1.UNIMPLEMENTED=12]="UNIMPLEMENTED",ue$1[ue$1.INTERNAL=13]="INTERNAL",ue$1[ue$1.UNAVAILABLE=14]="UNAVAILABLE",ue$1[ue$1.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_newTextEncoder(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const le$1=new Integer([4294967295,4294967295],0);function __PRIVATE_getMd5HashValue(Nt){const s=__PRIVATE_newTextEncoder().encode(Nt),Ot=new Md5;return Ot.update(s),new Uint8Array(Ot.digest())}function __PRIVATE_get64BitUints(Nt){const s=new DataView(Nt.buffer),Ot=s.getUint32(0,!0),en=s.getUint32(4,!0),tn=s.getUint32(8,!0),nn=s.getUint32(12,!0);return[new Integer([Ot,en],0),new Integer([tn,nn],0)]}class BloomFilter{constructor(s,Ot,en){if(this.bitmap=s,this.padding=Ot,this.hashCount=en,Ot<0||Ot>=8)throw new __PRIVATE_BloomFilterError(`Invalid padding: ${Ot}`);if(en<0)throw new __PRIVATE_BloomFilterError(`Invalid hash count: ${en}`);if(s.length>0&&this.hashCount===0)throw new __PRIVATE_BloomFilterError(`Invalid hash count: ${en}`);if(s.length===0&&Ot!==0)throw new __PRIVATE_BloomFilterError(`Invalid padding when bitmap length is 0: ${Ot}`);this.Te=8*s.length-Ot,this.Ee=Integer.fromNumber(this.Te)}de(s,Ot,en){let tn=s.add(Ot.multiply(Integer.fromNumber(en)));return tn.compare(le$1)===1&&(tn=new Integer([tn.getBits(0),tn.getBits(1)],0)),tn.modulo(this.Ee).toNumber()}Ae(s){return(this.bitmap[Math.floor(s/8)]&1<<s%8)!=0}mightContain(s){if(this.Te===0)return!1;const Ot=__PRIVATE_getMd5HashValue(s),[en,tn]=__PRIVATE_get64BitUints(Ot);for(let nn=0;nn<this.hashCount;nn++){const rn=this.de(en,tn,nn);if(!this.Ae(rn))return!1}return!0}static create(s,Ot,en){const tn=s%8==0?0:8-s%8,nn=new Uint8Array(Math.ceil(s/8)),rn=new BloomFilter(nn,tn,Ot);return en.forEach(on=>rn.insert(on)),rn}insert(s){if(this.Te===0)return;const Ot=__PRIVATE_getMd5HashValue(s),[en,tn]=__PRIVATE_get64BitUints(Ot);for(let nn=0;nn<this.hashCount;nn++){const rn=this.de(en,tn,nn);this.Re(rn)}}Re(s){const Ot=Math.floor(s/8),en=s%8;this.bitmap[Ot]|=1<<en}}class __PRIVATE_BloomFilterError extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RemoteEvent{constructor(s,Ot,en,tn,nn){this.snapshotVersion=s,this.targetChanges=Ot,this.targetMismatches=en,this.documentUpdates=tn,this.resolvedLimboDocuments=nn}static createSynthesizedRemoteEventForCurrentChange(s,Ot,en){const tn=new Map;return tn.set(s,TargetChange.createSynthesizedTargetChangeForCurrentChange(s,Ot,en)),new RemoteEvent(SnapshotVersion.min(),tn,new SortedMap$1(__PRIVATE_primitiveComparator),__PRIVATE_mutableDocumentMap(),__PRIVATE_documentKeySet())}}class TargetChange{constructor(s,Ot,en,tn,nn){this.resumeToken=s,this.current=Ot,this.addedDocuments=en,this.modifiedDocuments=tn,this.removedDocuments=nn}static createSynthesizedTargetChangeForCurrentChange(s,Ot,en){return new TargetChange(en,Ot,__PRIVATE_documentKeySet(),__PRIVATE_documentKeySet(),__PRIVATE_documentKeySet())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_DocumentWatchChange{constructor(s,Ot,en,tn){this.Ve=s,this.removedTargetIds=Ot,this.key=en,this.me=tn}}class __PRIVATE_ExistenceFilterChange{constructor(s,Ot){this.targetId=s,this.fe=Ot}}class __PRIVATE_WatchTargetChange{constructor(s,Ot,en=ByteString.EMPTY_BYTE_STRING,tn=null){this.state=s,this.targetIds=Ot,this.resumeToken=en,this.cause=tn}}class __PRIVATE_TargetState{constructor(){this.ge=0,this.pe=__PRIVATE_snapshotChangesMap(),this.ye=ByteString.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return this.ge!==0}get De(){return this.Se}Ce(s){s.approximateByteSize()>0&&(this.Se=!0,this.ye=s)}ve(){let s=__PRIVATE_documentKeySet(),Ot=__PRIVATE_documentKeySet(),en=__PRIVATE_documentKeySet();return this.pe.forEach((tn,nn)=>{switch(nn){case 0:s=s.add(tn);break;case 2:Ot=Ot.add(tn);break;case 1:en=en.add(tn);break;default:fail()}}),new TargetChange(this.ye,this.we,s,Ot,en)}Fe(){this.Se=!1,this.pe=__PRIVATE_snapshotChangesMap()}Me(s,Ot){this.Se=!0,this.pe=this.pe.insert(s,Ot)}xe(s){this.Se=!0,this.pe=this.pe.remove(s)}Oe(){this.ge+=1}Ne(){this.ge-=1,__PRIVATE_hardAssert(this.ge>=0)}Le(){this.Se=!0,this.we=!0}}class __PRIVATE_WatchChangeAggregator{constructor(s){this.Be=s,this.ke=new Map,this.qe=__PRIVATE_mutableDocumentMap(),this.Qe=__PRIVATE_documentTargetMap(),this.Ke=new SortedMap$1(__PRIVATE_primitiveComparator)}$e(s){for(const Ot of s.Ve)s.me&&s.me.isFoundDocument()?this.Ue(Ot,s.me):this.We(Ot,s.key,s.me);for(const Ot of s.removedTargetIds)this.We(Ot,s.key,s.me)}Ge(s){this.forEachTarget(s,Ot=>{const en=this.ze(Ot);switch(s.state){case 0:this.je(Ot)&&en.Ce(s.resumeToken);break;case 1:en.Ne(),en.be||en.Fe(),en.Ce(s.resumeToken);break;case 2:en.Ne(),en.be||this.removeTarget(Ot);break;case 3:this.je(Ot)&&(en.Le(),en.Ce(s.resumeToken));break;case 4:this.je(Ot)&&(this.He(Ot),en.Ce(s.resumeToken));break;default:fail()}})}forEachTarget(s,Ot){s.targetIds.length>0?s.targetIds.forEach(Ot):this.ke.forEach((en,tn)=>{this.je(tn)&&Ot(tn)})}Je(s){const Ot=s.targetId,en=s.fe.count,tn=this.Ye(Ot);if(tn){const nn=tn.target;if(__PRIVATE_targetIsDocumentTarget(nn))if(en===0){const rn=new DocumentKey(nn.path);this.We(Ot,rn,MutableDocument.newNoDocument(rn,SnapshotVersion.min()))}else __PRIVATE_hardAssert(en===1);else{const rn=this.Ze(Ot);if(rn!==en){const on=this.Xe(s),sn=on?this.et(on,s,rn):1;if(sn!==0){this.He(Ot);const an=sn===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(Ot,an)}}}}}Xe(s){const Ot=s.fe.unchangedNames;if(!Ot||!Ot.bits)return null;const{bits:{bitmap:en="",padding:tn=0},hashCount:nn=0}=Ot;let rn,on;try{rn=__PRIVATE_normalizeByteString(en).toUint8Array()}catch(sn){if(sn instanceof __PRIVATE_Base64DecodeError)return __PRIVATE_logWarn("Decoding the base64 bloom filter in existence filter failed ("+sn.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw sn}try{on=new BloomFilter(rn,tn,nn)}catch(sn){return __PRIVATE_logWarn(sn instanceof __PRIVATE_BloomFilterError?"BloomFilter error: ":"Applying bloom filter failed: ",sn),null}return on.Te===0?null:on}et(s,Ot,en){return Ot.fe.count===en-this.rt(s,Ot.targetId)?0:2}rt(s,Ot){const en=this.Be.getRemoteKeysForTarget(Ot);let tn=0;return en.forEach(nn=>{const rn=this.Be.nt(),on=`projects/${rn.projectId}/databases/${rn.database}/documents/${nn.path.canonicalString()}`;s.mightContain(on)||(this.We(Ot,nn,null),tn++)}),tn}it(s){const Ot=new Map;this.ke.forEach((nn,rn)=>{const on=this.Ye(rn);if(on){if(nn.current&&__PRIVATE_targetIsDocumentTarget(on.target)){const sn=new DocumentKey(on.target.path);this.qe.get(sn)!==null||this.st(rn,sn)||this.We(rn,sn,MutableDocument.newNoDocument(sn,s))}nn.De&&(Ot.set(rn,nn.ve()),nn.Fe())}});let en=__PRIVATE_documentKeySet();this.Qe.forEach((nn,rn)=>{let on=!0;rn.forEachWhile(sn=>{const an=this.Ye(sn);return!an||an.purpose==="TargetPurposeLimboResolution"||(on=!1,!1)}),on&&(en=en.add(nn))}),this.qe.forEach((nn,rn)=>rn.setReadTime(s));const tn=new RemoteEvent(s,Ot,this.Ke,this.qe,en);return this.qe=__PRIVATE_mutableDocumentMap(),this.Qe=__PRIVATE_documentTargetMap(),this.Ke=new SortedMap$1(__PRIVATE_primitiveComparator),tn}Ue(s,Ot){if(!this.je(s))return;const en=this.st(s,Ot.key)?2:0;this.ze(s).Me(Ot.key,en),this.qe=this.qe.insert(Ot.key,Ot),this.Qe=this.Qe.insert(Ot.key,this.ot(Ot.key).add(s))}We(s,Ot,en){if(!this.je(s))return;const tn=this.ze(s);this.st(s,Ot)?tn.Me(Ot,1):tn.xe(Ot),this.Qe=this.Qe.insert(Ot,this.ot(Ot).delete(s)),en&&(this.qe=this.qe.insert(Ot,en))}removeTarget(s){this.ke.delete(s)}Ze(s){const Ot=this.ze(s).ve();return this.Be.getRemoteKeysForTarget(s).size+Ot.addedDocuments.size-Ot.removedDocuments.size}Oe(s){this.ze(s).Oe()}ze(s){let Ot=this.ke.get(s);return Ot||(Ot=new __PRIVATE_TargetState,this.ke.set(s,Ot)),Ot}ot(s){let Ot=this.Qe.get(s);return Ot||(Ot=new SortedSet(__PRIVATE_primitiveComparator),this.Qe=this.Qe.insert(s,Ot)),Ot}je(s){const Ot=this.Ye(s)!==null;return Ot||__PRIVATE_logDebug("WatchChangeAggregator","Detected inactive target",s),Ot}Ye(s){const Ot=this.ke.get(s);return Ot&&Ot.be?null:this.Be._t(s)}He(s){this.ke.set(s,new __PRIVATE_TargetState),this.Be.getRemoteKeysForTarget(s).forEach(Ot=>{this.We(s,Ot,null)})}st(s,Ot){return this.Be.getRemoteKeysForTarget(s).has(Ot)}}function __PRIVATE_documentTargetMap(){return new SortedMap$1(DocumentKey.comparator)}function __PRIVATE_snapshotChangesMap(){return new SortedMap$1(DocumentKey.comparator)}const he$1={asc:"ASCENDING",desc:"DESCENDING"},Pe$1={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Ie$1={and:"AND",or:"OR"};class JsonProtoSerializer{constructor(s,Ot){this.databaseId=s,this.useProto3Json=Ot}}function __PRIVATE_toInt32Proto(Nt,s){return Nt.useProto3Json||__PRIVATE_isNullOrUndefined(s)?s:{value:s}}function toTimestamp$3(Nt,s){return Nt.useProto3Json?`${new Date(1e3*s.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+s.nanoseconds).slice(-9)}Z`:{seconds:""+s.seconds,nanos:s.nanoseconds}}function __PRIVATE_toBytes(Nt,s){return Nt.useProto3Json?s.toBase64():s.toUint8Array()}function __PRIVATE_toVersion(Nt,s){return toTimestamp$3(Nt,s.toTimestamp())}function __PRIVATE_fromVersion(Nt){return __PRIVATE_hardAssert(!!Nt),SnapshotVersion.fromTimestamp(function(Ot){const en=__PRIVATE_normalizeTimestamp(Ot);return new Timestamp(en.seconds,en.nanos)}(Nt))}function __PRIVATE_toResourceName(Nt,s){return __PRIVATE_toResourcePath(Nt,s).canonicalString()}function __PRIVATE_toResourcePath(Nt,s){const Ot=function(tn){return new ResourcePath(["projects",tn.projectId,"databases",tn.database])}(Nt).child("documents");return s===void 0?Ot:Ot.child(s)}function __PRIVATE_fromResourceName(Nt){const s=ResourcePath.fromString(Nt);return __PRIVATE_hardAssert(__PRIVATE_isValidResourceName(s)),s}function __PRIVATE_toName(Nt,s){return __PRIVATE_toResourceName(Nt.databaseId,s.path)}function fromName(Nt,s){const Ot=__PRIVATE_fromResourceName(s);if(Ot.get(1)!==Nt.databaseId.projectId)throw new FirestoreError(D$2.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+Ot.get(1)+" vs "+Nt.databaseId.projectId);if(Ot.get(3)!==Nt.databaseId.database)throw new FirestoreError(D$2.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+Ot.get(3)+" vs "+Nt.databaseId.database);return new DocumentKey(__PRIVATE_extractLocalPathFromResourceName(Ot))}function __PRIVATE_toQueryPath(Nt,s){return __PRIVATE_toResourceName(Nt.databaseId,s)}function __PRIVATE_fromQueryPath(Nt){const s=__PRIVATE_fromResourceName(Nt);return s.length===4?ResourcePath.emptyPath():__PRIVATE_extractLocalPathFromResourceName(s)}function __PRIVATE_getEncodedDatabaseId(Nt){return new ResourcePath(["projects",Nt.databaseId.projectId,"databases",Nt.databaseId.database]).canonicalString()}function __PRIVATE_extractLocalPathFromResourceName(Nt){return __PRIVATE_hardAssert(Nt.length>4&&Nt.get(4)==="documents"),Nt.popFirst(5)}function __PRIVATE_toMutationDocument(Nt,s,Ot){return{name:__PRIVATE_toName(Nt,s),fields:Ot.value.mapValue.fields}}function __PRIVATE_fromWatchChange(Nt,s){let Ot;if("targetChange"in s){s.targetChange;const en=function(an){return an==="NO_CHANGE"?0:an==="ADD"?1:an==="REMOVE"?2:an==="CURRENT"?3:an==="RESET"?4:fail()}(s.targetChange.targetChangeType||"NO_CHANGE"),tn=s.targetChange.targetIds||[],nn=function(an,ln){return an.useProto3Json?(__PRIVATE_hardAssert(ln===void 0||typeof ln=="string"),ByteString.fromBase64String(ln||"")):(__PRIVATE_hardAssert(ln===void 0||ln instanceof Uint8Array),ByteString.fromUint8Array(ln||new Uint8Array))}(Nt,s.targetChange.resumeToken),rn=s.targetChange.cause,on=rn&&function(an){const ln=an.code===void 0?D$2.UNKNOWN:__PRIVATE_mapCodeFromRpcCode(an.code);return new FirestoreError(ln,an.message||"")}(rn);Ot=new __PRIVATE_WatchTargetChange(en,tn,nn,on||null)}else if("documentChange"in s){s.documentChange;const en=s.documentChange;en.document,en.document.name,en.document.updateTime;const tn=fromName(Nt,en.document.name),nn=__PRIVATE_fromVersion(en.document.updateTime),rn=en.document.createTime?__PRIVATE_fromVersion(en.document.createTime):SnapshotVersion.min(),on=new ObjectValue({mapValue:{fields:en.document.fields}}),sn=MutableDocument.newFoundDocument(tn,nn,rn,on),an=en.targetIds||[],ln=en.removedTargetIds||[];Ot=new __PRIVATE_DocumentWatchChange(an,ln,sn.key,sn)}else if("documentDelete"in s){s.documentDelete;const en=s.documentDelete;en.document;const tn=fromName(Nt,en.document),nn=en.readTime?__PRIVATE_fromVersion(en.readTime):SnapshotVersion.min(),rn=MutableDocument.newNoDocument(tn,nn),on=en.removedTargetIds||[];Ot=new __PRIVATE_DocumentWatchChange([],on,rn.key,rn)}else if("documentRemove"in s){s.documentRemove;const en=s.documentRemove;en.document;const tn=fromName(Nt,en.document),nn=en.removedTargetIds||[];Ot=new __PRIVATE_DocumentWatchChange([],nn,tn,null)}else{if(!("filter"in s))return fail();{s.filter;const en=s.filter;en.targetId;const{count:tn=0,unchangedNames:nn}=en,rn=new ExistenceFilter(tn,nn),on=en.targetId;Ot=new __PRIVATE_ExistenceFilterChange(on,rn)}}return Ot}function toMutation(Nt,s){let Ot;if(s instanceof __PRIVATE_SetMutation)Ot={update:__PRIVATE_toMutationDocument(Nt,s.key,s.value)};else if(s instanceof __PRIVATE_DeleteMutation)Ot={delete:__PRIVATE_toName(Nt,s.key)};else if(s instanceof __PRIVATE_PatchMutation)Ot={update:__PRIVATE_toMutationDocument(Nt,s.key,s.data),updateMask:__PRIVATE_toDocumentMask(s.fieldMask)};else{if(!(s instanceof __PRIVATE_VerifyMutation))return fail();Ot={verify:__PRIVATE_toName(Nt,s.key)}}return s.fieldTransforms.length>0&&(Ot.updateTransforms=s.fieldTransforms.map(en=>function(nn,rn){const on=rn.transform;if(on instanceof __PRIVATE_ServerTimestampTransform)return{fieldPath:rn.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(on instanceof __PRIVATE_ArrayUnionTransformOperation)return{fieldPath:rn.field.canonicalString(),appendMissingElements:{values:on.elements}};if(on instanceof __PRIVATE_ArrayRemoveTransformOperation)return{fieldPath:rn.field.canonicalString(),removeAllFromArray:{values:on.elements}};if(on instanceof __PRIVATE_NumericIncrementTransformOperation)return{fieldPath:rn.field.canonicalString(),increment:on.Ie};throw fail()}(0,en))),s.precondition.isNone||(Ot.currentDocument=function(tn,nn){return nn.updateTime!==void 0?{updateTime:__PRIVATE_toVersion(tn,nn.updateTime)}:nn.exists!==void 0?{exists:nn.exists}:fail()}(Nt,s.precondition)),Ot}function __PRIVATE_fromWriteResults(Nt,s){return Nt&&Nt.length>0?(__PRIVATE_hardAssert(s!==void 0),Nt.map(Ot=>function(tn,nn){let rn=tn.updateTime?__PRIVATE_fromVersion(tn.updateTime):__PRIVATE_fromVersion(nn);return rn.isEqual(SnapshotVersion.min())&&(rn=__PRIVATE_fromVersion(nn)),new MutationResult(rn,tn.transformResults||[])}(Ot,s))):[]}function __PRIVATE_toDocumentsTarget(Nt,s){return{documents:[__PRIVATE_toQueryPath(Nt,s.path)]}}function __PRIVATE_toQueryTarget(Nt,s){const Ot={structuredQuery:{}},en=s.path;let tn;s.collectionGroup!==null?(tn=en,Ot.structuredQuery.from=[{collectionId:s.collectionGroup,allDescendants:!0}]):(tn=en.popLast(),Ot.structuredQuery.from=[{collectionId:en.lastSegment()}]),Ot.parent=__PRIVATE_toQueryPath(Nt,tn);const nn=function(an){if(an.length!==0)return __PRIVATE_toFilter(CompositeFilter.create(an,"and"))}(s.filters);nn&&(Ot.structuredQuery.where=nn);const rn=function(an){if(an.length!==0)return an.map(ln=>function(un){return{field:__PRIVATE_toFieldPathReference(un.field),direction:__PRIVATE_toDirection(un.dir)}}(ln))}(s.orderBy);rn&&(Ot.structuredQuery.orderBy=rn);const on=__PRIVATE_toInt32Proto(Nt,s.limit);return on!==null&&(Ot.structuredQuery.limit=on),s.startAt&&(Ot.structuredQuery.startAt=function(an){return{before:an.inclusive,values:an.position}}(s.startAt)),s.endAt&&(Ot.structuredQuery.endAt=function(an){return{before:!an.inclusive,values:an.position}}(s.endAt)),{ut:Ot,parent:tn}}function __PRIVATE_convertQueryTargetToQuery(Nt){let s=__PRIVATE_fromQueryPath(Nt.parent);const Ot=Nt.structuredQuery,en=Ot.from?Ot.from.length:0;let tn=null;if(en>0){__PRIVATE_hardAssert(en===1);const ln=Ot.from[0];ln.allDescendants?tn=ln.collectionId:s=s.child(ln.collectionId)}let nn=[];Ot.where&&(nn=function(cn){const un=__PRIVATE_fromFilter(cn);return un instanceof CompositeFilter&&__PRIVATE_compositeFilterIsFlatConjunction(un)?un.getFilters():[un]}(Ot.where));let rn=[];Ot.orderBy&&(rn=function(cn){return cn.map(un=>function(hn){return new OrderBy(__PRIVATE_fromFieldPathReference(hn.field),function(mn){switch(mn){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(hn.direction))}(un))}(Ot.orderBy));let on=null;Ot.limit&&(on=function(cn){let un;return un=typeof cn=="object"?cn.value:cn,__PRIVATE_isNullOrUndefined(un)?null:un}(Ot.limit));let sn=null;Ot.startAt&&(sn=function(cn){const un=!!cn.before,dn=cn.values||[];return new Bound(dn,un)}(Ot.startAt));let an=null;return Ot.endAt&&(an=function(cn){const un=!cn.before,dn=cn.values||[];return new Bound(dn,un)}(Ot.endAt)),__PRIVATE_newQuery(s,tn,rn,nn,on,"F",sn,an)}function __PRIVATE_toListenRequestLabels(Nt,s){const Ot=function(tn){switch(tn){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return fail()}}(s.purpose);return Ot==null?null:{"goog-listen-tags":Ot}}function __PRIVATE_fromFilter(Nt){return Nt.unaryFilter!==void 0?function(Ot){switch(Ot.unaryFilter.op){case"IS_NAN":const en=__PRIVATE_fromFieldPathReference(Ot.unaryFilter.field);return FieldFilter.create(en,"==",{doubleValue:NaN});case"IS_NULL":const tn=__PRIVATE_fromFieldPathReference(Ot.unaryFilter.field);return FieldFilter.create(tn,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const nn=__PRIVATE_fromFieldPathReference(Ot.unaryFilter.field);return FieldFilter.create(nn,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const rn=__PRIVATE_fromFieldPathReference(Ot.unaryFilter.field);return FieldFilter.create(rn,"!=",{nullValue:"NULL_VALUE"});default:return fail()}}(Nt):Nt.fieldFilter!==void 0?function(Ot){return FieldFilter.create(__PRIVATE_fromFieldPathReference(Ot.fieldFilter.field),function(tn){switch(tn){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return fail()}}(Ot.fieldFilter.op),Ot.fieldFilter.value)}(Nt):Nt.compositeFilter!==void 0?function(Ot){return CompositeFilter.create(Ot.compositeFilter.filters.map(en=>__PRIVATE_fromFilter(en)),function(tn){switch(tn){case"AND":return"and";case"OR":return"or";default:return fail()}}(Ot.compositeFilter.op))}(Nt):fail()}function __PRIVATE_toDirection(Nt){return he$1[Nt]}function __PRIVATE_toOperatorName(Nt){return Pe$1[Nt]}function __PRIVATE_toCompositeOperatorName(Nt){return Ie$1[Nt]}function __PRIVATE_toFieldPathReference(Nt){return{fieldPath:Nt.canonicalString()}}function __PRIVATE_fromFieldPathReference(Nt){return FieldPath$1.fromServerFormat(Nt.fieldPath)}function __PRIVATE_toFilter(Nt){return Nt instanceof FieldFilter?function(Ot){if(Ot.op==="=="){if(__PRIVATE_isNanValue(Ot.value))return{unaryFilter:{field:__PRIVATE_toFieldPathReference(Ot.field),op:"IS_NAN"}};if(__PRIVATE_isNullValue(Ot.value))return{unaryFilter:{field:__PRIVATE_toFieldPathReference(Ot.field),op:"IS_NULL"}}}else if(Ot.op==="!="){if(__PRIVATE_isNanValue(Ot.value))return{unaryFilter:{field:__PRIVATE_toFieldPathReference(Ot.field),op:"IS_NOT_NAN"}};if(__PRIVATE_isNullValue(Ot.value))return{unaryFilter:{field:__PRIVATE_toFieldPathReference(Ot.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:__PRIVATE_toFieldPathReference(Ot.field),op:__PRIVATE_toOperatorName(Ot.op),value:Ot.value}}}(Nt):Nt instanceof CompositeFilter?function(Ot){const en=Ot.getFilters().map(tn=>__PRIVATE_toFilter(tn));return en.length===1?en[0]:{compositeFilter:{op:__PRIVATE_toCompositeOperatorName(Ot.op),filters:en}}}(Nt):fail()}function __PRIVATE_toDocumentMask(Nt){const s=[];return Nt.fields.forEach(Ot=>s.push(Ot.canonicalString())),{fieldPaths:s}}function __PRIVATE_isValidResourceName(Nt){return Nt.length>=4&&Nt.get(0)==="projects"&&Nt.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TargetData{constructor(s,Ot,en,tn,nn=SnapshotVersion.min(),rn=SnapshotVersion.min(),on=ByteString.EMPTY_BYTE_STRING,sn=null){this.target=s,this.targetId=Ot,this.purpose=en,this.sequenceNumber=tn,this.snapshotVersion=nn,this.lastLimboFreeSnapshotVersion=rn,this.resumeToken=on,this.expectedCount=sn}withSequenceNumber(s){return new TargetData(this.target,this.targetId,this.purpose,s,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(s,Ot){return new TargetData(this.target,this.targetId,this.purpose,this.sequenceNumber,Ot,this.lastLimboFreeSnapshotVersion,s,null)}withExpectedCount(s){return new TargetData(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,s)}withLastLimboFreeSnapshotVersion(s){return new TargetData(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,s,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_LocalSerializer{constructor(s){this.ct=s}}function __PRIVATE_fromBundledQuery(Nt){const s=__PRIVATE_convertQueryTargetToQuery({parent:Nt.parent,structuredQuery:Nt.structuredQuery});return Nt.limitType==="LAST"?__PRIVATE_queryWithLimit(s,s.limit,"L"):s}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryIndexManager{constructor(){this._n=new __PRIVATE_MemoryCollectionParentIndex}addToCollectionParentIndex(s,Ot){return this._n.add(Ot),PersistencePromise.resolve()}getCollectionParents(s,Ot){return PersistencePromise.resolve(this._n.getEntries(Ot))}addFieldIndex(s,Ot){return PersistencePromise.resolve()}deleteFieldIndex(s,Ot){return PersistencePromise.resolve()}deleteAllFieldIndexes(s){return PersistencePromise.resolve()}createTargetIndexes(s,Ot){return PersistencePromise.resolve()}getDocumentsMatchingTarget(s,Ot){return PersistencePromise.resolve(null)}getIndexType(s,Ot){return PersistencePromise.resolve(0)}getFieldIndexes(s,Ot){return PersistencePromise.resolve([])}getNextCollectionGroupToUpdate(s){return PersistencePromise.resolve(null)}getMinOffset(s,Ot){return PersistencePromise.resolve(IndexOffset.min())}getMinOffsetFromCollectionGroup(s,Ot){return PersistencePromise.resolve(IndexOffset.min())}updateCollectionGroup(s,Ot,en){return PersistencePromise.resolve()}updateIndexEntries(s,Ot){return PersistencePromise.resolve()}}class __PRIVATE_MemoryCollectionParentIndex{constructor(){this.index={}}add(s){const Ot=s.lastSegment(),en=s.popLast(),tn=this.index[Ot]||new SortedSet(ResourcePath.comparator),nn=!tn.has(en);return this.index[Ot]=tn.add(en),nn}has(s){const Ot=s.lastSegment(),en=s.popLast(),tn=this.index[Ot];return tn&&tn.has(en)}getEntries(s){return(this.index[s]||new SortedSet(ResourcePath.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_TargetIdGenerator{constructor(s){this.On=s}next(){return this.On+=2,this.On}static Nn(){return new __PRIVATE_TargetIdGenerator(0)}static Ln(){return new __PRIVATE_TargetIdGenerator(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RemoteDocumentChangeBuffer{constructor(){this.changes=new ObjectMap(s=>s.toString(),(s,Ot)=>s.isEqual(Ot)),this.changesApplied=!1}addEntry(s){this.assertNotApplied(),this.changes.set(s.key,s)}removeEntry(s,Ot){this.assertNotApplied(),this.changes.set(s,MutableDocument.newInvalidDocument(s).setReadTime(Ot))}getEntry(s,Ot){this.assertNotApplied();const en=this.changes.get(Ot);return en!==void 0?PersistencePromise.resolve(en):this.getFromCache(s,Ot)}getEntries(s,Ot){return this.getAllFromCache(s,Ot)}apply(s){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(s)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OverlayedDocument{constructor(s,Ot){this.overlayedDocument=s,this.mutatedFields=Ot}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LocalDocumentsView{constructor(s,Ot,en,tn){this.remoteDocumentCache=s,this.mutationQueue=Ot,this.documentOverlayCache=en,this.indexManager=tn}getDocument(s,Ot){let en=null;return this.documentOverlayCache.getOverlay(s,Ot).next(tn=>(en=tn,this.remoteDocumentCache.getEntry(s,Ot))).next(tn=>(en!==null&&__PRIVATE_mutationApplyToLocalView(en.mutation,tn,FieldMask.empty(),Timestamp.now()),tn))}getDocuments(s,Ot){return this.remoteDocumentCache.getEntries(s,Ot).next(en=>this.getLocalViewOfDocuments(s,en,__PRIVATE_documentKeySet()).next(()=>en))}getLocalViewOfDocuments(s,Ot,en=__PRIVATE_documentKeySet()){const tn=__PRIVATE_newOverlayMap();return this.populateOverlays(s,tn,Ot).next(()=>this.computeViews(s,Ot,tn,en).next(nn=>{let rn=documentMap();return nn.forEach((on,sn)=>{rn=rn.insert(on,sn.overlayedDocument)}),rn}))}getOverlayedDocuments(s,Ot){const en=__PRIVATE_newOverlayMap();return this.populateOverlays(s,en,Ot).next(()=>this.computeViews(s,Ot,en,__PRIVATE_documentKeySet()))}populateOverlays(s,Ot,en){const tn=[];return en.forEach(nn=>{Ot.has(nn)||tn.push(nn)}),this.documentOverlayCache.getOverlays(s,tn).next(nn=>{nn.forEach((rn,on)=>{Ot.set(rn,on)})})}computeViews(s,Ot,en,tn){let nn=__PRIVATE_mutableDocumentMap();const rn=__PRIVATE_newDocumentKeyMap(),on=function(){return __PRIVATE_newDocumentKeyMap()}();return Ot.forEach((sn,an)=>{const ln=en.get(an.key);tn.has(an.key)&&(ln===void 0||ln.mutation instanceof __PRIVATE_PatchMutation)?nn=nn.insert(an.key,an):ln!==void 0?(rn.set(an.key,ln.mutation.getFieldMask()),__PRIVATE_mutationApplyToLocalView(ln.mutation,an,ln.mutation.getFieldMask(),Timestamp.now())):rn.set(an.key,FieldMask.empty())}),this.recalculateAndSaveOverlays(s,nn).next(sn=>(sn.forEach((an,ln)=>rn.set(an,ln)),Ot.forEach((an,ln)=>{var cn;return on.set(an,new OverlayedDocument(ln,(cn=rn.get(an))!==null&&cn!==void 0?cn:null))}),on))}recalculateAndSaveOverlays(s,Ot){const en=__PRIVATE_newDocumentKeyMap();let tn=new SortedMap$1((rn,on)=>rn-on),nn=__PRIVATE_documentKeySet();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(s,Ot).next(rn=>{for(const on of rn)on.keys().forEach(sn=>{const an=Ot.get(sn);if(an===null)return;let ln=en.get(sn)||FieldMask.empty();ln=on.applyToLocalView(an,ln),en.set(sn,ln);const cn=(tn.get(on.batchId)||__PRIVATE_documentKeySet()).add(sn);tn=tn.insert(on.batchId,cn)})}).next(()=>{const rn=[],on=tn.getReverseIterator();for(;on.hasNext();){const sn=on.getNext(),an=sn.key,ln=sn.value,cn=__PRIVATE_newMutationMap();ln.forEach(un=>{if(!nn.has(un)){const dn=__PRIVATE_calculateOverlayMutation(Ot.get(un),en.get(un));dn!==null&&cn.set(un,dn),nn=nn.add(un)}}),rn.push(this.documentOverlayCache.saveOverlays(s,an,cn))}return PersistencePromise.waitFor(rn)}).next(()=>en)}recalculateAndSaveOverlaysForDocumentKeys(s,Ot){return this.remoteDocumentCache.getEntries(s,Ot).next(en=>this.recalculateAndSaveOverlays(s,en))}getDocumentsMatchingQuery(s,Ot,en,tn){return function(rn){return DocumentKey.isDocumentKey(rn.path)&&rn.collectionGroup===null&&rn.filters.length===0}(Ot)?this.getDocumentsMatchingDocumentQuery(s,Ot.path):__PRIVATE_isCollectionGroupQuery(Ot)?this.getDocumentsMatchingCollectionGroupQuery(s,Ot,en,tn):this.getDocumentsMatchingCollectionQuery(s,Ot,en,tn)}getNextDocuments(s,Ot,en,tn){return this.remoteDocumentCache.getAllFromCollectionGroup(s,Ot,en,tn).next(nn=>{const rn=tn-nn.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(s,Ot,en.largestBatchId,tn-nn.size):PersistencePromise.resolve(__PRIVATE_newOverlayMap());let on=-1,sn=nn;return rn.next(an=>PersistencePromise.forEach(an,(ln,cn)=>(on<cn.largestBatchId&&(on=cn.largestBatchId),nn.get(ln)?PersistencePromise.resolve():this.remoteDocumentCache.getEntry(s,ln).next(un=>{sn=sn.insert(ln,un)}))).next(()=>this.populateOverlays(s,an,nn)).next(()=>this.computeViews(s,sn,an,__PRIVATE_documentKeySet())).next(ln=>({batchId:on,changes:__PRIVATE_convertOverlayedDocumentMapToDocumentMap(ln)})))})}getDocumentsMatchingDocumentQuery(s,Ot){return this.getDocument(s,new DocumentKey(Ot)).next(en=>{let tn=documentMap();return en.isFoundDocument()&&(tn=tn.insert(en.key,en)),tn})}getDocumentsMatchingCollectionGroupQuery(s,Ot,en,tn){const nn=Ot.collectionGroup;let rn=documentMap();return this.indexManager.getCollectionParents(s,nn).next(on=>PersistencePromise.forEach(on,sn=>{const an=function(cn,un){return new __PRIVATE_QueryImpl(un,null,cn.explicitOrderBy.slice(),cn.filters.slice(),cn.limit,cn.limitType,cn.startAt,cn.endAt)}(Ot,sn.child(nn));return this.getDocumentsMatchingCollectionQuery(s,an,en,tn).next(ln=>{ln.forEach((cn,un)=>{rn=rn.insert(cn,un)})})}).next(()=>rn))}getDocumentsMatchingCollectionQuery(s,Ot,en,tn){let nn;return this.documentOverlayCache.getOverlaysForCollection(s,Ot.path,en.largestBatchId).next(rn=>(nn=rn,this.remoteDocumentCache.getDocumentsMatchingQuery(s,Ot,en,nn,tn))).next(rn=>{nn.forEach((sn,an)=>{const ln=an.getKey();rn.get(ln)===null&&(rn=rn.insert(ln,MutableDocument.newInvalidDocument(ln)))});let on=documentMap();return rn.forEach((sn,an)=>{const ln=nn.get(sn);ln!==void 0&&__PRIVATE_mutationApplyToLocalView(ln.mutation,an,FieldMask.empty(),Timestamp.now()),__PRIVATE_queryMatches(Ot,an)&&(on=on.insert(sn,an))}),on})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryBundleCache{constructor(s){this.serializer=s,this.cr=new Map,this.lr=new Map}getBundleMetadata(s,Ot){return PersistencePromise.resolve(this.cr.get(Ot))}saveBundleMetadata(s,Ot){return this.cr.set(Ot.id,function(tn){return{id:tn.id,version:tn.version,createTime:__PRIVATE_fromVersion(tn.createTime)}}(Ot)),PersistencePromise.resolve()}getNamedQuery(s,Ot){return PersistencePromise.resolve(this.lr.get(Ot))}saveNamedQuery(s,Ot){return this.lr.set(Ot.name,function(tn){return{name:tn.name,query:__PRIVATE_fromBundledQuery(tn.bundledQuery),readTime:__PRIVATE_fromVersion(tn.readTime)}}(Ot)),PersistencePromise.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryDocumentOverlayCache{constructor(){this.overlays=new SortedMap$1(DocumentKey.comparator),this.hr=new Map}getOverlay(s,Ot){return PersistencePromise.resolve(this.overlays.get(Ot))}getOverlays(s,Ot){const en=__PRIVATE_newOverlayMap();return PersistencePromise.forEach(Ot,tn=>this.getOverlay(s,tn).next(nn=>{nn!==null&&en.set(tn,nn)})).next(()=>en)}saveOverlays(s,Ot,en){return en.forEach((tn,nn)=>{this.ht(s,Ot,nn)}),PersistencePromise.resolve()}removeOverlaysForBatchId(s,Ot,en){const tn=this.hr.get(en);return tn!==void 0&&(tn.forEach(nn=>this.overlays=this.overlays.remove(nn)),this.hr.delete(en)),PersistencePromise.resolve()}getOverlaysForCollection(s,Ot,en){const tn=__PRIVATE_newOverlayMap(),nn=Ot.length+1,rn=new DocumentKey(Ot.child("")),on=this.overlays.getIteratorFrom(rn);for(;on.hasNext();){const sn=on.getNext().value,an=sn.getKey();if(!Ot.isPrefixOf(an.path))break;an.path.length===nn&&sn.largestBatchId>en&&tn.set(sn.getKey(),sn)}return PersistencePromise.resolve(tn)}getOverlaysForCollectionGroup(s,Ot,en,tn){let nn=new SortedMap$1((an,ln)=>an-ln);const rn=this.overlays.getIterator();for(;rn.hasNext();){const an=rn.getNext().value;if(an.getKey().getCollectionGroup()===Ot&&an.largestBatchId>en){let ln=nn.get(an.largestBatchId);ln===null&&(ln=__PRIVATE_newOverlayMap(),nn=nn.insert(an.largestBatchId,ln)),ln.set(an.getKey(),an)}}const on=__PRIVATE_newOverlayMap(),sn=nn.getIterator();for(;sn.hasNext()&&(sn.getNext().value.forEach((an,ln)=>on.set(an,ln)),!(on.size()>=tn)););return PersistencePromise.resolve(on)}ht(s,Ot,en){const tn=this.overlays.get(en.key);if(tn!==null){const rn=this.hr.get(tn.largestBatchId).delete(en.key);this.hr.set(tn.largestBatchId,rn)}this.overlays=this.overlays.insert(en.key,new Overlay(Ot,en));let nn=this.hr.get(Ot);nn===void 0&&(nn=__PRIVATE_documentKeySet(),this.hr.set(Ot,nn)),this.hr.set(Ot,nn.add(en.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_ReferenceSet{constructor(){this.Pr=new SortedSet(__PRIVATE_DocReference.Ir),this.Tr=new SortedSet(__PRIVATE_DocReference.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(s,Ot){const en=new __PRIVATE_DocReference(s,Ot);this.Pr=this.Pr.add(en),this.Tr=this.Tr.add(en)}dr(s,Ot){s.forEach(en=>this.addReference(en,Ot))}removeReference(s,Ot){this.Ar(new __PRIVATE_DocReference(s,Ot))}Rr(s,Ot){s.forEach(en=>this.removeReference(en,Ot))}Vr(s){const Ot=new DocumentKey(new ResourcePath([])),en=new __PRIVATE_DocReference(Ot,s),tn=new __PRIVATE_DocReference(Ot,s+1),nn=[];return this.Tr.forEachInRange([en,tn],rn=>{this.Ar(rn),nn.push(rn.key)}),nn}mr(){this.Pr.forEach(s=>this.Ar(s))}Ar(s){this.Pr=this.Pr.delete(s),this.Tr=this.Tr.delete(s)}gr(s){const Ot=new DocumentKey(new ResourcePath([])),en=new __PRIVATE_DocReference(Ot,s),tn=new __PRIVATE_DocReference(Ot,s+1);let nn=__PRIVATE_documentKeySet();return this.Tr.forEachInRange([en,tn],rn=>{nn=nn.add(rn.key)}),nn}containsKey(s){const Ot=new __PRIVATE_DocReference(s,0),en=this.Pr.firstAfterOrEqual(Ot);return en!==null&&s.isEqual(en.key)}}class __PRIVATE_DocReference{constructor(s,Ot){this.key=s,this.pr=Ot}static Ir(s,Ot){return DocumentKey.comparator(s.key,Ot.key)||__PRIVATE_primitiveComparator(s.pr,Ot.pr)}static Er(s,Ot){return __PRIVATE_primitiveComparator(s.pr,Ot.pr)||DocumentKey.comparator(s.key,Ot.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryMutationQueue{constructor(s,Ot){this.indexManager=s,this.referenceDelegate=Ot,this.mutationQueue=[],this.yr=1,this.wr=new SortedSet(__PRIVATE_DocReference.Ir)}checkEmpty(s){return PersistencePromise.resolve(this.mutationQueue.length===0)}addMutationBatch(s,Ot,en,tn){const nn=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const rn=new MutationBatch(nn,Ot,en,tn);this.mutationQueue.push(rn);for(const on of tn)this.wr=this.wr.add(new __PRIVATE_DocReference(on.key,nn)),this.indexManager.addToCollectionParentIndex(s,on.key.path.popLast());return PersistencePromise.resolve(rn)}lookupMutationBatch(s,Ot){return PersistencePromise.resolve(this.Sr(Ot))}getNextMutationBatchAfterBatchId(s,Ot){const en=Ot+1,tn=this.br(en),nn=tn<0?0:tn;return PersistencePromise.resolve(this.mutationQueue.length>nn?this.mutationQueue[nn]:null)}getHighestUnacknowledgedBatchId(){return PersistencePromise.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(s){return PersistencePromise.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(s,Ot){const en=new __PRIVATE_DocReference(Ot,0),tn=new __PRIVATE_DocReference(Ot,Number.POSITIVE_INFINITY),nn=[];return this.wr.forEachInRange([en,tn],rn=>{const on=this.Sr(rn.pr);nn.push(on)}),PersistencePromise.resolve(nn)}getAllMutationBatchesAffectingDocumentKeys(s,Ot){let en=new SortedSet(__PRIVATE_primitiveComparator);return Ot.forEach(tn=>{const nn=new __PRIVATE_DocReference(tn,0),rn=new __PRIVATE_DocReference(tn,Number.POSITIVE_INFINITY);this.wr.forEachInRange([nn,rn],on=>{en=en.add(on.pr)})}),PersistencePromise.resolve(this.Dr(en))}getAllMutationBatchesAffectingQuery(s,Ot){const en=Ot.path,tn=en.length+1;let nn=en;DocumentKey.isDocumentKey(nn)||(nn=nn.child(""));const rn=new __PRIVATE_DocReference(new DocumentKey(nn),0);let on=new SortedSet(__PRIVATE_primitiveComparator);return this.wr.forEachWhile(sn=>{const an=sn.key.path;return!!en.isPrefixOf(an)&&(an.length===tn&&(on=on.add(sn.pr)),!0)},rn),PersistencePromise.resolve(this.Dr(on))}Dr(s){const Ot=[];return s.forEach(en=>{const tn=this.Sr(en);tn!==null&&Ot.push(tn)}),Ot}removeMutationBatch(s,Ot){__PRIVATE_hardAssert(this.Cr(Ot.batchId,"removed")===0),this.mutationQueue.shift();let en=this.wr;return PersistencePromise.forEach(Ot.mutations,tn=>{const nn=new __PRIVATE_DocReference(tn.key,Ot.batchId);return en=en.delete(nn),this.referenceDelegate.markPotentiallyOrphaned(s,tn.key)}).next(()=>{this.wr=en})}Mn(s){}containsKey(s,Ot){const en=new __PRIVATE_DocReference(Ot,0),tn=this.wr.firstAfterOrEqual(en);return PersistencePromise.resolve(Ot.isEqual(tn&&tn.key))}performConsistencyCheck(s){return this.mutationQueue.length,PersistencePromise.resolve()}Cr(s,Ot){return this.br(s)}br(s){return this.mutationQueue.length===0?0:s-this.mutationQueue[0].batchId}Sr(s){const Ot=this.br(s);return Ot<0||Ot>=this.mutationQueue.length?null:this.mutationQueue[Ot]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryRemoteDocumentCacheImpl{constructor(s){this.vr=s,this.docs=function(){return new SortedMap$1(DocumentKey.comparator)}(),this.size=0}setIndexManager(s){this.indexManager=s}addEntry(s,Ot){const en=Ot.key,tn=this.docs.get(en),nn=tn?tn.size:0,rn=this.vr(Ot);return this.docs=this.docs.insert(en,{document:Ot.mutableCopy(),size:rn}),this.size+=rn-nn,this.indexManager.addToCollectionParentIndex(s,en.path.popLast())}removeEntry(s){const Ot=this.docs.get(s);Ot&&(this.docs=this.docs.remove(s),this.size-=Ot.size)}getEntry(s,Ot){const en=this.docs.get(Ot);return PersistencePromise.resolve(en?en.document.mutableCopy():MutableDocument.newInvalidDocument(Ot))}getEntries(s,Ot){let en=__PRIVATE_mutableDocumentMap();return Ot.forEach(tn=>{const nn=this.docs.get(tn);en=en.insert(tn,nn?nn.document.mutableCopy():MutableDocument.newInvalidDocument(tn))}),PersistencePromise.resolve(en)}getDocumentsMatchingQuery(s,Ot,en,tn){let nn=__PRIVATE_mutableDocumentMap();const rn=Ot.path,on=new DocumentKey(rn.child("")),sn=this.docs.getIteratorFrom(on);for(;sn.hasNext();){const{key:an,value:{document:ln}}=sn.getNext();if(!rn.isPrefixOf(an.path))break;an.path.length>rn.length+1||__PRIVATE_indexOffsetComparator(__PRIVATE_newIndexOffsetFromDocument(ln),en)<=0||(tn.has(ln.key)||__PRIVATE_queryMatches(Ot,ln))&&(nn=nn.insert(ln.key,ln.mutableCopy()))}return PersistencePromise.resolve(nn)}getAllFromCollectionGroup(s,Ot,en,tn){fail()}Fr(s,Ot){return PersistencePromise.forEach(this.docs,en=>Ot(en))}newChangeBuffer(s){return new __PRIVATE_MemoryRemoteDocumentChangeBuffer(this)}getSize(s){return PersistencePromise.resolve(this.size)}}class __PRIVATE_MemoryRemoteDocumentChangeBuffer extends RemoteDocumentChangeBuffer{constructor(s){super(),this.ar=s}applyChanges(s){const Ot=[];return this.changes.forEach((en,tn)=>{tn.isValidDocument()?Ot.push(this.ar.addEntry(s,tn)):this.ar.removeEntry(en)}),PersistencePromise.waitFor(Ot)}getFromCache(s,Ot){return this.ar.getEntry(s,Ot)}getAllFromCache(s,Ot){return this.ar.getEntries(s,Ot)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryTargetCache{constructor(s){this.persistence=s,this.Mr=new ObjectMap(Ot=>__PRIVATE_canonifyTarget(Ot),__PRIVATE_targetEquals),this.lastRemoteSnapshotVersion=SnapshotVersion.min(),this.highestTargetId=0,this.Or=0,this.Nr=new __PRIVATE_ReferenceSet,this.targetCount=0,this.Lr=__PRIVATE_TargetIdGenerator.Nn()}forEachTarget(s,Ot){return this.Mr.forEach((en,tn)=>Ot(tn)),PersistencePromise.resolve()}getLastRemoteSnapshotVersion(s){return PersistencePromise.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(s){return PersistencePromise.resolve(this.Or)}allocateTargetId(s){return this.highestTargetId=this.Lr.next(),PersistencePromise.resolve(this.highestTargetId)}setTargetsMetadata(s,Ot,en){return en&&(this.lastRemoteSnapshotVersion=en),Ot>this.Or&&(this.Or=Ot),PersistencePromise.resolve()}qn(s){this.Mr.set(s.target,s);const Ot=s.targetId;Ot>this.highestTargetId&&(this.Lr=new __PRIVATE_TargetIdGenerator(Ot),this.highestTargetId=Ot),s.sequenceNumber>this.Or&&(this.Or=s.sequenceNumber)}addTargetData(s,Ot){return this.qn(Ot),this.targetCount+=1,PersistencePromise.resolve()}updateTargetData(s,Ot){return this.qn(Ot),PersistencePromise.resolve()}removeTargetData(s,Ot){return this.Mr.delete(Ot.target),this.Nr.Vr(Ot.targetId),this.targetCount-=1,PersistencePromise.resolve()}removeTargets(s,Ot,en){let tn=0;const nn=[];return this.Mr.forEach((rn,on)=>{on.sequenceNumber<=Ot&&en.get(on.targetId)===null&&(this.Mr.delete(rn),nn.push(this.removeMatchingKeysForTargetId(s,on.targetId)),tn++)}),PersistencePromise.waitFor(nn).next(()=>tn)}getTargetCount(s){return PersistencePromise.resolve(this.targetCount)}getTargetData(s,Ot){const en=this.Mr.get(Ot)||null;return PersistencePromise.resolve(en)}addMatchingKeys(s,Ot,en){return this.Nr.dr(Ot,en),PersistencePromise.resolve()}removeMatchingKeys(s,Ot,en){this.Nr.Rr(Ot,en);const tn=this.persistence.referenceDelegate,nn=[];return tn&&Ot.forEach(rn=>{nn.push(tn.markPotentiallyOrphaned(s,rn))}),PersistencePromise.waitFor(nn)}removeMatchingKeysForTargetId(s,Ot){return this.Nr.Vr(Ot),PersistencePromise.resolve()}getMatchingKeysForTargetId(s,Ot){const en=this.Nr.gr(Ot);return PersistencePromise.resolve(en)}containsKey(s,Ot){return PersistencePromise.resolve(this.Nr.containsKey(Ot))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryPersistence{constructor(s,Ot){this.Br={},this.overlays={},this.kr=new __PRIVATE_ListenSequence(0),this.qr=!1,this.qr=!0,this.referenceDelegate=s(this),this.Qr=new __PRIVATE_MemoryTargetCache(this),this.indexManager=new __PRIVATE_MemoryIndexManager,this.remoteDocumentCache=function(tn){return new __PRIVATE_MemoryRemoteDocumentCacheImpl(tn)}(en=>this.referenceDelegate.Kr(en)),this.serializer=new __PRIVATE_LocalSerializer(Ot),this.$r=new __PRIVATE_MemoryBundleCache(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(s){return this.indexManager}getDocumentOverlayCache(s){let Ot=this.overlays[s.toKey()];return Ot||(Ot=new __PRIVATE_MemoryDocumentOverlayCache,this.overlays[s.toKey()]=Ot),Ot}getMutationQueue(s,Ot){let en=this.Br[s.toKey()];return en||(en=new __PRIVATE_MemoryMutationQueue(Ot,this.referenceDelegate),this.Br[s.toKey()]=en),en}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(s,Ot,en){__PRIVATE_logDebug("MemoryPersistence","Starting transaction:",s);const tn=new __PRIVATE_MemoryTransaction(this.kr.next());return this.referenceDelegate.Ur(),en(tn).next(nn=>this.referenceDelegate.Wr(tn).next(()=>nn)).toPromise().then(nn=>(tn.raiseOnCommittedEvent(),nn))}Gr(s,Ot){return PersistencePromise.or(Object.values(this.Br).map(en=>()=>en.containsKey(s,Ot)))}}class __PRIVATE_MemoryTransaction extends PersistenceTransaction{constructor(s){super(),this.currentSequenceNumber=s}}class __PRIVATE_MemoryEagerDelegate{constructor(s){this.persistence=s,this.zr=new __PRIVATE_ReferenceSet,this.jr=null}static Hr(s){return new __PRIVATE_MemoryEagerDelegate(s)}get Jr(){if(this.jr)return this.jr;throw fail()}addReference(s,Ot,en){return this.zr.addReference(en,Ot),this.Jr.delete(en.toString()),PersistencePromise.resolve()}removeReference(s,Ot,en){return this.zr.removeReference(en,Ot),this.Jr.add(en.toString()),PersistencePromise.resolve()}markPotentiallyOrphaned(s,Ot){return this.Jr.add(Ot.toString()),PersistencePromise.resolve()}removeTarget(s,Ot){this.zr.Vr(Ot.targetId).forEach(tn=>this.Jr.add(tn.toString()));const en=this.persistence.getTargetCache();return en.getMatchingKeysForTargetId(s,Ot.targetId).next(tn=>{tn.forEach(nn=>this.Jr.add(nn.toString()))}).next(()=>en.removeTargetData(s,Ot))}Ur(){this.jr=new Set}Wr(s){const Ot=this.persistence.getRemoteDocumentCache().newChangeBuffer();return PersistencePromise.forEach(this.Jr,en=>{const tn=DocumentKey.fromPath(en);return this.Yr(s,tn).next(nn=>{nn||Ot.removeEntry(tn,SnapshotVersion.min())})}).next(()=>(this.jr=null,Ot.apply(s)))}updateLimboDocument(s,Ot){return this.Yr(s,Ot).next(en=>{en?this.Jr.delete(Ot.toString()):this.Jr.add(Ot.toString())})}Kr(s){return 0}Yr(s,Ot){return PersistencePromise.or([()=>PersistencePromise.resolve(this.zr.containsKey(Ot)),()=>this.persistence.getTargetCache().containsKey(s,Ot),()=>this.persistence.Gr(s,Ot)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_LocalViewChanges{constructor(s,Ot,en,tn){this.targetId=s,this.fromCache=Ot,this.qi=en,this.Qi=tn}static Ki(s,Ot){let en=__PRIVATE_documentKeySet(),tn=__PRIVATE_documentKeySet();for(const nn of Ot.docChanges)switch(nn.type){case 0:en=en.add(nn.doc.key);break;case 1:tn=tn.add(nn.doc.key)}return new __PRIVATE_LocalViewChanges(s,Ot.fromCache,en,tn)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QueryContext{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(s){this._documentReadCount+=s}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_QueryEngine{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return isSafari()?8:__PRIVATE_SimpleDb.v(getUA())>0?6:4}()}initialize(s,Ot){this.zi=s,this.indexManager=Ot,this.$i=!0}getDocumentsMatchingQuery(s,Ot,en,tn){const nn={result:null};return this.ji(s,Ot).next(rn=>{nn.result=rn}).next(()=>{if(!nn.result)return this.Hi(s,Ot,tn,en).next(rn=>{nn.result=rn})}).next(()=>{if(nn.result)return;const rn=new QueryContext;return this.Ji(s,Ot,rn).next(on=>{if(nn.result=on,this.Ui)return this.Yi(s,Ot,rn,on.size)})}).next(()=>nn.result)}Yi(s,Ot,en,tn){return en.documentReadCount<this.Wi?(__PRIVATE_getLogLevel()<=LogLevel.DEBUG&&__PRIVATE_logDebug("QueryEngine","SDK will not create cache indexes for query:",__PRIVATE_stringifyQuery(Ot),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),PersistencePromise.resolve()):(__PRIVATE_getLogLevel()<=LogLevel.DEBUG&&__PRIVATE_logDebug("QueryEngine","Query:",__PRIVATE_stringifyQuery(Ot),"scans",en.documentReadCount,"local documents and returns",tn,"documents as results."),en.documentReadCount>this.Gi*tn?(__PRIVATE_getLogLevel()<=LogLevel.DEBUG&&__PRIVATE_logDebug("QueryEngine","The SDK decides to create cache indexes for query:",__PRIVATE_stringifyQuery(Ot),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(s,__PRIVATE_queryToTarget(Ot))):PersistencePromise.resolve())}ji(s,Ot){if(__PRIVATE_queryMatchesAllDocuments(Ot))return PersistencePromise.resolve(null);let en=__PRIVATE_queryToTarget(Ot);return this.indexManager.getIndexType(s,en).next(tn=>tn===0?null:(Ot.limit!==null&&tn===1&&(Ot=__PRIVATE_queryWithLimit(Ot,null,"F"),en=__PRIVATE_queryToTarget(Ot)),this.indexManager.getDocumentsMatchingTarget(s,en).next(nn=>{const rn=__PRIVATE_documentKeySet(...nn);return this.zi.getDocuments(s,rn).next(on=>this.indexManager.getMinOffset(s,en).next(sn=>{const an=this.Zi(Ot,on);return this.Xi(Ot,an,rn,sn.readTime)?this.ji(s,__PRIVATE_queryWithLimit(Ot,null,"F")):this.es(s,an,Ot,sn)}))})))}Hi(s,Ot,en,tn){return __PRIVATE_queryMatchesAllDocuments(Ot)||tn.isEqual(SnapshotVersion.min())?PersistencePromise.resolve(null):this.zi.getDocuments(s,en).next(nn=>{const rn=this.Zi(Ot,nn);return this.Xi(Ot,rn,en,tn)?PersistencePromise.resolve(null):(__PRIVATE_getLogLevel()<=LogLevel.DEBUG&&__PRIVATE_logDebug("QueryEngine","Re-using previous result from %s to execute query: %s",tn.toString(),__PRIVATE_stringifyQuery(Ot)),this.es(s,rn,Ot,__PRIVATE_newIndexOffsetSuccessorFromReadTime(tn,-1)).next(on=>on))})}Zi(s,Ot){let en=new SortedSet(__PRIVATE_newQueryComparator(s));return Ot.forEach((tn,nn)=>{__PRIVATE_queryMatches(s,nn)&&(en=en.add(nn))}),en}Xi(s,Ot,en,tn){if(s.limit===null)return!1;if(en.size!==Ot.size)return!0;const nn=s.limitType==="F"?Ot.last():Ot.first();return!!nn&&(nn.hasPendingWrites||nn.version.compareTo(tn)>0)}Ji(s,Ot,en){return __PRIVATE_getLogLevel()<=LogLevel.DEBUG&&__PRIVATE_logDebug("QueryEngine","Using full collection scan to execute query:",__PRIVATE_stringifyQuery(Ot)),this.zi.getDocumentsMatchingQuery(s,Ot,IndexOffset.min(),en)}es(s,Ot,en,tn){return this.zi.getDocumentsMatchingQuery(s,en,tn).next(nn=>(Ot.forEach(rn=>{nn=nn.insert(rn.key,rn)}),nn))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_LocalStoreImpl{constructor(s,Ot,en,tn){this.persistence=s,this.ts=Ot,this.serializer=tn,this.ns=new SortedMap$1(__PRIVATE_primitiveComparator),this.rs=new ObjectMap(nn=>__PRIVATE_canonifyTarget(nn),__PRIVATE_targetEquals),this.ss=new Map,this.os=s.getRemoteDocumentCache(),this.Qr=s.getTargetCache(),this.$r=s.getBundleCache(),this._s(en)}_s(s){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(s),this.indexManager=this.persistence.getIndexManager(s),this.mutationQueue=this.persistence.getMutationQueue(s,this.indexManager),this.localDocuments=new LocalDocumentsView(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(s){return this.persistence.runTransaction("Collect garbage","readwrite-primary",Ot=>s.collect(Ot,this.ns))}}function __PRIVATE_newLocalStore(Nt,s,Ot,en){return new __PRIVATE_LocalStoreImpl(Nt,s,Ot,en)}async function __PRIVATE_localStoreHandleUserChange(Nt,s){const Ot=__PRIVATE_debugCast(Nt);return await Ot.persistence.runTransaction("Handle user change","readonly",en=>{let tn;return Ot.mutationQueue.getAllMutationBatches(en).next(nn=>(tn=nn,Ot._s(s),Ot.mutationQueue.getAllMutationBatches(en))).next(nn=>{const rn=[],on=[];let sn=__PRIVATE_documentKeySet();for(const an of tn){rn.push(an.batchId);for(const ln of an.mutations)sn=sn.add(ln.key)}for(const an of nn){on.push(an.batchId);for(const ln of an.mutations)sn=sn.add(ln.key)}return Ot.localDocuments.getDocuments(en,sn).next(an=>({us:an,removedBatchIds:rn,addedBatchIds:on}))})})}function __PRIVATE_localStoreAcknowledgeBatch(Nt,s){const Ot=__PRIVATE_debugCast(Nt);return Ot.persistence.runTransaction("Acknowledge batch","readwrite-primary",en=>{const tn=s.batch.keys(),nn=Ot.os.newChangeBuffer({trackRemovals:!0});return function(on,sn,an,ln){const cn=an.batch,un=cn.keys();let dn=PersistencePromise.resolve();return un.forEach(hn=>{dn=dn.next(()=>ln.getEntry(sn,hn)).next(fn=>{const mn=an.docVersions.get(hn);__PRIVATE_hardAssert(mn!==null),fn.version.compareTo(mn)<0&&(cn.applyToRemoteDocument(fn,an),fn.isValidDocument()&&(fn.setReadTime(an.commitVersion),ln.addEntry(fn)))})}),dn.next(()=>on.mutationQueue.removeMutationBatch(sn,cn))}(Ot,en,s,nn).next(()=>nn.apply(en)).next(()=>Ot.mutationQueue.performConsistencyCheck(en)).next(()=>Ot.documentOverlayCache.removeOverlaysForBatchId(en,tn,s.batch.batchId)).next(()=>Ot.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(en,function(on){let sn=__PRIVATE_documentKeySet();for(let an=0;an<on.mutationResults.length;++an)on.mutationResults[an].transformResults.length>0&&(sn=sn.add(on.batch.mutations[an].key));return sn}(s))).next(()=>Ot.localDocuments.getDocuments(en,tn))})}function __PRIVATE_localStoreGetLastRemoteSnapshotVersion(Nt){const s=__PRIVATE_debugCast(Nt);return s.persistence.runTransaction("Get last remote snapshot version","readonly",Ot=>s.Qr.getLastRemoteSnapshotVersion(Ot))}function __PRIVATE_localStoreApplyRemoteEventToLocalCache(Nt,s){const Ot=__PRIVATE_debugCast(Nt),en=s.snapshotVersion;let tn=Ot.ns;return Ot.persistence.runTransaction("Apply remote event","readwrite-primary",nn=>{const rn=Ot.os.newChangeBuffer({trackRemovals:!0});tn=Ot.ns;const on=[];s.targetChanges.forEach((ln,cn)=>{const un=tn.get(cn);if(!un)return;on.push(Ot.Qr.removeMatchingKeys(nn,ln.removedDocuments,cn).next(()=>Ot.Qr.addMatchingKeys(nn,ln.addedDocuments,cn)));let dn=un.withSequenceNumber(nn.currentSequenceNumber);s.targetMismatches.get(cn)!==null?dn=dn.withResumeToken(ByteString.EMPTY_BYTE_STRING,SnapshotVersion.min()).withLastLimboFreeSnapshotVersion(SnapshotVersion.min()):ln.resumeToken.approximateByteSize()>0&&(dn=dn.withResumeToken(ln.resumeToken,en)),tn=tn.insert(cn,dn),function(fn,mn,gn){return fn.resumeToken.approximateByteSize()===0||mn.snapshotVersion.toMicroseconds()-fn.snapshotVersion.toMicroseconds()>=3e8?!0:gn.addedDocuments.size+gn.modifiedDocuments.size+gn.removedDocuments.size>0}(un,dn,ln)&&on.push(Ot.Qr.updateTargetData(nn,dn))});let sn=__PRIVATE_mutableDocumentMap(),an=__PRIVATE_documentKeySet();if(s.documentUpdates.forEach(ln=>{s.resolvedLimboDocuments.has(ln)&&on.push(Ot.persistence.referenceDelegate.updateLimboDocument(nn,ln))}),on.push(__PRIVATE_populateDocumentChangeBuffer(nn,rn,s.documentUpdates).next(ln=>{sn=ln.cs,an=ln.ls})),!en.isEqual(SnapshotVersion.min())){const ln=Ot.Qr.getLastRemoteSnapshotVersion(nn).next(cn=>Ot.Qr.setTargetsMetadata(nn,nn.currentSequenceNumber,en));on.push(ln)}return PersistencePromise.waitFor(on).next(()=>rn.apply(nn)).next(()=>Ot.localDocuments.getLocalViewOfDocuments(nn,sn,an)).next(()=>sn)}).then(nn=>(Ot.ns=tn,nn))}function __PRIVATE_populateDocumentChangeBuffer(Nt,s,Ot){let en=__PRIVATE_documentKeySet(),tn=__PRIVATE_documentKeySet();return Ot.forEach(nn=>en=en.add(nn)),s.getEntries(Nt,en).next(nn=>{let rn=__PRIVATE_mutableDocumentMap();return Ot.forEach((on,sn)=>{const an=nn.get(on);sn.isFoundDocument()!==an.isFoundDocument()&&(tn=tn.add(on)),sn.isNoDocument()&&sn.version.isEqual(SnapshotVersion.min())?(s.removeEntry(on,sn.readTime),rn=rn.insert(on,sn)):!an.isValidDocument()||sn.version.compareTo(an.version)>0||sn.version.compareTo(an.version)===0&&an.hasPendingWrites?(s.addEntry(sn),rn=rn.insert(on,sn)):__PRIVATE_logDebug("LocalStore","Ignoring outdated watch update for ",on,". Current version:",an.version," Watch version:",sn.version)}),{cs:rn,ls:tn}})}function __PRIVATE_localStoreGetNextMutationBatch(Nt,s){const Ot=__PRIVATE_debugCast(Nt);return Ot.persistence.runTransaction("Get next mutation batch","readonly",en=>(s===void 0&&(s=-1),Ot.mutationQueue.getNextMutationBatchAfterBatchId(en,s)))}function __PRIVATE_localStoreAllocateTarget(Nt,s){const Ot=__PRIVATE_debugCast(Nt);return Ot.persistence.runTransaction("Allocate target","readwrite",en=>{let tn;return Ot.Qr.getTargetData(en,s).next(nn=>nn?(tn=nn,PersistencePromise.resolve(tn)):Ot.Qr.allocateTargetId(en).next(rn=>(tn=new TargetData(s,rn,"TargetPurposeListen",en.currentSequenceNumber),Ot.Qr.addTargetData(en,tn).next(()=>tn))))}).then(en=>{const tn=Ot.ns.get(en.targetId);return(tn===null||en.snapshotVersion.compareTo(tn.snapshotVersion)>0)&&(Ot.ns=Ot.ns.insert(en.targetId,en),Ot.rs.set(s,en.targetId)),en})}async function __PRIVATE_localStoreReleaseTarget(Nt,s,Ot){const en=__PRIVATE_debugCast(Nt),tn=en.ns.get(s),nn=Ot?"readwrite":"readwrite-primary";try{Ot||await en.persistence.runTransaction("Release target",nn,rn=>en.persistence.referenceDelegate.removeTarget(rn,tn))}catch(rn){if(!__PRIVATE_isIndexedDbTransactionError(rn))throw rn;__PRIVATE_logDebug("LocalStore",`Failed to update sequence numbers for target ${s}: ${rn}`)}en.ns=en.ns.remove(s),en.rs.delete(tn.target)}function __PRIVATE_localStoreExecuteQuery(Nt,s,Ot){const en=__PRIVATE_debugCast(Nt);let tn=SnapshotVersion.min(),nn=__PRIVATE_documentKeySet();return en.persistence.runTransaction("Execute query","readwrite",rn=>function(sn,an,ln){const cn=__PRIVATE_debugCast(sn),un=cn.rs.get(ln);return un!==void 0?PersistencePromise.resolve(cn.ns.get(un)):cn.Qr.getTargetData(an,ln)}(en,rn,__PRIVATE_queryToTarget(s)).next(on=>{if(on)return tn=on.lastLimboFreeSnapshotVersion,en.Qr.getMatchingKeysForTargetId(rn,on.targetId).next(sn=>{nn=sn})}).next(()=>en.ts.getDocumentsMatchingQuery(rn,s,Ot?tn:SnapshotVersion.min(),Ot?nn:__PRIVATE_documentKeySet())).next(on=>(__PRIVATE_setMaxReadTime(en,__PRIVATE_queryCollectionGroup(s),on),{documents:on,hs:nn})))}function __PRIVATE_setMaxReadTime(Nt,s,Ot){let en=Nt.ss.get(s)||SnapshotVersion.min();Ot.forEach((tn,nn)=>{nn.readTime.compareTo(en)>0&&(en=nn.readTime)}),Nt.ss.set(s,en)}class __PRIVATE_LocalClientState{constructor(){this.activeTargetIds=__PRIVATE_targetIdSet()}As(s){this.activeTargetIds=this.activeTargetIds.add(s)}Rs(s){this.activeTargetIds=this.activeTargetIds.delete(s)}ds(){const s={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(s)}}class __PRIVATE_MemorySharedClientState{constructor(){this.no=new __PRIVATE_LocalClientState,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(s){}updateMutationState(s,Ot,en){}addLocalQueryTarget(s){return this.no.As(s),this.ro[s]||"not-current"}updateQueryState(s,Ot,en){this.ro[s]=Ot}removeLocalQueryTarget(s){this.no.Rs(s)}isLocalQueryTarget(s){return this.no.activeTargetIds.has(s)}clearQueryState(s){delete this.ro[s]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(s){return this.no.activeTargetIds.has(s)}start(){return this.no=new __PRIVATE_LocalClientState,Promise.resolve()}handleUserChange(s,Ot,en){}setOnlineState(s){}shutdown(){}writeSequenceNumber(s){}notifyBundleLoaded(s){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_NoopConnectivityMonitor{io(s){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_BrowserConnectivityMonitor{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(s){this.uo.push(s)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){__PRIVATE_logDebug("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const s of this.uo)s(0)}ao(){__PRIVATE_logDebug("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const s of this.uo)s(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ae$1=null;function __PRIVATE_generateUniqueDebugId(){return Ae$1===null?Ae$1=function(){return 268435456+Math.round(2147483648*Math.random())}():Ae$1++,"0x"+Ae$1.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Re$1={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_StreamBridge{constructor(s){this.lo=s.lo,this.ho=s.ho}Po(s){this.Io=s}To(s){this.Eo=s}onMessage(s){this.Ao=s}close(){this.ho()}send(s){this.lo(s)}Ro(){this.Io()}Vo(s){this.Eo(s)}mo(s){this.Ao(s)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ve$1="WebChannelConnection";class __PRIVATE_WebChannelConnection extends class{constructor(Ot){this.databaseInfo=Ot,this.databaseId=Ot.databaseId;const en=Ot.ssl?"https":"http",tn=encodeURIComponent(this.databaseId.projectId),nn=encodeURIComponent(this.databaseId.database);this.fo=en+"://"+Ot.host,this.po=`projects/${tn}/databases/${nn}`,this.yo=this.databaseId.database==="(default)"?`project_id=${tn}`:`project_id=${tn}&database_id=${nn}`}get wo(){return!1}So(Ot,en,tn,nn,rn){const on=__PRIVATE_generateUniqueDebugId(),sn=this.bo(Ot,en.toUriEncodedString());__PRIVATE_logDebug("RestConnection",`Sending RPC '${Ot}' ${on}:`,sn,tn);const an={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(an,nn,rn),this.Co(Ot,sn,an,tn).then(ln=>(__PRIVATE_logDebug("RestConnection",`Received RPC '${Ot}' ${on}: `,ln),ln),ln=>{throw __PRIVATE_logWarn("RestConnection",`RPC '${Ot}' ${on} failed with error: `,ln,"url: ",sn,"request:",tn),ln})}vo(Ot,en,tn,nn,rn,on){return this.So(Ot,en,tn,nn,rn)}Do(Ot,en,tn){Ot["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+S$1}(),Ot["Content-Type"]="text/plain",this.databaseInfo.appId&&(Ot["X-Firebase-GMPID"]=this.databaseInfo.appId),en&&en.headers.forEach((nn,rn)=>Ot[rn]=nn),tn&&tn.headers.forEach((nn,rn)=>Ot[rn]=nn)}bo(Ot,en){const tn=Re$1[Ot];return`${this.fo}/v1/${en}:${tn}`}terminate(){}}{constructor(s){super(s),this.forceLongPolling=s.forceLongPolling,this.autoDetectLongPolling=s.autoDetectLongPolling,this.useFetchStreams=s.useFetchStreams,this.longPollingOptions=s.longPollingOptions}Co(s,Ot,en,tn){const nn=__PRIVATE_generateUniqueDebugId();return new Promise((rn,on)=>{const sn=new XhrIo;sn.setWithCredentials(!0),sn.listenOnce(EventType.COMPLETE,()=>{try{switch(sn.getLastErrorCode()){case ErrorCode$1.NO_ERROR:const ln=sn.getResponseJson();__PRIVATE_logDebug(Ve$1,`XHR for RPC '${s}' ${nn} received:`,JSON.stringify(ln)),rn(ln);break;case ErrorCode$1.TIMEOUT:__PRIVATE_logDebug(Ve$1,`RPC '${s}' ${nn} timed out`),on(new FirestoreError(D$2.DEADLINE_EXCEEDED,"Request time out"));break;case ErrorCode$1.HTTP_ERROR:const cn=sn.getStatus();if(__PRIVATE_logDebug(Ve$1,`RPC '${s}' ${nn} failed with status:`,cn,"response text:",sn.getResponseText()),cn>0){let un=sn.getResponseJson();Array.isArray(un)&&(un=un[0]);const dn=un==null?void 0:un.error;if(dn&&dn.status&&dn.message){const hn=function(mn){const gn=mn.toLowerCase().replace(/_/g,"-");return Object.values(D$2).indexOf(gn)>=0?gn:D$2.UNKNOWN}(dn.status);on(new FirestoreError(hn,dn.message))}else on(new FirestoreError(D$2.UNKNOWN,"Server responded with status "+sn.getStatus()))}else on(new FirestoreError(D$2.UNAVAILABLE,"Connection failed."));break;default:fail()}}finally{__PRIVATE_logDebug(Ve$1,`RPC '${s}' ${nn} completed.`)}});const an=JSON.stringify(tn);__PRIVATE_logDebug(Ve$1,`RPC '${s}' ${nn} sending request:`,tn),sn.send(Ot,"POST",an,en,15)})}Fo(s,Ot,en){const tn=__PRIVATE_generateUniqueDebugId(),nn=[this.fo,"/","google.firestore.v1.Firestore","/",s,"/channel"],rn=createWebChannelTransport(),on=getStatEventTarget(),sn={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},an=this.longPollingOptions.timeoutSeconds;an!==void 0&&(sn.longPollingTimeout=Math.round(1e3*an)),this.useFetchStreams&&(sn.useFetchStreams=!0),this.Do(sn.initMessageHeaders,Ot,en),sn.encodeInitMessageHeaders=!0;const ln=nn.join("");__PRIVATE_logDebug(Ve$1,`Creating RPC '${s}' stream ${tn}: ${ln}`,sn);const cn=rn.createWebChannel(ln,sn);let un=!1,dn=!1;const hn=new __PRIVATE_StreamBridge({lo:mn=>{dn?__PRIVATE_logDebug(Ve$1,`Not sending because RPC '${s}' stream ${tn} is closed:`,mn):(un||(__PRIVATE_logDebug(Ve$1,`Opening RPC '${s}' stream ${tn} transport.`),cn.open(),un=!0),__PRIVATE_logDebug(Ve$1,`RPC '${s}' stream ${tn} sending:`,mn),cn.send(mn))},ho:()=>cn.close()}),fn=(mn,gn,pn)=>{mn.listen(gn,_n=>{try{pn(_n)}catch(vn){setTimeout(()=>{throw vn},0)}})};return fn(cn,WebChannel.EventType.OPEN,()=>{dn||__PRIVATE_logDebug(Ve$1,`RPC '${s}' stream ${tn} transport opened.`)}),fn(cn,WebChannel.EventType.CLOSE,()=>{dn||(dn=!0,__PRIVATE_logDebug(Ve$1,`RPC '${s}' stream ${tn} transport closed`),hn.Vo())}),fn(cn,WebChannel.EventType.ERROR,mn=>{dn||(dn=!0,__PRIVATE_logWarn(Ve$1,`RPC '${s}' stream ${tn} transport errored:`,mn),hn.Vo(new FirestoreError(D$2.UNAVAILABLE,"The operation could not be completed")))}),fn(cn,WebChannel.EventType.MESSAGE,mn=>{var gn;if(!dn){const pn=mn.data[0];__PRIVATE_hardAssert(!!pn);const _n=pn,vn=_n.error||((gn=_n[0])===null||gn===void 0?void 0:gn.error);if(vn){__PRIVATE_logDebug(Ve$1,`RPC '${s}' stream ${tn} received error:`,vn);const bn=vn.status;let wn=function(En){const In=ae$1[En];if(In!==void 0)return __PRIVATE_mapCodeFromRpcCode(In)}(bn),Sn=vn.message;wn===void 0&&(wn=D$2.INTERNAL,Sn="Unknown error status: "+bn+" with message "+vn.message),dn=!0,hn.Vo(new FirestoreError(wn,Sn)),cn.close()}else __PRIVATE_logDebug(Ve$1,`RPC '${s}' stream ${tn} received:`,pn),hn.mo(pn)}}),fn(on,Event.STAT_EVENT,mn=>{mn.stat===Stat.PROXY?__PRIVATE_logDebug(Ve$1,`RPC '${s}' stream ${tn} detected buffering proxy`):mn.stat===Stat.NOPROXY&&__PRIVATE_logDebug(Ve$1,`RPC '${s}' stream ${tn} detected no buffering proxy`)}),setTimeout(()=>{hn.Ro()},0),hn}}function getDocument(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_newSerializer(Nt){return new JsonProtoSerializer(Nt,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_ExponentialBackoff{constructor(s,Ot,en=1e3,tn=1.5,nn=6e4){this.oi=s,this.timerId=Ot,this.Mo=en,this.xo=tn,this.Oo=nn,this.No=0,this.Lo=null,this.Bo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(s){this.cancel();const Ot=Math.floor(this.No+this.Qo()),en=Math.max(0,Date.now()-this.Bo),tn=Math.max(0,Ot-en);tn>0&&__PRIVATE_logDebug("ExponentialBackoff",`Backing off for ${tn} ms (base delay: ${this.No} ms, delay with jitter: ${Ot} ms, last attempt: ${en} ms ago)`),this.Lo=this.oi.enqueueAfterDelay(this.timerId,tn,()=>(this.Bo=Date.now(),s())),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){this.Lo!==null&&(this.Lo.skipDelay(),this.Lo=null)}cancel(){this.Lo!==null&&(this.Lo.cancel(),this.Lo=null)}Qo(){return(Math.random()-.5)*this.No}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_PersistentStream{constructor(s,Ot,en,tn,nn,rn,on,sn){this.oi=s,this.$o=en,this.Uo=tn,this.connection=nn,this.authCredentialsProvider=rn,this.appCheckCredentialsProvider=on,this.listener=sn,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new __PRIVATE_ExponentialBackoff(s,Ot)}Ho(){return this.state===1||this.state===5||this.Jo()}Jo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Yo()}async stop(){this.Ho()&&await this.close(0)}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&this.Go===null&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,()=>this.e_()))}t_(s){this.n_(),this.stream.send(s)}async e_(){if(this.Jo())return this.close(0)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}async close(s,Ot){this.n_(),this.r_(),this.jo.cancel(),this.Wo++,s!==4?this.jo.reset():Ot&&Ot.code===D$2.RESOURCE_EXHAUSTED?(__PRIVATE_logError(Ot.toString()),__PRIVATE_logError("Using maximum backoff delay to prevent overloading the backend."),this.jo.ko()):Ot&&Ot.code===D$2.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.i_(),this.stream.close(),this.stream=null),this.state=s,await this.listener.To(Ot)}i_(){}auth(){this.state=1;const s=this.s_(this.Wo),Ot=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([en,tn])=>{this.Wo===Ot&&this.o_(en,tn)},en=>{s(()=>{const tn=new FirestoreError(D$2.UNKNOWN,"Fetching auth token failed: "+en.message);return this.__(tn)})})}o_(s,Ot){const en=this.s_(this.Wo);this.stream=this.a_(s,Ot),this.stream.Po(()=>{en(()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,()=>(this.Jo()&&(this.state=3),Promise.resolve())),this.listener.Po()))}),this.stream.To(tn=>{en(()=>this.__(tn))}),this.stream.onMessage(tn=>{en(()=>this.onMessage(tn))})}Yo(){this.state=5,this.jo.qo(async()=>{this.state=0,this.start()})}__(s){return __PRIVATE_logDebug("PersistentStream",`close with error: ${s}`),this.stream=null,this.close(4,s)}s_(s){return Ot=>{this.oi.enqueueAndForget(()=>this.Wo===s?Ot():(__PRIVATE_logDebug("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class __PRIVATE_PersistentListenStream extends __PRIVATE_PersistentStream{constructor(s,Ot,en,tn,nn,rn){super(s,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",Ot,en,tn,rn),this.serializer=nn}a_(s,Ot){return this.connection.Fo("Listen",s,Ot)}onMessage(s){this.jo.reset();const Ot=__PRIVATE_fromWatchChange(this.serializer,s),en=function(nn){if(!("targetChange"in nn))return SnapshotVersion.min();const rn=nn.targetChange;return rn.targetIds&&rn.targetIds.length?SnapshotVersion.min():rn.readTime?__PRIVATE_fromVersion(rn.readTime):SnapshotVersion.min()}(s);return this.listener.u_(Ot,en)}c_(s){const Ot={};Ot.database=__PRIVATE_getEncodedDatabaseId(this.serializer),Ot.addTarget=function(nn,rn){let on;const sn=rn.target;if(on=__PRIVATE_targetIsDocumentTarget(sn)?{documents:__PRIVATE_toDocumentsTarget(nn,sn)}:{query:__PRIVATE_toQueryTarget(nn,sn).ut},on.targetId=rn.targetId,rn.resumeToken.approximateByteSize()>0){on.resumeToken=__PRIVATE_toBytes(nn,rn.resumeToken);const an=__PRIVATE_toInt32Proto(nn,rn.expectedCount);an!==null&&(on.expectedCount=an)}else if(rn.snapshotVersion.compareTo(SnapshotVersion.min())>0){on.readTime=toTimestamp$3(nn,rn.snapshotVersion.toTimestamp());const an=__PRIVATE_toInt32Proto(nn,rn.expectedCount);an!==null&&(on.expectedCount=an)}return on}(this.serializer,s);const en=__PRIVATE_toListenRequestLabels(this.serializer,s);en&&(Ot.labels=en),this.t_(Ot)}l_(s){const Ot={};Ot.database=__PRIVATE_getEncodedDatabaseId(this.serializer),Ot.removeTarget=s,this.t_(Ot)}}class __PRIVATE_PersistentWriteStream extends __PRIVATE_PersistentStream{constructor(s,Ot,en,tn,nn,rn){super(s,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",Ot,en,tn,rn),this.serializer=nn,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(s,Ot){return this.connection.Fo("Write",s,Ot)}onMessage(s){if(__PRIVATE_hardAssert(!!s.streamToken),this.lastStreamToken=s.streamToken,this.h_){this.jo.reset();const Ot=__PRIVATE_fromWriteResults(s.writeResults,s.commitTime),en=__PRIVATE_fromVersion(s.commitTime);return this.listener.T_(en,Ot)}return __PRIVATE_hardAssert(!s.writeResults||s.writeResults.length===0),this.h_=!0,this.listener.E_()}d_(){const s={};s.database=__PRIVATE_getEncodedDatabaseId(this.serializer),this.t_(s)}I_(s){const Ot={streamToken:this.lastStreamToken,writes:s.map(en=>toMutation(this.serializer,en))};this.t_(Ot)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_DatastoreImpl extends class{}{constructor(s,Ot,en,tn){super(),this.authCredentials=s,this.appCheckCredentials=Ot,this.connection=en,this.serializer=tn,this.A_=!1}R_(){if(this.A_)throw new FirestoreError(D$2.FAILED_PRECONDITION,"The client has already been terminated.")}So(s,Ot,en,tn){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([nn,rn])=>this.connection.So(s,__PRIVATE_toResourcePath(Ot,en),tn,nn,rn)).catch(nn=>{throw nn.name==="FirebaseError"?(nn.code===D$2.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),nn):new FirestoreError(D$2.UNKNOWN,nn.toString())})}vo(s,Ot,en,tn,nn){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([rn,on])=>this.connection.vo(s,__PRIVATE_toResourcePath(Ot,en),tn,rn,on,nn)).catch(rn=>{throw rn.name==="FirebaseError"?(rn.code===D$2.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),rn):new FirestoreError(D$2.UNKNOWN,rn.toString())})}terminate(){this.A_=!0,this.connection.terminate()}}class __PRIVATE_OnlineStateTracker{constructor(s,Ot){this.asyncQueue=s,this.onlineStateHandler=Ot,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){this.m_===0&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve())))}S_(s){this.state==="Online"?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_(`Connection failed 1 times. Most recent error: ${s.toString()}`),this.y_("Offline")))}set(s){this.b_(),this.m_=0,s==="Online"&&(this.g_=!1),this.y_(s)}y_(s){s!==this.state&&(this.state=s,this.onlineStateHandler(s))}w_(s){const Ot=`Could not reach Cloud Firestore backend. ${s}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.g_?(__PRIVATE_logError(Ot),this.g_=!1):__PRIVATE_logDebug("OnlineStateTracker",Ot)}b_(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_RemoteStoreImpl{constructor(s,Ot,en,tn,nn){this.localStore=s,this.datastore=Ot,this.asyncQueue=en,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=nn,this.M_.io(rn=>{en.enqueueAndForget(async()=>{__PRIVATE_canUseNetwork(this)&&(__PRIVATE_logDebug("RemoteStore","Restarting streams for network reachability change."),await async function(sn){const an=__PRIVATE_debugCast(sn);an.v_.add(4),await __PRIVATE_disableNetworkInternal(an),an.x_.set("Unknown"),an.v_.delete(4),await __PRIVATE_enableNetworkInternal(an)}(this))})}),this.x_=new __PRIVATE_OnlineStateTracker(en,tn)}}async function __PRIVATE_enableNetworkInternal(Nt){if(__PRIVATE_canUseNetwork(Nt))for(const s of Nt.F_)await s(!0)}async function __PRIVATE_disableNetworkInternal(Nt){for(const s of Nt.F_)await s(!1)}function __PRIVATE_remoteStoreListen(Nt,s){const Ot=__PRIVATE_debugCast(Nt);Ot.C_.has(s.targetId)||(Ot.C_.set(s.targetId,s),__PRIVATE_shouldStartWatchStream(Ot)?__PRIVATE_startWatchStream(Ot):__PRIVATE_ensureWatchStream(Ot).Jo()&&__PRIVATE_sendWatchRequest(Ot,s))}function __PRIVATE_remoteStoreUnlisten(Nt,s){const Ot=__PRIVATE_debugCast(Nt),en=__PRIVATE_ensureWatchStream(Ot);Ot.C_.delete(s),en.Jo()&&__PRIVATE_sendUnwatchRequest(Ot,s),Ot.C_.size===0&&(en.Jo()?en.Xo():__PRIVATE_canUseNetwork(Ot)&&Ot.x_.set("Unknown"))}function __PRIVATE_sendWatchRequest(Nt,s){if(Nt.O_.Oe(s.targetId),s.resumeToken.approximateByteSize()>0||s.snapshotVersion.compareTo(SnapshotVersion.min())>0){const Ot=Nt.remoteSyncer.getRemoteKeysForTarget(s.targetId).size;s=s.withExpectedCount(Ot)}__PRIVATE_ensureWatchStream(Nt).c_(s)}function __PRIVATE_sendUnwatchRequest(Nt,s){Nt.O_.Oe(s),__PRIVATE_ensureWatchStream(Nt).l_(s)}function __PRIVATE_startWatchStream(Nt){Nt.O_=new __PRIVATE_WatchChangeAggregator({getRemoteKeysForTarget:s=>Nt.remoteSyncer.getRemoteKeysForTarget(s),_t:s=>Nt.C_.get(s)||null,nt:()=>Nt.datastore.serializer.databaseId}),__PRIVATE_ensureWatchStream(Nt).start(),Nt.x_.p_()}function __PRIVATE_shouldStartWatchStream(Nt){return __PRIVATE_canUseNetwork(Nt)&&!__PRIVATE_ensureWatchStream(Nt).Ho()&&Nt.C_.size>0}function __PRIVATE_canUseNetwork(Nt){return __PRIVATE_debugCast(Nt).v_.size===0}function __PRIVATE_cleanUpWatchStreamState(Nt){Nt.O_=void 0}async function __PRIVATE_onWatchStreamOpen(Nt){Nt.C_.forEach((s,Ot)=>{__PRIVATE_sendWatchRequest(Nt,s)})}async function __PRIVATE_onWatchStreamClose(Nt,s){__PRIVATE_cleanUpWatchStreamState(Nt),__PRIVATE_shouldStartWatchStream(Nt)?(Nt.x_.S_(s),__PRIVATE_startWatchStream(Nt)):Nt.x_.set("Unknown")}async function __PRIVATE_onWatchStreamChange(Nt,s,Ot){if(Nt.x_.set("Online"),s instanceof __PRIVATE_WatchTargetChange&&s.state===2&&s.cause)try{await async function(tn,nn){const rn=nn.cause;for(const on of nn.targetIds)tn.C_.has(on)&&(await tn.remoteSyncer.rejectListen(on,rn),tn.C_.delete(on),tn.O_.removeTarget(on))}(Nt,s)}catch(en){__PRIVATE_logDebug("RemoteStore","Failed to remove targets %s: %s ",s.targetIds.join(","),en),await __PRIVATE_disableNetworkUntilRecovery(Nt,en)}else if(s instanceof __PRIVATE_DocumentWatchChange?Nt.O_.$e(s):s instanceof __PRIVATE_ExistenceFilterChange?Nt.O_.Je(s):Nt.O_.Ge(s),!Ot.isEqual(SnapshotVersion.min()))try{const en=await __PRIVATE_localStoreGetLastRemoteSnapshotVersion(Nt.localStore);Ot.compareTo(en)>=0&&await function(nn,rn){const on=nn.O_.it(rn);return on.targetChanges.forEach((sn,an)=>{if(sn.resumeToken.approximateByteSize()>0){const ln=nn.C_.get(an);ln&&nn.C_.set(an,ln.withResumeToken(sn.resumeToken,rn))}}),on.targetMismatches.forEach((sn,an)=>{const ln=nn.C_.get(sn);if(!ln)return;nn.C_.set(sn,ln.withResumeToken(ByteString.EMPTY_BYTE_STRING,ln.snapshotVersion)),__PRIVATE_sendUnwatchRequest(nn,sn);const cn=new TargetData(ln.target,sn,an,ln.sequenceNumber);__PRIVATE_sendWatchRequest(nn,cn)}),nn.remoteSyncer.applyRemoteEvent(on)}(Nt,Ot)}catch(en){__PRIVATE_logDebug("RemoteStore","Failed to raise snapshot:",en),await __PRIVATE_disableNetworkUntilRecovery(Nt,en)}}async function __PRIVATE_disableNetworkUntilRecovery(Nt,s,Ot){if(!__PRIVATE_isIndexedDbTransactionError(s))throw s;Nt.v_.add(1),await __PRIVATE_disableNetworkInternal(Nt),Nt.x_.set("Offline"),Ot||(Ot=()=>__PRIVATE_localStoreGetLastRemoteSnapshotVersion(Nt.localStore)),Nt.asyncQueue.enqueueRetryable(async()=>{__PRIVATE_logDebug("RemoteStore","Retrying IndexedDB access"),await Ot(),Nt.v_.delete(1),await __PRIVATE_enableNetworkInternal(Nt)})}function __PRIVATE_executeWithRecovery(Nt,s){return s().catch(Ot=>__PRIVATE_disableNetworkUntilRecovery(Nt,Ot,s))}async function __PRIVATE_fillWritePipeline(Nt){const s=__PRIVATE_debugCast(Nt),Ot=__PRIVATE_ensureWriteStream(s);let en=s.D_.length>0?s.D_[s.D_.length-1].batchId:-1;for(;__PRIVATE_canAddToWritePipeline(s);)try{const tn=await __PRIVATE_localStoreGetNextMutationBatch(s.localStore,en);if(tn===null){s.D_.length===0&&Ot.Xo();break}en=tn.batchId,__PRIVATE_addToWritePipeline(s,tn)}catch(tn){await __PRIVATE_disableNetworkUntilRecovery(s,tn)}__PRIVATE_shouldStartWriteStream(s)&&__PRIVATE_startWriteStream(s)}function __PRIVATE_canAddToWritePipeline(Nt){return __PRIVATE_canUseNetwork(Nt)&&Nt.D_.length<10}function __PRIVATE_addToWritePipeline(Nt,s){Nt.D_.push(s);const Ot=__PRIVATE_ensureWriteStream(Nt);Ot.Jo()&&Ot.P_&&Ot.I_(s.mutations)}function __PRIVATE_shouldStartWriteStream(Nt){return __PRIVATE_canUseNetwork(Nt)&&!__PRIVATE_ensureWriteStream(Nt).Ho()&&Nt.D_.length>0}function __PRIVATE_startWriteStream(Nt){__PRIVATE_ensureWriteStream(Nt).start()}async function __PRIVATE_onWriteStreamOpen(Nt){__PRIVATE_ensureWriteStream(Nt).d_()}async function __PRIVATE_onWriteHandshakeComplete(Nt){const s=__PRIVATE_ensureWriteStream(Nt);for(const Ot of Nt.D_)s.I_(Ot.mutations)}async function __PRIVATE_onMutationResult(Nt,s,Ot){const en=Nt.D_.shift(),tn=MutationBatchResult.from(en,s,Ot);await __PRIVATE_executeWithRecovery(Nt,()=>Nt.remoteSyncer.applySuccessfulWrite(tn)),await __PRIVATE_fillWritePipeline(Nt)}async function __PRIVATE_onWriteStreamClose(Nt,s){s&&__PRIVATE_ensureWriteStream(Nt).P_&&await async function(en,tn){if(function(rn){return __PRIVATE_isPermanentError(rn)&&rn!==D$2.ABORTED}(tn.code)){const nn=en.D_.shift();__PRIVATE_ensureWriteStream(en).Zo(),await __PRIVATE_executeWithRecovery(en,()=>en.remoteSyncer.rejectFailedWrite(nn.batchId,tn)),await __PRIVATE_fillWritePipeline(en)}}(Nt,s),__PRIVATE_shouldStartWriteStream(Nt)&&__PRIVATE_startWriteStream(Nt)}async function __PRIVATE_remoteStoreHandleCredentialChange(Nt,s){const Ot=__PRIVATE_debugCast(Nt);Ot.asyncQueue.verifyOperationInProgress(),__PRIVATE_logDebug("RemoteStore","RemoteStore received new credentials");const en=__PRIVATE_canUseNetwork(Ot);Ot.v_.add(3),await __PRIVATE_disableNetworkInternal(Ot),en&&Ot.x_.set("Unknown"),await Ot.remoteSyncer.handleCredentialChange(s),Ot.v_.delete(3),await __PRIVATE_enableNetworkInternal(Ot)}async function __PRIVATE_remoteStoreApplyPrimaryState(Nt,s){const Ot=__PRIVATE_debugCast(Nt);s?(Ot.v_.delete(2),await __PRIVATE_enableNetworkInternal(Ot)):s||(Ot.v_.add(2),await __PRIVATE_disableNetworkInternal(Ot),Ot.x_.set("Unknown"))}function __PRIVATE_ensureWatchStream(Nt){return Nt.N_||(Nt.N_=function(Ot,en,tn){const nn=__PRIVATE_debugCast(Ot);return nn.R_(),new __PRIVATE_PersistentListenStream(en,nn.connection,nn.authCredentials,nn.appCheckCredentials,nn.serializer,tn)}(Nt.datastore,Nt.asyncQueue,{Po:__PRIVATE_onWatchStreamOpen.bind(null,Nt),To:__PRIVATE_onWatchStreamClose.bind(null,Nt),u_:__PRIVATE_onWatchStreamChange.bind(null,Nt)}),Nt.F_.push(async s=>{s?(Nt.N_.Zo(),__PRIVATE_shouldStartWatchStream(Nt)?__PRIVATE_startWatchStream(Nt):Nt.x_.set("Unknown")):(await Nt.N_.stop(),__PRIVATE_cleanUpWatchStreamState(Nt))})),Nt.N_}function __PRIVATE_ensureWriteStream(Nt){return Nt.L_||(Nt.L_=function(Ot,en,tn){const nn=__PRIVATE_debugCast(Ot);return nn.R_(),new __PRIVATE_PersistentWriteStream(en,nn.connection,nn.authCredentials,nn.appCheckCredentials,nn.serializer,tn)}(Nt.datastore,Nt.asyncQueue,{Po:__PRIVATE_onWriteStreamOpen.bind(null,Nt),To:__PRIVATE_onWriteStreamClose.bind(null,Nt),E_:__PRIVATE_onWriteHandshakeComplete.bind(null,Nt),T_:__PRIVATE_onMutationResult.bind(null,Nt)}),Nt.F_.push(async s=>{s?(Nt.L_.Zo(),await __PRIVATE_fillWritePipeline(Nt)):(await Nt.L_.stop(),Nt.D_.length>0&&(__PRIVATE_logDebug("RemoteStore",`Stopping write stream with ${Nt.D_.length} pending writes`),Nt.D_=[]))})),Nt.L_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DelayedOperation{constructor(s,Ot,en,tn,nn){this.asyncQueue=s,this.timerId=Ot,this.targetTimeMs=en,this.op=tn,this.removalCallback=nn,this.deferred=new __PRIVATE_Deferred,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(rn=>{})}get promise(){return this.deferred.promise}static createAndSchedule(s,Ot,en,tn,nn){const rn=Date.now()+en,on=new DelayedOperation(s,Ot,rn,tn,nn);return on.start(en),on}start(s){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),s)}skipDelay(){return this.handleDelayElapsed()}cancel(s){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new FirestoreError(D$2.CANCELLED,"Operation cancelled"+(s?": "+s:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(s=>this.deferred.resolve(s))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function __PRIVATE_wrapInUserErrorIfRecoverable(Nt,s){if(__PRIVATE_logError("AsyncQueue",`${s}: ${Nt}`),__PRIVATE_isIndexedDbTransactionError(Nt))return new FirestoreError(D$2.UNAVAILABLE,`${s}: ${Nt}`);throw Nt}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DocumentSet{constructor(s){this.comparator=s?(Ot,en)=>s(Ot,en)||DocumentKey.comparator(Ot.key,en.key):(Ot,en)=>DocumentKey.comparator(Ot.key,en.key),this.keyedMap=documentMap(),this.sortedSet=new SortedMap$1(this.comparator)}static emptySet(s){return new DocumentSet(s.comparator)}has(s){return this.keyedMap.get(s)!=null}get(s){return this.keyedMap.get(s)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(s){const Ot=this.keyedMap.get(s);return Ot?this.sortedSet.indexOf(Ot):-1}get size(){return this.sortedSet.size}forEach(s){this.sortedSet.inorderTraversal((Ot,en)=>(s(Ot),!1))}add(s){const Ot=this.delete(s.key);return Ot.copy(Ot.keyedMap.insert(s.key,s),Ot.sortedSet.insert(s,null))}delete(s){const Ot=this.get(s);return Ot?this.copy(this.keyedMap.remove(s),this.sortedSet.remove(Ot)):this}isEqual(s){if(!(s instanceof DocumentSet)||this.size!==s.size)return!1;const Ot=this.sortedSet.getIterator(),en=s.sortedSet.getIterator();for(;Ot.hasNext();){const tn=Ot.getNext().key,nn=en.getNext().key;if(!tn.isEqual(nn))return!1}return!0}toString(){const s=[];return this.forEach(Ot=>{s.push(Ot.toString())}),s.length===0?"DocumentSet ()":`DocumentSet (
  `+s.join(`  
`)+`
)`}copy(s,Ot){const en=new DocumentSet;return en.comparator=this.comparator,en.keyedMap=s,en.sortedSet=Ot,en}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_DocumentChangeSet{constructor(){this.B_=new SortedMap$1(DocumentKey.comparator)}track(s){const Ot=s.doc.key,en=this.B_.get(Ot);en?s.type!==0&&en.type===3?this.B_=this.B_.insert(Ot,s):s.type===3&&en.type!==1?this.B_=this.B_.insert(Ot,{type:en.type,doc:s.doc}):s.type===2&&en.type===2?this.B_=this.B_.insert(Ot,{type:2,doc:s.doc}):s.type===2&&en.type===0?this.B_=this.B_.insert(Ot,{type:0,doc:s.doc}):s.type===1&&en.type===0?this.B_=this.B_.remove(Ot):s.type===1&&en.type===2?this.B_=this.B_.insert(Ot,{type:1,doc:en.doc}):s.type===0&&en.type===1?this.B_=this.B_.insert(Ot,{type:2,doc:s.doc}):fail():this.B_=this.B_.insert(Ot,s)}k_(){const s=[];return this.B_.inorderTraversal((Ot,en)=>{s.push(en)}),s}}class ViewSnapshot{constructor(s,Ot,en,tn,nn,rn,on,sn,an){this.query=s,this.docs=Ot,this.oldDocs=en,this.docChanges=tn,this.mutatedKeys=nn,this.fromCache=rn,this.syncStateChanged=on,this.excludesMetadataChanges=sn,this.hasCachedResults=an}static fromInitialDocuments(s,Ot,en,tn,nn){const rn=[];return Ot.forEach(on=>{rn.push({type:0,doc:on})}),new ViewSnapshot(s,Ot,DocumentSet.emptySet(Ot),rn,en,tn,!0,!1,nn)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(s){if(!(this.fromCache===s.fromCache&&this.hasCachedResults===s.hasCachedResults&&this.syncStateChanged===s.syncStateChanged&&this.mutatedKeys.isEqual(s.mutatedKeys)&&__PRIVATE_queryEquals(this.query,s.query)&&this.docs.isEqual(s.docs)&&this.oldDocs.isEqual(s.oldDocs)))return!1;const Ot=this.docChanges,en=s.docChanges;if(Ot.length!==en.length)return!1;for(let tn=0;tn<Ot.length;tn++)if(Ot[tn].type!==en[tn].type||!Ot[tn].doc.isEqual(en[tn].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_QueryListenersInfo{constructor(){this.q_=void 0,this.Q_=[]}K_(){return this.Q_.some(s=>s.U_())}}class __PRIVATE_EventManagerImpl{constructor(){this.queries=new ObjectMap(s=>__PRIVATE_canonifyQuery(s),__PRIVATE_queryEquals),this.onlineState="Unknown",this.W_=new Set}}async function __PRIVATE_eventManagerListen(Nt,s){const Ot=__PRIVATE_debugCast(Nt);let en=3;const tn=s.query;let nn=Ot.queries.get(tn);nn?!nn.K_()&&s.U_()&&(en=2):(nn=new __PRIVATE_QueryListenersInfo,en=s.U_()?0:1);try{switch(en){case 0:nn.q_=await Ot.onListen(tn,!0);break;case 1:nn.q_=await Ot.onListen(tn,!1);break;case 2:await Ot.onFirstRemoteStoreListen(tn)}}catch(rn){const on=__PRIVATE_wrapInUserErrorIfRecoverable(rn,`Initialization of query '${__PRIVATE_stringifyQuery(s.query)}' failed`);return void s.onError(on)}Ot.queries.set(tn,nn),nn.Q_.push(s),s.G_(Ot.onlineState),nn.q_&&s.z_(nn.q_)&&__PRIVATE_raiseSnapshotsInSyncEvent(Ot)}async function __PRIVATE_eventManagerUnlisten(Nt,s){const Ot=__PRIVATE_debugCast(Nt),en=s.query;let tn=3;const nn=Ot.queries.get(en);if(nn){const rn=nn.Q_.indexOf(s);rn>=0&&(nn.Q_.splice(rn,1),nn.Q_.length===0?tn=s.U_()?0:1:!nn.K_()&&s.U_()&&(tn=2))}switch(tn){case 0:return Ot.queries.delete(en),Ot.onUnlisten(en,!0);case 1:return Ot.queries.delete(en),Ot.onUnlisten(en,!1);case 2:return Ot.onLastRemoteStoreUnlisten(en);default:return}}function __PRIVATE_eventManagerOnWatchChange(Nt,s){const Ot=__PRIVATE_debugCast(Nt);let en=!1;for(const tn of s){const nn=tn.query,rn=Ot.queries.get(nn);if(rn){for(const on of rn.Q_)on.z_(tn)&&(en=!0);rn.q_=tn}}en&&__PRIVATE_raiseSnapshotsInSyncEvent(Ot)}function __PRIVATE_eventManagerOnWatchError(Nt,s,Ot){const en=__PRIVATE_debugCast(Nt),tn=en.queries.get(s);if(tn)for(const nn of tn.Q_)nn.onError(Ot);en.queries.delete(s)}function __PRIVATE_raiseSnapshotsInSyncEvent(Nt){Nt.W_.forEach(s=>{s.next()})}var me$1,fe$1;(fe$1=me$1||(me$1={})).j_="default",fe$1.Cache="cache";class __PRIVATE_QueryListener{constructor(s,Ot,en){this.query=s,this.H_=Ot,this.J_=!1,this.Y_=null,this.onlineState="Unknown",this.options=en||{}}z_(s){if(!this.options.includeMetadataChanges){const en=[];for(const tn of s.docChanges)tn.type!==3&&en.push(tn);s=new ViewSnapshot(s.query,s.docs,s.oldDocs,en,s.mutatedKeys,s.fromCache,s.syncStateChanged,!0,s.hasCachedResults)}let Ot=!1;return this.J_?this.Z_(s)&&(this.H_.next(s),Ot=!0):this.X_(s,this.onlineState)&&(this.ea(s),Ot=!0),this.Y_=s,Ot}onError(s){this.H_.error(s)}G_(s){this.onlineState=s;let Ot=!1;return this.Y_&&!this.J_&&this.X_(this.Y_,s)&&(this.ea(this.Y_),Ot=!0),Ot}X_(s,Ot){if(!s.fromCache||!this.U_())return!0;const en=Ot!=="Offline";return(!this.options.ta||!en)&&(!s.docs.isEmpty()||s.hasCachedResults||Ot==="Offline")}Z_(s){if(s.docChanges.length>0)return!0;const Ot=this.Y_&&this.Y_.hasPendingWrites!==s.hasPendingWrites;return!(!s.syncStateChanged&&!Ot)&&this.options.includeMetadataChanges===!0}ea(s){s=ViewSnapshot.fromInitialDocuments(s.query,s.docs,s.mutatedKeys,s.fromCache,s.hasCachedResults),this.J_=!0,this.H_.next(s)}U_(){return this.options.source!==me$1.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_AddedLimboDocument{constructor(s){this.key=s}}class __PRIVATE_RemovedLimboDocument{constructor(s){this.key=s}}class __PRIVATE_View{constructor(s,Ot){this.query=s,this.ua=Ot,this.ca=null,this.hasCachedResults=!1,this.current=!1,this.la=__PRIVATE_documentKeySet(),this.mutatedKeys=__PRIVATE_documentKeySet(),this.ha=__PRIVATE_newQueryComparator(s),this.Pa=new DocumentSet(this.ha)}get Ia(){return this.ua}Ta(s,Ot){const en=Ot?Ot.Ea:new __PRIVATE_DocumentChangeSet,tn=Ot?Ot.Pa:this.Pa;let nn=Ot?Ot.mutatedKeys:this.mutatedKeys,rn=tn,on=!1;const sn=this.query.limitType==="F"&&tn.size===this.query.limit?tn.last():null,an=this.query.limitType==="L"&&tn.size===this.query.limit?tn.first():null;if(s.inorderTraversal((ln,cn)=>{const un=tn.get(ln),dn=__PRIVATE_queryMatches(this.query,cn)?cn:null,hn=!!un&&this.mutatedKeys.has(un.key),fn=!!dn&&(dn.hasLocalMutations||this.mutatedKeys.has(dn.key)&&dn.hasCommittedMutations);let mn=!1;un&&dn?un.data.isEqual(dn.data)?hn!==fn&&(en.track({type:3,doc:dn}),mn=!0):this.da(un,dn)||(en.track({type:2,doc:dn}),mn=!0,(sn&&this.ha(dn,sn)>0||an&&this.ha(dn,an)<0)&&(on=!0)):!un&&dn?(en.track({type:0,doc:dn}),mn=!0):un&&!dn&&(en.track({type:1,doc:un}),mn=!0,(sn||an)&&(on=!0)),mn&&(dn?(rn=rn.add(dn),nn=fn?nn.add(ln):nn.delete(ln)):(rn=rn.delete(ln),nn=nn.delete(ln)))}),this.query.limit!==null)for(;rn.size>this.query.limit;){const ln=this.query.limitType==="F"?rn.last():rn.first();rn=rn.delete(ln.key),nn=nn.delete(ln.key),en.track({type:1,doc:ln})}return{Pa:rn,Ea:en,Xi:on,mutatedKeys:nn}}da(s,Ot){return s.hasLocalMutations&&Ot.hasCommittedMutations&&!Ot.hasLocalMutations}applyChanges(s,Ot,en,tn){const nn=this.Pa;this.Pa=s.Pa,this.mutatedKeys=s.mutatedKeys;const rn=s.Ea.k_();rn.sort((ln,cn)=>function(dn,hn){const fn=mn=>{switch(mn){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return fail()}};return fn(dn)-fn(hn)}(ln.type,cn.type)||this.ha(ln.doc,cn.doc)),this.Aa(en),tn=tn!=null&&tn;const on=Ot&&!tn?this.Ra():[],sn=this.la.size===0&&this.current&&!tn?1:0,an=sn!==this.ca;return this.ca=sn,rn.length!==0||an?{snapshot:new ViewSnapshot(this.query,s.Pa,nn,rn,s.mutatedKeys,sn===0,an,!1,!!en&&en.resumeToken.approximateByteSize()>0),Va:on}:{Va:on}}G_(s){return this.current&&s==="Offline"?(this.current=!1,this.applyChanges({Pa:this.Pa,Ea:new __PRIVATE_DocumentChangeSet,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{Va:[]}}ma(s){return!this.ua.has(s)&&!!this.Pa.has(s)&&!this.Pa.get(s).hasLocalMutations}Aa(s){s&&(s.addedDocuments.forEach(Ot=>this.ua=this.ua.add(Ot)),s.modifiedDocuments.forEach(Ot=>{}),s.removedDocuments.forEach(Ot=>this.ua=this.ua.delete(Ot)),this.current=s.current)}Ra(){if(!this.current)return[];const s=this.la;this.la=__PRIVATE_documentKeySet(),this.Pa.forEach(en=>{this.ma(en.key)&&(this.la=this.la.add(en.key))});const Ot=[];return s.forEach(en=>{this.la.has(en)||Ot.push(new __PRIVATE_RemovedLimboDocument(en))}),this.la.forEach(en=>{s.has(en)||Ot.push(new __PRIVATE_AddedLimboDocument(en))}),Ot}fa(s){this.ua=s.hs,this.la=__PRIVATE_documentKeySet();const Ot=this.Ta(s.documents);return this.applyChanges(Ot,!0)}ga(){return ViewSnapshot.fromInitialDocuments(this.query,this.Pa,this.mutatedKeys,this.ca===0,this.hasCachedResults)}}class __PRIVATE_QueryView{constructor(s,Ot,en){this.query=s,this.targetId=Ot,this.view=en}}class LimboResolution{constructor(s){this.key=s,this.pa=!1}}class __PRIVATE_SyncEngineImpl{constructor(s,Ot,en,tn,nn,rn){this.localStore=s,this.remoteStore=Ot,this.eventManager=en,this.sharedClientState=tn,this.currentUser=nn,this.maxConcurrentLimboResolutions=rn,this.ya={},this.wa=new ObjectMap(on=>__PRIVATE_canonifyQuery(on),__PRIVATE_queryEquals),this.Sa=new Map,this.ba=new Set,this.Da=new SortedMap$1(DocumentKey.comparator),this.Ca=new Map,this.va=new __PRIVATE_ReferenceSet,this.Fa={},this.Ma=new Map,this.xa=__PRIVATE_TargetIdGenerator.Ln(),this.onlineState="Unknown",this.Oa=void 0}get isPrimaryClient(){return this.Oa===!0}}async function __PRIVATE_syncEngineListen(Nt,s,Ot=!0){const en=__PRIVATE_ensureWatchCallbacks(Nt);let tn;const nn=en.wa.get(s);return nn?(en.sharedClientState.addLocalQueryTarget(nn.targetId),tn=nn.view.ga()):tn=await __PRIVATE_allocateTargetAndMaybeListen(en,s,Ot,!0),tn}async function __PRIVATE_triggerRemoteStoreListen(Nt,s){const Ot=__PRIVATE_ensureWatchCallbacks(Nt);await __PRIVATE_allocateTargetAndMaybeListen(Ot,s,!0,!1)}async function __PRIVATE_allocateTargetAndMaybeListen(Nt,s,Ot,en){const tn=await __PRIVATE_localStoreAllocateTarget(Nt.localStore,__PRIVATE_queryToTarget(s)),nn=tn.targetId,rn=Ot?Nt.sharedClientState.addLocalQueryTarget(nn):"not-current";let on;return en&&(on=await __PRIVATE_initializeViewAndComputeSnapshot(Nt,s,nn,rn==="current",tn.resumeToken)),Nt.isPrimaryClient&&Ot&&__PRIVATE_remoteStoreListen(Nt.remoteStore,tn),on}async function __PRIVATE_initializeViewAndComputeSnapshot(Nt,s,Ot,en,tn){Nt.Na=(cn,un,dn)=>async function(fn,mn,gn,pn){let _n=mn.view.Ta(gn);_n.Xi&&(_n=await __PRIVATE_localStoreExecuteQuery(fn.localStore,mn.query,!1).then(({documents:Sn})=>mn.view.Ta(Sn,_n)));const vn=pn&&pn.targetChanges.get(mn.targetId),bn=pn&&pn.targetMismatches.get(mn.targetId)!=null,wn=mn.view.applyChanges(_n,fn.isPrimaryClient,vn,bn);return __PRIVATE_updateTrackedLimbos(fn,mn.targetId,wn.Va),wn.snapshot}(Nt,cn,un,dn);const nn=await __PRIVATE_localStoreExecuteQuery(Nt.localStore,s,!0),rn=new __PRIVATE_View(s,nn.hs),on=rn.Ta(nn.documents),sn=TargetChange.createSynthesizedTargetChangeForCurrentChange(Ot,en&&Nt.onlineState!=="Offline",tn),an=rn.applyChanges(on,Nt.isPrimaryClient,sn);__PRIVATE_updateTrackedLimbos(Nt,Ot,an.Va);const ln=new __PRIVATE_QueryView(s,Ot,rn);return Nt.wa.set(s,ln),Nt.Sa.has(Ot)?Nt.Sa.get(Ot).push(s):Nt.Sa.set(Ot,[s]),an.snapshot}async function __PRIVATE_syncEngineUnlisten(Nt,s,Ot){const en=__PRIVATE_debugCast(Nt),tn=en.wa.get(s),nn=en.Sa.get(tn.targetId);if(nn.length>1)return en.Sa.set(tn.targetId,nn.filter(rn=>!__PRIVATE_queryEquals(rn,s))),void en.wa.delete(s);en.isPrimaryClient?(en.sharedClientState.removeLocalQueryTarget(tn.targetId),en.sharedClientState.isActiveQueryTarget(tn.targetId)||await __PRIVATE_localStoreReleaseTarget(en.localStore,tn.targetId,!1).then(()=>{en.sharedClientState.clearQueryState(tn.targetId),Ot&&__PRIVATE_remoteStoreUnlisten(en.remoteStore,tn.targetId),__PRIVATE_removeAndCleanupTarget(en,tn.targetId)}).catch(__PRIVATE_ignoreIfPrimaryLeaseLoss)):(__PRIVATE_removeAndCleanupTarget(en,tn.targetId),await __PRIVATE_localStoreReleaseTarget(en.localStore,tn.targetId,!0))}async function __PRIVATE_triggerRemoteStoreUnlisten(Nt,s){const Ot=__PRIVATE_debugCast(Nt),en=Ot.wa.get(s),tn=Ot.Sa.get(en.targetId);Ot.isPrimaryClient&&tn.length===1&&(Ot.sharedClientState.removeLocalQueryTarget(en.targetId),__PRIVATE_remoteStoreUnlisten(Ot.remoteStore,en.targetId))}async function __PRIVATE_syncEngineWrite(Nt,s,Ot){const en=__PRIVATE_syncEngineEnsureWriteCallbacks(Nt);try{const tn=await function(rn,on){const sn=__PRIVATE_debugCast(rn),an=Timestamp.now(),ln=on.reduce((dn,hn)=>dn.add(hn.key),__PRIVATE_documentKeySet());let cn,un;return sn.persistence.runTransaction("Locally write mutations","readwrite",dn=>{let hn=__PRIVATE_mutableDocumentMap(),fn=__PRIVATE_documentKeySet();return sn.os.getEntries(dn,ln).next(mn=>{hn=mn,hn.forEach((gn,pn)=>{pn.isValidDocument()||(fn=fn.add(gn))})}).next(()=>sn.localDocuments.getOverlayedDocuments(dn,hn)).next(mn=>{cn=mn;const gn=[];for(const pn of on){const _n=__PRIVATE_mutationExtractBaseValue(pn,cn.get(pn.key).overlayedDocument);_n!=null&&gn.push(new __PRIVATE_PatchMutation(pn.key,_n,__PRIVATE_extractFieldMask(_n.value.mapValue),Precondition.exists(!0)))}return sn.mutationQueue.addMutationBatch(dn,an,gn,on)}).next(mn=>{un=mn;const gn=mn.applyToLocalDocumentSet(cn,fn);return sn.documentOverlayCache.saveOverlays(dn,mn.batchId,gn)})}).then(()=>({batchId:un.batchId,changes:__PRIVATE_convertOverlayedDocumentMapToDocumentMap(cn)}))}(en.localStore,s);en.sharedClientState.addPendingMutation(tn.batchId),function(rn,on,sn){let an=rn.Fa[rn.currentUser.toKey()];an||(an=new SortedMap$1(__PRIVATE_primitiveComparator)),an=an.insert(on,sn),rn.Fa[rn.currentUser.toKey()]=an}(en,tn.batchId,Ot),await __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(en,tn.changes),await __PRIVATE_fillWritePipeline(en.remoteStore)}catch(tn){const nn=__PRIVATE_wrapInUserErrorIfRecoverable(tn,"Failed to persist write");Ot.reject(nn)}}async function __PRIVATE_syncEngineApplyRemoteEvent(Nt,s){const Ot=__PRIVATE_debugCast(Nt);try{const en=await __PRIVATE_localStoreApplyRemoteEventToLocalCache(Ot.localStore,s);s.targetChanges.forEach((tn,nn)=>{const rn=Ot.Ca.get(nn);rn&&(__PRIVATE_hardAssert(tn.addedDocuments.size+tn.modifiedDocuments.size+tn.removedDocuments.size<=1),tn.addedDocuments.size>0?rn.pa=!0:tn.modifiedDocuments.size>0?__PRIVATE_hardAssert(rn.pa):tn.removedDocuments.size>0&&(__PRIVATE_hardAssert(rn.pa),rn.pa=!1))}),await __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(Ot,en,s)}catch(en){await __PRIVATE_ignoreIfPrimaryLeaseLoss(en)}}function __PRIVATE_syncEngineApplyOnlineStateChange(Nt,s,Ot){const en=__PRIVATE_debugCast(Nt);if(en.isPrimaryClient&&Ot===0||!en.isPrimaryClient&&Ot===1){const tn=[];en.wa.forEach((nn,rn)=>{const on=rn.view.G_(s);on.snapshot&&tn.push(on.snapshot)}),function(rn,on){const sn=__PRIVATE_debugCast(rn);sn.onlineState=on;let an=!1;sn.queries.forEach((ln,cn)=>{for(const un of cn.Q_)un.G_(on)&&(an=!0)}),an&&__PRIVATE_raiseSnapshotsInSyncEvent(sn)}(en.eventManager,s),tn.length&&en.ya.u_(tn),en.onlineState=s,en.isPrimaryClient&&en.sharedClientState.setOnlineState(s)}}async function __PRIVATE_syncEngineRejectListen(Nt,s,Ot){const en=__PRIVATE_debugCast(Nt);en.sharedClientState.updateQueryState(s,"rejected",Ot);const tn=en.Ca.get(s),nn=tn&&tn.key;if(nn){let rn=new SortedMap$1(DocumentKey.comparator);rn=rn.insert(nn,MutableDocument.newNoDocument(nn,SnapshotVersion.min()));const on=__PRIVATE_documentKeySet().add(nn),sn=new RemoteEvent(SnapshotVersion.min(),new Map,new SortedMap$1(__PRIVATE_primitiveComparator),rn,on);await __PRIVATE_syncEngineApplyRemoteEvent(en,sn),en.Da=en.Da.remove(nn),en.Ca.delete(s),__PRIVATE_pumpEnqueuedLimboResolutions(en)}else await __PRIVATE_localStoreReleaseTarget(en.localStore,s,!1).then(()=>__PRIVATE_removeAndCleanupTarget(en,s,Ot)).catch(__PRIVATE_ignoreIfPrimaryLeaseLoss)}async function __PRIVATE_syncEngineApplySuccessfulWrite(Nt,s){const Ot=__PRIVATE_debugCast(Nt),en=s.batch.batchId;try{const tn=await __PRIVATE_localStoreAcknowledgeBatch(Ot.localStore,s);__PRIVATE_processUserCallback(Ot,en,null),__PRIVATE_triggerPendingWritesCallbacks(Ot,en),Ot.sharedClientState.updateMutationState(en,"acknowledged"),await __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(Ot,tn)}catch(tn){await __PRIVATE_ignoreIfPrimaryLeaseLoss(tn)}}async function __PRIVATE_syncEngineRejectFailedWrite(Nt,s,Ot){const en=__PRIVATE_debugCast(Nt);try{const tn=await function(rn,on){const sn=__PRIVATE_debugCast(rn);return sn.persistence.runTransaction("Reject batch","readwrite-primary",an=>{let ln;return sn.mutationQueue.lookupMutationBatch(an,on).next(cn=>(__PRIVATE_hardAssert(cn!==null),ln=cn.keys(),sn.mutationQueue.removeMutationBatch(an,cn))).next(()=>sn.mutationQueue.performConsistencyCheck(an)).next(()=>sn.documentOverlayCache.removeOverlaysForBatchId(an,ln,on)).next(()=>sn.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(an,ln)).next(()=>sn.localDocuments.getDocuments(an,ln))})}(en.localStore,s);__PRIVATE_processUserCallback(en,s,Ot),__PRIVATE_triggerPendingWritesCallbacks(en,s),en.sharedClientState.updateMutationState(s,"rejected",Ot),await __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(en,tn)}catch(tn){await __PRIVATE_ignoreIfPrimaryLeaseLoss(tn)}}function __PRIVATE_triggerPendingWritesCallbacks(Nt,s){(Nt.Ma.get(s)||[]).forEach(Ot=>{Ot.resolve()}),Nt.Ma.delete(s)}function __PRIVATE_processUserCallback(Nt,s,Ot){const en=__PRIVATE_debugCast(Nt);let tn=en.Fa[en.currentUser.toKey()];if(tn){const nn=tn.get(s);nn&&(Ot?nn.reject(Ot):nn.resolve(),tn=tn.remove(s)),en.Fa[en.currentUser.toKey()]=tn}}function __PRIVATE_removeAndCleanupTarget(Nt,s,Ot=null){Nt.sharedClientState.removeLocalQueryTarget(s);for(const en of Nt.Sa.get(s))Nt.wa.delete(en),Ot&&Nt.ya.La(en,Ot);Nt.Sa.delete(s),Nt.isPrimaryClient&&Nt.va.Vr(s).forEach(en=>{Nt.va.containsKey(en)||__PRIVATE_removeLimboTarget(Nt,en)})}function __PRIVATE_removeLimboTarget(Nt,s){Nt.ba.delete(s.path.canonicalString());const Ot=Nt.Da.get(s);Ot!==null&&(__PRIVATE_remoteStoreUnlisten(Nt.remoteStore,Ot),Nt.Da=Nt.Da.remove(s),Nt.Ca.delete(Ot),__PRIVATE_pumpEnqueuedLimboResolutions(Nt))}function __PRIVATE_updateTrackedLimbos(Nt,s,Ot){for(const en of Ot)en instanceof __PRIVATE_AddedLimboDocument?(Nt.va.addReference(en.key,s),__PRIVATE_trackLimboChange(Nt,en)):en instanceof __PRIVATE_RemovedLimboDocument?(__PRIVATE_logDebug("SyncEngine","Document no longer in limbo: "+en.key),Nt.va.removeReference(en.key,s),Nt.va.containsKey(en.key)||__PRIVATE_removeLimboTarget(Nt,en.key)):fail()}function __PRIVATE_trackLimboChange(Nt,s){const Ot=s.key,en=Ot.path.canonicalString();Nt.Da.get(Ot)||Nt.ba.has(en)||(__PRIVATE_logDebug("SyncEngine","New document in limbo: "+Ot),Nt.ba.add(en),__PRIVATE_pumpEnqueuedLimboResolutions(Nt))}function __PRIVATE_pumpEnqueuedLimboResolutions(Nt){for(;Nt.ba.size>0&&Nt.Da.size<Nt.maxConcurrentLimboResolutions;){const s=Nt.ba.values().next().value;Nt.ba.delete(s);const Ot=new DocumentKey(ResourcePath.fromString(s)),en=Nt.xa.next();Nt.Ca.set(en,new LimboResolution(Ot)),Nt.Da=Nt.Da.insert(Ot,en),__PRIVATE_remoteStoreListen(Nt.remoteStore,new TargetData(__PRIVATE_queryToTarget(__PRIVATE_newQueryForPath(Ot.path)),en,"TargetPurposeLimboResolution",__PRIVATE_ListenSequence._e))}}async function __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(Nt,s,Ot){const en=__PRIVATE_debugCast(Nt),tn=[],nn=[],rn=[];en.wa.isEmpty()||(en.wa.forEach((on,sn)=>{rn.push(en.Na(sn,s,Ot).then(an=>{if((an||Ot)&&en.isPrimaryClient&&en.sharedClientState.updateQueryState(sn.targetId,an!=null&&an.fromCache?"not-current":"current"),an){tn.push(an);const ln=__PRIVATE_LocalViewChanges.Ki(sn.targetId,an);nn.push(ln)}}))}),await Promise.all(rn),en.ya.u_(tn),await async function(sn,an){const ln=__PRIVATE_debugCast(sn);try{await ln.persistence.runTransaction("notifyLocalViewChanges","readwrite",cn=>PersistencePromise.forEach(an,un=>PersistencePromise.forEach(un.qi,dn=>ln.persistence.referenceDelegate.addReference(cn,un.targetId,dn)).next(()=>PersistencePromise.forEach(un.Qi,dn=>ln.persistence.referenceDelegate.removeReference(cn,un.targetId,dn)))))}catch(cn){if(!__PRIVATE_isIndexedDbTransactionError(cn))throw cn;__PRIVATE_logDebug("LocalStore","Failed to update sequence numbers: "+cn)}for(const cn of an){const un=cn.targetId;if(!cn.fromCache){const dn=ln.ns.get(un),hn=dn.snapshotVersion,fn=dn.withLastLimboFreeSnapshotVersion(hn);ln.ns=ln.ns.insert(un,fn)}}}(en.localStore,nn))}async function __PRIVATE_syncEngineHandleCredentialChange(Nt,s){const Ot=__PRIVATE_debugCast(Nt);if(!Ot.currentUser.isEqual(s)){__PRIVATE_logDebug("SyncEngine","User change. New user:",s.toKey());const en=await __PRIVATE_localStoreHandleUserChange(Ot.localStore,s);Ot.currentUser=s,function(nn,rn){nn.Ma.forEach(on=>{on.forEach(sn=>{sn.reject(new FirestoreError(D$2.CANCELLED,rn))})}),nn.Ma.clear()}(Ot,"'waitForPendingWrites' promise is rejected due to a user change."),Ot.sharedClientState.handleUserChange(s,en.removedBatchIds,en.addedBatchIds),await __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(Ot,en.us)}}function __PRIVATE_syncEngineGetRemoteKeysForTarget(Nt,s){const Ot=__PRIVATE_debugCast(Nt),en=Ot.Ca.get(s);if(en&&en.pa)return __PRIVATE_documentKeySet().add(en.key);{let tn=__PRIVATE_documentKeySet();const nn=Ot.Sa.get(s);if(!nn)return tn;for(const rn of nn){const on=Ot.wa.get(rn);tn=tn.unionWith(on.view.Ia)}return tn}}function __PRIVATE_ensureWatchCallbacks(Nt){const s=__PRIVATE_debugCast(Nt);return s.remoteStore.remoteSyncer.applyRemoteEvent=__PRIVATE_syncEngineApplyRemoteEvent.bind(null,s),s.remoteStore.remoteSyncer.getRemoteKeysForTarget=__PRIVATE_syncEngineGetRemoteKeysForTarget.bind(null,s),s.remoteStore.remoteSyncer.rejectListen=__PRIVATE_syncEngineRejectListen.bind(null,s),s.ya.u_=__PRIVATE_eventManagerOnWatchChange.bind(null,s.eventManager),s.ya.La=__PRIVATE_eventManagerOnWatchError.bind(null,s.eventManager),s}function __PRIVATE_syncEngineEnsureWriteCallbacks(Nt){const s=__PRIVATE_debugCast(Nt);return s.remoteStore.remoteSyncer.applySuccessfulWrite=__PRIVATE_syncEngineApplySuccessfulWrite.bind(null,s),s.remoteStore.remoteSyncer.rejectFailedWrite=__PRIVATE_syncEngineRejectFailedWrite.bind(null,s),s}class MemoryOfflineComponentProvider{constructor(){this.synchronizeTabs=!1}async initialize(s){this.serializer=__PRIVATE_newSerializer(s.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(s),this.persistence=this.createPersistence(s),await this.persistence.start(),this.localStore=this.createLocalStore(s),this.gcScheduler=this.createGarbageCollectionScheduler(s,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(s,this.localStore)}createGarbageCollectionScheduler(s,Ot){return null}createIndexBackfillerScheduler(s,Ot){return null}createLocalStore(s){return __PRIVATE_newLocalStore(this.persistence,new __PRIVATE_QueryEngine,s.initialUser,this.serializer)}createPersistence(s){return new __PRIVATE_MemoryPersistence(__PRIVATE_MemoryEagerDelegate.Hr,this.serializer)}createSharedClientState(s){return new __PRIVATE_MemorySharedClientState}async terminate(){var s,Ot;(s=this.gcScheduler)===null||s===void 0||s.stop(),(Ot=this.indexBackfillerScheduler)===null||Ot===void 0||Ot.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class OnlineComponentProvider{async initialize(s,Ot){this.localStore||(this.localStore=s.localStore,this.sharedClientState=s.sharedClientState,this.datastore=this.createDatastore(Ot),this.remoteStore=this.createRemoteStore(Ot),this.eventManager=this.createEventManager(Ot),this.syncEngine=this.createSyncEngine(Ot,!s.synchronizeTabs),this.sharedClientState.onlineStateHandler=en=>__PRIVATE_syncEngineApplyOnlineStateChange(this.syncEngine,en,1),this.remoteStore.remoteSyncer.handleCredentialChange=__PRIVATE_syncEngineHandleCredentialChange.bind(null,this.syncEngine),await __PRIVATE_remoteStoreApplyPrimaryState(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(s){return function(){return new __PRIVATE_EventManagerImpl}()}createDatastore(s){const Ot=__PRIVATE_newSerializer(s.databaseInfo.databaseId),en=function(nn){return new __PRIVATE_WebChannelConnection(nn)}(s.databaseInfo);return function(nn,rn,on,sn){return new __PRIVATE_DatastoreImpl(nn,rn,on,sn)}(s.authCredentials,s.appCheckCredentials,en,Ot)}createRemoteStore(s){return function(en,tn,nn,rn,on){return new __PRIVATE_RemoteStoreImpl(en,tn,nn,rn,on)}(this.localStore,this.datastore,s.asyncQueue,Ot=>__PRIVATE_syncEngineApplyOnlineStateChange(this.syncEngine,Ot,0),function(){return __PRIVATE_BrowserConnectivityMonitor.D()?new __PRIVATE_BrowserConnectivityMonitor:new __PRIVATE_NoopConnectivityMonitor}())}createSyncEngine(s,Ot){return function(tn,nn,rn,on,sn,an,ln){const cn=new __PRIVATE_SyncEngineImpl(tn,nn,rn,on,sn,an);return ln&&(cn.Oa=!0),cn}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,s.initialUser,s.maxConcurrentLimboResolutions,Ot)}async terminate(){var s;await async function(en){const tn=__PRIVATE_debugCast(en);__PRIVATE_logDebug("RemoteStore","RemoteStore shutting down."),tn.v_.add(5),await __PRIVATE_disableNetworkInternal(tn),tn.M_.shutdown(),tn.x_.set("Unknown")}(this.remoteStore),(s=this.datastore)===null||s===void 0||s.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_AsyncObserver{constructor(s){this.observer=s,this.muted=!1}next(s){this.observer.next&&this.qa(this.observer.next,s)}error(s){this.observer.error?this.qa(this.observer.error,s):__PRIVATE_logError("Uncaught Error in snapshot listener:",s.toString())}Qa(){this.muted=!0}qa(s,Ot){this.muted||setTimeout(()=>{this.muted||s(Ot)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FirestoreClient{constructor(s,Ot,en,tn){this.authCredentials=s,this.appCheckCredentials=Ot,this.asyncQueue=en,this.databaseInfo=tn,this.user=User.UNAUTHENTICATED,this.clientId=__PRIVATE_AutoId.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(en,async nn=>{__PRIVATE_logDebug("FirestoreClient","Received user=",nn.uid),await this.authCredentialListener(nn),this.user=nn}),this.appCheckCredentials.start(en,nn=>(__PRIVATE_logDebug("FirestoreClient","Received new app check token=",nn),this.appCheckCredentialListener(nn,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(s){this.authCredentialListener=s}setAppCheckTokenChangeListener(s){this.appCheckCredentialListener=s}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new FirestoreError(D$2.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const s=new __PRIVATE_Deferred;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),s.resolve()}catch(Ot){const en=__PRIVATE_wrapInUserErrorIfRecoverable(Ot,"Failed to shutdown persistence");s.reject(en)}}),s.promise}}async function __PRIVATE_setOfflineComponentProvider(Nt,s){Nt.asyncQueue.verifyOperationInProgress(),__PRIVATE_logDebug("FirestoreClient","Initializing OfflineComponentProvider");const Ot=Nt.configuration;await s.initialize(Ot);let en=Ot.initialUser;Nt.setCredentialChangeListener(async tn=>{en.isEqual(tn)||(await __PRIVATE_localStoreHandleUserChange(s.localStore,tn),en=tn)}),s.persistence.setDatabaseDeletedListener(()=>Nt.terminate()),Nt._offlineComponents=s}async function __PRIVATE_setOnlineComponentProvider(Nt,s){Nt.asyncQueue.verifyOperationInProgress();const Ot=await __PRIVATE_ensureOfflineComponents(Nt);__PRIVATE_logDebug("FirestoreClient","Initializing OnlineComponentProvider"),await s.initialize(Ot,Nt.configuration),Nt.setCredentialChangeListener(en=>__PRIVATE_remoteStoreHandleCredentialChange(s.remoteStore,en)),Nt.setAppCheckTokenChangeListener((en,tn)=>__PRIVATE_remoteStoreHandleCredentialChange(s.remoteStore,tn)),Nt._onlineComponents=s}function __PRIVATE_canFallbackFromIndexedDbError(Nt){return Nt.name==="FirebaseError"?Nt.code===D$2.FAILED_PRECONDITION||Nt.code===D$2.UNIMPLEMENTED:!(typeof DOMException<"u"&&Nt instanceof DOMException)||Nt.code===22||Nt.code===20||Nt.code===11}async function __PRIVATE_ensureOfflineComponents(Nt){if(!Nt._offlineComponents)if(Nt._uninitializedComponentsProvider){__PRIVATE_logDebug("FirestoreClient","Using user provided OfflineComponentProvider");try{await __PRIVATE_setOfflineComponentProvider(Nt,Nt._uninitializedComponentsProvider._offline)}catch(s){const Ot=s;if(!__PRIVATE_canFallbackFromIndexedDbError(Ot))throw Ot;__PRIVATE_logWarn("Error using user provided cache. Falling back to memory cache: "+Ot),await __PRIVATE_setOfflineComponentProvider(Nt,new MemoryOfflineComponentProvider)}}else __PRIVATE_logDebug("FirestoreClient","Using default OfflineComponentProvider"),await __PRIVATE_setOfflineComponentProvider(Nt,new MemoryOfflineComponentProvider);return Nt._offlineComponents}async function __PRIVATE_ensureOnlineComponents(Nt){return Nt._onlineComponents||(Nt._uninitializedComponentsProvider?(__PRIVATE_logDebug("FirestoreClient","Using user provided OnlineComponentProvider"),await __PRIVATE_setOnlineComponentProvider(Nt,Nt._uninitializedComponentsProvider._online)):(__PRIVATE_logDebug("FirestoreClient","Using default OnlineComponentProvider"),await __PRIVATE_setOnlineComponentProvider(Nt,new OnlineComponentProvider))),Nt._onlineComponents}function __PRIVATE_getSyncEngine(Nt){return __PRIVATE_ensureOnlineComponents(Nt).then(s=>s.syncEngine)}async function __PRIVATE_getEventManager(Nt){const s=await __PRIVATE_ensureOnlineComponents(Nt),Ot=s.eventManager;return Ot.onListen=__PRIVATE_syncEngineListen.bind(null,s.syncEngine),Ot.onUnlisten=__PRIVATE_syncEngineUnlisten.bind(null,s.syncEngine),Ot.onFirstRemoteStoreListen=__PRIVATE_triggerRemoteStoreListen.bind(null,s.syncEngine),Ot.onLastRemoteStoreUnlisten=__PRIVATE_triggerRemoteStoreUnlisten.bind(null,s.syncEngine),Ot}function __PRIVATE_firestoreClientGetDocumentViaSnapshotListener(Nt,s,Ot={}){const en=new __PRIVATE_Deferred;return Nt.asyncQueue.enqueueAndForget(async()=>function(nn,rn,on,sn,an){const ln=new __PRIVATE_AsyncObserver({next:un=>{rn.enqueueAndForget(()=>__PRIVATE_eventManagerUnlisten(nn,cn));const dn=un.docs.has(on);!dn&&un.fromCache?an.reject(new FirestoreError(D$2.UNAVAILABLE,"Failed to get document because the client is offline.")):dn&&un.fromCache&&sn&&sn.source==="server"?an.reject(new FirestoreError(D$2.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):an.resolve(un)},error:un=>an.reject(un)}),cn=new __PRIVATE_QueryListener(__PRIVATE_newQueryForPath(on.path),ln,{includeMetadataChanges:!0,ta:!0});return __PRIVATE_eventManagerListen(nn,cn)}(await __PRIVATE_getEventManager(Nt),Nt.asyncQueue,s,Ot,en)),en.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_cloneLongPollingOptions(Nt){const s={};return Nt.timeoutSeconds!==void 0&&(s.timeoutSeconds=Nt.timeoutSeconds),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ge$1=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_validateNonEmptyArgument(Nt,s,Ot){if(!Ot)throw new FirestoreError(D$2.INVALID_ARGUMENT,`Function ${Nt}() cannot be called with an empty ${s}.`)}function __PRIVATE_validateIsNotUsedTogether(Nt,s,Ot,en){if(s===!0&&en===!0)throw new FirestoreError(D$2.INVALID_ARGUMENT,`${Nt} and ${Ot} cannot be used together.`)}function __PRIVATE_validateDocumentPath(Nt){if(!DocumentKey.isDocumentKey(Nt))throw new FirestoreError(D$2.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${Nt} has ${Nt.length}.`)}function __PRIVATE_validateCollectionPath(Nt){if(DocumentKey.isDocumentKey(Nt))throw new FirestoreError(D$2.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${Nt} has ${Nt.length}.`)}function __PRIVATE_valueDescription(Nt){if(Nt===void 0)return"undefined";if(Nt===null)return"null";if(typeof Nt=="string")return Nt.length>20&&(Nt=`${Nt.substring(0,20)}...`),JSON.stringify(Nt);if(typeof Nt=="number"||typeof Nt=="boolean")return""+Nt;if(typeof Nt=="object"){if(Nt instanceof Array)return"an array";{const s=function(en){return en.constructor?en.constructor.name:null}(Nt);return s?`a custom ${s} object`:"an object"}}return typeof Nt=="function"?"a function":fail()}function __PRIVATE_cast(Nt,s){if("_delegate"in Nt&&(Nt=Nt._delegate),!(Nt instanceof s)){if(s.name===Nt.constructor.name)throw new FirestoreError(D$2.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const Ot=__PRIVATE_valueDescription(Nt);throw new FirestoreError(D$2.INVALID_ARGUMENT,`Expected type '${s.name}', but it was: ${Ot}`)}}return Nt}function __PRIVATE_validatePositiveNumber(Nt,s){if(s<=0)throw new FirestoreError(D$2.INVALID_ARGUMENT,`Function ${Nt}() requires a positive number, but it was: ${s}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FirestoreSettingsImpl{constructor(s){var Ot,en;if(s.host===void 0){if(s.ssl!==void 0)throw new FirestoreError(D$2.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=s.host,this.ssl=(Ot=s.ssl)===null||Ot===void 0||Ot;if(this.credentials=s.credentials,this.ignoreUndefinedProperties=!!s.ignoreUndefinedProperties,this.localCache=s.localCache,s.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(s.cacheSizeBytes!==-1&&s.cacheSizeBytes<1048576)throw new FirestoreError(D$2.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=s.cacheSizeBytes}__PRIVATE_validateIsNotUsedTogether("experimentalForceLongPolling",s.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",s.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!s.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:s.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!s.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=__PRIVATE_cloneLongPollingOptions((en=s.experimentalLongPollingOptions)!==null&&en!==void 0?en:{}),function(nn){if(nn.timeoutSeconds!==void 0){if(isNaN(nn.timeoutSeconds))throw new FirestoreError(D$2.INVALID_ARGUMENT,`invalid long polling timeout: ${nn.timeoutSeconds} (must not be NaN)`);if(nn.timeoutSeconds<5)throw new FirestoreError(D$2.INVALID_ARGUMENT,`invalid long polling timeout: ${nn.timeoutSeconds} (minimum allowed value is 5)`);if(nn.timeoutSeconds>30)throw new FirestoreError(D$2.INVALID_ARGUMENT,`invalid long polling timeout: ${nn.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!s.useFetchStreams}isEqual(s){return this.host===s.host&&this.ssl===s.ssl&&this.credentials===s.credentials&&this.cacheSizeBytes===s.cacheSizeBytes&&this.experimentalForceLongPolling===s.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===s.experimentalAutoDetectLongPolling&&function(en,tn){return en.timeoutSeconds===tn.timeoutSeconds}(this.experimentalLongPollingOptions,s.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===s.ignoreUndefinedProperties&&this.useFetchStreams===s.useFetchStreams}}class Firestore$1{constructor(s,Ot,en,tn){this._authCredentials=s,this._appCheckCredentials=Ot,this._databaseId=en,this._app=tn,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new FirestoreSettingsImpl({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new FirestoreError(D$2.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(s){if(this._settingsFrozen)throw new FirestoreError(D$2.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new FirestoreSettingsImpl(s),s.credentials!==void 0&&(this._authCredentials=function(en){if(!en)return new __PRIVATE_EmptyAuthCredentialsProvider;switch(en.type){case"firstParty":return new __PRIVATE_FirstPartyAuthCredentialsProvider(en.sessionIndex||"0",en.iamToken||null,en.authTokenFactory||null);case"provider":return en.client;default:throw new FirestoreError(D$2.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(s.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(Ot){const en=ge$1.get(Ot);en&&(__PRIVATE_logDebug("ComponentProvider","Removing Datastore"),ge$1.delete(Ot),en.terminate())}(this),Promise.resolve()}}function connectFirestoreEmulator(Nt,s,Ot,en={}){var tn;const nn=(Nt=__PRIVATE_cast(Nt,Firestore$1))._getSettings(),rn=`${s}:${Ot}`;if(nn.host!=="firestore.googleapis.com"&&nn.host!==rn&&__PRIVATE_logWarn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),Nt._setSettings(Object.assign(Object.assign({},nn),{host:rn,ssl:!1})),en.mockUserToken){let on,sn;if(typeof en.mockUserToken=="string")on=en.mockUserToken,sn=User.MOCK_USER;else{on=createMockUserToken$1(en.mockUserToken,(tn=Nt._app)===null||tn===void 0?void 0:tn.options.projectId);const an=en.mockUserToken.sub||en.mockUserToken.user_id;if(!an)throw new FirestoreError(D$2.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");sn=new User(an)}Nt._authCredentials=new __PRIVATE_EmulatorAuthCredentialsProvider(new __PRIVATE_OAuthToken(on,sn))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Query{constructor(s,Ot,en){this.converter=Ot,this._query=en,this.type="query",this.firestore=s}withConverter(s){return new Query(this.firestore,s,this._query)}}class DocumentReference{constructor(s,Ot,en){this.converter=Ot,this._key=en,this.type="document",this.firestore=s}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new CollectionReference(this.firestore,this.converter,this._key.path.popLast())}withConverter(s){return new DocumentReference(this.firestore,s,this._key)}}class CollectionReference extends Query{constructor(s,Ot,en){super(s,Ot,__PRIVATE_newQueryForPath(en)),this._path=en,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const s=this._path.popLast();return s.isEmpty()?null:new DocumentReference(this.firestore,null,new DocumentKey(s))}withConverter(s){return new CollectionReference(this.firestore,s,this._path)}}function collection(Nt,s,...Ot){if(Nt=getModularInstance$1(Nt),__PRIVATE_validateNonEmptyArgument("collection","path",s),Nt instanceof Firestore$1){const en=ResourcePath.fromString(s,...Ot);return __PRIVATE_validateCollectionPath(en),new CollectionReference(Nt,null,en)}{if(!(Nt instanceof DocumentReference||Nt instanceof CollectionReference))throw new FirestoreError(D$2.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const en=Nt._path.child(ResourcePath.fromString(s,...Ot));return __PRIVATE_validateCollectionPath(en),new CollectionReference(Nt.firestore,null,en)}}function doc(Nt,s,...Ot){if(Nt=getModularInstance$1(Nt),arguments.length===1&&(s=__PRIVATE_AutoId.newId()),__PRIVATE_validateNonEmptyArgument("doc","path",s),Nt instanceof Firestore$1){const en=ResourcePath.fromString(s,...Ot);return __PRIVATE_validateDocumentPath(en),new DocumentReference(Nt,null,new DocumentKey(en))}{if(!(Nt instanceof DocumentReference||Nt instanceof CollectionReference))throw new FirestoreError(D$2.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const en=Nt._path.child(ResourcePath.fromString(s,...Ot));return __PRIVATE_validateDocumentPath(en),new DocumentReference(Nt.firestore,Nt instanceof CollectionReference?Nt.converter:null,new DocumentKey(en))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_AsyncQueueImpl{constructor(){this.nu=Promise.resolve(),this.ru=[],this.iu=!1,this.su=[],this.ou=null,this._u=!1,this.au=!1,this.uu=[],this.jo=new __PRIVATE_ExponentialBackoff(this,"async_queue_retry"),this.cu=()=>{const Ot=getDocument();Ot&&__PRIVATE_logDebug("AsyncQueue","Visibility state changed to "+Ot.visibilityState),this.jo.Ko()};const s=getDocument();s&&typeof s.addEventListener=="function"&&s.addEventListener("visibilitychange",this.cu)}get isShuttingDown(){return this.iu}enqueueAndForget(s){this.enqueue(s)}enqueueAndForgetEvenWhileRestricted(s){this.lu(),this.hu(s)}enterRestrictedMode(s){if(!this.iu){this.iu=!0,this.au=s||!1;const Ot=getDocument();Ot&&typeof Ot.removeEventListener=="function"&&Ot.removeEventListener("visibilitychange",this.cu)}}enqueue(s){if(this.lu(),this.iu)return new Promise(()=>{});const Ot=new __PRIVATE_Deferred;return this.hu(()=>this.iu&&this.au?Promise.resolve():(s().then(Ot.resolve,Ot.reject),Ot.promise)).then(()=>Ot.promise)}enqueueRetryable(s){this.enqueueAndForget(()=>(this.ru.push(s),this.Pu()))}async Pu(){if(this.ru.length!==0){try{await this.ru[0](),this.ru.shift(),this.jo.reset()}catch(s){if(!__PRIVATE_isIndexedDbTransactionError(s))throw s;__PRIVATE_logDebug("AsyncQueue","Operation failed with retryable error: "+s)}this.ru.length>0&&this.jo.qo(()=>this.Pu())}}hu(s){const Ot=this.nu.then(()=>(this._u=!0,s().catch(en=>{this.ou=en,this._u=!1;const tn=function(rn){let on=rn.message||"";return rn.stack&&(on=rn.stack.includes(rn.message)?rn.stack:rn.message+`
`+rn.stack),on}(en);throw __PRIVATE_logError("INTERNAL UNHANDLED ERROR: ",tn),en}).then(en=>(this._u=!1,en))));return this.nu=Ot,Ot}enqueueAfterDelay(s,Ot,en){this.lu(),this.uu.indexOf(s)>-1&&(Ot=0);const tn=DelayedOperation.createAndSchedule(this,s,Ot,en,nn=>this.Iu(nn));return this.su.push(tn),tn}lu(){this.ou&&fail()}verifyOperationInProgress(){}async Tu(){let s;do s=this.nu,await s;while(s!==this.nu)}Eu(s){for(const Ot of this.su)if(Ot.timerId===s)return!0;return!1}du(s){return this.Tu().then(()=>{this.su.sort((Ot,en)=>Ot.targetTimeMs-en.targetTimeMs);for(const Ot of this.su)if(Ot.skipDelay(),s!=="all"&&Ot.timerId===s)break;return this.Tu()})}Au(s){this.uu.push(s)}Iu(s){const Ot=this.su.indexOf(s);this.su.splice(Ot,1)}}function __PRIVATE_isPartialObserver(Nt){return function(Ot,en){if(typeof Ot!="object"||Ot===null)return!1;const tn=Ot;for(const nn of en)if(nn in tn&&typeof tn[nn]=="function")return!0;return!1}(Nt,["next","error","complete"])}class Firestore extends Firestore$1{constructor(s,Ot,en,tn){super(s,Ot,en,tn),this.type="firestore",this._queue=function(){return new __PRIVATE_AsyncQueueImpl}(),this._persistenceKey=(tn==null?void 0:tn.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||__PRIVATE_configureFirestore(this),this._firestoreClient.terminate()}}function getFirestore(Nt,s){const Ot=typeof Nt=="object"?Nt:getApp(),en=typeof Nt=="string"?Nt:s||"(default)",tn=_getProvider(Ot,"firestore").getImmediate({identifier:en});if(!tn._initialized){const nn=getDefaultEmulatorHostnameAndPort$1("firestore");nn&&connectFirestoreEmulator(tn,...nn)}return tn}function ensureFirestoreConfigured(Nt){return Nt._firestoreClient||__PRIVATE_configureFirestore(Nt),Nt._firestoreClient.verifyNotTerminated(),Nt._firestoreClient}function __PRIVATE_configureFirestore(Nt){var s,Ot,en;const tn=Nt._freezeSettings(),nn=function(on,sn,an,ln){return new DatabaseInfo(on,sn,an,ln.host,ln.ssl,ln.experimentalForceLongPolling,ln.experimentalAutoDetectLongPolling,__PRIVATE_cloneLongPollingOptions(ln.experimentalLongPollingOptions),ln.useFetchStreams)}(Nt._databaseId,((s=Nt._app)===null||s===void 0?void 0:s.options.appId)||"",Nt._persistenceKey,tn);Nt._firestoreClient=new FirestoreClient(Nt._authCredentials,Nt._appCheckCredentials,Nt._queue,nn),!((Ot=tn.localCache)===null||Ot===void 0)&&Ot._offlineComponentProvider&&(!((en=tn.localCache)===null||en===void 0)&&en._onlineComponentProvider)&&(Nt._firestoreClient._uninitializedComponentsProvider={_offlineKind:tn.localCache.kind,_offline:tn.localCache._offlineComponentProvider,_online:tn.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bytes{constructor(s){this._byteString=s}static fromBase64String(s){try{return new Bytes(ByteString.fromBase64String(s))}catch(Ot){throw new FirestoreError(D$2.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+Ot)}}static fromUint8Array(s){return new Bytes(ByteString.fromUint8Array(s))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(s){return this._byteString.isEqual(s._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FieldPath{constructor(...s){for(let Ot=0;Ot<s.length;++Ot)if(s[Ot].length===0)throw new FirestoreError(D$2.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new FieldPath$1(s)}isEqual(s){return this._internalPath.isEqual(s._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FieldValue{constructor(s){this._methodName=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GeoPoint{constructor(s,Ot){if(!isFinite(s)||s<-90||s>90)throw new FirestoreError(D$2.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+s);if(!isFinite(Ot)||Ot<-180||Ot>180)throw new FirestoreError(D$2.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+Ot);this._lat=s,this._long=Ot}get latitude(){return this._lat}get longitude(){return this._long}isEqual(s){return this._lat===s._lat&&this._long===s._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(s){return __PRIVATE_primitiveComparator(this._lat,s._lat)||__PRIVATE_primitiveComparator(this._long,s._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ye$1=/^__.*__$/;class ParsedSetData{constructor(s,Ot,en){this.data=s,this.fieldMask=Ot,this.fieldTransforms=en}toMutation(s,Ot){return this.fieldMask!==null?new __PRIVATE_PatchMutation(s,this.data,this.fieldMask,Ot,this.fieldTransforms):new __PRIVATE_SetMutation(s,this.data,Ot,this.fieldTransforms)}}function __PRIVATE_isWrite(Nt){switch(Nt){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw fail()}}class __PRIVATE_ParseContextImpl{constructor(s,Ot,en,tn,nn,rn){this.settings=s,this.databaseId=Ot,this.serializer=en,this.ignoreUndefinedProperties=tn,nn===void 0&&this.Ru(),this.fieldTransforms=nn||[],this.fieldMask=rn||[]}get path(){return this.settings.path}get Vu(){return this.settings.Vu}mu(s){return new __PRIVATE_ParseContextImpl(Object.assign(Object.assign({},this.settings),s),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}fu(s){var Ot;const en=(Ot=this.path)===null||Ot===void 0?void 0:Ot.child(s),tn=this.mu({path:en,gu:!1});return tn.pu(s),tn}yu(s){var Ot;const en=(Ot=this.path)===null||Ot===void 0?void 0:Ot.child(s),tn=this.mu({path:en,gu:!1});return tn.Ru(),tn}wu(s){return this.mu({path:void 0,gu:!0})}Su(s){return __PRIVATE_createError(s,this.settings.methodName,this.settings.bu||!1,this.path,this.settings.Du)}contains(s){return this.fieldMask.find(Ot=>s.isPrefixOf(Ot))!==void 0||this.fieldTransforms.find(Ot=>s.isPrefixOf(Ot.field))!==void 0}Ru(){if(this.path)for(let s=0;s<this.path.length;s++)this.pu(this.path.get(s))}pu(s){if(s.length===0)throw this.Su("Document fields must not be empty");if(__PRIVATE_isWrite(this.Vu)&&ye$1.test(s))throw this.Su('Document fields cannot begin and end with "__"')}}class __PRIVATE_UserDataReader{constructor(s,Ot,en){this.databaseId=s,this.ignoreUndefinedProperties=Ot,this.serializer=en||__PRIVATE_newSerializer(s)}Cu(s,Ot,en,tn=!1){return new __PRIVATE_ParseContextImpl({Vu:s,methodName:Ot,Du:en,path:FieldPath$1.emptyPath(),gu:!1,bu:tn},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function __PRIVATE_newUserDataReader(Nt){const s=Nt._freezeSettings(),Ot=__PRIVATE_newSerializer(Nt._databaseId);return new __PRIVATE_UserDataReader(Nt._databaseId,!!s.ignoreUndefinedProperties,Ot)}function __PRIVATE_parseSetData(Nt,s,Ot,en,tn,nn={}){const rn=Nt.Cu(nn.merge||nn.mergeFields?2:0,s,Ot,tn);__PRIVATE_validatePlainObject("Data must be an object, but it was:",rn,en);const on=__PRIVATE_parseObject(en,rn);let sn,an;if(nn.merge)sn=new FieldMask(rn.fieldMask),an=rn.fieldTransforms;else if(nn.mergeFields){const ln=[];for(const cn of nn.mergeFields){const un=__PRIVATE_fieldPathFromArgument$1(s,cn,Ot);if(!rn.contains(un))throw new FirestoreError(D$2.INVALID_ARGUMENT,`Field '${un}' is specified in your field mask but missing from your input data.`);__PRIVATE_fieldMaskContains(ln,un)||ln.push(un)}sn=new FieldMask(ln),an=rn.fieldTransforms.filter(cn=>sn.covers(cn.field))}else sn=null,an=rn.fieldTransforms;return new ParsedSetData(new ObjectValue(on),sn,an)}function __PRIVATE_parseQueryValue(Nt,s,Ot,en=!1){return __PRIVATE_parseData(Ot,Nt.Cu(en?4:3,s))}function __PRIVATE_parseData(Nt,s){if(__PRIVATE_looksLikeJsonObject(Nt=getModularInstance$1(Nt)))return __PRIVATE_validatePlainObject("Unsupported field value:",s,Nt),__PRIVATE_parseObject(Nt,s);if(Nt instanceof FieldValue)return function(en,tn){if(!__PRIVATE_isWrite(tn.Vu))throw tn.Su(`${en._methodName}() can only be used with update() and set()`);if(!tn.path)throw tn.Su(`${en._methodName}() is not currently supported inside arrays`);const nn=en._toFieldTransform(tn);nn&&tn.fieldTransforms.push(nn)}(Nt,s),null;if(Nt===void 0&&s.ignoreUndefinedProperties)return null;if(s.path&&s.fieldMask.push(s.path),Nt instanceof Array){if(s.settings.gu&&s.Vu!==4)throw s.Su("Nested arrays are not supported");return function(en,tn){const nn=[];let rn=0;for(const on of en){let sn=__PRIVATE_parseData(on,tn.wu(rn));sn==null&&(sn={nullValue:"NULL_VALUE"}),nn.push(sn),rn++}return{arrayValue:{values:nn}}}(Nt,s)}return function(en,tn){if((en=getModularInstance$1(en))===null)return{nullValue:"NULL_VALUE"};if(typeof en=="number")return toNumber(tn.serializer,en);if(typeof en=="boolean")return{booleanValue:en};if(typeof en=="string")return{stringValue:en};if(en instanceof Date){const nn=Timestamp.fromDate(en);return{timestampValue:toTimestamp$3(tn.serializer,nn)}}if(en instanceof Timestamp){const nn=new Timestamp(en.seconds,1e3*Math.floor(en.nanoseconds/1e3));return{timestampValue:toTimestamp$3(tn.serializer,nn)}}if(en instanceof GeoPoint)return{geoPointValue:{latitude:en.latitude,longitude:en.longitude}};if(en instanceof Bytes)return{bytesValue:__PRIVATE_toBytes(tn.serializer,en._byteString)};if(en instanceof DocumentReference){const nn=tn.databaseId,rn=en.firestore._databaseId;if(!rn.isEqual(nn))throw tn.Su(`Document reference is for database ${rn.projectId}/${rn.database} but should be for database ${nn.projectId}/${nn.database}`);return{referenceValue:__PRIVATE_toResourceName(en.firestore._databaseId||tn.databaseId,en._key.path)}}throw tn.Su(`Unsupported field value: ${__PRIVATE_valueDescription(en)}`)}(Nt,s)}function __PRIVATE_parseObject(Nt,s){const Ot={};return isEmpty(Nt)?s.path&&s.path.length>0&&s.fieldMask.push(s.path):forEach(Nt,(en,tn)=>{const nn=__PRIVATE_parseData(tn,s.fu(en));nn!=null&&(Ot[en]=nn)}),{mapValue:{fields:Ot}}}function __PRIVATE_looksLikeJsonObject(Nt){return!(typeof Nt!="object"||Nt===null||Nt instanceof Array||Nt instanceof Date||Nt instanceof Timestamp||Nt instanceof GeoPoint||Nt instanceof Bytes||Nt instanceof DocumentReference||Nt instanceof FieldValue)}function __PRIVATE_validatePlainObject(Nt,s,Ot){if(!__PRIVATE_looksLikeJsonObject(Ot)||!function(tn){return typeof tn=="object"&&tn!==null&&(Object.getPrototypeOf(tn)===Object.prototype||Object.getPrototypeOf(tn)===null)}(Ot)){const en=__PRIVATE_valueDescription(Ot);throw en==="an object"?s.Su(Nt+" a custom object"):s.Su(Nt+" "+en)}}function __PRIVATE_fieldPathFromArgument$1(Nt,s,Ot){if((s=getModularInstance$1(s))instanceof FieldPath)return s._internalPath;if(typeof s=="string")return __PRIVATE_fieldPathFromDotSeparatedString(Nt,s);throw __PRIVATE_createError("Field path arguments must be of type string or ",Nt,!1,void 0,Ot)}const we$1=new RegExp("[~\\*/\\[\\]]");function __PRIVATE_fieldPathFromDotSeparatedString(Nt,s,Ot){if(s.search(we$1)>=0)throw __PRIVATE_createError(`Invalid field path (${s}). Paths must not contain '~', '*', '/', '[', or ']'`,Nt,!1,void 0,Ot);try{return new FieldPath(...s.split("."))._internalPath}catch{throw __PRIVATE_createError(`Invalid field path (${s}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,Nt,!1,void 0,Ot)}}function __PRIVATE_createError(Nt,s,Ot,en,tn){const nn=en&&!en.isEmpty(),rn=tn!==void 0;let on=`Function ${s}() called with invalid data`;Ot&&(on+=" (via `toFirestore()`)"),on+=". ";let sn="";return(nn||rn)&&(sn+=" (found",nn&&(sn+=` in field ${en}`),rn&&(sn+=` in document ${tn}`),sn+=")"),new FirestoreError(D$2.INVALID_ARGUMENT,on+Nt+sn)}function __PRIVATE_fieldMaskContains(Nt,s){return Nt.some(Ot=>Ot.isEqual(s))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DocumentSnapshot$1{constructor(s,Ot,en,tn,nn){this._firestore=s,this._userDataWriter=Ot,this._key=en,this._document=tn,this._converter=nn}get id(){return this._key.path.lastSegment()}get ref(){return new DocumentReference(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const s=new QueryDocumentSnapshot$1(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(s)}return this._userDataWriter.convertValue(this._document.data.value)}}get(s){if(this._document){const Ot=this._document.data.field(__PRIVATE_fieldPathFromArgument("DocumentSnapshot.get",s));if(Ot!==null)return this._userDataWriter.convertValue(Ot)}}}class QueryDocumentSnapshot$1 extends DocumentSnapshot$1{data(){return super.data()}}function __PRIVATE_fieldPathFromArgument(Nt,s){return typeof s=="string"?__PRIVATE_fieldPathFromDotSeparatedString(Nt,s):s instanceof FieldPath?s._internalPath:s._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_validateHasExplicitOrderByForLimitToLast(Nt){if(Nt.limitType==="L"&&Nt.explicitOrderBy.length===0)throw new FirestoreError(D$2.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class AppliableConstraint{}class QueryConstraint extends AppliableConstraint{}function query(Nt,s,...Ot){let en=[];s instanceof AppliableConstraint&&en.push(s),en=en.concat(Ot),function(nn){const rn=nn.filter(sn=>sn instanceof QueryCompositeFilterConstraint).length,on=nn.filter(sn=>sn instanceof QueryFieldFilterConstraint).length;if(rn>1||rn>0&&on>0)throw new FirestoreError(D$2.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(en);for(const tn of en)Nt=tn._apply(Nt);return Nt}class QueryFieldFilterConstraint extends QueryConstraint{constructor(s,Ot,en){super(),this._field=s,this._op=Ot,this._value=en,this.type="where"}static _create(s,Ot,en){return new QueryFieldFilterConstraint(s,Ot,en)}_apply(s){const Ot=this._parse(s);return __PRIVATE_validateNewFieldFilter(s._query,Ot),new Query(s.firestore,s.converter,__PRIVATE_queryWithAddedFilter(s._query,Ot))}_parse(s){const Ot=__PRIVATE_newUserDataReader(s.firestore);return function(nn,rn,on,sn,an,ln,cn){let un;if(an.isKeyField()){if(ln==="array-contains"||ln==="array-contains-any")throw new FirestoreError(D$2.INVALID_ARGUMENT,`Invalid Query. You can't perform '${ln}' queries on documentId().`);if(ln==="in"||ln==="not-in"){__PRIVATE_validateDisjunctiveFilterElements(cn,ln);const dn=[];for(const hn of cn)dn.push(__PRIVATE_parseDocumentIdValue(sn,nn,hn));un={arrayValue:{values:dn}}}else un=__PRIVATE_parseDocumentIdValue(sn,nn,cn)}else ln!=="in"&&ln!=="not-in"&&ln!=="array-contains-any"||__PRIVATE_validateDisjunctiveFilterElements(cn,ln),un=__PRIVATE_parseQueryValue(on,rn,cn,ln==="in"||ln==="not-in");return FieldFilter.create(an,ln,un)}(s._query,"where",Ot,s.firestore._databaseId,this._field,this._op,this._value)}}class QueryCompositeFilterConstraint extends AppliableConstraint{constructor(s,Ot){super(),this.type=s,this._queryConstraints=Ot}static _create(s,Ot){return new QueryCompositeFilterConstraint(s,Ot)}_parse(s){const Ot=this._queryConstraints.map(en=>en._parse(s)).filter(en=>en.getFilters().length>0);return Ot.length===1?Ot[0]:CompositeFilter.create(Ot,this._getOperator())}_apply(s){const Ot=this._parse(s);return Ot.getFilters().length===0?s:(function(tn,nn){let rn=tn;const on=nn.getFlattenedFilters();for(const sn of on)__PRIVATE_validateNewFieldFilter(rn,sn),rn=__PRIVATE_queryWithAddedFilter(rn,sn)}(s._query,Ot),new Query(s.firestore,s.converter,__PRIVATE_queryWithAddedFilter(s._query,Ot)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class QueryLimitConstraint extends QueryConstraint{constructor(s,Ot,en){super(),this.type=s,this._limit=Ot,this._limitType=en}static _create(s,Ot,en){return new QueryLimitConstraint(s,Ot,en)}_apply(s){return new Query(s.firestore,s.converter,__PRIVATE_queryWithLimit(s._query,this._limit,this._limitType))}}function limit(Nt){return __PRIVATE_validatePositiveNumber("limit",Nt),QueryLimitConstraint._create("limit",Nt,"F")}function __PRIVATE_parseDocumentIdValue(Nt,s,Ot){if(typeof(Ot=getModularInstance$1(Ot))=="string"){if(Ot==="")throw new FirestoreError(D$2.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!__PRIVATE_isCollectionGroupQuery(s)&&Ot.indexOf("/")!==-1)throw new FirestoreError(D$2.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${Ot}' contains a '/' character.`);const en=s.path.child(ResourcePath.fromString(Ot));if(!DocumentKey.isDocumentKey(en))throw new FirestoreError(D$2.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${en}' is not because it has an odd number of segments (${en.length}).`);return __PRIVATE_refValue(Nt,new DocumentKey(en))}if(Ot instanceof DocumentReference)return __PRIVATE_refValue(Nt,Ot._key);throw new FirestoreError(D$2.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${__PRIVATE_valueDescription(Ot)}.`)}function __PRIVATE_validateDisjunctiveFilterElements(Nt,s){if(!Array.isArray(Nt)||Nt.length===0)throw new FirestoreError(D$2.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${s.toString()}' filters.`)}function __PRIVATE_validateNewFieldFilter(Nt,s){const Ot=function(tn,nn){for(const rn of tn)for(const on of rn.getFlattenedFilters())if(nn.indexOf(on.op)>=0)return on.op;return null}(Nt.filters,function(tn){switch(tn){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(s.op));if(Ot!==null)throw Ot===s.op?new FirestoreError(D$2.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${s.op.toString()}' filter.`):new FirestoreError(D$2.INVALID_ARGUMENT,`Invalid query. You cannot use '${s.op.toString()}' filters with '${Ot.toString()}' filters.`)}class AbstractUserDataWriter{convertValue(s,Ot="none"){switch(__PRIVATE_typeOrder(s)){case 0:return null;case 1:return s.booleanValue;case 2:return __PRIVATE_normalizeNumber(s.integerValue||s.doubleValue);case 3:return this.convertTimestamp(s.timestampValue);case 4:return this.convertServerTimestamp(s,Ot);case 5:return s.stringValue;case 6:return this.convertBytes(__PRIVATE_normalizeByteString(s.bytesValue));case 7:return this.convertReference(s.referenceValue);case 8:return this.convertGeoPoint(s.geoPointValue);case 9:return this.convertArray(s.arrayValue,Ot);case 10:return this.convertObject(s.mapValue,Ot);default:throw fail()}}convertObject(s,Ot){return this.convertObjectMap(s.fields,Ot)}convertObjectMap(s,Ot="none"){const en={};return forEach(s,(tn,nn)=>{en[tn]=this.convertValue(nn,Ot)}),en}convertGeoPoint(s){return new GeoPoint(__PRIVATE_normalizeNumber(s.latitude),__PRIVATE_normalizeNumber(s.longitude))}convertArray(s,Ot){return(s.values||[]).map(en=>this.convertValue(en,Ot))}convertServerTimestamp(s,Ot){switch(Ot){case"previous":const en=__PRIVATE_getPreviousValue(s);return en==null?null:this.convertValue(en,Ot);case"estimate":return this.convertTimestamp(__PRIVATE_getLocalWriteTime(s));default:return null}}convertTimestamp(s){const Ot=__PRIVATE_normalizeTimestamp(s);return new Timestamp(Ot.seconds,Ot.nanos)}convertDocumentKey(s,Ot){const en=ResourcePath.fromString(s);__PRIVATE_hardAssert(__PRIVATE_isValidResourceName(en));const tn=new DatabaseId(en.get(1),en.get(3)),nn=new DocumentKey(en.popFirst(5));return tn.isEqual(Ot)||__PRIVATE_logError(`Document ${nn} contains a document reference within a different database (${tn.projectId}/${tn.database}) which is not supported. It will be treated as a reference in the current database (${Ot.projectId}/${Ot.database}) instead.`),nn}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_applyFirestoreDataConverter(Nt,s,Ot){let en;return en=Nt?Ot&&(Ot.merge||Ot.mergeFields)?Nt.toFirestore(s,Ot):Nt.toFirestore(s):s,en}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SnapshotMetadata{constructor(s,Ot){this.hasPendingWrites=s,this.fromCache=Ot}isEqual(s){return this.hasPendingWrites===s.hasPendingWrites&&this.fromCache===s.fromCache}}class DocumentSnapshot extends DocumentSnapshot$1{constructor(s,Ot,en,tn,nn,rn){super(s,Ot,en,tn,rn),this._firestore=s,this._firestoreImpl=s,this.metadata=nn}exists(){return super.exists()}data(s={}){if(this._document){if(this._converter){const Ot=new QueryDocumentSnapshot(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(Ot,s)}return this._userDataWriter.convertValue(this._document.data.value,s.serverTimestamps)}}get(s,Ot={}){if(this._document){const en=this._document.data.field(__PRIVATE_fieldPathFromArgument("DocumentSnapshot.get",s));if(en!==null)return this._userDataWriter.convertValue(en,Ot.serverTimestamps)}}}class QueryDocumentSnapshot extends DocumentSnapshot{data(s={}){return super.data(s)}}class QuerySnapshot{constructor(s,Ot,en,tn){this._firestore=s,this._userDataWriter=Ot,this._snapshot=tn,this.metadata=new SnapshotMetadata(tn.hasPendingWrites,tn.fromCache),this.query=en}get docs(){const s=[];return this.forEach(Ot=>s.push(Ot)),s}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(s,Ot){this._snapshot.docs.forEach(en=>{s.call(Ot,new QueryDocumentSnapshot(this._firestore,this._userDataWriter,en.key,en,new SnapshotMetadata(this._snapshot.mutatedKeys.has(en.key),this._snapshot.fromCache),this.query.converter))})}docChanges(s={}){const Ot=!!s.includeMetadataChanges;if(Ot&&this._snapshot.excludesMetadataChanges)throw new FirestoreError(D$2.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===Ot||(this._cachedChanges=function(tn,nn){if(tn._snapshot.oldDocs.isEmpty()){let rn=0;return tn._snapshot.docChanges.map(on=>{const sn=new QueryDocumentSnapshot(tn._firestore,tn._userDataWriter,on.doc.key,on.doc,new SnapshotMetadata(tn._snapshot.mutatedKeys.has(on.doc.key),tn._snapshot.fromCache),tn.query.converter);return on.doc,{type:"added",doc:sn,oldIndex:-1,newIndex:rn++}})}{let rn=tn._snapshot.oldDocs;return tn._snapshot.docChanges.filter(on=>nn||on.type!==3).map(on=>{const sn=new QueryDocumentSnapshot(tn._firestore,tn._userDataWriter,on.doc.key,on.doc,new SnapshotMetadata(tn._snapshot.mutatedKeys.has(on.doc.key),tn._snapshot.fromCache),tn.query.converter);let an=-1,ln=-1;return on.type!==0&&(an=rn.indexOf(on.doc.key),rn=rn.delete(on.doc.key)),on.type!==1&&(rn=rn.add(on.doc),ln=rn.indexOf(on.doc.key)),{type:__PRIVATE_resultChangeType(on.type),doc:sn,oldIndex:an,newIndex:ln}})}}(this,Ot),this._cachedChangesIncludeMetadataChanges=Ot),this._cachedChanges}}function __PRIVATE_resultChangeType(Nt){switch(Nt){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return fail()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getDoc(Nt){Nt=__PRIVATE_cast(Nt,DocumentReference);const s=__PRIVATE_cast(Nt.firestore,Firestore);return __PRIVATE_firestoreClientGetDocumentViaSnapshotListener(ensureFirestoreConfigured(s),Nt._key).then(Ot=>__PRIVATE_convertToDocSnapshot(s,Nt,Ot))}class __PRIVATE_ExpUserDataWriter extends AbstractUserDataWriter{constructor(s){super(),this.firestore=s}convertBytes(s){return new Bytes(s)}convertReference(s){const Ot=this.convertDocumentKey(s,this.firestore._databaseId);return new DocumentReference(this.firestore,null,Ot)}}function setDoc(Nt,s,Ot){Nt=__PRIVATE_cast(Nt,DocumentReference);const en=__PRIVATE_cast(Nt.firestore,Firestore),tn=__PRIVATE_applyFirestoreDataConverter(Nt.converter,s,Ot);return executeWrite(en,[__PRIVATE_parseSetData(__PRIVATE_newUserDataReader(en),"setDoc",Nt._key,tn,Nt.converter!==null,Ot).toMutation(Nt._key,Precondition.none())])}function deleteDoc(Nt){return executeWrite(__PRIVATE_cast(Nt.firestore,Firestore),[new __PRIVATE_DeleteMutation(Nt._key,Precondition.none())])}function onSnapshot(Nt,...s){var Ot,en,tn;Nt=getModularInstance$1(Nt);let nn={includeMetadataChanges:!1,source:"default"},rn=0;typeof s[rn]!="object"||__PRIVATE_isPartialObserver(s[rn])||(nn=s[rn],rn++);const on={includeMetadataChanges:nn.includeMetadataChanges,source:nn.source};if(__PRIVATE_isPartialObserver(s[rn])){const cn=s[rn];s[rn]=(Ot=cn.next)===null||Ot===void 0?void 0:Ot.bind(cn),s[rn+1]=(en=cn.error)===null||en===void 0?void 0:en.bind(cn),s[rn+2]=(tn=cn.complete)===null||tn===void 0?void 0:tn.bind(cn)}let sn,an,ln;if(Nt instanceof DocumentReference)an=__PRIVATE_cast(Nt.firestore,Firestore),ln=__PRIVATE_newQueryForPath(Nt._key.path),sn={next:cn=>{s[rn]&&s[rn](__PRIVATE_convertToDocSnapshot(an,Nt,cn))},error:s[rn+1],complete:s[rn+2]};else{const cn=__PRIVATE_cast(Nt,Query);an=__PRIVATE_cast(cn.firestore,Firestore),ln=cn._query;const un=new __PRIVATE_ExpUserDataWriter(an);sn={next:dn=>{s[rn]&&s[rn](new QuerySnapshot(an,un,cn,dn))},error:s[rn+1],complete:s[rn+2]},__PRIVATE_validateHasExplicitOrderByForLimitToLast(Nt._query)}return function(un,dn,hn,fn){const mn=new __PRIVATE_AsyncObserver(fn),gn=new __PRIVATE_QueryListener(dn,mn,hn);return un.asyncQueue.enqueueAndForget(async()=>__PRIVATE_eventManagerListen(await __PRIVATE_getEventManager(un),gn)),()=>{mn.Qa(),un.asyncQueue.enqueueAndForget(async()=>__PRIVATE_eventManagerUnlisten(await __PRIVATE_getEventManager(un),gn))}}(ensureFirestoreConfigured(an),ln,on,sn)}function executeWrite(Nt,s){return function(en,tn){const nn=new __PRIVATE_Deferred;return en.asyncQueue.enqueueAndForget(async()=>__PRIVATE_syncEngineWrite(await __PRIVATE_getSyncEngine(en),tn,nn)),nn.promise}(ensureFirestoreConfigured(Nt),s)}function __PRIVATE_convertToDocSnapshot(Nt,s,Ot){const en=Ot.docs.get(s._key),tn=new __PRIVATE_ExpUserDataWriter(Nt);return new DocumentSnapshot(Nt,tn,s._key,en,new SnapshotMetadata(Ot.hasPendingWrites,Ot.fromCache),s.converter)}(function(s,Ot=!0){(function(tn){S$1=tn})(SDK_VERSION$1),_registerComponent(new Component$1("firestore",(en,{instanceIdentifier:tn,options:nn})=>{const rn=en.getProvider("app").getImmediate(),on=new Firestore(new __PRIVATE_FirebaseAuthCredentialsProvider(en.getProvider("auth-internal")),new __PRIVATE_FirebaseAppCheckTokenProvider(en.getProvider("app-check-internal")),function(an,ln){if(!Object.prototype.hasOwnProperty.apply(an.options,["projectId"]))throw new FirestoreError(D$2.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new DatabaseId(an.options.projectId,ln)}(rn,tn),rn);return nn=Object.assign({useFetchStreams:Ot},nn),on._setSettings(nn),on},"PUBLIC").setMultipleInstances(!0)),registerVersion(w$1,"4.5.0",s),registerVersion(w$1,"4.5.0","esm2017")})();const fi$1=initializeApp({apiKey:"AIzaSyCZTYT3FJcQ3HPKX-B9xybXG0I9I_WvBIk",authDomain:"videophics-dev.firebaseapp.com",databaseURL:"https://videophics-dev-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"videophics-dev",storageBucket:"videophics-dev.appspot.com",messagingSenderId:"376164907747",appId:"1:376164907747:web:e2dc69da53e36f5b9fe3d6"}),Blogs$1=collection(getFirestore(fi$1),"Blogs");function Blog$1(){const[Nt,s]=React$1.useState([]);return React$1.useEffect(()=>onSnapshot(query(Blogs$1,limit(10)),en=>{const tn=en.docs.map(nn=>({...nn.data(),id:nn.id}));s(tn)}),[]),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs(HelmetExport,{children:[jsxRuntimeExports.jsx("title",{children:"Blog - Videophics"}),jsxRuntimeExports.jsx("meta",{name:"description",content:"Read our latest trending blogs on branding, marketing, and business growth."})]}),jsxRuntimeExports.jsxs("div",{className:"container mx-auto py-10 dark:text-white max-w-[1300px]",children:[jsxRuntimeExports.jsx("h1",{className:"text-4xl font-bold text-center text-slate-900 dark:text-slate-50",children:"Blog"}),jsxRuntimeExports.jsx("div",{className:"pt-8 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-5",children:Nt.map(Ot=>jsxRuntimeExports.jsx(Animated,{varient:"fade-in",children:jsxRuntimeExports.jsx(Link,{to:"/blog/"+Ot.id,className:"hover:opacity-70 transition duration-300 ease-in-out active:scale-100",children:jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("img",{src:Ot.thumbnail,alt:Ot.title,className:"w-full h-60 object-cover mt-5 bg-slate-300 dark:bg-slate-700 rounded-md"}),jsxRuntimeExports.jsx("h1",{className:"text-2xl font-[500] text-slate-900 dark:text-slate-50 mt-5 mb-2",children:Ot.title}),jsxRuntimeExports.jsxs("p",{className:"text-gray-500 dark:text-gray-400",children:[Ot.author," | ",Ot.publishedAt.toDate().toDateString()]})]},Ot.id)})},Ot.id))})]})]})}function _classCallCheck(Nt,s){if(!(Nt instanceof s))throw new TypeError("Cannot call a class as a function")}function _defineProperties(Nt,s){for(var Ot=0;Ot<s.length;Ot++){var en=s[Ot];en.enumerable=en.enumerable||!1,en.configurable=!0,"value"in en&&(en.writable=!0),Object.defineProperty(Nt,en.key,en)}}function _createClass(Nt,s,Ot){return s&&_defineProperties(Nt.prototype,s),Ot&&_defineProperties(Nt,Ot),Nt}function _defineProperty(Nt,s,Ot){return s in Nt?Object.defineProperty(Nt,s,{value:Ot,enumerable:!0,configurable:!0,writable:!0}):Nt[s]=Ot,Nt}function _typeof(Nt){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof=function(Ot){return typeof Ot}:_typeof=function(Ot){return Ot&&typeof Symbol=="function"&&Ot.constructor===Symbol&&Ot!==Symbol.prototype?"symbol":typeof Ot},_typeof(Nt)}var isObject$1=function(s){return s&&_typeof(s)==="object"&&!Array.isArray(s)},mergeDeep$1=function Nt(s,Ot){var en=Object.assign({},s);return isObject$1(s)&&isObject$1(Ot)&&Object.keys(Ot).forEach(function(tn){isObject$1(Ot[tn])?tn in s?en[tn]=Nt(s[tn],Ot[tn]):Object.assign(en,_defineProperty({},tn,Ot[tn])):Object.assign(en,_defineProperty({},tn,Ot[tn]))}),en},sanitizeHtml=function(s){return s=s.replace(/&/g,"&amp;"),s=s.replace(/</g,"&lt;"),s=s.replace(/>/g,"&gt;"),s},embedMarkups={youtube:'<div class="embed"><iframe class="embed-youtube" frameborder="0" src="<%data.embed%>" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen <%data.length%>></iframe></div>',twitter:'<blockquote class="twitter-tweet" class="embed-twitter" <%data.length%>><a href="<%data.source%>"></a></blockquote> <script async src="//platform.twitter.com/widgets.js" charset="utf-8"><\/script>',instagram:'<blockquote class="instagram-media" <%data.length%>><a href="<%data.embed%>/captioned"></a></blockquote><script async defer src="//www.instagram.com/embed.js"><\/script>',codepen:'<div class="embed"><iframe <%data.length%> scrolling="no" src="<%data.embed%>" frameborder="no" loading="lazy" allowtransparency="true" allowfullscreen="true"></iframe></div>',defaultMarkup:'<div class="embed"><iframe src="<%data.embed%>" <%data.length%> class="embed-unknown" allowfullscreen="true" frameborder="0" ></iframe></div>'},defaultParsers={paragraph:function(s,Ot){return'<p class="'.concat(Ot.paragraph.pClass,'"> ').concat(s.text," </p>")},header:function(s){return"<h".concat(s.level,">").concat(s.text,"</h").concat(s.level,">")},list:function(s){var Ot=s.style==="ordered"?"ol":"ul",en=s.items.reduce(function(tn,nn){return tn+"<li>".concat(nn,"</li>")},"");return"<".concat(Ot,">").concat(en,"</").concat(Ot,">")},quote:function(s,Ot){var en="";return Ot.quote.applyAlignment&&(en='style="text-align: '.concat(s.alignment,';"')),"<blockquote ".concat(en,"><p>").concat(s.text,"</p><cite>").concat(s.caption,"</cite></blockquote>")},table:function(s){var Ot=s.content.map(function(en){return"<tr>".concat(en.reduce(function(tn,nn){return tn+"<td>".concat(nn,"</td>")},""),"</tr>")});return"<table><tbody>".concat(Ot.join(""),"</tbody></table>")},image:function(s,Ot){var en="".concat(s.stretched?"img-fullwidth":""," ").concat(s.withBorder?"img-border":""," ").concat(s.withBackground?"img-bg":""),tn=Ot.image.imgClass||"",nn;if(s.url?nn=s.url:Ot.image.path==="absolute"?nn=s.file.url:nn=Ot.image.path.replace(/<(.+)>/,function(sn,an){return s.file[an]}),Ot.image.use==="img")return'<img class="'.concat(en," ").concat(tn,'" src="').concat(nn,'" alt="').concat(s.caption,'">');if(Ot.image.use==="figure"){var rn=Ot.image.figureClass||"",on=Ot.image.figCapClass||"";return'<figure class="'.concat(rn,'"><img class="').concat(tn," ").concat(en,'" src="').concat(nn,'" alt="').concat(s.caption,'"><figcaption class="').concat(on,'">').concat(s.caption,"</figcaption></figure>")}},code:function(s,Ot){var en=sanitizeHtml(s.code);return'<pre><code class="'.concat(Ot.code.codeBlockClass,'">').concat(en,"</code></pre>")},raw:function(s){return s.html},delimiter:function(s){return"<br />"},embed:function(s,Ot){Ot.embed.useProvidedLength?s.length='width="'.concat(s.width,'" height="').concat(s.height,'"'):s.length="";var en=new RegExp(/<%data\.(.+?)%>/,"gm");return Ot.embedMarkups[s.service]?Ot.embedMarkups[s.service].replace(en,function(tn,nn){return s[nn]}):Ot.embedMarkups.defaultMarkup.replace(en,function(tn,nn){return s[nn]})}},defaultConfig={image:{use:"figure",imgClass:"img",figureClass:"fig-img",figCapClass:"fig-cap",path:"absolute"},paragraph:{pClass:"paragraph"},code:{codeBlockClass:"code-block"},embed:{useProvidedLength:!1},quote:{applyAlignment:!1}},edjsParser=function(){function Nt(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Ot=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},en=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};_classCallCheck(this,Nt),this.config=mergeDeep$1(defaultConfig,s),this.config.embedMarkups=Object.assign(embedMarkups,en),this.parsers=Object.assign(defaultParsers,Ot)}return _createClass(Nt,[{key:"parse",value:function(Ot){var en=this,tn=Ot.blocks.map(function(nn){var rn=en.parseBlock(nn);return rn instanceof Error?"":rn});return tn.join("")}},{key:"parseBlock",value:function(Ot){if(!this.parsers[Ot.type])return new Error("".concat(Ot.type," is not supported! Define your own custom function."));try{return this.parsers[Ot.type](Ot.data,this.config)}catch(en){return en}}}]),Nt}();function TableOfContents(){const[Nt,s]=reactExports.useState([]);return reactExports.useEffect(()=>{const en=Array.from(document.querySelector("._blog-body").querySelectorAll("h1, h2, h3, h4, h5, h6")).map(tn=>{const nn=tn.textContent,rn=nn.toLowerCase().replace(/ /g,"-");tn.id=rn;const on=parseInt(tn.tagName.replace("H",""),10);return{slug:rn,text:nn,level:on}});s(en)},[]),jsxRuntimeExports.jsx("div",{className:"text-[17px] leading-7 font-[400] text-slate-900 dark:text-white",children:jsxRuntimeExports.jsx("ul",{id:"table-of-contents",className:"border-l border-[rgba(0,0,0,0.1)] dark:border-[rgba(255,255,255,0.2)] pl-1",children:Nt.map(({slug:Ot,text:en,level:tn})=>jsxRuntimeExports.jsx("li",{style:{paddingLeft:`${(tn-1)*10}px`},className:"hover:text-slate-500 dark:hover:text-slate-400",children:jsxRuntimeExports.jsxs("a",{href:`#${Ot}`,children:[jsxRuntimeExports.jsx("span",{className:"text-slate-400",children:"#"})," ",en]})},Ot))})})}function BlogView(){const[Nt,s]=React$1.useState(null),Ot=useParams().id,en=tn=>{try{return JSON.parse(tn)}catch{try{return typeof tn=="object"&&tn}catch{return!1}}return!1};return React$1.useEffect(()=>{(async()=>{const rn=doc(getFirestore(fi$1),"Blogs",Ot),on=await getDoc(rn);on.exists()?s({...on.data(),id:on.id}):s({})})();const nn=()=>{window.scrollY>1?document.querySelector("._navbar").classList.remove("sticky"):document.querySelector("._navbar").classList.add("sticky")};return window.addEventListener("scroll",nn),()=>{window.removeEventListener("scroll",nn)}},[Ot]),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs(HelmetExport,{children:[jsxRuntimeExports.jsx("title",{children:Nt&&Nt.title?Nt.title:"Blog - Videophics"}),jsxRuntimeExports.jsx("script",{type:"module",src:"https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"}),jsxRuntimeExports.jsx("script",{noModule:!0,src:"https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"})]}),Nt==null?jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center h-[90vh]",children:jsxRuntimeExports.jsxs("div",{role:"status",children:[jsxRuntimeExports.jsxs("svg",{"aria-hidden":"true",class:"w-8 h-8 text-gray-200 animate-spin dark:text-gray-600 fill-blue-600",viewBox:"0 0 100 101",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[jsxRuntimeExports.jsx("path",{d:"M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z",fill:"currentColor"}),jsxRuntimeExports.jsx("path",{d:"M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z",fill:"currentFill"})]}),jsxRuntimeExports.jsx("span",{class:"sr-only",children:"Loading..."})]})}):Nt.title?jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"container mx-auto max-w-[1300px] border-b-[rgba(0,0,0,0.1)] dark:border-b-[rgba(255,255,255,0.2)] border-b-[1px] md:flex gap-4 py-10 lg:py-20 items-center",children:[jsxRuntimeExports.jsxs("div",{className:"py-12 text-left",children:[jsxRuntimeExports.jsx("h1",{className:"text-4xl font-bold text-slate-900 dark:text-slate-50",children:Nt.title}),jsxRuntimeExports.jsxs("p",{className:"text-gray-500 dark:text-gray-400 mt-4",children:[Nt.author," |"," ",Nt.publishedAt.toDate().toDateString()]}),jsxRuntimeExports.jsx("p",{className:"w-fit bg-violet-900 text-white text-sm py-2 px-5 rounded-full mt-4",children:Nt.category})]}),jsxRuntimeExports.jsx("div",{className:"md:min-w-[50%] ml-auto",children:jsxRuntimeExports.jsx("img",{src:Nt.thumbnail,alt:Nt.title,className:"w-full object-cover rounded-md min-h-80 bg-slate-300 dark:bg-slate-700"})})]}),jsxRuntimeExports.jsx("div",{className:"container max-w-[1300px] mx-auto dark:text-white py-20 pb-30",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-grow flex-col lg:flex-row gap-14",children:[jsxRuntimeExports.jsxs("div",{className:"text-gray-700 lg:h-full lg:sticky top-[7rem] dark:text-gray-400 flex lg:flex-col gap-4 pt-3",children:[jsxRuntimeExports.jsx("a",{target:"_blank",href:`https://www.facebook.com/sharer/sharer.php?u=${window.location.href}&title=${Nt.title}`,children:jsxRuntimeExports.jsx("ion-icon",{name:"logo-facebook",style:{fontSize:"17px"}})}),jsxRuntimeExports.jsx("a",{target:"_blank",href:`https://twitter.com/share?url=${window.location.href}&title=${Nt.title}&summary=`,children:jsxRuntimeExports.jsx("ion-icon",{name:"logo-twitter",style:{fontSize:"17px"}})}),jsxRuntimeExports.jsx("a",{target:"_blank",href:`https://www.linkedin.com/shareArticle?mini=true&url=${window.location.href}&title=${Nt.title}&summary=`,children:jsxRuntimeExports.jsx("ion-icon",{name:"logo-linkedin",style:{fontSize:"17px"}})})]}),jsxRuntimeExports.jsxs("div",{className:"min-w-[300px] lg:h-full lg:sticky top-[7rem] lg:order-2 lg:ml-auto",children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-slate-50",id:"table-of-contents",children:"Table of Contents"}),jsxRuntimeExports.jsx("div",{className:"text-xl font-[500] text-violet-900 dark:text-slate-50 mt-5",children:jsxRuntimeExports.jsx(TableOfContents,{})})]}),jsxRuntimeExports.jsx("div",{className:"_blog-body text-lg text-slate-900 dark:text-white",dangerouslySetInnerHTML:{__html:en(Nt.body)?new edjsParser({youtube:'<iframe src="<%data.embed%>" width="<%data.width%>"><%data.caption%></iframe>',list:"<ul><%data.items.map(item => { return '<li>' + item + '</li>' }).join('')}</ul>"}).parse(en(Nt.body)):""}})]})})]},Ot):jsxRuntimeExports.jsx(NotFound,{})]})}function ContactUs(){return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(HelmetExport,{children:jsxRuntimeExports.jsx("title",{children:"Contact Us - Videophics"})}),jsxRuntimeExports.jsxs("div",{className:"container mx-auto max-w-[1300px] pb-12",children:[jsxRuntimeExports.jsx(Animated,{varient:"fade-up",speed:"fast",children:jsxRuntimeExports.jsx("section",{id:"booking",className:"_booking-section py-12 md:py-[6rem] bg-violet-500 dark:bg-slate-950 flex flex-col justify-center items-center rounded-lg my-12",children:jsxRuntimeExports.jsx(Booking,{})})}),jsxRuntimeExports.jsx("div",{className:"grid md:grid-cols-2 gap-10 py-20",children:jsxRuntimeExports.jsx(Contact,{})})]})]})}function Privacy(){return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsxs("div",{className:"container mx-auto max-w-[1300px] py-20",children:[jsxRuntimeExports.jsx("h1",{className:"text-4xl font-bold text-slate-800 dark:text-white",children:"Privacy Policy"}),jsxRuntimeExports.jsxs("div",{className:"mt-10 text-slate-800 dark:text-white",children:[jsxRuntimeExports.jsxs("p",{children:["Your privacy is important to us. It is Videophics' policy to respect your privacy regarding any information we may collect from you across our website,"," ",jsxRuntimeExports.jsx("a",{href:"https://videophics.com",className:"text-blue-500 hover:underline",children:"https://videophics.com"}),", and other sites we own and operate."]}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{children:"We only ask for personal information when we truly need it to provide a service to you. We collect it by fair and lawful means, with your knowledge and consent. We also let you know why were collecting it and how it will be used."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{children:"We only retain collected information for as long as necessary to provide you with your requested service. What data we store, well protect within commercially acceptable means to prevent loss and theft, as well as unauthorized access, disclosure, copying, use or modification."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{children:"We dont share any personally identifying information publicly or with third-parties, except when required to by law."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{children:"Our website may link to external sites that are not operated by us. Please be aware that we have no control over the content and practices of these sites, and cannot accept responsibility or liability for their respective privacy policies."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{children:"You are free to refuse our request for your personal information, with the understanding that we may be unable to provide you with some of your desired services."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{children:"Your continued use of our website will be regarded as acceptance of our practices around privacy and personal information. If you have any questions about how we handle user data and personal information, feel free to contact us."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{children:"This policy is effective as of 4 April 2024."})]})]})})}function Cookie(){return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsxs("div",{className:"container mx-auto max-w-[1300px] py-20",children:[jsxRuntimeExports.jsx("h1",{className:"text-4xl font-bold text-slate-800 dark:text-white",children:"Cookies Policy"}),jsxRuntimeExports.jsx("div",{className:"mt-10 text-slate-800 dark:text-white",children:jsxRuntimeExports.jsxs("ul",{className:"list-decimal",children:[jsxRuntimeExports.jsx("li",{className:"text-2xl font-bold ml-7 mb-7 mt-12",children:"What is a cookie?"}),jsxRuntimeExports.jsx("p",{children:`Cookies are small data files that many Internet sites automatically download to the hard drive of a user's computer, phone or tablet (hereinafter "Computer"). They are mainly used to help websites recognize a user who has visited the Website before, for example to simplify login for registered users. They may store information about website settings, accounts and passwords. Most Web browsers automatically accept cookies. A cookie cannot launch programs or spread viruses.`}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{children:'The website of Videophics (hereinafter "Website") uses cookies and similar technologies to distinguish your user preferences from other visitors to the Website in order to offer you a better service when you return to the Website. They also allow us to optimize the Website. Any Personal Data we collect through the use of cookies will be treated confidentially.'}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{children:"On the other hand, cookies and similar technologies do not allow us to systematically collect personal data that can identify the users of the Website. cookies help us improve the functionalities of the Website, better serve the interests of our users and measure the effectiveness of the content of the Website."}),jsxRuntimeExports.jsx("li",{className:"text-2xl font-bold ml-7 mb-7 mt-12",children:"Permission"}),jsxRuntimeExports.jsx("p",{children:"Generally if you use the Website, you agree to the use of cookies. If you do not want cookies to be stored on your computer, you can disable the use of cookies in your browser settings."}),jsxRuntimeExports.jsx("li",{className:"text-2xl font-bold ml-7 mb-7 mt-12",children:"What information do we collect?"}),jsxRuntimeExports.jsx("p",{children:"We collect the following information:"}),jsxRuntimeExports.jsxs("ul",{className:"list-disc ml-7",children:[jsxRuntimeExports.jsx("li",{children:"Dark/Light Theme"}),jsxRuntimeExports.jsx("li",{children:"Language Preference"}),jsxRuntimeExports.jsx("li",{children:"Contact Information"})]}),jsxRuntimeExports.jsx("li",{className:"text-2xl font-bold ml-7 mb-7 mt-12",children:"Privacy of Children's Information"}),jsxRuntimeExports.jsx("p",{children:"We do not knowingly collect any personal information from children under the age of 13. If you are under the age of 13, please do not submit any personal information through our Website or Service. We encourage parents and legal guardians to monitor their children's Internet usage and to help enforce this Policy by instructing their children never to provide personal information through our Website or Service without their permission. If you have reason to believe that a child under the age of 13 has provided personal information to us through our Website or Service, please contact us."})]})})]})})}function Terms(){return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsxs("div",{className:"container mx-auto max-w-[1300px] py-20",children:[jsxRuntimeExports.jsx("h1",{className:"text-4xl font-bold text-slate-800 dark:text-white",children:"Terms & Conditions"}),jsxRuntimeExports.jsxs("div",{className:"mt-10 text-slate-800 dark:text-white",children:[jsxRuntimeExports.jsx("p",{children:"These terms and conditions outline the rules and regulations for the use of Videophics' Website, located at videophics.com."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{children:"By accessing this website we assume you accept these terms and conditions. Do not continue to use Videophics if you do not agree to take all of the terms and conditions stated on this page."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{children:'The following terminology applies to these Terms and Conditions, Privacy Statement and Disclaimer Notice and all Agreements: "Client", "You" and "Your" refers to you, the person log on this website and compliant to the Companys terms and conditions. "The Company", "Ourselves", "We", "Our" and "Us", refers to our Company. "Party", "Parties", or "Us", refers to both the Client and ourselves.'}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold mb-6 mt-10",children:"1. Cookies"}),jsxRuntimeExports.jsx("p",{children:"We employ the use of cookies. By accessing Videophics, you agreed to use cookies in agreement with the Videophics' Privacy Policy."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("p",{children:"Most interactive websites use cookies to let us retrieve the users details for each visit. Cookies are used by our website to enable the functionality of certain areas to make it easier for people visiting our website. Some of our affiliate/advertising partners may also use cookies."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold mb-6 mt-10",children:"2. Copyright"}),jsxRuntimeExports.jsx("p",{children:"All intellectual property rights are reserved. You may access this from Videophics for your own personal use subjected to restrictions set in these terms and conditions."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold mb-6 mt-10",children:"3. Changes"}),jsxRuntimeExports.jsx("p",{children:"We reserve the right to modify these terms from time to time at our sole discretion. Therefore, you should review these pages periodically. When we change the Terms in a material manner, we will update the 'last updated' date at the bottom of this page."})]})]})})}function __rest(Nt,s){var Ot={};for(var en in Nt)Object.prototype.hasOwnProperty.call(Nt,en)&&s.indexOf(en)<0&&(Ot[en]=Nt[en]);if(Nt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var tn=0,en=Object.getOwnPropertySymbols(Nt);tn<en.length;tn++)s.indexOf(en[tn])<0&&Object.prototype.propertyIsEnumerable.call(Nt,en[tn])&&(Ot[en[tn]]=Nt[en[tn]]);return Ot}typeof SuppressedError=="function"&&SuppressedError;function _prodErrorMap(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const prodErrorMap=_prodErrorMap,_DEFAULT_AUTH_ERROR_FACTORY=new ErrorFactory$1("auth","Firebase",_prodErrorMap());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const logClient$1=new Logger("@firebase/auth");function _logWarn(Nt,...s){logClient$1.logLevel<=LogLevel.WARN&&logClient$1.warn(`Auth (${SDK_VERSION$1}): ${Nt}`,...s)}function _logError(Nt,...s){logClient$1.logLevel<=LogLevel.ERROR&&logClient$1.error(`Auth (${SDK_VERSION$1}): ${Nt}`,...s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _fail(Nt,...s){throw createErrorInternal(Nt,...s)}function _createError(Nt,...s){return createErrorInternal(Nt,...s)}function _errorWithCustomMessage(Nt,s,Ot){const en=Object.assign(Object.assign({},prodErrorMap()),{[s]:Ot});return new ErrorFactory$1("auth","Firebase",en).create(s,{appName:Nt.name})}function _assertInstanceOf(Nt,s,Ot){const en=Ot;if(!(s instanceof en))throw en.name!==s.constructor.name&&_fail(Nt,"argument-error"),_errorWithCustomMessage(Nt,"argument-error",`Type of ${s.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function createErrorInternal(Nt,...s){if(typeof Nt!="string"){const Ot=s[0],en=[...s.slice(1)];return en[0]&&(en[0].appName=Nt.name),Nt._errorFactory.create(Ot,...en)}return _DEFAULT_AUTH_ERROR_FACTORY.create(Nt,...s)}function _assert(Nt,s,...Ot){if(!Nt)throw createErrorInternal(s,...Ot)}function debugFail(Nt){const s="INTERNAL ASSERTION FAILED: "+Nt;throw _logError(s),new Error(s)}function debugAssert(Nt,s){Nt||debugFail(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _getCurrentUrl(){var Nt;return typeof self<"u"&&((Nt=self.location)===null||Nt===void 0?void 0:Nt.href)||""}function _isHttpOrHttps(){return _getCurrentScheme()==="http:"||_getCurrentScheme()==="https:"}function _getCurrentScheme(){var Nt;return typeof self<"u"&&((Nt=self.location)===null||Nt===void 0?void 0:Nt.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _isOnline(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(_isHttpOrHttps()||isBrowserExtension()||"connection"in navigator)?navigator.onLine:!0}function _getUserLanguage(){if(typeof navigator>"u")return null;const Nt=navigator;return Nt.languages&&Nt.languages[0]||Nt.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Delay{constructor(s,Ot){this.shortDelay=s,this.longDelay=Ot,debugAssert(Ot>s,"Short delay should be less than long delay!"),this.isMobile=isMobileCordova()||isReactNative()}get(){return _isOnline()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _emulatorUrl(Nt,s){debugAssert(Nt.emulator,"Emulator should always be set here");const{url:Ot}=Nt.emulator;return s?`${Ot}${s.startsWith("/")?s.slice(1):s}`:Ot}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FetchProvider{static initialize(s,Ot,en){this.fetchImpl=s,Ot&&(this.headersImpl=Ot),en&&(this.responseImpl=en)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;debugFail("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;debugFail("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;debugFail("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SERVER_ERROR_MAP={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DEFAULT_API_TIMEOUT_MS=new Delay(3e4,6e4);function _addTidIfNecessary(Nt,s){return Nt.tenantId&&!s.tenantId?Object.assign(Object.assign({},s),{tenantId:Nt.tenantId}):s}async function _performApiRequest(Nt,s,Ot,en,tn={}){return _performFetchWithErrorHandling(Nt,tn,async()=>{let nn={},rn={};en&&(s==="GET"?rn=en:nn={body:JSON.stringify(en)});const on=querystring(Object.assign({key:Nt.config.apiKey},rn)).slice(1),sn=await Nt._getAdditionalHeaders();return sn["Content-Type"]="application/json",Nt.languageCode&&(sn["X-Firebase-Locale"]=Nt.languageCode),FetchProvider.fetch()(_getFinalTarget(Nt,Nt.config.apiHost,Ot,on),Object.assign({method:s,headers:sn,referrerPolicy:"no-referrer"},nn))})}async function _performFetchWithErrorHandling(Nt,s,Ot){Nt._canInitEmulator=!1;const en=Object.assign(Object.assign({},SERVER_ERROR_MAP),s);try{const tn=new NetworkTimeout(Nt),nn=await Promise.race([Ot(),tn.promise]);tn.clearNetworkTimeout();const rn=await nn.json();if("needConfirmation"in rn)throw _makeTaggedError(Nt,"account-exists-with-different-credential",rn);if(nn.ok&&!("errorMessage"in rn))return rn;{const on=nn.ok?rn.errorMessage:rn.error.message,[sn,an]=on.split(" : ");if(sn==="FEDERATED_USER_ID_ALREADY_LINKED")throw _makeTaggedError(Nt,"credential-already-in-use",rn);if(sn==="EMAIL_EXISTS")throw _makeTaggedError(Nt,"email-already-in-use",rn);if(sn==="USER_DISABLED")throw _makeTaggedError(Nt,"user-disabled",rn);const ln=en[sn]||sn.toLowerCase().replace(/[_\s]+/g,"-");if(an)throw _errorWithCustomMessage(Nt,ln,an);_fail(Nt,ln)}}catch(tn){if(tn instanceof FirebaseError$1)throw tn;_fail(Nt,"network-request-failed",{message:String(tn)})}}async function _performSignInRequest(Nt,s,Ot,en,tn={}){const nn=await _performApiRequest(Nt,s,Ot,en,tn);return"mfaPendingCredential"in nn&&_fail(Nt,"multi-factor-auth-required",{_serverResponse:nn}),nn}function _getFinalTarget(Nt,s,Ot,en){const tn=`${s}${Ot}?${en}`;return Nt.config.emulator?_emulatorUrl(Nt.config,tn):`${Nt.config.apiScheme}://${tn}`}class NetworkTimeout{constructor(s){this.auth=s,this.timer=null,this.promise=new Promise((Ot,en)=>{this.timer=setTimeout(()=>en(_createError(this.auth,"network-request-failed")),DEFAULT_API_TIMEOUT_MS.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function _makeTaggedError(Nt,s,Ot){const en={appName:Nt.name};Ot.email&&(en.email=Ot.email),Ot.phoneNumber&&(en.phoneNumber=Ot.phoneNumber);const tn=_createError(Nt,s,en);return tn.customData._tokenResponse=Ot,tn}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function deleteAccount(Nt,s){return _performApiRequest(Nt,"POST","/v1/accounts:delete",s)}async function getAccountInfo(Nt,s){return _performApiRequest(Nt,"POST","/v1/accounts:lookup",s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function utcTimestampToDateString(Nt){if(Nt)try{const s=new Date(Number(Nt));if(!isNaN(s.getTime()))return s.toUTCString()}catch{}}async function getIdTokenResult(Nt,s=!1){const Ot=getModularInstance$1(Nt),en=await Ot.getIdToken(s),tn=_parseToken(en);_assert(tn&&tn.exp&&tn.auth_time&&tn.iat,Ot.auth,"internal-error");const nn=typeof tn.firebase=="object"?tn.firebase:void 0,rn=nn==null?void 0:nn.sign_in_provider;return{claims:tn,token:en,authTime:utcTimestampToDateString(secondsStringToMilliseconds(tn.auth_time)),issuedAtTime:utcTimestampToDateString(secondsStringToMilliseconds(tn.iat)),expirationTime:utcTimestampToDateString(secondsStringToMilliseconds(tn.exp)),signInProvider:rn||null,signInSecondFactor:(nn==null?void 0:nn.sign_in_second_factor)||null}}function secondsStringToMilliseconds(Nt){return Number(Nt)*1e3}function _parseToken(Nt){const[s,Ot,en]=Nt.split(".");if(s===void 0||Ot===void 0||en===void 0)return _logError("JWT malformed, contained fewer than 3 sections"),null;try{const tn=base64Decode$1(Ot);return tn?JSON.parse(tn):(_logError("Failed to decode base64 JWT payload"),null)}catch(tn){return _logError("Caught error parsing JWT payload as JSON",tn==null?void 0:tn.toString()),null}}function _tokenExpiresIn(Nt){const s=_parseToken(Nt);return _assert(s,"internal-error"),_assert(typeof s.exp<"u","internal-error"),_assert(typeof s.iat<"u","internal-error"),Number(s.exp)-Number(s.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _logoutIfInvalidated(Nt,s,Ot=!1){if(Ot)return s;try{return await s}catch(en){throw en instanceof FirebaseError$1&&isUserInvalidated(en)&&Nt.auth.currentUser===Nt&&await Nt.auth.signOut(),en}}function isUserInvalidated({code:Nt}){return Nt==="auth/user-disabled"||Nt==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ProactiveRefresh{constructor(s){this.user=s,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(s){var Ot;if(s){const en=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),en}else{this.errorBackoff=3e4;const tn=((Ot=this.user.stsTokenManager.expirationTime)!==null&&Ot!==void 0?Ot:0)-Date.now()-3e5;return Math.max(0,tn)}}schedule(s=!1){if(!this.isRunning)return;const Ot=this.getInterval(s);this.timerId=setTimeout(async()=>{await this.iteration()},Ot)}async iteration(){try{await this.user.getIdToken(!0)}catch(s){(s==null?void 0:s.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UserMetadata{constructor(s,Ot){this.createdAt=s,this.lastLoginAt=Ot,this._initializeTime()}_initializeTime(){this.lastSignInTime=utcTimestampToDateString(this.lastLoginAt),this.creationTime=utcTimestampToDateString(this.createdAt)}_copy(s){this.createdAt=s.createdAt,this.lastLoginAt=s.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _reloadWithoutSaving(Nt){var s;const Ot=Nt.auth,en=await Nt.getIdToken(),tn=await _logoutIfInvalidated(Nt,getAccountInfo(Ot,{idToken:en}));_assert(tn==null?void 0:tn.users.length,Ot,"internal-error");const nn=tn.users[0];Nt._notifyReloadListener(nn);const rn=!((s=nn.providerUserInfo)===null||s===void 0)&&s.length?extractProviderData(nn.providerUserInfo):[],on=mergeProviderData(Nt.providerData,rn),sn=Nt.isAnonymous,an=!(Nt.email&&nn.passwordHash)&&!(on!=null&&on.length),ln=sn?an:!1,cn={uid:nn.localId,displayName:nn.displayName||null,photoURL:nn.photoUrl||null,email:nn.email||null,emailVerified:nn.emailVerified||!1,phoneNumber:nn.phoneNumber||null,tenantId:nn.tenantId||null,providerData:on,metadata:new UserMetadata(nn.createdAt,nn.lastLoginAt),isAnonymous:ln};Object.assign(Nt,cn)}async function reload(Nt){const s=getModularInstance$1(Nt);await _reloadWithoutSaving(s),await s.auth._persistUserIfCurrent(s),s.auth._notifyListenersIfCurrent(s)}function mergeProviderData(Nt,s){return[...Nt.filter(en=>!s.some(tn=>tn.providerId===en.providerId)),...s]}function extractProviderData(Nt){return Nt.map(s=>{var{providerId:Ot}=s,en=__rest(s,["providerId"]);return{providerId:Ot,uid:en.rawId||"",displayName:en.displayName||null,email:en.email||null,phoneNumber:en.phoneNumber||null,photoURL:en.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function requestStsToken(Nt,s){const Ot=await _performFetchWithErrorHandling(Nt,{},async()=>{const en=querystring({grant_type:"refresh_token",refresh_token:s}).slice(1),{tokenApiHost:tn,apiKey:nn}=Nt.config,rn=_getFinalTarget(Nt,tn,"/v1/token",`key=${nn}`),on=await Nt._getAdditionalHeaders();return on["Content-Type"]="application/x-www-form-urlencoded",FetchProvider.fetch()(rn,{method:"POST",headers:on,body:en})});return{accessToken:Ot.access_token,expiresIn:Ot.expires_in,refreshToken:Ot.refresh_token}}async function revokeToken(Nt,s){return _performApiRequest(Nt,"POST","/v2/accounts:revokeToken",_addTidIfNecessary(Nt,s))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class StsTokenManager{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(s){_assert(s.idToken,"internal-error"),_assert(typeof s.idToken<"u","internal-error"),_assert(typeof s.refreshToken<"u","internal-error");const Ot="expiresIn"in s&&typeof s.expiresIn<"u"?Number(s.expiresIn):_tokenExpiresIn(s.idToken);this.updateTokensAndExpiration(s.idToken,s.refreshToken,Ot)}async getToken(s,Ot=!1){return _assert(!this.accessToken||this.refreshToken,s,"user-token-expired"),!Ot&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(s,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(s,Ot){const{accessToken:en,refreshToken:tn,expiresIn:nn}=await requestStsToken(s,Ot);this.updateTokensAndExpiration(en,tn,Number(nn))}updateTokensAndExpiration(s,Ot,en){this.refreshToken=Ot||null,this.accessToken=s||null,this.expirationTime=Date.now()+en*1e3}static fromJSON(s,Ot){const{refreshToken:en,accessToken:tn,expirationTime:nn}=Ot,rn=new StsTokenManager;return en&&(_assert(typeof en=="string","internal-error",{appName:s}),rn.refreshToken=en),tn&&(_assert(typeof tn=="string","internal-error",{appName:s}),rn.accessToken=tn),nn&&(_assert(typeof nn=="number","internal-error",{appName:s}),rn.expirationTime=nn),rn}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(s){this.accessToken=s.accessToken,this.refreshToken=s.refreshToken,this.expirationTime=s.expirationTime}_clone(){return Object.assign(new StsTokenManager,this.toJSON())}_performRefresh(){return debugFail("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function assertStringOrUndefined(Nt,s){_assert(typeof Nt=="string"||typeof Nt>"u","internal-error",{appName:s})}class UserImpl{constructor(s){var{uid:Ot,auth:en,stsTokenManager:tn}=s,nn=__rest(s,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ProactiveRefresh(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=Ot,this.auth=en,this.stsTokenManager=tn,this.accessToken=tn.accessToken,this.displayName=nn.displayName||null,this.email=nn.email||null,this.emailVerified=nn.emailVerified||!1,this.phoneNumber=nn.phoneNumber||null,this.photoURL=nn.photoURL||null,this.isAnonymous=nn.isAnonymous||!1,this.tenantId=nn.tenantId||null,this.providerData=nn.providerData?[...nn.providerData]:[],this.metadata=new UserMetadata(nn.createdAt||void 0,nn.lastLoginAt||void 0)}async getIdToken(s){const Ot=await _logoutIfInvalidated(this,this.stsTokenManager.getToken(this.auth,s));return _assert(Ot,this.auth,"internal-error"),this.accessToken!==Ot&&(this.accessToken=Ot,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),Ot}getIdTokenResult(s){return getIdTokenResult(this,s)}reload(){return reload(this)}_assign(s){this!==s&&(_assert(this.uid===s.uid,this.auth,"internal-error"),this.displayName=s.displayName,this.photoURL=s.photoURL,this.email=s.email,this.emailVerified=s.emailVerified,this.phoneNumber=s.phoneNumber,this.isAnonymous=s.isAnonymous,this.tenantId=s.tenantId,this.providerData=s.providerData.map(Ot=>Object.assign({},Ot)),this.metadata._copy(s.metadata),this.stsTokenManager._assign(s.stsTokenManager))}_clone(s){const Ot=new UserImpl(Object.assign(Object.assign({},this),{auth:s,stsTokenManager:this.stsTokenManager._clone()}));return Ot.metadata._copy(this.metadata),Ot}_onReload(s){_assert(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=s,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(s){this.reloadListener?this.reloadListener(s):this.reloadUserInfo=s}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(s,Ot=!1){let en=!1;s.idToken&&s.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(s),en=!0),Ot&&await _reloadWithoutSaving(this),await this.auth._persistUserIfCurrent(this),en&&this.auth._notifyListenersIfCurrent(this)}async delete(){const s=await this.getIdToken();return await _logoutIfInvalidated(this,deleteAccount(this.auth,{idToken:s})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(s=>Object.assign({},s)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(s,Ot){var en,tn,nn,rn,on,sn,an,ln;const cn=(en=Ot.displayName)!==null&&en!==void 0?en:void 0,un=(tn=Ot.email)!==null&&tn!==void 0?tn:void 0,dn=(nn=Ot.phoneNumber)!==null&&nn!==void 0?nn:void 0,hn=(rn=Ot.photoURL)!==null&&rn!==void 0?rn:void 0,fn=(on=Ot.tenantId)!==null&&on!==void 0?on:void 0,mn=(sn=Ot._redirectEventId)!==null&&sn!==void 0?sn:void 0,gn=(an=Ot.createdAt)!==null&&an!==void 0?an:void 0,pn=(ln=Ot.lastLoginAt)!==null&&ln!==void 0?ln:void 0,{uid:_n,emailVerified:vn,isAnonymous:bn,providerData:wn,stsTokenManager:Sn}=Ot;_assert(_n&&Sn,s,"internal-error");const kn=StsTokenManager.fromJSON(this.name,Sn);_assert(typeof _n=="string",s,"internal-error"),assertStringOrUndefined(cn,s.name),assertStringOrUndefined(un,s.name),_assert(typeof vn=="boolean",s,"internal-error"),_assert(typeof bn=="boolean",s,"internal-error"),assertStringOrUndefined(dn,s.name),assertStringOrUndefined(hn,s.name),assertStringOrUndefined(fn,s.name),assertStringOrUndefined(mn,s.name),assertStringOrUndefined(gn,s.name),assertStringOrUndefined(pn,s.name);const En=new UserImpl({uid:_n,auth:s,email:un,emailVerified:vn,displayName:cn,isAnonymous:bn,photoURL:hn,phoneNumber:dn,tenantId:fn,stsTokenManager:kn,createdAt:gn,lastLoginAt:pn});return wn&&Array.isArray(wn)&&(En.providerData=wn.map(In=>Object.assign({},In))),mn&&(En._redirectEventId=mn),En}static async _fromIdTokenResponse(s,Ot,en=!1){const tn=new StsTokenManager;tn.updateFromServerResponse(Ot);const nn=new UserImpl({uid:Ot.localId,auth:s,stsTokenManager:tn,isAnonymous:en});return await _reloadWithoutSaving(nn),nn}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const instanceCache=new Map;function _getInstance(Nt){debugAssert(Nt instanceof Function,"Expected a class definition");let s=instanceCache.get(Nt);return s?(debugAssert(s instanceof Nt,"Instance stored in cache mismatched with class"),s):(s=new Nt,instanceCache.set(Nt,s),s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class InMemoryPersistence{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(s,Ot){this.storage[s]=Ot}async _get(s){const Ot=this.storage[s];return Ot===void 0?null:Ot}async _remove(s){delete this.storage[s]}_addListener(s,Ot){}_removeListener(s,Ot){}}InMemoryPersistence.type="NONE";const inMemoryPersistence=InMemoryPersistence;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _persistenceKeyName(Nt,s,Ot){return`firebase:${Nt}:${s}:${Ot}`}class PersistenceUserManager{constructor(s,Ot,en){this.persistence=s,this.auth=Ot,this.userKey=en;const{config:tn,name:nn}=this.auth;this.fullUserKey=_persistenceKeyName(this.userKey,tn.apiKey,nn),this.fullPersistenceKey=_persistenceKeyName("persistence",tn.apiKey,nn),this.boundEventHandler=Ot._onStorageEvent.bind(Ot),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(s){return this.persistence._set(this.fullUserKey,s.toJSON())}async getCurrentUser(){const s=await this.persistence._get(this.fullUserKey);return s?UserImpl._fromJSON(this.auth,s):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(s){if(this.persistence===s)return;const Ot=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=s,Ot)return this.setCurrentUser(Ot)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(s,Ot,en="authUser"){if(!Ot.length)return new PersistenceUserManager(_getInstance(inMemoryPersistence),s,en);const tn=(await Promise.all(Ot.map(async an=>{if(await an._isAvailable())return an}))).filter(an=>an);let nn=tn[0]||_getInstance(inMemoryPersistence);const rn=_persistenceKeyName(en,s.config.apiKey,s.name);let on=null;for(const an of Ot)try{const ln=await an._get(rn);if(ln){const cn=UserImpl._fromJSON(s,ln);an!==nn&&(on=cn),nn=an;break}}catch{}const sn=tn.filter(an=>an._shouldAllowMigration);return!nn._shouldAllowMigration||!sn.length?new PersistenceUserManager(nn,s,en):(nn=sn[0],on&&await nn._set(rn,on.toJSON()),await Promise.all(Ot.map(async an=>{if(an!==nn)try{await an._remove(rn)}catch{}})),new PersistenceUserManager(nn,s,en))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _getBrowserName(Nt){const s=Nt.toLowerCase();if(s.includes("opera/")||s.includes("opr/")||s.includes("opios/"))return"Opera";if(_isIEMobile(s))return"IEMobile";if(s.includes("msie")||s.includes("trident/"))return"IE";if(s.includes("edge/"))return"Edge";if(_isFirefox(s))return"Firefox";if(s.includes("silk/"))return"Silk";if(_isBlackBerry(s))return"Blackberry";if(_isWebOS(s))return"Webos";if(_isSafari(s))return"Safari";if((s.includes("chrome/")||_isChromeIOS(s))&&!s.includes("edge/"))return"Chrome";if(_isAndroid(s))return"Android";{const Ot=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,en=Nt.match(Ot);if((en==null?void 0:en.length)===2)return en[1]}return"Other"}function _isFirefox(Nt=getUA()){return/firefox\//i.test(Nt)}function _isSafari(Nt=getUA()){const s=Nt.toLowerCase();return s.includes("safari/")&&!s.includes("chrome/")&&!s.includes("crios/")&&!s.includes("android")}function _isChromeIOS(Nt=getUA()){return/crios\//i.test(Nt)}function _isIEMobile(Nt=getUA()){return/iemobile/i.test(Nt)}function _isAndroid(Nt=getUA()){return/android/i.test(Nt)}function _isBlackBerry(Nt=getUA()){return/blackberry/i.test(Nt)}function _isWebOS(Nt=getUA()){return/webos/i.test(Nt)}function _isIOS(Nt=getUA()){return/iphone|ipad|ipod/i.test(Nt)||/macintosh/i.test(Nt)&&/mobile/i.test(Nt)}function _isIOSStandalone(Nt=getUA()){var s;return _isIOS(Nt)&&!!(!((s=window.navigator)===null||s===void 0)&&s.standalone)}function _isIE10(){return isIE()&&document.documentMode===10}function _isMobileBrowser(Nt=getUA()){return _isIOS(Nt)||_isAndroid(Nt)||_isWebOS(Nt)||_isBlackBerry(Nt)||/windows phone/i.test(Nt)||_isIEMobile(Nt)}function _isIframe(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _getClientVersion(Nt,s=[]){let Ot;switch(Nt){case"Browser":Ot=_getBrowserName(getUA());break;case"Worker":Ot=`${_getBrowserName(getUA())}-${Nt}`;break;default:Ot=Nt}const en=s.length?s.join(","):"FirebaseCore-web";return`${Ot}/JsCore/${SDK_VERSION$1}/${en}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AuthMiddlewareQueue{constructor(s){this.auth=s,this.queue=[]}pushCallback(s,Ot){const en=nn=>new Promise((rn,on)=>{try{const sn=s(nn);rn(sn)}catch(sn){on(sn)}});en.onAbort=Ot,this.queue.push(en);const tn=this.queue.length-1;return()=>{this.queue[tn]=()=>Promise.resolve()}}async runMiddleware(s){if(this.auth.currentUser===s)return;const Ot=[];try{for(const en of this.queue)await en(s),en.onAbort&&Ot.push(en.onAbort)}catch(en){Ot.reverse();for(const tn of Ot)try{tn()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:en==null?void 0:en.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _getPasswordPolicy(Nt,s={}){return _performApiRequest(Nt,"GET","/v2/passwordPolicy",_addTidIfNecessary(Nt,s))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MINIMUM_MIN_PASSWORD_LENGTH=6;class PasswordPolicyImpl{constructor(s){var Ot,en,tn,nn;const rn=s.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(Ot=rn.minPasswordLength)!==null&&Ot!==void 0?Ot:MINIMUM_MIN_PASSWORD_LENGTH,rn.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=rn.maxPasswordLength),rn.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=rn.containsLowercaseCharacter),rn.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=rn.containsUppercaseCharacter),rn.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=rn.containsNumericCharacter),rn.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=rn.containsNonAlphanumericCharacter),this.enforcementState=s.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(tn=(en=s.allowedNonAlphanumericCharacters)===null||en===void 0?void 0:en.join(""))!==null&&tn!==void 0?tn:"",this.forceUpgradeOnSignin=(nn=s.forceUpgradeOnSignin)!==null&&nn!==void 0?nn:!1,this.schemaVersion=s.schemaVersion}validatePassword(s){var Ot,en,tn,nn,rn,on;const sn={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(s,sn),this.validatePasswordCharacterOptions(s,sn),sn.isValid&&(sn.isValid=(Ot=sn.meetsMinPasswordLength)!==null&&Ot!==void 0?Ot:!0),sn.isValid&&(sn.isValid=(en=sn.meetsMaxPasswordLength)!==null&&en!==void 0?en:!0),sn.isValid&&(sn.isValid=(tn=sn.containsLowercaseLetter)!==null&&tn!==void 0?tn:!0),sn.isValid&&(sn.isValid=(nn=sn.containsUppercaseLetter)!==null&&nn!==void 0?nn:!0),sn.isValid&&(sn.isValid=(rn=sn.containsNumericCharacter)!==null&&rn!==void 0?rn:!0),sn.isValid&&(sn.isValid=(on=sn.containsNonAlphanumericCharacter)!==null&&on!==void 0?on:!0),sn}validatePasswordLengthOptions(s,Ot){const en=this.customStrengthOptions.minPasswordLength,tn=this.customStrengthOptions.maxPasswordLength;en&&(Ot.meetsMinPasswordLength=s.length>=en),tn&&(Ot.meetsMaxPasswordLength=s.length<=tn)}validatePasswordCharacterOptions(s,Ot){this.updatePasswordCharacterOptionsStatuses(Ot,!1,!1,!1,!1);let en;for(let tn=0;tn<s.length;tn++)en=s.charAt(tn),this.updatePasswordCharacterOptionsStatuses(Ot,en>="a"&&en<="z",en>="A"&&en<="Z",en>="0"&&en<="9",this.allowedNonAlphanumericCharacters.includes(en))}updatePasswordCharacterOptionsStatuses(s,Ot,en,tn,nn){this.customStrengthOptions.containsLowercaseLetter&&(s.containsLowercaseLetter||(s.containsLowercaseLetter=Ot)),this.customStrengthOptions.containsUppercaseLetter&&(s.containsUppercaseLetter||(s.containsUppercaseLetter=en)),this.customStrengthOptions.containsNumericCharacter&&(s.containsNumericCharacter||(s.containsNumericCharacter=tn)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(s.containsNonAlphanumericCharacter||(s.containsNonAlphanumericCharacter=nn))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AuthImpl{constructor(s,Ot,en,tn){this.app=s,this.heartbeatServiceProvider=Ot,this.appCheckServiceProvider=en,this.config=tn,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Subscription(this),this.idTokenSubscription=new Subscription(this),this.beforeStateQueue=new AuthMiddlewareQueue(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=_DEFAULT_AUTH_ERROR_FACTORY,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=s.name,this.clientVersion=tn.sdkClientVersion}_initializeWithPersistence(s,Ot){return Ot&&(this._popupRedirectResolver=_getInstance(Ot)),this._initializationPromise=this.queue(async()=>{var en,tn;if(!this._deleted&&(this.persistenceManager=await PersistenceUserManager.create(this,s),!this._deleted)){if(!((en=this._popupRedirectResolver)===null||en===void 0)&&en._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(Ot),this.lastNotifiedUid=((tn=this.currentUser)===null||tn===void 0?void 0:tn.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const s=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!s)){if(this.currentUser&&s&&this.currentUser.uid===s.uid){this._currentUser._assign(s),await this.currentUser.getIdToken();return}await this._updateCurrentUser(s,!0)}}async initializeCurrentUser(s){var Ot;const en=await this.assertedPersistence.getCurrentUser();let tn=en,nn=!1;if(s&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const rn=(Ot=this.redirectUser)===null||Ot===void 0?void 0:Ot._redirectEventId,on=tn==null?void 0:tn._redirectEventId,sn=await this.tryRedirectSignIn(s);(!rn||rn===on)&&(sn!=null&&sn.user)&&(tn=sn.user,nn=!0)}if(!tn)return this.directlySetCurrentUser(null);if(!tn._redirectEventId){if(nn)try{await this.beforeStateQueue.runMiddleware(tn)}catch(rn){tn=en,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(rn))}return tn?this.reloadAndSetCurrentUserOrClear(tn):this.directlySetCurrentUser(null)}return _assert(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===tn._redirectEventId?this.directlySetCurrentUser(tn):this.reloadAndSetCurrentUserOrClear(tn)}async tryRedirectSignIn(s){let Ot=null;try{Ot=await this._popupRedirectResolver._completeRedirectFn(this,s,!0)}catch{await this._setRedirectUser(null)}return Ot}async reloadAndSetCurrentUserOrClear(s){try{await _reloadWithoutSaving(s)}catch(Ot){if((Ot==null?void 0:Ot.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(s)}useDeviceLanguage(){this.languageCode=_getUserLanguage()}async _delete(){this._deleted=!0}async updateCurrentUser(s){const Ot=s?getModularInstance$1(s):null;return Ot&&_assert(Ot.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(Ot&&Ot._clone(this))}async _updateCurrentUser(s,Ot=!1){if(!this._deleted)return s&&_assert(this.tenantId===s.tenantId,this,"tenant-id-mismatch"),Ot||await this.beforeStateQueue.runMiddleware(s),this.queue(async()=>{await this.directlySetCurrentUser(s),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(s){return this.queue(async()=>{await this.assertedPersistence.setPersistence(_getInstance(s))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(s){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const Ot=this._getPasswordPolicyInternal();return Ot.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):Ot.validatePassword(s)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const s=await _getPasswordPolicy(this),Ot=new PasswordPolicyImpl(s);this.tenantId===null?this._projectPasswordPolicy=Ot:this._tenantPasswordPolicies[this.tenantId]=Ot}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(s){this._errorFactory=new ErrorFactory$1("auth","Firebase",s())}onAuthStateChanged(s,Ot,en){return this.registerStateListener(this.authStateSubscription,s,Ot,en)}beforeAuthStateChanged(s,Ot){return this.beforeStateQueue.pushCallback(s,Ot)}onIdTokenChanged(s,Ot,en){return this.registerStateListener(this.idTokenSubscription,s,Ot,en)}authStateReady(){return new Promise((s,Ot)=>{if(this.currentUser)s();else{const en=this.onAuthStateChanged(()=>{en(),s()},Ot)}})}async revokeAccessToken(s){if(this.currentUser){const Ot=await this.currentUser.getIdToken(),en={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:s,idToken:Ot};this.tenantId!=null&&(en.tenantId=this.tenantId),await revokeToken(this,en)}}toJSON(){var s;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(s=this._currentUser)===null||s===void 0?void 0:s.toJSON()}}async _setRedirectUser(s,Ot){const en=await this.getOrInitRedirectPersistenceManager(Ot);return s===null?en.removeCurrentUser():en.setCurrentUser(s)}async getOrInitRedirectPersistenceManager(s){if(!this.redirectPersistenceManager){const Ot=s&&_getInstance(s)||this._popupRedirectResolver;_assert(Ot,this,"argument-error"),this.redirectPersistenceManager=await PersistenceUserManager.create(this,[_getInstance(Ot._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(s){var Ot,en;return this._isInitialized&&await this.queue(async()=>{}),((Ot=this._currentUser)===null||Ot===void 0?void 0:Ot._redirectEventId)===s?this._currentUser:((en=this.redirectUser)===null||en===void 0?void 0:en._redirectEventId)===s?this.redirectUser:null}async _persistUserIfCurrent(s){if(s===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(s))}_notifyListenersIfCurrent(s){s===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var s,Ot;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const en=(Ot=(s=this.currentUser)===null||s===void 0?void 0:s.uid)!==null&&Ot!==void 0?Ot:null;this.lastNotifiedUid!==en&&(this.lastNotifiedUid=en,this.authStateSubscription.next(this.currentUser))}registerStateListener(s,Ot,en,tn){if(this._deleted)return()=>{};const nn=typeof Ot=="function"?Ot:Ot.next.bind(Ot);let rn=!1;const on=this._isInitialized?Promise.resolve():this._initializationPromise;if(_assert(on,this,"internal-error"),on.then(()=>{rn||nn(this.currentUser)}),typeof Ot=="function"){const sn=s.addObserver(Ot,en,tn);return()=>{rn=!0,sn()}}else{const sn=s.addObserver(Ot);return()=>{rn=!0,sn()}}}async directlySetCurrentUser(s){this.currentUser&&this.currentUser!==s&&this._currentUser._stopProactiveRefresh(),s&&this.isProactiveRefreshEnabled&&s._startProactiveRefresh(),this.currentUser=s,s?await this.assertedPersistence.setCurrentUser(s):await this.assertedPersistence.removeCurrentUser()}queue(s){return this.operations=this.operations.then(s,s),this.operations}get assertedPersistence(){return _assert(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(s){!s||this.frameworks.includes(s)||(this.frameworks.push(s),this.frameworks.sort(),this.clientVersion=_getClientVersion(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const Ot={"X-Client-Version":this.clientVersion};this.app.options.appId&&(Ot["X-Firebase-gmpid"]=this.app.options.appId);const en=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||s===void 0?void 0:s.getHeartbeatsHeader());en&&(Ot["X-Firebase-Client"]=en);const tn=await this._getAppCheckToken();return tn&&(Ot["X-Firebase-AppCheck"]=tn),Ot}async _getAppCheckToken(){var s;const Ot=await((s=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||s===void 0?void 0:s.getToken());return Ot!=null&&Ot.error&&_logWarn(`Error while retrieving App Check token: ${Ot.error}`),Ot==null?void 0:Ot.token}}function _castAuth(Nt){return getModularInstance$1(Nt)}class Subscription{constructor(s){this.auth=s,this.observer=null,this.addObserver=createSubscribe(Ot=>this.observer=Ot)}get next(){return _assert(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let externalJSProvider={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function _setExternalJSProvider(Nt){externalJSProvider=Nt}function _loadJS(Nt){return externalJSProvider.loadJS(Nt)}function _gapiScriptUrl(){return externalJSProvider.gapiScript}function _generateCallbackName(Nt){return`__${Nt}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function initializeAuth(Nt,s){const Ot=_getProvider(Nt,"auth");if(Ot.isInitialized()){const tn=Ot.getImmediate(),nn=Ot.getOptions();if(deepEqual(nn,s??{}))return tn;_fail(tn,"already-initialized")}return Ot.initialize({options:s})}function _initializeAuthInstance(Nt,s){const Ot=(s==null?void 0:s.persistence)||[],en=(Array.isArray(Ot)?Ot:[Ot]).map(_getInstance);s!=null&&s.errorMap&&Nt._updateErrorMap(s.errorMap),Nt._initializeWithPersistence(en,s==null?void 0:s.popupRedirectResolver)}function connectAuthEmulator(Nt,s,Ot){const en=_castAuth(Nt);_assert(en._canInitEmulator,en,"emulator-config-failed"),_assert(/^https?:\/\//.test(s),en,"invalid-emulator-scheme");const tn=!!(Ot!=null&&Ot.disableWarnings),nn=extractProtocol(s),{host:rn,port:on}=extractHostAndPort(s),sn=on===null?"":`:${on}`;en.config.emulator={url:`${nn}//${rn}${sn}/`},en.settings.appVerificationDisabledForTesting=!0,en.emulatorConfig=Object.freeze({host:rn,port:on,protocol:nn.replace(":",""),options:Object.freeze({disableWarnings:tn})}),tn||emitEmulatorWarning()}function extractProtocol(Nt){const s=Nt.indexOf(":");return s<0?"":Nt.substr(0,s+1)}function extractHostAndPort(Nt){const s=extractProtocol(Nt),Ot=/(\/\/)?([^?#/]+)/.exec(Nt.substr(s.length));if(!Ot)return{host:"",port:null};const en=Ot[2].split("@").pop()||"",tn=/^(\[[^\]]+\])(:|$)/.exec(en);if(tn){const nn=tn[1];return{host:nn,port:parsePort(en.substr(nn.length+1))}}else{const[nn,rn]=en.split(":");return{host:nn,port:parsePort(rn)}}}function parsePort(Nt){if(!Nt)return null;const s=Number(Nt);return isNaN(s)?null:s}function emitEmulatorWarning(){function Nt(){const s=document.createElement("p"),Ot=s.style;s.innerText="Running in emulator mode. Do not use with production credentials.",Ot.position="fixed",Ot.width="100%",Ot.backgroundColor="#ffffff",Ot.border=".1em solid #000000",Ot.color="#b50000",Ot.bottom="0px",Ot.left="0px",Ot.margin="0px",Ot.zIndex="10000",Ot.textAlign="center",s.classList.add("firebase-emulator-warning"),document.body.appendChild(s)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",Nt):Nt())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AuthCredential{constructor(s,Ot){this.providerId=s,this.signInMethod=Ot}toJSON(){return debugFail("not implemented")}_getIdTokenResponse(s){return debugFail("not implemented")}_linkToIdToken(s,Ot){return debugFail("not implemented")}_getReauthenticationResolver(s){return debugFail("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function signInWithIdp(Nt,s){return _performSignInRequest(Nt,"POST","/v1/accounts:signInWithIdp",_addTidIfNecessary(Nt,s))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IDP_REQUEST_URI$1="http://localhost";class OAuthCredential extends AuthCredential{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(s){const Ot=new OAuthCredential(s.providerId,s.signInMethod);return s.idToken||s.accessToken?(s.idToken&&(Ot.idToken=s.idToken),s.accessToken&&(Ot.accessToken=s.accessToken),s.nonce&&!s.pendingToken&&(Ot.nonce=s.nonce),s.pendingToken&&(Ot.pendingToken=s.pendingToken)):s.oauthToken&&s.oauthTokenSecret?(Ot.accessToken=s.oauthToken,Ot.secret=s.oauthTokenSecret):_fail("argument-error"),Ot}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(s){const Ot=typeof s=="string"?JSON.parse(s):s,{providerId:en,signInMethod:tn}=Ot,nn=__rest(Ot,["providerId","signInMethod"]);if(!en||!tn)return null;const rn=new OAuthCredential(en,tn);return rn.idToken=nn.idToken||void 0,rn.accessToken=nn.accessToken||void 0,rn.secret=nn.secret,rn.nonce=nn.nonce,rn.pendingToken=nn.pendingToken||null,rn}_getIdTokenResponse(s){const Ot=this.buildRequest();return signInWithIdp(s,Ot)}_linkToIdToken(s,Ot){const en=this.buildRequest();return en.idToken=Ot,signInWithIdp(s,en)}_getReauthenticationResolver(s){const Ot=this.buildRequest();return Ot.autoCreate=!1,signInWithIdp(s,Ot)}buildRequest(){const s={requestUri:IDP_REQUEST_URI$1,returnSecureToken:!0};if(this.pendingToken)s.pendingToken=this.pendingToken;else{const Ot={};this.idToken&&(Ot.id_token=this.idToken),this.accessToken&&(Ot.access_token=this.accessToken),this.secret&&(Ot.oauth_token_secret=this.secret),Ot.providerId=this.providerId,this.nonce&&!this.pendingToken&&(Ot.nonce=this.nonce),s.postBody=querystring(Ot)}return s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FederatedAuthProvider{constructor(s){this.providerId=s,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(s){this.defaultLanguageCode=s}setCustomParameters(s){return this.customParameters=s,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BaseOAuthProvider extends FederatedAuthProvider{constructor(){super(...arguments),this.scopes=[]}addScope(s){return this.scopes.includes(s)||this.scopes.push(s),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FacebookAuthProvider extends BaseOAuthProvider{constructor(){super("facebook.com")}static credential(s){return OAuthCredential._fromParams({providerId:FacebookAuthProvider.PROVIDER_ID,signInMethod:FacebookAuthProvider.FACEBOOK_SIGN_IN_METHOD,accessToken:s})}static credentialFromResult(s){return FacebookAuthProvider.credentialFromTaggedObject(s)}static credentialFromError(s){return FacebookAuthProvider.credentialFromTaggedObject(s.customData||{})}static credentialFromTaggedObject({_tokenResponse:s}){if(!s||!("oauthAccessToken"in s)||!s.oauthAccessToken)return null;try{return FacebookAuthProvider.credential(s.oauthAccessToken)}catch{return null}}}FacebookAuthProvider.FACEBOOK_SIGN_IN_METHOD="facebook.com";FacebookAuthProvider.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GoogleAuthProvider extends BaseOAuthProvider{constructor(){super("google.com"),this.addScope("profile")}static credential(s,Ot){return OAuthCredential._fromParams({providerId:GoogleAuthProvider.PROVIDER_ID,signInMethod:GoogleAuthProvider.GOOGLE_SIGN_IN_METHOD,idToken:s,accessToken:Ot})}static credentialFromResult(s){return GoogleAuthProvider.credentialFromTaggedObject(s)}static credentialFromError(s){return GoogleAuthProvider.credentialFromTaggedObject(s.customData||{})}static credentialFromTaggedObject({_tokenResponse:s}){if(!s)return null;const{oauthIdToken:Ot,oauthAccessToken:en}=s;if(!Ot&&!en)return null;try{return GoogleAuthProvider.credential(Ot,en)}catch{return null}}}GoogleAuthProvider.GOOGLE_SIGN_IN_METHOD="google.com";GoogleAuthProvider.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GithubAuthProvider extends BaseOAuthProvider{constructor(){super("github.com")}static credential(s){return OAuthCredential._fromParams({providerId:GithubAuthProvider.PROVIDER_ID,signInMethod:GithubAuthProvider.GITHUB_SIGN_IN_METHOD,accessToken:s})}static credentialFromResult(s){return GithubAuthProvider.credentialFromTaggedObject(s)}static credentialFromError(s){return GithubAuthProvider.credentialFromTaggedObject(s.customData||{})}static credentialFromTaggedObject({_tokenResponse:s}){if(!s||!("oauthAccessToken"in s)||!s.oauthAccessToken)return null;try{return GithubAuthProvider.credential(s.oauthAccessToken)}catch{return null}}}GithubAuthProvider.GITHUB_SIGN_IN_METHOD="github.com";GithubAuthProvider.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TwitterAuthProvider extends BaseOAuthProvider{constructor(){super("twitter.com")}static credential(s,Ot){return OAuthCredential._fromParams({providerId:TwitterAuthProvider.PROVIDER_ID,signInMethod:TwitterAuthProvider.TWITTER_SIGN_IN_METHOD,oauthToken:s,oauthTokenSecret:Ot})}static credentialFromResult(s){return TwitterAuthProvider.credentialFromTaggedObject(s)}static credentialFromError(s){return TwitterAuthProvider.credentialFromTaggedObject(s.customData||{})}static credentialFromTaggedObject({_tokenResponse:s}){if(!s)return null;const{oauthAccessToken:Ot,oauthTokenSecret:en}=s;if(!Ot||!en)return null;try{return TwitterAuthProvider.credential(Ot,en)}catch{return null}}}TwitterAuthProvider.TWITTER_SIGN_IN_METHOD="twitter.com";TwitterAuthProvider.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UserCredentialImpl{constructor(s){this.user=s.user,this.providerId=s.providerId,this._tokenResponse=s._tokenResponse,this.operationType=s.operationType}static async _fromIdTokenResponse(s,Ot,en,tn=!1){const nn=await UserImpl._fromIdTokenResponse(s,en,tn),rn=providerIdForResponse(en);return new UserCredentialImpl({user:nn,providerId:rn,_tokenResponse:en,operationType:Ot})}static async _forOperation(s,Ot,en){await s._updateTokensIfNecessary(en,!0);const tn=providerIdForResponse(en);return new UserCredentialImpl({user:s,providerId:tn,_tokenResponse:en,operationType:Ot})}}function providerIdForResponse(Nt){return Nt.providerId?Nt.providerId:"phoneNumber"in Nt?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MultiFactorError extends FirebaseError$1{constructor(s,Ot,en,tn){var nn;super(Ot.code,Ot.message),this.operationType=en,this.user=tn,Object.setPrototypeOf(this,MultiFactorError.prototype),this.customData={appName:s.name,tenantId:(nn=s.tenantId)!==null&&nn!==void 0?nn:void 0,_serverResponse:Ot.customData._serverResponse,operationType:en}}static _fromErrorAndOperation(s,Ot,en,tn){return new MultiFactorError(s,Ot,en,tn)}}function _processCredentialSavingMfaContextIfNecessary(Nt,s,Ot,en){return(s==="reauthenticate"?Ot._getReauthenticationResolver(Nt):Ot._getIdTokenResponse(Nt)).catch(nn=>{throw nn.code==="auth/multi-factor-auth-required"?MultiFactorError._fromErrorAndOperation(Nt,nn,s,en):nn})}async function _link$1(Nt,s,Ot=!1){const en=await _logoutIfInvalidated(Nt,s._linkToIdToken(Nt.auth,await Nt.getIdToken()),Ot);return UserCredentialImpl._forOperation(Nt,"link",en)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _reauthenticate(Nt,s,Ot=!1){const{auth:en}=Nt,tn="reauthenticate";try{const nn=await _logoutIfInvalidated(Nt,_processCredentialSavingMfaContextIfNecessary(en,tn,s,Nt),Ot);_assert(nn.idToken,en,"internal-error");const rn=_parseToken(nn.idToken);_assert(rn,en,"internal-error");const{sub:on}=rn;return _assert(Nt.uid===on,en,"user-mismatch"),UserCredentialImpl._forOperation(Nt,tn,nn)}catch(nn){throw(nn==null?void 0:nn.code)==="auth/user-not-found"&&_fail(en,"user-mismatch"),nn}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _signInWithCredential(Nt,s,Ot=!1){const en="signIn",tn=await _processCredentialSavingMfaContextIfNecessary(Nt,en,s),nn=await UserCredentialImpl._fromIdTokenResponse(Nt,en,tn);return Ot||await Nt._updateCurrentUser(nn.user),nn}function onIdTokenChanged(Nt,s,Ot,en){return getModularInstance$1(Nt).onIdTokenChanged(s,Ot,en)}function beforeAuthStateChanged(Nt,s,Ot){return getModularInstance$1(Nt).beforeAuthStateChanged(s,Ot)}function onAuthStateChanged(Nt,s,Ot,en){return getModularInstance$1(Nt).onAuthStateChanged(s,Ot,en)}function signOut(Nt){return getModularInstance$1(Nt).signOut()}async function deleteUser(Nt){return getModularInstance$1(Nt).delete()}const STORAGE_AVAILABLE_KEY="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BrowserPersistenceClass{constructor(s,Ot){this.storageRetriever=s,this.type=Ot}_isAvailable(){try{return this.storage?(this.storage.setItem(STORAGE_AVAILABLE_KEY,"1"),this.storage.removeItem(STORAGE_AVAILABLE_KEY),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(s,Ot){return this.storage.setItem(s,JSON.stringify(Ot)),Promise.resolve()}_get(s){const Ot=this.storage.getItem(s);return Promise.resolve(Ot?JSON.parse(Ot):null)}_remove(s){return this.storage.removeItem(s),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _iframeCannotSyncWebStorage(){const Nt=getUA();return _isSafari(Nt)||_isIOS(Nt)}const _POLLING_INTERVAL_MS$1=1e3,IE10_LOCAL_STORAGE_SYNC_DELAY=10;class BrowserLocalPersistence extends BrowserPersistenceClass{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(s,Ot)=>this.onStorageEvent(s,Ot),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=_iframeCannotSyncWebStorage()&&_isIframe(),this.fallbackToPolling=_isMobileBrowser(),this._shouldAllowMigration=!0}forAllChangedKeys(s){for(const Ot of Object.keys(this.listeners)){const en=this.storage.getItem(Ot),tn=this.localCache[Ot];en!==tn&&s(Ot,tn,en)}}onStorageEvent(s,Ot=!1){if(!s.key){this.forAllChangedKeys((rn,on,sn)=>{this.notifyListeners(rn,sn)});return}const en=s.key;if(Ot?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const rn=this.storage.getItem(en);if(s.newValue!==rn)s.newValue!==null?this.storage.setItem(en,s.newValue):this.storage.removeItem(en);else if(this.localCache[en]===s.newValue&&!Ot)return}const tn=()=>{const rn=this.storage.getItem(en);!Ot&&this.localCache[en]===rn||this.notifyListeners(en,rn)},nn=this.storage.getItem(en);_isIE10()&&nn!==s.newValue&&s.newValue!==s.oldValue?setTimeout(tn,IE10_LOCAL_STORAGE_SYNC_DELAY):tn()}notifyListeners(s,Ot){this.localCache[s]=Ot;const en=this.listeners[s];if(en)for(const tn of Array.from(en))tn(Ot&&JSON.parse(Ot))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((s,Ot,en)=>{this.onStorageEvent(new StorageEvent("storage",{key:s,oldValue:Ot,newValue:en}),!0)})},_POLLING_INTERVAL_MS$1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(s,Ot){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[s]||(this.listeners[s]=new Set,this.localCache[s]=this.storage.getItem(s)),this.listeners[s].add(Ot)}_removeListener(s,Ot){this.listeners[s]&&(this.listeners[s].delete(Ot),this.listeners[s].size===0&&delete this.listeners[s]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(s,Ot){await super._set(s,Ot),this.localCache[s]=JSON.stringify(Ot)}async _get(s){const Ot=await super._get(s);return this.localCache[s]=JSON.stringify(Ot),Ot}async _remove(s){await super._remove(s),delete this.localCache[s]}}BrowserLocalPersistence.type="LOCAL";const browserLocalPersistence=BrowserLocalPersistence;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BrowserSessionPersistence extends BrowserPersistenceClass{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(s,Ot){}_removeListener(s,Ot){}}BrowserSessionPersistence.type="SESSION";const browserSessionPersistence=BrowserSessionPersistence;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _allSettled(Nt){return Promise.all(Nt.map(async s=>{try{return{fulfilled:!0,value:await s}}catch(Ot){return{fulfilled:!1,reason:Ot}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Receiver{constructor(s){this.eventTarget=s,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(s){const Ot=this.receivers.find(tn=>tn.isListeningto(s));if(Ot)return Ot;const en=new Receiver(s);return this.receivers.push(en),en}isListeningto(s){return this.eventTarget===s}async handleEvent(s){const Ot=s,{eventId:en,eventType:tn,data:nn}=Ot.data,rn=this.handlersMap[tn];if(!(rn!=null&&rn.size))return;Ot.ports[0].postMessage({status:"ack",eventId:en,eventType:tn});const on=Array.from(rn).map(async an=>an(Ot.origin,nn)),sn=await _allSettled(on);Ot.ports[0].postMessage({status:"done",eventId:en,eventType:tn,response:sn})}_subscribe(s,Ot){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[s]||(this.handlersMap[s]=new Set),this.handlersMap[s].add(Ot)}_unsubscribe(s,Ot){this.handlersMap[s]&&Ot&&this.handlersMap[s].delete(Ot),(!Ot||this.handlersMap[s].size===0)&&delete this.handlersMap[s],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Receiver.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _generateEventId(Nt="",s=10){let Ot="";for(let en=0;en<s;en++)Ot+=Math.floor(Math.random()*10);return Nt+Ot}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sender{constructor(s){this.target=s,this.handlers=new Set}removeMessageHandler(s){s.messageChannel&&(s.messageChannel.port1.removeEventListener("message",s.onMessage),s.messageChannel.port1.close()),this.handlers.delete(s)}async _send(s,Ot,en=50){const tn=typeof MessageChannel<"u"?new MessageChannel:null;if(!tn)throw new Error("connection_unavailable");let nn,rn;return new Promise((on,sn)=>{const an=_generateEventId("",20);tn.port1.start();const ln=setTimeout(()=>{sn(new Error("unsupported_event"))},en);rn={messageChannel:tn,onMessage(cn){const un=cn;if(un.data.eventId===an)switch(un.data.status){case"ack":clearTimeout(ln),nn=setTimeout(()=>{sn(new Error("timeout"))},3e3);break;case"done":clearTimeout(nn),on(un.data.response);break;default:clearTimeout(ln),clearTimeout(nn),sn(new Error("invalid_response"));break}}},this.handlers.add(rn),tn.port1.addEventListener("message",rn.onMessage),this.target.postMessage({eventType:s,eventId:an,data:Ot},[tn.port2])}).finally(()=>{rn&&this.removeMessageHandler(rn)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _window(){return window}function _setWindowLocation(Nt){_window().location.href=Nt}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _isWorker(){return typeof _window().WorkerGlobalScope<"u"&&typeof _window().importScripts=="function"}async function _getActiveServiceWorker(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function _getServiceWorkerController(){var Nt;return((Nt=navigator==null?void 0:navigator.serviceWorker)===null||Nt===void 0?void 0:Nt.controller)||null}function _getWorkerGlobalScope(){return _isWorker()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DB_NAME="firebaseLocalStorageDb",DB_VERSION=1,DB_OBJECTSTORE_NAME="firebaseLocalStorage",DB_DATA_KEYPATH="fbase_key";class DBPromise{constructor(s){this.request=s}toPromise(){return new Promise((s,Ot)=>{this.request.addEventListener("success",()=>{s(this.request.result)}),this.request.addEventListener("error",()=>{Ot(this.request.error)})})}}function getObjectStore(Nt,s){return Nt.transaction([DB_OBJECTSTORE_NAME],s?"readwrite":"readonly").objectStore(DB_OBJECTSTORE_NAME)}function _deleteDatabase(){const Nt=indexedDB.deleteDatabase(DB_NAME);return new DBPromise(Nt).toPromise()}function _openDatabase(){const Nt=indexedDB.open(DB_NAME,DB_VERSION);return new Promise((s,Ot)=>{Nt.addEventListener("error",()=>{Ot(Nt.error)}),Nt.addEventListener("upgradeneeded",()=>{const en=Nt.result;try{en.createObjectStore(DB_OBJECTSTORE_NAME,{keyPath:DB_DATA_KEYPATH})}catch(tn){Ot(tn)}}),Nt.addEventListener("success",async()=>{const en=Nt.result;en.objectStoreNames.contains(DB_OBJECTSTORE_NAME)?s(en):(en.close(),await _deleteDatabase(),s(await _openDatabase()))})})}async function _putObject(Nt,s,Ot){const en=getObjectStore(Nt,!0).put({[DB_DATA_KEYPATH]:s,value:Ot});return new DBPromise(en).toPromise()}async function getObject(Nt,s){const Ot=getObjectStore(Nt,!1).get(s),en=await new DBPromise(Ot).toPromise();return en===void 0?null:en.value}function _deleteObject(Nt,s){const Ot=getObjectStore(Nt,!0).delete(s);return new DBPromise(Ot).toPromise()}const _POLLING_INTERVAL_MS=800,_TRANSACTION_RETRY_COUNT=3;class IndexedDBLocalPersistence{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await _openDatabase(),this.db)}async _withRetries(s){let Ot=0;for(;;)try{const en=await this._openDb();return await s(en)}catch(en){if(Ot++>_TRANSACTION_RETRY_COUNT)throw en;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return _isWorker()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Receiver._getInstance(_getWorkerGlobalScope()),this.receiver._subscribe("keyChanged",async(s,Ot)=>({keyProcessed:(await this._poll()).includes(Ot.key)})),this.receiver._subscribe("ping",async(s,Ot)=>["keyChanged"])}async initializeSender(){var s,Ot;if(this.activeServiceWorker=await _getActiveServiceWorker(),!this.activeServiceWorker)return;this.sender=new Sender(this.activeServiceWorker);const en=await this.sender._send("ping",{},800);en&&!((s=en[0])===null||s===void 0)&&s.fulfilled&&!((Ot=en[0])===null||Ot===void 0)&&Ot.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(s){if(!(!this.sender||!this.activeServiceWorker||_getServiceWorkerController()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:s},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const s=await _openDatabase();return await _putObject(s,STORAGE_AVAILABLE_KEY,"1"),await _deleteObject(s,STORAGE_AVAILABLE_KEY),!0}catch{}return!1}async _withPendingWrite(s){this.pendingWrites++;try{await s()}finally{this.pendingWrites--}}async _set(s,Ot){return this._withPendingWrite(async()=>(await this._withRetries(en=>_putObject(en,s,Ot)),this.localCache[s]=Ot,this.notifyServiceWorker(s)))}async _get(s){const Ot=await this._withRetries(en=>getObject(en,s));return this.localCache[s]=Ot,Ot}async _remove(s){return this._withPendingWrite(async()=>(await this._withRetries(Ot=>_deleteObject(Ot,s)),delete this.localCache[s],this.notifyServiceWorker(s)))}async _poll(){const s=await this._withRetries(tn=>{const nn=getObjectStore(tn,!1).getAll();return new DBPromise(nn).toPromise()});if(!s)return[];if(this.pendingWrites!==0)return[];const Ot=[],en=new Set;if(s.length!==0)for(const{fbase_key:tn,value:nn}of s)en.add(tn),JSON.stringify(this.localCache[tn])!==JSON.stringify(nn)&&(this.notifyListeners(tn,nn),Ot.push(tn));for(const tn of Object.keys(this.localCache))this.localCache[tn]&&!en.has(tn)&&(this.notifyListeners(tn,null),Ot.push(tn));return Ot}notifyListeners(s,Ot){this.localCache[s]=Ot;const en=this.listeners[s];if(en)for(const tn of Array.from(en))tn(Ot)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),_POLLING_INTERVAL_MS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(s,Ot){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[s]||(this.listeners[s]=new Set,this._get(s)),this.listeners[s].add(Ot)}_removeListener(s,Ot){this.listeners[s]&&(this.listeners[s].delete(Ot),this.listeners[s].size===0&&delete this.listeners[s]),Object.keys(this.listeners).length===0&&this.stopPolling()}}IndexedDBLocalPersistence.type="LOCAL";const indexedDBLocalPersistence=IndexedDBLocalPersistence;new Delay(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _withDefaultResolver(Nt,s){return s?_getInstance(s):(_assert(Nt._popupRedirectResolver,Nt,"argument-error"),Nt._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IdpCredential extends AuthCredential{constructor(s){super("custom","custom"),this.params=s}_getIdTokenResponse(s){return signInWithIdp(s,this._buildIdpRequest())}_linkToIdToken(s,Ot){return signInWithIdp(s,this._buildIdpRequest(Ot))}_getReauthenticationResolver(s){return signInWithIdp(s,this._buildIdpRequest())}_buildIdpRequest(s){const Ot={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return s&&(Ot.idToken=s),Ot}}function _signIn(Nt){return _signInWithCredential(Nt.auth,new IdpCredential(Nt),Nt.bypassAuthState)}function _reauth(Nt){const{auth:s,user:Ot}=Nt;return _assert(Ot,s,"internal-error"),_reauthenticate(Ot,new IdpCredential(Nt),Nt.bypassAuthState)}async function _link(Nt){const{auth:s,user:Ot}=Nt;return _assert(Ot,s,"internal-error"),_link$1(Ot,new IdpCredential(Nt),Nt.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AbstractPopupRedirectOperation{constructor(s,Ot,en,tn,nn=!1){this.auth=s,this.resolver=en,this.user=tn,this.bypassAuthState=nn,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(Ot)?Ot:[Ot]}execute(){return new Promise(async(s,Ot)=>{this.pendingPromise={resolve:s,reject:Ot};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(en){this.reject(en)}})}async onAuthEvent(s){const{urlResponse:Ot,sessionId:en,postBody:tn,tenantId:nn,error:rn,type:on}=s;if(rn){this.reject(rn);return}const sn={auth:this.auth,requestUri:Ot,sessionId:en,tenantId:nn||void 0,postBody:tn||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(on)(sn))}catch(an){this.reject(an)}}onError(s){this.reject(s)}getIdpTask(s){switch(s){case"signInViaPopup":case"signInViaRedirect":return _signIn;case"linkViaPopup":case"linkViaRedirect":return _link;case"reauthViaPopup":case"reauthViaRedirect":return _reauth;default:_fail(this.auth,"internal-error")}}resolve(s){debugAssert(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(s),this.unregisterAndCleanUp()}reject(s){debugAssert(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(s),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _POLL_WINDOW_CLOSE_TIMEOUT=new Delay(2e3,1e4);async function signInWithPopup(Nt,s,Ot){const en=_castAuth(Nt);_assertInstanceOf(Nt,s,FederatedAuthProvider);const tn=_withDefaultResolver(en,Ot);return new PopupOperation(en,"signInViaPopup",s,tn).executeNotNull()}class PopupOperation extends AbstractPopupRedirectOperation{constructor(s,Ot,en,tn,nn){super(s,Ot,tn,nn),this.provider=en,this.authWindow=null,this.pollId=null,PopupOperation.currentPopupAction&&PopupOperation.currentPopupAction.cancel(),PopupOperation.currentPopupAction=this}async executeNotNull(){const s=await this.execute();return _assert(s,this.auth,"internal-error"),s}async onExecution(){debugAssert(this.filter.length===1,"Popup operations only handle one event");const s=_generateEventId();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],s),this.authWindow.associatedEvent=s,this.resolver._originValidation(this.auth).catch(Ot=>{this.reject(Ot)}),this.resolver._isIframeWebStorageSupported(this.auth,Ot=>{Ot||this.reject(_createError(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var s;return((s=this.authWindow)===null||s===void 0?void 0:s.associatedEvent)||null}cancel(){this.reject(_createError(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,PopupOperation.currentPopupAction=null}pollUserCancellation(){const s=()=>{var Ot,en;if(!((en=(Ot=this.authWindow)===null||Ot===void 0?void 0:Ot.window)===null||en===void 0)&&en.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(_createError(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(s,_POLL_WINDOW_CLOSE_TIMEOUT.get())};s()}}PopupOperation.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PENDING_REDIRECT_KEY="pendingRedirect",redirectOutcomeMap=new Map;class RedirectAction extends AbstractPopupRedirectOperation{constructor(s,Ot,en=!1){super(s,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],Ot,void 0,en),this.eventId=null}async execute(){let s=redirectOutcomeMap.get(this.auth._key());if(!s){try{const en=await _getAndClearPendingRedirectStatus(this.resolver,this.auth)?await super.execute():null;s=()=>Promise.resolve(en)}catch(Ot){s=()=>Promise.reject(Ot)}redirectOutcomeMap.set(this.auth._key(),s)}return this.bypassAuthState||redirectOutcomeMap.set(this.auth._key(),()=>Promise.resolve(null)),s()}async onAuthEvent(s){if(s.type==="signInViaRedirect")return super.onAuthEvent(s);if(s.type==="unknown"){this.resolve(null);return}if(s.eventId){const Ot=await this.auth._redirectUserForId(s.eventId);if(Ot)return this.user=Ot,super.onAuthEvent(s);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function _getAndClearPendingRedirectStatus(Nt,s){const Ot=pendingRedirectKey(s),en=resolverPersistence(Nt);if(!await en._isAvailable())return!1;const tn=await en._get(Ot)==="true";return await en._remove(Ot),tn}function _overrideRedirectResult(Nt,s){redirectOutcomeMap.set(Nt._key(),s)}function resolverPersistence(Nt){return _getInstance(Nt._redirectPersistence)}function pendingRedirectKey(Nt){return _persistenceKeyName(PENDING_REDIRECT_KEY,Nt.config.apiKey,Nt.name)}async function _getRedirectResult(Nt,s,Ot=!1){const en=_castAuth(Nt),tn=_withDefaultResolver(en,s),rn=await new RedirectAction(en,tn,Ot).execute();return rn&&!Ot&&(delete rn.user._redirectEventId,await en._persistUserIfCurrent(rn.user),await en._setRedirectUser(null,s)),rn}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EVENT_DUPLICATION_CACHE_DURATION_MS=10*60*1e3;class AuthEventManager{constructor(s){this.auth=s,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(s){this.consumers.add(s),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,s)&&(this.sendToConsumer(this.queuedRedirectEvent,s),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(s){this.consumers.delete(s)}onEvent(s){if(this.hasEventBeenHandled(s))return!1;let Ot=!1;return this.consumers.forEach(en=>{this.isEventForConsumer(s,en)&&(Ot=!0,this.sendToConsumer(s,en),this.saveEventToCache(s))}),this.hasHandledPotentialRedirect||!isRedirectEvent(s)||(this.hasHandledPotentialRedirect=!0,Ot||(this.queuedRedirectEvent=s,Ot=!0)),Ot}sendToConsumer(s,Ot){var en;if(s.error&&!isNullRedirectEvent(s)){const tn=((en=s.error.code)===null||en===void 0?void 0:en.split("auth/")[1])||"internal-error";Ot.onError(_createError(this.auth,tn))}else Ot.onAuthEvent(s)}isEventForConsumer(s,Ot){const en=Ot.eventId===null||!!s.eventId&&s.eventId===Ot.eventId;return Ot.filter.includes(s.type)&&en}hasEventBeenHandled(s){return Date.now()-this.lastProcessedEventTime>=EVENT_DUPLICATION_CACHE_DURATION_MS&&this.cachedEventUids.clear(),this.cachedEventUids.has(eventUid(s))}saveEventToCache(s){this.cachedEventUids.add(eventUid(s)),this.lastProcessedEventTime=Date.now()}}function eventUid(Nt){return[Nt.type,Nt.eventId,Nt.sessionId,Nt.tenantId].filter(s=>s).join("-")}function isNullRedirectEvent({type:Nt,error:s}){return Nt==="unknown"&&(s==null?void 0:s.code)==="auth/no-auth-event"}function isRedirectEvent(Nt){switch(Nt.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return isNullRedirectEvent(Nt);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _getProjectConfig(Nt,s={}){return _performApiRequest(Nt,"GET","/v1/projects",s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IP_ADDRESS_REGEX=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,HTTP_REGEX=/^https?/;async function _validateOrigin(Nt){if(Nt.config.emulator)return;const{authorizedDomains:s}=await _getProjectConfig(Nt);for(const Ot of s)try{if(matchDomain(Ot))return}catch{}_fail(Nt,"unauthorized-domain")}function matchDomain(Nt){const s=_getCurrentUrl(),{protocol:Ot,hostname:en}=new URL(s);if(Nt.startsWith("chrome-extension://")){const rn=new URL(Nt);return rn.hostname===""&&en===""?Ot==="chrome-extension:"&&Nt.replace("chrome-extension://","")===s.replace("chrome-extension://",""):Ot==="chrome-extension:"&&rn.hostname===en}if(!HTTP_REGEX.test(Ot))return!1;if(IP_ADDRESS_REGEX.test(Nt))return en===Nt;const tn=Nt.replace(/\./g,"\\.");return new RegExp("^(.+\\."+tn+"|"+tn+")$","i").test(en)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NETWORK_TIMEOUT=new Delay(3e4,6e4);function resetUnloadedGapiModules(){const Nt=_window().___jsl;if(Nt!=null&&Nt.H){for(const s of Object.keys(Nt.H))if(Nt.H[s].r=Nt.H[s].r||[],Nt.H[s].L=Nt.H[s].L||[],Nt.H[s].r=[...Nt.H[s].L],Nt.CP)for(let Ot=0;Ot<Nt.CP.length;Ot++)Nt.CP[Ot]=null}}function loadGapi(Nt){return new Promise((s,Ot)=>{var en,tn,nn;function rn(){resetUnloadedGapiModules(),gapi.load("gapi.iframes",{callback:()=>{s(gapi.iframes.getContext())},ontimeout:()=>{resetUnloadedGapiModules(),Ot(_createError(Nt,"network-request-failed"))},timeout:NETWORK_TIMEOUT.get()})}if(!((tn=(en=_window().gapi)===null||en===void 0?void 0:en.iframes)===null||tn===void 0)&&tn.Iframe)s(gapi.iframes.getContext());else if(!((nn=_window().gapi)===null||nn===void 0)&&nn.load)rn();else{const on=_generateCallbackName("iframefcb");return _window()[on]=()=>{gapi.load?rn():Ot(_createError(Nt,"network-request-failed"))},_loadJS(`${_gapiScriptUrl()}?onload=${on}`).catch(sn=>Ot(sn))}}).catch(s=>{throw cachedGApiLoader=null,s})}let cachedGApiLoader=null;function _loadGapi(Nt){return cachedGApiLoader=cachedGApiLoader||loadGapi(Nt),cachedGApiLoader}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PING_TIMEOUT=new Delay(5e3,15e3),IFRAME_PATH="__/auth/iframe",EMULATED_IFRAME_PATH="emulator/auth/iframe",IFRAME_ATTRIBUTES={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},EID_FROM_APIHOST=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function getIframeUrl(Nt){const s=Nt.config;_assert(s.authDomain,Nt,"auth-domain-config-required");const Ot=s.emulator?_emulatorUrl(s,EMULATED_IFRAME_PATH):`https://${Nt.config.authDomain}/${IFRAME_PATH}`,en={apiKey:s.apiKey,appName:Nt.name,v:SDK_VERSION$1},tn=EID_FROM_APIHOST.get(Nt.config.apiHost);tn&&(en.eid=tn);const nn=Nt._getFrameworks();return nn.length&&(en.fw=nn.join(",")),`${Ot}?${querystring(en).slice(1)}`}async function _openIframe(Nt){const s=await _loadGapi(Nt),Ot=_window().gapi;return _assert(Ot,Nt,"internal-error"),s.open({where:document.body,url:getIframeUrl(Nt),messageHandlersFilter:Ot.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:IFRAME_ATTRIBUTES,dontclear:!0},en=>new Promise(async(tn,nn)=>{await en.restyle({setHideOnLeave:!1});const rn=_createError(Nt,"network-request-failed"),on=_window().setTimeout(()=>{nn(rn)},PING_TIMEOUT.get());function sn(){_window().clearTimeout(on),tn(en)}en.ping(sn).then(sn,()=>{nn(rn)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BASE_POPUP_OPTIONS={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},DEFAULT_WIDTH=500,DEFAULT_HEIGHT=600,TARGET_BLANK="_blank",FIREFOX_EMPTY_URL="http://localhost";class AuthPopup{constructor(s){this.window=s,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function _open(Nt,s,Ot,en=DEFAULT_WIDTH,tn=DEFAULT_HEIGHT){const nn=Math.max((window.screen.availHeight-tn)/2,0).toString(),rn=Math.max((window.screen.availWidth-en)/2,0).toString();let on="";const sn=Object.assign(Object.assign({},BASE_POPUP_OPTIONS),{width:en.toString(),height:tn.toString(),top:nn,left:rn}),an=getUA().toLowerCase();Ot&&(on=_isChromeIOS(an)?TARGET_BLANK:Ot),_isFirefox(an)&&(s=s||FIREFOX_EMPTY_URL,sn.scrollbars="yes");const ln=Object.entries(sn).reduce((un,[dn,hn])=>`${un}${dn}=${hn},`,"");if(_isIOSStandalone(an)&&on!=="_self")return openAsNewWindowIOS(s||"",on),new AuthPopup(null);const cn=window.open(s||"",on,ln);_assert(cn,Nt,"popup-blocked");try{cn.focus()}catch{}return new AuthPopup(cn)}function openAsNewWindowIOS(Nt,s){const Ot=document.createElement("a");Ot.href=Nt,Ot.target=s;const en=document.createEvent("MouseEvent");en.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),Ot.dispatchEvent(en)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WIDGET_PATH="__/auth/handler",EMULATOR_WIDGET_PATH="emulator/auth/handler",FIREBASE_APP_CHECK_FRAGMENT_ID=encodeURIComponent("fac");async function _getRedirectUrl(Nt,s,Ot,en,tn,nn){_assert(Nt.config.authDomain,Nt,"auth-domain-config-required"),_assert(Nt.config.apiKey,Nt,"invalid-api-key");const rn={apiKey:Nt.config.apiKey,appName:Nt.name,authType:Ot,redirectUrl:en,v:SDK_VERSION$1,eventId:tn};if(s instanceof FederatedAuthProvider){s.setDefaultLanguage(Nt.languageCode),rn.providerId=s.providerId||"",isEmpty$1(s.getCustomParameters())||(rn.customParameters=JSON.stringify(s.getCustomParameters()));for(const[ln,cn]of Object.entries(nn||{}))rn[ln]=cn}if(s instanceof BaseOAuthProvider){const ln=s.getScopes().filter(cn=>cn!=="");ln.length>0&&(rn.scopes=ln.join(","))}Nt.tenantId&&(rn.tid=Nt.tenantId);const on=rn;for(const ln of Object.keys(on))on[ln]===void 0&&delete on[ln];const sn=await Nt._getAppCheckToken(),an=sn?`#${FIREBASE_APP_CHECK_FRAGMENT_ID}=${encodeURIComponent(sn)}`:"";return`${getHandlerBase(Nt)}?${querystring(on).slice(1)}${an}`}function getHandlerBase({config:Nt}){return Nt.emulator?_emulatorUrl(Nt,EMULATOR_WIDGET_PATH):`https://${Nt.authDomain}/${WIDGET_PATH}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WEB_STORAGE_SUPPORT_KEY="webStorageSupport";class BrowserPopupRedirectResolver{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=browserSessionPersistence,this._completeRedirectFn=_getRedirectResult,this._overrideRedirectResult=_overrideRedirectResult}async _openPopup(s,Ot,en,tn){var nn;debugAssert((nn=this.eventManagers[s._key()])===null||nn===void 0?void 0:nn.manager,"_initialize() not called before _openPopup()");const rn=await _getRedirectUrl(s,Ot,en,_getCurrentUrl(),tn);return _open(s,rn,_generateEventId())}async _openRedirect(s,Ot,en,tn){await this._originValidation(s);const nn=await _getRedirectUrl(s,Ot,en,_getCurrentUrl(),tn);return _setWindowLocation(nn),new Promise(()=>{})}_initialize(s){const Ot=s._key();if(this.eventManagers[Ot]){const{manager:tn,promise:nn}=this.eventManagers[Ot];return tn?Promise.resolve(tn):(debugAssert(nn,"If manager is not set, promise should be"),nn)}const en=this.initAndGetManager(s);return this.eventManagers[Ot]={promise:en},en.catch(()=>{delete this.eventManagers[Ot]}),en}async initAndGetManager(s){const Ot=await _openIframe(s),en=new AuthEventManager(s);return Ot.register("authEvent",tn=>(_assert(tn==null?void 0:tn.authEvent,s,"invalid-auth-event"),{status:en.onEvent(tn.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[s._key()]={manager:en},this.iframes[s._key()]=Ot,en}_isIframeWebStorageSupported(s,Ot){this.iframes[s._key()].send(WEB_STORAGE_SUPPORT_KEY,{type:WEB_STORAGE_SUPPORT_KEY},tn=>{var nn;const rn=(nn=tn==null?void 0:tn[0])===null||nn===void 0?void 0:nn[WEB_STORAGE_SUPPORT_KEY];rn!==void 0&&Ot(!!rn),_fail(s,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(s){const Ot=s._key();return this.originValidationPromises[Ot]||(this.originValidationPromises[Ot]=_validateOrigin(s)),this.originValidationPromises[Ot]}get _shouldInitProactively(){return _isMobileBrowser()||_isSafari()||_isIOS()}}const browserPopupRedirectResolver=BrowserPopupRedirectResolver;var name$2="@firebase/auth",version$3="1.6.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AuthInterop{constructor(s){this.auth=s,this.internalListeners=new Map}getUid(){var s;return this.assertAuthConfigured(),((s=this.auth.currentUser)===null||s===void 0?void 0:s.uid)||null}async getToken(s){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(s)}:null}addAuthTokenListener(s){if(this.assertAuthConfigured(),this.internalListeners.has(s))return;const Ot=this.auth.onIdTokenChanged(en=>{s((en==null?void 0:en.stsTokenManager.accessToken)||null)});this.internalListeners.set(s,Ot),this.updateProactiveRefresh()}removeAuthTokenListener(s){this.assertAuthConfigured();const Ot=this.internalListeners.get(s);Ot&&(this.internalListeners.delete(s),Ot(),this.updateProactiveRefresh())}assertAuthConfigured(){_assert(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getVersionForPlatform(Nt){switch(Nt){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function registerAuth(Nt){_registerComponent(new Component$1("auth",(s,{options:Ot})=>{const en=s.getProvider("app").getImmediate(),tn=s.getProvider("heartbeat"),nn=s.getProvider("app-check-internal"),{apiKey:rn,authDomain:on}=en.options;_assert(rn&&!rn.includes(":"),"invalid-api-key",{appName:en.name});const sn={apiKey:rn,authDomain:on,clientPlatform:Nt,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:_getClientVersion(Nt)},an=new AuthImpl(en,tn,nn,sn);return _initializeAuthInstance(an,Ot),an},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((s,Ot,en)=>{s.getProvider("auth-internal").initialize()})),_registerComponent(new Component$1("auth-internal",s=>{const Ot=_castAuth(s.getProvider("auth").getImmediate());return(en=>new AuthInterop(en))(Ot)},"PRIVATE").setInstantiationMode("EXPLICIT")),registerVersion(name$2,version$3,getVersionForPlatform(Nt)),registerVersion(name$2,version$3,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DEFAULT_ID_TOKEN_MAX_AGE=5*60,authIdTokenMaxAge=getExperimentalSetting("authIdTokenMaxAge")||DEFAULT_ID_TOKEN_MAX_AGE;let lastPostedIdToken=null;const mintCookieFactory=Nt=>async s=>{const Ot=s&&await s.getIdTokenResult(),en=Ot&&(new Date().getTime()-Date.parse(Ot.issuedAtTime))/1e3;if(en&&en>authIdTokenMaxAge)return;const tn=Ot==null?void 0:Ot.token;lastPostedIdToken!==tn&&(lastPostedIdToken=tn,await fetch(Nt,{method:tn?"POST":"DELETE",headers:tn?{Authorization:`Bearer ${tn}`}:{}}))};function getAuth(Nt=getApp()){const s=_getProvider(Nt,"auth");if(s.isInitialized())return s.getImmediate();const Ot=initializeAuth(Nt,{popupRedirectResolver:browserPopupRedirectResolver,persistence:[indexedDBLocalPersistence,browserLocalPersistence,browserSessionPersistence]}),en=getExperimentalSetting("authTokenSyncURL");if(en&&en.match(/^\/[^\/].*/)){const nn=mintCookieFactory(en);beforeAuthStateChanged(Ot,nn,()=>nn(Ot.currentUser)),onIdTokenChanged(Ot,rn=>nn(rn))}const tn=getDefaultEmulatorHost$1("auth");return tn&&connectAuthEmulator(Ot,`http://${tn}`),Ot}function getScriptParentElement(){var Nt,s;return(s=(Nt=document.getElementsByTagName("head"))===null||Nt===void 0?void 0:Nt[0])!==null&&s!==void 0?s:document}_setExternalJSProvider({loadJS(Nt){return new Promise((s,Ot)=>{const en=document.createElement("script");en.setAttribute("src",Nt),en.onload=s,en.onerror=tn=>{const nn=_createError("internal-error");nn.customData=tn,Ot(nn)},en.type="text/javascript",en.charset="UTF-8",getScriptParentElement().appendChild(en)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});registerAuth("Browser");var define_process_env_default$1={};const name$1="@firebase/database",version$2="1.0.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let SDK_VERSION="";function setSDKVersion(Nt){SDK_VERSION=Nt}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DOMStorageWrapper{constructor(s){this.domStorage_=s,this.prefix_="firebase:"}set(s,Ot){Ot==null?this.domStorage_.removeItem(this.prefixedName_(s)):this.domStorage_.setItem(this.prefixedName_(s),stringify(Ot))}get(s){const Ot=this.domStorage_.getItem(this.prefixedName_(s));return Ot==null?null:jsonEval(Ot)}remove(s){this.domStorage_.removeItem(this.prefixedName_(s))}prefixedName_(s){return this.prefix_+s}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MemoryStorage{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(s,Ot){Ot==null?delete this.cache_[s]:this.cache_[s]=Ot}get(s){return contains(this.cache_,s)?this.cache_[s]:null}remove(s){delete this.cache_[s]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const createStoragefor=function(Nt){try{if(typeof window<"u"&&typeof window[Nt]<"u"){const s=window[Nt];return s.setItem("firebase:sentinel","cache"),s.removeItem("firebase:sentinel"),new DOMStorageWrapper(s)}}catch{}return new MemoryStorage},PersistentStorage=createStoragefor("localStorage"),SessionStorage=createStoragefor("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const logClient=new Logger("@firebase/database"),LUIDGenerator=function(){let Nt=1;return function(){return Nt++}}(),sha1=function(Nt){const s=stringToByteArray(Nt),Ot=new Sha1;Ot.update(s);const en=Ot.digest();return base64$1.encodeByteArray(en)},buildLogMessage_=function(...Nt){let s="";for(let Ot=0;Ot<Nt.length;Ot++){const en=Nt[Ot];Array.isArray(en)||en&&typeof en=="object"&&typeof en.length=="number"?s+=buildLogMessage_.apply(null,en):typeof en=="object"?s+=stringify(en):s+=en,s+=" "}return s};let logger=null,firstLog_=!0;const enableLogging$1=function(Nt,s){assert(!s||Nt===!0||Nt===!1,"Can't turn on custom loggers persistently."),Nt===!0?(logClient.logLevel=LogLevel.VERBOSE,logger=logClient.log.bind(logClient),s&&SessionStorage.set("logging_enabled",!0)):typeof Nt=="function"?logger=Nt:(logger=null,SessionStorage.remove("logging_enabled"))},log=function(...Nt){if(firstLog_===!0&&(firstLog_=!1,logger===null&&SessionStorage.get("logging_enabled")===!0&&enableLogging$1(!0)),logger){const s=buildLogMessage_.apply(null,Nt);logger(s)}},logWrapper=function(Nt){return function(...s){log(Nt,...s)}},error=function(...Nt){const s="FIREBASE INTERNAL ERROR: "+buildLogMessage_(...Nt);logClient.error(s)},fatal=function(...Nt){const s=`FIREBASE FATAL ERROR: ${buildLogMessage_(...Nt)}`;throw logClient.error(s),new Error(s)},warn=function(...Nt){const s="FIREBASE WARNING: "+buildLogMessage_(...Nt);logClient.warn(s)},warnIfPageIsSecure=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&warn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},isInvalidJSONNumber=function(Nt){return typeof Nt=="number"&&(Nt!==Nt||Nt===Number.POSITIVE_INFINITY||Nt===Number.NEGATIVE_INFINITY)},executeWhenDOMReady=function(Nt){if(document.readyState==="complete")Nt();else{let s=!1;const Ot=function(){if(!document.body){setTimeout(Ot,Math.floor(10));return}s||(s=!0,Nt())};document.addEventListener?(document.addEventListener("DOMContentLoaded",Ot,!1),window.addEventListener("load",Ot,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&Ot()}),window.attachEvent("onload",Ot))}},MIN_NAME="[MIN_NAME]",MAX_NAME="[MAX_NAME]",nameCompare=function(Nt,s){if(Nt===s)return 0;if(Nt===MIN_NAME||s===MAX_NAME)return-1;if(s===MIN_NAME||Nt===MAX_NAME)return 1;{const Ot=tryParseInt(Nt),en=tryParseInt(s);return Ot!==null?en!==null?Ot-en===0?Nt.length-s.length:Ot-en:-1:en!==null?1:Nt<s?-1:1}},stringCompare=function(Nt,s){return Nt===s?0:Nt<s?-1:1},requireKey=function(Nt,s){if(s&&Nt in s)return s[Nt];throw new Error("Missing required key ("+Nt+") in object: "+stringify(s))},ObjectToUniqueKey=function(Nt){if(typeof Nt!="object"||Nt===null)return stringify(Nt);const s=[];for(const en in Nt)s.push(en);s.sort();let Ot="{";for(let en=0;en<s.length;en++)en!==0&&(Ot+=","),Ot+=stringify(s[en]),Ot+=":",Ot+=ObjectToUniqueKey(Nt[s[en]]);return Ot+="}",Ot},splitStringBySize=function(Nt,s){const Ot=Nt.length;if(Ot<=s)return[Nt];const en=[];for(let tn=0;tn<Ot;tn+=s)tn+s>Ot?en.push(Nt.substring(tn,Ot)):en.push(Nt.substring(tn,tn+s));return en};function each(Nt,s){for(const Ot in Nt)Nt.hasOwnProperty(Ot)&&s(Ot,Nt[Ot])}const doubleToIEEE754String=function(Nt){assert(!isInvalidJSONNumber(Nt),"Invalid JSON number");const s=11,Ot=52,en=(1<<s-1)-1;let tn,nn,rn,on,sn;Nt===0?(nn=0,rn=0,tn=1/Nt===-1/0?1:0):(tn=Nt<0,Nt=Math.abs(Nt),Nt>=Math.pow(2,1-en)?(on=Math.min(Math.floor(Math.log(Nt)/Math.LN2),en),nn=on+en,rn=Math.round(Nt*Math.pow(2,Ot-on)-Math.pow(2,Ot))):(nn=0,rn=Math.round(Nt/Math.pow(2,1-en-Ot))));const an=[];for(sn=Ot;sn;sn-=1)an.push(rn%2?1:0),rn=Math.floor(rn/2);for(sn=s;sn;sn-=1)an.push(nn%2?1:0),nn=Math.floor(nn/2);an.push(tn?1:0),an.reverse();const ln=an.join("");let cn="";for(sn=0;sn<64;sn+=8){let un=parseInt(ln.substr(sn,8),2).toString(16);un.length===1&&(un="0"+un),cn=cn+un}return cn.toLowerCase()},isChromeExtensionContentScript=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},isWindowsStoreApp=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function errorForServerCode(Nt,s){let Ot="Unknown Error";Nt==="too_big"?Ot="The data requested exceeds the maximum size that can be accessed with a single request.":Nt==="permission_denied"?Ot="Client doesn't have permission to access the desired data.":Nt==="unavailable"&&(Ot="The service is unavailable");const en=new Error(Nt+" at "+s._path.toString()+": "+Ot);return en.code=Nt.toUpperCase(),en}const INTEGER_REGEXP_=new RegExp("^-?(0*)\\d{1,10}$"),INTEGER_32_MIN=-2147483648,INTEGER_32_MAX=2147483647,tryParseInt=function(Nt){if(INTEGER_REGEXP_.test(Nt)){const s=Number(Nt);if(s>=INTEGER_32_MIN&&s<=INTEGER_32_MAX)return s}return null},exceptionGuard=function(Nt){try{Nt()}catch(s){setTimeout(()=>{const Ot=s.stack||"";throw warn("Exception was thrown by user callback.",Ot),s},Math.floor(0))}},beingCrawled=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},setTimeoutNonBlocking=function(Nt,s){const Ot=setTimeout(Nt,s);return typeof Ot=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(Ot):typeof Ot=="object"&&Ot.unref&&Ot.unref(),Ot};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AppCheckTokenProvider{constructor(s,Ot){this.appName_=s,this.appCheckProvider=Ot,this.appCheck=Ot==null?void 0:Ot.getImmediate({optional:!0}),this.appCheck||Ot==null||Ot.get().then(en=>this.appCheck=en)}getToken(s){return this.appCheck?this.appCheck.getToken(s):new Promise((Ot,en)=>{setTimeout(()=>{this.appCheck?this.getToken(s).then(Ot,en):Ot(null)},0)})}addTokenChangeListener(s){var Ot;(Ot=this.appCheckProvider)===null||Ot===void 0||Ot.get().then(en=>en.addTokenListener(s))}notifyForInvalidToken(){warn(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FirebaseAuthTokenProvider{constructor(s,Ot,en){this.appName_=s,this.firebaseOptions_=Ot,this.authProvider_=en,this.auth_=null,this.auth_=en.getImmediate({optional:!0}),this.auth_||en.onInit(tn=>this.auth_=tn)}getToken(s){return this.auth_?this.auth_.getToken(s).catch(Ot=>Ot&&Ot.code==="auth/token-not-initialized"?(log("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(Ot)):new Promise((Ot,en)=>{setTimeout(()=>{this.auth_?this.getToken(s).then(Ot,en):Ot(null)},0)})}addTokenChangeListener(s){this.auth_?this.auth_.addAuthTokenListener(s):this.authProvider_.get().then(Ot=>Ot.addAuthTokenListener(s))}removeTokenChangeListener(s){this.authProvider_.get().then(Ot=>Ot.removeAuthTokenListener(s))}notifyForInvalidToken(){let s='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?s+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?s+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':s+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',warn(s)}}class EmulatorTokenProvider{constructor(s){this.accessToken=s}getToken(s){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(s){s(this.accessToken)}removeTokenChangeListener(s){}notifyForInvalidToken(){}}EmulatorTokenProvider.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PROTOCOL_VERSION="5",VERSION_PARAM="v",TRANSPORT_SESSION_PARAM="s",REFERER_PARAM="r",FORGE_REF="f",FORGE_DOMAIN_RE=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,LAST_SESSION_PARAM="ls",APPLICATION_ID_PARAM="p",APP_CHECK_TOKEN_PARAM="ac",WEBSOCKET="websocket",LONG_POLLING="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RepoInfo{constructor(s,Ot,en,tn,nn=!1,rn="",on=!1,sn=!1){this.secure=Ot,this.namespace=en,this.webSocketOnly=tn,this.nodeAdmin=nn,this.persistenceKey=rn,this.includeNamespaceInQueryParams=on,this.isUsingEmulator=sn,this._host=s.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=PersistentStorage.get("host:"+s)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(s){s!==this.internalHost&&(this.internalHost=s,this.isCacheableHost()&&PersistentStorage.set("host:"+this._host,this.internalHost))}toString(){let s=this.toURLString();return this.persistenceKey&&(s+="<"+this.persistenceKey+">"),s}toURLString(){const s=this.secure?"https://":"http://",Ot=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${s}${this.host}/${Ot}`}}function repoInfoNeedsQueryParam(Nt){return Nt.host!==Nt.internalHost||Nt.isCustomHost()||Nt.includeNamespaceInQueryParams}function repoInfoConnectionURL(Nt,s,Ot){assert(typeof s=="string","typeof type must == string"),assert(typeof Ot=="object","typeof params must == object");let en;if(s===WEBSOCKET)en=(Nt.secure?"wss://":"ws://")+Nt.internalHost+"/.ws?";else if(s===LONG_POLLING)en=(Nt.secure?"https://":"http://")+Nt.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+s);repoInfoNeedsQueryParam(Nt)&&(Ot.ns=Nt.namespace);const tn=[];return each(Ot,(nn,rn)=>{tn.push(nn+"="+rn)}),en+tn.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class StatsCollection{constructor(){this.counters_={}}incrementCounter(s,Ot=1){contains(this.counters_,s)||(this.counters_[s]=0),this.counters_[s]+=Ot}get(){return deepCopy(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const collections={},reporters={};function statsManagerGetCollection(Nt){const s=Nt.toString();return collections[s]||(collections[s]=new StatsCollection),collections[s]}function statsManagerGetOrCreateReporter(Nt,s){const Ot=Nt.toString();return reporters[Ot]||(reporters[Ot]=s()),reporters[Ot]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PacketReceiver{constructor(s){this.onMessage_=s,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(s,Ot){this.closeAfterResponse=s,this.onClose=Ot,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(s,Ot){for(this.pendingResponses[s]=Ot;this.pendingResponses[this.currentResponseNum];){const en=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let tn=0;tn<en.length;++tn)en[tn]&&exceptionGuard(()=>{this.onMessage_(en[tn])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FIREBASE_LONGPOLL_START_PARAM="start",FIREBASE_LONGPOLL_CLOSE_COMMAND="close",FIREBASE_LONGPOLL_COMMAND_CB_NAME="pLPCommand",FIREBASE_LONGPOLL_DATA_CB_NAME="pRTLPCB",FIREBASE_LONGPOLL_ID_PARAM="id",FIREBASE_LONGPOLL_PW_PARAM="pw",FIREBASE_LONGPOLL_SERIAL_PARAM="ser",FIREBASE_LONGPOLL_CALLBACK_ID_PARAM="cb",FIREBASE_LONGPOLL_SEGMENT_NUM_PARAM="seg",FIREBASE_LONGPOLL_SEGMENTS_IN_PACKET="ts",FIREBASE_LONGPOLL_DATA_PARAM="d",FIREBASE_LONGPOLL_DISCONN_FRAME_REQUEST_PARAM="dframe",MAX_URL_DATA_SIZE=1870,SEG_HEADER_SIZE=30,MAX_PAYLOAD_SIZE=MAX_URL_DATA_SIZE-SEG_HEADER_SIZE,KEEPALIVE_REQUEST_INTERVAL=25e3,LP_CONNECT_TIMEOUT=3e4;class BrowserPollConnection{constructor(s,Ot,en,tn,nn,rn,on){this.connId=s,this.repoInfo=Ot,this.applicationId=en,this.appCheckToken=tn,this.authToken=nn,this.transportSessionId=rn,this.lastSessionId=on,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=logWrapper(s),this.stats_=statsManagerGetCollection(Ot),this.urlFn=sn=>(this.appCheckToken&&(sn[APP_CHECK_TOKEN_PARAM]=this.appCheckToken),repoInfoConnectionURL(Ot,LONG_POLLING,sn))}open(s,Ot){this.curSegmentNum=0,this.onDisconnect_=Ot,this.myPacketOrderer=new PacketReceiver(s),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(LP_CONNECT_TIMEOUT)),executeWhenDOMReady(()=>{if(this.isClosed_)return;this.scriptTagHolder=new FirebaseIFrameScriptHolder((...nn)=>{const[rn,on,sn,an,ln]=nn;if(this.incrementIncomingBytes_(nn),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,rn===FIREBASE_LONGPOLL_START_PARAM)this.id=on,this.password=sn;else if(rn===FIREBASE_LONGPOLL_CLOSE_COMMAND)on?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(on,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+rn)},(...nn)=>{const[rn,on]=nn;this.incrementIncomingBytes_(nn),this.myPacketOrderer.handleResponse(rn,on)},()=>{this.onClosed_()},this.urlFn);const en={};en[FIREBASE_LONGPOLL_START_PARAM]="t",en[FIREBASE_LONGPOLL_SERIAL_PARAM]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(en[FIREBASE_LONGPOLL_CALLBACK_ID_PARAM]=this.scriptTagHolder.uniqueCallbackIdentifier),en[VERSION_PARAM]=PROTOCOL_VERSION,this.transportSessionId&&(en[TRANSPORT_SESSION_PARAM]=this.transportSessionId),this.lastSessionId&&(en[LAST_SESSION_PARAM]=this.lastSessionId),this.applicationId&&(en[APPLICATION_ID_PARAM]=this.applicationId),this.appCheckToken&&(en[APP_CHECK_TOKEN_PARAM]=this.appCheckToken),typeof location<"u"&&location.hostname&&FORGE_DOMAIN_RE.test(location.hostname)&&(en[REFERER_PARAM]=FORGE_REF);const tn=this.urlFn(en);this.log_("Connecting via long-poll to "+tn),this.scriptTagHolder.addTag(tn,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){BrowserPollConnection.forceAllow_=!0}static forceDisallow(){BrowserPollConnection.forceDisallow_=!0}static isAvailable(){return BrowserPollConnection.forceAllow_?!0:!BrowserPollConnection.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!isChromeExtensionContentScript()&&!isWindowsStoreApp()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(s){const Ot=stringify(s);this.bytesSent+=Ot.length,this.stats_.incrementCounter("bytes_sent",Ot.length);const en=base64Encode$1(Ot),tn=splitStringBySize(en,MAX_PAYLOAD_SIZE);for(let nn=0;nn<tn.length;nn++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,tn.length,tn[nn]),this.curSegmentNum++}addDisconnectPingFrame(s,Ot){this.myDisconnFrame=document.createElement("iframe");const en={};en[FIREBASE_LONGPOLL_DISCONN_FRAME_REQUEST_PARAM]="t",en[FIREBASE_LONGPOLL_ID_PARAM]=s,en[FIREBASE_LONGPOLL_PW_PARAM]=Ot,this.myDisconnFrame.src=this.urlFn(en),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(s){const Ot=stringify(s).length;this.bytesReceived+=Ot,this.stats_.incrementCounter("bytes_received",Ot)}}class FirebaseIFrameScriptHolder{constructor(s,Ot,en,tn){this.onDisconnect=en,this.urlFn=tn,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=LUIDGenerator(),window[FIREBASE_LONGPOLL_COMMAND_CB_NAME+this.uniqueCallbackIdentifier]=s,window[FIREBASE_LONGPOLL_DATA_CB_NAME+this.uniqueCallbackIdentifier]=Ot,this.myIFrame=FirebaseIFrameScriptHolder.createIFrame_();let nn="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(nn='<script>document.domain="'+document.domain+'";<\/script>');const rn="<html><body>"+nn+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(rn),this.myIFrame.doc.close()}catch(on){log("frame writing exception"),on.stack&&log(on.stack),log(on)}}}static createIFrame_(){const s=document.createElement("iframe");if(s.style.display="none",document.body){document.body.appendChild(s);try{s.contentWindow.document||log("No IE domain setting required")}catch{const en=document.domain;s.src="javascript:void((function(){document.open();document.domain='"+en+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return s.contentDocument?s.doc=s.contentDocument:s.contentWindow?s.doc=s.contentWindow.document:s.document&&(s.doc=s.document),s}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const s=this.onDisconnect;s&&(this.onDisconnect=null,s())}startLongPoll(s,Ot){for(this.myID=s,this.myPW=Ot,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const s={};s[FIREBASE_LONGPOLL_ID_PARAM]=this.myID,s[FIREBASE_LONGPOLL_PW_PARAM]=this.myPW,s[FIREBASE_LONGPOLL_SERIAL_PARAM]=this.currentSerial;let Ot=this.urlFn(s),en="",tn=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+SEG_HEADER_SIZE+en.length<=MAX_URL_DATA_SIZE;){const rn=this.pendingSegs.shift();en=en+"&"+FIREBASE_LONGPOLL_SEGMENT_NUM_PARAM+tn+"="+rn.seg+"&"+FIREBASE_LONGPOLL_SEGMENTS_IN_PACKET+tn+"="+rn.ts+"&"+FIREBASE_LONGPOLL_DATA_PARAM+tn+"="+rn.d,tn++}return Ot=Ot+en,this.addLongPollTag_(Ot,this.currentSerial),!0}else return!1}enqueueSegment(s,Ot,en){this.pendingSegs.push({seg:s,ts:Ot,d:en}),this.alive&&this.newRequest_()}addLongPollTag_(s,Ot){this.outstandingRequests.add(Ot);const en=()=>{this.outstandingRequests.delete(Ot),this.newRequest_()},tn=setTimeout(en,Math.floor(KEEPALIVE_REQUEST_INTERVAL)),nn=()=>{clearTimeout(tn),en()};this.addTag(s,nn)}addTag(s,Ot){setTimeout(()=>{try{if(!this.sendNewPolls)return;const en=this.myIFrame.doc.createElement("script");en.type="text/javascript",en.async=!0,en.src=s,en.onload=en.onreadystatechange=function(){const tn=en.readyState;(!tn||tn==="loaded"||tn==="complete")&&(en.onload=en.onreadystatechange=null,en.parentNode&&en.parentNode.removeChild(en),Ot())},en.onerror=()=>{log("Long-poll script failed to load: "+s),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(en)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WEBSOCKET_MAX_FRAME_SIZE=16384,WEBSOCKET_KEEPALIVE_INTERVAL=45e3;let WebSocketImpl=null;typeof MozWebSocket<"u"?WebSocketImpl=MozWebSocket:typeof WebSocket<"u"&&(WebSocketImpl=WebSocket);class WebSocketConnection{constructor(s,Ot,en,tn,nn,rn,on){this.connId=s,this.applicationId=en,this.appCheckToken=tn,this.authToken=nn,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=logWrapper(this.connId),this.stats_=statsManagerGetCollection(Ot),this.connURL=WebSocketConnection.connectionURL_(Ot,rn,on,tn,en),this.nodeAdmin=Ot.nodeAdmin}static connectionURL_(s,Ot,en,tn,nn){const rn={};return rn[VERSION_PARAM]=PROTOCOL_VERSION,typeof location<"u"&&location.hostname&&FORGE_DOMAIN_RE.test(location.hostname)&&(rn[REFERER_PARAM]=FORGE_REF),Ot&&(rn[TRANSPORT_SESSION_PARAM]=Ot),en&&(rn[LAST_SESSION_PARAM]=en),tn&&(rn[APP_CHECK_TOKEN_PARAM]=tn),nn&&(rn[APPLICATION_ID_PARAM]=nn),repoInfoConnectionURL(s,WEBSOCKET,rn)}open(s,Ot){this.onDisconnect=Ot,this.onMessage=s,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,PersistentStorage.set("previous_websocket_failure",!0);try{let en;isNodeSdk(),this.mySock=new WebSocketImpl(this.connURL,[],en)}catch(en){this.log_("Error instantiating WebSocket.");const tn=en.message||en.data;tn&&this.log_(tn),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=en=>{this.handleIncomingFrame(en)},this.mySock.onerror=en=>{this.log_("WebSocket error.  Closing connection.");const tn=en.message||en.data;tn&&this.log_(tn),this.onClosed_()}}start(){}static forceDisallow(){WebSocketConnection.forceDisallow_=!0}static isAvailable(){let s=!1;if(typeof navigator<"u"&&navigator.userAgent){const Ot=/Android ([0-9]{0,}\.[0-9]{0,})/,en=navigator.userAgent.match(Ot);en&&en.length>1&&parseFloat(en[1])<4.4&&(s=!0)}return!s&&WebSocketImpl!==null&&!WebSocketConnection.forceDisallow_}static previouslyFailed(){return PersistentStorage.isInMemoryStorage||PersistentStorage.get("previous_websocket_failure")===!0}markConnectionHealthy(){PersistentStorage.remove("previous_websocket_failure")}appendFrame_(s){if(this.frames.push(s),this.frames.length===this.totalFrames){const Ot=this.frames.join("");this.frames=null;const en=jsonEval(Ot);this.onMessage(en)}}handleNewFrameCount_(s){this.totalFrames=s,this.frames=[]}extractFrameCount_(s){if(assert(this.frames===null,"We already have a frame buffer"),s.length<=6){const Ot=Number(s);if(!isNaN(Ot))return this.handleNewFrameCount_(Ot),null}return this.handleNewFrameCount_(1),s}handleIncomingFrame(s){if(this.mySock===null)return;const Ot=s.data;if(this.bytesReceived+=Ot.length,this.stats_.incrementCounter("bytes_received",Ot.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(Ot);else{const en=this.extractFrameCount_(Ot);en!==null&&this.appendFrame_(en)}}send(s){this.resetKeepAlive();const Ot=stringify(s);this.bytesSent+=Ot.length,this.stats_.incrementCounter("bytes_sent",Ot.length);const en=splitStringBySize(Ot,WEBSOCKET_MAX_FRAME_SIZE);en.length>1&&this.sendString_(String(en.length));for(let tn=0;tn<en.length;tn++)this.sendString_(en[tn])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(WEBSOCKET_KEEPALIVE_INTERVAL))}sendString_(s){try{this.mySock.send(s)}catch(Ot){this.log_("Exception thrown from WebSocket.send():",Ot.message||Ot.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}WebSocketConnection.responsesRequiredToBeHealthy=2;WebSocketConnection.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TransportManager{constructor(s){this.initTransports_(s)}static get ALL_TRANSPORTS(){return[BrowserPollConnection,WebSocketConnection]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(s){const Ot=WebSocketConnection&&WebSocketConnection.isAvailable();let en=Ot&&!WebSocketConnection.previouslyFailed();if(s.webSocketOnly&&(Ot||warn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),en=!0),en)this.transports_=[WebSocketConnection];else{const tn=this.transports_=[];for(const nn of TransportManager.ALL_TRANSPORTS)nn&&nn.isAvailable()&&tn.push(nn);TransportManager.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}TransportManager.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UPGRADE_TIMEOUT=6e4,DELAY_BEFORE_SENDING_EXTRA_REQUESTS=5e3,BYTES_SENT_HEALTHY_OVERRIDE=10*1024,BYTES_RECEIVED_HEALTHY_OVERRIDE=100*1024,MESSAGE_TYPE="t",MESSAGE_DATA="d",CONTROL_SHUTDOWN="s",CONTROL_RESET="r",CONTROL_ERROR="e",CONTROL_PONG="o",SWITCH_ACK="a",END_TRANSMISSION="n",PING="p",SERVER_HELLO="h";class Connection{constructor(s,Ot,en,tn,nn,rn,on,sn,an,ln){this.id=s,this.repoInfo_=Ot,this.applicationId_=en,this.appCheckToken_=tn,this.authToken_=nn,this.onMessage_=rn,this.onReady_=on,this.onDisconnect_=sn,this.onKill_=an,this.lastSessionId=ln,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=logWrapper("c:"+this.id+":"),this.transportManager_=new TransportManager(Ot),this.log_("Connection created"),this.start_()}start_(){const s=this.transportManager_.initialTransport();this.conn_=new s(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=s.responsesRequiredToBeHealthy||0;const Ot=this.connReceiver_(this.conn_),en=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(Ot,en)},Math.floor(0));const tn=s.healthyTimeout||0;tn>0&&(this.healthyTimeout_=setTimeoutNonBlocking(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>BYTES_RECEIVED_HEALTHY_OVERRIDE?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>BYTES_SENT_HEALTHY_OVERRIDE?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(tn)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(s){return Ot=>{s===this.conn_?this.onConnectionLost_(Ot):s===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(s){return Ot=>{this.state_!==2&&(s===this.rx_?this.onPrimaryMessageReceived_(Ot):s===this.secondaryConn_?this.onSecondaryMessageReceived_(Ot):this.log_("message on old connection"))}}sendRequest(s){const Ot={t:"d",d:s};this.sendData_(Ot)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(s){if(MESSAGE_TYPE in s){const Ot=s[MESSAGE_TYPE];Ot===SWITCH_ACK?this.upgradeIfSecondaryHealthy_():Ot===CONTROL_RESET?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):Ot===CONTROL_PONG&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(s){const Ot=requireKey("t",s),en=requireKey("d",s);if(Ot==="c")this.onSecondaryControl_(en);else if(Ot==="d")this.pendingDataMessages.push(en);else throw new Error("Unknown protocol layer: "+Ot)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:PING,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:SWITCH_ACK,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:END_TRANSMISSION,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(s){const Ot=requireKey("t",s),en=requireKey("d",s);Ot==="c"?this.onControl_(en):Ot==="d"&&this.onDataMessage_(en)}onDataMessage_(s){this.onPrimaryResponse_(),this.onMessage_(s)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(s){const Ot=requireKey(MESSAGE_TYPE,s);if(MESSAGE_DATA in s){const en=s[MESSAGE_DATA];if(Ot===SERVER_HELLO){const tn=Object.assign({},en);this.repoInfo_.isUsingEmulator&&(tn.h=this.repoInfo_.host),this.onHandshake_(tn)}else if(Ot===END_TRANSMISSION){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let tn=0;tn<this.pendingDataMessages.length;++tn)this.onDataMessage_(this.pendingDataMessages[tn]);this.pendingDataMessages=[],this.tryCleanupConnection()}else Ot===CONTROL_SHUTDOWN?this.onConnectionShutdown_(en):Ot===CONTROL_RESET?this.onReset_(en):Ot===CONTROL_ERROR?error("Server Error: "+en):Ot===CONTROL_PONG?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):error("Unknown control packet command: "+Ot)}}onHandshake_(s){const Ot=s.ts,en=s.v,tn=s.h;this.sessionId=s.s,this.repoInfo_.host=tn,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,Ot),PROTOCOL_VERSION!==en&&warn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const s=this.transportManager_.upgradeTransport();s&&this.startUpgrade_(s)}startUpgrade_(s){this.secondaryConn_=new s(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=s.responsesRequiredToBeHealthy||0;const Ot=this.connReceiver_(this.secondaryConn_),en=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(Ot,en),setTimeoutNonBlocking(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(UPGRADE_TIMEOUT))}onReset_(s){this.log_("Reset packet received.  New host: "+s),this.repoInfo_.host=s,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(s,Ot){this.log_("Realtime connection established."),this.conn_=s,this.state_=1,this.onReady_&&(this.onReady_(Ot,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):setTimeoutNonBlocking(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(DELAY_BEFORE_SENDING_EXTRA_REQUESTS))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:PING,d:{}}}))}onSecondaryConnectionLost_(){const s=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===s||this.rx_===s)&&this.close()}onConnectionLost_(s){this.conn_=null,!s&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(PersistentStorage.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(s){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(s),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(s){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(s)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ServerActions{put(s,Ot,en,tn){}merge(s,Ot,en,tn){}refreshAuthToken(s){}refreshAppCheckToken(s){}onDisconnectPut(s,Ot,en){}onDisconnectMerge(s,Ot,en){}onDisconnectCancel(s,Ot){}reportStats(s){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EventEmitter{constructor(s){this.allowedEvents_=s,this.listeners_={},assert(Array.isArray(s)&&s.length>0,"Requires a non-empty array")}trigger(s,...Ot){if(Array.isArray(this.listeners_[s])){const en=[...this.listeners_[s]];for(let tn=0;tn<en.length;tn++)en[tn].callback.apply(en[tn].context,Ot)}}on(s,Ot,en){this.validateEventType_(s),this.listeners_[s]=this.listeners_[s]||[],this.listeners_[s].push({callback:Ot,context:en});const tn=this.getInitialEvent(s);tn&&Ot.apply(en,tn)}off(s,Ot,en){this.validateEventType_(s);const tn=this.listeners_[s]||[];for(let nn=0;nn<tn.length;nn++)if(tn[nn].callback===Ot&&(!en||en===tn[nn].context)){tn.splice(nn,1);return}}validateEventType_(s){assert(this.allowedEvents_.find(Ot=>Ot===s),"Unknown event: "+s)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OnlineMonitor extends EventEmitter{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!isMobileCordova()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new OnlineMonitor}getInitialEvent(s){return assert(s==="online","Unknown event type: "+s),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MAX_PATH_DEPTH=32,MAX_PATH_LENGTH_BYTES=768;class Path{constructor(s,Ot){if(Ot===void 0){this.pieces_=s.split("/");let en=0;for(let tn=0;tn<this.pieces_.length;tn++)this.pieces_[tn].length>0&&(this.pieces_[en]=this.pieces_[tn],en++);this.pieces_.length=en,this.pieceNum_=0}else this.pieces_=s,this.pieceNum_=Ot}toString(){let s="";for(let Ot=this.pieceNum_;Ot<this.pieces_.length;Ot++)this.pieces_[Ot]!==""&&(s+="/"+this.pieces_[Ot]);return s||"/"}}function newEmptyPath(){return new Path("")}function pathGetFront(Nt){return Nt.pieceNum_>=Nt.pieces_.length?null:Nt.pieces_[Nt.pieceNum_]}function pathGetLength(Nt){return Nt.pieces_.length-Nt.pieceNum_}function pathPopFront(Nt){let s=Nt.pieceNum_;return s<Nt.pieces_.length&&s++,new Path(Nt.pieces_,s)}function pathGetBack(Nt){return Nt.pieceNum_<Nt.pieces_.length?Nt.pieces_[Nt.pieces_.length-1]:null}function pathToUrlEncodedString(Nt){let s="";for(let Ot=Nt.pieceNum_;Ot<Nt.pieces_.length;Ot++)Nt.pieces_[Ot]!==""&&(s+="/"+encodeURIComponent(String(Nt.pieces_[Ot])));return s||"/"}function pathSlice(Nt,s=0){return Nt.pieces_.slice(Nt.pieceNum_+s)}function pathParent(Nt){if(Nt.pieceNum_>=Nt.pieces_.length)return null;const s=[];for(let Ot=Nt.pieceNum_;Ot<Nt.pieces_.length-1;Ot++)s.push(Nt.pieces_[Ot]);return new Path(s,0)}function pathChild(Nt,s){const Ot=[];for(let en=Nt.pieceNum_;en<Nt.pieces_.length;en++)Ot.push(Nt.pieces_[en]);if(s instanceof Path)for(let en=s.pieceNum_;en<s.pieces_.length;en++)Ot.push(s.pieces_[en]);else{const en=s.split("/");for(let tn=0;tn<en.length;tn++)en[tn].length>0&&Ot.push(en[tn])}return new Path(Ot,0)}function pathIsEmpty(Nt){return Nt.pieceNum_>=Nt.pieces_.length}function newRelativePath(Nt,s){const Ot=pathGetFront(Nt),en=pathGetFront(s);if(Ot===null)return s;if(Ot===en)return newRelativePath(pathPopFront(Nt),pathPopFront(s));throw new Error("INTERNAL ERROR: innerPath ("+s+") is not within outerPath ("+Nt+")")}function pathEquals(Nt,s){if(pathGetLength(Nt)!==pathGetLength(s))return!1;for(let Ot=Nt.pieceNum_,en=s.pieceNum_;Ot<=Nt.pieces_.length;Ot++,en++)if(Nt.pieces_[Ot]!==s.pieces_[en])return!1;return!0}function pathContains(Nt,s){let Ot=Nt.pieceNum_,en=s.pieceNum_;if(pathGetLength(Nt)>pathGetLength(s))return!1;for(;Ot<Nt.pieces_.length;){if(Nt.pieces_[Ot]!==s.pieces_[en])return!1;++Ot,++en}return!0}class ValidationPath{constructor(s,Ot){this.errorPrefix_=Ot,this.parts_=pathSlice(s,0),this.byteLength_=Math.max(1,this.parts_.length);for(let en=0;en<this.parts_.length;en++)this.byteLength_+=stringLength(this.parts_[en]);validationPathCheckValid(this)}}function validationPathPush(Nt,s){Nt.parts_.length>0&&(Nt.byteLength_+=1),Nt.parts_.push(s),Nt.byteLength_+=stringLength(s),validationPathCheckValid(Nt)}function validationPathPop(Nt){const s=Nt.parts_.pop();Nt.byteLength_-=stringLength(s),Nt.parts_.length>0&&(Nt.byteLength_-=1)}function validationPathCheckValid(Nt){if(Nt.byteLength_>MAX_PATH_LENGTH_BYTES)throw new Error(Nt.errorPrefix_+"has a key path longer than "+MAX_PATH_LENGTH_BYTES+" bytes ("+Nt.byteLength_+").");if(Nt.parts_.length>MAX_PATH_DEPTH)throw new Error(Nt.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+MAX_PATH_DEPTH+") or object contains a cycle "+validationPathToErrorString(Nt))}function validationPathToErrorString(Nt){return Nt.parts_.length===0?"":"in property '"+Nt.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VisibilityMonitor extends EventEmitter{constructor(){super(["visible"]);let s,Ot;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(Ot="visibilitychange",s="hidden"):typeof document.mozHidden<"u"?(Ot="mozvisibilitychange",s="mozHidden"):typeof document.msHidden<"u"?(Ot="msvisibilitychange",s="msHidden"):typeof document.webkitHidden<"u"&&(Ot="webkitvisibilitychange",s="webkitHidden")),this.visible_=!0,Ot&&document.addEventListener(Ot,()=>{const en=!document[s];en!==this.visible_&&(this.visible_=en,this.trigger("visible",en))},!1)}static getInstance(){return new VisibilityMonitor}getInitialEvent(s){return assert(s==="visible","Unknown event type: "+s),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RECONNECT_MIN_DELAY=1e3,RECONNECT_MAX_DELAY_DEFAULT=60*5*1e3,RECONNECT_MAX_DELAY_FOR_ADMINS=30*1e3,RECONNECT_DELAY_MULTIPLIER=1.3,RECONNECT_DELAY_RESET_TIMEOUT=3e4,SERVER_KILL_INTERRUPT_REASON="server_kill",INVALID_TOKEN_THRESHOLD=3;class PersistentConnection extends ServerActions{constructor(s,Ot,en,tn,nn,rn,on,sn){if(super(),this.repoInfo_=s,this.applicationId_=Ot,this.onDataUpdate_=en,this.onConnectStatus_=tn,this.onServerInfoUpdate_=nn,this.authTokenProvider_=rn,this.appCheckTokenProvider_=on,this.authOverride_=sn,this.id=PersistentConnection.nextPersistentConnectionId_++,this.log_=logWrapper("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=RECONNECT_MIN_DELAY,this.maxReconnectDelay_=RECONNECT_MAX_DELAY_DEFAULT,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,sn&&!isNodeSdk())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");VisibilityMonitor.getInstance().on("visible",this.onVisible_,this),s.host.indexOf("fblocal")===-1&&OnlineMonitor.getInstance().on("online",this.onOnline_,this)}sendRequest(s,Ot,en){const tn=++this.requestNumber_,nn={r:tn,a:s,b:Ot};this.log_(stringify(nn)),assert(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(nn),en&&(this.requestCBHash_[tn]=en)}get(s){this.initConnection_();const Ot=new Deferred,tn={action:"g",request:{p:s._path.toString(),q:s._queryObject},onComplete:rn=>{const on=rn.d;rn.s==="ok"?Ot.resolve(on):Ot.reject(on)}};this.outstandingGets_.push(tn),this.outstandingGetCount_++;const nn=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(nn),Ot.promise}listen(s,Ot,en,tn){this.initConnection_();const nn=s._queryIdentifier,rn=s._path.toString();this.log_("Listen called for "+rn+" "+nn),this.listens.has(rn)||this.listens.set(rn,new Map),assert(s._queryParams.isDefault()||!s._queryParams.loadsAllData(),"listen() called for non-default but complete query"),assert(!this.listens.get(rn).has(nn),"listen() called twice for same path/queryId.");const on={onComplete:tn,hashFn:Ot,query:s,tag:en};this.listens.get(rn).set(nn,on),this.connected_&&this.sendListen_(on)}sendGet_(s){const Ot=this.outstandingGets_[s];this.sendRequest("g",Ot.request,en=>{delete this.outstandingGets_[s],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),Ot.onComplete&&Ot.onComplete(en)})}sendListen_(s){const Ot=s.query,en=Ot._path.toString(),tn=Ot._queryIdentifier;this.log_("Listen on "+en+" for "+tn);const nn={p:en},rn="q";s.tag&&(nn.q=Ot._queryObject,nn.t=s.tag),nn.h=s.hashFn(),this.sendRequest(rn,nn,on=>{const sn=on.d,an=on.s;PersistentConnection.warnOnListenWarnings_(sn,Ot),(this.listens.get(en)&&this.listens.get(en).get(tn))===s&&(this.log_("listen response",on),an!=="ok"&&this.removeListen_(en,tn),s.onComplete&&s.onComplete(an,sn))})}static warnOnListenWarnings_(s,Ot){if(s&&typeof s=="object"&&contains(s,"w")){const en=safeGet(s,"w");if(Array.isArray(en)&&~en.indexOf("no_index")){const tn='".indexOn": "'+Ot._queryParams.getIndex().toString()+'"',nn=Ot._path.toString();warn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${tn} at ${nn} to your security rules for better performance.`)}}}refreshAuthToken(s){this.authToken_=s,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(s)}reduceReconnectDelayIfAdminCredential_(s){(s&&s.length===40||isAdmin(s))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=RECONNECT_MAX_DELAY_FOR_ADMINS)}refreshAppCheckToken(s){this.appCheckToken_=s,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const s=this.authToken_,Ot=isValidFormat(s)?"auth":"gauth",en={cred:s};this.authOverride_===null?en.noauth=!0:typeof this.authOverride_=="object"&&(en.authvar=this.authOverride_),this.sendRequest(Ot,en,tn=>{const nn=tn.s,rn=tn.d||"error";this.authToken_===s&&(nn==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(nn,rn))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},s=>{const Ot=s.s,en=s.d||"error";Ot==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(Ot,en)})}unlisten(s,Ot){const en=s._path.toString(),tn=s._queryIdentifier;this.log_("Unlisten called for "+en+" "+tn),assert(s._queryParams.isDefault()||!s._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(en,tn)&&this.connected_&&this.sendUnlisten_(en,tn,s._queryObject,Ot)}sendUnlisten_(s,Ot,en,tn){this.log_("Unlisten on "+s+" for "+Ot);const nn={p:s},rn="n";tn&&(nn.q=en,nn.t=tn),this.sendRequest(rn,nn)}onDisconnectPut(s,Ot,en){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",s,Ot,en):this.onDisconnectRequestQueue_.push({pathString:s,action:"o",data:Ot,onComplete:en})}onDisconnectMerge(s,Ot,en){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",s,Ot,en):this.onDisconnectRequestQueue_.push({pathString:s,action:"om",data:Ot,onComplete:en})}onDisconnectCancel(s,Ot){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",s,null,Ot):this.onDisconnectRequestQueue_.push({pathString:s,action:"oc",data:null,onComplete:Ot})}sendOnDisconnect_(s,Ot,en,tn){const nn={p:Ot,d:en};this.log_("onDisconnect "+s,nn),this.sendRequest(s,nn,rn=>{tn&&setTimeout(()=>{tn(rn.s,rn.d)},Math.floor(0))})}put(s,Ot,en,tn){this.putInternal("p",s,Ot,en,tn)}merge(s,Ot,en,tn){this.putInternal("m",s,Ot,en,tn)}putInternal(s,Ot,en,tn,nn){this.initConnection_();const rn={p:Ot,d:en};nn!==void 0&&(rn.h=nn),this.outstandingPuts_.push({action:s,request:rn,onComplete:tn}),this.outstandingPutCount_++;const on=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(on):this.log_("Buffering put: "+Ot)}sendPut_(s){const Ot=this.outstandingPuts_[s].action,en=this.outstandingPuts_[s].request,tn=this.outstandingPuts_[s].onComplete;this.outstandingPuts_[s].queued=this.connected_,this.sendRequest(Ot,en,nn=>{this.log_(Ot+" response",nn),delete this.outstandingPuts_[s],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),tn&&tn(nn.s,nn.d)})}reportStats(s){if(this.connected_){const Ot={c:s};this.log_("reportStats",Ot),this.sendRequest("s",Ot,en=>{if(en.s!=="ok"){const nn=en.d;this.log_("reportStats","Error sending stats: "+nn)}})}}onDataMessage_(s){if("r"in s){this.log_("from server: "+stringify(s));const Ot=s.r,en=this.requestCBHash_[Ot];en&&(delete this.requestCBHash_[Ot],en(s.b))}else{if("error"in s)throw"A server-side error has occurred: "+s.error;"a"in s&&this.onDataPush_(s.a,s.b)}}onDataPush_(s,Ot){this.log_("handleServerMessage",s,Ot),s==="d"?this.onDataUpdate_(Ot.p,Ot.d,!1,Ot.t):s==="m"?this.onDataUpdate_(Ot.p,Ot.d,!0,Ot.t):s==="c"?this.onListenRevoked_(Ot.p,Ot.q):s==="ac"?this.onAuthRevoked_(Ot.s,Ot.d):s==="apc"?this.onAppCheckRevoked_(Ot.s,Ot.d):s==="sd"?this.onSecurityDebugPacket_(Ot):error("Unrecognized action received from server: "+stringify(s)+`
Are you using the latest client?`)}onReady_(s,Ot){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(s),this.lastSessionId=Ot,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(s){assert(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(s))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(s){s&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=RECONNECT_MIN_DELAY,this.realtime_||this.scheduleConnect_(0)),this.visible_=s}onOnline_(s){s?(this.log_("Browser went online."),this.reconnectDelay_=RECONNECT_MIN_DELAY,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>RECONNECT_DELAY_RESET_TIMEOUT&&(this.reconnectDelay_=RECONNECT_MIN_DELAY),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const s=new Date().getTime()-this.lastConnectionAttemptTime_;let Ot=Math.max(0,this.reconnectDelay_-s);Ot=Math.random()*Ot,this.log_("Trying to reconnect in "+Ot+"ms"),this.scheduleConnect_(Ot),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*RECONNECT_DELAY_MULTIPLIER)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const s=this.onDataMessage_.bind(this),Ot=this.onReady_.bind(this),en=this.onRealtimeDisconnect_.bind(this),tn=this.id+":"+PersistentConnection.nextConnectionId_++,nn=this.lastSessionId;let rn=!1,on=null;const sn=function(){on?on.close():(rn=!0,en())},an=function(cn){assert(on,"sendRequest call when we're not connected not allowed."),on.sendRequest(cn)};this.realtime_={close:sn,sendRequest:an};const ln=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[cn,un]=await Promise.all([this.authTokenProvider_.getToken(ln),this.appCheckTokenProvider_.getToken(ln)]);rn?log("getToken() completed but was canceled"):(log("getToken() completed. Creating connection."),this.authToken_=cn&&cn.accessToken,this.appCheckToken_=un&&un.token,on=new Connection(tn,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,s,Ot,en,dn=>{warn(dn+" ("+this.repoInfo_.toString()+")"),this.interrupt(SERVER_KILL_INTERRUPT_REASON)},nn))}catch(cn){this.log_("Failed to get token: "+cn),rn||(this.repoInfo_.nodeAdmin&&warn(cn),sn())}}}interrupt(s){log("Interrupting connection for reason: "+s),this.interruptReasons_[s]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(s){log("Resuming connection for reason: "+s),delete this.interruptReasons_[s],isEmpty$1(this.interruptReasons_)&&(this.reconnectDelay_=RECONNECT_MIN_DELAY,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(s){const Ot=s-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:Ot})}cancelSentTransactions_(){for(let s=0;s<this.outstandingPuts_.length;s++){const Ot=this.outstandingPuts_[s];Ot&&"h"in Ot.request&&Ot.queued&&(Ot.onComplete&&Ot.onComplete("disconnect"),delete this.outstandingPuts_[s],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(s,Ot){let en;Ot?en=Ot.map(nn=>ObjectToUniqueKey(nn)).join("$"):en="default";const tn=this.removeListen_(s,en);tn&&tn.onComplete&&tn.onComplete("permission_denied")}removeListen_(s,Ot){const en=new Path(s).toString();let tn;if(this.listens.has(en)){const nn=this.listens.get(en);tn=nn.get(Ot),nn.delete(Ot),nn.size===0&&this.listens.delete(en)}else tn=void 0;return tn}onAuthRevoked_(s,Ot){log("Auth token revoked: "+s+"/"+Ot),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(s==="invalid_token"||s==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=INVALID_TOKEN_THRESHOLD&&(this.reconnectDelay_=RECONNECT_MAX_DELAY_FOR_ADMINS,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(s,Ot){log("App check token revoked: "+s+"/"+Ot),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(s==="invalid_token"||s==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=INVALID_TOKEN_THRESHOLD&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(s){this.securityDebugCallback_?this.securityDebugCallback_(s):"msg"in s&&console.log("FIREBASE: "+s.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const s of this.listens.values())for(const Ot of s.values())this.sendListen_(Ot);for(let s=0;s<this.outstandingPuts_.length;s++)this.outstandingPuts_[s]&&this.sendPut_(s);for(;this.onDisconnectRequestQueue_.length;){const s=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(s.action,s.pathString,s.data,s.onComplete)}for(let s=0;s<this.outstandingGets_.length;s++)this.outstandingGets_[s]&&this.sendGet_(s)}sendConnectStats_(){const s={};let Ot="js";s["sdk."+Ot+"."+SDK_VERSION.replace(/\./g,"-")]=1,isMobileCordova()?s["framework.cordova"]=1:isReactNative()&&(s["framework.reactnative"]=1),this.reportStats(s)}shouldReconnect_(){const s=OnlineMonitor.getInstance().currentlyOnline();return isEmpty$1(this.interruptReasons_)&&s}}PersistentConnection.nextPersistentConnectionId_=0;PersistentConnection.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NamedNode{constructor(s,Ot){this.name=s,this.node=Ot}static Wrap(s,Ot){return new NamedNode(s,Ot)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Index{getCompare(){return this.compare.bind(this)}indexedValueChanged(s,Ot){const en=new NamedNode(MIN_NAME,s),tn=new NamedNode(MIN_NAME,Ot);return this.compare(en,tn)!==0}minPost(){return NamedNode.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let __EMPTY_NODE;class KeyIndex extends Index{static get __EMPTY_NODE(){return __EMPTY_NODE}static set __EMPTY_NODE(s){__EMPTY_NODE=s}compare(s,Ot){return nameCompare(s.name,Ot.name)}isDefinedOn(s){throw assertionError("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(s,Ot){return!1}minPost(){return NamedNode.MIN}maxPost(){return new NamedNode(MAX_NAME,__EMPTY_NODE)}makePost(s,Ot){return assert(typeof s=="string","KeyIndex indexValue must always be a string."),new NamedNode(s,__EMPTY_NODE)}toString(){return".key"}}const KEY_INDEX=new KeyIndex;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SortedMapIterator{constructor(s,Ot,en,tn,nn=null){this.isReverse_=tn,this.resultGenerator_=nn,this.nodeStack_=[];let rn=1;for(;!s.isEmpty();)if(s=s,rn=Ot?en(s.key,Ot):1,tn&&(rn*=-1),rn<0)this.isReverse_?s=s.left:s=s.right;else if(rn===0){this.nodeStack_.push(s);break}else this.nodeStack_.push(s),this.isReverse_?s=s.right:s=s.left}getNext(){if(this.nodeStack_.length===0)return null;let s=this.nodeStack_.pop(),Ot;if(this.resultGenerator_?Ot=this.resultGenerator_(s.key,s.value):Ot={key:s.key,value:s.value},this.isReverse_)for(s=s.left;!s.isEmpty();)this.nodeStack_.push(s),s=s.right;else for(s=s.right;!s.isEmpty();)this.nodeStack_.push(s),s=s.left;return Ot}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const s=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(s.key,s.value):{key:s.key,value:s.value}}}class LLRBNode{constructor(s,Ot,en,tn,nn){this.key=s,this.value=Ot,this.color=en??LLRBNode.RED,this.left=tn??SortedMap.EMPTY_NODE,this.right=nn??SortedMap.EMPTY_NODE}copy(s,Ot,en,tn,nn){return new LLRBNode(s??this.key,Ot??this.value,en??this.color,tn??this.left,nn??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(s){return this.left.inorderTraversal(s)||!!s(this.key,this.value)||this.right.inorderTraversal(s)}reverseTraversal(s){return this.right.reverseTraversal(s)||s(this.key,this.value)||this.left.reverseTraversal(s)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(s,Ot,en){let tn=this;const nn=en(s,tn.key);return nn<0?tn=tn.copy(null,null,null,tn.left.insert(s,Ot,en),null):nn===0?tn=tn.copy(null,Ot,null,null,null):tn=tn.copy(null,null,null,null,tn.right.insert(s,Ot,en)),tn.fixUp_()}removeMin_(){if(this.left.isEmpty())return SortedMap.EMPTY_NODE;let s=this;return!s.left.isRed_()&&!s.left.left.isRed_()&&(s=s.moveRedLeft_()),s=s.copy(null,null,null,s.left.removeMin_(),null),s.fixUp_()}remove(s,Ot){let en,tn;if(en=this,Ot(s,en.key)<0)!en.left.isEmpty()&&!en.left.isRed_()&&!en.left.left.isRed_()&&(en=en.moveRedLeft_()),en=en.copy(null,null,null,en.left.remove(s,Ot),null);else{if(en.left.isRed_()&&(en=en.rotateRight_()),!en.right.isEmpty()&&!en.right.isRed_()&&!en.right.left.isRed_()&&(en=en.moveRedRight_()),Ot(s,en.key)===0){if(en.right.isEmpty())return SortedMap.EMPTY_NODE;tn=en.right.min_(),en=en.copy(tn.key,tn.value,null,null,en.right.removeMin_())}en=en.copy(null,null,null,null,en.right.remove(s,Ot))}return en.fixUp_()}isRed_(){return this.color}fixUp_(){let s=this;return s.right.isRed_()&&!s.left.isRed_()&&(s=s.rotateLeft_()),s.left.isRed_()&&s.left.left.isRed_()&&(s=s.rotateRight_()),s.left.isRed_()&&s.right.isRed_()&&(s=s.colorFlip_()),s}moveRedLeft_(){let s=this.colorFlip_();return s.right.left.isRed_()&&(s=s.copy(null,null,null,null,s.right.rotateRight_()),s=s.rotateLeft_(),s=s.colorFlip_()),s}moveRedRight_(){let s=this.colorFlip_();return s.left.left.isRed_()&&(s=s.rotateRight_(),s=s.colorFlip_()),s}rotateLeft_(){const s=this.copy(null,null,LLRBNode.RED,null,this.right.left);return this.right.copy(null,null,this.color,s,null)}rotateRight_(){const s=this.copy(null,null,LLRBNode.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,s)}colorFlip_(){const s=this.left.copy(null,null,!this.left.color,null,null),Ot=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,s,Ot)}checkMaxDepth_(){const s=this.check_();return Math.pow(2,s)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const s=this.left.check_();if(s!==this.right.check_())throw new Error("Black depths differ");return s+(this.isRed_()?0:1)}}LLRBNode.RED=!0;LLRBNode.BLACK=!1;class LLRBEmptyNode{copy(s,Ot,en,tn,nn){return this}insert(s,Ot,en){return new LLRBNode(s,Ot,null)}remove(s,Ot){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(s){return!1}reverseTraversal(s){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class SortedMap{constructor(s,Ot=SortedMap.EMPTY_NODE){this.comparator_=s,this.root_=Ot}insert(s,Ot){return new SortedMap(this.comparator_,this.root_.insert(s,Ot,this.comparator_).copy(null,null,LLRBNode.BLACK,null,null))}remove(s){return new SortedMap(this.comparator_,this.root_.remove(s,this.comparator_).copy(null,null,LLRBNode.BLACK,null,null))}get(s){let Ot,en=this.root_;for(;!en.isEmpty();){if(Ot=this.comparator_(s,en.key),Ot===0)return en.value;Ot<0?en=en.left:Ot>0&&(en=en.right)}return null}getPredecessorKey(s){let Ot,en=this.root_,tn=null;for(;!en.isEmpty();)if(Ot=this.comparator_(s,en.key),Ot===0){if(en.left.isEmpty())return tn?tn.key:null;for(en=en.left;!en.right.isEmpty();)en=en.right;return en.key}else Ot<0?en=en.left:Ot>0&&(tn=en,en=en.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(s){return this.root_.inorderTraversal(s)}reverseTraversal(s){return this.root_.reverseTraversal(s)}getIterator(s){return new SortedMapIterator(this.root_,null,this.comparator_,!1,s)}getIteratorFrom(s,Ot){return new SortedMapIterator(this.root_,s,this.comparator_,!1,Ot)}getReverseIteratorFrom(s,Ot){return new SortedMapIterator(this.root_,s,this.comparator_,!0,Ot)}getReverseIterator(s){return new SortedMapIterator(this.root_,null,this.comparator_,!0,s)}}SortedMap.EMPTY_NODE=new LLRBEmptyNode;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NAME_ONLY_COMPARATOR(Nt,s){return nameCompare(Nt.name,s.name)}function NAME_COMPARATOR(Nt,s){return nameCompare(Nt,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let MAX_NODE$2;function setMaxNode$1(Nt){MAX_NODE$2=Nt}const priorityHashText=function(Nt){return typeof Nt=="number"?"number:"+doubleToIEEE754String(Nt):"string:"+Nt},validatePriorityNode=function(Nt){if(Nt.isLeafNode()){const s=Nt.val();assert(typeof s=="string"||typeof s=="number"||typeof s=="object"&&contains(s,".sv"),"Priority must be a string or number.")}else assert(Nt===MAX_NODE$2||Nt.isEmpty(),"priority of unexpected type.");assert(Nt===MAX_NODE$2||Nt.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let __childrenNodeConstructor;class LeafNode{constructor(s,Ot=LeafNode.__childrenNodeConstructor.EMPTY_NODE){this.value_=s,this.priorityNode_=Ot,this.lazyHash_=null,assert(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),validatePriorityNode(this.priorityNode_)}static set __childrenNodeConstructor(s){__childrenNodeConstructor=s}static get __childrenNodeConstructor(){return __childrenNodeConstructor}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(s){return new LeafNode(this.value_,s)}getImmediateChild(s){return s===".priority"?this.priorityNode_:LeafNode.__childrenNodeConstructor.EMPTY_NODE}getChild(s){return pathIsEmpty(s)?this:pathGetFront(s)===".priority"?this.priorityNode_:LeafNode.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(s,Ot){return null}updateImmediateChild(s,Ot){return s===".priority"?this.updatePriority(Ot):Ot.isEmpty()&&s!==".priority"?this:LeafNode.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(s,Ot).updatePriority(this.priorityNode_)}updateChild(s,Ot){const en=pathGetFront(s);return en===null?Ot:Ot.isEmpty()&&en!==".priority"?this:(assert(en!==".priority"||pathGetLength(s)===1,".priority must be the last token in a path"),this.updateImmediateChild(en,LeafNode.__childrenNodeConstructor.EMPTY_NODE.updateChild(pathPopFront(s),Ot)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(s,Ot){return!1}val(s){return s&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let s="";this.priorityNode_.isEmpty()||(s+="priority:"+priorityHashText(this.priorityNode_.val())+":");const Ot=typeof this.value_;s+=Ot+":",Ot==="number"?s+=doubleToIEEE754String(this.value_):s+=this.value_,this.lazyHash_=sha1(s)}return this.lazyHash_}getValue(){return this.value_}compareTo(s){return s===LeafNode.__childrenNodeConstructor.EMPTY_NODE?1:s instanceof LeafNode.__childrenNodeConstructor?-1:(assert(s.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(s))}compareToLeafNode_(s){const Ot=typeof s.value_,en=typeof this.value_,tn=LeafNode.VALUE_TYPE_ORDER.indexOf(Ot),nn=LeafNode.VALUE_TYPE_ORDER.indexOf(en);return assert(tn>=0,"Unknown leaf type: "+Ot),assert(nn>=0,"Unknown leaf type: "+en),tn===nn?en==="object"?0:this.value_<s.value_?-1:this.value_===s.value_?0:1:nn-tn}withIndex(){return this}isIndexed(){return!0}equals(s){if(s===this)return!0;if(s.isLeafNode()){const Ot=s;return this.value_===Ot.value_&&this.priorityNode_.equals(Ot.priorityNode_)}else return!1}}LeafNode.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nodeFromJSON$1,MAX_NODE$1;function setNodeFromJSON(Nt){nodeFromJSON$1=Nt}function setMaxNode(Nt){MAX_NODE$1=Nt}class PriorityIndex extends Index{compare(s,Ot){const en=s.node.getPriority(),tn=Ot.node.getPriority(),nn=en.compareTo(tn);return nn===0?nameCompare(s.name,Ot.name):nn}isDefinedOn(s){return!s.getPriority().isEmpty()}indexedValueChanged(s,Ot){return!s.getPriority().equals(Ot.getPriority())}minPost(){return NamedNode.MIN}maxPost(){return new NamedNode(MAX_NAME,new LeafNode("[PRIORITY-POST]",MAX_NODE$1))}makePost(s,Ot){const en=nodeFromJSON$1(s);return new NamedNode(Ot,new LeafNode("[PRIORITY-POST]",en))}toString(){return".priority"}}const PRIORITY_INDEX=new PriorityIndex;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LOG_2=Math.log(2);class Base12Num{constructor(s){const Ot=nn=>parseInt(Math.log(nn)/LOG_2,10),en=nn=>parseInt(Array(nn+1).join("1"),2);this.count=Ot(s+1),this.current_=this.count-1;const tn=en(this.count);this.bits_=s+1&tn}nextBitIsOne(){const s=!(this.bits_&1<<this.current_);return this.current_--,s}}const buildChildSet=function(Nt,s,Ot,en){Nt.sort(s);const tn=function(sn,an){const ln=an-sn;let cn,un;if(ln===0)return null;if(ln===1)return cn=Nt[sn],un=Ot?Ot(cn):cn,new LLRBNode(un,cn.node,LLRBNode.BLACK,null,null);{const dn=parseInt(ln/2,10)+sn,hn=tn(sn,dn),fn=tn(dn+1,an);return cn=Nt[dn],un=Ot?Ot(cn):cn,new LLRBNode(un,cn.node,LLRBNode.BLACK,hn,fn)}},nn=function(sn){let an=null,ln=null,cn=Nt.length;const un=function(hn,fn){const mn=cn-hn,gn=cn;cn-=hn;const pn=tn(mn+1,gn),_n=Nt[mn],vn=Ot?Ot(_n):_n;dn(new LLRBNode(vn,_n.node,fn,null,pn))},dn=function(hn){an?(an.left=hn,an=hn):(ln=hn,an=hn)};for(let hn=0;hn<sn.count;++hn){const fn=sn.nextBitIsOne(),mn=Math.pow(2,sn.count-(hn+1));fn?un(mn,LLRBNode.BLACK):(un(mn,LLRBNode.BLACK),un(mn,LLRBNode.RED))}return ln},rn=new Base12Num(Nt.length),on=nn(rn);return new SortedMap(en||s,on)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _defaultIndexMap;const fallbackObject={};class IndexMap{constructor(s,Ot){this.indexes_=s,this.indexSet_=Ot}static get Default(){return assert(fallbackObject&&PRIORITY_INDEX,"ChildrenNode.ts has not been loaded"),_defaultIndexMap=_defaultIndexMap||new IndexMap({".priority":fallbackObject},{".priority":PRIORITY_INDEX}),_defaultIndexMap}get(s){const Ot=safeGet(this.indexes_,s);if(!Ot)throw new Error("No index defined for "+s);return Ot instanceof SortedMap?Ot:null}hasIndex(s){return contains(this.indexSet_,s.toString())}addIndex(s,Ot){assert(s!==KEY_INDEX,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const en=[];let tn=!1;const nn=Ot.getIterator(NamedNode.Wrap);let rn=nn.getNext();for(;rn;)tn=tn||s.isDefinedOn(rn.node),en.push(rn),rn=nn.getNext();let on;tn?on=buildChildSet(en,s.getCompare()):on=fallbackObject;const sn=s.toString(),an=Object.assign({},this.indexSet_);an[sn]=s;const ln=Object.assign({},this.indexes_);return ln[sn]=on,new IndexMap(ln,an)}addToIndexes(s,Ot){const en=map(this.indexes_,(tn,nn)=>{const rn=safeGet(this.indexSet_,nn);if(assert(rn,"Missing index implementation for "+nn),tn===fallbackObject)if(rn.isDefinedOn(s.node)){const on=[],sn=Ot.getIterator(NamedNode.Wrap);let an=sn.getNext();for(;an;)an.name!==s.name&&on.push(an),an=sn.getNext();return on.push(s),buildChildSet(on,rn.getCompare())}else return fallbackObject;else{const on=Ot.get(s.name);let sn=tn;return on&&(sn=sn.remove(new NamedNode(s.name,on))),sn.insert(s,s.node)}});return new IndexMap(en,this.indexSet_)}removeFromIndexes(s,Ot){const en=map(this.indexes_,tn=>{if(tn===fallbackObject)return tn;{const nn=Ot.get(s.name);return nn?tn.remove(new NamedNode(s.name,nn)):tn}});return new IndexMap(en,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let EMPTY_NODE;class ChildrenNode{constructor(s,Ot,en){this.children_=s,this.priorityNode_=Ot,this.indexMap_=en,this.lazyHash_=null,this.priorityNode_&&validatePriorityNode(this.priorityNode_),this.children_.isEmpty()&&assert(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return EMPTY_NODE||(EMPTY_NODE=new ChildrenNode(new SortedMap(NAME_COMPARATOR),null,IndexMap.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||EMPTY_NODE}updatePriority(s){return this.children_.isEmpty()?this:new ChildrenNode(this.children_,s,this.indexMap_)}getImmediateChild(s){if(s===".priority")return this.getPriority();{const Ot=this.children_.get(s);return Ot===null?EMPTY_NODE:Ot}}getChild(s){const Ot=pathGetFront(s);return Ot===null?this:this.getImmediateChild(Ot).getChild(pathPopFront(s))}hasChild(s){return this.children_.get(s)!==null}updateImmediateChild(s,Ot){if(assert(Ot,"We should always be passing snapshot nodes"),s===".priority")return this.updatePriority(Ot);{const en=new NamedNode(s,Ot);let tn,nn;Ot.isEmpty()?(tn=this.children_.remove(s),nn=this.indexMap_.removeFromIndexes(en,this.children_)):(tn=this.children_.insert(s,Ot),nn=this.indexMap_.addToIndexes(en,this.children_));const rn=tn.isEmpty()?EMPTY_NODE:this.priorityNode_;return new ChildrenNode(tn,rn,nn)}}updateChild(s,Ot){const en=pathGetFront(s);if(en===null)return Ot;{assert(pathGetFront(s)!==".priority"||pathGetLength(s)===1,".priority must be the last token in a path");const tn=this.getImmediateChild(en).updateChild(pathPopFront(s),Ot);return this.updateImmediateChild(en,tn)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(s){if(this.isEmpty())return null;const Ot={};let en=0,tn=0,nn=!0;if(this.forEachChild(PRIORITY_INDEX,(rn,on)=>{Ot[rn]=on.val(s),en++,nn&&ChildrenNode.INTEGER_REGEXP_.test(rn)?tn=Math.max(tn,Number(rn)):nn=!1}),!s&&nn&&tn<2*en){const rn=[];for(const on in Ot)rn[on]=Ot[on];return rn}else return s&&!this.getPriority().isEmpty()&&(Ot[".priority"]=this.getPriority().val()),Ot}hash(){if(this.lazyHash_===null){let s="";this.getPriority().isEmpty()||(s+="priority:"+priorityHashText(this.getPriority().val())+":"),this.forEachChild(PRIORITY_INDEX,(Ot,en)=>{const tn=en.hash();tn!==""&&(s+=":"+Ot+":"+tn)}),this.lazyHash_=s===""?"":sha1(s)}return this.lazyHash_}getPredecessorChildName(s,Ot,en){const tn=this.resolveIndex_(en);if(tn){const nn=tn.getPredecessorKey(new NamedNode(s,Ot));return nn?nn.name:null}else return this.children_.getPredecessorKey(s)}getFirstChildName(s){const Ot=this.resolveIndex_(s);if(Ot){const en=Ot.minKey();return en&&en.name}else return this.children_.minKey()}getFirstChild(s){const Ot=this.getFirstChildName(s);return Ot?new NamedNode(Ot,this.children_.get(Ot)):null}getLastChildName(s){const Ot=this.resolveIndex_(s);if(Ot){const en=Ot.maxKey();return en&&en.name}else return this.children_.maxKey()}getLastChild(s){const Ot=this.getLastChildName(s);return Ot?new NamedNode(Ot,this.children_.get(Ot)):null}forEachChild(s,Ot){const en=this.resolveIndex_(s);return en?en.inorderTraversal(tn=>Ot(tn.name,tn.node)):this.children_.inorderTraversal(Ot)}getIterator(s){return this.getIteratorFrom(s.minPost(),s)}getIteratorFrom(s,Ot){const en=this.resolveIndex_(Ot);if(en)return en.getIteratorFrom(s,tn=>tn);{const tn=this.children_.getIteratorFrom(s.name,NamedNode.Wrap);let nn=tn.peek();for(;nn!=null&&Ot.compare(nn,s)<0;)tn.getNext(),nn=tn.peek();return tn}}getReverseIterator(s){return this.getReverseIteratorFrom(s.maxPost(),s)}getReverseIteratorFrom(s,Ot){const en=this.resolveIndex_(Ot);if(en)return en.getReverseIteratorFrom(s,tn=>tn);{const tn=this.children_.getReverseIteratorFrom(s.name,NamedNode.Wrap);let nn=tn.peek();for(;nn!=null&&Ot.compare(nn,s)>0;)tn.getNext(),nn=tn.peek();return tn}}compareTo(s){return this.isEmpty()?s.isEmpty()?0:-1:s.isLeafNode()||s.isEmpty()?1:s===MAX_NODE?-1:0}withIndex(s){if(s===KEY_INDEX||this.indexMap_.hasIndex(s))return this;{const Ot=this.indexMap_.addIndex(s,this.children_);return new ChildrenNode(this.children_,this.priorityNode_,Ot)}}isIndexed(s){return s===KEY_INDEX||this.indexMap_.hasIndex(s)}equals(s){if(s===this)return!0;if(s.isLeafNode())return!1;{const Ot=s;if(this.getPriority().equals(Ot.getPriority()))if(this.children_.count()===Ot.children_.count()){const en=this.getIterator(PRIORITY_INDEX),tn=Ot.getIterator(PRIORITY_INDEX);let nn=en.getNext(),rn=tn.getNext();for(;nn&&rn;){if(nn.name!==rn.name||!nn.node.equals(rn.node))return!1;nn=en.getNext(),rn=tn.getNext()}return nn===null&&rn===null}else return!1;else return!1}}resolveIndex_(s){return s===KEY_INDEX?null:this.indexMap_.get(s.toString())}}ChildrenNode.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class MaxNode extends ChildrenNode{constructor(){super(new SortedMap(NAME_COMPARATOR),ChildrenNode.EMPTY_NODE,IndexMap.Default)}compareTo(s){return s===this?0:1}equals(s){return s===this}getPriority(){return this}getImmediateChild(s){return ChildrenNode.EMPTY_NODE}isEmpty(){return!1}}const MAX_NODE=new MaxNode;Object.defineProperties(NamedNode,{MIN:{value:new NamedNode(MIN_NAME,ChildrenNode.EMPTY_NODE)},MAX:{value:new NamedNode(MAX_NAME,MAX_NODE)}});KeyIndex.__EMPTY_NODE=ChildrenNode.EMPTY_NODE;LeafNode.__childrenNodeConstructor=ChildrenNode;setMaxNode$1(MAX_NODE);setMaxNode(MAX_NODE);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const USE_HINZE=!0;function nodeFromJSON(Nt,s=null){if(Nt===null)return ChildrenNode.EMPTY_NODE;if(typeof Nt=="object"&&".priority"in Nt&&(s=Nt[".priority"]),assert(s===null||typeof s=="string"||typeof s=="number"||typeof s=="object"&&".sv"in s,"Invalid priority type found: "+typeof s),typeof Nt=="object"&&".value"in Nt&&Nt[".value"]!==null&&(Nt=Nt[".value"]),typeof Nt!="object"||".sv"in Nt){const Ot=Nt;return new LeafNode(Ot,nodeFromJSON(s))}if(!(Nt instanceof Array)&&USE_HINZE){const Ot=[];let en=!1;if(each(Nt,(rn,on)=>{if(rn.substring(0,1)!=="."){const sn=nodeFromJSON(on);sn.isEmpty()||(en=en||!sn.getPriority().isEmpty(),Ot.push(new NamedNode(rn,sn)))}}),Ot.length===0)return ChildrenNode.EMPTY_NODE;const nn=buildChildSet(Ot,NAME_ONLY_COMPARATOR,rn=>rn.name,NAME_COMPARATOR);if(en){const rn=buildChildSet(Ot,PRIORITY_INDEX.getCompare());return new ChildrenNode(nn,nodeFromJSON(s),new IndexMap({".priority":rn},{".priority":PRIORITY_INDEX}))}else return new ChildrenNode(nn,nodeFromJSON(s),IndexMap.Default)}else{let Ot=ChildrenNode.EMPTY_NODE;return each(Nt,(en,tn)=>{if(contains(Nt,en)&&en.substring(0,1)!=="."){const nn=nodeFromJSON(tn);(nn.isLeafNode()||!nn.isEmpty())&&(Ot=Ot.updateImmediateChild(en,nn))}}),Ot.updatePriority(nodeFromJSON(s))}}setNodeFromJSON(nodeFromJSON);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PathIndex extends Index{constructor(s){super(),this.indexPath_=s,assert(!pathIsEmpty(s)&&pathGetFront(s)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(s){return s.getChild(this.indexPath_)}isDefinedOn(s){return!s.getChild(this.indexPath_).isEmpty()}compare(s,Ot){const en=this.extractChild(s.node),tn=this.extractChild(Ot.node),nn=en.compareTo(tn);return nn===0?nameCompare(s.name,Ot.name):nn}makePost(s,Ot){const en=nodeFromJSON(s),tn=ChildrenNode.EMPTY_NODE.updateChild(this.indexPath_,en);return new NamedNode(Ot,tn)}maxPost(){const s=ChildrenNode.EMPTY_NODE.updateChild(this.indexPath_,MAX_NODE);return new NamedNode(MAX_NAME,s)}toString(){return pathSlice(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ValueIndex extends Index{compare(s,Ot){const en=s.node.compareTo(Ot.node);return en===0?nameCompare(s.name,Ot.name):en}isDefinedOn(s){return!0}indexedValueChanged(s,Ot){return!s.equals(Ot)}minPost(){return NamedNode.MIN}maxPost(){return NamedNode.MAX}makePost(s,Ot){const en=nodeFromJSON(s);return new NamedNode(Ot,en)}toString(){return".value"}}const VALUE_INDEX=new ValueIndex;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function changeValue(Nt){return{type:"value",snapshotNode:Nt}}function changeChildAdded(Nt,s){return{type:"child_added",snapshotNode:s,childName:Nt}}function changeChildRemoved(Nt,s){return{type:"child_removed",snapshotNode:s,childName:Nt}}function changeChildChanged(Nt,s,Ot){return{type:"child_changed",snapshotNode:s,childName:Nt,oldSnap:Ot}}function changeChildMoved(Nt,s){return{type:"child_moved",snapshotNode:s,childName:Nt}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IndexedFilter{constructor(s){this.index_=s}updateChild(s,Ot,en,tn,nn,rn){assert(s.isIndexed(this.index_),"A node must be indexed if only a child is updated");const on=s.getImmediateChild(Ot);return on.getChild(tn).equals(en.getChild(tn))&&on.isEmpty()===en.isEmpty()||(rn!=null&&(en.isEmpty()?s.hasChild(Ot)?rn.trackChildChange(changeChildRemoved(Ot,on)):assert(s.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):on.isEmpty()?rn.trackChildChange(changeChildAdded(Ot,en)):rn.trackChildChange(changeChildChanged(Ot,en,on))),s.isLeafNode()&&en.isEmpty())?s:s.updateImmediateChild(Ot,en).withIndex(this.index_)}updateFullNode(s,Ot,en){return en!=null&&(s.isLeafNode()||s.forEachChild(PRIORITY_INDEX,(tn,nn)=>{Ot.hasChild(tn)||en.trackChildChange(changeChildRemoved(tn,nn))}),Ot.isLeafNode()||Ot.forEachChild(PRIORITY_INDEX,(tn,nn)=>{if(s.hasChild(tn)){const rn=s.getImmediateChild(tn);rn.equals(nn)||en.trackChildChange(changeChildChanged(tn,nn,rn))}else en.trackChildChange(changeChildAdded(tn,nn))})),Ot.withIndex(this.index_)}updatePriority(s,Ot){return s.isEmpty()?ChildrenNode.EMPTY_NODE:s.updatePriority(Ot)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RangedFilter{constructor(s){this.indexedFilter_=new IndexedFilter(s.getIndex()),this.index_=s.getIndex(),this.startPost_=RangedFilter.getStartPost_(s),this.endPost_=RangedFilter.getEndPost_(s),this.startIsInclusive_=!s.startAfterSet_,this.endIsInclusive_=!s.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(s){const Ot=this.startIsInclusive_?this.index_.compare(this.getStartPost(),s)<=0:this.index_.compare(this.getStartPost(),s)<0,en=this.endIsInclusive_?this.index_.compare(s,this.getEndPost())<=0:this.index_.compare(s,this.getEndPost())<0;return Ot&&en}updateChild(s,Ot,en,tn,nn,rn){return this.matches(new NamedNode(Ot,en))||(en=ChildrenNode.EMPTY_NODE),this.indexedFilter_.updateChild(s,Ot,en,tn,nn,rn)}updateFullNode(s,Ot,en){Ot.isLeafNode()&&(Ot=ChildrenNode.EMPTY_NODE);let tn=Ot.withIndex(this.index_);tn=tn.updatePriority(ChildrenNode.EMPTY_NODE);const nn=this;return Ot.forEachChild(PRIORITY_INDEX,(rn,on)=>{nn.matches(new NamedNode(rn,on))||(tn=tn.updateImmediateChild(rn,ChildrenNode.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(s,tn,en)}updatePriority(s,Ot){return s}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(s){if(s.hasStart()){const Ot=s.getIndexStartName();return s.getIndex().makePost(s.getIndexStartValue(),Ot)}else return s.getIndex().minPost()}static getEndPost_(s){if(s.hasEnd()){const Ot=s.getIndexEndName();return s.getIndex().makePost(s.getIndexEndValue(),Ot)}else return s.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LimitedFilter{constructor(s){this.withinDirectionalStart=Ot=>this.reverse_?this.withinEndPost(Ot):this.withinStartPost(Ot),this.withinDirectionalEnd=Ot=>this.reverse_?this.withinStartPost(Ot):this.withinEndPost(Ot),this.withinStartPost=Ot=>{const en=this.index_.compare(this.rangedFilter_.getStartPost(),Ot);return this.startIsInclusive_?en<=0:en<0},this.withinEndPost=Ot=>{const en=this.index_.compare(Ot,this.rangedFilter_.getEndPost());return this.endIsInclusive_?en<=0:en<0},this.rangedFilter_=new RangedFilter(s),this.index_=s.getIndex(),this.limit_=s.getLimit(),this.reverse_=!s.isViewFromLeft(),this.startIsInclusive_=!s.startAfterSet_,this.endIsInclusive_=!s.endBeforeSet_}updateChild(s,Ot,en,tn,nn,rn){return this.rangedFilter_.matches(new NamedNode(Ot,en))||(en=ChildrenNode.EMPTY_NODE),s.getImmediateChild(Ot).equals(en)?s:s.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(s,Ot,en,tn,nn,rn):this.fullLimitUpdateChild_(s,Ot,en,nn,rn)}updateFullNode(s,Ot,en){let tn;if(Ot.isLeafNode()||Ot.isEmpty())tn=ChildrenNode.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<Ot.numChildren()&&Ot.isIndexed(this.index_)){tn=ChildrenNode.EMPTY_NODE.withIndex(this.index_);let nn;this.reverse_?nn=Ot.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):nn=Ot.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let rn=0;for(;nn.hasNext()&&rn<this.limit_;){const on=nn.getNext();if(this.withinDirectionalStart(on))if(this.withinDirectionalEnd(on))tn=tn.updateImmediateChild(on.name,on.node),rn++;else break;else continue}}else{tn=Ot.withIndex(this.index_),tn=tn.updatePriority(ChildrenNode.EMPTY_NODE);let nn;this.reverse_?nn=tn.getReverseIterator(this.index_):nn=tn.getIterator(this.index_);let rn=0;for(;nn.hasNext();){const on=nn.getNext();rn<this.limit_&&this.withinDirectionalStart(on)&&this.withinDirectionalEnd(on)?rn++:tn=tn.updateImmediateChild(on.name,ChildrenNode.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(s,tn,en)}updatePriority(s,Ot){return s}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(s,Ot,en,tn,nn){let rn;if(this.reverse_){const cn=this.index_.getCompare();rn=(un,dn)=>cn(dn,un)}else rn=this.index_.getCompare();const on=s;assert(on.numChildren()===this.limit_,"");const sn=new NamedNode(Ot,en),an=this.reverse_?on.getFirstChild(this.index_):on.getLastChild(this.index_),ln=this.rangedFilter_.matches(sn);if(on.hasChild(Ot)){const cn=on.getImmediateChild(Ot);let un=tn.getChildAfterChild(this.index_,an,this.reverse_);for(;un!=null&&(un.name===Ot||on.hasChild(un.name));)un=tn.getChildAfterChild(this.index_,un,this.reverse_);const dn=un==null?1:rn(un,sn);if(ln&&!en.isEmpty()&&dn>=0)return nn!=null&&nn.trackChildChange(changeChildChanged(Ot,en,cn)),on.updateImmediateChild(Ot,en);{nn!=null&&nn.trackChildChange(changeChildRemoved(Ot,cn));const fn=on.updateImmediateChild(Ot,ChildrenNode.EMPTY_NODE);return un!=null&&this.rangedFilter_.matches(un)?(nn!=null&&nn.trackChildChange(changeChildAdded(un.name,un.node)),fn.updateImmediateChild(un.name,un.node)):fn}}else return en.isEmpty()?s:ln&&rn(an,sn)>=0?(nn!=null&&(nn.trackChildChange(changeChildRemoved(an.name,an.node)),nn.trackChildChange(changeChildAdded(Ot,en))),on.updateImmediateChild(Ot,en).updateImmediateChild(an.name,ChildrenNode.EMPTY_NODE)):s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QueryParams{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=PRIORITY_INDEX}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return assert(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return assert(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:MIN_NAME}hasEnd(){return this.endSet_}getIndexEndValue(){return assert(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return assert(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:MAX_NAME}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return assert(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===PRIORITY_INDEX}copy(){const s=new QueryParams;return s.limitSet_=this.limitSet_,s.limit_=this.limit_,s.startSet_=this.startSet_,s.startAfterSet_=this.startAfterSet_,s.indexStartValue_=this.indexStartValue_,s.startNameSet_=this.startNameSet_,s.indexStartName_=this.indexStartName_,s.endSet_=this.endSet_,s.endBeforeSet_=this.endBeforeSet_,s.indexEndValue_=this.indexEndValue_,s.endNameSet_=this.endNameSet_,s.indexEndName_=this.indexEndName_,s.index_=this.index_,s.viewFrom_=this.viewFrom_,s}}function queryParamsGetNodeFilter(Nt){return Nt.loadsAllData()?new IndexedFilter(Nt.getIndex()):Nt.hasLimit()?new LimitedFilter(Nt):new RangedFilter(Nt)}function queryParamsToRestQueryStringParameters(Nt){const s={};if(Nt.isDefault())return s;let Ot;if(Nt.index_===PRIORITY_INDEX?Ot="$priority":Nt.index_===VALUE_INDEX?Ot="$value":Nt.index_===KEY_INDEX?Ot="$key":(assert(Nt.index_ instanceof PathIndex,"Unrecognized index type!"),Ot=Nt.index_.toString()),s.orderBy=stringify(Ot),Nt.startSet_){const en=Nt.startAfterSet_?"startAfter":"startAt";s[en]=stringify(Nt.indexStartValue_),Nt.startNameSet_&&(s[en]+=","+stringify(Nt.indexStartName_))}if(Nt.endSet_){const en=Nt.endBeforeSet_?"endBefore":"endAt";s[en]=stringify(Nt.indexEndValue_),Nt.endNameSet_&&(s[en]+=","+stringify(Nt.indexEndName_))}return Nt.limitSet_&&(Nt.isViewFromLeft()?s.limitToFirst=Nt.limit_:s.limitToLast=Nt.limit_),s}function queryParamsGetQueryObject(Nt){const s={};if(Nt.startSet_&&(s.sp=Nt.indexStartValue_,Nt.startNameSet_&&(s.sn=Nt.indexStartName_),s.sin=!Nt.startAfterSet_),Nt.endSet_&&(s.ep=Nt.indexEndValue_,Nt.endNameSet_&&(s.en=Nt.indexEndName_),s.ein=!Nt.endBeforeSet_),Nt.limitSet_){s.l=Nt.limit_;let Ot=Nt.viewFrom_;Ot===""&&(Nt.isViewFromLeft()?Ot="l":Ot="r"),s.vf=Ot}return Nt.index_!==PRIORITY_INDEX&&(s.i=Nt.index_.toString()),s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ReadonlyRestClient extends ServerActions{constructor(s,Ot,en,tn){super(),this.repoInfo_=s,this.onDataUpdate_=Ot,this.authTokenProvider_=en,this.appCheckTokenProvider_=tn,this.log_=logWrapper("p:rest:"),this.listens_={}}reportStats(s){throw new Error("Method not implemented.")}static getListenId_(s,Ot){return Ot!==void 0?"tag$"+Ot:(assert(s._queryParams.isDefault(),"should have a tag if it's not a default query."),s._path.toString())}listen(s,Ot,en,tn){const nn=s._path.toString();this.log_("Listen called for "+nn+" "+s._queryIdentifier);const rn=ReadonlyRestClient.getListenId_(s,en),on={};this.listens_[rn]=on;const sn=queryParamsToRestQueryStringParameters(s._queryParams);this.restRequest_(nn+".json",sn,(an,ln)=>{let cn=ln;if(an===404&&(cn=null,an=null),an===null&&this.onDataUpdate_(nn,cn,!1,en),safeGet(this.listens_,rn)===on){let un;an?an===401?un="permission_denied":un="rest_error:"+an:un="ok",tn(un,null)}})}unlisten(s,Ot){const en=ReadonlyRestClient.getListenId_(s,Ot);delete this.listens_[en]}get(s){const Ot=queryParamsToRestQueryStringParameters(s._queryParams),en=s._path.toString(),tn=new Deferred;return this.restRequest_(en+".json",Ot,(nn,rn)=>{let on=rn;nn===404&&(on=null,nn=null),nn===null?(this.onDataUpdate_(en,on,!1,null),tn.resolve(on)):tn.reject(new Error(on))}),tn.promise}refreshAuthToken(s){}restRequest_(s,Ot={},en){return Ot.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([tn,nn])=>{tn&&tn.accessToken&&(Ot.auth=tn.accessToken),nn&&nn.token&&(Ot.ac=nn.token);const rn=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+s+"?ns="+this.repoInfo_.namespace+querystring(Ot);this.log_("Sending REST request for "+rn);const on=new XMLHttpRequest;on.onreadystatechange=()=>{if(en&&on.readyState===4){this.log_("REST Response for "+rn+" received. status:",on.status,"response:",on.responseText);let sn=null;if(on.status>=200&&on.status<300){try{sn=jsonEval(on.responseText)}catch{warn("Failed to parse JSON response for "+rn+": "+on.responseText)}en(null,sn)}else on.status!==401&&on.status!==404&&warn("Got unsuccessful REST response for "+rn+" Status: "+on.status),en(on.status);en=null}},on.open("GET",rn,!0),on.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SnapshotHolder{constructor(){this.rootNode_=ChildrenNode.EMPTY_NODE}getNode(s){return this.rootNode_.getChild(s)}updateSnapshot(s,Ot){this.rootNode_=this.rootNode_.updateChild(s,Ot)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function newSparseSnapshotTree(){return{value:null,children:new Map}}function sparseSnapshotTreeRemember(Nt,s,Ot){if(pathIsEmpty(s))Nt.value=Ot,Nt.children.clear();else if(Nt.value!==null)Nt.value=Nt.value.updateChild(s,Ot);else{const en=pathGetFront(s);Nt.children.has(en)||Nt.children.set(en,newSparseSnapshotTree());const tn=Nt.children.get(en);s=pathPopFront(s),sparseSnapshotTreeRemember(tn,s,Ot)}}function sparseSnapshotTreeForEachTree(Nt,s,Ot){Nt.value!==null?Ot(s,Nt.value):sparseSnapshotTreeForEachChild(Nt,(en,tn)=>{const nn=new Path(s.toString()+"/"+en);sparseSnapshotTreeForEachTree(tn,nn,Ot)})}function sparseSnapshotTreeForEachChild(Nt,s){Nt.children.forEach((Ot,en)=>{s(en,Ot)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class StatsListener{constructor(s){this.collection_=s,this.last_=null}get(){const s=this.collection_.get(),Ot=Object.assign({},s);return this.last_&&each(this.last_,(en,tn)=>{Ot[en]=Ot[en]-tn}),this.last_=s,Ot}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FIRST_STATS_MIN_TIME=10*1e3,FIRST_STATS_MAX_TIME=30*1e3,REPORT_STATS_INTERVAL=5*60*1e3;class StatsReporter{constructor(s,Ot){this.server_=Ot,this.statsToReport_={},this.statsListener_=new StatsListener(s);const en=FIRST_STATS_MIN_TIME+(FIRST_STATS_MAX_TIME-FIRST_STATS_MIN_TIME)*Math.random();setTimeoutNonBlocking(this.reportStats_.bind(this),Math.floor(en))}reportStats_(){const s=this.statsListener_.get(),Ot={};let en=!1;each(s,(tn,nn)=>{nn>0&&contains(this.statsToReport_,tn)&&(Ot[tn]=nn,en=!0)}),en&&this.server_.reportStats(Ot),setTimeoutNonBlocking(this.reportStats_.bind(this),Math.floor(Math.random()*2*REPORT_STATS_INTERVAL))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var OperationType;(function(Nt){Nt[Nt.OVERWRITE=0]="OVERWRITE",Nt[Nt.MERGE=1]="MERGE",Nt[Nt.ACK_USER_WRITE=2]="ACK_USER_WRITE",Nt[Nt.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(OperationType||(OperationType={}));function newOperationSourceUser(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function newOperationSourceServer(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function newOperationSourceServerTaggedQuery(Nt){return{fromUser:!1,fromServer:!0,queryId:Nt,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AckUserWrite{constructor(s,Ot,en){this.path=s,this.affectedTree=Ot,this.revert=en,this.type=OperationType.ACK_USER_WRITE,this.source=newOperationSourceUser()}operationForChild(s){if(pathIsEmpty(this.path)){if(this.affectedTree.value!=null)return assert(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const Ot=this.affectedTree.subtree(new Path(s));return new AckUserWrite(newEmptyPath(),Ot,this.revert)}}else return assert(pathGetFront(this.path)===s,"operationForChild called for unrelated child."),new AckUserWrite(pathPopFront(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ListenComplete{constructor(s,Ot){this.source=s,this.path=Ot,this.type=OperationType.LISTEN_COMPLETE}operationForChild(s){return pathIsEmpty(this.path)?new ListenComplete(this.source,newEmptyPath()):new ListenComplete(this.source,pathPopFront(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Overwrite{constructor(s,Ot,en){this.source=s,this.path=Ot,this.snap=en,this.type=OperationType.OVERWRITE}operationForChild(s){return pathIsEmpty(this.path)?new Overwrite(this.source,newEmptyPath(),this.snap.getImmediateChild(s)):new Overwrite(this.source,pathPopFront(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Merge{constructor(s,Ot,en){this.source=s,this.path=Ot,this.children=en,this.type=OperationType.MERGE}operationForChild(s){if(pathIsEmpty(this.path)){const Ot=this.children.subtree(new Path(s));return Ot.isEmpty()?null:Ot.value?new Overwrite(this.source,newEmptyPath(),Ot.value):new Merge(this.source,newEmptyPath(),Ot)}else return assert(pathGetFront(this.path)===s,"Can't get a merge for a child not on the path of the operation"),new Merge(this.source,pathPopFront(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CacheNode{constructor(s,Ot,en){this.node_=s,this.fullyInitialized_=Ot,this.filtered_=en}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(s){if(pathIsEmpty(s))return this.isFullyInitialized()&&!this.filtered_;const Ot=pathGetFront(s);return this.isCompleteForChild(Ot)}isCompleteForChild(s){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(s)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EventGenerator{constructor(s){this.query_=s,this.index_=this.query_._queryParams.getIndex()}}function eventGeneratorGenerateEventsForChanges(Nt,s,Ot,en){const tn=[],nn=[];return s.forEach(rn=>{rn.type==="child_changed"&&Nt.index_.indexedValueChanged(rn.oldSnap,rn.snapshotNode)&&nn.push(changeChildMoved(rn.childName,rn.snapshotNode))}),eventGeneratorGenerateEventsForType(Nt,tn,"child_removed",s,en,Ot),eventGeneratorGenerateEventsForType(Nt,tn,"child_added",s,en,Ot),eventGeneratorGenerateEventsForType(Nt,tn,"child_moved",nn,en,Ot),eventGeneratorGenerateEventsForType(Nt,tn,"child_changed",s,en,Ot),eventGeneratorGenerateEventsForType(Nt,tn,"value",s,en,Ot),tn}function eventGeneratorGenerateEventsForType(Nt,s,Ot,en,tn,nn){const rn=en.filter(on=>on.type===Ot);rn.sort((on,sn)=>eventGeneratorCompareChanges(Nt,on,sn)),rn.forEach(on=>{const sn=eventGeneratorMaterializeSingleChange(Nt,on,nn);tn.forEach(an=>{an.respondsTo(on.type)&&s.push(an.createEvent(sn,Nt.query_))})})}function eventGeneratorMaterializeSingleChange(Nt,s,Ot){return s.type==="value"||s.type==="child_removed"||(s.prevName=Ot.getPredecessorChildName(s.childName,s.snapshotNode,Nt.index_)),s}function eventGeneratorCompareChanges(Nt,s,Ot){if(s.childName==null||Ot.childName==null)throw assertionError("Should only compare child_ events.");const en=new NamedNode(s.childName,s.snapshotNode),tn=new NamedNode(Ot.childName,Ot.snapshotNode);return Nt.index_.compare(en,tn)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function newViewCache(Nt,s){return{eventCache:Nt,serverCache:s}}function viewCacheUpdateEventSnap(Nt,s,Ot,en){return newViewCache(new CacheNode(s,Ot,en),Nt.serverCache)}function viewCacheUpdateServerSnap(Nt,s,Ot,en){return newViewCache(Nt.eventCache,new CacheNode(s,Ot,en))}function viewCacheGetCompleteEventSnap(Nt){return Nt.eventCache.isFullyInitialized()?Nt.eventCache.getNode():null}function viewCacheGetCompleteServerSnap(Nt){return Nt.serverCache.isFullyInitialized()?Nt.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let emptyChildrenSingleton;const EmptyChildren=()=>(emptyChildrenSingleton||(emptyChildrenSingleton=new SortedMap(stringCompare)),emptyChildrenSingleton);class ImmutableTree{constructor(s,Ot=EmptyChildren()){this.value=s,this.children=Ot}static fromObject(s){let Ot=new ImmutableTree(null);return each(s,(en,tn)=>{Ot=Ot.set(new Path(en),tn)}),Ot}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(s,Ot){if(this.value!=null&&Ot(this.value))return{path:newEmptyPath(),value:this.value};if(pathIsEmpty(s))return null;{const en=pathGetFront(s),tn=this.children.get(en);if(tn!==null){const nn=tn.findRootMostMatchingPathAndValue(pathPopFront(s),Ot);return nn!=null?{path:pathChild(new Path(en),nn.path),value:nn.value}:null}else return null}}findRootMostValueAndPath(s){return this.findRootMostMatchingPathAndValue(s,()=>!0)}subtree(s){if(pathIsEmpty(s))return this;{const Ot=pathGetFront(s),en=this.children.get(Ot);return en!==null?en.subtree(pathPopFront(s)):new ImmutableTree(null)}}set(s,Ot){if(pathIsEmpty(s))return new ImmutableTree(Ot,this.children);{const en=pathGetFront(s),nn=(this.children.get(en)||new ImmutableTree(null)).set(pathPopFront(s),Ot),rn=this.children.insert(en,nn);return new ImmutableTree(this.value,rn)}}remove(s){if(pathIsEmpty(s))return this.children.isEmpty()?new ImmutableTree(null):new ImmutableTree(null,this.children);{const Ot=pathGetFront(s),en=this.children.get(Ot);if(en){const tn=en.remove(pathPopFront(s));let nn;return tn.isEmpty()?nn=this.children.remove(Ot):nn=this.children.insert(Ot,tn),this.value===null&&nn.isEmpty()?new ImmutableTree(null):new ImmutableTree(this.value,nn)}else return this}}get(s){if(pathIsEmpty(s))return this.value;{const Ot=pathGetFront(s),en=this.children.get(Ot);return en?en.get(pathPopFront(s)):null}}setTree(s,Ot){if(pathIsEmpty(s))return Ot;{const en=pathGetFront(s),nn=(this.children.get(en)||new ImmutableTree(null)).setTree(pathPopFront(s),Ot);let rn;return nn.isEmpty()?rn=this.children.remove(en):rn=this.children.insert(en,nn),new ImmutableTree(this.value,rn)}}fold(s){return this.fold_(newEmptyPath(),s)}fold_(s,Ot){const en={};return this.children.inorderTraversal((tn,nn)=>{en[tn]=nn.fold_(pathChild(s,tn),Ot)}),Ot(s,this.value,en)}findOnPath(s,Ot){return this.findOnPath_(s,newEmptyPath(),Ot)}findOnPath_(s,Ot,en){const tn=this.value?en(Ot,this.value):!1;if(tn)return tn;if(pathIsEmpty(s))return null;{const nn=pathGetFront(s),rn=this.children.get(nn);return rn?rn.findOnPath_(pathPopFront(s),pathChild(Ot,nn),en):null}}foreachOnPath(s,Ot){return this.foreachOnPath_(s,newEmptyPath(),Ot)}foreachOnPath_(s,Ot,en){if(pathIsEmpty(s))return this;{this.value&&en(Ot,this.value);const tn=pathGetFront(s),nn=this.children.get(tn);return nn?nn.foreachOnPath_(pathPopFront(s),pathChild(Ot,tn),en):new ImmutableTree(null)}}foreach(s){this.foreach_(newEmptyPath(),s)}foreach_(s,Ot){this.children.inorderTraversal((en,tn)=>{tn.foreach_(pathChild(s,en),Ot)}),this.value&&Ot(s,this.value)}foreachChild(s){this.children.inorderTraversal((Ot,en)=>{en.value&&s(Ot,en.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CompoundWrite{constructor(s){this.writeTree_=s}static empty(){return new CompoundWrite(new ImmutableTree(null))}}function compoundWriteAddWrite(Nt,s,Ot){if(pathIsEmpty(s))return new CompoundWrite(new ImmutableTree(Ot));{const en=Nt.writeTree_.findRootMostValueAndPath(s);if(en!=null){const tn=en.path;let nn=en.value;const rn=newRelativePath(tn,s);return nn=nn.updateChild(rn,Ot),new CompoundWrite(Nt.writeTree_.set(tn,nn))}else{const tn=new ImmutableTree(Ot),nn=Nt.writeTree_.setTree(s,tn);return new CompoundWrite(nn)}}}function compoundWriteAddWrites(Nt,s,Ot){let en=Nt;return each(Ot,(tn,nn)=>{en=compoundWriteAddWrite(en,pathChild(s,tn),nn)}),en}function compoundWriteRemoveWrite(Nt,s){if(pathIsEmpty(s))return CompoundWrite.empty();{const Ot=Nt.writeTree_.setTree(s,new ImmutableTree(null));return new CompoundWrite(Ot)}}function compoundWriteHasCompleteWrite(Nt,s){return compoundWriteGetCompleteNode(Nt,s)!=null}function compoundWriteGetCompleteNode(Nt,s){const Ot=Nt.writeTree_.findRootMostValueAndPath(s);return Ot!=null?Nt.writeTree_.get(Ot.path).getChild(newRelativePath(Ot.path,s)):null}function compoundWriteGetCompleteChildren(Nt){const s=[],Ot=Nt.writeTree_.value;return Ot!=null?Ot.isLeafNode()||Ot.forEachChild(PRIORITY_INDEX,(en,tn)=>{s.push(new NamedNode(en,tn))}):Nt.writeTree_.children.inorderTraversal((en,tn)=>{tn.value!=null&&s.push(new NamedNode(en,tn.value))}),s}function compoundWriteChildCompoundWrite(Nt,s){if(pathIsEmpty(s))return Nt;{const Ot=compoundWriteGetCompleteNode(Nt,s);return Ot!=null?new CompoundWrite(new ImmutableTree(Ot)):new CompoundWrite(Nt.writeTree_.subtree(s))}}function compoundWriteIsEmpty(Nt){return Nt.writeTree_.isEmpty()}function compoundWriteApply(Nt,s){return applySubtreeWrite(newEmptyPath(),Nt.writeTree_,s)}function applySubtreeWrite(Nt,s,Ot){if(s.value!=null)return Ot.updateChild(Nt,s.value);{let en=null;return s.children.inorderTraversal((tn,nn)=>{tn===".priority"?(assert(nn.value!==null,"Priority writes must always be leaf nodes"),en=nn.value):Ot=applySubtreeWrite(pathChild(Nt,tn),nn,Ot)}),!Ot.getChild(Nt).isEmpty()&&en!==null&&(Ot=Ot.updateChild(pathChild(Nt,".priority"),en)),Ot}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function writeTreeChildWrites(Nt,s){return newWriteTreeRef(s,Nt)}function writeTreeAddOverwrite(Nt,s,Ot,en,tn){assert(en>Nt.lastWriteId,"Stacking an older write on top of newer ones"),tn===void 0&&(tn=!0),Nt.allWrites.push({path:s,snap:Ot,writeId:en,visible:tn}),tn&&(Nt.visibleWrites=compoundWriteAddWrite(Nt.visibleWrites,s,Ot)),Nt.lastWriteId=en}function writeTreeGetWrite(Nt,s){for(let Ot=0;Ot<Nt.allWrites.length;Ot++){const en=Nt.allWrites[Ot];if(en.writeId===s)return en}return null}function writeTreeRemoveWrite(Nt,s){const Ot=Nt.allWrites.findIndex(on=>on.writeId===s);assert(Ot>=0,"removeWrite called with nonexistent writeId.");const en=Nt.allWrites[Ot];Nt.allWrites.splice(Ot,1);let tn=en.visible,nn=!1,rn=Nt.allWrites.length-1;for(;tn&&rn>=0;){const on=Nt.allWrites[rn];on.visible&&(rn>=Ot&&writeTreeRecordContainsPath_(on,en.path)?tn=!1:pathContains(en.path,on.path)&&(nn=!0)),rn--}if(tn){if(nn)return writeTreeResetTree_(Nt),!0;if(en.snap)Nt.visibleWrites=compoundWriteRemoveWrite(Nt.visibleWrites,en.path);else{const on=en.children;each(on,sn=>{Nt.visibleWrites=compoundWriteRemoveWrite(Nt.visibleWrites,pathChild(en.path,sn))})}return!0}else return!1}function writeTreeRecordContainsPath_(Nt,s){if(Nt.snap)return pathContains(Nt.path,s);for(const Ot in Nt.children)if(Nt.children.hasOwnProperty(Ot)&&pathContains(pathChild(Nt.path,Ot),s))return!0;return!1}function writeTreeResetTree_(Nt){Nt.visibleWrites=writeTreeLayerTree_(Nt.allWrites,writeTreeDefaultFilter_,newEmptyPath()),Nt.allWrites.length>0?Nt.lastWriteId=Nt.allWrites[Nt.allWrites.length-1].writeId:Nt.lastWriteId=-1}function writeTreeDefaultFilter_(Nt){return Nt.visible}function writeTreeLayerTree_(Nt,s,Ot){let en=CompoundWrite.empty();for(let tn=0;tn<Nt.length;++tn){const nn=Nt[tn];if(s(nn)){const rn=nn.path;let on;if(nn.snap)pathContains(Ot,rn)?(on=newRelativePath(Ot,rn),en=compoundWriteAddWrite(en,on,nn.snap)):pathContains(rn,Ot)&&(on=newRelativePath(rn,Ot),en=compoundWriteAddWrite(en,newEmptyPath(),nn.snap.getChild(on)));else if(nn.children){if(pathContains(Ot,rn))on=newRelativePath(Ot,rn),en=compoundWriteAddWrites(en,on,nn.children);else if(pathContains(rn,Ot))if(on=newRelativePath(rn,Ot),pathIsEmpty(on))en=compoundWriteAddWrites(en,newEmptyPath(),nn.children);else{const sn=safeGet(nn.children,pathGetFront(on));if(sn){const an=sn.getChild(pathPopFront(on));en=compoundWriteAddWrite(en,newEmptyPath(),an)}}}else throw assertionError("WriteRecord should have .snap or .children")}}return en}function writeTreeCalcCompleteEventCache(Nt,s,Ot,en,tn){if(!en&&!tn){const nn=compoundWriteGetCompleteNode(Nt.visibleWrites,s);if(nn!=null)return nn;{const rn=compoundWriteChildCompoundWrite(Nt.visibleWrites,s);if(compoundWriteIsEmpty(rn))return Ot;if(Ot==null&&!compoundWriteHasCompleteWrite(rn,newEmptyPath()))return null;{const on=Ot||ChildrenNode.EMPTY_NODE;return compoundWriteApply(rn,on)}}}else{const nn=compoundWriteChildCompoundWrite(Nt.visibleWrites,s);if(!tn&&compoundWriteIsEmpty(nn))return Ot;if(!tn&&Ot==null&&!compoundWriteHasCompleteWrite(nn,newEmptyPath()))return null;{const rn=function(an){return(an.visible||tn)&&(!en||!~en.indexOf(an.writeId))&&(pathContains(an.path,s)||pathContains(s,an.path))},on=writeTreeLayerTree_(Nt.allWrites,rn,s),sn=Ot||ChildrenNode.EMPTY_NODE;return compoundWriteApply(on,sn)}}}function writeTreeCalcCompleteEventChildren(Nt,s,Ot){let en=ChildrenNode.EMPTY_NODE;const tn=compoundWriteGetCompleteNode(Nt.visibleWrites,s);if(tn)return tn.isLeafNode()||tn.forEachChild(PRIORITY_INDEX,(nn,rn)=>{en=en.updateImmediateChild(nn,rn)}),en;if(Ot){const nn=compoundWriteChildCompoundWrite(Nt.visibleWrites,s);return Ot.forEachChild(PRIORITY_INDEX,(rn,on)=>{const sn=compoundWriteApply(compoundWriteChildCompoundWrite(nn,new Path(rn)),on);en=en.updateImmediateChild(rn,sn)}),compoundWriteGetCompleteChildren(nn).forEach(rn=>{en=en.updateImmediateChild(rn.name,rn.node)}),en}else{const nn=compoundWriteChildCompoundWrite(Nt.visibleWrites,s);return compoundWriteGetCompleteChildren(nn).forEach(rn=>{en=en.updateImmediateChild(rn.name,rn.node)}),en}}function writeTreeCalcEventCacheAfterServerOverwrite(Nt,s,Ot,en,tn){assert(en||tn,"Either existingEventSnap or existingServerSnap must exist");const nn=pathChild(s,Ot);if(compoundWriteHasCompleteWrite(Nt.visibleWrites,nn))return null;{const rn=compoundWriteChildCompoundWrite(Nt.visibleWrites,nn);return compoundWriteIsEmpty(rn)?tn.getChild(Ot):compoundWriteApply(rn,tn.getChild(Ot))}}function writeTreeCalcCompleteChild(Nt,s,Ot,en){const tn=pathChild(s,Ot),nn=compoundWriteGetCompleteNode(Nt.visibleWrites,tn);if(nn!=null)return nn;if(en.isCompleteForChild(Ot)){const rn=compoundWriteChildCompoundWrite(Nt.visibleWrites,tn);return compoundWriteApply(rn,en.getNode().getImmediateChild(Ot))}else return null}function writeTreeShadowingWrite(Nt,s){return compoundWriteGetCompleteNode(Nt.visibleWrites,s)}function writeTreeCalcIndexedSlice(Nt,s,Ot,en,tn,nn,rn){let on;const sn=compoundWriteChildCompoundWrite(Nt.visibleWrites,s),an=compoundWriteGetCompleteNode(sn,newEmptyPath());if(an!=null)on=an;else if(Ot!=null)on=compoundWriteApply(sn,Ot);else return[];if(on=on.withIndex(rn),!on.isEmpty()&&!on.isLeafNode()){const ln=[],cn=rn.getCompare(),un=nn?on.getReverseIteratorFrom(en,rn):on.getIteratorFrom(en,rn);let dn=un.getNext();for(;dn&&ln.length<tn;)cn(dn,en)!==0&&ln.push(dn),dn=un.getNext();return ln}else return[]}function newWriteTree(){return{visibleWrites:CompoundWrite.empty(),allWrites:[],lastWriteId:-1}}function writeTreeRefCalcCompleteEventCache(Nt,s,Ot,en){return writeTreeCalcCompleteEventCache(Nt.writeTree,Nt.treePath,s,Ot,en)}function writeTreeRefCalcCompleteEventChildren(Nt,s){return writeTreeCalcCompleteEventChildren(Nt.writeTree,Nt.treePath,s)}function writeTreeRefCalcEventCacheAfterServerOverwrite(Nt,s,Ot,en){return writeTreeCalcEventCacheAfterServerOverwrite(Nt.writeTree,Nt.treePath,s,Ot,en)}function writeTreeRefShadowingWrite(Nt,s){return writeTreeShadowingWrite(Nt.writeTree,pathChild(Nt.treePath,s))}function writeTreeRefCalcIndexedSlice(Nt,s,Ot,en,tn,nn){return writeTreeCalcIndexedSlice(Nt.writeTree,Nt.treePath,s,Ot,en,tn,nn)}function writeTreeRefCalcCompleteChild(Nt,s,Ot){return writeTreeCalcCompleteChild(Nt.writeTree,Nt.treePath,s,Ot)}function writeTreeRefChild(Nt,s){return newWriteTreeRef(pathChild(Nt.treePath,s),Nt.writeTree)}function newWriteTreeRef(Nt,s){return{treePath:Nt,writeTree:s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ChildChangeAccumulator{constructor(){this.changeMap=new Map}trackChildChange(s){const Ot=s.type,en=s.childName;assert(Ot==="child_added"||Ot==="child_changed"||Ot==="child_removed","Only child changes supported for tracking"),assert(en!==".priority","Only non-priority child changes can be tracked.");const tn=this.changeMap.get(en);if(tn){const nn=tn.type;if(Ot==="child_added"&&nn==="child_removed")this.changeMap.set(en,changeChildChanged(en,s.snapshotNode,tn.snapshotNode));else if(Ot==="child_removed"&&nn==="child_added")this.changeMap.delete(en);else if(Ot==="child_removed"&&nn==="child_changed")this.changeMap.set(en,changeChildRemoved(en,tn.oldSnap));else if(Ot==="child_changed"&&nn==="child_added")this.changeMap.set(en,changeChildAdded(en,s.snapshotNode));else if(Ot==="child_changed"&&nn==="child_changed")this.changeMap.set(en,changeChildChanged(en,s.snapshotNode,tn.oldSnap));else throw assertionError("Illegal combination of changes: "+s+" occurred after "+tn)}else this.changeMap.set(en,s)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NoCompleteChildSource_{getCompleteChild(s){return null}getChildAfterChild(s,Ot,en){return null}}const NO_COMPLETE_CHILD_SOURCE=new NoCompleteChildSource_;class WriteTreeCompleteChildSource{constructor(s,Ot,en=null){this.writes_=s,this.viewCache_=Ot,this.optCompleteServerCache_=en}getCompleteChild(s){const Ot=this.viewCache_.eventCache;if(Ot.isCompleteForChild(s))return Ot.getNode().getImmediateChild(s);{const en=this.optCompleteServerCache_!=null?new CacheNode(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return writeTreeRefCalcCompleteChild(this.writes_,s,en)}}getChildAfterChild(s,Ot,en){const tn=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:viewCacheGetCompleteServerSnap(this.viewCache_),nn=writeTreeRefCalcIndexedSlice(this.writes_,tn,Ot,1,en,s);return nn.length===0?null:nn[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function newViewProcessor(Nt){return{filter:Nt}}function viewProcessorAssertIndexed(Nt,s){assert(s.eventCache.getNode().isIndexed(Nt.filter.getIndex()),"Event snap not indexed"),assert(s.serverCache.getNode().isIndexed(Nt.filter.getIndex()),"Server snap not indexed")}function viewProcessorApplyOperation(Nt,s,Ot,en,tn){const nn=new ChildChangeAccumulator;let rn,on;if(Ot.type===OperationType.OVERWRITE){const an=Ot;an.source.fromUser?rn=viewProcessorApplyUserOverwrite(Nt,s,an.path,an.snap,en,tn,nn):(assert(an.source.fromServer,"Unknown source."),on=an.source.tagged||s.serverCache.isFiltered()&&!pathIsEmpty(an.path),rn=viewProcessorApplyServerOverwrite(Nt,s,an.path,an.snap,en,tn,on,nn))}else if(Ot.type===OperationType.MERGE){const an=Ot;an.source.fromUser?rn=viewProcessorApplyUserMerge(Nt,s,an.path,an.children,en,tn,nn):(assert(an.source.fromServer,"Unknown source."),on=an.source.tagged||s.serverCache.isFiltered(),rn=viewProcessorApplyServerMerge(Nt,s,an.path,an.children,en,tn,on,nn))}else if(Ot.type===OperationType.ACK_USER_WRITE){const an=Ot;an.revert?rn=viewProcessorRevertUserWrite(Nt,s,an.path,en,tn,nn):rn=viewProcessorAckUserWrite(Nt,s,an.path,an.affectedTree,en,tn,nn)}else if(Ot.type===OperationType.LISTEN_COMPLETE)rn=viewProcessorListenComplete(Nt,s,Ot.path,en,nn);else throw assertionError("Unknown operation type: "+Ot.type);const sn=nn.getChanges();return viewProcessorMaybeAddValueEvent(s,rn,sn),{viewCache:rn,changes:sn}}function viewProcessorMaybeAddValueEvent(Nt,s,Ot){const en=s.eventCache;if(en.isFullyInitialized()){const tn=en.getNode().isLeafNode()||en.getNode().isEmpty(),nn=viewCacheGetCompleteEventSnap(Nt);(Ot.length>0||!Nt.eventCache.isFullyInitialized()||tn&&!en.getNode().equals(nn)||!en.getNode().getPriority().equals(nn.getPriority()))&&Ot.push(changeValue(viewCacheGetCompleteEventSnap(s)))}}function viewProcessorGenerateEventCacheAfterServerEvent(Nt,s,Ot,en,tn,nn){const rn=s.eventCache;if(writeTreeRefShadowingWrite(en,Ot)!=null)return s;{let on,sn;if(pathIsEmpty(Ot))if(assert(s.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),s.serverCache.isFiltered()){const an=viewCacheGetCompleteServerSnap(s),ln=an instanceof ChildrenNode?an:ChildrenNode.EMPTY_NODE,cn=writeTreeRefCalcCompleteEventChildren(en,ln);on=Nt.filter.updateFullNode(s.eventCache.getNode(),cn,nn)}else{const an=writeTreeRefCalcCompleteEventCache(en,viewCacheGetCompleteServerSnap(s));on=Nt.filter.updateFullNode(s.eventCache.getNode(),an,nn)}else{const an=pathGetFront(Ot);if(an===".priority"){assert(pathGetLength(Ot)===1,"Can't have a priority with additional path components");const ln=rn.getNode();sn=s.serverCache.getNode();const cn=writeTreeRefCalcEventCacheAfterServerOverwrite(en,Ot,ln,sn);cn!=null?on=Nt.filter.updatePriority(ln,cn):on=rn.getNode()}else{const ln=pathPopFront(Ot);let cn;if(rn.isCompleteForChild(an)){sn=s.serverCache.getNode();const un=writeTreeRefCalcEventCacheAfterServerOverwrite(en,Ot,rn.getNode(),sn);un!=null?cn=rn.getNode().getImmediateChild(an).updateChild(ln,un):cn=rn.getNode().getImmediateChild(an)}else cn=writeTreeRefCalcCompleteChild(en,an,s.serverCache);cn!=null?on=Nt.filter.updateChild(rn.getNode(),an,cn,ln,tn,nn):on=rn.getNode()}}return viewCacheUpdateEventSnap(s,on,rn.isFullyInitialized()||pathIsEmpty(Ot),Nt.filter.filtersNodes())}}function viewProcessorApplyServerOverwrite(Nt,s,Ot,en,tn,nn,rn,on){const sn=s.serverCache;let an;const ln=rn?Nt.filter:Nt.filter.getIndexedFilter();if(pathIsEmpty(Ot))an=ln.updateFullNode(sn.getNode(),en,null);else if(ln.filtersNodes()&&!sn.isFiltered()){const dn=sn.getNode().updateChild(Ot,en);an=ln.updateFullNode(sn.getNode(),dn,null)}else{const dn=pathGetFront(Ot);if(!sn.isCompleteForPath(Ot)&&pathGetLength(Ot)>1)return s;const hn=pathPopFront(Ot),mn=sn.getNode().getImmediateChild(dn).updateChild(hn,en);dn===".priority"?an=ln.updatePriority(sn.getNode(),mn):an=ln.updateChild(sn.getNode(),dn,mn,hn,NO_COMPLETE_CHILD_SOURCE,null)}const cn=viewCacheUpdateServerSnap(s,an,sn.isFullyInitialized()||pathIsEmpty(Ot),ln.filtersNodes()),un=new WriteTreeCompleteChildSource(tn,cn,nn);return viewProcessorGenerateEventCacheAfterServerEvent(Nt,cn,Ot,tn,un,on)}function viewProcessorApplyUserOverwrite(Nt,s,Ot,en,tn,nn,rn){const on=s.eventCache;let sn,an;const ln=new WriteTreeCompleteChildSource(tn,s,nn);if(pathIsEmpty(Ot))an=Nt.filter.updateFullNode(s.eventCache.getNode(),en,rn),sn=viewCacheUpdateEventSnap(s,an,!0,Nt.filter.filtersNodes());else{const cn=pathGetFront(Ot);if(cn===".priority")an=Nt.filter.updatePriority(s.eventCache.getNode(),en),sn=viewCacheUpdateEventSnap(s,an,on.isFullyInitialized(),on.isFiltered());else{const un=pathPopFront(Ot),dn=on.getNode().getImmediateChild(cn);let hn;if(pathIsEmpty(un))hn=en;else{const fn=ln.getCompleteChild(cn);fn!=null?pathGetBack(un)===".priority"&&fn.getChild(pathParent(un)).isEmpty()?hn=fn:hn=fn.updateChild(un,en):hn=ChildrenNode.EMPTY_NODE}if(dn.equals(hn))sn=s;else{const fn=Nt.filter.updateChild(on.getNode(),cn,hn,un,ln,rn);sn=viewCacheUpdateEventSnap(s,fn,on.isFullyInitialized(),Nt.filter.filtersNodes())}}}return sn}function viewProcessorCacheHasChild(Nt,s){return Nt.eventCache.isCompleteForChild(s)}function viewProcessorApplyUserMerge(Nt,s,Ot,en,tn,nn,rn){let on=s;return en.foreach((sn,an)=>{const ln=pathChild(Ot,sn);viewProcessorCacheHasChild(s,pathGetFront(ln))&&(on=viewProcessorApplyUserOverwrite(Nt,on,ln,an,tn,nn,rn))}),en.foreach((sn,an)=>{const ln=pathChild(Ot,sn);viewProcessorCacheHasChild(s,pathGetFront(ln))||(on=viewProcessorApplyUserOverwrite(Nt,on,ln,an,tn,nn,rn))}),on}function viewProcessorApplyMerge(Nt,s,Ot){return Ot.foreach((en,tn)=>{s=s.updateChild(en,tn)}),s}function viewProcessorApplyServerMerge(Nt,s,Ot,en,tn,nn,rn,on){if(s.serverCache.getNode().isEmpty()&&!s.serverCache.isFullyInitialized())return s;let sn=s,an;pathIsEmpty(Ot)?an=en:an=new ImmutableTree(null).setTree(Ot,en);const ln=s.serverCache.getNode();return an.children.inorderTraversal((cn,un)=>{if(ln.hasChild(cn)){const dn=s.serverCache.getNode().getImmediateChild(cn),hn=viewProcessorApplyMerge(Nt,dn,un);sn=viewProcessorApplyServerOverwrite(Nt,sn,new Path(cn),hn,tn,nn,rn,on)}}),an.children.inorderTraversal((cn,un)=>{const dn=!s.serverCache.isCompleteForChild(cn)&&un.value===null;if(!ln.hasChild(cn)&&!dn){const hn=s.serverCache.getNode().getImmediateChild(cn),fn=viewProcessorApplyMerge(Nt,hn,un);sn=viewProcessorApplyServerOverwrite(Nt,sn,new Path(cn),fn,tn,nn,rn,on)}}),sn}function viewProcessorAckUserWrite(Nt,s,Ot,en,tn,nn,rn){if(writeTreeRefShadowingWrite(tn,Ot)!=null)return s;const on=s.serverCache.isFiltered(),sn=s.serverCache;if(en.value!=null){if(pathIsEmpty(Ot)&&sn.isFullyInitialized()||sn.isCompleteForPath(Ot))return viewProcessorApplyServerOverwrite(Nt,s,Ot,sn.getNode().getChild(Ot),tn,nn,on,rn);if(pathIsEmpty(Ot)){let an=new ImmutableTree(null);return sn.getNode().forEachChild(KEY_INDEX,(ln,cn)=>{an=an.set(new Path(ln),cn)}),viewProcessorApplyServerMerge(Nt,s,Ot,an,tn,nn,on,rn)}else return s}else{let an=new ImmutableTree(null);return en.foreach((ln,cn)=>{const un=pathChild(Ot,ln);sn.isCompleteForPath(un)&&(an=an.set(ln,sn.getNode().getChild(un)))}),viewProcessorApplyServerMerge(Nt,s,Ot,an,tn,nn,on,rn)}}function viewProcessorListenComplete(Nt,s,Ot,en,tn){const nn=s.serverCache,rn=viewCacheUpdateServerSnap(s,nn.getNode(),nn.isFullyInitialized()||pathIsEmpty(Ot),nn.isFiltered());return viewProcessorGenerateEventCacheAfterServerEvent(Nt,rn,Ot,en,NO_COMPLETE_CHILD_SOURCE,tn)}function viewProcessorRevertUserWrite(Nt,s,Ot,en,tn,nn){let rn;if(writeTreeRefShadowingWrite(en,Ot)!=null)return s;{const on=new WriteTreeCompleteChildSource(en,s,tn),sn=s.eventCache.getNode();let an;if(pathIsEmpty(Ot)||pathGetFront(Ot)===".priority"){let ln;if(s.serverCache.isFullyInitialized())ln=writeTreeRefCalcCompleteEventCache(en,viewCacheGetCompleteServerSnap(s));else{const cn=s.serverCache.getNode();assert(cn instanceof ChildrenNode,"serverChildren would be complete if leaf node"),ln=writeTreeRefCalcCompleteEventChildren(en,cn)}ln=ln,an=Nt.filter.updateFullNode(sn,ln,nn)}else{const ln=pathGetFront(Ot);let cn=writeTreeRefCalcCompleteChild(en,ln,s.serverCache);cn==null&&s.serverCache.isCompleteForChild(ln)&&(cn=sn.getImmediateChild(ln)),cn!=null?an=Nt.filter.updateChild(sn,ln,cn,pathPopFront(Ot),on,nn):s.eventCache.getNode().hasChild(ln)?an=Nt.filter.updateChild(sn,ln,ChildrenNode.EMPTY_NODE,pathPopFront(Ot),on,nn):an=sn,an.isEmpty()&&s.serverCache.isFullyInitialized()&&(rn=writeTreeRefCalcCompleteEventCache(en,viewCacheGetCompleteServerSnap(s)),rn.isLeafNode()&&(an=Nt.filter.updateFullNode(an,rn,nn)))}return rn=s.serverCache.isFullyInitialized()||writeTreeRefShadowingWrite(en,newEmptyPath())!=null,viewCacheUpdateEventSnap(s,an,rn,Nt.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class View{constructor(s,Ot){this.query_=s,this.eventRegistrations_=[];const en=this.query_._queryParams,tn=new IndexedFilter(en.getIndex()),nn=queryParamsGetNodeFilter(en);this.processor_=newViewProcessor(nn);const rn=Ot.serverCache,on=Ot.eventCache,sn=tn.updateFullNode(ChildrenNode.EMPTY_NODE,rn.getNode(),null),an=nn.updateFullNode(ChildrenNode.EMPTY_NODE,on.getNode(),null),ln=new CacheNode(sn,rn.isFullyInitialized(),tn.filtersNodes()),cn=new CacheNode(an,on.isFullyInitialized(),nn.filtersNodes());this.viewCache_=newViewCache(cn,ln),this.eventGenerator_=new EventGenerator(this.query_)}get query(){return this.query_}}function viewGetServerCache(Nt){return Nt.viewCache_.serverCache.getNode()}function viewGetCompleteServerCache(Nt,s){const Ot=viewCacheGetCompleteServerSnap(Nt.viewCache_);return Ot&&(Nt.query._queryParams.loadsAllData()||!pathIsEmpty(s)&&!Ot.getImmediateChild(pathGetFront(s)).isEmpty())?Ot.getChild(s):null}function viewIsEmpty(Nt){return Nt.eventRegistrations_.length===0}function viewAddEventRegistration(Nt,s){Nt.eventRegistrations_.push(s)}function viewRemoveEventRegistration(Nt,s,Ot){const en=[];if(Ot){assert(s==null,"A cancel should cancel all event registrations.");const tn=Nt.query._path;Nt.eventRegistrations_.forEach(nn=>{const rn=nn.createCancelEvent(Ot,tn);rn&&en.push(rn)})}if(s){let tn=[];for(let nn=0;nn<Nt.eventRegistrations_.length;++nn){const rn=Nt.eventRegistrations_[nn];if(!rn.matches(s))tn.push(rn);else if(s.hasAnyCallback()){tn=tn.concat(Nt.eventRegistrations_.slice(nn+1));break}}Nt.eventRegistrations_=tn}else Nt.eventRegistrations_=[];return en}function viewApplyOperation(Nt,s,Ot,en){s.type===OperationType.MERGE&&s.source.queryId!==null&&(assert(viewCacheGetCompleteServerSnap(Nt.viewCache_),"We should always have a full cache before handling merges"),assert(viewCacheGetCompleteEventSnap(Nt.viewCache_),"Missing event cache, even though we have a server cache"));const tn=Nt.viewCache_,nn=viewProcessorApplyOperation(Nt.processor_,tn,s,Ot,en);return viewProcessorAssertIndexed(Nt.processor_,nn.viewCache),assert(nn.viewCache.serverCache.isFullyInitialized()||!tn.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),Nt.viewCache_=nn.viewCache,viewGenerateEventsForChanges_(Nt,nn.changes,nn.viewCache.eventCache.getNode(),null)}function viewGetInitialEvents(Nt,s){const Ot=Nt.viewCache_.eventCache,en=[];return Ot.getNode().isLeafNode()||Ot.getNode().forEachChild(PRIORITY_INDEX,(nn,rn)=>{en.push(changeChildAdded(nn,rn))}),Ot.isFullyInitialized()&&en.push(changeValue(Ot.getNode())),viewGenerateEventsForChanges_(Nt,en,Ot.getNode(),s)}function viewGenerateEventsForChanges_(Nt,s,Ot,en){const tn=en?[en]:Nt.eventRegistrations_;return eventGeneratorGenerateEventsForChanges(Nt.eventGenerator_,s,Ot,tn)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let referenceConstructor$1;class SyncPoint{constructor(){this.views=new Map}}function syncPointSetReferenceConstructor(Nt){assert(!referenceConstructor$1,"__referenceConstructor has already been defined"),referenceConstructor$1=Nt}function syncPointGetReferenceConstructor(){return assert(referenceConstructor$1,"Reference.ts has not been loaded"),referenceConstructor$1}function syncPointIsEmpty(Nt){return Nt.views.size===0}function syncPointApplyOperation(Nt,s,Ot,en){const tn=s.source.queryId;if(tn!==null){const nn=Nt.views.get(tn);return assert(nn!=null,"SyncTree gave us an op for an invalid query."),viewApplyOperation(nn,s,Ot,en)}else{let nn=[];for(const rn of Nt.views.values())nn=nn.concat(viewApplyOperation(rn,s,Ot,en));return nn}}function syncPointGetView(Nt,s,Ot,en,tn){const nn=s._queryIdentifier,rn=Nt.views.get(nn);if(!rn){let on=writeTreeRefCalcCompleteEventCache(Ot,tn?en:null),sn=!1;on?sn=!0:en instanceof ChildrenNode?(on=writeTreeRefCalcCompleteEventChildren(Ot,en),sn=!1):(on=ChildrenNode.EMPTY_NODE,sn=!1);const an=newViewCache(new CacheNode(on,sn,!1),new CacheNode(en,tn,!1));return new View(s,an)}return rn}function syncPointAddEventRegistration(Nt,s,Ot,en,tn,nn){const rn=syncPointGetView(Nt,s,en,tn,nn);return Nt.views.has(s._queryIdentifier)||Nt.views.set(s._queryIdentifier,rn),viewAddEventRegistration(rn,Ot),viewGetInitialEvents(rn,Ot)}function syncPointRemoveEventRegistration(Nt,s,Ot,en){const tn=s._queryIdentifier,nn=[];let rn=[];const on=syncPointHasCompleteView(Nt);if(tn==="default")for(const[sn,an]of Nt.views.entries())rn=rn.concat(viewRemoveEventRegistration(an,Ot,en)),viewIsEmpty(an)&&(Nt.views.delete(sn),an.query._queryParams.loadsAllData()||nn.push(an.query));else{const sn=Nt.views.get(tn);sn&&(rn=rn.concat(viewRemoveEventRegistration(sn,Ot,en)),viewIsEmpty(sn)&&(Nt.views.delete(tn),sn.query._queryParams.loadsAllData()||nn.push(sn.query)))}return on&&!syncPointHasCompleteView(Nt)&&nn.push(new(syncPointGetReferenceConstructor())(s._repo,s._path)),{removed:nn,events:rn}}function syncPointGetQueryViews(Nt){const s=[];for(const Ot of Nt.views.values())Ot.query._queryParams.loadsAllData()||s.push(Ot);return s}function syncPointGetCompleteServerCache(Nt,s){let Ot=null;for(const en of Nt.views.values())Ot=Ot||viewGetCompleteServerCache(en,s);return Ot}function syncPointViewForQuery(Nt,s){if(s._queryParams.loadsAllData())return syncPointGetCompleteView(Nt);{const en=s._queryIdentifier;return Nt.views.get(en)}}function syncPointViewExistsForQuery(Nt,s){return syncPointViewForQuery(Nt,s)!=null}function syncPointHasCompleteView(Nt){return syncPointGetCompleteView(Nt)!=null}function syncPointGetCompleteView(Nt){for(const s of Nt.views.values())if(s.query._queryParams.loadsAllData())return s;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let referenceConstructor;function syncTreeSetReferenceConstructor(Nt){assert(!referenceConstructor,"__referenceConstructor has already been defined"),referenceConstructor=Nt}function syncTreeGetReferenceConstructor(){return assert(referenceConstructor,"Reference.ts has not been loaded"),referenceConstructor}let syncTreeNextQueryTag_=1;class SyncTree{constructor(s){this.listenProvider_=s,this.syncPointTree_=new ImmutableTree(null),this.pendingWriteTree_=newWriteTree(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function syncTreeApplyUserOverwrite(Nt,s,Ot,en,tn){return writeTreeAddOverwrite(Nt.pendingWriteTree_,s,Ot,en,tn),tn?syncTreeApplyOperationToSyncPoints_(Nt,new Overwrite(newOperationSourceUser(),s,Ot)):[]}function syncTreeAckUserWrite(Nt,s,Ot=!1){const en=writeTreeGetWrite(Nt.pendingWriteTree_,s);if(writeTreeRemoveWrite(Nt.pendingWriteTree_,s)){let nn=new ImmutableTree(null);return en.snap!=null?nn=nn.set(newEmptyPath(),!0):each(en.children,rn=>{nn=nn.set(new Path(rn),!0)}),syncTreeApplyOperationToSyncPoints_(Nt,new AckUserWrite(en.path,nn,Ot))}else return[]}function syncTreeApplyServerOverwrite(Nt,s,Ot){return syncTreeApplyOperationToSyncPoints_(Nt,new Overwrite(newOperationSourceServer(),s,Ot))}function syncTreeApplyServerMerge(Nt,s,Ot){const en=ImmutableTree.fromObject(Ot);return syncTreeApplyOperationToSyncPoints_(Nt,new Merge(newOperationSourceServer(),s,en))}function syncTreeApplyListenComplete(Nt,s){return syncTreeApplyOperationToSyncPoints_(Nt,new ListenComplete(newOperationSourceServer(),s))}function syncTreeApplyTaggedListenComplete(Nt,s,Ot){const en=syncTreeQueryKeyForTag_(Nt,Ot);if(en){const tn=syncTreeParseQueryKey_(en),nn=tn.path,rn=tn.queryId,on=newRelativePath(nn,s),sn=new ListenComplete(newOperationSourceServerTaggedQuery(rn),on);return syncTreeApplyTaggedOperation_(Nt,nn,sn)}else return[]}function syncTreeRemoveEventRegistration(Nt,s,Ot,en,tn=!1){const nn=s._path,rn=Nt.syncPointTree_.get(nn);let on=[];if(rn&&(s._queryIdentifier==="default"||syncPointViewExistsForQuery(rn,s))){const sn=syncPointRemoveEventRegistration(rn,s,Ot,en);syncPointIsEmpty(rn)&&(Nt.syncPointTree_=Nt.syncPointTree_.remove(nn));const an=sn.removed;if(on=sn.events,!tn){const ln=an.findIndex(un=>un._queryParams.loadsAllData())!==-1,cn=Nt.syncPointTree_.findOnPath(nn,(un,dn)=>syncPointHasCompleteView(dn));if(ln&&!cn){const un=Nt.syncPointTree_.subtree(nn);if(!un.isEmpty()){const dn=syncTreeCollectDistinctViewsForSubTree_(un);for(let hn=0;hn<dn.length;++hn){const fn=dn[hn],mn=fn.query,gn=syncTreeCreateListenerForView_(Nt,fn);Nt.listenProvider_.startListening(syncTreeQueryForListening_(mn),syncTreeTagForQuery(Nt,mn),gn.hashFn,gn.onComplete)}}}!cn&&an.length>0&&!en&&(ln?Nt.listenProvider_.stopListening(syncTreeQueryForListening_(s),null):an.forEach(un=>{const dn=Nt.queryToTagMap.get(syncTreeMakeQueryKey_(un));Nt.listenProvider_.stopListening(syncTreeQueryForListening_(un),dn)}))}syncTreeRemoveTags_(Nt,an)}return on}function syncTreeApplyTaggedQueryOverwrite(Nt,s,Ot,en){const tn=syncTreeQueryKeyForTag_(Nt,en);if(tn!=null){const nn=syncTreeParseQueryKey_(tn),rn=nn.path,on=nn.queryId,sn=newRelativePath(rn,s),an=new Overwrite(newOperationSourceServerTaggedQuery(on),sn,Ot);return syncTreeApplyTaggedOperation_(Nt,rn,an)}else return[]}function syncTreeApplyTaggedQueryMerge(Nt,s,Ot,en){const tn=syncTreeQueryKeyForTag_(Nt,en);if(tn){const nn=syncTreeParseQueryKey_(tn),rn=nn.path,on=nn.queryId,sn=newRelativePath(rn,s),an=ImmutableTree.fromObject(Ot),ln=new Merge(newOperationSourceServerTaggedQuery(on),sn,an);return syncTreeApplyTaggedOperation_(Nt,rn,ln)}else return[]}function syncTreeAddEventRegistration(Nt,s,Ot,en=!1){const tn=s._path;let nn=null,rn=!1;Nt.syncPointTree_.foreachOnPath(tn,(un,dn)=>{const hn=newRelativePath(un,tn);nn=nn||syncPointGetCompleteServerCache(dn,hn),rn=rn||syncPointHasCompleteView(dn)});let on=Nt.syncPointTree_.get(tn);on?(rn=rn||syncPointHasCompleteView(on),nn=nn||syncPointGetCompleteServerCache(on,newEmptyPath())):(on=new SyncPoint,Nt.syncPointTree_=Nt.syncPointTree_.set(tn,on));let sn;nn!=null?sn=!0:(sn=!1,nn=ChildrenNode.EMPTY_NODE,Nt.syncPointTree_.subtree(tn).foreachChild((dn,hn)=>{const fn=syncPointGetCompleteServerCache(hn,newEmptyPath());fn&&(nn=nn.updateImmediateChild(dn,fn))}));const an=syncPointViewExistsForQuery(on,s);if(!an&&!s._queryParams.loadsAllData()){const un=syncTreeMakeQueryKey_(s);assert(!Nt.queryToTagMap.has(un),"View does not exist, but we have a tag");const dn=syncTreeGetNextQueryTag_();Nt.queryToTagMap.set(un,dn),Nt.tagToQueryMap.set(dn,un)}const ln=writeTreeChildWrites(Nt.pendingWriteTree_,tn);let cn=syncPointAddEventRegistration(on,s,Ot,ln,nn,sn);if(!an&&!rn&&!en){const un=syncPointViewForQuery(on,s);cn=cn.concat(syncTreeSetupListener_(Nt,s,un))}return cn}function syncTreeCalcCompleteEventCache(Nt,s,Ot){const tn=Nt.pendingWriteTree_,nn=Nt.syncPointTree_.findOnPath(s,(rn,on)=>{const sn=newRelativePath(rn,s),an=syncPointGetCompleteServerCache(on,sn);if(an)return an});return writeTreeCalcCompleteEventCache(tn,s,nn,Ot,!0)}function syncTreeApplyOperationToSyncPoints_(Nt,s){return syncTreeApplyOperationHelper_(s,Nt.syncPointTree_,null,writeTreeChildWrites(Nt.pendingWriteTree_,newEmptyPath()))}function syncTreeApplyOperationHelper_(Nt,s,Ot,en){if(pathIsEmpty(Nt.path))return syncTreeApplyOperationDescendantsHelper_(Nt,s,Ot,en);{const tn=s.get(newEmptyPath());Ot==null&&tn!=null&&(Ot=syncPointGetCompleteServerCache(tn,newEmptyPath()));let nn=[];const rn=pathGetFront(Nt.path),on=Nt.operationForChild(rn),sn=s.children.get(rn);if(sn&&on){const an=Ot?Ot.getImmediateChild(rn):null,ln=writeTreeRefChild(en,rn);nn=nn.concat(syncTreeApplyOperationHelper_(on,sn,an,ln))}return tn&&(nn=nn.concat(syncPointApplyOperation(tn,Nt,en,Ot))),nn}}function syncTreeApplyOperationDescendantsHelper_(Nt,s,Ot,en){const tn=s.get(newEmptyPath());Ot==null&&tn!=null&&(Ot=syncPointGetCompleteServerCache(tn,newEmptyPath()));let nn=[];return s.children.inorderTraversal((rn,on)=>{const sn=Ot?Ot.getImmediateChild(rn):null,an=writeTreeRefChild(en,rn),ln=Nt.operationForChild(rn);ln&&(nn=nn.concat(syncTreeApplyOperationDescendantsHelper_(ln,on,sn,an)))}),tn&&(nn=nn.concat(syncPointApplyOperation(tn,Nt,en,Ot))),nn}function syncTreeCreateListenerForView_(Nt,s){const Ot=s.query,en=syncTreeTagForQuery(Nt,Ot);return{hashFn:()=>(viewGetServerCache(s)||ChildrenNode.EMPTY_NODE).hash(),onComplete:tn=>{if(tn==="ok")return en?syncTreeApplyTaggedListenComplete(Nt,Ot._path,en):syncTreeApplyListenComplete(Nt,Ot._path);{const nn=errorForServerCode(tn,Ot);return syncTreeRemoveEventRegistration(Nt,Ot,null,nn)}}}}function syncTreeTagForQuery(Nt,s){const Ot=syncTreeMakeQueryKey_(s);return Nt.queryToTagMap.get(Ot)}function syncTreeMakeQueryKey_(Nt){return Nt._path.toString()+"$"+Nt._queryIdentifier}function syncTreeQueryKeyForTag_(Nt,s){return Nt.tagToQueryMap.get(s)}function syncTreeParseQueryKey_(Nt){const s=Nt.indexOf("$");return assert(s!==-1&&s<Nt.length-1,"Bad queryKey."),{queryId:Nt.substr(s+1),path:new Path(Nt.substr(0,s))}}function syncTreeApplyTaggedOperation_(Nt,s,Ot){const en=Nt.syncPointTree_.get(s);assert(en,"Missing sync point for query tag that we're tracking");const tn=writeTreeChildWrites(Nt.pendingWriteTree_,s);return syncPointApplyOperation(en,Ot,tn,null)}function syncTreeCollectDistinctViewsForSubTree_(Nt){return Nt.fold((s,Ot,en)=>{if(Ot&&syncPointHasCompleteView(Ot))return[syncPointGetCompleteView(Ot)];{let tn=[];return Ot&&(tn=syncPointGetQueryViews(Ot)),each(en,(nn,rn)=>{tn=tn.concat(rn)}),tn}})}function syncTreeQueryForListening_(Nt){return Nt._queryParams.loadsAllData()&&!Nt._queryParams.isDefault()?new(syncTreeGetReferenceConstructor())(Nt._repo,Nt._path):Nt}function syncTreeRemoveTags_(Nt,s){for(let Ot=0;Ot<s.length;++Ot){const en=s[Ot];if(!en._queryParams.loadsAllData()){const tn=syncTreeMakeQueryKey_(en),nn=Nt.queryToTagMap.get(tn);Nt.queryToTagMap.delete(tn),Nt.tagToQueryMap.delete(nn)}}}function syncTreeGetNextQueryTag_(){return syncTreeNextQueryTag_++}function syncTreeSetupListener_(Nt,s,Ot){const en=s._path,tn=syncTreeTagForQuery(Nt,s),nn=syncTreeCreateListenerForView_(Nt,Ot),rn=Nt.listenProvider_.startListening(syncTreeQueryForListening_(s),tn,nn.hashFn,nn.onComplete),on=Nt.syncPointTree_.subtree(en);if(tn)assert(!syncPointHasCompleteView(on.value),"If we're adding a query, it shouldn't be shadowed");else{const sn=on.fold((an,ln,cn)=>{if(!pathIsEmpty(an)&&ln&&syncPointHasCompleteView(ln))return[syncPointGetCompleteView(ln).query];{let un=[];return ln&&(un=un.concat(syncPointGetQueryViews(ln).map(dn=>dn.query))),each(cn,(dn,hn)=>{un=un.concat(hn)}),un}});for(let an=0;an<sn.length;++an){const ln=sn[an];Nt.listenProvider_.stopListening(syncTreeQueryForListening_(ln),syncTreeTagForQuery(Nt,ln))}}return rn}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ExistingValueProvider{constructor(s){this.node_=s}getImmediateChild(s){const Ot=this.node_.getImmediateChild(s);return new ExistingValueProvider(Ot)}node(){return this.node_}}class DeferredValueProvider{constructor(s,Ot){this.syncTree_=s,this.path_=Ot}getImmediateChild(s){const Ot=pathChild(this.path_,s);return new DeferredValueProvider(this.syncTree_,Ot)}node(){return syncTreeCalcCompleteEventCache(this.syncTree_,this.path_)}}const generateWithValues=function(Nt){return Nt=Nt||{},Nt.timestamp=Nt.timestamp||new Date().getTime(),Nt},resolveDeferredLeafValue=function(Nt,s,Ot){if(!Nt||typeof Nt!="object")return Nt;if(assert(".sv"in Nt,"Unexpected leaf node or priority contents"),typeof Nt[".sv"]=="string")return resolveScalarDeferredValue(Nt[".sv"],s,Ot);if(typeof Nt[".sv"]=="object")return resolveComplexDeferredValue(Nt[".sv"],s);assert(!1,"Unexpected server value: "+JSON.stringify(Nt,null,2))},resolveScalarDeferredValue=function(Nt,s,Ot){switch(Nt){case"timestamp":return Ot.timestamp;default:assert(!1,"Unexpected server value: "+Nt)}},resolveComplexDeferredValue=function(Nt,s,Ot){Nt.hasOwnProperty("increment")||assert(!1,"Unexpected server value: "+JSON.stringify(Nt,null,2));const en=Nt.increment;typeof en!="number"&&assert(!1,"Unexpected increment value: "+en);const tn=s.node();if(assert(tn!==null&&typeof tn<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!tn.isLeafNode())return en;const rn=tn.getValue();return typeof rn!="number"?en:rn+en},resolveDeferredValueTree=function(Nt,s,Ot,en){return resolveDeferredValue(s,new DeferredValueProvider(Ot,Nt),en)},resolveDeferredValueSnapshot=function(Nt,s,Ot){return resolveDeferredValue(Nt,new ExistingValueProvider(s),Ot)};function resolveDeferredValue(Nt,s,Ot){const en=Nt.getPriority().val(),tn=resolveDeferredLeafValue(en,s.getImmediateChild(".priority"),Ot);let nn;if(Nt.isLeafNode()){const rn=Nt,on=resolveDeferredLeafValue(rn.getValue(),s,Ot);return on!==rn.getValue()||tn!==rn.getPriority().val()?new LeafNode(on,nodeFromJSON(tn)):Nt}else{const rn=Nt;return nn=rn,tn!==rn.getPriority().val()&&(nn=nn.updatePriority(new LeafNode(tn))),rn.forEachChild(PRIORITY_INDEX,(on,sn)=>{const an=resolveDeferredValue(sn,s.getImmediateChild(on),Ot);an!==sn&&(nn=nn.updateImmediateChild(on,an))}),nn}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tree{constructor(s="",Ot=null,en={children:{},childCount:0}){this.name=s,this.parent=Ot,this.node=en}}function treeSubTree(Nt,s){let Ot=s instanceof Path?s:new Path(s),en=Nt,tn=pathGetFront(Ot);for(;tn!==null;){const nn=safeGet(en.node.children,tn)||{children:{},childCount:0};en=new Tree(tn,en,nn),Ot=pathPopFront(Ot),tn=pathGetFront(Ot)}return en}function treeGetValue(Nt){return Nt.node.value}function treeSetValue(Nt,s){Nt.node.value=s,treeUpdateParents(Nt)}function treeHasChildren(Nt){return Nt.node.childCount>0}function treeIsEmpty(Nt){return treeGetValue(Nt)===void 0&&!treeHasChildren(Nt)}function treeForEachChild(Nt,s){each(Nt.node.children,(Ot,en)=>{s(new Tree(Ot,Nt,en))})}function treeForEachDescendant(Nt,s,Ot,en){Ot&&!en&&s(Nt),treeForEachChild(Nt,tn=>{treeForEachDescendant(tn,s,!0,en)}),Ot&&en&&s(Nt)}function treeForEachAncestor(Nt,s,Ot){let en=Ot?Nt:Nt.parent;for(;en!==null;){if(s(en))return!0;en=en.parent}return!1}function treeGetPath(Nt){return new Path(Nt.parent===null?Nt.name:treeGetPath(Nt.parent)+"/"+Nt.name)}function treeUpdateParents(Nt){Nt.parent!==null&&treeUpdateChild(Nt.parent,Nt.name,Nt)}function treeUpdateChild(Nt,s,Ot){const en=treeIsEmpty(Ot),tn=contains(Nt.node.children,s);en&&tn?(delete Nt.node.children[s],Nt.node.childCount--,treeUpdateParents(Nt)):!en&&!tn&&(Nt.node.children[s]=Ot.node,Nt.node.childCount++,treeUpdateParents(Nt))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const INVALID_KEY_REGEX_=/[\[\].#$\/\u0000-\u001F\u007F]/,INVALID_PATH_REGEX_=/[\[\].#$\u0000-\u001F\u007F]/,MAX_LEAF_SIZE_=10*1024*1024,isValidKey=function(Nt){return typeof Nt=="string"&&Nt.length!==0&&!INVALID_KEY_REGEX_.test(Nt)},isValidPathString=function(Nt){return typeof Nt=="string"&&Nt.length!==0&&!INVALID_PATH_REGEX_.test(Nt)},isValidRootPathString=function(Nt){return Nt&&(Nt=Nt.replace(/^\/*\.info(\/|$)/,"/")),isValidPathString(Nt)},validateFirebaseData=function(Nt,s,Ot){const en=Ot instanceof Path?new ValidationPath(Ot,Nt):Ot;if(s===void 0)throw new Error(Nt+"contains undefined "+validationPathToErrorString(en));if(typeof s=="function")throw new Error(Nt+"contains a function "+validationPathToErrorString(en)+" with contents = "+s.toString());if(isInvalidJSONNumber(s))throw new Error(Nt+"contains "+s.toString()+" "+validationPathToErrorString(en));if(typeof s=="string"&&s.length>MAX_LEAF_SIZE_/3&&stringLength(s)>MAX_LEAF_SIZE_)throw new Error(Nt+"contains a string greater than "+MAX_LEAF_SIZE_+" utf8 bytes "+validationPathToErrorString(en)+" ('"+s.substring(0,50)+"...')");if(s&&typeof s=="object"){let tn=!1,nn=!1;if(each(s,(rn,on)=>{if(rn===".value")tn=!0;else if(rn!==".priority"&&rn!==".sv"&&(nn=!0,!isValidKey(rn)))throw new Error(Nt+" contains an invalid key ("+rn+") "+validationPathToErrorString(en)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);validationPathPush(en,rn),validateFirebaseData(Nt,on,en),validationPathPop(en)}),tn&&nn)throw new Error(Nt+' contains ".value" child '+validationPathToErrorString(en)+" in addition to actual children.")}},validatePathString=function(Nt,s,Ot,en){if(!(en&&Ot===void 0)&&!isValidPathString(Ot))throw new Error(errorPrefix(Nt,s)+'was an invalid path = "'+Ot+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},validateRootPathString=function(Nt,s,Ot,en){Ot&&(Ot=Ot.replace(/^\/*\.info(\/|$)/,"/")),validatePathString(Nt,s,Ot,en)},validateUrl=function(Nt,s){const Ot=s.path.toString();if(typeof s.repoInfo.host!="string"||s.repoInfo.host.length===0||!isValidKey(s.repoInfo.namespace)&&s.repoInfo.host.split(":")[0]!=="localhost"||Ot.length!==0&&!isValidRootPathString(Ot))throw new Error(errorPrefix(Nt,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EventQueue{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function eventQueueQueueEvents(Nt,s){let Ot=null;for(let en=0;en<s.length;en++){const tn=s[en],nn=tn.getPath();Ot!==null&&!pathEquals(nn,Ot.path)&&(Nt.eventLists_.push(Ot),Ot=null),Ot===null&&(Ot={events:[],path:nn}),Ot.events.push(tn)}Ot&&Nt.eventLists_.push(Ot)}function eventQueueRaiseEventsAtPath(Nt,s,Ot){eventQueueQueueEvents(Nt,Ot),eventQueueRaiseQueuedEventsMatchingPredicate(Nt,en=>pathEquals(en,s))}function eventQueueRaiseEventsForChangedPath(Nt,s,Ot){eventQueueQueueEvents(Nt,Ot),eventQueueRaiseQueuedEventsMatchingPredicate(Nt,en=>pathContains(en,s)||pathContains(s,en))}function eventQueueRaiseQueuedEventsMatchingPredicate(Nt,s){Nt.recursionDepth_++;let Ot=!0;for(let en=0;en<Nt.eventLists_.length;en++){const tn=Nt.eventLists_[en];if(tn){const nn=tn.path;s(nn)?(eventListRaise(Nt.eventLists_[en]),Nt.eventLists_[en]=null):Ot=!1}}Ot&&(Nt.eventLists_=[]),Nt.recursionDepth_--}function eventListRaise(Nt){for(let s=0;s<Nt.events.length;s++){const Ot=Nt.events[s];if(Ot!==null){Nt.events[s]=null;const en=Ot.getEventRunner();logger&&log("event: "+Ot.toString()),exceptionGuard(en)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const INTERRUPT_REASON="repo_interrupt",MAX_TRANSACTION_RETRIES=25;class Repo{constructor(s,Ot,en,tn){this.repoInfo_=s,this.forceRestClient_=Ot,this.authTokenProvider_=en,this.appCheckProvider_=tn,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new EventQueue,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=newSparseSnapshotTree(),this.transactionQueueTree_=new Tree,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function repoStart(Nt,s,Ot){if(Nt.stats_=statsManagerGetCollection(Nt.repoInfo_),Nt.forceRestClient_||beingCrawled())Nt.server_=new ReadonlyRestClient(Nt.repoInfo_,(en,tn,nn,rn)=>{repoOnDataUpdate(Nt,en,tn,nn,rn)},Nt.authTokenProvider_,Nt.appCheckProvider_),setTimeout(()=>repoOnConnectStatus(Nt,!0),0);else{if(typeof Ot<"u"&&Ot!==null){if(typeof Ot!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{stringify(Ot)}catch(en){throw new Error("Invalid authOverride provided: "+en)}}Nt.persistentConnection_=new PersistentConnection(Nt.repoInfo_,s,(en,tn,nn,rn)=>{repoOnDataUpdate(Nt,en,tn,nn,rn)},en=>{repoOnConnectStatus(Nt,en)},en=>{repoOnServerInfoUpdate(Nt,en)},Nt.authTokenProvider_,Nt.appCheckProvider_,Ot),Nt.server_=Nt.persistentConnection_}Nt.authTokenProvider_.addTokenChangeListener(en=>{Nt.server_.refreshAuthToken(en)}),Nt.appCheckProvider_.addTokenChangeListener(en=>{Nt.server_.refreshAppCheckToken(en.token)}),Nt.statsReporter_=statsManagerGetOrCreateReporter(Nt.repoInfo_,()=>new StatsReporter(Nt.stats_,Nt.server_)),Nt.infoData_=new SnapshotHolder,Nt.infoSyncTree_=new SyncTree({startListening:(en,tn,nn,rn)=>{let on=[];const sn=Nt.infoData_.getNode(en._path);return sn.isEmpty()||(on=syncTreeApplyServerOverwrite(Nt.infoSyncTree_,en._path,sn),setTimeout(()=>{rn("ok")},0)),on},stopListening:()=>{}}),repoUpdateInfo(Nt,"connected",!1),Nt.serverSyncTree_=new SyncTree({startListening:(en,tn,nn,rn)=>(Nt.server_.listen(en,nn,tn,(on,sn)=>{const an=rn(on,sn);eventQueueRaiseEventsForChangedPath(Nt.eventQueue_,en._path,an)}),[]),stopListening:(en,tn)=>{Nt.server_.unlisten(en,tn)}})}function repoServerTime(Nt){const Ot=Nt.infoData_.getNode(new Path(".info/serverTimeOffset")).val()||0;return new Date().getTime()+Ot}function repoGenerateServerValues(Nt){return generateWithValues({timestamp:repoServerTime(Nt)})}function repoOnDataUpdate(Nt,s,Ot,en,tn){Nt.dataUpdateCount++;const nn=new Path(s);Ot=Nt.interceptServerDataCallback_?Nt.interceptServerDataCallback_(s,Ot):Ot;let rn=[];if(tn)if(en){const sn=map(Ot,an=>nodeFromJSON(an));rn=syncTreeApplyTaggedQueryMerge(Nt.serverSyncTree_,nn,sn,tn)}else{const sn=nodeFromJSON(Ot);rn=syncTreeApplyTaggedQueryOverwrite(Nt.serverSyncTree_,nn,sn,tn)}else if(en){const sn=map(Ot,an=>nodeFromJSON(an));rn=syncTreeApplyServerMerge(Nt.serverSyncTree_,nn,sn)}else{const sn=nodeFromJSON(Ot);rn=syncTreeApplyServerOverwrite(Nt.serverSyncTree_,nn,sn)}let on=nn;rn.length>0&&(on=repoRerunTransactions(Nt,nn)),eventQueueRaiseEventsForChangedPath(Nt.eventQueue_,on,rn)}function repoOnConnectStatus(Nt,s){repoUpdateInfo(Nt,"connected",s),s===!1&&repoRunOnDisconnectEvents(Nt)}function repoOnServerInfoUpdate(Nt,s){each(s,(Ot,en)=>{repoUpdateInfo(Nt,Ot,en)})}function repoUpdateInfo(Nt,s,Ot){const en=new Path("/.info/"+s),tn=nodeFromJSON(Ot);Nt.infoData_.updateSnapshot(en,tn);const nn=syncTreeApplyServerOverwrite(Nt.infoSyncTree_,en,tn);eventQueueRaiseEventsForChangedPath(Nt.eventQueue_,en,nn)}function repoGetNextWriteId(Nt){return Nt.nextWriteId_++}function repoRunOnDisconnectEvents(Nt){repoLog(Nt,"onDisconnectEvents");const s=repoGenerateServerValues(Nt),Ot=newSparseSnapshotTree();sparseSnapshotTreeForEachTree(Nt.onDisconnect_,newEmptyPath(),(tn,nn)=>{const rn=resolveDeferredValueTree(tn,nn,Nt.serverSyncTree_,s);sparseSnapshotTreeRemember(Ot,tn,rn)});let en=[];sparseSnapshotTreeForEachTree(Ot,newEmptyPath(),(tn,nn)=>{en=en.concat(syncTreeApplyServerOverwrite(Nt.serverSyncTree_,tn,nn));const rn=repoAbortTransactions(Nt,tn);repoRerunTransactions(Nt,rn)}),Nt.onDisconnect_=newSparseSnapshotTree(),eventQueueRaiseEventsForChangedPath(Nt.eventQueue_,newEmptyPath(),en)}function repoAddEventCallbackForQuery(Nt,s,Ot){let en;pathGetFront(s._path)===".info"?en=syncTreeAddEventRegistration(Nt.infoSyncTree_,s,Ot):en=syncTreeAddEventRegistration(Nt.serverSyncTree_,s,Ot),eventQueueRaiseEventsAtPath(Nt.eventQueue_,s._path,en)}function repoRemoveEventCallbackForQuery(Nt,s,Ot){let en;pathGetFront(s._path)===".info"?en=syncTreeRemoveEventRegistration(Nt.infoSyncTree_,s,Ot):en=syncTreeRemoveEventRegistration(Nt.serverSyncTree_,s,Ot),eventQueueRaiseEventsAtPath(Nt.eventQueue_,s._path,en)}function repoInterrupt(Nt){Nt.persistentConnection_&&Nt.persistentConnection_.interrupt(INTERRUPT_REASON)}function repoLog(Nt,...s){let Ot="";Nt.persistentConnection_&&(Ot=Nt.persistentConnection_.id+":"),log(Ot,...s)}function repoGetLatestState(Nt,s,Ot){return syncTreeCalcCompleteEventCache(Nt.serverSyncTree_,s,Ot)||ChildrenNode.EMPTY_NODE}function repoSendReadyTransactions(Nt,s=Nt.transactionQueueTree_){if(s||repoPruneCompletedTransactionsBelowNode(Nt,s),treeGetValue(s)){const Ot=repoBuildTransactionQueue(Nt,s);assert(Ot.length>0,"Sending zero length transaction queue"),Ot.every(tn=>tn.status===0)&&repoSendTransactionQueue(Nt,treeGetPath(s),Ot)}else treeHasChildren(s)&&treeForEachChild(s,Ot=>{repoSendReadyTransactions(Nt,Ot)})}function repoSendTransactionQueue(Nt,s,Ot){const en=Ot.map(an=>an.currentWriteId),tn=repoGetLatestState(Nt,s,en);let nn=tn;const rn=tn.hash();for(let an=0;an<Ot.length;an++){const ln=Ot[an];assert(ln.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),ln.status=1,ln.retryCount++;const cn=newRelativePath(s,ln.path);nn=nn.updateChild(cn,ln.currentOutputSnapshotRaw)}const on=nn.val(!0),sn=s;Nt.server_.put(sn.toString(),on,an=>{repoLog(Nt,"transaction put response",{path:sn.toString(),status:an});let ln=[];if(an==="ok"){const cn=[];for(let un=0;un<Ot.length;un++)Ot[un].status=2,ln=ln.concat(syncTreeAckUserWrite(Nt.serverSyncTree_,Ot[un].currentWriteId)),Ot[un].onComplete&&cn.push(()=>Ot[un].onComplete(null,!0,Ot[un].currentOutputSnapshotResolved)),Ot[un].unwatcher();repoPruneCompletedTransactionsBelowNode(Nt,treeSubTree(Nt.transactionQueueTree_,s)),repoSendReadyTransactions(Nt,Nt.transactionQueueTree_),eventQueueRaiseEventsForChangedPath(Nt.eventQueue_,s,ln);for(let un=0;un<cn.length;un++)exceptionGuard(cn[un])}else{if(an==="datastale")for(let cn=0;cn<Ot.length;cn++)Ot[cn].status===3?Ot[cn].status=4:Ot[cn].status=0;else{warn("transaction at "+sn.toString()+" failed: "+an);for(let cn=0;cn<Ot.length;cn++)Ot[cn].status=4,Ot[cn].abortReason=an}repoRerunTransactions(Nt,s)}},rn)}function repoRerunTransactions(Nt,s){const Ot=repoGetAncestorTransactionNode(Nt,s),en=treeGetPath(Ot),tn=repoBuildTransactionQueue(Nt,Ot);return repoRerunTransactionQueue(Nt,tn,en),en}function repoRerunTransactionQueue(Nt,s,Ot){if(s.length===0)return;const en=[];let tn=[];const rn=s.filter(on=>on.status===0).map(on=>on.currentWriteId);for(let on=0;on<s.length;on++){const sn=s[on],an=newRelativePath(Ot,sn.path);let ln=!1,cn;if(assert(an!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),sn.status===4)ln=!0,cn=sn.abortReason,tn=tn.concat(syncTreeAckUserWrite(Nt.serverSyncTree_,sn.currentWriteId,!0));else if(sn.status===0)if(sn.retryCount>=MAX_TRANSACTION_RETRIES)ln=!0,cn="maxretry",tn=tn.concat(syncTreeAckUserWrite(Nt.serverSyncTree_,sn.currentWriteId,!0));else{const un=repoGetLatestState(Nt,sn.path,rn);sn.currentInputSnapshot=un;const dn=s[on].update(un.val());if(dn!==void 0){validateFirebaseData("transaction failed: Data returned ",dn,sn.path);let hn=nodeFromJSON(dn);typeof dn=="object"&&dn!=null&&contains(dn,".priority")||(hn=hn.updatePriority(un.getPriority()));const mn=sn.currentWriteId,gn=repoGenerateServerValues(Nt),pn=resolveDeferredValueSnapshot(hn,un,gn);sn.currentOutputSnapshotRaw=hn,sn.currentOutputSnapshotResolved=pn,sn.currentWriteId=repoGetNextWriteId(Nt),rn.splice(rn.indexOf(mn),1),tn=tn.concat(syncTreeApplyUserOverwrite(Nt.serverSyncTree_,sn.path,pn,sn.currentWriteId,sn.applyLocally)),tn=tn.concat(syncTreeAckUserWrite(Nt.serverSyncTree_,mn,!0))}else ln=!0,cn="nodata",tn=tn.concat(syncTreeAckUserWrite(Nt.serverSyncTree_,sn.currentWriteId,!0))}eventQueueRaiseEventsForChangedPath(Nt.eventQueue_,Ot,tn),tn=[],ln&&(s[on].status=2,function(un){setTimeout(un,Math.floor(0))}(s[on].unwatcher),s[on].onComplete&&(cn==="nodata"?en.push(()=>s[on].onComplete(null,!1,s[on].currentInputSnapshot)):en.push(()=>s[on].onComplete(new Error(cn),!1,null))))}repoPruneCompletedTransactionsBelowNode(Nt,Nt.transactionQueueTree_);for(let on=0;on<en.length;on++)exceptionGuard(en[on]);repoSendReadyTransactions(Nt,Nt.transactionQueueTree_)}function repoGetAncestorTransactionNode(Nt,s){let Ot,en=Nt.transactionQueueTree_;for(Ot=pathGetFront(s);Ot!==null&&treeGetValue(en)===void 0;)en=treeSubTree(en,Ot),s=pathPopFront(s),Ot=pathGetFront(s);return en}function repoBuildTransactionQueue(Nt,s){const Ot=[];return repoAggregateTransactionQueuesForNode(Nt,s,Ot),Ot.sort((en,tn)=>en.order-tn.order),Ot}function repoAggregateTransactionQueuesForNode(Nt,s,Ot){const en=treeGetValue(s);if(en)for(let tn=0;tn<en.length;tn++)Ot.push(en[tn]);treeForEachChild(s,tn=>{repoAggregateTransactionQueuesForNode(Nt,tn,Ot)})}function repoPruneCompletedTransactionsBelowNode(Nt,s){const Ot=treeGetValue(s);if(Ot){let en=0;for(let tn=0;tn<Ot.length;tn++)Ot[tn].status!==2&&(Ot[en]=Ot[tn],en++);Ot.length=en,treeSetValue(s,Ot.length>0?Ot:void 0)}treeForEachChild(s,en=>{repoPruneCompletedTransactionsBelowNode(Nt,en)})}function repoAbortTransactions(Nt,s){const Ot=treeGetPath(repoGetAncestorTransactionNode(Nt,s)),en=treeSubTree(Nt.transactionQueueTree_,s);return treeForEachAncestor(en,tn=>{repoAbortTransactionsOnNode(Nt,tn)}),repoAbortTransactionsOnNode(Nt,en),treeForEachDescendant(en,tn=>{repoAbortTransactionsOnNode(Nt,tn)}),Ot}function repoAbortTransactionsOnNode(Nt,s){const Ot=treeGetValue(s);if(Ot){const en=[];let tn=[],nn=-1;for(let rn=0;rn<Ot.length;rn++)Ot[rn].status===3||(Ot[rn].status===1?(assert(nn===rn-1,"All SENT items should be at beginning of queue."),nn=rn,Ot[rn].status=3,Ot[rn].abortReason="set"):(assert(Ot[rn].status===0,"Unexpected transaction status in abort"),Ot[rn].unwatcher(),tn=tn.concat(syncTreeAckUserWrite(Nt.serverSyncTree_,Ot[rn].currentWriteId,!0)),Ot[rn].onComplete&&en.push(Ot[rn].onComplete.bind(null,new Error("set"),!1,null))));nn===-1?treeSetValue(s,void 0):Ot.length=nn+1,eventQueueRaiseEventsForChangedPath(Nt.eventQueue_,treeGetPath(s),tn);for(let rn=0;rn<en.length;rn++)exceptionGuard(en[rn])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function decodePath(Nt){let s="";const Ot=Nt.split("/");for(let en=0;en<Ot.length;en++)if(Ot[en].length>0){let tn=Ot[en];try{tn=decodeURIComponent(tn.replace(/\+/g," "))}catch{}s+="/"+tn}return s}function decodeQuery(Nt){const s={};Nt.charAt(0)==="?"&&(Nt=Nt.substring(1));for(const Ot of Nt.split("&")){if(Ot.length===0)continue;const en=Ot.split("=");en.length===2?s[decodeURIComponent(en[0])]=decodeURIComponent(en[1]):warn(`Invalid query segment '${Ot}' in query '${Nt}'`)}return s}const parseRepoInfo=function(Nt,s){const Ot=parseDatabaseURL(Nt),en=Ot.namespace;Ot.domain==="firebase.com"&&fatal(Ot.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!en||en==="undefined")&&Ot.domain!=="localhost"&&fatal("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),Ot.secure||warnIfPageIsSecure();const tn=Ot.scheme==="ws"||Ot.scheme==="wss";return{repoInfo:new RepoInfo(Ot.host,Ot.secure,en,tn,s,"",en!==Ot.subdomain),path:new Path(Ot.pathString)}},parseDatabaseURL=function(Nt){let s="",Ot="",en="",tn="",nn="",rn=!0,on="https",sn=443;if(typeof Nt=="string"){let an=Nt.indexOf("//");an>=0&&(on=Nt.substring(0,an-1),Nt=Nt.substring(an+2));let ln=Nt.indexOf("/");ln===-1&&(ln=Nt.length);let cn=Nt.indexOf("?");cn===-1&&(cn=Nt.length),s=Nt.substring(0,Math.min(ln,cn)),ln<cn&&(tn=decodePath(Nt.substring(ln,cn)));const un=decodeQuery(Nt.substring(Math.min(Nt.length,cn)));an=s.indexOf(":"),an>=0?(rn=on==="https"||on==="wss",sn=parseInt(s.substring(an+1),10)):an=s.length;const dn=s.slice(0,an);if(dn.toLowerCase()==="localhost")Ot="localhost";else if(dn.split(".").length<=2)Ot=dn;else{const hn=s.indexOf(".");en=s.substring(0,hn).toLowerCase(),Ot=s.substring(hn+1),nn=en}"ns"in un&&(nn=un.ns)}return{host:s,port:sn,domain:Ot,subdomain:en,secure:rn,scheme:on,pathString:tn,namespace:nn}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DataEvent{constructor(s,Ot,en,tn){this.eventType=s,this.eventRegistration=Ot,this.snapshot=en,this.prevName=tn}getPath(){const s=this.snapshot.ref;return this.eventType==="value"?s._path:s.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+stringify(this.snapshot.exportVal())}}class CancelEvent{constructor(s,Ot,en){this.eventRegistration=s,this.error=Ot,this.path=en}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CallbackContext{constructor(s,Ot){this.snapshotCallback=s,this.cancelCallback=Ot}onValue(s,Ot){this.snapshotCallback.call(null,s,Ot)}onCancel(s){return assert(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,s)}get hasCancelCallback(){return!!this.cancelCallback}matches(s){return this.snapshotCallback===s.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===s.snapshotCallback.userCallback&&this.snapshotCallback.context===s.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QueryImpl{constructor(s,Ot,en,tn){this._repo=s,this._path=Ot,this._queryParams=en,this._orderByCalled=tn}get key(){return pathIsEmpty(this._path)?null:pathGetBack(this._path)}get ref(){return new ReferenceImpl(this._repo,this._path)}get _queryIdentifier(){const s=queryParamsGetQueryObject(this._queryParams),Ot=ObjectToUniqueKey(s);return Ot==="{}"?"default":Ot}get _queryObject(){return queryParamsGetQueryObject(this._queryParams)}isEqual(s){if(s=getModularInstance$1(s),!(s instanceof QueryImpl))return!1;const Ot=this._repo===s._repo,en=pathEquals(this._path,s._path),tn=this._queryIdentifier===s._queryIdentifier;return Ot&&en&&tn}toJSON(){return this.toString()}toString(){return this._repo.toString()+pathToUrlEncodedString(this._path)}}class ReferenceImpl extends QueryImpl{constructor(s,Ot){super(s,Ot,new QueryParams,!1)}get parent(){const s=pathParent(this._path);return s===null?null:new ReferenceImpl(this._repo,s)}get root(){let s=this;for(;s.parent!==null;)s=s.parent;return s}}class DataSnapshot{constructor(s,Ot,en){this._node=s,this.ref=Ot,this._index=en}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(s){const Ot=new Path(s),en=child$1(this.ref,s);return new DataSnapshot(this._node.getChild(Ot),en,PRIORITY_INDEX)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(s){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(en,tn)=>s(new DataSnapshot(tn,child$1(this.ref,en),PRIORITY_INDEX)))}hasChild(s){const Ot=new Path(s);return!this._node.getChild(Ot).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function ref$2(Nt,s){return Nt=getModularInstance$1(Nt),Nt._checkNotDeleted("ref"),s!==void 0?child$1(Nt._root,s):Nt._root}function child$1(Nt,s){return Nt=getModularInstance$1(Nt),pathGetFront(Nt._path)===null?validateRootPathString("child","path",s,!1):validatePathString("child","path",s,!1),new ReferenceImpl(Nt._repo,pathChild(Nt._path,s))}class ValueEventRegistration{constructor(s){this.callbackContext=s}respondsTo(s){return s==="value"}createEvent(s,Ot){const en=Ot._queryParams.getIndex();return new DataEvent("value",this,new DataSnapshot(s.snapshotNode,new ReferenceImpl(Ot._repo,Ot._path),en))}getEventRunner(s){return s.getEventType()==="cancel"?()=>this.callbackContext.onCancel(s.error):()=>this.callbackContext.onValue(s.snapshot,null)}createCancelEvent(s,Ot){return this.callbackContext.hasCancelCallback?new CancelEvent(this,s,Ot):null}matches(s){return s instanceof ValueEventRegistration?!s.callbackContext||!this.callbackContext?!0:s.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}class ChildEventRegistration{constructor(s,Ot){this.eventType=s,this.callbackContext=Ot}respondsTo(s){let Ot=s==="children_added"?"child_added":s;return Ot=Ot==="children_removed"?"child_removed":Ot,this.eventType===Ot}createCancelEvent(s,Ot){return this.callbackContext.hasCancelCallback?new CancelEvent(this,s,Ot):null}createEvent(s,Ot){assert(s.childName!=null,"Child events should have a childName.");const en=child$1(new ReferenceImpl(Ot._repo,Ot._path),s.childName),tn=Ot._queryParams.getIndex();return new DataEvent(s.type,this,new DataSnapshot(s.snapshotNode,en,tn),s.prevName)}getEventRunner(s){return s.getEventType()==="cancel"?()=>this.callbackContext.onCancel(s.error):()=>this.callbackContext.onValue(s.snapshot,s.prevName)}matches(s){return s instanceof ChildEventRegistration?this.eventType===s.eventType&&(!this.callbackContext||!s.callbackContext||this.callbackContext.matches(s.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}}function addEventListener(Nt,s,Ot,en,tn){let nn;if(typeof en=="object"&&(nn=void 0,tn=en),typeof en=="function"&&(nn=en),tn&&tn.onlyOnce){const sn=Ot,an=(ln,cn)=>{repoRemoveEventCallbackForQuery(Nt._repo,Nt,on),sn(ln,cn)};an.userCallback=Ot.userCallback,an.context=Ot.context,Ot=an}const rn=new CallbackContext(Ot,nn||void 0),on=s==="value"?new ValueEventRegistration(rn):new ChildEventRegistration(s,rn);return repoAddEventCallbackForQuery(Nt._repo,Nt,on),()=>repoRemoveEventCallbackForQuery(Nt._repo,Nt,on)}function onValue(Nt,s,Ot,en){return addEventListener(Nt,"value",s,Ot,en)}syncPointSetReferenceConstructor(ReferenceImpl);syncTreeSetReferenceConstructor(ReferenceImpl);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FIREBASE_DATABASE_EMULATOR_HOST_VAR="FIREBASE_DATABASE_EMULATOR_HOST",repos={};let useRestClient=!1;function repoManagerApplyEmulatorSettings(Nt,s,Ot,en){Nt.repoInfo_=new RepoInfo(`${s}:${Ot}`,!1,Nt.repoInfo_.namespace,Nt.repoInfo_.webSocketOnly,Nt.repoInfo_.nodeAdmin,Nt.repoInfo_.persistenceKey,Nt.repoInfo_.includeNamespaceInQueryParams,!0),en&&(Nt.authTokenProvider_=en)}function repoManagerDatabaseFromApp(Nt,s,Ot,en,tn){let nn=en||Nt.options.databaseURL;nn===void 0&&(Nt.options.projectId||fatal("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),log("Using default host for project ",Nt.options.projectId),nn=`${Nt.options.projectId}-default-rtdb.firebaseio.com`);let rn=parseRepoInfo(nn,tn),on=rn.repoInfo,sn,an;typeof process<"u"&&define_process_env_default$1&&(an=define_process_env_default$1[FIREBASE_DATABASE_EMULATOR_HOST_VAR]),an?(sn=!0,nn=`http://${an}?ns=${on.namespace}`,rn=parseRepoInfo(nn,tn),on=rn.repoInfo):sn=!rn.repoInfo.secure;const ln=tn&&sn?new EmulatorTokenProvider(EmulatorTokenProvider.OWNER):new FirebaseAuthTokenProvider(Nt.name,Nt.options,s);validateUrl("Invalid Firebase Database URL",rn),pathIsEmpty(rn.path)||fatal("Database URL must point to the root of a Firebase Database (not including a child path).");const cn=repoManagerCreateRepo(on,Nt,ln,new AppCheckTokenProvider(Nt.name,Ot));return new Database(cn,Nt)}function repoManagerDeleteRepo(Nt,s){const Ot=repos[s];(!Ot||Ot[Nt.key]!==Nt)&&fatal(`Database ${s}(${Nt.repoInfo_}) has already been deleted.`),repoInterrupt(Nt),delete Ot[Nt.key]}function repoManagerCreateRepo(Nt,s,Ot,en){let tn=repos[s.name];tn||(tn={},repos[s.name]=tn);let nn=tn[Nt.toURLString()];return nn&&fatal("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),nn=new Repo(Nt,useRestClient,Ot,en),tn[Nt.toURLString()]=nn,nn}class Database{constructor(s,Ot){this._repoInternal=s,this.app=Ot,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(repoStart(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new ReferenceImpl(this._repo,newEmptyPath())),this._rootInternal}_delete(){return this._rootInternal!==null&&(repoManagerDeleteRepo(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(s){this._rootInternal===null&&fatal("Cannot call "+s+" on a deleted database.")}}function getDatabase(Nt=getApp(),s){const Ot=_getProvider(Nt,"database").getImmediate({identifier:s});if(!Ot._instanceStarted){const en=getDefaultEmulatorHostnameAndPort$1("database");en&&connectDatabaseEmulator(Ot,...en)}return Ot}function connectDatabaseEmulator(Nt,s,Ot,en={}){Nt=getModularInstance$1(Nt),Nt._checkNotDeleted("useEmulator"),Nt._instanceStarted&&fatal("Cannot call useEmulator() after instance has already been initialized.");const tn=Nt._repoInternal;let nn;if(tn.repoInfo_.nodeAdmin)en.mockUserToken&&fatal('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),nn=new EmulatorTokenProvider(EmulatorTokenProvider.OWNER);else if(en.mockUserToken){const rn=typeof en.mockUserToken=="string"?en.mockUserToken:createMockUserToken$1(en.mockUserToken,Nt.app.options.projectId);nn=new EmulatorTokenProvider(rn)}repoManagerApplyEmulatorSettings(tn,s,Ot,nn)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function registerDatabase(Nt){setSDKVersion(SDK_VERSION$1),_registerComponent(new Component$1("database",(s,{instanceIdentifier:Ot})=>{const en=s.getProvider("app").getImmediate(),tn=s.getProvider("auth-internal"),nn=s.getProvider("app-check-internal");return repoManagerDatabaseFromApp(en,tn,nn,Ot)},"PUBLIC").setMultipleInstances(!0)),registerVersion(name$1,version$2,Nt),registerVersion(name$1,version$2,"esm2017")}PersistentConnection.prototype.simpleListen=function(Nt,s){this.sendRequest("q",{p:Nt},s)};PersistentConnection.prototype.echo=function(Nt,s){this.sendRequest("echo",{d:Nt},s)};registerDatabase();var define_process_env_default={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const stringToByteArray$1=function(Nt){const s=[];let Ot=0;for(let en=0;en<Nt.length;en++){let tn=Nt.charCodeAt(en);tn<128?s[Ot++]=tn:tn<2048?(s[Ot++]=tn>>6|192,s[Ot++]=tn&63|128):(tn&64512)===55296&&en+1<Nt.length&&(Nt.charCodeAt(en+1)&64512)===56320?(tn=65536+((tn&1023)<<10)+(Nt.charCodeAt(++en)&1023),s[Ot++]=tn>>18|240,s[Ot++]=tn>>12&63|128,s[Ot++]=tn>>6&63|128,s[Ot++]=tn&63|128):(s[Ot++]=tn>>12|224,s[Ot++]=tn>>6&63|128,s[Ot++]=tn&63|128)}return s},byteArrayToString=function(Nt){const s=[];let Ot=0,en=0;for(;Ot<Nt.length;){const tn=Nt[Ot++];if(tn<128)s[en++]=String.fromCharCode(tn);else if(tn>191&&tn<224){const nn=Nt[Ot++];s[en++]=String.fromCharCode((tn&31)<<6|nn&63)}else if(tn>239&&tn<365){const nn=Nt[Ot++],rn=Nt[Ot++],on=Nt[Ot++],sn=((tn&7)<<18|(nn&63)<<12|(rn&63)<<6|on&63)-65536;s[en++]=String.fromCharCode(55296+(sn>>10)),s[en++]=String.fromCharCode(56320+(sn&1023))}else{const nn=Nt[Ot++],rn=Nt[Ot++];s[en++]=String.fromCharCode((tn&15)<<12|(nn&63)<<6|rn&63)}}return s.join("")},base64={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(Nt,s){if(!Array.isArray(Nt))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Ot=s?this.byteToCharMapWebSafe_:this.byteToCharMap_,en=[];for(let tn=0;tn<Nt.length;tn+=3){const nn=Nt[tn],rn=tn+1<Nt.length,on=rn?Nt[tn+1]:0,sn=tn+2<Nt.length,an=sn?Nt[tn+2]:0,ln=nn>>2,cn=(nn&3)<<4|on>>4;let un=(on&15)<<2|an>>6,dn=an&63;sn||(dn=64,rn||(un=64)),en.push(Ot[ln],Ot[cn],Ot[un],Ot[dn])}return en.join("")},encodeString(Nt,s){return this.HAS_NATIVE_SUPPORT&&!s?btoa(Nt):this.encodeByteArray(stringToByteArray$1(Nt),s)},decodeString(Nt,s){return this.HAS_NATIVE_SUPPORT&&!s?atob(Nt):byteArrayToString(this.decodeStringToByteArray(Nt,s))},decodeStringToByteArray(Nt,s){this.init_();const Ot=s?this.charToByteMapWebSafe_:this.charToByteMap_,en=[];for(let tn=0;tn<Nt.length;){const nn=Ot[Nt.charAt(tn++)],on=tn<Nt.length?Ot[Nt.charAt(tn)]:0;++tn;const an=tn<Nt.length?Ot[Nt.charAt(tn)]:64;++tn;const cn=tn<Nt.length?Ot[Nt.charAt(tn)]:64;if(++tn,nn==null||on==null||an==null||cn==null)throw new DecodeBase64StringError;const un=nn<<2|on>>4;if(en.push(un),an!==64){const dn=on<<4&240|an>>2;if(en.push(dn),cn!==64){const hn=an<<6&192|cn;en.push(hn)}}}return en},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let Nt=0;Nt<this.ENCODED_VALS.length;Nt++)this.byteToCharMap_[Nt]=this.ENCODED_VALS.charAt(Nt),this.charToByteMap_[this.byteToCharMap_[Nt]]=Nt,this.byteToCharMapWebSafe_[Nt]=this.ENCODED_VALS_WEBSAFE.charAt(Nt),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[Nt]]=Nt,Nt>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(Nt)]=Nt,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(Nt)]=Nt)}}};class DecodeBase64StringError extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const base64Encode=function(Nt){const s=stringToByteArray$1(Nt);return base64.encodeByteArray(s,!0)},base64urlEncodeWithoutPadding=function(Nt){return base64Encode(Nt).replace(/\./g,"")},base64Decode=function(Nt){try{return base64.decodeString(Nt,!0)}catch(s){console.error("base64Decode failed: ",s)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getGlobal(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const getDefaultsFromGlobal=()=>getGlobal().__FIREBASE_DEFAULTS__,getDefaultsFromEnvVariable=()=>{if(typeof process>"u"||typeof define_process_env_default>"u")return;const Nt=define_process_env_default.__FIREBASE_DEFAULTS__;if(Nt)return JSON.parse(Nt)},getDefaultsFromCookie=()=>{if(typeof document>"u")return;let Nt;try{Nt=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const s=Nt&&base64Decode(Nt[1]);return s&&JSON.parse(s)},getDefaults=()=>{try{return getDefaultsFromGlobal()||getDefaultsFromEnvVariable()||getDefaultsFromCookie()}catch(Nt){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${Nt}`);return}},getDefaultEmulatorHost=Nt=>{var s,Ot;return(Ot=(s=getDefaults())===null||s===void 0?void 0:s.emulatorHosts)===null||Ot===void 0?void 0:Ot[Nt]},getDefaultEmulatorHostnameAndPort=Nt=>{const s=getDefaultEmulatorHost(Nt);if(!s)return;const Ot=s.lastIndexOf(":");if(Ot<=0||Ot+1===s.length)throw new Error(`Invalid host ${s} with no separate hostname and port!`);const en=parseInt(s.substring(Ot+1),10);return s[0]==="["?[s.substring(1,Ot-1),en]:[s.substring(0,Ot),en]};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function createMockUserToken(Nt,s){if(Nt.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Ot={alg:"none",type:"JWT"},en=s||"demo-project",tn=Nt.iat||0,nn=Nt.sub||Nt.user_id;if(!nn)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const rn=Object.assign({iss:`https://securetoken.google.com/${en}`,aud:en,iat:tn,exp:tn+3600,auth_time:tn,sub:nn,user_id:nn,firebase:{sign_in_provider:"custom",identities:{}}},Nt);return[base64urlEncodeWithoutPadding(JSON.stringify(Ot)),base64urlEncodeWithoutPadding(JSON.stringify(rn)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ERROR_NAME="FirebaseError";class FirebaseError extends Error{constructor(s,Ot,en){super(Ot),this.code=s,this.customData=en,this.name=ERROR_NAME,Object.setPrototypeOf(this,FirebaseError.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ErrorFactory.prototype.create)}}class ErrorFactory{constructor(s,Ot,en){this.service=s,this.serviceName=Ot,this.errors=en}create(s,...Ot){const en=Ot[0]||{},tn=`${this.service}/${s}`,nn=this.errors[s],rn=nn?replaceTemplate(nn,en):"Error",on=`${this.serviceName}: ${rn} (${tn}).`;return new FirebaseError(tn,on,en)}}function replaceTemplate(Nt,s){return Nt.replace(PATTERN,(Ot,en)=>{const tn=s[en];return tn!=null?String(tn):`<${en}?>`})}const PATTERN=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getModularInstance(Nt){return Nt&&Nt._delegate?Nt._delegate:Nt}class Component{constructor(s,Ot,en){this.name=s,this.instanceFactory=Ot,this.type=en,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(s){return this.instantiationMode=s,this}setMultipleInstances(s){return this.multipleInstances=s,this}setServiceProps(s){return this.serviceProps=s,this}setInstanceCreatedCallback(s){return this.onInstanceCreated=s,this}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DEFAULT_HOST="firebasestorage.googleapis.com",CONFIG_STORAGE_BUCKET_KEY="storageBucket",DEFAULT_MAX_OPERATION_RETRY_TIME=2*60*1e3,DEFAULT_MAX_UPLOAD_RETRY_TIME=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class StorageError extends FirebaseError{constructor(s,Ot,en=0){super(prependCode(s),`Firebase Storage: ${Ot} (${prependCode(s)})`),this.status_=en,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,StorageError.prototype)}get status(){return this.status_}set status(s){this.status_=s}_codeEquals(s){return prependCode(s)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(s){this.customData.serverResponse=s,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var StorageErrorCode;(function(Nt){Nt.UNKNOWN="unknown",Nt.OBJECT_NOT_FOUND="object-not-found",Nt.BUCKET_NOT_FOUND="bucket-not-found",Nt.PROJECT_NOT_FOUND="project-not-found",Nt.QUOTA_EXCEEDED="quota-exceeded",Nt.UNAUTHENTICATED="unauthenticated",Nt.UNAUTHORIZED="unauthorized",Nt.UNAUTHORIZED_APP="unauthorized-app",Nt.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",Nt.INVALID_CHECKSUM="invalid-checksum",Nt.CANCELED="canceled",Nt.INVALID_EVENT_NAME="invalid-event-name",Nt.INVALID_URL="invalid-url",Nt.INVALID_DEFAULT_BUCKET="invalid-default-bucket",Nt.NO_DEFAULT_BUCKET="no-default-bucket",Nt.CANNOT_SLICE_BLOB="cannot-slice-blob",Nt.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",Nt.NO_DOWNLOAD_URL="no-download-url",Nt.INVALID_ARGUMENT="invalid-argument",Nt.INVALID_ARGUMENT_COUNT="invalid-argument-count",Nt.APP_DELETED="app-deleted",Nt.INVALID_ROOT_OPERATION="invalid-root-operation",Nt.INVALID_FORMAT="invalid-format",Nt.INTERNAL_ERROR="internal-error",Nt.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(StorageErrorCode||(StorageErrorCode={}));function prependCode(Nt){return"storage/"+Nt}function unknown(){const Nt="An unknown error occurred, please check the error payload for server response.";return new StorageError(StorageErrorCode.UNKNOWN,Nt)}function objectNotFound(Nt){return new StorageError(StorageErrorCode.OBJECT_NOT_FOUND,"Object '"+Nt+"' does not exist.")}function quotaExceeded(Nt){return new StorageError(StorageErrorCode.QUOTA_EXCEEDED,"Quota for bucket '"+Nt+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function unauthenticated(){const Nt="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new StorageError(StorageErrorCode.UNAUTHENTICATED,Nt)}function unauthorizedApp(){return new StorageError(StorageErrorCode.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function unauthorized(Nt){return new StorageError(StorageErrorCode.UNAUTHORIZED,"User does not have permission to access '"+Nt+"'.")}function retryLimitExceeded(){return new StorageError(StorageErrorCode.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function canceled(){return new StorageError(StorageErrorCode.CANCELED,"User canceled the upload/download.")}function invalidUrl(Nt){return new StorageError(StorageErrorCode.INVALID_URL,"Invalid URL '"+Nt+"'.")}function invalidDefaultBucket(Nt){return new StorageError(StorageErrorCode.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+Nt+"'.")}function noDefaultBucket(){return new StorageError(StorageErrorCode.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+CONFIG_STORAGE_BUCKET_KEY+"' property when initializing the app?")}function cannotSliceBlob(){return new StorageError(StorageErrorCode.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function missingPolyFill(Nt){return new StorageError(StorageErrorCode.UNSUPPORTED_ENVIRONMENT,`${Nt} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function invalidArgument(Nt){return new StorageError(StorageErrorCode.INVALID_ARGUMENT,Nt)}function appDeleted(){return new StorageError(StorageErrorCode.APP_DELETED,"The Firebase app was deleted.")}function invalidRootOperation(Nt){return new StorageError(StorageErrorCode.INVALID_ROOT_OPERATION,"The operation '"+Nt+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function invalidFormat(Nt,s){return new StorageError(StorageErrorCode.INVALID_FORMAT,"String does not match format '"+Nt+"': "+s)}function internalError(Nt){throw new StorageError(StorageErrorCode.INTERNAL_ERROR,"Internal error: "+Nt)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Location{constructor(s,Ot){this.bucket=s,this.path_=Ot}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const s=encodeURIComponent;return"/b/"+s(this.bucket)+"/o/"+s(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(s,Ot){let en;try{en=Location.makeFromUrl(s,Ot)}catch{return new Location(s,"")}if(en.path==="")return en;throw invalidDefaultBucket(s)}static makeFromUrl(s,Ot){let en=null;const tn="([A-Za-z0-9.\\-_]+)";function nn(vn){vn.path.charAt(vn.path.length-1)==="/"&&(vn.path_=vn.path_.slice(0,-1))}const rn="(/(.*))?$",on=new RegExp("^gs://"+tn+rn,"i"),sn={bucket:1,path:3};function an(vn){vn.path_=decodeURIComponent(vn.path)}const ln="v[A-Za-z0-9_]+",cn=Ot.replace(/[.]/g,"\\."),un="(/([^?#]*).*)?$",dn=new RegExp(`^https?://${cn}/${ln}/b/${tn}/o${un}`,"i"),hn={bucket:1,path:3},fn=Ot===DEFAULT_HOST?"(?:storage.googleapis.com|storage.cloud.google.com)":Ot,mn="([^?#]*)",gn=new RegExp(`^https?://${fn}/${tn}/${mn}`,"i"),_n=[{regex:on,indices:sn,postModify:nn},{regex:dn,indices:hn,postModify:an},{regex:gn,indices:{bucket:1,path:2},postModify:an}];for(let vn=0;vn<_n.length;vn++){const bn=_n[vn],wn=bn.regex.exec(s);if(wn){const Sn=wn[bn.indices.bucket];let kn=wn[bn.indices.path];kn||(kn=""),en=new Location(Sn,kn),bn.postModify(en);break}}if(en==null)throw invalidUrl(s);return en}}class FailRequest{constructor(s){this.promise_=Promise.reject(s)}getPromise(){return this.promise_}cancel(s=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function start(Nt,s,Ot){let en=1,tn=null,nn=null,rn=!1,on=0;function sn(){return on===2}let an=!1;function ln(...mn){an||(an=!0,s.apply(null,mn))}function cn(mn){tn=setTimeout(()=>{tn=null,Nt(dn,sn())},mn)}function un(){nn&&clearTimeout(nn)}function dn(mn,...gn){if(an){un();return}if(mn){un(),ln.call(null,mn,...gn);return}if(sn()||rn){un(),ln.call(null,mn,...gn);return}en<64&&(en*=2);let _n;on===1?(on=2,_n=0):_n=(en+Math.random())*1e3,cn(_n)}let hn=!1;function fn(mn){hn||(hn=!0,un(),!an&&(tn!==null?(mn||(on=2),clearTimeout(tn),cn(0)):mn||(on=1)))}return cn(0),nn=setTimeout(()=>{rn=!0,fn(!0)},Ot),fn}function stop(Nt){Nt(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function isJustDef(Nt){return Nt!==void 0}function isNonArrayObject(Nt){return typeof Nt=="object"&&!Array.isArray(Nt)}function isString(Nt){return typeof Nt=="string"||Nt instanceof String}function isNativeBlob(Nt){return isNativeBlobDefined()&&Nt instanceof Blob}function isNativeBlobDefined(){return typeof Blob<"u"}function validateNumber(Nt,s,Ot,en){if(en<s)throw invalidArgument(`Invalid value for '${Nt}'. Expected ${s} or greater.`);if(en>Ot)throw invalidArgument(`Invalid value for '${Nt}'. Expected ${Ot} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function makeUrl(Nt,s,Ot){let en=s;return Ot==null&&(en=`https://${s}`),`${Ot}://${en}/v0${Nt}`}function makeQueryString(Nt){const s=encodeURIComponent;let Ot="?";for(const en in Nt)if(Nt.hasOwnProperty(en)){const tn=s(en)+"="+s(Nt[en]);Ot=Ot+tn+"&"}return Ot=Ot.slice(0,-1),Ot}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ErrorCode;(function(Nt){Nt[Nt.NO_ERROR=0]="NO_ERROR",Nt[Nt.NETWORK_ERROR=1]="NETWORK_ERROR",Nt[Nt.ABORT=2]="ABORT"})(ErrorCode||(ErrorCode={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function isRetryStatusCode(Nt,s){const Ot=Nt>=500&&Nt<600,tn=[408,429].indexOf(Nt)!==-1,nn=s.indexOf(Nt)!==-1;return Ot||tn||nn}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NetworkRequest{constructor(s,Ot,en,tn,nn,rn,on,sn,an,ln,cn,un=!0){this.url_=s,this.method_=Ot,this.headers_=en,this.body_=tn,this.successCodes_=nn,this.additionalRetryCodes_=rn,this.callback_=on,this.errorCallback_=sn,this.timeout_=an,this.progressCallback_=ln,this.connectionFactory_=cn,this.retry=un,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((dn,hn)=>{this.resolve_=dn,this.reject_=hn,this.start_()})}start_(){const s=(en,tn)=>{if(tn){en(!1,new RequestEndStatus(!1,null,!0));return}const nn=this.connectionFactory_();this.pendingConnection_=nn;const rn=on=>{const sn=on.loaded,an=on.lengthComputable?on.total:-1;this.progressCallback_!==null&&this.progressCallback_(sn,an)};this.progressCallback_!==null&&nn.addUploadProgressListener(rn),nn.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&nn.removeUploadProgressListener(rn),this.pendingConnection_=null;const on=nn.getErrorCode()===ErrorCode.NO_ERROR,sn=nn.getStatus();if(!on||isRetryStatusCode(sn,this.additionalRetryCodes_)&&this.retry){const ln=nn.getErrorCode()===ErrorCode.ABORT;en(!1,new RequestEndStatus(!1,null,ln));return}const an=this.successCodes_.indexOf(sn)!==-1;en(!0,new RequestEndStatus(an,nn))})},Ot=(en,tn)=>{const nn=this.resolve_,rn=this.reject_,on=tn.connection;if(tn.wasSuccessCode)try{const sn=this.callback_(on,on.getResponse());isJustDef(sn)?nn(sn):nn()}catch(sn){rn(sn)}else if(on!==null){const sn=unknown();sn.serverResponse=on.getErrorText(),this.errorCallback_?rn(this.errorCallback_(on,sn)):rn(sn)}else if(tn.canceled){const sn=this.appDelete_?appDeleted():canceled();rn(sn)}else{const sn=retryLimitExceeded();rn(sn)}};this.canceled_?Ot(!1,new RequestEndStatus(!1,null,!0)):this.backoffId_=start(s,Ot,this.timeout_)}getPromise(){return this.promise_}cancel(s){this.canceled_=!0,this.appDelete_=s||!1,this.backoffId_!==null&&stop(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class RequestEndStatus{constructor(s,Ot,en){this.wasSuccessCode=s,this.connection=Ot,this.canceled=!!en}}function addAuthHeader_(Nt,s){s!==null&&s.length>0&&(Nt.Authorization="Firebase "+s)}function addVersionHeader_(Nt,s){Nt["X-Firebase-Storage-Version"]="webjs/"+(s??"AppManager")}function addGmpidHeader_(Nt,s){s&&(Nt["X-Firebase-GMPID"]=s)}function addAppCheckHeader_(Nt,s){s!==null&&(Nt["X-Firebase-AppCheck"]=s)}function makeRequest(Nt,s,Ot,en,tn,nn,rn=!0){const on=makeQueryString(Nt.urlParams),sn=Nt.url+on,an=Object.assign({},Nt.headers);return addGmpidHeader_(an,s),addAuthHeader_(an,Ot),addVersionHeader_(an,nn),addAppCheckHeader_(an,en),new NetworkRequest(sn,Nt.method,an,Nt.body,Nt.successCodes,Nt.additionalRetryCodes,Nt.handler,Nt.errorHandler,Nt.timeout,Nt.progressCallback,tn,rn)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getBlobBuilder(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function getBlob$1(...Nt){const s=getBlobBuilder();if(s!==void 0){const Ot=new s;for(let en=0;en<Nt.length;en++)Ot.append(Nt[en]);return Ot.getBlob()}else{if(isNativeBlobDefined())return new Blob(Nt);throw new StorageError(StorageErrorCode.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function sliceBlob(Nt,s,Ot){return Nt.webkitSlice?Nt.webkitSlice(s,Ot):Nt.mozSlice?Nt.mozSlice(s,Ot):Nt.slice?Nt.slice(s,Ot):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function decodeBase64(Nt){if(typeof atob>"u")throw missingPolyFill("base-64");return atob(Nt)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const StringFormat={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class StringData{constructor(s,Ot){this.data=s,this.contentType=Ot||null}}function dataFromString(Nt,s){switch(Nt){case StringFormat.RAW:return new StringData(utf8Bytes_(s));case StringFormat.BASE64:case StringFormat.BASE64URL:return new StringData(base64Bytes_(Nt,s));case StringFormat.DATA_URL:return new StringData(dataURLBytes_(s),dataURLContentType_(s))}throw unknown()}function utf8Bytes_(Nt){const s=[];for(let Ot=0;Ot<Nt.length;Ot++){let en=Nt.charCodeAt(Ot);if(en<=127)s.push(en);else if(en<=2047)s.push(192|en>>6,128|en&63);else if((en&64512)===55296)if(!(Ot<Nt.length-1&&(Nt.charCodeAt(Ot+1)&64512)===56320))s.push(239,191,189);else{const nn=en,rn=Nt.charCodeAt(++Ot);en=65536|(nn&1023)<<10|rn&1023,s.push(240|en>>18,128|en>>12&63,128|en>>6&63,128|en&63)}else(en&64512)===56320?s.push(239,191,189):s.push(224|en>>12,128|en>>6&63,128|en&63)}return new Uint8Array(s)}function percentEncodedBytes_(Nt){let s;try{s=decodeURIComponent(Nt)}catch{throw invalidFormat(StringFormat.DATA_URL,"Malformed data URL.")}return utf8Bytes_(s)}function base64Bytes_(Nt,s){switch(Nt){case StringFormat.BASE64:{const tn=s.indexOf("-")!==-1,nn=s.indexOf("_")!==-1;if(tn||nn)throw invalidFormat(Nt,"Invalid character '"+(tn?"-":"_")+"' found: is it base64url encoded?");break}case StringFormat.BASE64URL:{const tn=s.indexOf("+")!==-1,nn=s.indexOf("/")!==-1;if(tn||nn)throw invalidFormat(Nt,"Invalid character '"+(tn?"+":"/")+"' found: is it base64 encoded?");s=s.replace(/-/g,"+").replace(/_/g,"/");break}}let Ot;try{Ot=decodeBase64(s)}catch(tn){throw tn.message.includes("polyfill")?tn:invalidFormat(Nt,"Invalid character found")}const en=new Uint8Array(Ot.length);for(let tn=0;tn<Ot.length;tn++)en[tn]=Ot.charCodeAt(tn);return en}class DataURLParts{constructor(s){this.base64=!1,this.contentType=null;const Ot=s.match(/^data:([^,]+)?,/);if(Ot===null)throw invalidFormat(StringFormat.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const en=Ot[1]||null;en!=null&&(this.base64=endsWith(en,";base64"),this.contentType=this.base64?en.substring(0,en.length-7):en),this.rest=s.substring(s.indexOf(",")+1)}}function dataURLBytes_(Nt){const s=new DataURLParts(Nt);return s.base64?base64Bytes_(StringFormat.BASE64,s.rest):percentEncodedBytes_(s.rest)}function dataURLContentType_(Nt){return new DataURLParts(Nt).contentType}function endsWith(Nt,s){return Nt.length>=s.length?Nt.substring(Nt.length-s.length)===s:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FbsBlob{constructor(s,Ot){let en=0,tn="";isNativeBlob(s)?(this.data_=s,en=s.size,tn=s.type):s instanceof ArrayBuffer?(Ot?this.data_=new Uint8Array(s):(this.data_=new Uint8Array(s.byteLength),this.data_.set(new Uint8Array(s))),en=this.data_.length):s instanceof Uint8Array&&(Ot?this.data_=s:(this.data_=new Uint8Array(s.length),this.data_.set(s)),en=s.length),this.size_=en,this.type_=tn}size(){return this.size_}type(){return this.type_}slice(s,Ot){if(isNativeBlob(this.data_)){const en=this.data_,tn=sliceBlob(en,s,Ot);return tn===null?null:new FbsBlob(tn)}else{const en=new Uint8Array(this.data_.buffer,s,Ot-s);return new FbsBlob(en,!0)}}static getBlob(...s){if(isNativeBlobDefined()){const Ot=s.map(en=>en instanceof FbsBlob?en.data_:en);return new FbsBlob(getBlob$1.apply(null,Ot))}else{const Ot=s.map(rn=>isString(rn)?dataFromString(StringFormat.RAW,rn).data:rn.data_);let en=0;Ot.forEach(rn=>{en+=rn.byteLength});const tn=new Uint8Array(en);let nn=0;return Ot.forEach(rn=>{for(let on=0;on<rn.length;on++)tn[nn++]=rn[on]}),new FbsBlob(tn,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jsonObjectOrNull(Nt){let s;try{s=JSON.parse(Nt)}catch{return null}return isNonArrayObject(s)?s:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function parent(Nt){if(Nt.length===0)return null;const s=Nt.lastIndexOf("/");return s===-1?"":Nt.slice(0,s)}function child(Nt,s){const Ot=s.split("/").filter(en=>en.length>0).join("/");return Nt.length===0?Ot:Nt+"/"+Ot}function lastComponent(Nt){const s=Nt.lastIndexOf("/",Nt.length-2);return s===-1?Nt:Nt.slice(s+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function noXform_(Nt,s){return s}class Mapping{constructor(s,Ot,en,tn){this.server=s,this.local=Ot||s,this.writable=!!en,this.xform=tn||noXform_}}let mappings_=null;function xformPath(Nt){return!isString(Nt)||Nt.length<2?Nt:lastComponent(Nt)}function getMappings(){if(mappings_)return mappings_;const Nt=[];Nt.push(new Mapping("bucket")),Nt.push(new Mapping("generation")),Nt.push(new Mapping("metageneration")),Nt.push(new Mapping("name","fullPath",!0));function s(nn,rn){return xformPath(rn)}const Ot=new Mapping("name");Ot.xform=s,Nt.push(Ot);function en(nn,rn){return rn!==void 0?Number(rn):rn}const tn=new Mapping("size");return tn.xform=en,Nt.push(tn),Nt.push(new Mapping("timeCreated")),Nt.push(new Mapping("updated")),Nt.push(new Mapping("md5Hash",null,!0)),Nt.push(new Mapping("cacheControl",null,!0)),Nt.push(new Mapping("contentDisposition",null,!0)),Nt.push(new Mapping("contentEncoding",null,!0)),Nt.push(new Mapping("contentLanguage",null,!0)),Nt.push(new Mapping("contentType",null,!0)),Nt.push(new Mapping("metadata","customMetadata",!0)),mappings_=Nt,mappings_}function addRef(Nt,s){function Ot(){const en=Nt.bucket,tn=Nt.fullPath,nn=new Location(en,tn);return s._makeStorageReference(nn)}Object.defineProperty(Nt,"ref",{get:Ot})}function fromResource(Nt,s,Ot){const en={};en.type="file";const tn=Ot.length;for(let nn=0;nn<tn;nn++){const rn=Ot[nn];en[rn.local]=rn.xform(en,s[rn.server])}return addRef(en,Nt),en}function fromResourceString(Nt,s,Ot){const en=jsonObjectOrNull(s);return en===null?null:fromResource(Nt,en,Ot)}function toResourceString(Nt,s){const Ot={},en=s.length;for(let tn=0;tn<en;tn++){const nn=s[tn];nn.writable&&(Ot[nn.server]=Nt[nn.local])}return JSON.stringify(Ot)}class RequestInfo{constructor(s,Ot,en,tn){this.url=s,this.method=Ot,this.handler=en,this.timeout=tn,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function handlerCheck(Nt){if(!Nt)throw unknown()}function metadataHandler(Nt,s){function Ot(en,tn){const nn=fromResourceString(Nt,tn,s);return handlerCheck(nn!==null),nn}return Ot}function sharedErrorHandler(Nt){function s(Ot,en){let tn;return Ot.getStatus()===401?Ot.getErrorText().includes("Firebase App Check token is invalid")?tn=unauthorizedApp():tn=unauthenticated():Ot.getStatus()===402?tn=quotaExceeded(Nt.bucket):Ot.getStatus()===403?tn=unauthorized(Nt.path):tn=en,tn.status=Ot.getStatus(),tn.serverResponse=en.serverResponse,tn}return s}function objectErrorHandler(Nt){const s=sharedErrorHandler(Nt);function Ot(en,tn){let nn=s(en,tn);return en.getStatus()===404&&(nn=objectNotFound(Nt.path)),nn.serverResponse=tn.serverResponse,nn}return Ot}function deleteObject$2(Nt,s){const Ot=s.fullServerUrl(),en=makeUrl(Ot,Nt.host,Nt._protocol),tn="DELETE",nn=Nt.maxOperationRetryTime;function rn(sn,an){}const on=new RequestInfo(en,tn,rn,nn);return on.successCodes=[200,204],on.errorHandler=objectErrorHandler(s),on}function determineContentType_(Nt,s){return Nt&&Nt.contentType||s&&s.type()||"application/octet-stream"}function metadataForUpload_(Nt,s,Ot){const en=Object.assign({},Ot);return en.fullPath=Nt.path,en.size=s.size(),en.contentType||(en.contentType=determineContentType_(null,s)),en}function multipartUpload(Nt,s,Ot,en,tn){const nn=s.bucketOnlyServerUrl(),rn={"X-Goog-Upload-Protocol":"multipart"};function on(){let _n="";for(let vn=0;vn<2;vn++)_n=_n+Math.random().toString().slice(2);return _n}const sn=on();rn["Content-Type"]="multipart/related; boundary="+sn;const an=metadataForUpload_(s,en,tn),ln=toResourceString(an,Ot),cn="--"+sn+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+ln+`\r
--`+sn+`\r
Content-Type: `+an.contentType+`\r
\r
`,un=`\r
--`+sn+"--",dn=FbsBlob.getBlob(cn,en,un);if(dn===null)throw cannotSliceBlob();const hn={name:an.fullPath},fn=makeUrl(nn,Nt.host,Nt._protocol),mn="POST",gn=Nt.maxUploadRetryTime,pn=new RequestInfo(fn,mn,metadataHandler(Nt,Ot),gn);return pn.urlParams=hn,pn.headers=rn,pn.body=dn.uploadData(),pn.errorHandler=sharedErrorHandler(s),pn}class XhrConnection{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ErrorCode.NO_ERROR,this.sendPromise_=new Promise(s=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ErrorCode.ABORT,s()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ErrorCode.NETWORK_ERROR,s()}),this.xhr_.addEventListener("load",()=>{s()})})}send(s,Ot,en,tn){if(this.sent_)throw internalError("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(Ot,s,!0),tn!==void 0)for(const nn in tn)tn.hasOwnProperty(nn)&&this.xhr_.setRequestHeader(nn,tn[nn].toString());return en!==void 0?this.xhr_.send(en):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw internalError("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw internalError("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw internalError("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw internalError("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(s){return this.xhr_.getResponseHeader(s)}addUploadProgressListener(s){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",s)}removeUploadProgressListener(s){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",s)}}class XhrTextConnection extends XhrConnection{initXhr(){this.xhr_.responseType="text"}}function newTextConnection(){return new XhrTextConnection}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Reference{constructor(s,Ot){this._service=s,Ot instanceof Location?this._location=Ot:this._location=Location.makeFromUrl(Ot,s.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(s,Ot){return new Reference(s,Ot)}get root(){const s=new Location(this._location.bucket,"");return this._newRef(this._service,s)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return lastComponent(this._location.path)}get storage(){return this._service}get parent(){const s=parent(this._location.path);if(s===null)return null;const Ot=new Location(this._location.bucket,s);return new Reference(this._service,Ot)}_throwIfRoot(s){if(this._location.path==="")throw invalidRootOperation(s)}}function uploadBytes$1(Nt,s,Ot){Nt._throwIfRoot("uploadBytes");const en=multipartUpload(Nt.storage,Nt._location,getMappings(),new FbsBlob(s,!0),Ot);return Nt.storage.makeRequestWithTokens(en,newTextConnection).then(tn=>({metadata:tn,ref:Nt}))}function deleteObject$1(Nt){Nt._throwIfRoot("deleteObject");const s=deleteObject$2(Nt.storage,Nt._location);return Nt.storage.makeRequestWithTokens(s,newTextConnection)}function _getChild$1(Nt,s){const Ot=child(Nt._location.path,s),en=new Location(Nt._location.bucket,Ot);return new Reference(Nt.storage,en)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function isUrl(Nt){return/^[A-Za-z]+:\/\//.test(Nt)}function refFromURL(Nt,s){return new Reference(Nt,s)}function refFromPath(Nt,s){if(Nt instanceof FirebaseStorageImpl){const Ot=Nt;if(Ot._bucket==null)throw noDefaultBucket();const en=new Reference(Ot,Ot._bucket);return s!=null?refFromPath(en,s):en}else return s!==void 0?_getChild$1(Nt,s):Nt}function ref$1(Nt,s){if(s&&isUrl(s)){if(Nt instanceof FirebaseStorageImpl)return refFromURL(Nt,s);throw invalidArgument("To use ref(service, url), the first argument must be a Storage instance.")}else return refFromPath(Nt,s)}function extractBucket(Nt,s){const Ot=s==null?void 0:s[CONFIG_STORAGE_BUCKET_KEY];return Ot==null?null:Location.makeFromBucketSpec(Ot,Nt)}function connectStorageEmulator$1(Nt,s,Ot,en={}){Nt.host=`${s}:${Ot}`,Nt._protocol="http";const{mockUserToken:tn}=en;tn&&(Nt._overrideAuthToken=typeof tn=="string"?tn:createMockUserToken(tn,Nt.app.options.projectId))}class FirebaseStorageImpl{constructor(s,Ot,en,tn,nn){this.app=s,this._authProvider=Ot,this._appCheckProvider=en,this._url=tn,this._firebaseVersion=nn,this._bucket=null,this._host=DEFAULT_HOST,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=DEFAULT_MAX_OPERATION_RETRY_TIME,this._maxUploadRetryTime=DEFAULT_MAX_UPLOAD_RETRY_TIME,this._requests=new Set,tn!=null?this._bucket=Location.makeFromBucketSpec(tn,this._host):this._bucket=extractBucket(this._host,this.app.options)}get host(){return this._host}set host(s){this._host=s,this._url!=null?this._bucket=Location.makeFromBucketSpec(this._url,s):this._bucket=extractBucket(s,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(s){validateNumber("time",0,Number.POSITIVE_INFINITY,s),this._maxUploadRetryTime=s}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(s){validateNumber("time",0,Number.POSITIVE_INFINITY,s),this._maxOperationRetryTime=s}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const s=this._authProvider.getImmediate({optional:!0});if(s){const Ot=await s.getToken();if(Ot!==null)return Ot.accessToken}return null}async _getAppCheckToken(){const s=this._appCheckProvider.getImmediate({optional:!0});return s?(await s.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(s=>s.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(s){return new Reference(this,s)}_makeRequest(s,Ot,en,tn,nn=!0){if(this._deleted)return new FailRequest(appDeleted());{const rn=makeRequest(s,this._appId,en,tn,Ot,this._firebaseVersion,nn);return this._requests.add(rn),rn.getPromise().then(()=>this._requests.delete(rn),()=>this._requests.delete(rn)),rn}}async makeRequestWithTokens(s,Ot){const[en,tn]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(s,Ot,en,tn).getPromise()}}const name="@firebase/storage",version$1="0.12.3";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const STORAGE_TYPE="storage";function uploadBytes(Nt,s,Ot){return Nt=getModularInstance(Nt),uploadBytes$1(Nt,s,Ot)}function deleteObject(Nt){return Nt=getModularInstance(Nt),deleteObject$1(Nt)}function ref(Nt,s){return Nt=getModularInstance(Nt),ref$1(Nt,s)}function getStorage(Nt=getApp(),s){Nt=getModularInstance(Nt);const en=_getProvider(Nt,STORAGE_TYPE).getImmediate({identifier:s}),tn=getDefaultEmulatorHostnameAndPort("storage");return tn&&connectStorageEmulator(en,...tn),en}function connectStorageEmulator(Nt,s,Ot,en={}){connectStorageEmulator$1(Nt,s,Ot,en)}function factory(Nt,{instanceIdentifier:s}){const Ot=Nt.getProvider("app").getImmediate(),en=Nt.getProvider("auth-internal"),tn=Nt.getProvider("app-check-internal");return new FirebaseStorageImpl(Ot,en,tn,s,SDK_VERSION$1)}function registerStorage(){_registerComponent(new Component(STORAGE_TYPE,factory,"PUBLIC").setMultipleInstances(!0)),registerVersion(name,version$1,""),registerVersion(name,version$1,"esm2017")}registerStorage();const auth$5=getAuth(fi$1),db=getDatabase(fi$1),fr=getFirestore(fi$1),st$1=getStorage(fi$1),logOut=(Nt,s)=>{signOut(auth$5).then(()=>{typeof Nt=="function"&&Nt()}).catch(Ot=>{typeof s=="function"&&s(Ot)})},checkAdmin=(Nt,s,Ot,en)=>{onValue(ref$2(db,"app/admins"),tn=>{tn.exists()&&tn.val().includes(Nt)?typeof s=="function"&&s(en):typeof Ot=="function"&&(deleteUser(en.user),Ot())},tn=>{console.error(tn)})},login=(Nt,s)=>{const Ot=new GoogleAuthProvider;signInWithPopup(auth$5,Ot).then(en=>{checkAdmin(en.user.email,Nt,s,en)}).catch(en=>{typeof s=="function"&&s(en)})},createBlogPost=(Nt,s,Ot)=>{setDoc(doc(fr,"Blogs",Nt.id),Nt).then(()=>{typeof s=="function"&&s()}).catch(en=>{typeof Ot=="function"&&Ot(en)})},uploadBlogImage=(Nt,s,Ot)=>{uploadBytes(ref(st$1,`blog/images/${Nt.name}`),Nt).then(en=>{typeof s=="function"&&s(en)}).catch(en=>{typeof Ot=="function"&&Ot(en)})},deleteBlogImage=(Nt,s,Ot)=>{const en=ref(st$1,decodeURIComponent(Nt.replace("https://firebasestorage.googleapis.com/v0/b/","").replace("videophics-dev.appspot.com","").replace("/o/","").replace("?alt=media","")));deleteObject(en).then(()=>{typeof s=="function"&&s()}).catch(tn=>{typeof Ot=="function"&&Ot(tn)})};function WithAuth({children:Nt}){const[s,Ot]=React$1.useState(null),en=()=>{Ot(null),login(nn=>{const rn=nn.user;Ot({displayName:rn.displayName,email:rn.email,photoURL:rn.photoURL})},()=>{alert("You are not authorized to access this page!"),tn()})},tn=()=>{Ot(null),logOut(()=>{Ot(!1)},()=>{Ot(!1)})};return React$1.useEffect(()=>{onAuthStateChanged(auth$5,nn=>{nn?checkAdmin(nn.email,()=>{Ot({displayName:nn.displayName,email:nn.email,photoURL:nn.photoURL})},()=>{tn()}):Ot(!1)})},[]),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(HelmetExport,{children:jsxRuntimeExports.jsx("title",{children:"Admin Panel - Videophics"})}),s===null?jsxRuntimeExports.jsx("div",{className:"container py-12 mx-auto",children:jsxRuntimeExports.jsxs("div",{className:"text-center text-slate-800 dark:text-white text-3xl font-[500] mt-10 flex flex-col items-center",children:[jsxRuntimeExports.jsxs("div",{role:"status",children:[jsxRuntimeExports.jsxs("svg",{"aria-hidden":"true",class:"w-10 h-10 text-gray-200 animate-spin dark:text-gray-600 fill-blue-600",viewBox:"0 0 100 101",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[jsxRuntimeExports.jsx("path",{d:"M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z",fill:"currentColor"}),jsxRuntimeExports.jsx("path",{d:"M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z",fill:"currentFill"})]}),jsxRuntimeExports.jsx("span",{class:"sr-only",children:"Loading..."})]}),jsxRuntimeExports.jsx("p",{className:"text-base text-slate-600 dark:text-slate-400 font-[400] mt-6",children:"Refresh or clear the site data if it takes too long and try again."})]})}):s!==!1?Nt({user:s}):jsxRuntimeExports.jsxs("div",{className:"container py-12 mx-auto max-w-[1300px]",children:[jsxRuntimeExports.jsx("h1",{className:"text-center text-slate-800 dark:text-white text-3xl font-[500] mt-10",children:"Welcome to Admin Panel"}),jsxRuntimeExports.jsx("div",{className:"_admin-account w-full max-w-[450px] mx-auto mt-8 text-slate-800 dark:text-white text-center",children:jsxRuntimeExports.jsxs("button",{className:"flex items-center justify-center bg-blue-500 hover:bg-blue-700 text-white font-[500] py-2 px-4 rounded mx-auto",onClick:en,children:[jsxRuntimeExports.jsx("svg",{className:"w-6 h-6 mr-2 -ml-1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 488 512",children:jsxRuntimeExports.jsx("path",{fill:"currentColor",d:"M488 261.8C488 403.3 391.1 504 248 504 110.8 504 0 393.2 0 256S110.8 8 248 8c66.8 0 123 25.8 166.3 64.9l-67.6 64.9C303.6 93.7 277.3 80 248 80c-92.6 0-168 75.4-168 168s75.4 168 168 168c74.4 0 135.7-48.2 158.3-116.8H248v-96h240Z"})}),"Login with Google"]})})]})]})}function Home(){const Nt=()=>{logOut()};return jsxRuntimeExports.jsx(WithAuth,{children:({user:s})=>jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(HelmetExport,{children:jsxRuntimeExports.jsx("title",{children:"Admin - Videophics"})}),jsxRuntimeExports.jsxs("div",{className:"container py-12 mx-auto max-w-[1300px]",children:[jsxRuntimeExports.jsxs("h1",{className:"text-center text-slate-800 dark:text-white text-3xl font-[500] mt-10",children:["Welcome to Admin Panel"," ",jsxRuntimeExports.jsx("span",{className:"text-slate-400 dark:text-slate-500",children:":-)"})]}),jsxRuntimeExports.jsx("div",{className:"_admin-account w-full max-w-[450px] mx-auto mt-5 text-slate-800 dark:text-white text-center",children:jsxRuntimeExports.jsxs("p",{className:"text-slate-500 dark:text-slate-400",children:[s.email," (",jsxRuntimeExports.jsx("button",{className:"text-blue-500 hover:underline text-sm",onClick:Nt,children:"Sign Out"}),")"]})}),jsxRuntimeExports.jsxs("div",{className:"_admin-menu grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mt-12",children:[jsxRuntimeExports.jsx(NavLink,{to:"/admin/blog",children:jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-slate-800 shadow-md rounded-md p-6 hover:shadow-lg transition duration-300 hover:bg-slate-100 dark:hover:bg-slate-700 cursor-pointer select-none",children:[jsxRuntimeExports.jsx("h2",{className:"text-slate-700 dark:text-white text-lg font-[500]",children:"My Blog"}),jsxRuntimeExports.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm mt-2",children:"Manage blog posts at one place"})]})}),jsxRuntimeExports.jsx(NavLink,{to:"/admin/sitemap",children:jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-slate-800 shadow-md rounded-md p-6 hover:shadow-lg transition duration-300 hover:bg-slate-100 dark:hover:bg-slate-700 cursor-pointer select-none",children:[jsxRuntimeExports.jsx("h2",{className:"text-slate-700 dark:text-white text-lg font-[500]",children:"Sitemap"}),jsxRuntimeExports.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm mt-2",children:"Manage sitemap.xml file for SEO"})]})})]})]})]})})}const Blogs=collection(getFirestore(fi$1),"Blogs");function Blog(){const[Nt,s]=React$1.useState([]);return React$1.useEffect(()=>onSnapshot(query(Blogs,limit(10)),en=>{const tn=en.docs.map(nn=>({...nn.data(),id:nn.id}));s(tn)}),[]),jsxRuntimeExports.jsx(WithAuth,{children:({user:Ot})=>jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(HelmetExport,{children:jsxRuntimeExports.jsx("title",{children:"My Blog - Admin"})}),jsxRuntimeExports.jsxs("div",{className:"container mx-auto max-w-[1300px] py-10 dark:text-white",children:[jsxRuntimeExports.jsx(Link,{to:"/admin",children:jsxRuntimeExports.jsx("button",{className:"mb-5",children:" Go back"})}),jsxRuntimeExports.jsxs("h1",{className:"text-3xl md:text-4xl font-[500] text-center text-slate-800 dark:text-white",children:[jsxRuntimeExports.jsx("span",{className:"text-slate-500 dark:text-gray-500",children:"Admin /"})," ","Blog"]}),jsxRuntimeExports.jsx("div",{className:"pt-8 mt-7",children:jsxRuntimeExports.jsxs("div",{className:"mt-2 bg-white dark:bg-slate-800 shadow-md rounded-md p-8",children:[jsxRuntimeExports.jsx("p",{className:"text-slate-700 dark:text-white text-lg font-[600]",children:"My Blog"}),jsxRuntimeExports.jsx("div",{className:"border-t border-slate-200 dark:border-slate-700 mt-4"}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-12 mt-7 min-h-[300px]",children:[jsxRuntimeExports.jsxs("div",{className:"rounded-md p-4 border border-slate-200 dark:border-slate-700",children:[jsxRuntimeExports.jsx("p",{className:"mb-3 text-slate-700 dark:text-gray-400 text-[13px] uppercase font-[500]",children:"Actions"}),jsxRuntimeExports.jsx(Link,{to:"/admin/blog/add",children:jsxRuntimeExports.jsx("button",{className:"bg-violet-600 hover:bg-violet-700 text-white font-[500] text-sm py-2 px-4 rounded",children:"Add Post"})})]}),Nt.map(en=>jsxRuntimeExports.jsxs("div",{className:"flex flex-col justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx(Link,{to:"/blog/"+en.id,target:"_blank",children:jsxRuntimeExports.jsxs("div",{className:"hover:opacity-50 transition duration-300",children:[jsxRuntimeExports.jsx("h2",{className:"text-slate-800 dark:text-white text-lg font-[400] leading-6 line-clamp-2",children:en.title}),jsxRuntimeExports.jsxs("p",{className:"text-slate-500 dark:text-slate-400 text-sm mt-1",children:[en.author," |"," ",en.publishedAt.toDate().toDateString()]})]})}),jsxRuntimeExports.jsx("div",{className:"ml-auto",children:jsxRuntimeExports.jsx(Link,{to:"/admin/blog/edit/"+en.id,children:jsxRuntimeExports.jsx("button",{className:"bg-violet-600 hover:bg-violet-700 text-white font-[500] text-sm py-2 px-2 rounded",children:jsxRuntimeExports.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:[jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a7.723 7.723 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z"}),jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})]})})})})]}),jsxRuntimeExports.jsx("a",{href:en.thumbnail,target:"_blank",children:jsxRuntimeExports.jsx("img",{src:en.thumbnail,alt:en.title,className:"w-full h-[200px] object-cover mt-5 rounded-md hover:opacity-50 transition duration-300 border bg-slate-100 dark:bg-slate-700"})})]},en.id))]})]})})]})]})})}var Rt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Pe(Nt){return Nt&&Nt.__esModule&&Object.prototype.hasOwnProperty.call(Nt,"default")?Nt.default:Nt}function Te(){}Object.assign(Te,{default:Te,register:Te,revert:function(){},__esModule:!0});Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(Nt){const s=(this.document||this.ownerDocument).querySelectorAll(Nt);let Ot=s.length;for(;--Ot>=0&&s.item(Ot)!==this;);return Ot>-1});Element.prototype.closest||(Element.prototype.closest=function(Nt){let s=this;if(!document.documentElement.contains(s))return null;do{if(s.matches(Nt))return s;s=s.parentElement||s.parentNode}while(s!==null);return null});Element.prototype.prepend||(Element.prototype.prepend=function(Nt){const s=document.createDocumentFragment();Array.isArray(Nt)||(Nt=[Nt]),Nt.forEach(Ot=>{const en=Ot instanceof Node;s.appendChild(en?Ot:document.createTextNode(Ot))}),this.insertBefore(s,this.firstChild)});Element.prototype.scrollIntoViewIfNeeded||(Element.prototype.scrollIntoViewIfNeeded=function(Nt){Nt=arguments.length===0?!0:!!Nt;const s=this.parentNode,Ot=window.getComputedStyle(s,null),en=parseInt(Ot.getPropertyValue("border-top-width")),tn=parseInt(Ot.getPropertyValue("border-left-width")),nn=this.offsetTop-s.offsetTop<s.scrollTop,rn=this.offsetTop-s.offsetTop+this.clientHeight-en>s.scrollTop+s.clientHeight,on=this.offsetLeft-s.offsetLeft<s.scrollLeft,sn=this.offsetLeft-s.offsetLeft+this.clientWidth-tn>s.scrollLeft+s.clientWidth,an=nn&&!rn;(nn||rn)&&Nt&&(s.scrollTop=this.offsetTop-s.offsetTop-s.clientHeight/2-en+this.clientHeight/2),(on||sn)&&Nt&&(s.scrollLeft=this.offsetLeft-s.offsetLeft-s.clientWidth/2-tn+this.clientWidth/2),(nn||rn||on||sn)&&!Nt&&this.scrollIntoView(an)});window.requestIdleCallback=window.requestIdleCallback||function(Nt){const s=Date.now();return setTimeout(function(){Nt({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-s))}})},1)};window.cancelIdleCallback=window.cancelIdleCallback||function(Nt){clearTimeout(Nt)};let Dt=(Nt=21)=>crypto.getRandomValues(new Uint8Array(Nt)).reduce((s,Ot)=>(Ot&=63,Ot<36?s+=Ot.toString(36):Ot<62?s+=(Ot-26).toString(36).toUpperCase():Ot>62?s+="-":s+="_",s),"");var at=(Nt=>(Nt.VERBOSE="VERBOSE",Nt.INFO="INFO",Nt.WARN="WARN",Nt.ERROR="ERROR",Nt))(at||{});const k$2={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,SPACE:32,LEFT:37,UP:38,DOWN:40,RIGHT:39,DELETE:46,META:91,SLASH:191},Pt={LEFT:0,WHEEL:1,RIGHT:2,BACKWARD:3,FORWARD:4};function me(Nt,s,Ot="log",en,tn="color: inherit"){if(!("console"in window)||!window.console[Ot])return;const nn=["info","log","warn","error"].includes(Ot),rn=[];switch(me.logLevel){case"ERROR":if(Ot!=="error")return;break;case"WARN":if(!["error","warn"].includes(Ot))return;break;case"INFO":if(!nn||Nt)return;break}en&&rn.push(en);const on="Editor.js 2.29.0";Nt&&(nn?(rn.unshift(`line-height: 1em;
            color: #006FEA;
            display: inline-block;
            font-size: 11px;
            line-height: 1em;
            background-color: #fff;
            padding: 4px 9px;
            border-radius: 30px;
            border: 1px solid rgba(56, 138, 229, 0.16);
            margin: 4px 5px 4px 0;`,tn),s=`%c${on}%c ${s}`):s=`( ${on} )${s}`);try{nn?en?console[Ot](`${s} %o`,...rn):console[Ot](s,...rn):console[Ot](s)}catch{}}me.logLevel="VERBOSE";function Ft(Nt){me.logLevel=Nt}const T$1=me.bind(window,!1),Y=me.bind(window,!0);function oe(Nt){return Object.prototype.toString.call(Nt).match(/\s([a-zA-Z]+)/)[1].toLowerCase()}function M$2(Nt){return oe(Nt)==="function"||oe(Nt)==="asyncfunction"}function D$1(Nt){return oe(Nt)==="object"}function G(Nt){return oe(Nt)==="string"}function Ht(Nt){return oe(Nt)==="boolean"}function Je(Nt){return oe(Nt)==="number"}function Qe(Nt){return oe(Nt)==="undefined"}function W(Nt){return Nt?Object.keys(Nt).length===0&&Nt.constructor===Object:!0}function lt(Nt){return Nt>47&&Nt<58||Nt===32||Nt===13||Nt===229||Nt>64&&Nt<91||Nt>95&&Nt<112||Nt>185&&Nt<193||Nt>218&&Nt<223}async function zt(Nt,s=()=>{},Ot=()=>{}){async function en(tn,nn,rn){try{await tn.function(tn.data),await nn(Qe(tn.data)?{}:tn.data)}catch{rn(Qe(tn.data)?{}:tn.data)}}return Nt.reduce(async(tn,nn)=>(await tn,en(nn,s,Ot)),Promise.resolve())}function ct(Nt){return Array.prototype.slice.call(Nt)}function xe(Nt,s){return function(){const Ot=this,en=arguments;window.setTimeout(()=>Nt.apply(Ot,en),s)}}function Ut(Nt){return Nt.name.split(".").pop()}function jt(Nt){return/^[-\w]+\/([-+\w]+|\*)$/.test(Nt)}function et(Nt,s,Ot){let en;return(...tn)=>{const nn=this,rn=()=>{en=null,Ot||Nt.apply(nn,tn)},on=Ot&&!en;window.clearTimeout(en),en=window.setTimeout(rn,s),on&&Nt.apply(nn,tn)}}function Ie(Nt,s,Ot=void 0){let en,tn,nn,rn=null,on=0;Ot||(Ot={});const sn=function(){on=Ot.leading===!1?0:Date.now(),rn=null,nn=Nt.apply(en,tn),rn||(en=tn=null)};return function(){const an=Date.now();!on&&Ot.leading===!1&&(on=an);const ln=s-(an-on);return en=this,tn=arguments,ln<=0||ln>s?(rn&&(clearTimeout(rn),rn=null),on=an,nn=Nt.apply(en,tn),rn||(en=tn=null)):!rn&&Ot.trailing!==!1&&(rn=setTimeout(sn,ln)),nn}}function $t(){const Nt={win:!1,mac:!1,x11:!1,linux:!1},s=Object.keys(Nt).find(Ot=>window.navigator.appVersion.toLowerCase().indexOf(Ot)!==-1);return s&&(Nt[s]=!0),Nt}function re(Nt){return Nt[0].toUpperCase()+Nt.slice(1)}function Me(Nt,...s){if(!s.length)return Nt;const Ot=s.shift();if(D$1(Nt)&&D$1(Ot))for(const en in Ot)D$1(Ot[en])?(Nt[en]||Object.assign(Nt,{[en]:{}}),Me(Nt[en],Ot[en])):Object.assign(Nt,{[en]:Ot[en]});return Me(Nt,...s)}function ye(Nt){const s=$t();return Nt=Nt.replace(/shift/gi,"").replace(/backspace/gi,"").replace(/enter/gi,"").replace(/up/gi,"").replace(/left/gi,"").replace(/down/gi,"").replace(/right/gi,"").replace(/escape/gi,"").replace(/insert/gi,"Ins").replace(/delete/gi,"").replace(/\+/gi," + "),s.mac?Nt=Nt.replace(/ctrl|cmd/gi,"").replace(/alt/gi,""):Nt=Nt.replace(/cmd/gi,"Ctrl").replace(/windows/gi,"WIN"),Nt}function Wt(Nt){try{return new URL(Nt).href}catch{}return Nt.substring(0,2)==="//"?window.location.protocol+Nt:window.location.origin+Nt}function Yt(){return Dt(10)}function Kt(Nt){window.open(Nt,"_blank")}function Xt(Nt=""){return`${Nt}${Math.floor(Math.random()*1e8).toString(16)}`}function Le(Nt,s,Ot){const en=`${s} is deprecated and will be removed in the next major release. Please use the ${Ot} instead.`;Nt&&Y(en,"warn")}function le(Nt,s,Ot){const en=Ot.value?"value":"get",tn=Ot[en],nn=`#${s}Cache`;if(Ot[en]=function(...rn){return this[nn]===void 0&&(this[nn]=tn.apply(this,...rn)),this[nn]},en==="get"&&Ot.set){const rn=Ot.set;Ot.set=function(on){delete Nt[nn],rn.apply(this,on)}}return Ot}const dt=650;function te(){return window.matchMedia(`(max-width: ${dt}px)`).matches}const tt=typeof window<"u"&&window.navigator&&window.navigator.platform&&(/iP(ad|hone|od)/.test(window.navigator.platform)||window.navigator.platform==="MacIntel"&&window.navigator.maxTouchPoints>1);function Vt(Nt,s){const Ot=Array.isArray(Nt)||D$1(Nt),en=Array.isArray(s)||D$1(s);return Ot||en?JSON.stringify(Nt)===JSON.stringify(s):Nt===s}let c$3=class lr{static isSingleTag(s){return s.tagName&&["AREA","BASE","BR","COL","COMMAND","EMBED","HR","IMG","INPUT","KEYGEN","LINK","META","PARAM","SOURCE","TRACK","WBR"].includes(s.tagName)}static isLineBreakTag(s){return s&&s.tagName&&["BR","WBR"].includes(s.tagName)}static make(s,Ot=null,en={}){const tn=document.createElement(s);Array.isArray(Ot)?tn.classList.add(...Ot):Ot&&tn.classList.add(Ot);for(const nn in en)Object.prototype.hasOwnProperty.call(en,nn)&&(tn[nn]=en[nn]);return tn}static text(s){return document.createTextNode(s)}static append(s,Ot){Array.isArray(Ot)?Ot.forEach(en=>s.appendChild(en)):s.appendChild(Ot)}static prepend(s,Ot){Array.isArray(Ot)?(Ot=Ot.reverse(),Ot.forEach(en=>s.prepend(en))):s.prepend(Ot)}static swap(s,Ot){const en=document.createElement("div"),tn=s.parentNode;tn.insertBefore(en,s),tn.insertBefore(s,Ot),tn.insertBefore(Ot,en),tn.removeChild(en)}static find(s=document,Ot){return s.querySelector(Ot)}static get(s){return document.getElementById(s)}static findAll(s=document,Ot){return s.querySelectorAll(Ot)}static get allInputsSelector(){return"[contenteditable=true], textarea, input:not([type]), "+["text","password","email","number","search","tel","url"].map(s=>`input[type="${s}"]`).join(", ")}static findAllInputs(s){return ct(s.querySelectorAll(lr.allInputsSelector)).reduce((Ot,en)=>lr.isNativeInput(en)||lr.containsOnlyInlineElements(en)?[...Ot,en]:[...Ot,...lr.getDeepestBlockElements(en)],[])}static getDeepestNode(s,Ot=!1){const en=Ot?"lastChild":"firstChild",tn=Ot?"previousSibling":"nextSibling";if(s&&s.nodeType===Node.ELEMENT_NODE&&s[en]){let nn=s[en];if(lr.isSingleTag(nn)&&!lr.isNativeInput(nn)&&!lr.isLineBreakTag(nn))if(nn[tn])nn=nn[tn];else if(nn.parentNode[tn])nn=nn.parentNode[tn];else return nn.parentNode;return this.getDeepestNode(nn,Ot)}return s}static isElement(s){return Je(s)?!1:s&&s.nodeType&&s.nodeType===Node.ELEMENT_NODE}static isFragment(s){return Je(s)?!1:s&&s.nodeType&&s.nodeType===Node.DOCUMENT_FRAGMENT_NODE}static isContentEditable(s){return s.contentEditable==="true"}static isNativeInput(s){const Ot=["INPUT","TEXTAREA"];return s&&s.tagName?Ot.includes(s.tagName):!1}static canSetCaret(s){let Ot=!0;if(lr.isNativeInput(s))switch(s.type){case"file":case"checkbox":case"radio":case"hidden":case"submit":case"button":case"image":case"reset":Ot=!1;break}else Ot=lr.isContentEditable(s);return Ot}static isNodeEmpty(s,Ot){let en;return this.isSingleTag(s)&&!this.isLineBreakTag(s)?!1:(this.isElement(s)&&this.isNativeInput(s)?en=s.value:en=s.textContent.replace("",""),Ot&&(en=en.replace(new RegExp(Ot,"g"),"")),en.trim().length===0)}static isLeaf(s){return s?s.childNodes.length===0:!1}static isEmpty(s,Ot){s.normalize();const en=[s];for(;en.length>0;)if(s=en.shift(),!!s){if(this.isLeaf(s)&&!this.isNodeEmpty(s,Ot))return!1;s.childNodes&&en.push(...Array.from(s.childNodes))}return!0}static isHTMLString(s){const Ot=lr.make("div");return Ot.innerHTML=s,Ot.childElementCount>0}static getContentLength(s){return lr.isNativeInput(s)?s.value.length:s.nodeType===Node.TEXT_NODE?s.length:s.textContent.length}static get blockElements(){return["address","article","aside","blockquote","canvas","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","li","main","nav","noscript","ol","output","p","pre","ruby","section","table","tbody","thead","tr","tfoot","ul","video"]}static containsOnlyInlineElements(s){let Ot;G(s)?(Ot=document.createElement("div"),Ot.innerHTML=s):Ot=s;const en=tn=>!lr.blockElements.includes(tn.tagName.toLowerCase())&&Array.from(tn.children).every(en);return Array.from(Ot.children).every(en)}static getDeepestBlockElements(s){return lr.containsOnlyInlineElements(s)?[s]:Array.from(s.children).reduce((Ot,en)=>[...Ot,...lr.getDeepestBlockElements(en)],[])}static getHolder(s){return G(s)?document.getElementById(s):s}static isAnchor(s){return s.tagName.toLowerCase()==="a"}static offset(s){const Ot=s.getBoundingClientRect(),en=window.pageXOffset||document.documentElement.scrollLeft,tn=window.pageYOffset||document.documentElement.scrollTop,nn=Ot.top+tn,rn=Ot.left+en;return{top:nn,left:rn,bottom:nn+Ot.height,right:rn+Ot.width}}};const qt={blockTunes:{toggler:{"Click to tune":"","or drag to move":""}},inlineToolbar:{converter:{"Convert to":""}},toolbar:{toolbox:{Add:""}},popover:{Filter:"","Nothing found":""}},Zt={Text:"",Link:"",Bold:"",Italic:""},Gt={link:{"Add a link":""},stub:{"The block can not be displayed correctly.":""}},Jt={delete:{Delete:"","Click to delete":""},moveUp:{"Move up":""},moveDown:{"Move down":""}},ht={ui:qt,toolNames:Zt,tools:Gt,blockTunes:Jt},ie=class{static ui(Nt,s){return ie._t(Nt,s)}static t(Nt,s){return ie._t(Nt,s)}static setDictionary(Nt){ie.currentDictionary=Nt}static _t(Nt,s){const Ot=ie.getNamespace(Nt);return!Ot||!Ot[s]?s:Ot[s]}static getNamespace(Nt){return Nt.split(".").reduce((s,Ot)=>!s||!Object.keys(s).length?{}:s[Ot],ie.currentDictionary)}};let z=ie;z.currentDictionary=ht;class ut extends Error{}class Ee{constructor(){this.subscribers={}}on(s,Ot){s in this.subscribers||(this.subscribers[s]=[]),this.subscribers[s].push(Ot)}once(s,Ot){s in this.subscribers||(this.subscribers[s]=[]);const en=tn=>{const nn=Ot(tn),rn=this.subscribers[s].indexOf(en);return rn!==-1&&this.subscribers[s].splice(rn,1),nn};this.subscribers[s].push(en)}emit(s,Ot){W(this.subscribers)||!this.subscribers[s]||this.subscribers[s].reduce((en,tn)=>{const nn=tn(en);return nn!==void 0?nn:en},Ot)}off(s,Ot){if(this.subscribers[s]===void 0){console.warn(`EventDispatcher .off(): there is no subscribers for event "${s.toString()}". Probably, .off() called before .on()`);return}for(let en=0;en<this.subscribers[s].length;en++)if(this.subscribers[s][en]===Ot){delete this.subscribers[s][en];break}}destroy(){this.subscribers={}}}function ee(Nt){Object.setPrototypeOf(this,{get id(){return Nt.id},get name(){return Nt.name},get config(){return Nt.config},get holder(){return Nt.holder},get isEmpty(){return Nt.isEmpty},get selected(){return Nt.selected},set stretched(s){Nt.stretched=s},get stretched(){return Nt.stretched},get focusable(){return Nt.focusable},call(s,Ot){return Nt.call(s,Ot)},save(){return Nt.save()},validate(s){return Nt.validate(s)},dispatchChange(){Nt.dispatchChange()}})}class Fe{constructor(){this.allListeners=[]}on(s,Ot,en,tn=!1){const nn=Xt("l"),rn={id:nn,element:s,eventType:Ot,handler:en,options:tn};if(!this.findOne(s,Ot,en))return this.allListeners.push(rn),s.addEventListener(Ot,en,tn),nn}off(s,Ot,en,tn){const nn=this.findAll(s,Ot,en);nn.forEach((rn,on)=>{const sn=this.allListeners.indexOf(nn[on]);sn>-1&&(this.allListeners.splice(sn,1),rn.element.removeEventListener(rn.eventType,rn.handler,rn.options))})}offById(s){const Ot=this.findById(s);Ot&&Ot.element.removeEventListener(Ot.eventType,Ot.handler,Ot.options)}findOne(s,Ot,en){const tn=this.findAll(s,Ot,en);return tn.length>0?tn[0]:null}findAll(s,Ot,en){let tn;const nn=s?this.findByEventTarget(s):[];return s&&Ot&&en?tn=nn.filter(rn=>rn.eventType===Ot&&rn.handler===en):s&&Ot?tn=nn.filter(rn=>rn.eventType===Ot):tn=nn,tn}removeAll(){this.allListeners.map(s=>{s.element.removeEventListener(s.eventType,s.handler,s.options)}),this.allListeners=[]}destroy(){this.removeAll()}findByEventTarget(s){return this.allListeners.filter(Ot=>{if(Ot.element===s)return Ot})}findByType(s){return this.allListeners.filter(Ot=>{if(Ot.eventType===s)return Ot})}findByHandler(s){return this.allListeners.filter(Ot=>{if(Ot.handler===s)return Ot})}findById(s){return this.allListeners.find(Ot=>Ot.id===s)}}let y$1=class jr{constructor({config:s,eventsDispatcher:Ot}){if(this.nodes={},this.listeners=new Fe,this.readOnlyMutableListeners={on:(en,tn,nn,rn=!1)=>{this.mutableListenerIds.push(this.listeners.on(en,tn,nn,rn))},clearAll:()=>{for(const en of this.mutableListenerIds)this.listeners.offById(en);this.mutableListenerIds=[]}},this.mutableListenerIds=[],new.target===jr)throw new TypeError("Constructors for abstract class Module are not allowed.");this.config=s,this.eventsDispatcher=Ot}set state(s){this.Editor=s}removeAllNodes(){for(const s in this.nodes){const Ot=this.nodes[s];Ot instanceof HTMLElement&&Ot.remove()}}get isRtl(){return this.config.i18n.direction==="rtl"}},b$1=class gr{constructor(){this.instance=null,this.selection=null,this.savedSelectionRange=null,this.isFakeBackgroundEnabled=!1,this.commandBackground="backColor",this.commandRemoveFormat="removeFormat"}static get CSS(){return{editorWrapper:"codex-editor",editorZone:"codex-editor__redactor"}}static get anchorNode(){const s=window.getSelection();return s?s.anchorNode:null}static get anchorElement(){const s=window.getSelection();if(!s)return null;const Ot=s.anchorNode;return Ot?c$3.isElement(Ot)?Ot:Ot.parentElement:null}static get anchorOffset(){const s=window.getSelection();return s?s.anchorOffset:null}static get isCollapsed(){const s=window.getSelection();return s?s.isCollapsed:null}static get isAtEditor(){return this.isSelectionAtEditor(gr.get())}static isSelectionAtEditor(s){if(!s)return!1;let Ot=s.anchorNode||s.focusNode;Ot&&Ot.nodeType===Node.TEXT_NODE&&(Ot=Ot.parentNode);let en=null;return Ot&&Ot instanceof Element&&(en=Ot.closest(`.${gr.CSS.editorZone}`)),en?en.nodeType===Node.ELEMENT_NODE:!1}static isRangeAtEditor(s){if(!s)return;let Ot=s.startContainer;Ot&&Ot.nodeType===Node.TEXT_NODE&&(Ot=Ot.parentNode);let en=null;return Ot&&Ot instanceof Element&&(en=Ot.closest(`.${gr.CSS.editorZone}`)),en?en.nodeType===Node.ELEMENT_NODE:!1}static get isSelectionExists(){return!!gr.get().anchorNode}static get range(){return this.getRangeFromSelection(this.get())}static getRangeFromSelection(s){return s&&s.rangeCount?s.getRangeAt(0):null}static get rect(){let s=document.selection,Ot,en={x:0,y:0,width:0,height:0};if(s&&s.type!=="Control")return s=s,Ot=s.createRange(),en.x=Ot.boundingLeft,en.y=Ot.boundingTop,en.width=Ot.boundingWidth,en.height=Ot.boundingHeight,en;if(!window.getSelection)return T$1("Method window.getSelection is not supported","warn"),en;if(s=window.getSelection(),s.rangeCount===null||isNaN(s.rangeCount))return T$1("Method SelectionUtils.rangeCount is not supported","warn"),en;if(s.rangeCount===0)return en;if(Ot=s.getRangeAt(0).cloneRange(),Ot.getBoundingClientRect&&(en=Ot.getBoundingClientRect()),en.x===0&&en.y===0){const tn=document.createElement("span");if(tn.getBoundingClientRect){tn.appendChild(document.createTextNode("")),Ot.insertNode(tn),en=tn.getBoundingClientRect();const nn=tn.parentNode;nn.removeChild(tn),nn.normalize()}}return en}static get text(){return window.getSelection?window.getSelection().toString():""}static get(){return window.getSelection()}static setCursor(s,Ot=0){const en=document.createRange(),tn=window.getSelection();return c$3.isNativeInput(s)?c$3.canSetCaret(s)?(s.focus(),s.selectionStart=s.selectionEnd=Ot,s.getBoundingClientRect()):void 0:(en.setStart(s,Ot),en.setEnd(s,Ot),tn.removeAllRanges(),tn.addRange(en),en.getBoundingClientRect())}static isRangeInsideContainer(s){const Ot=gr.range;return Ot===null?!1:s.contains(Ot.startContainer)}static addFakeCursor(){const s=gr.range;if(s===null)return;const Ot=c$3.make("span","codex-editor__fake-cursor");Ot.dataset.mutationFree="true",s.collapse(),s.insertNode(Ot)}static isFakeCursorInsideContainer(s){return c$3.find(s,".codex-editor__fake-cursor")!==null}static removeFakeCursor(s=document.body){const Ot=c$3.find(s,".codex-editor__fake-cursor");Ot&&Ot.remove()}removeFakeBackground(){this.isFakeBackgroundEnabled&&(this.isFakeBackgroundEnabled=!1,document.execCommand(this.commandRemoveFormat))}setFakeBackground(){document.execCommand(this.commandBackground,!1,"#a8d6ff"),this.isFakeBackgroundEnabled=!0}save(){this.savedSelectionRange=gr.range}restore(){if(!this.savedSelectionRange)return;const s=window.getSelection();s.removeAllRanges(),s.addRange(this.savedSelectionRange)}clearSaved(){this.savedSelectionRange=null}collapseToEnd(){const s=window.getSelection(),Ot=document.createRange();Ot.selectNodeContents(s.focusNode),Ot.collapse(!1),s.removeAllRanges(),s.addRange(Ot)}findParentTag(s,Ot,en=10){const tn=window.getSelection();let nn=null;return!tn||!tn.anchorNode||!tn.focusNode?null:([tn.anchorNode,tn.focusNode].forEach(rn=>{let on=en;for(;on>0&&rn.parentNode&&!(rn.tagName===s&&(nn=rn,Ot&&rn.classList&&!rn.classList.contains(Ot)&&(nn=null),nn));)rn=rn.parentNode,on--}),nn)}expandToTag(s){const Ot=window.getSelection();Ot.removeAllRanges();const en=document.createRange();en.selectNodeContents(s),Ot.addRange(en)}};function Qt(Nt,s){const{type:Ot,target:en,addedNodes:tn,removedNodes:nn}=Nt;if(en===s)return!0;if(["characterData","attributes"].includes(Ot)){const sn=en.nodeType===Node.TEXT_NODE?en.parentNode:en;return s.contains(sn)}const rn=Array.from(tn).some(sn=>s.contains(sn)),on=Array.from(nn).some(sn=>s.contains(sn));return rn||on}const Ae="redactor dom changed",pt="block changed",ft="fake cursor is about to be toggled",gt="fake cursor have been set";function ot(Nt,s){return Nt.mergeable&&Nt.name===s.name}function eo(Nt,s){const Ot=s==null?void 0:s.export;return M$2(Ot)?Ot(Nt):G(Ot)?Nt[Ot]:(Ot!==void 0&&T$1("Conversion export property must be a string or function. String means key of saved data object to export. Function should export processed string to export."),"")}function to(Nt,s){const Ot=s==null?void 0:s.import;return M$2(Ot)?Ot(Nt):G(Ot)?{[Ot]:Nt}:(Ot!==void 0&&T$1("Conversion import property must be a string or function. String means key of tool data to import. Function accepts a imported string and return composed tool data."),{})}var X=(Nt=>(Nt.APPEND_CALLBACK="appendCallback",Nt.RENDERED="rendered",Nt.MOVED="moved",Nt.UPDATED="updated",Nt.REMOVED="removed",Nt.ON_PASTE="onPaste",Nt))(X||{});let R$2=class _r extends Ee{constructor({id:s=Yt(),data:Ot,tool:en,api:tn,readOnly:nn,tunesData:rn},on){super(),this.cachedInputs=[],this.toolRenderedElement=null,this.tunesInstances=new Map,this.defaultTunesInstances=new Map,this.unavailableTunesData={},this.inputIndex=0,this.editorEventBus=null,this.handleFocus=()=>{this.dropInputsCache(),this.updateCurrentInput()},this.didMutated=(sn=void 0)=>{const an=sn===void 0,ln=sn instanceof InputEvent;!an&&!ln&&this.detectToolRootChange(sn);let cn;an||ln?cn=!0:cn=!(sn.length>0&&sn.every(un=>{const{addedNodes:dn,removedNodes:hn,target:fn}=un;return[...Array.from(dn),...Array.from(hn),fn].some(mn=>(c$3.isElement(mn)||(mn=mn.parentElement),mn&&mn.closest('[data-mutation-free="true"]')!==null))})),cn&&(this.dropInputsCache(),this.updateCurrentInput(),this.call("updated"),this.emit("didMutated",this))},this.name=en.name,this.id=s,this.settings=en.settings,this.config=en.settings.config||{},this.api=tn,this.editorEventBus=on||null,this.blockAPI=new ee(this),this.tool=en,this.toolInstance=en.create(Ot,this.blockAPI,nn),this.tunes=en.tunes,this.composeTunes(rn),this.holder=this.compose(),window.requestIdleCallback(()=>{this.watchBlockMutations(),this.addInputEvents()})}static get CSS(){return{wrapper:"ce-block",wrapperStretched:"ce-block--stretched",content:"ce-block__content",selected:"ce-block--selected",dropTarget:"ce-block--drop-target"}}get inputs(){if(this.cachedInputs.length!==0)return this.cachedInputs;const s=c$3.findAllInputs(this.holder);return this.inputIndex>s.length-1&&(this.inputIndex=s.length-1),this.cachedInputs=s,s}get currentInput(){return this.inputs[this.inputIndex]}set currentInput(s){const Ot=this.inputs.findIndex(en=>en===s||en.contains(s));Ot!==-1&&(this.inputIndex=Ot)}get firstInput(){return this.inputs[0]}get lastInput(){const s=this.inputs;return s[s.length-1]}get nextInput(){return this.inputs[this.inputIndex+1]}get previousInput(){return this.inputs[this.inputIndex-1]}get data(){return this.save().then(s=>s&&!W(s.data)?s.data:{})}get sanitize(){return this.tool.sanitizeConfig}get mergeable(){return M$2(this.toolInstance.merge)}get focusable(){return this.inputs.length!==0}get isEmpty(){const s=c$3.isEmpty(this.pluginsContent,"/"),Ot=!this.hasMedia;return s&&Ot}get hasMedia(){const s=["img","iframe","video","audio","source","input","textarea","twitterwidget"];return!!this.holder.querySelector(s.join(","))}set selected(s){var Ot,en;this.holder.classList.toggle(_r.CSS.selected,s);const tn=s===!0&&b$1.isRangeInsideContainer(this.holder),nn=s===!1&&b$1.isFakeCursorInsideContainer(this.holder);(tn||nn)&&((Ot=this.editorEventBus)==null||Ot.emit(ft,{state:s}),tn?b$1.addFakeCursor():b$1.removeFakeCursor(this.holder),(en=this.editorEventBus)==null||en.emit(gt,{state:s}))}get selected(){return this.holder.classList.contains(_r.CSS.selected)}set stretched(s){this.holder.classList.toggle(_r.CSS.wrapperStretched,s)}get stretched(){return this.holder.classList.contains(_r.CSS.wrapperStretched)}set dropTarget(s){this.holder.classList.toggle(_r.CSS.dropTarget,s)}get pluginsContent(){return this.toolRenderedElement}call(s,Ot){if(M$2(this.toolInstance[s])){s==="appendCallback"&&T$1("`appendCallback` hook is deprecated and will be removed in the next major release. Use `rendered` hook instead","warn");try{this.toolInstance[s].call(this.toolInstance,Ot)}catch(en){T$1(`Error during '${s}' call: ${en.message}`,"error")}}}async mergeWith(s){await this.toolInstance.merge(s)}async save(){const s=await this.toolInstance.save(this.pluginsContent),Ot=this.unavailableTunesData;[...this.tunesInstances.entries(),...this.defaultTunesInstances.entries()].forEach(([nn,rn])=>{if(M$2(rn.save))try{Ot[nn]=rn.save()}catch(on){T$1(`Tune ${rn.constructor.name} save method throws an Error %o`,"warn",on)}});const en=window.performance.now();let tn;return Promise.resolve(s).then(nn=>(tn=window.performance.now(),{id:this.id,tool:this.name,data:nn,tunes:Ot,time:tn-en})).catch(nn=>{T$1(`Saving process for ${this.name} tool failed due to the ${nn}`,"log","red")})}async validate(s){let Ot=!0;return this.toolInstance.validate instanceof Function&&(Ot=await this.toolInstance.validate(s)),Ot}getTunes(){const s=document.createElement("div"),Ot=[],en=typeof this.toolInstance.renderSettings=="function"?this.toolInstance.renderSettings():[],tn=[...this.tunesInstances.values(),...this.defaultTunesInstances.values()].map(nn=>nn.render());return[en,tn].flat().forEach(nn=>{c$3.isElement(nn)?s.appendChild(nn):Array.isArray(nn)?Ot.push(...nn):Ot.push(nn)}),[Ot,s]}updateCurrentInput(){this.currentInput=c$3.isNativeInput(document.activeElement)||!b$1.anchorNode?document.activeElement:b$1.anchorNode}dispatchChange(){this.didMutated()}destroy(){this.unwatchBlockMutations(),this.removeInputEvents(),super.destroy(),M$2(this.toolInstance.destroy)&&this.toolInstance.destroy()}async getActiveToolboxEntry(){const s=this.tool.toolbox;if(s.length===1)return Promise.resolve(this.tool.toolbox[0]);const Ot=await this.data;return s.find(en=>Object.entries(en.data).some(([tn,nn])=>Ot[tn]&&Vt(Ot[tn],nn)))}async exportDataAsString(){const s=await this.data;return eo(s,this.tool.conversionConfig)}compose(){const s=c$3.make("div",_r.CSS.wrapper),Ot=c$3.make("div",_r.CSS.content),en=this.toolInstance.render();s.dataset.id=this.id,this.toolRenderedElement=en,Ot.appendChild(this.toolRenderedElement);let tn=Ot;return[...this.tunesInstances.values(),...this.defaultTunesInstances.values()].forEach(nn=>{if(M$2(nn.wrap))try{tn=nn.wrap(tn)}catch(rn){T$1(`Tune ${nn.constructor.name} wrap method throws an Error %o`,"warn",rn)}}),s.appendChild(tn),s}composeTunes(s){Array.from(this.tunes.values()).forEach(Ot=>{(Ot.isInternal?this.defaultTunesInstances:this.tunesInstances).set(Ot.name,Ot.create(s[Ot.name],this.blockAPI))}),Object.entries(s).forEach(([Ot,en])=>{this.tunesInstances.has(Ot)||(this.unavailableTunesData[Ot]=en)})}addInputEvents(){this.inputs.forEach(s=>{s.addEventListener("focus",this.handleFocus),c$3.isNativeInput(s)&&s.addEventListener("input",this.didMutated)})}removeInputEvents(){this.inputs.forEach(s=>{s.removeEventListener("focus",this.handleFocus),c$3.isNativeInput(s)&&s.removeEventListener("input",this.didMutated)})}watchBlockMutations(){var s;this.redactorDomChangedCallback=Ot=>{const{mutations:en}=Ot;en.some(tn=>Qt(tn,this.toolRenderedElement))&&this.didMutated(en)},(s=this.editorEventBus)==null||s.on(Ae,this.redactorDomChangedCallback)}unwatchBlockMutations(){var s;(s=this.editorEventBus)==null||s.off(Ae,this.redactorDomChangedCallback)}detectToolRootChange(s){s.forEach(Ot=>{if(Array.from(Ot.removedNodes).includes(this.toolRenderedElement)){const en=Ot.addedNodes[Ot.addedNodes.length-1];this.toolRenderedElement=en}})}dropInputsCache(){this.cachedInputs=[]}};class oo extends y$1{constructor(){super(...arguments),this.insert=(s=this.config.defaultBlock,Ot={},en={},tn,nn,rn,on)=>{const sn=this.Editor.BlockManager.insert({id:on,tool:s,data:Ot,index:tn,needToFocus:nn,replace:rn});return new ee(sn)},this.composeBlockData=async s=>{const Ot=this.Editor.Tools.blockTools.get(s);return new R$2({tool:Ot,api:this.Editor.API,readOnly:!0,data:{},tunesData:{}}).data},this.update=async(s,Ot)=>{const{BlockManager:en}=this.Editor,tn=en.getBlockById(s);if(tn===void 0)throw new Error(`Block with id "${s}" not found`);const nn=await en.update(tn,Ot);return new ee(nn)},this.convert=(s,Ot,en)=>{var tn,nn;const{BlockManager:rn,Tools:on}=this.Editor,sn=rn.getBlockById(s);if(!sn)throw new Error(`Block with id "${s}" not found`);const an=on.blockTools.get(sn.name),ln=on.blockTools.get(Ot);if(!ln)throw new Error(`Block Tool with type "${Ot}" not found`);const cn=((tn=an==null?void 0:an.conversionConfig)==null?void 0:tn.export)!==void 0,un=((nn=ln.conversionConfig)==null?void 0:nn.import)!==void 0;if(cn&&un)rn.convert(sn,Ot,en);else{const dn=[cn?!1:re(sn.name),un?!1:re(Ot)].filter(Boolean).join(" and ");throw new Error(`Conversion from "${sn.name}" to "${Ot}" is not possible. ${dn} tool(s) should provide a "conversionConfig"`)}},this.insertMany=(s,Ot=this.Editor.BlockManager.blocks.length-1)=>{this.validateIndex(Ot);const en=s.map(({id:tn,type:nn,data:rn})=>this.Editor.BlockManager.composeBlock({id:tn,tool:nn||this.config.defaultBlock,data:rn}));return this.Editor.BlockManager.insertMany(en,Ot),en.map(tn=>new ee(tn))}}get methods(){return{clear:()=>this.clear(),render:s=>this.render(s),renderFromHTML:s=>this.renderFromHTML(s),delete:s=>this.delete(s),swap:(s,Ot)=>this.swap(s,Ot),move:(s,Ot)=>this.move(s,Ot),getBlockByIndex:s=>this.getBlockByIndex(s),getById:s=>this.getById(s),getCurrentBlockIndex:()=>this.getCurrentBlockIndex(),getBlockIndex:s=>this.getBlockIndex(s),getBlocksCount:()=>this.getBlocksCount(),stretchBlock:(s,Ot=!0)=>this.stretchBlock(s,Ot),insertNewBlock:()=>this.insertNewBlock(),insert:this.insert,insertMany:this.insertMany,update:this.update,composeBlockData:this.composeBlockData,convert:this.convert}}getBlocksCount(){return this.Editor.BlockManager.blocks.length}getCurrentBlockIndex(){return this.Editor.BlockManager.currentBlockIndex}getBlockIndex(s){const Ot=this.Editor.BlockManager.getBlockById(s);if(!Ot){Y("There is no block with id `"+s+"`","warn");return}return this.Editor.BlockManager.getBlockIndex(Ot)}getBlockByIndex(s){const Ot=this.Editor.BlockManager.getBlockByIndex(s);if(Ot===void 0){Y("There is no block at index `"+s+"`","warn");return}return new ee(Ot)}getById(s){const Ot=this.Editor.BlockManager.getBlockById(s);return Ot===void 0?(Y("There is no block with id `"+s+"`","warn"),null):new ee(Ot)}swap(s,Ot){T$1("`blocks.swap()` method is deprecated and will be removed in the next major release. Use `block.move()` method instead","info"),this.Editor.BlockManager.swap(s,Ot)}move(s,Ot){this.Editor.BlockManager.move(s,Ot)}delete(s=this.Editor.BlockManager.currentBlockIndex){try{const Ot=this.Editor.BlockManager.getBlockByIndex(s);this.Editor.BlockManager.removeBlock(Ot)}catch(Ot){Y(Ot,"warn");return}this.Editor.BlockManager.blocks.length===0&&this.Editor.BlockManager.insert(),this.Editor.BlockManager.currentBlock&&this.Editor.Caret.setToBlock(this.Editor.BlockManager.currentBlock,this.Editor.Caret.positions.END),this.Editor.Toolbar.close()}async clear(){await this.Editor.BlockManager.clear(!0),this.Editor.InlineToolbar.close()}async render(s){if(s===void 0||s.blocks===void 0)throw new Error("Incorrect data passed to the render() method");this.Editor.ModificationsObserver.disable(),await this.Editor.BlockManager.clear(),await this.Editor.Renderer.render(s.blocks),this.Editor.ModificationsObserver.enable()}renderFromHTML(s){return this.Editor.BlockManager.clear(),this.Editor.Paste.processText(s,!0)}stretchBlock(s,Ot=!0){Le(!0,"blocks.stretchBlock()","BlockAPI");const en=this.Editor.BlockManager.getBlockByIndex(s);en&&(en.stretched=Ot)}insertNewBlock(){T$1("Method blocks.insertNewBlock() is deprecated and it will be removed in the next major release. Use blocks.insert() instead.","warn"),this.insert()}validateIndex(s){if(typeof s!="number")throw new Error("Index should be a number");if(s<0)throw new Error("Index should be greater than or equal to 0");if(s===null)throw new Error("Index should be greater than or equal to 0")}}class io extends y$1{constructor(){super(...arguments),this.setToFirstBlock=(s=this.Editor.Caret.positions.DEFAULT,Ot=0)=>this.Editor.BlockManager.firstBlock?(this.Editor.Caret.setToBlock(this.Editor.BlockManager.firstBlock,s,Ot),!0):!1,this.setToLastBlock=(s=this.Editor.Caret.positions.DEFAULT,Ot=0)=>this.Editor.BlockManager.lastBlock?(this.Editor.Caret.setToBlock(this.Editor.BlockManager.lastBlock,s,Ot),!0):!1,this.setToPreviousBlock=(s=this.Editor.Caret.positions.DEFAULT,Ot=0)=>this.Editor.BlockManager.previousBlock?(this.Editor.Caret.setToBlock(this.Editor.BlockManager.previousBlock,s,Ot),!0):!1,this.setToNextBlock=(s=this.Editor.Caret.positions.DEFAULT,Ot=0)=>this.Editor.BlockManager.nextBlock?(this.Editor.Caret.setToBlock(this.Editor.BlockManager.nextBlock,s,Ot),!0):!1,this.setToBlock=(s,Ot=this.Editor.Caret.positions.DEFAULT,en=0)=>this.Editor.BlockManager.blocks[s]?(this.Editor.Caret.setToBlock(this.Editor.BlockManager.blocks[s],Ot,en),!0):!1,this.focus=(s=!1)=>s?this.setToLastBlock(this.Editor.Caret.positions.END):this.setToFirstBlock(this.Editor.Caret.positions.START)}get methods(){return{setToFirstBlock:this.setToFirstBlock,setToLastBlock:this.setToLastBlock,setToPreviousBlock:this.setToPreviousBlock,setToNextBlock:this.setToNextBlock,setToBlock:this.setToBlock,focus:this.focus}}}class no extends y$1{get methods(){return{emit:(s,Ot)=>this.emit(s,Ot),off:(s,Ot)=>this.off(s,Ot),on:(s,Ot)=>this.on(s,Ot)}}on(s,Ot){this.eventsDispatcher.on(s,Ot)}emit(s,Ot){this.eventsDispatcher.emit(s,Ot)}off(s,Ot){this.eventsDispatcher.off(s,Ot)}}class He extends y$1{static getNamespace(s){return s.isTune()?`blockTunes.${s.name}`:`tools.${s.name}`}get methods(){return{t:()=>{Y("I18n.t() method can be accessed only from Tools","warn")}}}getMethodsForTool(s){return Object.assign(this.methods,{t:Ot=>z.t(He.getNamespace(s),Ot)})}}class so extends y$1{get methods(){return{blocks:this.Editor.BlocksAPI.methods,caret:this.Editor.CaretAPI.methods,events:this.Editor.EventsAPI.methods,listeners:this.Editor.ListenersAPI.methods,notifier:this.Editor.NotifierAPI.methods,sanitizer:this.Editor.SanitizerAPI.methods,saver:this.Editor.SaverAPI.methods,selection:this.Editor.SelectionAPI.methods,styles:this.Editor.StylesAPI.classes,toolbar:this.Editor.ToolbarAPI.methods,inlineToolbar:this.Editor.InlineToolbarAPI.methods,tooltip:this.Editor.TooltipAPI.methods,i18n:this.Editor.I18nAPI.methods,readOnly:this.Editor.ReadOnlyAPI.methods,ui:this.Editor.UiAPI.methods}}getMethodsForTool(s){return Object.assign(this.methods,{i18n:this.Editor.I18nAPI.getMethodsForTool(s)})}}class ro extends y$1{get methods(){return{close:()=>this.close(),open:()=>this.open()}}open(){this.Editor.InlineToolbar.tryToShow()}close(){this.Editor.InlineToolbar.close()}}class ao extends y$1{get methods(){return{on:(s,Ot,en,tn)=>this.on(s,Ot,en,tn),off:(s,Ot,en,tn)=>this.off(s,Ot,en,tn),offById:s=>this.offById(s)}}on(s,Ot,en,tn){return this.listeners.on(s,Ot,en,tn)}off(s,Ot,en,tn){this.listeners.off(s,Ot,en,tn)}offById(s){this.listeners.offById(s)}}var _e={},lo={get exports(){return _e},set exports(Nt){_e=Nt}};(function(Nt,s){(function(Ot,en){Nt.exports=en()})(window,function(){return function(Ot){var en={};function tn(nn){if(en[nn])return en[nn].exports;var rn=en[nn]={i:nn,l:!1,exports:{}};return Ot[nn].call(rn.exports,rn,rn.exports,tn),rn.l=!0,rn.exports}return tn.m=Ot,tn.c=en,tn.d=function(nn,rn,on){tn.o(nn,rn)||Object.defineProperty(nn,rn,{enumerable:!0,get:on})},tn.r=function(nn){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(nn,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(nn,"__esModule",{value:!0})},tn.t=function(nn,rn){if(1&rn&&(nn=tn(nn)),8&rn||4&rn&&typeof nn=="object"&&nn&&nn.__esModule)return nn;var on=Object.create(null);if(tn.r(on),Object.defineProperty(on,"default",{enumerable:!0,value:nn}),2&rn&&typeof nn!="string")for(var sn in nn)tn.d(on,sn,(function(an){return nn[an]}).bind(null,sn));return on},tn.n=function(nn){var rn=nn&&nn.__esModule?function(){return nn.default}:function(){return nn};return tn.d(rn,"a",rn),rn},tn.o=function(nn,rn){return Object.prototype.hasOwnProperty.call(nn,rn)},tn.p="/",tn(tn.s=0)}([function(Ot,en,tn){tn(1),Ot.exports=function(){var nn=tn(6),rn="cdx-notify--bounce-in",on=null;return{show:function(sn){if(sn.message){(function(){if(on)return!0;on=nn.getWrapper(),document.body.appendChild(on)})();var an=null,ln=sn.time||8e3;switch(sn.type){case"confirm":an=nn.confirm(sn);break;case"prompt":an=nn.prompt(sn);break;default:an=nn.alert(sn),window.setTimeout(function(){an.remove()},ln)}on.appendChild(an),an.classList.add(rn)}}}}()},function(Ot,en,tn){var nn=tn(2);typeof nn=="string"&&(nn=[[Ot.i,nn,""]]);var rn={hmr:!0,transform:void 0,insertInto:void 0};tn(4)(nn,rn),nn.locals&&(Ot.exports=nn.locals)},function(Ot,en,tn){(Ot.exports=tn(3)(!1)).push([Ot.i,`.cdx-notify--error{background:#fffbfb!important}.cdx-notify--error::before{background:#fb5d5d!important}.cdx-notify__input{max-width:130px;padding:5px 10px;background:#f7f7f7;border:0;border-radius:3px;font-size:13px;color:#656b7c;outline:0}.cdx-notify__input:-ms-input-placeholder{color:#656b7c}.cdx-notify__input::placeholder{color:#656b7c}.cdx-notify__input:focus:-ms-input-placeholder{color:rgba(101,107,124,.3)}.cdx-notify__input:focus::placeholder{color:rgba(101,107,124,.3)}.cdx-notify__button{border:none;border-radius:3px;font-size:13px;padding:5px 10px;cursor:pointer}.cdx-notify__button:last-child{margin-left:10px}.cdx-notify__button--cancel{background:#f2f5f7;box-shadow:0 2px 1px 0 rgba(16,19,29,0);color:#656b7c}.cdx-notify__button--cancel:hover{background:#eee}.cdx-notify__button--confirm{background:#34c992;box-shadow:0 1px 1px 0 rgba(18,49,35,.05);color:#fff}.cdx-notify__button--confirm:hover{background:#33b082}.cdx-notify__btns-wrapper{display:-ms-flexbox;display:flex;-ms-flex-flow:row nowrap;flex-flow:row nowrap;margin-top:5px}.cdx-notify__cross{position:absolute;top:5px;right:5px;width:10px;height:10px;padding:5px;opacity:.54;cursor:pointer}.cdx-notify__cross::after,.cdx-notify__cross::before{content:'';position:absolute;left:9px;top:5px;height:12px;width:2px;background:#575d67}.cdx-notify__cross::before{transform:rotate(-45deg)}.cdx-notify__cross::after{transform:rotate(45deg)}.cdx-notify__cross:hover{opacity:1}.cdx-notifies{position:fixed;z-index:2;bottom:20px;left:20px;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",sans-serif}.cdx-notify{position:relative;width:220px;margin-top:15px;padding:13px 16px;background:#fff;box-shadow:0 11px 17px 0 rgba(23,32,61,.13);border-radius:5px;font-size:14px;line-height:1.4em;word-wrap:break-word}.cdx-notify::before{content:'';position:absolute;display:block;top:0;left:0;width:3px;height:calc(100% - 6px);margin:3px;border-radius:5px;background:0 0}@keyframes bounceIn{0%{opacity:0;transform:scale(.3)}50%{opacity:1;transform:scale(1.05)}70%{transform:scale(.9)}100%{transform:scale(1)}}.cdx-notify--bounce-in{animation-name:bounceIn;animation-duration:.6s;animation-iteration-count:1}.cdx-notify--success{background:#fafffe!important}.cdx-notify--success::before{background:#41ffb1!important}`,""])},function(Ot,en){Ot.exports=function(tn){var nn=[];return nn.toString=function(){return this.map(function(rn){var on=function(sn,an){var ln=sn[1]||"",cn=sn[3];if(!cn)return ln;if(an&&typeof btoa=="function"){var un=(hn=cn,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(hn))))+" */"),dn=cn.sources.map(function(fn){return"/*# sourceURL="+cn.sourceRoot+fn+" */"});return[ln].concat(dn).concat([un]).join(`
`)}var hn;return[ln].join(`
`)}(rn,tn);return rn[2]?"@media "+rn[2]+"{"+on+"}":on}).join("")},nn.i=function(rn,on){typeof rn=="string"&&(rn=[[null,rn,""]]);for(var sn={},an=0;an<this.length;an++){var ln=this[an][0];typeof ln=="number"&&(sn[ln]=!0)}for(an=0;an<rn.length;an++){var cn=rn[an];typeof cn[0]=="number"&&sn[cn[0]]||(on&&!cn[2]?cn[2]=on:on&&(cn[2]="("+cn[2]+") and ("+on+")"),nn.push(cn))}},nn}},function(Ot,en,tn){var nn,rn,on={},sn=(nn=function(){return window&&document&&document.all&&!window.atob},function(){return rn===void 0&&(rn=nn.apply(this,arguments)),rn}),an=function(kn){var En={};return function(In){if(typeof In=="function")return In();if(En[In]===void 0){var An=(function(Rn){return document.querySelector(Rn)}).call(this,In);if(window.HTMLIFrameElement&&An instanceof window.HTMLIFrameElement)try{An=An.contentDocument.head}catch{An=null}En[In]=An}return En[In]}}(),ln=null,cn=0,un=[],dn=tn(5);function hn(kn,En){for(var In=0;In<kn.length;In++){var An=kn[In],Rn=on[An.id];if(Rn){Rn.refs++;for(var Nn=0;Nn<Rn.parts.length;Nn++)Rn.parts[Nn](An.parts[Nn]);for(;Nn<An.parts.length;Nn++)Rn.parts.push(vn(An.parts[Nn],En))}else{var Vn=[];for(Nn=0;Nn<An.parts.length;Nn++)Vn.push(vn(An.parts[Nn],En));on[An.id]={id:An.id,refs:1,parts:Vn}}}}function fn(kn,En){for(var In=[],An={},Rn=0;Rn<kn.length;Rn++){var Nn=kn[Rn],Vn=En.base?Nn[0]+En.base:Nn[0],$n={css:Nn[1],media:Nn[2],sourceMap:Nn[3]};An[Vn]?An[Vn].parts.push($n):In.push(An[Vn]={id:Vn,parts:[$n]})}return In}function mn(kn,En){var In=an(kn.insertInto);if(!In)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var An=un[un.length-1];if(kn.insertAt==="top")An?An.nextSibling?In.insertBefore(En,An.nextSibling):In.appendChild(En):In.insertBefore(En,In.firstChild),un.push(En);else if(kn.insertAt==="bottom")In.appendChild(En);else{if(typeof kn.insertAt!="object"||!kn.insertAt.before)throw new Error(`[Style Loader]

 Invalid value for parameter 'insertAt' ('options.insertAt') found.
 Must be 'top', 'bottom', or Object.
 (https://github.com/webpack-contrib/style-loader#insertat)
`);var Rn=an(kn.insertInto+" "+kn.insertAt.before);In.insertBefore(En,Rn)}}function gn(kn){if(kn.parentNode===null)return!1;kn.parentNode.removeChild(kn);var En=un.indexOf(kn);En>=0&&un.splice(En,1)}function pn(kn){var En=document.createElement("style");return kn.attrs.type===void 0&&(kn.attrs.type="text/css"),_n(En,kn.attrs),mn(kn,En),En}function _n(kn,En){Object.keys(En).forEach(function(In){kn.setAttribute(In,En[In])})}function vn(kn,En){var In,An,Rn,Nn;if(En.transform&&kn.css){if(!(Nn=En.transform(kn.css)))return function(){};kn.css=Nn}if(En.singleton){var Vn=cn++;In=ln||(ln=pn(En)),An=Sn.bind(null,In,Vn,!1),Rn=Sn.bind(null,In,Vn,!0)}else kn.sourceMap&&typeof URL=="function"&&typeof URL.createObjectURL=="function"&&typeof URL.revokeObjectURL=="function"&&typeof Blob=="function"&&typeof btoa=="function"?(In=function($n){var jn=document.createElement("link");return $n.attrs.type===void 0&&($n.attrs.type="text/css"),$n.attrs.rel="stylesheet",_n(jn,$n.attrs),mn($n,jn),jn}(En),An=(function($n,jn,Ln){var Pn=Ln.css,Bn=Ln.sourceMap,Gn=jn.convertToAbsoluteUrls===void 0&&Bn;(jn.convertToAbsoluteUrls||Gn)&&(Pn=dn(Pn)),Bn&&(Pn+=`
/*# sourceMappingURL=data:application/json;base64,`+btoa(unescape(encodeURIComponent(JSON.stringify(Bn))))+" */");var zn=new Blob([Pn],{type:"text/css"}),qn=$n.href;$n.href=URL.createObjectURL(zn),qn&&URL.revokeObjectURL(qn)}).bind(null,In,En),Rn=function(){gn(In),In.href&&URL.revokeObjectURL(In.href)}):(In=pn(En),An=(function($n,jn){var Ln=jn.css,Pn=jn.media;if(Pn&&$n.setAttribute("media",Pn),$n.styleSheet)$n.styleSheet.cssText=Ln;else{for(;$n.firstChild;)$n.removeChild($n.firstChild);$n.appendChild(document.createTextNode(Ln))}}).bind(null,In),Rn=function(){gn(In)});return An(kn),function($n){if($n){if($n.css===kn.css&&$n.media===kn.media&&$n.sourceMap===kn.sourceMap)return;An(kn=$n)}else Rn()}}Ot.exports=function(kn,En){if(typeof DEBUG<"u"&&DEBUG&&typeof document!="object")throw new Error("The style-loader cannot be used in a non-browser environment");(En=En||{}).attrs=typeof En.attrs=="object"?En.attrs:{},En.singleton||typeof En.singleton=="boolean"||(En.singleton=sn()),En.insertInto||(En.insertInto="head"),En.insertAt||(En.insertAt="bottom");var In=fn(kn,En);return hn(In,En),function(An){for(var Rn=[],Nn=0;Nn<In.length;Nn++){var Vn=In[Nn];($n=on[Vn.id]).refs--,Rn.push($n)}for(An&&hn(fn(An,En),En),Nn=0;Nn<Rn.length;Nn++){var $n;if(($n=Rn[Nn]).refs===0){for(var jn=0;jn<$n.parts.length;jn++)$n.parts[jn]();delete on[$n.id]}}}};var bn,wn=(bn=[],function(kn,En){return bn[kn]=En,bn.filter(Boolean).join(`
`)});function Sn(kn,En,In,An){var Rn=In?"":An.css;if(kn.styleSheet)kn.styleSheet.cssText=wn(En,Rn);else{var Nn=document.createTextNode(Rn),Vn=kn.childNodes;Vn[En]&&kn.removeChild(Vn[En]),Vn.length?kn.insertBefore(Nn,Vn[En]):kn.appendChild(Nn)}}},function(Ot,en){Ot.exports=function(tn){var nn=typeof window<"u"&&window.location;if(!nn)throw new Error("fixUrls requires window.location");if(!tn||typeof tn!="string")return tn;var rn=nn.protocol+"//"+nn.host,on=rn+nn.pathname.replace(/\/[^\/]*$/,"/");return tn.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(sn,an){var ln,cn=an.trim().replace(/^"(.*)"$/,function(un,dn){return dn}).replace(/^'(.*)'$/,function(un,dn){return dn});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(cn)?sn:(ln=cn.indexOf("//")===0?cn:cn.indexOf("/")===0?rn+cn:on+cn.replace(/^\.\//,""),"url("+JSON.stringify(ln)+")")})}},function(Ot,en,tn){var nn,rn,on,sn,an,ln,cn,un,dn;Ot.exports=(nn="cdx-notifies",rn="cdx-notify",on="cdx-notify__cross",sn="cdx-notify__button--confirm",an="cdx-notify__button--cancel",ln="cdx-notify__input",cn="cdx-notify__button",un="cdx-notify__btns-wrapper",{alert:dn=function(hn){var fn=document.createElement("DIV"),mn=document.createElement("DIV"),gn=hn.message,pn=hn.style;return fn.classList.add(rn),pn&&fn.classList.add(rn+"--"+pn),fn.innerHTML=gn,mn.classList.add(on),mn.addEventListener("click",fn.remove.bind(fn)),fn.appendChild(mn),fn},confirm:function(hn){var fn=dn(hn),mn=document.createElement("div"),gn=document.createElement("button"),pn=document.createElement("button"),_n=fn.querySelector("."+on),vn=hn.cancelHandler,bn=hn.okHandler;return mn.classList.add(un),gn.innerHTML=hn.okText||"Confirm",pn.innerHTML=hn.cancelText||"Cancel",gn.classList.add(cn),pn.classList.add(cn),gn.classList.add(sn),pn.classList.add(an),vn&&typeof vn=="function"&&(pn.addEventListener("click",vn),_n.addEventListener("click",vn)),bn&&typeof bn=="function"&&gn.addEventListener("click",bn),gn.addEventListener("click",fn.remove.bind(fn)),pn.addEventListener("click",fn.remove.bind(fn)),mn.appendChild(gn),mn.appendChild(pn),fn.appendChild(mn),fn},prompt:function(hn){var fn=dn(hn),mn=document.createElement("div"),gn=document.createElement("button"),pn=document.createElement("input"),_n=fn.querySelector("."+on),vn=hn.cancelHandler,bn=hn.okHandler;return mn.classList.add(un),gn.innerHTML=hn.okText||"Ok",gn.classList.add(cn),gn.classList.add(sn),pn.classList.add(ln),hn.placeholder&&pn.setAttribute("placeholder",hn.placeholder),hn.default&&(pn.value=hn.default),hn.inputType&&(pn.type=hn.inputType),vn&&typeof vn=="function"&&_n.addEventListener("click",vn),bn&&typeof bn=="function"&&gn.addEventListener("click",function(){bn(pn.value)}),gn.addEventListener("click",fn.remove.bind(fn)),mn.appendChild(pn),mn.appendChild(gn),fn.appendChild(mn),fn},getWrapper:function(){var hn=document.createElement("DIV");return hn.classList.add(nn),hn}})}])})})(lo);const co=Pe(_e);class ho{show(s){co.show(s)}}class uo extends y$1{constructor({config:s,eventsDispatcher:Ot}){super({config:s,eventsDispatcher:Ot}),this.notifier=new ho}get methods(){return{show:s=>this.show(s)}}show(s){return this.notifier.show(s)}}class po extends y$1{get methods(){const s=()=>this.isEnabled;return{toggle:Ot=>this.toggle(Ot),get isEnabled(){return s()}}}toggle(s){return this.Editor.ReadOnly.toggle(s)}get isEnabled(){return this.Editor.ReadOnly.isEnabled}}var Oe={},fo={get exports(){return Oe},set exports(Nt){Oe=Nt}};(function(Nt,s){(function(Ot,en){Nt.exports=en()})(Rt,function(){function Ot(cn){var un=cn.tags,dn=Object.keys(un),hn=dn.map(function(fn){return typeof un[fn]}).every(function(fn){return fn==="object"||fn==="boolean"||fn==="function"});if(!hn)throw new Error("The configuration was invalid");this.config=cn}var en=["P","LI","TD","TH","DIV","H1","H2","H3","H4","H5","H6","PRE"];function tn(cn){return en.indexOf(cn.nodeName)!==-1}var nn=["A","B","STRONG","I","EM","SUB","SUP","U","STRIKE"];function rn(cn){return nn.indexOf(cn.nodeName)!==-1}Ot.prototype.clean=function(cn){const un=document.implementation.createHTMLDocument(),dn=un.createElement("div");return dn.innerHTML=cn,this._sanitize(un,dn),dn.innerHTML},Ot.prototype._sanitize=function(cn,un){var dn=on(cn,un),hn=dn.firstChild();if(hn)do{if(hn.nodeType===Node.TEXT_NODE)if(hn.data.trim()===""&&(hn.previousElementSibling&&tn(hn.previousElementSibling)||hn.nextElementSibling&&tn(hn.nextElementSibling))){un.removeChild(hn),this._sanitize(cn,un);break}else continue;if(hn.nodeType===Node.COMMENT_NODE){un.removeChild(hn),this._sanitize(cn,un);break}var fn=rn(hn),mn;fn&&(mn=Array.prototype.some.call(hn.childNodes,tn));var gn=!!un.parentNode,pn=tn(un)&&tn(hn)&&gn,_n=hn.nodeName.toLowerCase(),vn=sn(this.config,_n,hn),bn=fn&&mn;if(bn||an(hn,vn)||!this.config.keepNestedBlockElements&&pn){if(!(hn.nodeName==="SCRIPT"||hn.nodeName==="STYLE"))for(;hn.childNodes.length>0;)un.insertBefore(hn.childNodes[0],hn);un.removeChild(hn),this._sanitize(cn,un);break}for(var wn=0;wn<hn.attributes.length;wn+=1){var Sn=hn.attributes[wn];ln(Sn,vn,hn)&&(hn.removeAttribute(Sn.name),wn=wn-1)}this._sanitize(cn,hn)}while(hn=dn.nextSibling())};function on(cn,un){return cn.createTreeWalker(un,NodeFilter.SHOW_TEXT|NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT,null,!1)}function sn(cn,un,dn){return typeof cn.tags[un]=="function"?cn.tags[un](dn):cn.tags[un]}function an(cn,un){return typeof un>"u"?!0:typeof un=="boolean"?!un:!1}function ln(cn,un,dn){var hn=cn.name.toLowerCase();return un===!0?!1:typeof un[hn]=="function"?!un[hn](cn.value,dn):typeof un[hn]>"u"||un[hn]===!1?!0:typeof un[hn]=="string"?un[hn]!==cn.value:!1}return Ot})})(fo);const go=Oe;function bt(Nt,s){return Nt.map(Ot=>{const en=M$2(s)?s(Ot.tool):s;return W(en)||(Ot.data=ze(Ot.data,en)),Ot})}function V(Nt,s={}){const Ot={tags:s};return new go(Ot).clean(Nt)}function ze(Nt,s){return Array.isArray(Nt)?bo(Nt,s):D$1(Nt)?mo(Nt,s):G(Nt)?ko(Nt,s):Nt}function bo(Nt,s){return Nt.map(Ot=>ze(Ot,s))}function mo(Nt,s){const Ot={};for(const en in Nt){if(!Object.prototype.hasOwnProperty.call(Nt,en))continue;const tn=Nt[en],nn=vo(s[en])?s[en]:s;Ot[en]=ze(tn,nn)}return Ot}function ko(Nt,s){return D$1(s)?V(Nt,s):s===!1?V(Nt,{}):Nt}function vo(Nt){return D$1(Nt)||Ht(Nt)||M$2(Nt)}class xo extends y$1{get methods(){return{clean:(s,Ot)=>this.clean(s,Ot)}}clean(s,Ot){return V(s,Ot)}}class wo extends y$1{get methods(){return{save:()=>this.save()}}save(){const s="Editor's content can not be saved in read-only mode";return this.Editor.ReadOnly.isEnabled?(Y(s,"warn"),Promise.reject(new Error(s))):this.Editor.Saver.save()}}class yo extends y$1{get methods(){return{findParentTag:(s,Ot)=>this.findParentTag(s,Ot),expandToTag:s=>this.expandToTag(s)}}findParentTag(s,Ot){return new b$1().findParentTag(s,Ot)}expandToTag(s){new b$1().expandToTag(s)}}class Eo extends y$1{get classes(){return{block:"cdx-block",inlineToolButton:"ce-inline-tool",inlineToolButtonActive:"ce-inline-tool--active",input:"cdx-input",loader:"cdx-loader",button:"cdx-button",settingsButton:"cdx-settings-button",settingsButtonActive:"cdx-settings-button--active"}}}class Bo extends y$1{get methods(){return{close:()=>this.close(),open:()=>this.open(),toggleBlockSettings:s=>this.toggleBlockSettings(s),toggleToolbox:s=>this.toggleToolbox(s)}}open(){this.Editor.Toolbar.moveAndOpen()}close(){this.Editor.Toolbar.close()}toggleBlockSettings(s){if(this.Editor.BlockManager.currentBlockIndex===-1){Y("Could't toggle the Toolbar because there is no block selected ","warn");return}s??!this.Editor.BlockSettings.opened?(this.Editor.Toolbar.moveAndOpen(),this.Editor.BlockSettings.open()):this.Editor.BlockSettings.close()}toggleToolbox(s){if(this.Editor.BlockManager.currentBlockIndex===-1){Y("Could't toggle the Toolbox because there is no block selected ","warn");return}s??!this.Editor.Toolbar.toolbox.opened?(this.Editor.Toolbar.moveAndOpen(),this.Editor.Toolbar.toolbox.open()):this.Editor.Toolbar.toolbox.close()}}var Ne={},Co={get exports(){return Ne},set exports(Nt){Ne=Nt}};/*!
 * CodeX.Tooltips
 * 
 * @version 1.0.5
 * 
 * @licence MIT
 * @author CodeX <https://codex.so>
 * 
 * 
 */(function(Nt,s){(function(Ot,en){Nt.exports=en()})(window,function(){return function(Ot){var en={};function tn(nn){if(en[nn])return en[nn].exports;var rn=en[nn]={i:nn,l:!1,exports:{}};return Ot[nn].call(rn.exports,rn,rn.exports,tn),rn.l=!0,rn.exports}return tn.m=Ot,tn.c=en,tn.d=function(nn,rn,on){tn.o(nn,rn)||Object.defineProperty(nn,rn,{enumerable:!0,get:on})},tn.r=function(nn){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(nn,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(nn,"__esModule",{value:!0})},tn.t=function(nn,rn){if(1&rn&&(nn=tn(nn)),8&rn||4&rn&&typeof nn=="object"&&nn&&nn.__esModule)return nn;var on=Object.create(null);if(tn.r(on),Object.defineProperty(on,"default",{enumerable:!0,value:nn}),2&rn&&typeof nn!="string")for(var sn in nn)tn.d(on,sn,(function(an){return nn[an]}).bind(null,sn));return on},tn.n=function(nn){var rn=nn&&nn.__esModule?function(){return nn.default}:function(){return nn};return tn.d(rn,"a",rn),rn},tn.o=function(nn,rn){return Object.prototype.hasOwnProperty.call(nn,rn)},tn.p="",tn(tn.s=0)}([function(Ot,en,tn){Ot.exports=tn(1)},function(Ot,en,tn){tn.r(en),tn.d(en,"default",function(){return nn});class nn{constructor(){this.nodes={wrapper:null,content:null},this.showed=!1,this.offsetTop=10,this.offsetLeft=10,this.offsetRight=10,this.hidingDelay=0,this.handleWindowScroll=()=>{this.showed&&this.hide(!0)},this.loadStyles(),this.prepare(),window.addEventListener("scroll",this.handleWindowScroll,{passive:!0})}get CSS(){return{tooltip:"ct",tooltipContent:"ct__content",tooltipShown:"ct--shown",placement:{left:"ct--left",bottom:"ct--bottom",right:"ct--right",top:"ct--top"}}}show(on,sn,an){this.nodes.wrapper||this.prepare(),this.hidingTimeout&&clearTimeout(this.hidingTimeout);const ln=Object.assign({placement:"bottom",marginTop:0,marginLeft:0,marginRight:0,marginBottom:0,delay:70,hidingDelay:0},an);if(ln.hidingDelay&&(this.hidingDelay=ln.hidingDelay),this.nodes.content.innerHTML="",typeof sn=="string")this.nodes.content.appendChild(document.createTextNode(sn));else{if(!(sn instanceof Node))throw Error("[CodeX Tooltip] Wrong type of content passed. It should be an instance of Node or String. But "+typeof sn+" given.");this.nodes.content.appendChild(sn)}switch(this.nodes.wrapper.classList.remove(...Object.values(this.CSS.placement)),ln.placement){case"top":this.placeTop(on,ln);break;case"left":this.placeLeft(on,ln);break;case"right":this.placeRight(on,ln);break;case"bottom":default:this.placeBottom(on,ln)}ln&&ln.delay?this.showingTimeout=setTimeout(()=>{this.nodes.wrapper.classList.add(this.CSS.tooltipShown),this.showed=!0},ln.delay):(this.nodes.wrapper.classList.add(this.CSS.tooltipShown),this.showed=!0)}hide(on=!1){if(this.hidingDelay&&!on)return this.hidingTimeout&&clearTimeout(this.hidingTimeout),void(this.hidingTimeout=setTimeout(()=>{this.hide(!0)},this.hidingDelay));this.nodes.wrapper.classList.remove(this.CSS.tooltipShown),this.showed=!1,this.showingTimeout&&clearTimeout(this.showingTimeout)}onHover(on,sn,an){on.addEventListener("mouseenter",()=>{this.show(on,sn,an)}),on.addEventListener("mouseleave",()=>{this.hide()})}destroy(){this.nodes.wrapper.remove(),window.removeEventListener("scroll",this.handleWindowScroll)}prepare(){this.nodes.wrapper=this.make("div",this.CSS.tooltip),this.nodes.content=this.make("div",this.CSS.tooltipContent),this.append(this.nodes.wrapper,this.nodes.content),this.append(document.body,this.nodes.wrapper)}loadStyles(){const on="codex-tooltips-style";if(document.getElementById(on))return;const sn=tn(2),an=this.make("style",null,{textContent:sn.toString(),id:on});this.prepend(document.head,an)}placeBottom(on,sn){const an=on.getBoundingClientRect(),ln=an.left+on.clientWidth/2-this.nodes.wrapper.offsetWidth/2,cn=an.bottom+window.pageYOffset+this.offsetTop+sn.marginTop;this.applyPlacement("bottom",ln,cn)}placeTop(on,sn){const an=on.getBoundingClientRect(),ln=an.left+on.clientWidth/2-this.nodes.wrapper.offsetWidth/2,cn=an.top+window.pageYOffset-this.nodes.wrapper.clientHeight-this.offsetTop;this.applyPlacement("top",ln,cn)}placeLeft(on,sn){const an=on.getBoundingClientRect(),ln=an.left-this.nodes.wrapper.offsetWidth-this.offsetLeft-sn.marginLeft,cn=an.top+window.pageYOffset+on.clientHeight/2-this.nodes.wrapper.offsetHeight/2;this.applyPlacement("left",ln,cn)}placeRight(on,sn){const an=on.getBoundingClientRect(),ln=an.right+this.offsetRight+sn.marginRight,cn=an.top+window.pageYOffset+on.clientHeight/2-this.nodes.wrapper.offsetHeight/2;this.applyPlacement("right",ln,cn)}applyPlacement(on,sn,an){this.nodes.wrapper.classList.add(this.CSS.placement[on]),this.nodes.wrapper.style.left=sn+"px",this.nodes.wrapper.style.top=an+"px"}make(on,sn=null,an={}){const ln=document.createElement(on);Array.isArray(sn)?ln.classList.add(...sn):sn&&ln.classList.add(sn);for(const cn in an)an.hasOwnProperty(cn)&&(ln[cn]=an[cn]);return ln}append(on,sn){Array.isArray(sn)?sn.forEach(an=>on.appendChild(an)):on.appendChild(sn)}prepend(on,sn){Array.isArray(sn)?(sn=sn.reverse()).forEach(an=>on.prepend(an)):on.prepend(sn)}}},function(Ot,en){Ot.exports=`.ct{z-index:999;opacity:0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;pointer-events:none;-webkit-transition:opacity 50ms ease-in,-webkit-transform 70ms cubic-bezier(.215,.61,.355,1);transition:opacity 50ms ease-in,-webkit-transform 70ms cubic-bezier(.215,.61,.355,1);transition:opacity 50ms ease-in,transform 70ms cubic-bezier(.215,.61,.355,1);transition:opacity 50ms ease-in,transform 70ms cubic-bezier(.215,.61,.355,1),-webkit-transform 70ms cubic-bezier(.215,.61,.355,1);will-change:opacity,top,left;-webkit-box-shadow:0 8px 12px 0 rgba(29,32,43,.17),0 4px 5px -3px rgba(5,6,12,.49);box-shadow:0 8px 12px 0 rgba(29,32,43,.17),0 4px 5px -3px rgba(5,6,12,.49);border-radius:9px}.ct,.ct:before{position:absolute;top:0;left:0}.ct:before{content:"";bottom:0;right:0;background-color:#1d202b;z-index:-1;border-radius:4px}@supports(-webkit-mask-box-image:url("")){.ct:before{border-radius:0;-webkit-mask-box-image:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"><path d="M10.71 0h2.58c3.02 0 4.64.42 6.1 1.2a8.18 8.18 0 013.4 3.4C23.6 6.07 24 7.7 24 10.71v2.58c0 3.02-.42 4.64-1.2 6.1a8.18 8.18 0 01-3.4 3.4c-1.47.8-3.1 1.21-6.11 1.21H10.7c-3.02 0-4.64-.42-6.1-1.2a8.18 8.18 0 01-3.4-3.4C.4 17.93 0 16.3 0 13.29V10.7c0-3.02.42-4.64 1.2-6.1a8.18 8.18 0 013.4-3.4C6.07.4 7.7 0 10.71 0z"/></svg>') 48% 41% 37.9% 53.3%}}@media (--mobile){.ct{display:none}}.ct__content{padding:6px 10px;color:#cdd1e0;font-size:12px;text-align:center;letter-spacing:.02em;line-height:1em}.ct:after{content:"";width:8px;height:8px;position:absolute;background-color:#1d202b;z-index:-1}.ct--bottom{-webkit-transform:translateY(5px);transform:translateY(5px)}.ct--bottom:after{top:-3px;left:50%;-webkit-transform:translateX(-50%) rotate(-45deg);transform:translateX(-50%) rotate(-45deg)}.ct--top{-webkit-transform:translateY(-5px);transform:translateY(-5px)}.ct--top:after{top:auto;bottom:-3px;left:50%;-webkit-transform:translateX(-50%) rotate(-45deg);transform:translateX(-50%) rotate(-45deg)}.ct--left{-webkit-transform:translateX(-5px);transform:translateX(-5px)}.ct--left:after{top:50%;left:auto;right:0;-webkit-transform:translate(41.6%,-50%) rotate(-45deg);transform:translate(41.6%,-50%) rotate(-45deg)}.ct--right{-webkit-transform:translateX(5px);transform:translateX(5px)}.ct--right:after{top:50%;left:0;-webkit-transform:translate(-41.6%,-50%) rotate(-45deg);transform:translate(-41.6%,-50%) rotate(-45deg)}.ct--shown{opacity:1;-webkit-transform:none;transform:none}`}]).default})})(Co);const To=Pe(Ne);let F$1=null;function Ue(){F$1||(F$1=new To)}function So(Nt,s,Ot){Ue(),F$1==null||F$1.show(Nt,s,Ot)}function Re(Nt=!1){Ue(),F$1==null||F$1.hide(Nt)}function ge(Nt,s,Ot){Ue(),F$1==null||F$1.onHover(Nt,s,Ot)}function Io(){F$1==null||F$1.destroy(),F$1=null}class Mo extends y$1{constructor({config:s,eventsDispatcher:Ot}){super({config:s,eventsDispatcher:Ot})}get methods(){return{show:(s,Ot,en)=>this.show(s,Ot,en),hide:()=>this.hide(),onHover:(s,Ot,en)=>this.onHover(s,Ot,en)}}show(s,Ot,en){So(s,Ot,en)}hide(){Re()}onHover(s,Ot,en){ge(s,Ot,en)}}class Lo extends y$1{get methods(){return{nodes:this.editorNodes}}get editorNodes(){return{wrapper:this.Editor.UI.nodes.wrapper,redactor:this.Editor.UI.nodes.redactor}}}function mt(Nt,s){const Ot={};return Object.entries(Nt).forEach(([en,tn])=>{if(D$1(tn)){const nn=s?`${s}.${en}`:en;Object.values(tn).every(rn=>G(rn))?Ot[en]=nn:Ot[en]=mt(tn,nn);return}Ot[en]=tn}),Ot}const K=mt(ht);function Ao(Nt,s){const Ot={};return Object.keys(Nt).forEach(en=>{const tn=s[en];tn!==void 0?Ot[tn]=Nt[en]:Ot[en]=Nt[en]}),Ot}const _o='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M9 12L9 7.1C9 7.04477 9.04477 7 9.1 7H10.4C11.5 7 14 7.1 14 9.5C14 9.5 14 12 11 12M9 12V16.8C9 16.9105 9.08954 17 9.2 17H12.5C14 17 15 16 15 14.5C15 11.7046 11 12 11 12M9 12H11"/></svg>',kt='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M7 10L11.8586 14.8586C11.9367 14.9367 12.0633 14.9367 12.1414 14.8586L17 10"/></svg>',Oo='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M7 15L11.8586 10.1414C11.9367 10.0633 12.0633 10.0633 12.1414 10.1414L17 15"/></svg>',No='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M8 8L12 12M12 12L16 16M12 12L16 8M12 12L8 16"/></svg>',Ro='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><circle cx="12" cy="12" r="4" stroke="currentColor" stroke-width="2"/></svg>',Do='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M13.34 10C12.4223 12.7337 11 17 11 17"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M14.21 7H14.2"/></svg>',it='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M7.69998 12.6L7.67896 12.62C6.53993 13.7048 6.52012 15.5155 7.63516 16.625V16.625C8.72293 17.7073 10.4799 17.7102 11.5712 16.6314L13.0263 15.193C14.0703 14.1609 14.2141 12.525 13.3662 11.3266L13.22 11.12"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M16.22 11.12L16.3564 10.9805C17.2895 10.0265 17.3478 8.5207 16.4914 7.49733V7.49733C15.5691 6.39509 13.9269 6.25143 12.8271 7.17675L11.3901 8.38588C10.0935 9.47674 9.95706 11.4241 11.0888 12.6852L11.12 12.72"/></svg>',Po='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M9.40999 7.29999H9.4"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M14.6 7.29999H14.59"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M9.30999 12H9.3"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M14.6 12H14.59"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M9.40999 16.7H9.4"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M14.6 16.7H14.59"/></svg>',Fo='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M12 7V12M12 17V12M17 12H12M12 12H7"/></svg>',Ho='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><circle cx="10.5" cy="10.5" r="5.5" stroke="currentColor" stroke-width="2"/><line x1="15.4142" x2="19" y1="15" y2="18.5858" stroke="currentColor" stroke-linecap="round" stroke-width="2"/></svg>',zo='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M15.7795 11.5C15.7795 11.5 16.053 11.1962 16.5497 10.6722C17.4442 9.72856 17.4701 8.2475 16.5781 7.30145V7.30145C15.6482 6.31522 14.0873 6.29227 13.1288 7.25073L11.8796 8.49999"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M8.24517 12.3883C8.24517 12.3883 7.97171 12.6922 7.47504 13.2161C6.58051 14.1598 6.55467 15.6408 7.44666 16.5869V16.5869C8.37653 17.5731 9.93744 17.5961 10.8959 16.6376L12.1452 15.3883"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M17.7802 15.1032L16.597 14.9422C16.0109 14.8624 15.4841 15.3059 15.4627 15.8969L15.4199 17.0818"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M6.39064 9.03238L7.58432 9.06668C8.17551 9.08366 8.6522 8.58665 8.61056 7.99669L8.5271 6.81397"/><line x1="12.1142" x2="11.7" y1="12.2" y2="11.7858" stroke="currentColor" stroke-linecap="round" stroke-width="2"/></svg>',Uo='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><rect width="14" height="14" x="5" y="5" stroke="currentColor" stroke-width="2" rx="4"/><line x1="12" x2="12" y1="9" y2="12" stroke="currentColor" stroke-linecap="round" stroke-width="2"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M12 15.02V15.01"/></svg>';let _$1=class rr{constructor(s){this.nodes={root:null,icon:null},this.confirmationState=null,this.removeSpecialFocusBehavior=()=>{this.nodes.root.classList.remove(rr.CSS.noFocus)},this.removeSpecialHoverBehavior=()=>{this.nodes.root.classList.remove(rr.CSS.noHover)},this.onErrorAnimationEnd=()=>{this.nodes.icon.classList.remove(rr.CSS.wobbleAnimation),this.nodes.icon.removeEventListener("animationend",this.onErrorAnimationEnd)},this.params=s,this.nodes.root=this.make(s)}get isDisabled(){return this.params.isDisabled}get toggle(){return this.params.toggle}get title(){return this.params.title}get closeOnActivate(){return this.params.closeOnActivate}get isConfirmationStateEnabled(){return this.confirmationState!==null}get isFocused(){return this.nodes.root.classList.contains(rr.CSS.focused)}static get CSS(){return{container:"ce-popover-item",title:"ce-popover-item__title",secondaryTitle:"ce-popover-item__secondary-title",icon:"ce-popover-item__icon",active:"ce-popover-item--active",disabled:"ce-popover-item--disabled",focused:"ce-popover-item--focused",hidden:"ce-popover-item--hidden",confirmationState:"ce-popover-item--confirmation",noHover:"ce-popover-item--no-hover",noFocus:"ce-popover-item--no-focus",wobbleAnimation:"wobble"}}getElement(){return this.nodes.root}handleClick(){if(this.isConfirmationStateEnabled){this.activateOrEnableConfirmationMode(this.confirmationState);return}this.activateOrEnableConfirmationMode(this.params)}toggleActive(s){this.nodes.root.classList.toggle(rr.CSS.active,s)}toggleHidden(s){this.nodes.root.classList.toggle(rr.CSS.hidden,s)}reset(){this.isConfirmationStateEnabled&&this.disableConfirmationMode()}onFocus(){this.disableSpecialHoverAndFocusBehavior()}make(s){const Ot=c$3.make("div",rr.CSS.container);return s.name&&(Ot.dataset.itemName=s.name),this.nodes.icon=c$3.make("div",rr.CSS.icon,{innerHTML:s.icon||Ro}),Ot.appendChild(this.nodes.icon),Ot.appendChild(c$3.make("div",rr.CSS.title,{innerHTML:s.title||""})),s.secondaryLabel&&Ot.appendChild(c$3.make("div",rr.CSS.secondaryTitle,{textContent:s.secondaryLabel})),s.isActive&&Ot.classList.add(rr.CSS.active),s.isDisabled&&Ot.classList.add(rr.CSS.disabled),Ot}enableConfirmationMode(s){const Ot={...this.params,...s,confirmation:s.confirmation},en=this.make(Ot);this.nodes.root.innerHTML=en.innerHTML,this.nodes.root.classList.add(rr.CSS.confirmationState),this.confirmationState=s,this.enableSpecialHoverAndFocusBehavior()}disableConfirmationMode(){const s=this.make(this.params);this.nodes.root.innerHTML=s.innerHTML,this.nodes.root.classList.remove(rr.CSS.confirmationState),this.confirmationState=null,this.disableSpecialHoverAndFocusBehavior()}enableSpecialHoverAndFocusBehavior(){this.nodes.root.classList.add(rr.CSS.noHover),this.nodes.root.classList.add(rr.CSS.noFocus),this.nodes.root.addEventListener("mouseleave",this.removeSpecialHoverBehavior,{once:!0})}disableSpecialHoverAndFocusBehavior(){this.removeSpecialFocusBehavior(),this.removeSpecialHoverBehavior(),this.nodes.root.removeEventListener("mouseleave",this.removeSpecialHoverBehavior)}activateOrEnableConfirmationMode(s){if(s.confirmation===void 0)try{s.onActivate(s),this.disableConfirmationMode()}catch{this.animateError()}else this.enableConfirmationMode(s.confirmation)}animateError(){this.nodes.icon.classList.contains(rr.CSS.wobbleAnimation)||(this.nodes.icon.classList.add(rr.CSS.wobbleAnimation),this.nodes.icon.addEventListener("animationend",this.onErrorAnimationEnd))}};const he=class{constructor(Nt,s){this.cursor=-1,this.items=[],this.items=Nt||[],this.focusedCssClass=s}get currentItem(){return this.cursor===-1?null:this.items[this.cursor]}setCursor(Nt){Nt<this.items.length&&Nt>=-1&&(this.dropCursor(),this.cursor=Nt,this.items[this.cursor].classList.add(this.focusedCssClass))}setItems(Nt){this.items=Nt}next(){this.cursor=this.leafNodesAndReturnIndex(he.directions.RIGHT)}previous(){this.cursor=this.leafNodesAndReturnIndex(he.directions.LEFT)}dropCursor(){this.cursor!==-1&&(this.items[this.cursor].classList.remove(this.focusedCssClass),this.cursor=-1)}leafNodesAndReturnIndex(Nt){if(this.items.length===0)return this.cursor;let s=this.cursor;return s===-1?s=Nt===he.directions.RIGHT?-1:0:this.items[s].classList.remove(this.focusedCssClass),Nt===he.directions.RIGHT?s=(s+1)%this.items.length:s=(this.items.length+s-1)%this.items.length,c$3.canSetCaret(this.items[s])&&xe(()=>b$1.setCursor(this.items[s]),50)(),this.items[s].classList.add(this.focusedCssClass),s}};let ne=he;ne.directions={RIGHT:"right",LEFT:"left"};class q{constructor(s){this.iterator=null,this.activated=!1,this.flipCallbacks=[],this.onKeyDown=Ot=>{if(this.isEventReadyForHandling(Ot))switch(q.usedKeys.includes(Ot.keyCode)&&Ot.preventDefault(),Ot.keyCode){case k$2.TAB:this.handleTabPress(Ot);break;case k$2.LEFT:case k$2.UP:this.flipLeft();break;case k$2.RIGHT:case k$2.DOWN:this.flipRight();break;case k$2.ENTER:this.handleEnterPress(Ot);break}},this.iterator=new ne(s.items,s.focusedItemClass),this.activateCallback=s.activateCallback,this.allowedKeys=s.allowedKeys||q.usedKeys}get isActivated(){return this.activated}static get usedKeys(){return[k$2.TAB,k$2.LEFT,k$2.RIGHT,k$2.ENTER,k$2.UP,k$2.DOWN]}activate(s,Ot){this.activated=!0,s&&this.iterator.setItems(s),Ot!==void 0&&this.iterator.setCursor(Ot),document.addEventListener("keydown",this.onKeyDown,!0)}deactivate(){this.activated=!1,this.dropCursor(),document.removeEventListener("keydown",this.onKeyDown)}focusFirst(){this.dropCursor(),this.flipRight()}flipLeft(){this.iterator.previous(),this.flipCallback()}flipRight(){this.iterator.next(),this.flipCallback()}hasFocus(){return!!this.iterator.currentItem}onFlip(s){this.flipCallbacks.push(s)}removeOnFlip(s){this.flipCallbacks=this.flipCallbacks.filter(Ot=>Ot!==s)}dropCursor(){this.iterator.dropCursor()}isEventReadyForHandling(s){return this.activated&&this.allowedKeys.includes(s.keyCode)}handleTabPress(s){switch(s.shiftKey?ne.directions.LEFT:ne.directions.RIGHT){case ne.directions.RIGHT:this.flipRight();break;case ne.directions.LEFT:this.flipLeft();break}}handleEnterPress(s){this.activated&&(this.iterator.currentItem&&(s.stopPropagation(),s.preventDefault(),this.iterator.currentItem.click()),M$2(this.activateCallback)&&this.activateCallback(this.iterator.currentItem))}flipCallback(){this.iterator.currentItem&&this.iterator.currentItem.scrollIntoViewIfNeeded(),this.flipCallbacks.forEach(s=>s())}}class pe{static get CSS(){return{wrapper:"cdx-search-field",icon:"cdx-search-field__icon",input:"cdx-search-field__input"}}constructor({items:s,onSearch:Ot,placeholder:en}){this.listeners=new Fe,this.items=s,this.onSearch=Ot,this.render(en)}getElement(){return this.wrapper}focus(){this.input.focus()}clear(){this.input.value="",this.searchQuery="",this.onSearch("",this.foundItems)}destroy(){this.listeners.removeAll()}render(s){this.wrapper=c$3.make("div",pe.CSS.wrapper);const Ot=c$3.make("div",pe.CSS.icon,{innerHTML:Ho});this.input=c$3.make("input",pe.CSS.input,{placeholder:s,tabIndex:-1}),this.wrapper.appendChild(Ot),this.wrapper.appendChild(this.input),this.listeners.on(this.input,"input",()=>{this.searchQuery=this.input.value,this.onSearch(this.searchQuery,this.foundItems)})}get foundItems(){return this.items.filter(s=>this.checkItem(s))}checkItem(s){var Ot;const en=((Ot=s.title)==null?void 0:Ot.toLowerCase())||"",tn=this.searchQuery.toLowerCase();return en.includes(tn)}}const ue=class{lock(){tt?this.lockHard():document.body.classList.add(ue.CSS.scrollLocked)}unlock(){tt?this.unlockHard():document.body.classList.remove(ue.CSS.scrollLocked)}lockHard(){this.scrollPosition=window.pageYOffset,document.documentElement.style.setProperty("--window-scroll-offset",`${this.scrollPosition}px`),document.body.classList.add(ue.CSS.scrollLockedHard)}unlockHard(){document.body.classList.remove(ue.CSS.scrollLockedHard),this.scrollPosition!==null&&window.scrollTo(0,this.scrollPosition),this.scrollPosition=null}};let vt=ue;vt.CSS={scrollLocked:"ce-scroll-locked",scrollLockedHard:"ce-scroll-locked--hard"};var jo=Object.defineProperty,$o=Object.getOwnPropertyDescriptor,Wo=(Nt,s,Ot,en)=>{for(var tn=en>1?void 0:en?$o(s,Ot):s,nn=Nt.length-1,rn;nn>=0;nn--)(rn=Nt[nn])&&(tn=(en?rn(s,Ot,tn):rn(tn))||tn);return en&&tn&&jo(s,Ot,tn),tn},be=(Nt=>(Nt.Close="close",Nt))(be||{});const N=class extends Ee{constructor(Nt){super(),this.scopeElement=document.body,this.listeners=new Fe,this.scrollLocker=new vt,this.nodes={wrapper:null,popover:null,nothingFoundMessage:null,customContent:null,items:null,overlay:null},this.messages={nothingFound:"Nothing found",search:"Search"},this.onFlip=()=>{this.items.find(s=>s.isFocused).onFocus()},this.items=Nt.items.map(s=>new _$1(s)),Nt.scopeElement!==void 0&&(this.scopeElement=Nt.scopeElement),Nt.messages&&(this.messages={...this.messages,...Nt.messages}),Nt.customContentFlippableItems&&(this.customContentFlippableItems=Nt.customContentFlippableItems),this.make(),Nt.customContent&&this.addCustomContent(Nt.customContent),Nt.searchable&&this.addSearch(),this.initializeFlipper()}static get CSS(){return{popover:"ce-popover",popoverOpenTop:"ce-popover--open-top",popoverOpened:"ce-popover--opened",search:"ce-popover__search",nothingFoundMessage:"ce-popover__nothing-found-message",nothingFoundMessageDisplayed:"ce-popover__nothing-found-message--displayed",customContent:"ce-popover__custom-content",customContentHidden:"ce-popover__custom-content--hidden",items:"ce-popover__items",overlay:"ce-popover__overlay",overlayHidden:"ce-popover__overlay--hidden"}}getElement(){return this.nodes.wrapper}hasFocus(){return this.flipper.hasFocus()}show(){this.shouldOpenBottom||(this.nodes.popover.style.setProperty("--popover-height",this.height+"px"),this.nodes.popover.classList.add(N.CSS.popoverOpenTop)),this.nodes.overlay.classList.remove(N.CSS.overlayHidden),this.nodes.popover.classList.add(N.CSS.popoverOpened),this.flipper.activate(this.flippableElements),this.search!==void 0&&requestAnimationFrame(()=>{var Nt;(Nt=this.search)==null||Nt.focus()}),te()&&this.scrollLocker.lock()}hide(){this.nodes.popover.classList.remove(N.CSS.popoverOpened),this.nodes.popover.classList.remove(N.CSS.popoverOpenTop),this.nodes.overlay.classList.add(N.CSS.overlayHidden),this.flipper.deactivate(),this.items.forEach(Nt=>Nt.reset()),this.search!==void 0&&this.search.clear(),te()&&this.scrollLocker.unlock(),this.emit("close")}destroy(){this.flipper.deactivate(),this.listeners.removeAll(),te()&&this.scrollLocker.unlock()}make(){this.nodes.popover=c$3.make("div",[N.CSS.popover]),this.nodes.nothingFoundMessage=c$3.make("div",[N.CSS.nothingFoundMessage],{textContent:this.messages.nothingFound}),this.nodes.popover.appendChild(this.nodes.nothingFoundMessage),this.nodes.items=c$3.make("div",[N.CSS.items]),this.items.forEach(Nt=>{this.nodes.items.appendChild(Nt.getElement())}),this.nodes.popover.appendChild(this.nodes.items),this.listeners.on(this.nodes.popover,"click",Nt=>{const s=this.getTargetItem(Nt);s!==void 0&&this.handleItemClick(s)}),this.nodes.wrapper=c$3.make("div"),this.nodes.overlay=c$3.make("div",[N.CSS.overlay,N.CSS.overlayHidden]),this.listeners.on(this.nodes.overlay,"click",()=>{this.hide()}),this.nodes.wrapper.appendChild(this.nodes.overlay),this.nodes.wrapper.appendChild(this.nodes.popover)}addSearch(){this.search=new pe({items:this.items,placeholder:this.messages.search,onSearch:(s,Ot)=>{this.items.forEach(tn=>{const nn=!Ot.includes(tn);tn.toggleHidden(nn)}),this.toggleNothingFoundMessage(Ot.length===0),this.toggleCustomContent(s!=="");const en=s===""?this.flippableElements:Ot.map(tn=>tn.getElement());this.flipper.isActivated&&(this.flipper.deactivate(),this.flipper.activate(en))}});const Nt=this.search.getElement();Nt.classList.add(N.CSS.search),this.nodes.popover.insertBefore(Nt,this.nodes.popover.firstChild)}addCustomContent(Nt){this.nodes.customContent=Nt,this.nodes.customContent.classList.add(N.CSS.customContent),this.nodes.popover.insertBefore(Nt,this.nodes.popover.firstChild)}getTargetItem(Nt){return this.items.find(s=>Nt.composedPath().includes(s.getElement()))}handleItemClick(Nt){Nt.isDisabled||(this.items.filter(s=>s!==Nt).forEach(s=>s.reset()),Nt.handleClick(),this.toggleItemActivenessIfNeeded(Nt),Nt.closeOnActivate&&this.hide())}initializeFlipper(){this.flipper=new q({items:this.flippableElements,focusedItemClass:_$1.CSS.focused,allowedKeys:[k$2.TAB,k$2.UP,k$2.DOWN,k$2.ENTER]}),this.flipper.onFlip(this.onFlip)}get flippableElements(){const Nt=this.items.map(s=>s.getElement());return(this.customContentFlippableItems||[]).concat(Nt)}get height(){let Nt=0;if(this.nodes.popover===null)return Nt;const s=this.nodes.popover.cloneNode(!0);return s.style.visibility="hidden",s.style.position="absolute",s.style.top="-1000px",s.classList.add(N.CSS.popoverOpened),document.body.appendChild(s),Nt=s.offsetHeight,s.remove(),Nt}get shouldOpenBottom(){const Nt=this.nodes.popover.getBoundingClientRect(),s=this.scopeElement.getBoundingClientRect(),Ot=this.height,en=Nt.top+Ot,tn=Nt.top-Ot,nn=Math.min(window.innerHeight,s.bottom);return tn<s.top||en<=nn}toggleNothingFoundMessage(Nt){this.nodes.nothingFoundMessage.classList.toggle(N.CSS.nothingFoundMessageDisplayed,Nt)}toggleCustomContent(Nt){var s;(s=this.nodes.customContent)==null||s.classList.toggle(N.CSS.customContentHidden,Nt)}toggleItemActivenessIfNeeded(Nt){if(Nt.toggle===!0&&Nt.toggleActive(),typeof Nt.toggle=="string"){const s=this.items.filter(Ot=>Ot.toggle===Nt.toggle);if(s.length===1){Nt.toggleActive();return}s.forEach(Ot=>{Ot.toggleActive(Ot===Nt)})}}};let je=N;Wo([le],je.prototype,"height",1);class Yo extends y$1{constructor(){super(...arguments),this.opened=!1,this.selection=new b$1,this.onPopoverClose=()=>{this.close()}}get events(){return{opened:"block-settings-opened",closed:"block-settings-closed"}}get CSS(){return{settings:"ce-settings"}}get flipper(){var s;return(s=this.popover)==null?void 0:s.flipper}make(){this.nodes.wrapper=c$3.make("div",[this.CSS.settings])}destroy(){this.removeAllNodes()}open(s=this.Editor.BlockManager.currentBlock){this.opened=!0,this.selection.save(),this.Editor.BlockSelection.selectBlock(s),this.Editor.BlockSelection.clearCache();const[Ot,en]=s.getTunes();this.eventsDispatcher.emit(this.events.opened),this.popover=new je({searchable:!0,items:Ot.map(tn=>this.resolveTuneAliases(tn)),customContent:en,customContentFlippableItems:this.getControls(en),scopeElement:this.Editor.API.methods.ui.nodes.redactor,messages:{nothingFound:z.ui(K.ui.popover,"Nothing found"),search:z.ui(K.ui.popover,"Filter")}}),this.popover.on(be.Close,this.onPopoverClose),this.nodes.wrapper.append(this.popover.getElement()),this.popover.show()}getElement(){return this.nodes.wrapper}close(){this.opened&&(this.opened=!1,b$1.isAtEditor||this.selection.restore(),this.selection.clearSaved(),!this.Editor.CrossBlockSelection.isCrossBlockSelectionStarted&&this.Editor.BlockManager.currentBlock&&this.Editor.BlockSelection.unselectBlock(this.Editor.BlockManager.currentBlock),this.eventsDispatcher.emit(this.events.closed),this.popover&&(this.popover.off(be.Close,this.onPopoverClose),this.popover.destroy(),this.popover.getElement().remove(),this.popover=null))}getControls(s){const{StylesAPI:Ot}=this.Editor,en=s.querySelectorAll(`.${Ot.classes.settingsButton}, ${c$3.allInputsSelector}`);return Array.from(en)}resolveTuneAliases(s){const Ot=Ao(s,{label:"title"});return s.confirmation&&(Ot.confirmation=this.resolveTuneAliases(s.confirmation)),Ot}}class $ extends y$1{constructor(){super(...arguments),this.opened=!1,this.tools=[],this.flipper=null,this.togglingCallback=null}static get CSS(){return{conversionToolbarWrapper:"ce-conversion-toolbar",conversionToolbarShowed:"ce-conversion-toolbar--showed",conversionToolbarTools:"ce-conversion-toolbar__tools",conversionToolbarLabel:"ce-conversion-toolbar__label",conversionTool:"ce-conversion-tool",conversionToolHidden:"ce-conversion-tool--hidden",conversionToolIcon:"ce-conversion-tool__icon",conversionToolSecondaryLabel:"ce-conversion-tool__secondary-label",conversionToolFocused:"ce-conversion-tool--focused",conversionToolActive:"ce-conversion-tool--active"}}make(){this.nodes.wrapper=c$3.make("div",[$.CSS.conversionToolbarWrapper,...this.isRtl?[this.Editor.UI.CSS.editorRtlFix]:[]]),this.nodes.tools=c$3.make("div",$.CSS.conversionToolbarTools);const s=c$3.make("div",$.CSS.conversionToolbarLabel,{textContent:z.ui(K.ui.inlineToolbar.converter,"Convert to")});return this.addTools(),this.enableFlipper(),c$3.append(this.nodes.wrapper,s),c$3.append(this.nodes.wrapper,this.nodes.tools),this.nodes.wrapper}destroy(){this.flipper&&(this.flipper.deactivate(),this.flipper=null),this.removeAllNodes()}toggle(s){this.opened?this.close():this.open(),M$2(s)&&(this.togglingCallback=s)}open(){this.filterTools(),this.opened=!0,this.nodes.wrapper.classList.add($.CSS.conversionToolbarShowed),window.requestAnimationFrame(()=>{this.flipper.activate(this.tools.map(s=>s.button).filter(s=>!s.classList.contains($.CSS.conversionToolHidden))),this.flipper.focusFirst(),M$2(this.togglingCallback)&&this.togglingCallback(!0)})}close(){this.opened=!1,this.flipper.deactivate(),this.nodes.wrapper.classList.remove($.CSS.conversionToolbarShowed),M$2(this.togglingCallback)&&this.togglingCallback(!1)}hasTools(){return this.tools.length===1?this.tools[0].name!==this.config.defaultBlock:!0}async replaceWithBlock(s,Ot){const{BlockManager:en,BlockSelection:tn,InlineToolbar:nn,Caret:rn}=this.Editor;en.convert(this.Editor.BlockManager.currentBlock,s,Ot),tn.clearSelection(),this.close(),nn.close(),window.requestAnimationFrame(()=>{rn.setToBlock(this.Editor.BlockManager.currentBlock,rn.positions.END)})}addTools(){const s=this.Editor.Tools.blockTools;Array.from(s.entries()).forEach(([Ot,en])=>{var tn;const nn=en.conversionConfig;!nn||!nn.import||(tn=en.toolbox)==null||tn.forEach(rn=>this.addToolIfValid(Ot,rn))})}addToolIfValid(s,Ot){W(Ot)||!Ot.icon||this.addTool(s,Ot)}addTool(s,Ot){var en;const tn=c$3.make("div",[$.CSS.conversionTool]),nn=c$3.make("div",[$.CSS.conversionToolIcon]);tn.dataset.tool=s,nn.innerHTML=Ot.icon,c$3.append(tn,nn),c$3.append(tn,c$3.text(z.t(K.toolNames,Ot.title||re(s))));const rn=(en=this.Editor.Tools.blockTools.get(s))==null?void 0:en.shortcut;if(rn){const on=c$3.make("span",$.CSS.conversionToolSecondaryLabel,{innerText:ye(rn)});c$3.append(tn,on)}c$3.append(this.nodes.tools,tn),this.tools.push({name:s,button:tn,toolboxItem:Ot}),this.listeners.on(tn,"click",async()=>{await this.replaceWithBlock(s,Ot.data)})}async filterTools(){const{currentBlock:s}=this.Editor.BlockManager,Ot=await s.getActiveToolboxEntry();function en(tn,nn){return tn.icon===nn.icon&&tn.title===nn.title}this.tools.forEach(tn=>{let nn=!1;if(Ot){const rn=en(Ot,tn.toolboxItem);nn=tn.button.dataset.tool===s.name&&rn}tn.button.hidden=nn,tn.button.classList.toggle($.CSS.conversionToolHidden,nn)})}enableFlipper(){this.flipper=new q({focusedItemClass:$.CSS.conversionToolFocused})}}var De={},Ko={get exports(){return De},set exports(Nt){De=Nt}};/*!
 * Library for handling keyboard shortcuts
 * @copyright CodeX (https://codex.so)
 * @license MIT
 * @author CodeX (https://codex.so)
 * @version 1.2.0
 */(function(Nt,s){(function(Ot,en){Nt.exports=en()})(window,function(){return function(Ot){var en={};function tn(nn){if(en[nn])return en[nn].exports;var rn=en[nn]={i:nn,l:!1,exports:{}};return Ot[nn].call(rn.exports,rn,rn.exports,tn),rn.l=!0,rn.exports}return tn.m=Ot,tn.c=en,tn.d=function(nn,rn,on){tn.o(nn,rn)||Object.defineProperty(nn,rn,{enumerable:!0,get:on})},tn.r=function(nn){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(nn,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(nn,"__esModule",{value:!0})},tn.t=function(nn,rn){if(1&rn&&(nn=tn(nn)),8&rn||4&rn&&typeof nn=="object"&&nn&&nn.__esModule)return nn;var on=Object.create(null);if(tn.r(on),Object.defineProperty(on,"default",{enumerable:!0,value:nn}),2&rn&&typeof nn!="string")for(var sn in nn)tn.d(on,sn,(function(an){return nn[an]}).bind(null,sn));return on},tn.n=function(nn){var rn=nn&&nn.__esModule?function(){return nn.default}:function(){return nn};return tn.d(rn,"a",rn),rn},tn.o=function(nn,rn){return Object.prototype.hasOwnProperty.call(nn,rn)},tn.p="",tn(tn.s=0)}([function(Ot,en,tn){function nn(sn,an){for(var ln=0;ln<an.length;ln++){var cn=an[ln];cn.enumerable=cn.enumerable||!1,cn.configurable=!0,"value"in cn&&(cn.writable=!0),Object.defineProperty(sn,cn.key,cn)}}function rn(sn,an,ln){return an&&nn(sn.prototype,an),ln&&nn(sn,ln),sn}tn.r(en);var on=function(){function sn(an){var ln=this;(function(cn,un){if(!(cn instanceof un))throw new TypeError("Cannot call a class as a function")})(this,sn),this.commands={},this.keys={},this.name=an.name,this.parseShortcutName(an.name),this.element=an.on,this.callback=an.callback,this.executeShortcut=function(cn){ln.execute(cn)},this.element.addEventListener("keydown",this.executeShortcut,!1)}return rn(sn,null,[{key:"supportedCommands",get:function(){return{SHIFT:["SHIFT"],CMD:["CMD","CONTROL","COMMAND","WINDOWS","CTRL"],ALT:["ALT","OPTION"]}}},{key:"keyCodes",get:function(){return{0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,BACKSPACE:8,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,INSERT:45,DELETE:46,".":190}}}]),rn(sn,[{key:"parseShortcutName",value:function(an){an=an.split("+");for(var ln=0;ln<an.length;ln++){an[ln]=an[ln].toUpperCase();var cn=!1;for(var un in sn.supportedCommands)if(sn.supportedCommands[un].includes(an[ln])){cn=this.commands[un]=!0;break}cn||(this.keys[an[ln]]=!0)}for(var dn in sn.supportedCommands)this.commands[dn]||(this.commands[dn]=!1)}},{key:"execute",value:function(an){var ln,cn={CMD:an.ctrlKey||an.metaKey,SHIFT:an.shiftKey,ALT:an.altKey},un=!0;for(ln in this.commands)this.commands[ln]!==cn[ln]&&(un=!1);var dn,hn=!0;for(dn in this.keys)hn=hn&&an.keyCode===sn.keyCodes[dn];un&&hn&&this.callback(an)}},{key:"remove",value:function(){this.element.removeEventListener("keydown",this.executeShortcut)}}]),sn}();en.default=on}]).default})})(Ko);const Xo=Pe(De);class Vo{constructor(){this.registeredShortcuts=new Map}add(s){if(this.findShortcut(s.on,s.name))throw Error(`Shortcut ${s.name} is already registered for ${s.on}. Please remove it before add a new handler.`);const Ot=new Xo({name:s.name,on:s.on,callback:s.handler}),en=this.registeredShortcuts.get(s.on)||[];this.registeredShortcuts.set(s.on,[...en,Ot])}remove(s,Ot){const en=this.findShortcut(s,Ot);if(!en)return;en.remove();const tn=this.registeredShortcuts.get(s);this.registeredShortcuts.set(s,tn.filter(nn=>nn!==en))}findShortcut(s,Ot){return(this.registeredShortcuts.get(s)||[]).find(({name:en})=>en===Ot)}}const ae=new Vo;var qo=Object.defineProperty,Zo=Object.getOwnPropertyDescriptor,xt=(Nt,s,Ot,en)=>{for(var tn=en>1?void 0:en?Zo(s,Ot):s,nn=Nt.length-1,rn;nn>=0;nn--)(rn=Nt[nn])&&(tn=(en?rn(s,Ot,tn):rn(tn))||tn);return en&&tn&&qo(s,Ot,tn),tn},ke=(Nt=>(Nt.Opened="toolbox-opened",Nt.Closed="toolbox-closed",Nt.BlockAdded="toolbox-block-added",Nt))(ke||{});const wt=class extends Ee{constructor({api:Nt,tools:s,i18nLabels:Ot}){super(),this.opened=!1,this.nodes={toolbox:null},this.onPopoverClose=()=>{this.opened=!1,this.emit("toolbox-closed")},this.api=Nt,this.tools=s,this.i18nLabels=Ot}get isEmpty(){return this.toolsToBeDisplayed.length===0}static get CSS(){return{toolbox:"ce-toolbox"}}make(){return this.popover=new je({scopeElement:this.api.ui.nodes.redactor,searchable:!0,messages:{nothingFound:this.i18nLabels.nothingFound,search:this.i18nLabels.filter},items:this.toolboxItemsToBeDisplayed}),this.popover.on(be.Close,this.onPopoverClose),this.enableShortcuts(),this.nodes.toolbox=this.popover.getElement(),this.nodes.toolbox.classList.add(wt.CSS.toolbox),this.nodes.toolbox}hasFocus(){var Nt;return(Nt=this.popover)==null?void 0:Nt.hasFocus()}destroy(){var Nt;super.destroy(),this.nodes&&this.nodes.toolbox&&(this.nodes.toolbox.remove(),this.nodes.toolbox=null),this.removeAllShortcuts(),(Nt=this.popover)==null||Nt.off(be.Close,this.onPopoverClose)}toolButtonActivated(Nt,s){this.insertNewBlock(Nt,s)}open(){var Nt;this.isEmpty||((Nt=this.popover)==null||Nt.show(),this.opened=!0,this.emit("toolbox-opened"))}close(){var Nt;(Nt=this.popover)==null||Nt.hide(),this.opened=!1,this.emit("toolbox-closed")}toggle(){this.opened?this.close():this.open()}get toolsToBeDisplayed(){const Nt=[];return this.tools.forEach(s=>{s.toolbox&&Nt.push(s)}),Nt}get toolboxItemsToBeDisplayed(){const Nt=(s,Ot)=>({icon:s.icon,title:z.t(K.toolNames,s.title||re(Ot.name)),name:Ot.name,onActivate:()=>{this.toolButtonActivated(Ot.name,s.data)},secondaryLabel:Ot.shortcut?ye(Ot.shortcut):""});return this.toolsToBeDisplayed.reduce((s,Ot)=>(Array.isArray(Ot.toolbox)?Ot.toolbox.forEach(en=>{s.push(Nt(en,Ot))}):Ot.toolbox!==void 0&&s.push(Nt(Ot.toolbox,Ot)),s),[])}enableShortcuts(){this.toolsToBeDisplayed.forEach(Nt=>{const s=Nt.shortcut;s&&this.enableShortcutForTool(Nt.name,s)})}enableShortcutForTool(Nt,s){ae.add({name:s,on:this.api.ui.nodes.redactor,handler:Ot=>{Ot.preventDefault();const en=this.api.blocks.getCurrentBlockIndex(),tn=this.api.blocks.getBlockByIndex(en);if(tn)try{this.api.blocks.convert(tn.id,Nt),window.requestAnimationFrame(()=>{this.api.caret.setToBlock(en,"end")});return}catch{}this.insertNewBlock(Nt)}})}removeAllShortcuts(){this.toolsToBeDisplayed.forEach(Nt=>{const s=Nt.shortcut;s&&ae.remove(this.api.ui.nodes.redactor,s)})}async insertNewBlock(Nt,s){const Ot=this.api.blocks.getCurrentBlockIndex(),en=this.api.blocks.getBlockByIndex(Ot);if(!en)return;const tn=en.isEmpty?Ot:Ot+1;let nn;if(s){const on=await this.api.blocks.composeBlockData(Nt);nn=Object.assign(on,s)}const rn=this.api.blocks.insert(Nt,nn,void 0,tn,void 0,en.isEmpty);rn.call(X.APPEND_CALLBACK),this.api.caret.setToBlock(tn),this.emit("toolbox-block-added",{block:rn}),this.api.toolbar.close()}};let $e=wt;xt([le],$e.prototype,"toolsToBeDisplayed",1);xt([le],$e.prototype,"toolboxItemsToBeDisplayed",1);const yt="block hovered";class Go extends y$1{constructor({config:s,eventsDispatcher:Ot}){super({config:s,eventsDispatcher:Ot}),this.toolboxInstance=null}get CSS(){return{toolbar:"ce-toolbar",content:"ce-toolbar__content",actions:"ce-toolbar__actions",actionsOpened:"ce-toolbar__actions--opened",toolbarOpened:"ce-toolbar--opened",openedToolboxHolderModifier:"codex-editor--toolbox-opened",plusButton:"ce-toolbar__plus",plusButtonShortcut:"ce-toolbar__plus-shortcut",settingsToggler:"ce-toolbar__settings-btn",settingsTogglerHidden:"ce-toolbar__settings-btn--hidden"}}get opened(){return this.nodes.wrapper.classList.contains(this.CSS.toolbarOpened)}get toolbox(){var s;return{opened:(s=this.toolboxInstance)==null?void 0:s.opened,close:()=>{var Ot;(Ot=this.toolboxInstance)==null||Ot.close()},open:()=>{if(this.toolboxInstance===null){T$1("toolbox.open() called before initialization is finished","warn");return}this.Editor.BlockManager.currentBlock=this.hoveredBlock,this.toolboxInstance.open()},toggle:()=>{if(this.toolboxInstance===null){T$1("toolbox.toggle() called before initialization is finished","warn");return}this.toolboxInstance.toggle()},hasFocus:()=>{var Ot;return(Ot=this.toolboxInstance)==null?void 0:Ot.hasFocus()}}}get blockActions(){return{hide:()=>{this.nodes.actions.classList.remove(this.CSS.actionsOpened)},show:()=>{this.nodes.actions.classList.add(this.CSS.actionsOpened)}}}get blockTunesToggler(){return{hide:()=>this.nodes.settingsToggler.classList.add(this.CSS.settingsTogglerHidden),show:()=>this.nodes.settingsToggler.classList.remove(this.CSS.settingsTogglerHidden)}}toggleReadOnly(s){s?(this.destroy(),this.Editor.BlockSettings.destroy(),this.disableModuleBindings()):window.requestIdleCallback(()=>{this.drawUI(),this.enableModuleBindings()},{timeout:2e3})}moveAndOpen(s=this.Editor.BlockManager.currentBlock){if(this.toolboxInstance===null){T$1("Can't open Toolbar since Editor initialization is not finished yet","warn");return}if(this.toolboxInstance.opened&&this.toolboxInstance.close(),this.Editor.BlockSettings.opened&&this.Editor.BlockSettings.close(),!s)return;this.hoveredBlock=s;const Ot=s.holder,{isMobile:en}=this.Editor.UI,tn=s.pluginsContent,nn=window.getComputedStyle(tn),rn=parseInt(nn.paddingTop,10),on=Ot.offsetHeight;let sn;en?sn=Ot.offsetTop+on:sn=Ot.offsetTop+rn,this.nodes.wrapper.style.top=`${Math.floor(sn)}px`,this.Editor.BlockManager.blocks.length===1&&s.isEmpty?this.blockTunesToggler.hide():this.blockTunesToggler.show(),this.open()}close(){var s,Ot;this.Editor.ReadOnly.isEnabled||((s=this.nodes.wrapper)==null||s.classList.remove(this.CSS.toolbarOpened),this.blockActions.hide(),(Ot=this.toolboxInstance)==null||Ot.close(),this.Editor.BlockSettings.close(),this.reset())}reset(){this.nodes.wrapper.style.top="unset"}open(s=!0){this.nodes.wrapper.classList.add(this.CSS.toolbarOpened),s?this.blockActions.show():this.blockActions.hide()}make(){this.nodes.wrapper=c$3.make("div",this.CSS.toolbar),["content","actions"].forEach(tn=>{this.nodes[tn]=c$3.make("div",this.CSS[tn])}),c$3.append(this.nodes.wrapper,this.nodes.content),c$3.append(this.nodes.content,this.nodes.actions),this.nodes.plusButton=c$3.make("div",this.CSS.plusButton,{innerHTML:Fo}),c$3.append(this.nodes.actions,this.nodes.plusButton),this.readOnlyMutableListeners.on(this.nodes.plusButton,"click",()=>{Re(!0),this.plusButtonClicked()},!1);const s=c$3.make("div");s.appendChild(document.createTextNode(z.ui(K.ui.toolbar.toolbox,"Add"))),s.appendChild(c$3.make("div",this.CSS.plusButtonShortcut,{textContent:"/"})),ge(this.nodes.plusButton,s,{hidingDelay:400}),this.nodes.settingsToggler=c$3.make("span",this.CSS.settingsToggler,{innerHTML:Po}),c$3.append(this.nodes.actions,this.nodes.settingsToggler);const Ot=c$3.make("div"),en=c$3.text(z.ui(K.ui.blockTunes.toggler,"Click to tune"));Ot.appendChild(en),Ot.appendChild(c$3.make("div",this.CSS.plusButtonShortcut,{textContent:ye("CMD + /")})),ge(this.nodes.settingsToggler,Ot,{hidingDelay:400}),c$3.append(this.nodes.actions,this.makeToolbox()),c$3.append(this.nodes.actions,this.Editor.BlockSettings.getElement()),c$3.append(this.Editor.UI.nodes.wrapper,this.nodes.wrapper)}makeToolbox(){return this.toolboxInstance=new $e({api:this.Editor.API.methods,tools:this.Editor.Tools.blockTools,i18nLabels:{filter:z.ui(K.ui.popover,"Filter"),nothingFound:z.ui(K.ui.popover,"Nothing found")}}),this.toolboxInstance.on(ke.Opened,()=>{this.Editor.UI.nodes.wrapper.classList.add(this.CSS.openedToolboxHolderModifier)}),this.toolboxInstance.on(ke.Closed,()=>{this.Editor.UI.nodes.wrapper.classList.remove(this.CSS.openedToolboxHolderModifier)}),this.toolboxInstance.on(ke.BlockAdded,({block:s})=>{const{BlockManager:Ot,Caret:en}=this.Editor,tn=Ot.getBlockById(s.id);tn.inputs.length===0&&(tn===Ot.lastBlock?(Ot.insertAtEnd(),en.setToBlock(Ot.lastBlock)):en.setToBlock(Ot.nextBlock))}),this.toolboxInstance.make()}plusButtonClicked(){var s;this.Editor.BlockManager.currentBlock=this.hoveredBlock,(s=this.toolboxInstance)==null||s.toggle()}enableModuleBindings(){this.readOnlyMutableListeners.on(this.nodes.settingsToggler,"mousedown",s=>{var Ot;s.stopPropagation(),this.settingsTogglerClicked(),(Ot=this.toolboxInstance)!=null&&Ot.opened&&this.toolboxInstance.close(),Re(!0)},!0),te()||this.eventsDispatcher.on(yt,s=>{var Ot;this.Editor.BlockSettings.opened||(Ot=this.toolboxInstance)!=null&&Ot.opened||this.moveAndOpen(s.block)})}disableModuleBindings(){this.readOnlyMutableListeners.clearAll()}settingsTogglerClicked(){this.Editor.BlockManager.currentBlock=this.hoveredBlock,this.Editor.BlockSettings.opened?this.Editor.BlockSettings.close():this.Editor.BlockSettings.open(this.hoveredBlock)}drawUI(){this.Editor.BlockSettings.make(),this.make()}destroy(){this.removeAllNodes(),this.toolboxInstance&&this.toolboxInstance.destroy()}}var Be=(Nt=>(Nt[Nt.Block=0]="Block",Nt[Nt.Inline=1]="Inline",Nt[Nt.Tune=2]="Tune",Nt))(Be||{}),ve=(Nt=>(Nt.Shortcut="shortcut",Nt.Toolbox="toolbox",Nt.EnabledInlineTools="inlineToolbar",Nt.EnabledBlockTunes="tunes",Nt.Config="config",Nt))(ve||{}),Et=(Nt=>(Nt.Shortcut="shortcut",Nt.SanitizeConfig="sanitize",Nt))(Et||{}),se=(Nt=>(Nt.IsEnabledLineBreaks="enableLineBreaks",Nt.Toolbox="toolbox",Nt.ConversionConfig="conversionConfig",Nt.IsReadOnlySupported="isReadOnlySupported",Nt.PasteConfig="pasteConfig",Nt))(se||{}),We=(Nt=>(Nt.IsInline="isInline",Nt.Title="title",Nt))(We||{}),Bt=(Nt=>(Nt.IsTune="isTune",Nt))(Bt||{});class Ye{constructor({name:s,constructable:Ot,config:en,api:tn,isDefault:nn,isInternal:rn=!1,defaultPlaceholder:on}){this.api=tn,this.name=s,this.constructable=Ot,this.config=en,this.isDefault=nn,this.isInternal=rn,this.defaultPlaceholder=on}get settings(){const s=this.config.config||{};return this.isDefault&&!("placeholder"in s)&&this.defaultPlaceholder&&(s.placeholder=this.defaultPlaceholder),s}reset(){if(M$2(this.constructable.reset))return this.constructable.reset()}prepare(){if(M$2(this.constructable.prepare))return this.constructable.prepare({toolName:this.name,config:this.settings})}get shortcut(){const s=this.constructable.shortcut;return this.config.shortcut||s}get sanitizeConfig(){return this.constructable.sanitize||{}}isInline(){return this.type===1}isBlock(){return this.type===0}isTune(){return this.type===2}}class Jo extends y$1{constructor({config:s,eventsDispatcher:Ot}){super({config:s,eventsDispatcher:Ot}),this.CSS={inlineToolbar:"ce-inline-toolbar",inlineToolbarShowed:"ce-inline-toolbar--showed",inlineToolbarLeftOriented:"ce-inline-toolbar--left-oriented",inlineToolbarRightOriented:"ce-inline-toolbar--right-oriented",inlineToolbarShortcut:"ce-inline-toolbar__shortcut",buttonsWrapper:"ce-inline-toolbar__buttons",actionsWrapper:"ce-inline-toolbar__actions",inlineToolButton:"ce-inline-tool",inputField:"cdx-input",focusedButton:"ce-inline-tool--focused",conversionToggler:"ce-inline-toolbar__dropdown",conversionTogglerArrow:"ce-inline-toolbar__dropdown-arrow",conversionTogglerHidden:"ce-inline-toolbar__dropdown--hidden",conversionTogglerContent:"ce-inline-toolbar__dropdown-content",togglerAndButtonsWrapper:"ce-inline-toolbar__toggler-and-button-wrapper"},this.opened=!1,this.toolbarVerticalMargin=te()?20:6,this.buttonsList=null,this.width=0,this.flipper=null}toggleReadOnly(s){s?(this.destroy(),this.Editor.ConversionToolbar.destroy()):window.requestIdleCallback(()=>{this.make()},{timeout:2e3})}async tryToShow(s=!1,Ot=!0){s&&this.close(),this.allowedToShow()&&(await this.addToolsFiltered(Ot),this.move(),this.open(Ot),this.Editor.Toolbar.close())}close(){this.opened&&(this.Editor.ReadOnly.isEnabled||(this.nodes.wrapper.classList.remove(this.CSS.inlineToolbarShowed),Array.from(this.toolsInstances.entries()).forEach(([s,Ot])=>{const en=this.getToolShortcut(s);en&&ae.remove(this.Editor.UI.nodes.redactor,en),M$2(Ot.clear)&&Ot.clear()}),this.reset(),this.opened=!1,this.flipper.deactivate(),this.Editor.ConversionToolbar.close()))}containsNode(s){return this.nodes.wrapper===void 0?!1:this.nodes.wrapper.contains(s)}destroy(){this.flipper&&(this.flipper.deactivate(),this.flipper=null),this.removeAllNodes()}make(){this.nodes.wrapper=c$3.make("div",[this.CSS.inlineToolbar,...this.isRtl?[this.Editor.UI.CSS.editorRtlFix]:[]]),this.nodes.togglerAndButtonsWrapper=c$3.make("div",this.CSS.togglerAndButtonsWrapper),this.nodes.buttons=c$3.make("div",this.CSS.buttonsWrapper),this.nodes.actions=c$3.make("div",this.CSS.actionsWrapper),this.listeners.on(this.nodes.wrapper,"mousedown",s=>{s.target.closest(`.${this.CSS.actionsWrapper}`)||s.preventDefault()}),c$3.append(this.nodes.wrapper,[this.nodes.togglerAndButtonsWrapper,this.nodes.actions]),c$3.append(this.Editor.UI.nodes.wrapper,this.nodes.wrapper),this.addConversionToggler(),c$3.append(this.nodes.togglerAndButtonsWrapper,this.nodes.buttons),this.prepareConversionToolbar(),window.requestAnimationFrame(()=>{this.recalculateWidth()}),this.enableFlipper()}open(){if(this.opened)return;this.nodes.wrapper.classList.add(this.CSS.inlineToolbarShowed),this.buttonsList=this.nodes.buttons.querySelectorAll(`.${this.CSS.inlineToolButton}`),this.opened=!0;let s=Array.from(this.buttonsList);s.unshift(this.nodes.conversionToggler),s=s.filter(Ot=>!Ot.hidden),this.flipper.activate(s)}move(){const s=b$1.rect,Ot=this.Editor.UI.nodes.wrapper.getBoundingClientRect(),en={x:s.x-Ot.x,y:s.y+s.height-Ot.top+this.toolbarVerticalMargin};en.x+this.width+Ot.x>this.Editor.UI.contentRect.right&&(en.x=this.Editor.UI.contentRect.right-this.width-Ot.x),this.nodes.wrapper.style.left=Math.floor(en.x)+"px",this.nodes.wrapper.style.top=Math.floor(en.y)+"px"}reset(){this.nodes.wrapper.classList.remove(this.CSS.inlineToolbarLeftOriented,this.CSS.inlineToolbarRightOriented),this.nodes.wrapper.style.left="0",this.nodes.wrapper.style.top="0"}allowedToShow(){const s=["IMG","INPUT"],Ot=b$1.get(),en=b$1.text;if(!Ot||!Ot.anchorNode||Ot.isCollapsed||en.length<1)return!1;const tn=c$3.isElement(Ot.anchorNode)?Ot.anchorNode:Ot.anchorNode.parentElement;if(Ot&&s.includes(tn.tagName)||tn.closest('[contenteditable="true"]')===null)return!1;const nn=this.Editor.BlockManager.getBlock(Ot.anchorNode);return nn?nn.tool.inlineTools.size!==0:!1}recalculateWidth(){this.width=this.nodes.wrapper.offsetWidth}addConversionToggler(){this.nodes.conversionToggler=c$3.make("div",this.CSS.conversionToggler),this.nodes.conversionTogglerContent=c$3.make("div",this.CSS.conversionTogglerContent);const s=c$3.make("div",this.CSS.conversionTogglerArrow,{innerHTML:kt});this.nodes.conversionToggler.appendChild(this.nodes.conversionTogglerContent),this.nodes.conversionToggler.appendChild(s),this.nodes.togglerAndButtonsWrapper.appendChild(this.nodes.conversionToggler),this.listeners.on(this.nodes.conversionToggler,"click",()=>{this.Editor.ConversionToolbar.toggle(Ot=>{!Ot&&this.opened?this.flipper.activate():this.opened&&this.flipper.deactivate()})}),te()===!1&&ge(this.nodes.conversionToggler,z.ui(K.ui.inlineToolbar.converter,"Convert to"),{placement:"top",hidingDelay:100})}async setConversionTogglerContent(){const{BlockManager:s}=this.Editor,{currentBlock:Ot}=s,en=Ot.name,tn=Ot.tool.conversionConfig,nn=tn&&tn.export;this.nodes.conversionToggler.hidden=!nn,this.nodes.conversionToggler.classList.toggle(this.CSS.conversionTogglerHidden,!nn);const rn=await Ot.getActiveToolboxEntry()||{};this.nodes.conversionTogglerContent.innerHTML=rn.icon||rn.title||re(en)}prepareConversionToolbar(){const s=this.Editor.ConversionToolbar.make();c$3.append(this.nodes.wrapper,s)}async addToolsFiltered(s=!0){const Ot=b$1.get(),en=this.Editor.BlockManager.getBlock(Ot.anchorNode);this.nodes.buttons.innerHTML="",this.nodes.actions.innerHTML="",this.toolsInstances=new Map,Array.from(en.tool.inlineTools.values()).forEach(tn=>{this.addTool(tn)}),s&&this.Editor.ConversionToolbar.hasTools()?await this.setConversionTogglerContent():this.nodes.conversionToggler.hidden=!0,this.recalculateWidth()}addTool(s){const Ot=s.create(),en=Ot.render();if(!en){T$1("Render method must return an instance of Node","warn",s.name);return}if(en.dataset.tool=s.name,this.nodes.buttons.appendChild(en),this.toolsInstances.set(s.name,Ot),M$2(Ot.renderActions)){const on=Ot.renderActions();this.nodes.actions.appendChild(on)}this.listeners.on(en,"click",on=>{this.toolClicked(Ot),on.preventDefault()});const tn=this.getToolShortcut(s.name);if(tn)try{this.enableShortcuts(Ot,tn)}catch{}const nn=c$3.make("div"),rn=z.t(K.toolNames,s.title||re(s.name));nn.appendChild(c$3.text(rn)),tn&&nn.appendChild(c$3.make("div",this.CSS.inlineToolbarShortcut,{textContent:ye(tn)})),te()===!1&&ge(en,nn,{placement:"top",hidingDelay:100}),Ot.checkState(b$1.get())}getToolShortcut(s){const{Tools:Ot}=this.Editor,en=Ot.inlineTools.get(s),tn=Ot.internal.inlineTools;return Array.from(tn.keys()).includes(s)?this.inlineTools[s][Et.Shortcut]:en.shortcut}enableShortcuts(s,Ot){ae.add({name:Ot,handler:en=>{const{currentBlock:tn}=this.Editor.BlockManager;tn&&tn.tool.enabledInlineTools&&(en.preventDefault(),this.toolClicked(s))},on:this.Editor.UI.nodes.redactor})}toolClicked(s){const Ot=b$1.range;s.surround(Ot),this.checkToolsState(),s.renderActions!==void 0&&this.flipper.deactivate()}checkToolsState(){this.toolsInstances.forEach(s=>{s.checkState(b$1.get())})}get inlineTools(){const s={};return Array.from(this.Editor.Tools.inlineTools.entries()).forEach(([Ot,en])=>{s[Ot]=en.create()}),s}enableFlipper(){this.flipper=new q({focusedItemClass:this.CSS.focusedButton,allowedKeys:[k$2.ENTER,k$2.TAB]})}}class Qo extends y$1{keydown(s){switch(this.beforeKeydownProcessing(s),s.keyCode){case k$2.BACKSPACE:this.backspace(s);break;case k$2.DELETE:this.delete(s);break;case k$2.ENTER:this.enter(s);break;case k$2.DOWN:case k$2.RIGHT:this.arrowRightAndDown(s);break;case k$2.UP:case k$2.LEFT:this.arrowLeftAndUp(s);break;case k$2.TAB:this.tabPressed(s);break;case k$2.SLASH:s.ctrlKey||s.metaKey?this.commandSlashPressed():this.slashPressed();break}}beforeKeydownProcessing(s){this.needToolbarClosing(s)&&lt(s.keyCode)&&(this.Editor.Toolbar.close(),this.Editor.ConversionToolbar.close(),s.ctrlKey||s.metaKey||s.altKey||s.shiftKey||this.Editor.BlockSelection.clearSelection(s))}keyup(s){s.shiftKey||this.Editor.UI.checkEmptiness()}dragOver(s){const Ot=this.Editor.BlockManager.getBlockByChildNode(s.target);Ot.dropTarget=!0}dragLeave(s){const Ot=this.Editor.BlockManager.getBlockByChildNode(s.target);Ot.dropTarget=!1}handleCommandC(s){const{BlockSelection:Ot}=this.Editor;Ot.anyBlockSelected&&Ot.copySelectedBlocks(s)}handleCommandX(s){const{BlockSelection:Ot,BlockManager:en,Caret:tn}=this.Editor;Ot.anyBlockSelected&&Ot.copySelectedBlocks(s).then(()=>{const nn=en.removeSelectedBlocks(),rn=en.insertDefaultBlockAtIndex(nn,!0);tn.setToBlock(rn,tn.positions.START),Ot.clearSelection(s)})}tabPressed(s){const{InlineToolbar:Ot,ConversionToolbar:en,Caret:tn}=this.Editor;en.opened||Ot.opened||(s.shiftKey?tn.navigatePrevious(!0):tn.navigateNext(!0))&&s.preventDefault()}commandSlashPressed(){this.Editor.BlockSelection.selectedBlocks.length>1||this.activateBlockSettings()}slashPressed(){this.Editor.BlockManager.currentBlock.isEmpty&&this.activateToolbox()}enter(s){const{BlockManager:Ot,UI:en}=this.Editor;if(Ot.currentBlock.tool.isLineBreaksEnabled||en.someToolbarOpened&&en.someFlipperButtonFocused||s.shiftKey)return;let tn=this.Editor.BlockManager.currentBlock;this.Editor.Caret.isAtStart&&!this.Editor.BlockManager.currentBlock.hasMedia?this.Editor.BlockManager.insertDefaultBlockAtIndex(this.Editor.BlockManager.currentBlockIndex):this.Editor.Caret.isAtEnd?tn=this.Editor.BlockManager.insertDefaultBlockAtIndex(this.Editor.BlockManager.currentBlockIndex+1):tn=this.Editor.BlockManager.split(),this.Editor.Caret.setToBlock(tn),this.Editor.Toolbar.moveAndOpen(tn),s.preventDefault()}backspace(s){const{BlockManager:Ot,Caret:en}=this.Editor,{currentBlock:tn,previousBlock:nn}=Ot;if(!(!b$1.isCollapsed||!en.isAtStart)){if(s.preventDefault(),this.Editor.Toolbar.close(),tn.currentInput!==tn.firstInput){en.navigatePrevious();return}if(nn!==null){if(nn.isEmpty){Ot.removeBlock(nn);return}if(tn.isEmpty){Ot.removeBlock(tn);const rn=Ot.currentBlock;en.setToBlock(rn,en.positions.END);return}ot(tn,nn)?this.mergeBlocks(nn,tn):en.setToBlock(nn,en.positions.END)}}}delete(s){const{BlockManager:Ot,Caret:en}=this.Editor,{currentBlock:tn,nextBlock:nn}=Ot;if(!(!b$1.isCollapsed||!en.isAtEnd)){if(s.preventDefault(),this.Editor.Toolbar.close(),tn.currentInput!==tn.lastInput){en.navigateNext();return}if(nn!==null){if(nn.isEmpty){Ot.removeBlock(nn);return}if(tn.isEmpty){Ot.removeBlock(tn),en.setToBlock(nn,en.positions.START);return}ot(tn,nn)?this.mergeBlocks(tn,nn):en.setToBlock(nn,en.positions.START)}}}mergeBlocks(s,Ot){const{BlockManager:en,Caret:tn,Toolbar:nn}=this.Editor;tn.createShadow(s.pluginsContent),en.mergeBlocks(s,Ot).then(()=>{window.requestAnimationFrame(()=>{tn.restoreCaret(s.pluginsContent),s.pluginsContent.normalize(),nn.close()})})}arrowRightAndDown(s){const Ot=q.usedKeys.includes(s.keyCode)&&(!s.shiftKey||s.keyCode===k$2.TAB);if(this.Editor.UI.someToolbarOpened&&Ot)return;this.Editor.Toolbar.close();const en=this.Editor.Caret.isAtEnd||this.Editor.BlockSelection.anyBlockSelected;if(s.shiftKey&&s.keyCode===k$2.DOWN&&en){this.Editor.CrossBlockSelection.toggleBlockSelectedState();return}if(s.keyCode===k$2.DOWN||s.keyCode===k$2.RIGHT&&!this.isRtl?this.Editor.Caret.navigateNext():this.Editor.Caret.navigatePrevious()){s.preventDefault();return}xe(()=>{this.Editor.BlockManager.currentBlock&&this.Editor.BlockManager.currentBlock.updateCurrentInput()},20)(),this.Editor.BlockSelection.clearSelection(s)}arrowLeftAndUp(s){if(this.Editor.UI.someToolbarOpened){if(q.usedKeys.includes(s.keyCode)&&(!s.shiftKey||s.keyCode===k$2.TAB))return;this.Editor.UI.closeAllToolbars()}this.Editor.Toolbar.close();const Ot=this.Editor.Caret.isAtStart||this.Editor.BlockSelection.anyBlockSelected;if(s.shiftKey&&s.keyCode===k$2.UP&&Ot){this.Editor.CrossBlockSelection.toggleBlockSelectedState(!1);return}if(s.keyCode===k$2.UP||s.keyCode===k$2.LEFT&&!this.isRtl?this.Editor.Caret.navigatePrevious():this.Editor.Caret.navigateNext()){s.preventDefault();return}xe(()=>{this.Editor.BlockManager.currentBlock&&this.Editor.BlockManager.currentBlock.updateCurrentInput()},20)(),this.Editor.BlockSelection.clearSelection(s)}needToolbarClosing(s){const Ot=s.keyCode===k$2.ENTER&&this.Editor.Toolbar.toolbox.opened,en=s.keyCode===k$2.ENTER&&this.Editor.BlockSettings.opened,tn=s.keyCode===k$2.ENTER&&this.Editor.InlineToolbar.opened,nn=s.keyCode===k$2.ENTER&&this.Editor.ConversionToolbar.opened,rn=s.keyCode===k$2.TAB;return!(s.shiftKey||rn||Ot||en||tn||nn)}activateToolbox(){this.Editor.Toolbar.opened||this.Editor.Toolbar.moveAndOpen(),this.Editor.Toolbar.toolbox.open()}activateBlockSettings(){this.Editor.Toolbar.opened||this.Editor.Toolbar.moveAndOpen(),this.Editor.BlockSettings.opened||this.Editor.BlockSettings.open()}}class Se{constructor(s){this.blocks=[],this.workingArea=s}get length(){return this.blocks.length}get array(){return this.blocks}get nodes(){return ct(this.workingArea.children)}static set(s,Ot,en){return isNaN(Number(Ot))?(Reflect.set(s,Ot,en),!0):(s.insert(+Ot,en),!0)}static get(s,Ot){return isNaN(Number(Ot))?Reflect.get(s,Ot):s.get(+Ot)}push(s){this.blocks.push(s),this.insertToDOM(s)}swap(s,Ot){const en=this.blocks[Ot];c$3.swap(this.blocks[s].holder,en.holder),this.blocks[Ot]=this.blocks[s],this.blocks[s]=en}move(s,Ot){const en=this.blocks.splice(Ot,1)[0],tn=s-1,nn=Math.max(0,tn),rn=this.blocks[nn];s>0?this.insertToDOM(en,"afterend",rn):this.insertToDOM(en,"beforebegin",rn),this.blocks.splice(s,0,en);const on=this.composeBlockEvent("move",{fromIndex:Ot,toIndex:s});en.call(X.MOVED,on)}insert(s,Ot,en=!1){if(!this.length){this.push(Ot);return}s>this.length&&(s=this.length),en&&(this.blocks[s].holder.remove(),this.blocks[s].call(X.REMOVED));const tn=en?1:0;if(this.blocks.splice(s,tn,Ot),s>0){const nn=this.blocks[s-1];this.insertToDOM(Ot,"afterend",nn)}else{const nn=this.blocks[s+1];nn?this.insertToDOM(Ot,"beforebegin",nn):this.insertToDOM(Ot)}}replace(s,Ot){if(this.blocks[s]===void 0)throw Error("Incorrect index");this.blocks[s].holder.replaceWith(Ot.holder),this.blocks[s]=Ot}insertMany(s,Ot){const en=new DocumentFragment;for(const tn of s)en.appendChild(tn.holder);if(this.length>0){if(Ot>0){const tn=Math.min(Ot-1,this.length-1);this.blocks[tn].holder.after(en)}else Ot===0&&this.workingArea.prepend(en);this.blocks.splice(Ot,0,...s)}else this.blocks.push(...s),this.workingArea.appendChild(en);s.forEach(tn=>tn.call(X.RENDERED))}remove(s){isNaN(s)&&(s=this.length-1),this.blocks[s].holder.remove(),this.blocks[s].call(X.REMOVED),this.blocks.splice(s,1)}removeAll(){this.workingArea.innerHTML="",this.blocks.forEach(s=>s.call(X.REMOVED)),this.blocks.length=0}insertAfter(s,Ot){const en=this.blocks.indexOf(s);this.insert(en+1,Ot)}get(s){return this.blocks[s]}indexOf(s){return this.blocks.indexOf(s)}insertToDOM(s,Ot,en){Ot?en.holder.insertAdjacentElement(Ot,s.holder):this.workingArea.appendChild(s.holder),s.call(X.RENDERED)}composeBlockEvent(s,Ot){return new CustomEvent(s,{detail:Ot})}}const nt="block-removed",st="block-added",ei="block-moved",rt="block-changed";class ti{constructor(){this.completed=Promise.resolve()}add(s){return new Promise((Ot,en)=>{this.completed=this.completed.then(s).then(Ot).catch(en)})}}class oi extends y$1{constructor(){super(...arguments),this._currentBlockIndex=-1,this._blocks=null}get currentBlockIndex(){return this._currentBlockIndex}set currentBlockIndex(s){this._currentBlockIndex=s}get firstBlock(){return this._blocks[0]}get lastBlock(){return this._blocks[this._blocks.length-1]}get currentBlock(){return this._blocks[this.currentBlockIndex]}set currentBlock(s){this.currentBlockIndex=this.getBlockIndex(s)}get nextBlock(){return this.currentBlockIndex===this._blocks.length-1?null:this._blocks[this.currentBlockIndex+1]}get nextContentfulBlock(){return this.blocks.slice(this.currentBlockIndex+1).find(s=>!!s.inputs.length)}get previousContentfulBlock(){return this.blocks.slice(0,this.currentBlockIndex).reverse().find(s=>!!s.inputs.length)}get previousBlock(){return this.currentBlockIndex===0?null:this._blocks[this.currentBlockIndex-1]}get blocks(){return this._blocks.array}get isEditorEmpty(){return this.blocks.every(s=>s.isEmpty)}prepare(){const s=new Se(this.Editor.UI.nodes.redactor);this._blocks=new Proxy(s,{set:Se.set,get:Se.get}),this.listeners.on(document,"copy",Ot=>this.Editor.BlockEvents.handleCommandC(Ot))}toggleReadOnly(s){s?this.disableModuleBindings():this.enableModuleBindings()}composeBlock({tool:s,data:Ot={},id:en=void 0,tunes:tn={}}){const nn=this.Editor.ReadOnly.isEnabled,rn=this.Editor.Tools.blockTools.get(s),on=new R$2({id:en,data:Ot,tool:rn,api:this.Editor.API,readOnly:nn,tunesData:tn},this.eventsDispatcher);return nn||window.requestIdleCallback(()=>{this.bindBlockEvents(on)},{timeout:2e3}),on}insert({id:s=void 0,tool:Ot=this.config.defaultBlock,data:en={},index:tn,needToFocus:nn=!0,replace:rn=!1,tunes:on={}}={}){let sn=tn;sn===void 0&&(sn=this.currentBlockIndex+(rn?0:1));const an=this.composeBlock({id:s,tool:Ot,data:en,tunes:on});return rn&&this.blockDidMutated(nt,this.getBlockByIndex(sn),{index:sn}),this._blocks.insert(sn,an,rn),this.blockDidMutated(st,an,{index:sn}),nn?this.currentBlockIndex=sn:sn<=this.currentBlockIndex&&this.currentBlockIndex++,an}insertMany(s,Ot=0){this._blocks.insertMany(s,Ot)}async update(s,Ot){const en=await s.data,tn=this.composeBlock({id:s.id,tool:s.name,data:Object.assign({},en,Ot),tunes:s.tunes}),nn=this.getBlockIndex(s);return this._blocks.replace(nn,tn),this.blockDidMutated(rt,tn,{index:nn}),tn}replace(s,Ot,en){const tn=this.getBlockIndex(s);this.insert({tool:Ot,data:en,index:tn,replace:!0})}paste(s,Ot,en=!1){const tn=this.insert({tool:s,replace:en});try{window.requestIdleCallback(()=>{tn.call(X.ON_PASTE,Ot)})}catch(nn){T$1(`${s}: onPaste callback call is failed`,"error",nn)}return tn}insertDefaultBlockAtIndex(s,Ot=!1){const en=this.composeBlock({tool:this.config.defaultBlock});return this._blocks[s]=en,this.blockDidMutated(st,en,{index:s}),Ot?this.currentBlockIndex=s:s<=this.currentBlockIndex&&this.currentBlockIndex++,en}insertAtEnd(){return this.currentBlockIndex=this.blocks.length-1,this.insert()}async mergeBlocks(s,Ot){const en=await Ot.data;W(en)||await s.mergeWith(en),this.removeBlock(Ot),this.currentBlockIndex=this._blocks.indexOf(s)}removeBlock(s,Ot=!0){return new Promise(en=>{const tn=this._blocks.indexOf(s);if(!this.validateIndex(tn))throw new Error("Can't find a Block to remove");s.destroy(),this._blocks.remove(tn),this.blockDidMutated(nt,s,{index:tn}),this.currentBlockIndex>=tn&&this.currentBlockIndex--,this.blocks.length?tn===0&&(this.currentBlockIndex=0):(this.currentBlockIndex=-1,Ot&&this.insert()),en()})}removeSelectedBlocks(){let s;for(let Ot=this.blocks.length-1;Ot>=0;Ot--)this.blocks[Ot].selected&&(this.removeBlock(this.blocks[Ot]),s=Ot);return s}removeAllBlocks(){for(let s=this.blocks.length-1;s>=0;s--)this._blocks.remove(s);this.currentBlockIndex=-1,this.insert(),this.currentBlock.firstInput.focus()}split(){const s=this.Editor.Caret.extractFragmentFromCaretPosition(),Ot=c$3.make("div");Ot.appendChild(s);const en={text:c$3.isEmpty(Ot)?"":Ot.innerHTML};return this.insert({data:en})}getBlockByIndex(s){return s===-1&&(s=this._blocks.length-1),this._blocks[s]}getBlockIndex(s){return this._blocks.indexOf(s)}getBlockById(s){return this._blocks.array.find(Ot=>Ot.id===s)}getBlock(s){c$3.isElement(s)||(s=s.parentNode);const Ot=this._blocks.nodes,en=s.closest(`.${R$2.CSS.wrapper}`),tn=Ot.indexOf(en);if(tn>=0)return this._blocks[tn]}setCurrentBlockByChildNode(s){c$3.isElement(s)||(s=s.parentNode);const Ot=s.closest(`.${R$2.CSS.wrapper}`);if(!Ot)return;const en=Ot.closest(`.${this.Editor.UI.CSS.editorWrapper}`);if(en!=null&&en.isEqualNode(this.Editor.UI.nodes.wrapper))return this.currentBlockIndex=this._blocks.nodes.indexOf(Ot),this.currentBlock.updateCurrentInput(),this.currentBlock}getBlockByChildNode(s){if(!s||!(s instanceof Node))return;c$3.isElement(s)||(s=s.parentNode);const Ot=s.closest(`.${R$2.CSS.wrapper}`);return this.blocks.find(en=>en.holder===Ot)}swap(s,Ot){this._blocks.swap(s,Ot),this.currentBlockIndex=Ot}move(s,Ot=this.currentBlockIndex){if(isNaN(s)||isNaN(Ot)){T$1("Warning during 'move' call: incorrect indices provided.","warn");return}if(!this.validateIndex(s)||!this.validateIndex(Ot)){T$1("Warning during 'move' call: indices cannot be lower than 0 or greater than the amount of blocks.","warn");return}this._blocks.move(s,Ot),this.currentBlockIndex=s,this.blockDidMutated(ei,this.currentBlock,{fromIndex:Ot,toIndex:s})}async convert(s,Ot,en){if(!await s.save())throw new Error("Could not convert Block. Failed to extract original Block data.");const tn=this.Editor.Tools.blockTools.get(Ot);if(!tn)throw new Error(`Could not convert Block. Tool ${Ot} not found.`);const nn=await s.exportDataAsString(),rn=V(nn,tn.sanitizeConfig);let on=to(rn,tn.conversionConfig);en&&(on=Object.assign(on,en)),this.replace(s,tn.name,on)}dropPointer(){this.currentBlockIndex=-1}async clear(s=!1){const Ot=new ti;this.blocks.forEach(en=>{Ot.add(async()=>{await this.removeBlock(en,!1)})}),await Ot.completed,this.dropPointer(),s&&this.insert(),this.Editor.UI.checkEmptiness()}async destroy(){await Promise.all(this.blocks.map(s=>s.destroy()))}bindBlockEvents(s){const{BlockEvents:Ot}=this.Editor;this.readOnlyMutableListeners.on(s.holder,"keydown",en=>{Ot.keydown(en)}),this.readOnlyMutableListeners.on(s.holder,"keyup",en=>{Ot.keyup(en)}),this.readOnlyMutableListeners.on(s.holder,"dragover",en=>{Ot.dragOver(en)}),this.readOnlyMutableListeners.on(s.holder,"dragleave",en=>{Ot.dragLeave(en)}),s.on("didMutated",en=>this.blockDidMutated(rt,en,{index:this.getBlockIndex(en)}))}disableModuleBindings(){this.readOnlyMutableListeners.clearAll()}enableModuleBindings(){this.readOnlyMutableListeners.on(document,"cut",s=>this.Editor.BlockEvents.handleCommandX(s)),this.blocks.forEach(s=>{this.bindBlockEvents(s)})}validateIndex(s){return!(s<0||s>=this._blocks.length)}blockDidMutated(s,Ot,en){const tn=new CustomEvent(s,{detail:{target:new ee(Ot),...en}});return this.eventsDispatcher.emit(pt,{event:tn}),Ot}}class ii extends y$1{constructor(){super(...arguments),this.anyBlockSelectedCache=null,this.needToSelectAll=!1,this.nativeInputSelected=!1,this.readyToBlockSelection=!1}get sanitizerConfig(){return{p:{},h1:{},h2:{},h3:{},h4:{},h5:{},h6:{},ol:{},ul:{},li:{},br:!0,img:{src:!0,width:!0,height:!0},a:{href:!0},b:{},i:{},u:{}}}get allBlocksSelected(){const{BlockManager:s}=this.Editor;return s.blocks.every(Ot=>Ot.selected===!0)}set allBlocksSelected(s){const{BlockManager:Ot}=this.Editor;Ot.blocks.forEach(en=>{en.selected=s}),this.clearCache()}get anyBlockSelected(){const{BlockManager:s}=this.Editor;return this.anyBlockSelectedCache===null&&(this.anyBlockSelectedCache=s.blocks.some(Ot=>Ot.selected===!0)),this.anyBlockSelectedCache}get selectedBlocks(){return this.Editor.BlockManager.blocks.filter(s=>s.selected)}prepare(){this.selection=new b$1,ae.add({name:"CMD+A",handler:s=>{const{BlockManager:Ot,ReadOnly:en}=this.Editor;if(en.isEnabled){s.preventDefault(),this.selectAllBlocks();return}Ot.currentBlock&&this.handleCommandA(s)},on:this.Editor.UI.nodes.redactor})}toggleReadOnly(){b$1.get().removeAllRanges(),this.allBlocksSelected=!1}unSelectBlockByIndex(s){const{BlockManager:Ot}=this.Editor;let en;isNaN(s)?en=Ot.currentBlock:en=Ot.getBlockByIndex(s),en.selected=!1,this.clearCache()}clearSelection(s,Ot=!1){const{BlockManager:en,Caret:tn,RectangleSelection:nn}=this.Editor;this.needToSelectAll=!1,this.nativeInputSelected=!1,this.readyToBlockSelection=!1;const rn=s&&s instanceof KeyboardEvent,on=rn&&lt(s.keyCode);if(this.anyBlockSelected&&rn&&on&&!b$1.isSelectionExists){const sn=en.removeSelectedBlocks();en.insertDefaultBlockAtIndex(sn,!0),tn.setToBlock(en.currentBlock),xe(()=>{const an=s.key;tn.insertContentAtCaretPosition(an.length>1?"":an)},20)()}if(this.Editor.CrossBlockSelection.clear(s),!this.anyBlockSelected||nn.isRectActivated()){this.Editor.RectangleSelection.clearSelection();return}Ot&&this.selection.restore(),this.allBlocksSelected=!1}copySelectedBlocks(s){s.preventDefault();const Ot=c$3.make("div");this.selectedBlocks.forEach(nn=>{const rn=V(nn.holder.innerHTML,this.sanitizerConfig),on=c$3.make("p");on.innerHTML=rn,Ot.appendChild(on)});const en=Array.from(Ot.childNodes).map(nn=>nn.textContent).join(`

`),tn=Ot.innerHTML;return s.clipboardData.setData("text/plain",en),s.clipboardData.setData("text/html",tn),Promise.all(this.selectedBlocks.map(nn=>nn.save())).then(nn=>{try{s.clipboardData.setData(this.Editor.Paste.MIME_TYPE,JSON.stringify(nn))}catch{}})}selectBlockByIndex(s){const{BlockManager:Ot}=this.Editor,en=Ot.getBlockByIndex(s);en!==void 0&&this.selectBlock(en)}selectBlock(s){this.selection.save(),b$1.get().removeAllRanges(),s.selected=!0,this.clearCache(),this.Editor.InlineToolbar.close()}unselectBlock(s){s.selected=!1,this.clearCache()}clearCache(){this.anyBlockSelectedCache=null}destroy(){ae.remove(this.Editor.UI.nodes.redactor,"CMD+A")}handleCommandA(s){if(this.Editor.RectangleSelection.clearSelection(),c$3.isNativeInput(s.target)&&!this.readyToBlockSelection){this.readyToBlockSelection=!0;return}const Ot=this.Editor.BlockManager.getBlock(s.target),en=Ot.inputs;if(en.length>1&&!this.readyToBlockSelection){this.readyToBlockSelection=!0;return}if(en.length===1&&!this.needToSelectAll){this.needToSelectAll=!0;return}this.needToSelectAll?(s.preventDefault(),this.selectAllBlocks(),this.needToSelectAll=!1,this.readyToBlockSelection=!1,this.Editor.ConversionToolbar.close()):this.readyToBlockSelection&&(s.preventDefault(),this.selectBlock(Ot),this.needToSelectAll=!0)}selectAllBlocks(){this.selection.save(),b$1.get().removeAllRanges(),this.allBlocksSelected=!0,this.Editor.InlineToolbar.close()}}class we extends y$1{get positions(){return{START:"start",END:"end",DEFAULT:"default"}}static get CSS(){return{shadowCaret:"cdx-shadow-caret"}}get isAtStart(){const{currentBlock:s}=this.Editor.BlockManager;if(!s.focusable)return!0;const Ot=b$1.get(),en=c$3.getDeepestNode(s.currentInput);let tn=Ot.focusNode;if(c$3.isNativeInput(en))return en.selectionEnd===0;if(!Ot.anchorNode)return!1;let nn=tn.textContent.search(/\S/);nn===-1&&(nn=0);let rn=Ot.focusOffset;return tn.nodeType!==Node.TEXT_NODE&&tn.childNodes.length&&(tn.childNodes[rn]?(tn=tn.childNodes[rn],rn=0):(tn=tn.childNodes[rn-1],rn=tn.textContent.length)),(c$3.isLineBreakTag(en)||c$3.isEmpty(en))&&this.getHigherLevelSiblings(tn,"left").every(on=>{const sn=c$3.isLineBreakTag(on),an=on.children.length===1&&c$3.isLineBreakTag(on.children[0]),ln=sn||an;return c$3.isEmpty(on)&&!ln})&&rn===nn?!0:en===null||tn===en&&rn<=nn}get isAtEnd(){const{currentBlock:s}=this.Editor.BlockManager;if(!s.focusable)return!0;const Ot=b$1.get();let en=Ot.focusNode;const tn=c$3.getDeepestNode(s.currentInput,!0);if(c$3.isNativeInput(tn))return tn.selectionEnd===tn.value.length;if(!Ot.focusNode)return!1;let nn=Ot.focusOffset;if(en.nodeType!==Node.TEXT_NODE&&en.childNodes.length&&(en.childNodes[nn-1]?(en=en.childNodes[nn-1],nn=en.textContent.length):(en=en.childNodes[0],nn=0)),c$3.isLineBreakTag(tn)||c$3.isEmpty(tn)){const on=this.getHigherLevelSiblings(en,"right");if(on.every((sn,an)=>an===on.length-1&&c$3.isLineBreakTag(sn)||c$3.isEmpty(sn)&&!c$3.isLineBreakTag(sn))&&nn===en.textContent.length)return!0}const rn=tn.textContent.replace(/\s+$/,"");return en===tn&&nn>=rn.length}setToBlock(s,Ot=this.positions.DEFAULT,en=0){var tn;const{BlockManager:nn,BlockSelection:rn}=this.Editor;if(rn.clearSelection(),!s.focusable){(tn=window.getSelection())==null||tn.removeAllRanges(),rn.selectBlock(s),nn.currentBlock=s;return}let on;switch(Ot){case this.positions.START:on=s.firstInput;break;case this.positions.END:on=s.lastInput;break;default:on=s.currentInput}if(!on)return;const sn=c$3.getDeepestNode(on,Ot===this.positions.END),an=c$3.getContentLength(sn);switch(!0){case Ot===this.positions.START:en=0;break;case Ot===this.positions.END:case en>an:en=an;break}this.set(sn,en),nn.setCurrentBlockByChildNode(s.holder),nn.currentBlock.currentInput=on}setToInput(s,Ot=this.positions.DEFAULT,en=0){const{currentBlock:tn}=this.Editor.BlockManager,nn=c$3.getDeepestNode(s);switch(Ot){case this.positions.START:this.set(nn,0);break;case this.positions.END:this.set(nn,c$3.getContentLength(nn));break;default:en&&this.set(nn,en)}tn.currentInput=s}set(s,Ot=0){const{top:en,bottom:tn}=b$1.setCursor(s,Ot),{innerHeight:nn}=window;en<0?window.scrollBy(0,en-30):tn>nn&&window.scrollBy(0,tn-nn+30)}setToTheLastBlock(){const s=this.Editor.BlockManager.lastBlock;if(s)if(s.tool.isDefault&&s.isEmpty)this.setToBlock(s);else{const Ot=this.Editor.BlockManager.insertAtEnd();this.setToBlock(Ot)}}extractFragmentFromCaretPosition(){const s=b$1.get();if(s.rangeCount){const Ot=s.getRangeAt(0),en=this.Editor.BlockManager.currentBlock.currentInput;if(Ot.deleteContents(),en)if(c$3.isNativeInput(en)){const tn=en,nn=document.createDocumentFragment(),rn=tn.value.substring(0,tn.selectionStart),on=tn.value.substring(tn.selectionStart);return nn.textContent=on,tn.value=rn,nn}else{const tn=Ot.cloneRange();return tn.selectNodeContents(en),tn.setStart(Ot.endContainer,Ot.endOffset),tn.extractContents()}}}navigateNext(s=!1){const{BlockManager:Ot}=this.Editor,{currentBlock:en,nextBlock:tn}=Ot,{nextInput:nn}=en,rn=this.isAtEnd;let on=tn;const sn=s||rn;if(nn&&sn)return this.setToInput(nn,this.positions.START),!0;if(on===null){if(en.tool.isDefault||!sn)return!1;on=Ot.insertAtEnd()}return sn?(this.setToBlock(on,this.positions.START),!0):!1}navigatePrevious(s=!1){const{currentBlock:Ot,previousBlock:en}=this.Editor.BlockManager;if(!Ot)return!1;const{previousInput:tn}=Ot,nn=s||this.isAtStart;return tn&&nn?(this.setToInput(tn,this.positions.END),!0):en!==null&&nn?(this.setToBlock(en,this.positions.END),!0):!1}createShadow(s){const Ot=document.createElement("span");Ot.classList.add(we.CSS.shadowCaret),s.insertAdjacentElement("beforeend",Ot)}restoreCaret(s){const Ot=s.querySelector(`.${we.CSS.shadowCaret}`);if(!Ot)return;new b$1().expandToTag(Ot);const en=document.createRange();en.selectNode(Ot),en.extractContents()}insertContentAtCaretPosition(s){const Ot=document.createDocumentFragment(),en=document.createElement("div"),tn=b$1.get(),nn=b$1.range;en.innerHTML=s,Array.from(en.childNodes).forEach(an=>Ot.appendChild(an)),Ot.childNodes.length===0&&Ot.appendChild(new Text);const rn=Ot.lastChild;nn.deleteContents(),nn.insertNode(Ot);const on=document.createRange(),sn=rn.nodeType===Node.TEXT_NODE?rn:rn.firstChild;sn!==null&&sn.textContent!==null&&on.setStart(sn,sn.textContent.length),tn.removeAllRanges(),tn.addRange(on)}getHigherLevelSiblings(s,Ot){let en=s;const tn=[];for(;en.parentNode&&en.parentNode.contentEditable!=="true";)en=en.parentNode;const nn=Ot==="left"?"previousSibling":"nextSibling";for(;en[nn];)en=en[nn],tn.push(en);return tn}}class ni extends y$1{constructor(){super(...arguments),this.onMouseUp=()=>{this.listeners.off(document,"mouseover",this.onMouseOver),this.listeners.off(document,"mouseup",this.onMouseUp)},this.onMouseOver=s=>{const{BlockManager:Ot,BlockSelection:en}=this.Editor;if(s.relatedTarget===null&&s.target===null)return;const tn=Ot.getBlockByChildNode(s.relatedTarget)||this.lastSelectedBlock,nn=Ot.getBlockByChildNode(s.target);if(!(!tn||!nn)&&nn!==tn){if(tn===this.firstSelectedBlock){b$1.get().removeAllRanges(),tn.selected=!0,nn.selected=!0,en.clearCache();return}if(nn===this.firstSelectedBlock){tn.selected=!1,nn.selected=!1,en.clearCache();return}this.Editor.InlineToolbar.close(),this.toggleBlocksSelectedState(tn,nn),this.lastSelectedBlock=nn}}}async prepare(){this.listeners.on(document,"mousedown",s=>{this.enableCrossBlockSelection(s)})}watchSelection(s){if(s.button!==Pt.LEFT)return;const{BlockManager:Ot}=this.Editor;this.firstSelectedBlock=Ot.getBlock(s.target),this.lastSelectedBlock=this.firstSelectedBlock,this.listeners.on(document,"mouseover",this.onMouseOver),this.listeners.on(document,"mouseup",this.onMouseUp)}get isCrossBlockSelectionStarted(){return!!this.firstSelectedBlock&&!!this.lastSelectedBlock}toggleBlockSelectedState(s=!0){const{BlockManager:Ot,BlockSelection:en}=this.Editor;this.lastSelectedBlock||(this.lastSelectedBlock=this.firstSelectedBlock=Ot.currentBlock),this.firstSelectedBlock===this.lastSelectedBlock&&(this.firstSelectedBlock.selected=!0,en.clearCache(),b$1.get().removeAllRanges());const tn=Ot.blocks.indexOf(this.lastSelectedBlock)+(s?1:-1),nn=Ot.blocks[tn];nn&&(this.lastSelectedBlock.selected!==nn.selected?(nn.selected=!0,en.clearCache()):(this.lastSelectedBlock.selected=!1,en.clearCache()),this.lastSelectedBlock=nn,this.Editor.InlineToolbar.close(),nn.holder.scrollIntoView({block:"nearest"}))}clear(s){const{BlockManager:Ot,BlockSelection:en,Caret:tn}=this.Editor,nn=Ot.blocks.indexOf(this.firstSelectedBlock),rn=Ot.blocks.indexOf(this.lastSelectedBlock);if(en.anyBlockSelected&&nn>-1&&rn>-1&&s&&s instanceof KeyboardEvent)switch(s.keyCode){case k$2.DOWN:case k$2.RIGHT:tn.setToBlock(Ot.blocks[Math.max(nn,rn)],tn.positions.END);break;case k$2.UP:case k$2.LEFT:tn.setToBlock(Ot.blocks[Math.min(nn,rn)],tn.positions.START);break;default:tn.setToBlock(Ot.blocks[Math.max(nn,rn)],tn.positions.END)}this.firstSelectedBlock=this.lastSelectedBlock=null}enableCrossBlockSelection(s){const{UI:Ot}=this.Editor;b$1.isCollapsed||this.Editor.BlockSelection.clearSelection(s),Ot.nodes.redactor.contains(s.target)?this.watchSelection(s):this.Editor.BlockSelection.clearSelection(s)}toggleBlocksSelectedState(s,Ot){const{BlockManager:en,BlockSelection:tn}=this.Editor,nn=en.blocks.indexOf(s),rn=en.blocks.indexOf(Ot),on=s.selected!==Ot.selected;for(let sn=Math.min(nn,rn);sn<=Math.max(nn,rn);sn++){const an=en.blocks[sn];an!==this.firstSelectedBlock&&an!==(on?s:Ot)&&(en.blocks[sn].selected=!en.blocks[sn].selected,tn.clearCache())}}}class si extends y$1{constructor(){super(...arguments),this.isStartedAtEditor=!1}toggleReadOnly(s){s?this.disableModuleBindings():this.enableModuleBindings()}enableModuleBindings(){const{UI:s}=this.Editor;this.readOnlyMutableListeners.on(s.nodes.holder,"drop",async Ot=>{await this.processDrop(Ot)},!0),this.readOnlyMutableListeners.on(s.nodes.holder,"dragstart",()=>{this.processDragStart()}),this.readOnlyMutableListeners.on(s.nodes.holder,"dragover",Ot=>{this.processDragOver(Ot)},!0)}disableModuleBindings(){this.readOnlyMutableListeners.clearAll()}async processDrop(s){const{BlockManager:Ot,Caret:en,Paste:tn}=this.Editor;s.preventDefault(),Ot.blocks.forEach(rn=>{rn.dropTarget=!1}),b$1.isAtEditor&&!b$1.isCollapsed&&this.isStartedAtEditor&&document.execCommand("delete"),this.isStartedAtEditor=!1;const nn=Ot.setCurrentBlockByChildNode(s.target);if(nn)this.Editor.Caret.setToBlock(nn,en.positions.END);else{const rn=Ot.setCurrentBlockByChildNode(Ot.lastBlock.holder);this.Editor.Caret.setToBlock(rn,en.positions.END)}await tn.processDataTransfer(s.dataTransfer,!0)}processDragStart(){b$1.isAtEditor&&!b$1.isCollapsed&&(this.isStartedAtEditor=!0),this.Editor.InlineToolbar.close()}processDragOver(s){s.preventDefault()}}class ri extends y$1{constructor({config:s,eventsDispatcher:Ot}){super({config:s,eventsDispatcher:Ot}),this.disabled=!1,this.batchingTimeout=null,this.batchingOnChangeQueue=new Map,this.batchTime=400,this.mutationObserver=new MutationObserver(en=>{this.redactorChanged(en)}),this.eventsDispatcher.on(pt,en=>{this.particularBlockChanged(en.event)}),this.eventsDispatcher.on(ft,()=>{this.disable()}),this.eventsDispatcher.on(gt,()=>{this.enable()})}enable(){this.mutationObserver.observe(this.Editor.UI.nodes.redactor,{childList:!0,subtree:!0,characterData:!0,attributes:!0}),this.disabled=!1}disable(){this.mutationObserver.disconnect(),this.disabled=!0}particularBlockChanged(s){this.disabled||!M$2(this.config.onChange)||(this.batchingOnChangeQueue.set(`block:${s.detail.target.id}:event:${s.type}`,s),this.batchingTimeout&&clearTimeout(this.batchingTimeout),this.batchingTimeout=setTimeout(()=>{let Ot;this.batchingOnChangeQueue.size===1?Ot=this.batchingOnChangeQueue.values().next().value:Ot=Array.from(this.batchingOnChangeQueue.values()),this.config.onChange&&this.config.onChange(this.Editor.API.methods,Ot),this.batchingOnChangeQueue.clear()},this.batchTime))}redactorChanged(s){this.eventsDispatcher.emit(Ae,{mutations:s})}}const Ct=class extends y$1{constructor(){super(...arguments),this.MIME_TYPE="application/x-editor-js",this.toolsTags={},this.tagsByTool={},this.toolsPatterns=[],this.toolsFiles={},this.exceptionList=[],this.processTool=Nt=>{try{const s=Nt.create({},{},!1);if(Nt.pasteConfig===!1){this.exceptionList.push(Nt.name);return}if(!M$2(s.onPaste))return;this.getTagsConfig(Nt),this.getFilesConfig(Nt),this.getPatternsConfig(Nt)}catch(s){T$1(`Paste handling for ${Nt.name} Tool hasn't been set up because of the error`,"warn",s)}},this.handlePasteEvent=async Nt=>{const{BlockManager:s,Toolbar:Ot}=this.Editor,en=s.setCurrentBlockByChildNode(Nt.target);!en||this.isNativeBehaviour(Nt.target)&&!Nt.clipboardData.types.includes("Files")||en&&this.exceptionList.includes(en.name)||(Nt.preventDefault(),this.processDataTransfer(Nt.clipboardData),Ot.close())}}async prepare(){this.processTools()}toggleReadOnly(Nt){Nt?this.unsetCallback():this.setCallback()}async processDataTransfer(Nt,s=!1){const{Tools:Ot}=this.Editor,en=Nt.types;if((en.includes?en.includes("Files"):en.contains("Files"))&&!W(this.toolsFiles)){await this.processFiles(Nt.files);return}const tn=Nt.getData(this.MIME_TYPE),nn=Nt.getData("text/plain");let rn=Nt.getData("text/html");if(tn)try{this.insertEditorJSData(JSON.parse(tn));return}catch{}s&&nn.trim()&&rn.trim()&&(rn="<p>"+(rn.trim()?rn:nn)+"</p>");const on=Object.keys(this.toolsTags).reduce((ln,cn)=>(ln[cn.toLowerCase()]=this.toolsTags[cn].sanitizationConfig??{},ln),{}),sn=Object.assign({},on,Ot.getAllInlineToolsSanitizeConfig(),{br:{}}),an=V(rn,sn);!an.trim()||an.trim()===nn||!c$3.isHTMLString(an)?await this.processText(nn):await this.processText(an,!0)}async processText(Nt,s=!1){const{Caret:Ot,BlockManager:en}=this.Editor,tn=s?this.processHTML(Nt):this.processPlain(Nt);if(!tn.length)return;if(tn.length===1){tn[0].isBlock?this.processSingleBlock(tn.pop()):this.processInlinePaste(tn.pop());return}const nn=en.currentBlock&&en.currentBlock.tool.isDefault&&en.currentBlock.isEmpty;tn.map(async(rn,on)=>this.insertBlock(rn,on===0&&nn)),en.currentBlock&&Ot.setToBlock(en.currentBlock,Ot.positions.END)}setCallback(){this.listeners.on(this.Editor.UI.nodes.holder,"paste",this.handlePasteEvent)}unsetCallback(){this.listeners.off(this.Editor.UI.nodes.holder,"paste",this.handlePasteEvent)}processTools(){const Nt=this.Editor.Tools.blockTools;Array.from(Nt.values()).forEach(this.processTool)}collectTagNames(Nt){return G(Nt)?[Nt]:D$1(Nt)?Object.keys(Nt):[]}getTagsConfig(Nt){if(Nt.pasteConfig===!1)return;const s=Nt.pasteConfig.tags||[],Ot=[];s.forEach(en=>{const tn=this.collectTagNames(en);Ot.push(...tn),tn.forEach(nn=>{if(Object.prototype.hasOwnProperty.call(this.toolsTags,nn)){T$1(`Paste handler for ${Nt.name} Tool on ${nn} tag is skipped because it is already used by ${this.toolsTags[nn].tool.name} Tool.`,"warn");return}const rn=D$1(en)?en[nn]:null;this.toolsTags[nn.toUpperCase()]={tool:Nt,sanitizationConfig:rn}})}),this.tagsByTool[Nt.name]=Ot.map(en=>en.toUpperCase())}getFilesConfig(Nt){if(Nt.pasteConfig===!1)return;const{files:s={}}=Nt.pasteConfig;let{extensions:Ot,mimeTypes:en}=s;!Ot&&!en||(Ot&&!Array.isArray(Ot)&&(T$1(`extensions property of the onDrop config for ${Nt.name} Tool should be an array`),Ot=[]),en&&!Array.isArray(en)&&(T$1(`mimeTypes property of the onDrop config for ${Nt.name} Tool should be an array`),en=[]),en&&(en=en.filter(tn=>jt(tn)?!0:(T$1(`MIME type value ${tn} for the ${Nt.name} Tool is not a valid MIME type`,"warn"),!1))),this.toolsFiles[Nt.name]={extensions:Ot||[],mimeTypes:en||[]})}getPatternsConfig(Nt){Nt.pasteConfig===!1||!Nt.pasteConfig.patterns||W(Nt.pasteConfig.patterns)||Object.entries(Nt.pasteConfig.patterns).forEach(([s,Ot])=>{Ot instanceof RegExp||T$1(`Pattern ${Ot} for ${Nt.name} Tool is skipped because it should be a Regexp instance.`,"warn"),this.toolsPatterns.push({key:s,pattern:Ot,tool:Nt})})}isNativeBehaviour(Nt){return c$3.isNativeInput(Nt)}async processFiles(Nt){const{BlockManager:s}=this.Editor;let Ot;Ot=await Promise.all(Array.from(Nt).map(tn=>this.processFile(tn))),Ot=Ot.filter(tn=>!!tn);const en=s.currentBlock.tool.isDefault&&s.currentBlock.isEmpty;Ot.forEach((tn,nn)=>{s.paste(tn.type,tn.event,nn===0&&en)})}async processFile(Nt){const s=Ut(Nt),Ot=Object.entries(this.toolsFiles).find(([tn,{mimeTypes:nn,extensions:rn}])=>{const[on,sn]=Nt.type.split("/"),an=rn.find(cn=>cn.toLowerCase()===s.toLowerCase()),ln=nn.find(cn=>{const[un,dn]=cn.split("/");return un===on&&(dn===sn||dn==="*")});return!!an||!!ln});if(!Ot)return;const[en]=Ot;return{event:this.composePasteEvent("file",{file:Nt}),type:en}}processHTML(Nt){const{Tools:s}=this.Editor,Ot=c$3.make("DIV");return Ot.innerHTML=Nt,this.getNodes(Ot).map(en=>{let tn,nn=s.defaultTool,rn=!1;switch(en.nodeType){case Node.DOCUMENT_FRAGMENT_NODE:tn=c$3.make("div"),tn.appendChild(en);break;case Node.ELEMENT_NODE:tn=en,rn=!0,this.toolsTags[tn.tagName]&&(nn=this.toolsTags[tn.tagName].tool);break}const{tags:on}=nn.pasteConfig||{tags:[]},sn=on.reduce((cn,un)=>(this.collectTagNames(un).forEach(dn=>{const hn=D$1(un)?un[dn]:null;cn[dn.toLowerCase()]=hn||{}}),cn),{}),an=Object.assign({},sn,nn.baseSanitizeConfig);if(tn.tagName.toLowerCase()==="table"){const cn=V(tn.outerHTML,an);tn=c$3.make("div",void 0,{innerHTML:cn}).firstChild}else tn.innerHTML=V(tn.innerHTML,an);const ln=this.composePasteEvent("tag",{data:tn});return{content:tn,isBlock:rn,tool:nn.name,event:ln}}).filter(en=>{const tn=c$3.isEmpty(en.content),nn=c$3.isSingleTag(en.content);return!tn||nn})}processPlain(Nt){const{defaultBlock:s}=this.config;if(!Nt)return[];const Ot=s;return Nt.split(/\r?\n/).filter(en=>en.trim()).map(en=>{const tn=c$3.make("div");tn.textContent=en;const nn=this.composePasteEvent("tag",{data:tn});return{content:tn,tool:Ot,isBlock:!1,event:nn}})}async processSingleBlock(Nt){const{Caret:s,BlockManager:Ot}=this.Editor,{currentBlock:en}=Ot;if(!en||Nt.tool!==en.name||!c$3.containsOnlyInlineElements(Nt.content.innerHTML)){this.insertBlock(Nt,(en==null?void 0:en.tool.isDefault)&&en.isEmpty);return}s.insertContentAtCaretPosition(Nt.content.innerHTML)}async processInlinePaste(Nt){const{BlockManager:s,Caret:Ot}=this.Editor,{content:en}=Nt;if(s.currentBlock&&s.currentBlock.tool.isDefault&&en.textContent.length<Ct.PATTERN_PROCESSING_MAX_LENGTH){const tn=await this.processPattern(en.textContent);if(tn){const nn=s.currentBlock&&s.currentBlock.tool.isDefault&&s.currentBlock.isEmpty,rn=s.paste(tn.tool,tn.event,nn);Ot.setToBlock(rn,Ot.positions.END);return}}if(s.currentBlock&&s.currentBlock.currentInput){const tn=s.currentBlock.tool.baseSanitizeConfig;document.execCommand("insertHTML",!1,V(en.innerHTML,tn))}else this.insertBlock(Nt)}async processPattern(Nt){const s=this.toolsPatterns.find(Ot=>{const en=Ot.pattern.exec(Nt);return en?Nt===en.shift():!1});return s?{event:this.composePasteEvent("pattern",{key:s.key,data:Nt}),tool:s.tool.name}:void 0}insertBlock(Nt,s=!1){const{BlockManager:Ot,Caret:en}=this.Editor,{currentBlock:tn}=Ot;let nn;if(s&&tn&&tn.isEmpty){nn=Ot.paste(Nt.tool,Nt.event,!0),en.setToBlock(nn,en.positions.END);return}nn=Ot.paste(Nt.tool,Nt.event),en.setToBlock(nn,en.positions.END)}insertEditorJSData(Nt){const{BlockManager:s,Caret:Ot,Tools:en}=this.Editor;bt(Nt,tn=>en.blockTools.get(tn).sanitizeConfig).forEach(({tool:tn,data:nn},rn)=>{let on=!1;rn===0&&(on=s.currentBlock&&s.currentBlock.tool.isDefault&&s.currentBlock.isEmpty);const sn=s.insert({tool:tn,data:nn,replace:on});Ot.setToBlock(sn,Ot.positions.END)})}processElementNode(Nt,s,Ot){const en=Object.keys(this.toolsTags),tn=Nt,{tool:nn}=this.toolsTags[tn.tagName]||{},rn=this.tagsByTool[nn==null?void 0:nn.name]||[],on=en.includes(tn.tagName),sn=c$3.blockElements.includes(tn.tagName.toLowerCase()),an=Array.from(tn.children).some(({tagName:cn})=>en.includes(cn)&&!rn.includes(cn)),ln=Array.from(tn.children).some(({tagName:cn})=>c$3.blockElements.includes(cn.toLowerCase()));if(!sn&&!on&&!an)return Ot.appendChild(tn),[...s,Ot];if(on&&!an||sn&&!ln&&!an)return[...s,Ot,tn]}getNodes(Nt){const s=Array.from(Nt.childNodes);let Ot;const en=(tn,nn)=>{if(c$3.isEmpty(nn)&&!c$3.isSingleTag(nn))return tn;const rn=tn[tn.length-1];let on=new DocumentFragment;switch(rn&&c$3.isFragment(rn)&&(on=tn.pop()),nn.nodeType){case Node.ELEMENT_NODE:if(Ot=this.processElementNode(nn,tn,on),Ot)return Ot;break;case Node.TEXT_NODE:return on.appendChild(nn),[...tn,on];default:return[...tn,on]}return[...tn,...Array.from(nn.childNodes).reduce(en,[])]};return s.reduce(en,[])}composePasteEvent(Nt,s){return new CustomEvent(Nt,{detail:s})}};let Tt=Ct;Tt.PATTERN_PROCESSING_MAX_LENGTH=450;class ai extends y$1{constructor(){super(...arguments),this.toolsDontSupportReadOnly=[],this.readOnlyEnabled=!1}get isEnabled(){return this.readOnlyEnabled}async prepare(){const{Tools:s}=this.Editor,{blockTools:Ot}=s,en=[];Array.from(Ot.entries()).forEach(([tn,nn])=>{nn.isReadOnlySupported||en.push(tn)}),this.toolsDontSupportReadOnly=en,this.config.readOnly&&en.length>0&&this.throwCriticalError(),this.toggle(this.config.readOnly)}async toggle(s=!this.readOnlyEnabled){s&&this.toolsDontSupportReadOnly.length>0&&this.throwCriticalError();const Ot=this.readOnlyEnabled;this.readOnlyEnabled=s;for(const tn in this.Editor)this.Editor[tn].toggleReadOnly&&this.Editor[tn].toggleReadOnly(s);if(Ot===s)return this.readOnlyEnabled;const en=await this.Editor.Saver.save();return await this.Editor.BlockManager.clear(),await this.Editor.Renderer.render(en.blocks),this.readOnlyEnabled}throwCriticalError(){throw new ut(`To enable read-only mode all connected tools should support it. Tools ${this.toolsDontSupportReadOnly.join(", ")} don't support read-only mode.`)}}class fe extends y$1{constructor(){super(...arguments),this.isRectSelectionActivated=!1,this.SCROLL_SPEED=3,this.HEIGHT_OF_SCROLL_ZONE=40,this.BOTTOM_SCROLL_ZONE=1,this.TOP_SCROLL_ZONE=2,this.MAIN_MOUSE_BUTTON=0,this.mousedown=!1,this.isScrolling=!1,this.inScrollZone=null,this.startX=0,this.startY=0,this.mouseX=0,this.mouseY=0,this.stackOfSelected=[],this.listenerIds=[]}static get CSS(){return{overlay:"codex-editor-overlay",overlayContainer:"codex-editor-overlay__container",rect:"codex-editor-overlay__rectangle",topScrollZone:"codex-editor-overlay__scroll-zone--top",bottomScrollZone:"codex-editor-overlay__scroll-zone--bottom"}}prepare(){this.enableModuleBindings()}startSelection(s,Ot){const en=document.elementFromPoint(s-window.pageXOffset,Ot-window.pageYOffset);en.closest(`.${this.Editor.Toolbar.CSS.toolbar}`)||(this.Editor.BlockSelection.allBlocksSelected=!1,this.clearSelection(),this.stackOfSelected=[]);const tn=[`.${R$2.CSS.content}`,`.${this.Editor.Toolbar.CSS.toolbar}`,`.${this.Editor.InlineToolbar.CSS.inlineToolbar}`],nn=en.closest("."+this.Editor.UI.CSS.editorWrapper),rn=tn.some(on=>!!en.closest(on));!nn||rn||(this.mousedown=!0,this.startX=s,this.startY=Ot)}endSelection(){this.mousedown=!1,this.startX=0,this.startY=0,this.overlayRectangle.style.display="none"}isRectActivated(){return this.isRectSelectionActivated}clearSelection(){this.isRectSelectionActivated=!1}enableModuleBindings(){const{container:s}=this.genHTML();this.listeners.on(s,"mousedown",Ot=>{this.processMouseDown(Ot)},!1),this.listeners.on(document.body,"mousemove",Ie(Ot=>{this.processMouseMove(Ot)},10),{passive:!0}),this.listeners.on(document.body,"mouseleave",()=>{this.processMouseLeave()}),this.listeners.on(window,"scroll",Ie(Ot=>{this.processScroll(Ot)},10),{passive:!0}),this.listeners.on(document.body,"mouseup",()=>{this.processMouseUp()},!1)}processMouseDown(s){s.button===this.MAIN_MOUSE_BUTTON&&(s.target.closest(c$3.allInputsSelector)!==null||this.startSelection(s.pageX,s.pageY))}processMouseMove(s){this.changingRectangle(s),this.scrollByZones(s.clientY)}processMouseLeave(){this.clearSelection(),this.endSelection()}processScroll(s){this.changingRectangle(s)}processMouseUp(){this.clearSelection(),this.endSelection()}scrollByZones(s){if(this.inScrollZone=null,s<=this.HEIGHT_OF_SCROLL_ZONE&&(this.inScrollZone=this.TOP_SCROLL_ZONE),document.documentElement.clientHeight-s<=this.HEIGHT_OF_SCROLL_ZONE&&(this.inScrollZone=this.BOTTOM_SCROLL_ZONE),!this.inScrollZone){this.isScrolling=!1;return}this.isScrolling||(this.scrollVertical(this.inScrollZone===this.TOP_SCROLL_ZONE?-this.SCROLL_SPEED:this.SCROLL_SPEED),this.isScrolling=!0)}genHTML(){const{UI:s}=this.Editor,Ot=s.nodes.holder.querySelector("."+s.CSS.editorWrapper),en=c$3.make("div",fe.CSS.overlay,{}),tn=c$3.make("div",fe.CSS.overlayContainer,{}),nn=c$3.make("div",fe.CSS.rect,{});return tn.appendChild(nn),en.appendChild(tn),Ot.appendChild(en),this.overlayRectangle=nn,{container:Ot,overlay:en}}scrollVertical(s){if(!(this.inScrollZone&&this.mousedown))return;const Ot=window.pageYOffset;window.scrollBy(0,s),this.mouseY+=window.pageYOffset-Ot,setTimeout(()=>{this.scrollVertical(s)},0)}changingRectangle(s){if(!this.mousedown)return;s.pageY!==void 0&&(this.mouseX=s.pageX,this.mouseY=s.pageY);const{rightPos:Ot,leftPos:en,index:tn}=this.genInfoForMouseSelection(),nn=this.startX>Ot&&this.mouseX>Ot,rn=this.startX<en&&this.mouseX<en;this.rectCrossesBlocks=!(nn||rn),this.isRectSelectionActivated||(this.rectCrossesBlocks=!1,this.isRectSelectionActivated=!0,this.shrinkRectangleToPoint(),this.overlayRectangle.style.display="block"),this.updateRectangleSize(),this.Editor.Toolbar.close(),tn!==void 0&&(this.trySelectNextBlock(tn),this.inverseSelection(),b$1.get().removeAllRanges())}shrinkRectangleToPoint(){this.overlayRectangle.style.left=`${this.startX-window.pageXOffset}px`,this.overlayRectangle.style.top=`${this.startY-window.pageYOffset}px`,this.overlayRectangle.style.bottom=`calc(100% - ${this.startY-window.pageYOffset}px`,this.overlayRectangle.style.right=`calc(100% - ${this.startX-window.pageXOffset}px`}inverseSelection(){const s=this.Editor.BlockManager.getBlockByIndex(this.stackOfSelected[0]).selected;if(this.rectCrossesBlocks&&!s)for(const Ot of this.stackOfSelected)this.Editor.BlockSelection.selectBlockByIndex(Ot);if(!this.rectCrossesBlocks&&s)for(const Ot of this.stackOfSelected)this.Editor.BlockSelection.unSelectBlockByIndex(Ot)}updateRectangleSize(){this.mouseY>=this.startY?(this.overlayRectangle.style.top=`${this.startY-window.pageYOffset}px`,this.overlayRectangle.style.bottom=`calc(100% - ${this.mouseY-window.pageYOffset}px`):(this.overlayRectangle.style.bottom=`calc(100% - ${this.startY-window.pageYOffset}px`,this.overlayRectangle.style.top=`${this.mouseY-window.pageYOffset}px`),this.mouseX>=this.startX?(this.overlayRectangle.style.left=`${this.startX-window.pageXOffset}px`,this.overlayRectangle.style.right=`calc(100% - ${this.mouseX-window.pageXOffset}px`):(this.overlayRectangle.style.right=`calc(100% - ${this.startX-window.pageXOffset}px`,this.overlayRectangle.style.left=`${this.mouseX-window.pageXOffset}px`)}genInfoForMouseSelection(){const s=document.body.offsetWidth/2,Ot=this.mouseY-window.pageYOffset,en=document.elementFromPoint(s,Ot),tn=this.Editor.BlockManager.getBlockByChildNode(en);let nn;tn!==void 0&&(nn=this.Editor.BlockManager.blocks.findIndex(ln=>ln.holder===tn.holder));const rn=this.Editor.BlockManager.lastBlock.holder.querySelector("."+R$2.CSS.content),on=Number.parseInt(window.getComputedStyle(rn).width,10)/2,sn=s-on,an=s+on;return{index:nn,leftPos:sn,rightPos:an}}addBlockInSelection(s){this.rectCrossesBlocks&&this.Editor.BlockSelection.selectBlockByIndex(s),this.stackOfSelected.push(s)}trySelectNextBlock(s){const Ot=this.stackOfSelected[this.stackOfSelected.length-1]===s,en=this.stackOfSelected.length,tn=1,nn=-1,rn=0;if(Ot)return;const on=this.stackOfSelected[en-1]-this.stackOfSelected[en-2]>0;let sn=rn;en>1&&(sn=on?tn:nn);const an=s>this.stackOfSelected[en-1]&&sn===tn,ln=s<this.stackOfSelected[en-1]&&sn===nn,cn=!(an||ln||sn===rn);if(!cn&&(s>this.stackOfSelected[en-1]||this.stackOfSelected[en-1]===void 0)){let hn=this.stackOfSelected[en-1]+1||s;for(hn;hn<=s;hn++)this.addBlockInSelection(hn);return}if(!cn&&s<this.stackOfSelected[en-1]){for(let hn=this.stackOfSelected[en-1]-1;hn>=s;hn--)this.addBlockInSelection(hn);return}if(!cn)return;let un=en-1,dn;for(s>this.stackOfSelected[en-1]?dn=()=>s>this.stackOfSelected[un]:dn=()=>s<this.stackOfSelected[un];dn();)this.rectCrossesBlocks&&this.Editor.BlockSelection.unSelectBlockByIndex(this.stackOfSelected[un]),this.stackOfSelected.pop(),un--}}class li extends y$1{async render(s){return new Promise(Ot=>{const{Tools:en,BlockManager:tn}=this.Editor;if(s.length===0)tn.insert();else{const nn=s.map(({type:rn,data:on,tunes:sn,id:an})=>{en.available.has(rn)===!1&&(Y(`Tool ${rn} is not found. Check 'tools' property at the Editor.js config.`,"warn"),on=this.composeStubDataForTool(rn,on,an),rn=en.stubTool);let ln;try{ln=tn.composeBlock({id:an,tool:rn,data:on,tunes:sn})}catch(cn){T$1(`Block ${rn} skipped because of plugins error`,"error",{data:on,error:cn}),on=this.composeStubDataForTool(rn,on,an),rn=en.stubTool,ln=tn.composeBlock({id:an,tool:rn,data:on,tunes:sn})}return ln});tn.insertMany(nn)}window.requestIdleCallback(()=>{Ot()},{timeout:2e3})})}composeStubDataForTool(s,Ot,en){const{Tools:tn}=this.Editor;let nn=s;if(tn.unavailable.has(s)){const rn=tn.unavailable.get(s).toolbox;rn!==void 0&&rn[0].title!==void 0&&(nn=rn[0].title)}return{savedData:{id:en,type:s,data:Ot},title:nn}}}class ci extends y$1{async save(){const{BlockManager:s,Tools:Ot}=this.Editor,en=s.blocks,tn=[];try{en.forEach(on=>{tn.push(this.getSavedData(on))});const nn=await Promise.all(tn),rn=await bt(nn,on=>Ot.blockTools.get(on).sanitizeConfig);return this.makeOutput(rn)}catch(nn){Y("Saving failed due to the Error %o","error",nn)}}async getSavedData(s){const Ot=await s.save(),en=Ot&&await s.validate(Ot.data);return{...Ot,isValid:en}}makeOutput(s){const Ot=[];return s.forEach(({id:en,tool:tn,data:nn,tunes:rn,isValid:on})=>{if(!on){T$1(`Block ${tn} skipped because saved data is invalid`);return}if(tn===this.Editor.Tools.stubTool){Ot.push(nn);return}const sn={id:en,type:tn,data:nn,...!W(rn)&&{tunes:rn}};Ot.push(sn)}),{time:+new Date,blocks:Ot,version:"2.29.0"}}}(function(){try{if(typeof document<"u"){var Nt=document.createElement("style");Nt.appendChild(document.createTextNode(".ce-paragraph{line-height:1.6em;outline:none}.ce-paragraph[data-placeholder]:empty:before{content:attr(data-placeholder);color:#707684;font-weight:400;opacity:0}.codex-editor--empty .ce-block:first-child .ce-paragraph[data-placeholder]:empty:before{opacity:1}.codex-editor--toolbox-opened .ce-block:first-child .ce-paragraph[data-placeholder]:empty:before,.codex-editor--empty .ce-block:first-child .ce-paragraph[data-placeholder]:empty:focus:before{opacity:0}.ce-paragraph p:first-of-type{margin-top:0}.ce-paragraph p:last-of-type{margin-bottom:0}")),document.head.appendChild(Nt)}}catch(s){console.error("vite-plugin-css-injected-by-js",s)}})();const di='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M8 9V7.2C8 7.08954 8.08954 7 8.2 7L12 7M16 9V7.2C16 7.08954 15.9105 7 15.8 7L12 7M12 7L12 17M12 17H10M12 17H14"/></svg>';/**
 * Base Paragraph Block for the Editor.js.
 * Represents a regular text block
 *
 * @author CodeX (team@codex.so)
 * @copyright CodeX 2018
 * @license The MIT License (MIT)
 */class Ke{static get DEFAULT_PLACEHOLDER(){return""}constructor({data:s,config:Ot,api:en,readOnly:tn}){this.api=en,this.readOnly=tn,this._CSS={block:this.api.styles.block,wrapper:"ce-paragraph"},this.readOnly||(this.onKeyUp=this.onKeyUp.bind(this)),this._placeholder=Ot.placeholder?Ot.placeholder:Ke.DEFAULT_PLACEHOLDER,this._data={},this._element=null,this._preserveBlank=Ot.preserveBlank!==void 0?Ot.preserveBlank:!1,this.data=s}onKeyUp(s){if(s.code!=="Backspace"&&s.code!=="Delete")return;const{textContent:Ot}=this._element;Ot===""&&(this._element.innerHTML="")}drawView(){const s=document.createElement("DIV");return s.classList.add(this._CSS.wrapper,this._CSS.block),s.contentEditable=!1,s.dataset.placeholder=this.api.i18n.t(this._placeholder),this._data.text&&(s.innerHTML=this._data.text),this.readOnly||(s.contentEditable=!0,s.addEventListener("keyup",this.onKeyUp)),s}render(){return this._element=this.drawView(),this._element}merge(s){const Ot={text:this.data.text+s.text};this.data=Ot}validate(s){return!(s.text.trim()===""&&!this._preserveBlank)}save(s){return{text:s.innerHTML}}onPaste(s){const Ot={text:s.detail.data.innerHTML};this.data=Ot}static get conversionConfig(){return{export:"text",import:"text"}}static get sanitize(){return{text:{br:!0}}}static get isReadOnlySupported(){return!0}get data(){if(this._element!==null){const s=this._element.innerHTML;this._data.text=s}return this._data}set data(s){this._data=s||{},this._element!==null&&this.hydrate()}hydrate(){window.requestAnimationFrame(()=>{this._element.innerHTML=this._data.text||""})}static get pasteConfig(){return{tags:["P"]}}static get toolbox(){return{icon:di,title:"Text"}}}class Xe{constructor(){this.commandName="bold",this.CSS={button:"ce-inline-tool",buttonActive:"ce-inline-tool--active",buttonModifier:"ce-inline-tool--bold"},this.nodes={button:void 0}}static get sanitize(){return{b:{}}}render(){return this.nodes.button=document.createElement("button"),this.nodes.button.type="button",this.nodes.button.classList.add(this.CSS.button,this.CSS.buttonModifier),this.nodes.button.innerHTML=_o,this.nodes.button}surround(){document.execCommand(this.commandName)}checkState(){const s=document.queryCommandState(this.commandName);return this.nodes.button.classList.toggle(this.CSS.buttonActive,s),s}get shortcut(){return"CMD+B"}}Xe.isInline=!0;Xe.title="Bold";class Ve{constructor(){this.commandName="italic",this.CSS={button:"ce-inline-tool",buttonActive:"ce-inline-tool--active",buttonModifier:"ce-inline-tool--italic"},this.nodes={button:null}}static get sanitize(){return{i:{}}}render(){return this.nodes.button=document.createElement("button"),this.nodes.button.type="button",this.nodes.button.classList.add(this.CSS.button,this.CSS.buttonModifier),this.nodes.button.innerHTML=Do,this.nodes.button}surround(){document.execCommand(this.commandName)}checkState(){const s=document.queryCommandState(this.commandName);return this.nodes.button.classList.toggle(this.CSS.buttonActive,s),s}get shortcut(){return"CMD+I"}}Ve.isInline=!0;Ve.title="Italic";class qe{constructor({api:s}){this.commandLink="createLink",this.commandUnlink="unlink",this.ENTER_KEY=13,this.CSS={button:"ce-inline-tool",buttonActive:"ce-inline-tool--active",buttonModifier:"ce-inline-tool--link",buttonUnlink:"ce-inline-tool--unlink",input:"ce-inline-tool-input",inputShowed:"ce-inline-tool-input--showed"},this.nodes={button:null,input:null},this.inputOpened=!1,this.toolbar=s.toolbar,this.inlineToolbar=s.inlineToolbar,this.notifier=s.notifier,this.i18n=s.i18n,this.selection=new b$1}static get sanitize(){return{a:{href:!0,target:"_blank",rel:"nofollow"}}}render(){return this.nodes.button=document.createElement("button"),this.nodes.button.type="button",this.nodes.button.classList.add(this.CSS.button,this.CSS.buttonModifier),this.nodes.button.innerHTML=it,this.nodes.button}renderActions(){return this.nodes.input=document.createElement("input"),this.nodes.input.placeholder=this.i18n.t("Add a link"),this.nodes.input.classList.add(this.CSS.input),this.nodes.input.addEventListener("keydown",s=>{s.keyCode===this.ENTER_KEY&&this.enterPressed(s)}),this.nodes.input}surround(s){if(s){this.inputOpened?(this.selection.restore(),this.selection.removeFakeBackground()):(this.selection.setFakeBackground(),this.selection.save());const Ot=this.selection.findParentTag("A");if(Ot){this.selection.expandToTag(Ot),this.unlink(),this.closeActions(),this.checkState(),this.toolbar.close();return}}this.toggleActions()}checkState(){const s=this.selection.findParentTag("A");if(s){this.nodes.button.innerHTML=zo,this.nodes.button.classList.add(this.CSS.buttonUnlink),this.nodes.button.classList.add(this.CSS.buttonActive),this.openActions();const Ot=s.getAttribute("href");this.nodes.input.value=Ot!=="null"?Ot:"",this.selection.save()}else this.nodes.button.innerHTML=it,this.nodes.button.classList.remove(this.CSS.buttonUnlink),this.nodes.button.classList.remove(this.CSS.buttonActive);return!!s}clear(){this.closeActions()}get shortcut(){return"CMD+K"}toggleActions(){this.inputOpened?this.closeActions(!1):this.openActions(!0)}openActions(s=!1){this.nodes.input.classList.add(this.CSS.inputShowed),s&&this.nodes.input.focus(),this.inputOpened=!0}closeActions(s=!0){if(this.selection.isFakeBackgroundEnabled){const Ot=new b$1;Ot.save(),this.selection.restore(),this.selection.removeFakeBackground(),Ot.restore()}this.nodes.input.classList.remove(this.CSS.inputShowed),this.nodes.input.value="",s&&this.selection.clearSaved(),this.inputOpened=!1}enterPressed(s){let Ot=this.nodes.input.value||"";if(!Ot.trim()){this.selection.restore(),this.unlink(),s.preventDefault(),this.closeActions();return}if(!this.validateURL(Ot)){this.notifier.show({message:"Pasted link is not valid.",style:"error"}),T$1("Incorrect Link pasted","warn",Ot);return}Ot=this.prepareLink(Ot),this.selection.restore(),this.selection.removeFakeBackground(),this.insertLink(Ot),s.preventDefault(),s.stopPropagation(),s.stopImmediatePropagation(),this.selection.collapseToEnd(),this.inlineToolbar.close()}validateURL(s){return!/\s/.test(s)}prepareLink(s){return s=s.trim(),s=this.addProtocol(s),s}addProtocol(s){if(/^(\w+):(\/\/)?/.test(s))return s;const Ot=/^\/[^/\s]/.test(s),en=s.substring(0,1)==="#",tn=/^\/\/[^/\s]/.test(s);return!Ot&&!en&&!tn&&(s="http://"+s),s}insertLink(s){const Ot=this.selection.findParentTag("A");Ot&&this.selection.expandToTag(Ot),document.execCommand(this.commandLink,!1,s)}unlink(){document.execCommand(this.commandUnlink)}}qe.isInline=!0;qe.title="Link";class St{constructor({data:s,api:Ot}){this.CSS={wrapper:"ce-stub",info:"ce-stub__info",title:"ce-stub__title",subtitle:"ce-stub__subtitle"},this.api=Ot,this.title=s.title||this.api.i18n.t("Error"),this.subtitle=this.api.i18n.t("The block can not be displayed correctly."),this.savedData=s.savedData,this.wrapper=this.make()}render(){return this.wrapper}save(){return this.savedData}make(){const s=c$3.make("div",this.CSS.wrapper),Ot=Uo,en=c$3.make("div",this.CSS.info),tn=c$3.make("div",this.CSS.title,{textContent:this.title}),nn=c$3.make("div",this.CSS.subtitle,{textContent:this.subtitle});return s.innerHTML=Ot,en.appendChild(tn),en.appendChild(nn),s.appendChild(en),s}}St.isReadOnlySupported=!0;class hi extends Ye{constructor(){super(...arguments),this.type=Be.Inline}get title(){return this.constructable[We.Title]}create(){return new this.constructable({api:this.api.getMethodsForTool(this),config:this.settings})}}class ui extends Ye{constructor(){super(...arguments),this.type=Be.Tune}create(s,Ot){return new this.constructable({api:this.api.getMethodsForTool(this),config:this.settings,block:Ot,data:s})}}let P$1=class Er extends Map{get blockTools(){const s=Array.from(this.entries()).filter(([,Ot])=>Ot.isBlock());return new Er(s)}get inlineTools(){const s=Array.from(this.entries()).filter(([,Ot])=>Ot.isInline());return new Er(s)}get blockTunes(){const s=Array.from(this.entries()).filter(([,Ot])=>Ot.isTune());return new Er(s)}get internalTools(){const s=Array.from(this.entries()).filter(([,Ot])=>Ot.isInternal);return new Er(s)}get externalTools(){const s=Array.from(this.entries()).filter(([,Ot])=>!Ot.isInternal);return new Er(s)}};var pi=Object.defineProperty,fi=Object.getOwnPropertyDescriptor,It=(Nt,s,Ot,en)=>{for(var tn=en>1?void 0:en?fi(s,Ot):s,nn=Nt.length-1,rn;nn>=0;nn--)(rn=Nt[nn])&&(tn=(en?rn(s,Ot,tn):rn(tn))||tn);return en&&tn&&pi(s,Ot,tn),tn};class Ze extends Ye{constructor(){super(...arguments),this.type=Be.Block,this.inlineTools=new P$1,this.tunes=new P$1}create(s,Ot,en){return new this.constructable({data:s,block:Ot,readOnly:en,api:this.api.getMethodsForTool(this),config:this.settings})}get isReadOnlySupported(){return this.constructable[se.IsReadOnlySupported]===!0}get isLineBreaksEnabled(){return this.constructable[se.IsEnabledLineBreaks]}get toolbox(){const s=this.constructable[se.Toolbox],Ot=this.config[ve.Toolbox];if(!W(s)&&Ot!==!1)return Ot?Array.isArray(s)?Array.isArray(Ot)?Ot.map((en,tn)=>{const nn=s[tn];return nn?{...nn,...en}:en}):[Ot]:Array.isArray(Ot)?Ot:[{...s,...Ot}]:Array.isArray(s)?s:[s]}get conversionConfig(){return this.constructable[se.ConversionConfig]}get enabledInlineTools(){return this.config[ve.EnabledInlineTools]||!1}get enabledBlockTunes(){return this.config[ve.EnabledBlockTunes]}get pasteConfig(){return this.constructable[se.PasteConfig]??{}}get sanitizeConfig(){const s=super.sanitizeConfig,Ot=this.baseSanitizeConfig;if(W(s))return Ot;const en={};for(const tn in s)if(Object.prototype.hasOwnProperty.call(s,tn)){const nn=s[tn];D$1(nn)?en[tn]=Object.assign({},Ot,nn):en[tn]=nn}return en}get baseSanitizeConfig(){const s={};return Array.from(this.inlineTools.values()).forEach(Ot=>Object.assign(s,Ot.sanitizeConfig)),Array.from(this.tunes.values()).forEach(Ot=>Object.assign(s,Ot.sanitizeConfig)),s}}It([le],Ze.prototype,"sanitizeConfig",1);It([le],Ze.prototype,"baseSanitizeConfig",1);class gi{constructor(s,Ot,en){this.api=en,this.config=s,this.editorConfig=Ot}get(s){const{class:Ot,isInternal:en=!1,...tn}=this.config[s],nn=this.getConstructor(Ot);return new nn({name:s,constructable:Ot,config:tn,api:this.api,isDefault:s===this.editorConfig.defaultBlock,defaultPlaceholder:this.editorConfig.placeholder,isInternal:en})}getConstructor(s){switch(!0){case s[We.IsInline]:return hi;case s[Bt.IsTune]:return ui;default:return Ze}}}class Mt{constructor({api:s}){this.CSS={animation:"wobble"},this.api=s}render(){return{icon:kt,title:this.api.i18n.t("Move down"),onActivate:()=>this.handleClick(),name:"move-down"}}handleClick(){const s=this.api.blocks.getCurrentBlockIndex(),Ot=this.api.blocks.getBlockByIndex(s+1);if(!Ot)throw new Error("Unable to move Block down since it is already the last");const en=Ot.holder,tn=en.getBoundingClientRect();let nn=Math.abs(window.innerHeight-en.offsetHeight);tn.top<window.innerHeight&&(nn=window.scrollY+en.offsetHeight),window.scrollTo(0,nn),this.api.blocks.move(s+1),this.api.toolbar.toggleBlockSettings(!0)}}Mt.isTune=!0;class Lt{constructor({api:s}){this.api=s}render(){return{icon:No,title:this.api.i18n.t("Delete"),name:"delete",confirmation:{title:this.api.i18n.t("Click to delete"),onActivate:()=>this.handleClick()}}}handleClick(){this.api.blocks.delete()}}Lt.isTune=!0;class At{constructor({api:s}){this.CSS={animation:"wobble"},this.api=s}render(){return{icon:Oo,title:this.api.i18n.t("Move up"),onActivate:()=>this.handleClick(),name:"move-up"}}handleClick(){const s=this.api.blocks.getCurrentBlockIndex(),Ot=this.api.blocks.getBlockByIndex(s),en=this.api.blocks.getBlockByIndex(s-1);if(s===0||!Ot||!en)throw new Error("Unable to move Block up since it is already the first");const tn=Ot.holder,nn=en.holder,rn=tn.getBoundingClientRect(),on=nn.getBoundingClientRect();let sn;on.top>0?sn=Math.abs(rn.top)-Math.abs(on.top):sn=Math.abs(rn.top)+on.height,window.scrollBy(0,-1*sn),this.api.blocks.move(s-1),this.api.toolbar.toggleBlockSettings(!0)}}At.isTune=!0;var bi=Object.defineProperty,mi=Object.getOwnPropertyDescriptor,ki=(Nt,s,Ot,en)=>{for(var tn=en>1?void 0:en?mi(s,Ot):s,nn=Nt.length-1,rn;nn>=0;nn--)(rn=Nt[nn])&&(tn=(en?rn(s,Ot,tn):rn(tn))||tn);return en&&tn&&bi(s,Ot,tn),tn};class _t extends y$1{constructor(){super(...arguments),this.stubTool="stub",this.toolsAvailable=new P$1,this.toolsUnavailable=new P$1}get available(){return this.toolsAvailable}get unavailable(){return this.toolsUnavailable}get inlineTools(){return this.available.inlineTools}get blockTools(){return this.available.blockTools}get blockTunes(){return this.available.blockTunes}get defaultTool(){return this.blockTools.get(this.config.defaultBlock)}get internal(){return this.available.internalTools}async prepare(){if(this.validateTools(),this.config.tools=Me({},this.internalTools,this.config.tools),!Object.prototype.hasOwnProperty.call(this.config,"tools")||Object.keys(this.config.tools).length===0)throw Error("Can't start without tools");const s=this.prepareConfig();this.factory=new gi(s,this.config,this.Editor.API);const Ot=this.getListOfPrepareFunctions(s);if(Ot.length===0)return Promise.resolve();await zt(Ot,en=>{this.toolPrepareMethodSuccess(en)},en=>{this.toolPrepareMethodFallback(en)}),this.prepareBlockTools()}getAllInlineToolsSanitizeConfig(){const s={};return Array.from(this.inlineTools.values()).forEach(Ot=>{Object.assign(s,Ot.sanitizeConfig)}),s}destroy(){Object.values(this.available).forEach(async s=>{M$2(s.reset)&&await s.reset()})}get internalTools(){return{bold:{class:Xe,isInternal:!0},italic:{class:Ve,isInternal:!0},link:{class:qe,isInternal:!0},paragraph:{class:Ke,inlineToolbar:!0,isInternal:!0},stub:{class:St,isInternal:!0},moveUp:{class:At,isInternal:!0},delete:{class:Lt,isInternal:!0},moveDown:{class:Mt,isInternal:!0}}}toolPrepareMethodSuccess(s){const Ot=this.factory.get(s.toolName);if(Ot.isInline()){const en=["render","surround","checkState"].filter(tn=>!Ot.create()[tn]);if(en.length){T$1(`Incorrect Inline Tool: ${Ot.name}. Some of required methods is not implemented %o`,"warn",en),this.toolsUnavailable.set(Ot.name,Ot);return}}this.toolsAvailable.set(Ot.name,Ot)}toolPrepareMethodFallback(s){this.toolsUnavailable.set(s.toolName,this.factory.get(s.toolName))}getListOfPrepareFunctions(s){const Ot=[];return Object.entries(s).forEach(([en,tn])=>{Ot.push({function:M$2(tn.class.prepare)?tn.class.prepare:()=>{},data:{toolName:en,config:tn.config}})}),Ot}prepareBlockTools(){Array.from(this.blockTools.values()).forEach(s=>{this.assignInlineToolsToBlockTool(s),this.assignBlockTunesToBlockTool(s)})}assignInlineToolsToBlockTool(s){if(this.config.inlineToolbar!==!1){if(s.enabledInlineTools===!0){s.inlineTools=new P$1(Array.isArray(this.config.inlineToolbar)?this.config.inlineToolbar.map(Ot=>[Ot,this.inlineTools.get(Ot)]):Array.from(this.inlineTools.entries()));return}Array.isArray(s.enabledInlineTools)&&(s.inlineTools=new P$1(s.enabledInlineTools.map(Ot=>[Ot,this.inlineTools.get(Ot)])))}}assignBlockTunesToBlockTool(s){if(s.enabledBlockTunes!==!1){if(Array.isArray(s.enabledBlockTunes)){const Ot=new P$1(s.enabledBlockTunes.map(en=>[en,this.blockTunes.get(en)]));s.tunes=new P$1([...Ot,...this.blockTunes.internalTools]);return}if(Array.isArray(this.config.tunes)){const Ot=new P$1(this.config.tunes.map(en=>[en,this.blockTunes.get(en)]));s.tunes=new P$1([...Ot,...this.blockTunes.internalTools]);return}s.tunes=this.blockTunes.internalTools}}validateTools(){for(const s in this.config.tools)if(Object.prototype.hasOwnProperty.call(this.config.tools,s)){if(s in this.internalTools)return;const Ot=this.config.tools[s];if(!M$2(Ot)&&!M$2(Ot.class))throw Error(`Tool ${s} must be a constructor function or an object with function in the class property`)}}prepareConfig(){const s={};for(const Ot in this.config.tools)D$1(this.config.tools[Ot])?s[Ot]=this.config.tools[Ot]:s[Ot]={class:this.config.tools[Ot]};return s}}ki([le],_t.prototype,"getAllInlineToolsSanitizeConfig",1);const vi=`:root{--selectionColor: #e1f2ff;--inlineSelectionColor: #d4ecff;--bg-light: #eff2f5;--grayText: #707684;--color-dark: #1D202B;--color-active-icon: #388AE5;--color-gray-border: rgba(201, 201, 204, .48);--content-width: 650px;--narrow-mode-right-padding: 50px;--toolbox-buttons-size: 26px;--toolbox-buttons-size--mobile: 36px;--icon-size: 20px;--icon-size--mobile: 28px;--block-padding-vertical: .4em;--color-line-gray: #EFF0F1 }.codex-editor{position:relative;-webkit-box-sizing:border-box;box-sizing:border-box;z-index:1}.codex-editor .hide{display:none}.codex-editor__redactor [contenteditable]:empty:after{content:"\\feff"}@media (min-width: 651px){.codex-editor--narrow .codex-editor__redactor{margin-right:50px}}@media (min-width: 651px){.codex-editor--narrow.codex-editor--rtl .codex-editor__redactor{margin-left:50px;margin-right:0}}@media (min-width: 651px){.codex-editor--narrow .ce-toolbar__actions{right:-5px}}.codex-editor-copyable{position:absolute;height:1px;width:1px;top:-400%;opacity:.001}.codex-editor-overlay{position:fixed;top:0px;left:0px;right:0px;bottom:0px;z-index:999;pointer-events:none;overflow:hidden}.codex-editor-overlay__container{position:relative;pointer-events:auto;z-index:0}.codex-editor-overlay__rectangle{position:absolute;pointer-events:none;background-color:#2eaadc33;border:1px solid transparent}.codex-editor svg{max-height:100%}.codex-editor path{stroke:currentColor}.codex-editor ::-moz-selection{background-color:#d4ecff}.codex-editor ::selection{background-color:#d4ecff}.codex-editor--toolbox-opened [contentEditable=true][data-placeholder]:focus:before{opacity:0!important}.ce-scroll-locked{overflow:hidden}.ce-scroll-locked--hard{overflow:hidden;top:calc(-1 * var(--window-scroll-offset));position:fixed;width:100%}.ce-toolbar{position:absolute;left:0;right:0;top:0;-webkit-transition:opacity .1s ease;transition:opacity .1s ease;will-change:opacity,top;display:none}.ce-toolbar--opened{display:block}.ce-toolbar__content{max-width:650px;margin:0 auto;position:relative}.ce-toolbar__plus{color:#1d202b;cursor:pointer;width:26px;height:26px;border-radius:7px;display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-ms-flex-negative:0;flex-shrink:0}@media (max-width: 650px){.ce-toolbar__plus{width:36px;height:36px}}@media (hover: hover){.ce-toolbar__plus:hover{background-color:#eff2f5}}.ce-toolbar__plus--active{background-color:#eff2f5;-webkit-animation:bounceIn .75s 1;animation:bounceIn .75s 1;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}.ce-toolbar__plus-shortcut{opacity:.6;word-spacing:-2px;margin-top:5px}@media (max-width: 650px){.ce-toolbar__plus{position:absolute;background-color:#fff;border:1px solid #E8E8EB;-webkit-box-shadow:0 3px 15px -3px rgba(13,20,33,.13);box-shadow:0 3px 15px -3px #0d142121;border-radius:6px;z-index:2;position:static}.ce-toolbar__plus--left-oriented:before{left:15px;margin-left:0}.ce-toolbar__plus--right-oriented:before{left:auto;right:15px;margin-left:0}}.ce-toolbar__actions{position:absolute;right:100%;opacity:0;display:-webkit-box;display:-ms-flexbox;display:flex;padding-right:5px}.ce-toolbar__actions--opened{opacity:1}@media (max-width: 650px){.ce-toolbar__actions{right:auto}}.ce-toolbar__settings-btn{color:#1d202b;width:26px;height:26px;border-radius:7px;display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;margin-left:3px;cursor:pointer;user-select:none}@media (max-width: 650px){.ce-toolbar__settings-btn{width:36px;height:36px}}@media (hover: hover){.ce-toolbar__settings-btn:hover{background-color:#eff2f5}}.ce-toolbar__settings-btn--active{background-color:#eff2f5;-webkit-animation:bounceIn .75s 1;animation:bounceIn .75s 1;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}@media (min-width: 651px){.ce-toolbar__settings-btn{width:24px}}.ce-toolbar__settings-btn--hidden{display:none}@media (max-width: 650px){.ce-toolbar__settings-btn{position:absolute;background-color:#fff;border:1px solid #E8E8EB;-webkit-box-shadow:0 3px 15px -3px rgba(13,20,33,.13);box-shadow:0 3px 15px -3px #0d142121;border-radius:6px;z-index:2;position:static}.ce-toolbar__settings-btn--left-oriented:before{left:15px;margin-left:0}.ce-toolbar__settings-btn--right-oriented:before{left:auto;right:15px;margin-left:0}}.ce-toolbar__plus svg,.ce-toolbar__settings-btn svg{width:24px;height:24px}@media (min-width: 651px){.codex-editor--narrow .ce-toolbar__plus{left:5px}}@media (min-width: 651px){.codex-editor--narrow .ce-toolbox .ce-popover{right:0;left:auto;left:initial}}.ce-inline-toolbar{--y-offset: 8px;position:absolute;background-color:#fff;border:1px solid #E8E8EB;-webkit-box-shadow:0 3px 15px -3px rgba(13,20,33,.13);box-shadow:0 3px 15px -3px #0d142121;border-radius:6px;z-index:2;opacity:0;visibility:hidden;-webkit-transition:opacity .25s ease;transition:opacity .25s ease;will-change:opacity,left,top;top:0;left:0;z-index:3}.ce-inline-toolbar--left-oriented:before{left:15px;margin-left:0}.ce-inline-toolbar--right-oriented:before{left:auto;right:15px;margin-left:0}.ce-inline-toolbar--showed{opacity:1;visibility:visible}.ce-inline-toolbar [hidden]{display:none!important}.ce-inline-toolbar__toggler-and-button-wrapper{display:-webkit-box;display:-ms-flexbox;display:flex;width:100%;padding:0 6px}.ce-inline-toolbar__buttons{display:-webkit-box;display:-ms-flexbox;display:flex}.ce-inline-toolbar__dropdown{display:-webkit-box;display:-ms-flexbox;display:flex;padding:6px;margin:0 6px 0 -6px;-webkit-box-align:center;-ms-flex-align:center;align-items:center;cursor:pointer;border-right:1px solid rgba(201,201,204,.48);-webkit-box-sizing:border-box;box-sizing:border-box}@media (hover: hover){.ce-inline-toolbar__dropdown:hover{background:#eff2f5}}.ce-inline-toolbar__dropdown--hidden{display:none}.ce-inline-toolbar__dropdown-content,.ce-inline-toolbar__dropdown-arrow{display:-webkit-box;display:-ms-flexbox;display:flex}.ce-inline-toolbar__dropdown-content svg,.ce-inline-toolbar__dropdown-arrow svg{width:20px;height:20px}.ce-inline-toolbar__shortcut{opacity:.6;word-spacing:-3px;margin-top:3px}.ce-inline-tool{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;padding:6px 1px;cursor:pointer;border:0;outline:none;background-color:transparent;vertical-align:bottom;color:inherit;margin:0;border-radius:0;line-height:normal}.ce-inline-tool svg{width:20px;height:20px}@media (max-width: 650px){.ce-inline-tool svg{width:28px;height:28px}}@media (hover: hover){.ce-inline-tool:hover{background-color:#eff2f5}}.ce-inline-tool--active{color:#388ae5}.ce-inline-tool--focused{background:rgba(34,186,255,.08)!important}.ce-inline-tool--focused{-webkit-box-shadow:inset 0 0 0px 1px rgba(7,161,227,.08);box-shadow:inset 0 0 0 1px #07a1e314}.ce-inline-tool--focused-animated{-webkit-animation-name:buttonClicked;animation-name:buttonClicked;-webkit-animation-duration:.25s;animation-duration:.25s}.ce-inline-tool--link .icon--unlink,.ce-inline-tool--unlink .icon--link{display:none}.ce-inline-tool--unlink .icon--unlink{display:inline-block;margin-bottom:-1px}.ce-inline-tool-input{outline:none;border:0;border-radius:0 0 4px 4px;margin:0;font-size:13px;padding:10px;width:100%;-webkit-box-sizing:border-box;box-sizing:border-box;display:none;font-weight:500;border-top:1px solid rgba(201,201,204,.48);-webkit-appearance:none;font-family:inherit}@media (max-width: 650px){.ce-inline-tool-input{font-size:15px;font-weight:500}}.ce-inline-tool-input::-webkit-input-placeholder{color:#707684}.ce-inline-tool-input::-moz-placeholder{color:#707684}.ce-inline-tool-input:-ms-input-placeholder{color:#707684}.ce-inline-tool-input::-ms-input-placeholder{color:#707684}.ce-inline-tool-input::placeholder{color:#707684}.ce-inline-tool-input--showed{display:block}.ce-conversion-toolbar{position:absolute;background-color:#fff;border:1px solid #E8E8EB;-webkit-box-shadow:0 3px 15px -3px rgba(13,20,33,.13);box-shadow:0 3px 15px -3px #0d142121;border-radius:6px;z-index:2;opacity:0;visibility:hidden;will-change:transform,opacity;-webkit-transition:opacity .1s ease,-webkit-transform .1s ease;transition:opacity .1s ease,-webkit-transform .1s ease;transition:transform .1s ease,opacity .1s ease;transition:transform .1s ease,opacity .1s ease,-webkit-transform .1s ease;-webkit-transform:translateY(-8px);transform:translateY(-8px);left:-1px;width:190px;margin-top:5px;-webkit-box-sizing:content-box;box-sizing:content-box}.ce-conversion-toolbar--left-oriented:before{left:15px;margin-left:0}.ce-conversion-toolbar--right-oriented:before{left:auto;right:15px;margin-left:0}.ce-conversion-toolbar--showed{opacity:1;visibility:visible;-webkit-transform:none;transform:none}.ce-conversion-toolbar [hidden]{display:none!important}.ce-conversion-toolbar__buttons{display:-webkit-box;display:-ms-flexbox;display:flex}.ce-conversion-toolbar__label{color:#707684;font-size:11px;font-weight:500;letter-spacing:.33px;padding:10px 10px 5px;text-transform:uppercase}.ce-conversion-tool{display:-webkit-box;display:-ms-flexbox;display:flex;padding:5px 10px;font-size:14px;line-height:20px;font-weight:500;cursor:pointer;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.ce-conversion-tool--hidden{display:none}.ce-conversion-tool--focused{background:rgba(34,186,255,.08)!important}.ce-conversion-tool--focused{-webkit-box-shadow:inset 0 0 0px 1px rgba(7,161,227,.08);box-shadow:inset 0 0 0 1px #07a1e314}.ce-conversion-tool--focused-animated{-webkit-animation-name:buttonClicked;animation-name:buttonClicked;-webkit-animation-duration:.25s;animation-duration:.25s}.ce-conversion-tool:hover{background:#eff2f5}.ce-conversion-tool__icon{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;width:26px;height:26px;-webkit-box-shadow:0 0 0 1px rgba(201,201,204,.48);box-shadow:0 0 0 1px #c9c9cc7a;border-radius:5px;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;background:#fff;-webkit-box-sizing:content-box;box-sizing:content-box;-ms-flex-negative:0;flex-shrink:0;margin-right:10px}.ce-conversion-tool__icon svg{width:20px;height:20px}@media (max-width: 650px){.ce-conversion-tool__icon{width:36px;height:36px;border-radius:8px}.ce-conversion-tool__icon svg{width:28px;height:28px}}.ce-conversion-tool--last{margin-right:0!important}.ce-conversion-tool--active{color:#388ae5!important}.ce-conversion-tool--active{-webkit-animation:bounceIn .75s 1;animation:bounceIn .75s 1;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}.ce-conversion-tool__secondary-label{color:#707684;font-size:12px;margin-left:auto;white-space:nowrap;letter-spacing:-.1em;padding-right:5px;margin-bottom:-2px;opacity:.6}@media (max-width: 650px){.ce-conversion-tool__secondary-label{display:none}}.ce-settings__button{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;padding:6px 1px;border-radius:3px;cursor:pointer;border:0;outline:none;background-color:transparent;vertical-align:bottom;color:inherit;margin:0;line-height:32px}.ce-settings__button svg{width:20px;height:20px}@media (max-width: 650px){.ce-settings__button svg{width:28px;height:28px}}@media (hover: hover){.ce-settings__button:hover{background-color:#eff2f5}}.ce-settings__button--active{color:#388ae5}.ce-settings__button--focused{background:rgba(34,186,255,.08)!important}.ce-settings__button--focused{-webkit-box-shadow:inset 0 0 0px 1px rgba(7,161,227,.08);box-shadow:inset 0 0 0 1px #07a1e314}.ce-settings__button--focused-animated{-webkit-animation-name:buttonClicked;animation-name:buttonClicked;-webkit-animation-duration:.25s;animation-duration:.25s}.ce-settings__button:not(:nth-child(3n+3)){margin-right:3px}.ce-settings__button:nth-child(n+4){margin-top:3px}.ce-settings__button--disabled{cursor:not-allowed!important}.ce-settings__button--disabled{opacity:.3}.ce-settings__button--selected{color:#388ae5}@media (min-width: 651px){.codex-editor--narrow .ce-settings .ce-popover{right:0;left:auto;left:initial}}@-webkit-keyframes fade-in{0%{opacity:0}to{opacity:1}}@keyframes fade-in{0%{opacity:0}to{opacity:1}}.ce-block{-webkit-animation:fade-in .3s ease;animation:fade-in .3s ease;-webkit-animation-fill-mode:none;animation-fill-mode:none;-webkit-animation-fill-mode:initial;animation-fill-mode:initial}.ce-block:first-of-type{margin-top:0}.ce-block--selected .ce-block__content{background:#e1f2ff}.ce-block--selected .ce-block__content [contenteditable]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.ce-block--selected .ce-block__content img,.ce-block--selected .ce-block__content .ce-stub{opacity:.55}.ce-block--stretched .ce-block__content{max-width:none}.ce-block__content{position:relative;max-width:650px;margin:0 auto;-webkit-transition:background-color .15s ease;transition:background-color .15s ease}.ce-block--drop-target .ce-block__content:before{content:"";position:absolute;top:100%;left:-20px;margin-top:-1px;height:8px;width:8px;border:solid #388AE5;border-width:1px 1px 0 0;-webkit-transform-origin:right;transform-origin:right;-webkit-transform:rotate(45deg);transform:rotate(45deg)}.ce-block--drop-target .ce-block__content:after{content:"";position:absolute;top:100%;height:1px;width:100%;color:#388ae5;background:repeating-linear-gradient(90deg,#388AE5,#388AE5 1px,#fff 1px,#fff 6px)}.ce-block a{cursor:pointer;-webkit-text-decoration:underline;text-decoration:underline}.ce-block b{font-weight:700}.ce-block i{font-style:italic}@-webkit-keyframes bounceIn{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{-webkit-transform:scale3d(.9,.9,.9);transform:scale3d(.9,.9,.9)}20%{-webkit-transform:scale3d(1.03,1.03,1.03);transform:scale3d(1.03,1.03,1.03)}60%{-webkit-transform:scale3d(1,1,1);transform:scaleZ(1)}}@keyframes bounceIn{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{-webkit-transform:scale3d(.9,.9,.9);transform:scale3d(.9,.9,.9)}20%{-webkit-transform:scale3d(1.03,1.03,1.03);transform:scale3d(1.03,1.03,1.03)}60%{-webkit-transform:scale3d(1,1,1);transform:scaleZ(1)}}@-webkit-keyframes selectionBounce{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}50%{-webkit-transform:scale3d(1.01,1.01,1.01);transform:scale3d(1.01,1.01,1.01)}70%{-webkit-transform:scale3d(1,1,1);transform:scaleZ(1)}}@keyframes selectionBounce{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}50%{-webkit-transform:scale3d(1.01,1.01,1.01);transform:scale3d(1.01,1.01,1.01)}70%{-webkit-transform:scale3d(1,1,1);transform:scaleZ(1)}}@-webkit-keyframes buttonClicked{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{-webkit-transform:scale3d(.95,.95,.95);transform:scale3d(.95,.95,.95)}60%{-webkit-transform:scale3d(1.02,1.02,1.02);transform:scale3d(1.02,1.02,1.02)}80%{-webkit-transform:scale3d(1,1,1);transform:scaleZ(1)}}@keyframes buttonClicked{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{-webkit-transform:scale3d(.95,.95,.95);transform:scale3d(.95,.95,.95)}60%{-webkit-transform:scale3d(1.02,1.02,1.02);transform:scale3d(1.02,1.02,1.02)}80%{-webkit-transform:scale3d(1,1,1);transform:scaleZ(1)}}.cdx-block{padding:.4em 0}.cdx-block::-webkit-input-placeholder{line-height:normal!important}.cdx-input{border:1px solid rgba(201,201,204,.48);-webkit-box-shadow:inset 0 1px 2px 0 rgba(35,44,72,.06);box-shadow:inset 0 1px 2px #232c480f;border-radius:3px;padding:10px 12px;outline:none;width:100%;-webkit-box-sizing:border-box;box-sizing:border-box}.cdx-input[data-placeholder]:before{position:static!important}.cdx-input[data-placeholder]:before{display:inline-block;width:0;white-space:nowrap;pointer-events:none}.cdx-settings-button{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;padding:6px 1px;border-radius:3px;cursor:pointer;border:0;outline:none;background-color:transparent;vertical-align:bottom;color:inherit;margin:0;min-width:26px;min-height:26px}.cdx-settings-button svg{width:20px;height:20px}@media (max-width: 650px){.cdx-settings-button svg{width:28px;height:28px}}@media (hover: hover){.cdx-settings-button:hover{background-color:#eff2f5}}.cdx-settings-button--focused{background:rgba(34,186,255,.08)!important}.cdx-settings-button--focused{-webkit-box-shadow:inset 0 0 0px 1px rgba(7,161,227,.08);box-shadow:inset 0 0 0 1px #07a1e314}.cdx-settings-button--focused-animated{-webkit-animation-name:buttonClicked;animation-name:buttonClicked;-webkit-animation-duration:.25s;animation-duration:.25s}.cdx-settings-button--active{color:#388ae5}.cdx-settings-button svg{width:auto;height:auto}@media (max-width: 650px){.cdx-settings-button{width:36px;height:36px;border-radius:8px}}.cdx-loader{position:relative;border:1px solid rgba(201,201,204,.48)}.cdx-loader:before{content:"";position:absolute;left:50%;top:50%;width:18px;height:18px;margin:-11px 0 0 -11px;border:2px solid rgba(201,201,204,.48);border-left-color:#388ae5;border-radius:50%;-webkit-animation:cdxRotation 1.2s infinite linear;animation:cdxRotation 1.2s infinite linear}@-webkit-keyframes cdxRotation{0%{-webkit-transform:rotate(0deg);transform:rotate(0)}to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes cdxRotation{0%{-webkit-transform:rotate(0deg);transform:rotate(0)}to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}.cdx-button{padding:13px;border-radius:3px;border:1px solid rgba(201,201,204,.48);font-size:14.9px;background:#fff;-webkit-box-shadow:0 2px 2px 0 rgba(18,30,57,.04);box-shadow:0 2px 2px #121e390a;color:#707684;text-align:center;cursor:pointer}@media (hover: hover){.cdx-button:hover{background:#FBFCFE;-webkit-box-shadow:0 1px 3px 0 rgba(18,30,57,.08);box-shadow:0 1px 3px #121e3914}}.cdx-button svg{height:20px;margin-right:.2em;margin-top:-2px}.ce-stub{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:12px 18px;margin:10px 0;border-radius:10px;background:#eff2f5;border:1px solid #EFF0F1;color:#707684;font-size:14px}.ce-stub svg{width:20px;height:20px}.ce-stub__info{margin-left:14px}.ce-stub__title{font-weight:500;text-transform:capitalize}.codex-editor.codex-editor--rtl{direction:rtl}.codex-editor.codex-editor--rtl .cdx-list{padding-left:0;padding-right:40px}.codex-editor.codex-editor--rtl .ce-toolbar__plus{right:-26px;left:auto}.codex-editor.codex-editor--rtl .ce-toolbar__actions{right:auto;left:-26px}@media (max-width: 650px){.codex-editor.codex-editor--rtl .ce-toolbar__actions{margin-left:0;margin-right:auto;padding-right:0;padding-left:10px}}.codex-editor.codex-editor--rtl .ce-settings{left:5px;right:auto}.codex-editor.codex-editor--rtl .ce-settings:before{right:auto;left:25px}.codex-editor.codex-editor--rtl .ce-settings__button:not(:nth-child(3n+3)){margin-left:3px;margin-right:0}.codex-editor.codex-editor--rtl .ce-conversion-tool__icon{margin-right:0;margin-left:10px}.codex-editor.codex-editor--rtl .ce-inline-toolbar__dropdown{border-right:0px solid transparent;border-left:1px solid rgba(201,201,204,.48);margin:0 -6px 0 6px}.codex-editor.codex-editor--rtl .ce-inline-toolbar__dropdown .icon--toggler-down{margin-left:0;margin-right:4px}@media (min-width: 651px){.codex-editor--narrow.codex-editor--rtl .ce-toolbar__plus{left:0px;right:5px}}@media (min-width: 651px){.codex-editor--narrow.codex-editor--rtl .ce-toolbar__actions{left:-5px}}.cdx-search-field{--icon-margin-right: 10px;background:rgba(232,232,235,.49);border:1px solid rgba(226,226,229,.2);border-radius:6px;padding:2px;display:grid;grid-template-columns:auto auto 1fr;grid-template-rows:auto}.cdx-search-field__icon{width:26px;height:26px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;margin-right:var(--icon-margin-right)}.cdx-search-field__icon svg{width:20px;height:20px;color:#707684}.cdx-search-field__input{font-size:14px;outline:none;font-weight:500;font-family:inherit;border:0;background:transparent;margin:0;padding:0;line-height:22px;min-width:calc(100% - 26px - var(--icon-margin-right))}.cdx-search-field__input::-webkit-input-placeholder{color:#707684;font-weight:500}.cdx-search-field__input::-moz-placeholder{color:#707684;font-weight:500}.cdx-search-field__input:-ms-input-placeholder{color:#707684;font-weight:500}.cdx-search-field__input::-ms-input-placeholder{color:#707684;font-weight:500}.cdx-search-field__input::placeholder{color:#707684;font-weight:500}.ce-popover{--border-radius: 6px;--width: 200px;--max-height: 270px;--padding: 6px;--offset-from-target: 8px;--color-border: #e8e8eb;--color-shadow: rgba(13,20,33,.13);--color-background: white;--color-text-primary: black;--color-text-secondary: #707684;--color-border-icon: rgba(201, 201, 204, .48);--color-border-icon-disabled: #EFF0F1;--color-text-icon-active: #388AE5;--color-background-icon-active: rgba(56, 138, 229, .1);--color-background-item-focus: rgba(34, 186, 255, .08);--color-shadow-item-focus: rgba(7, 161, 227, .08);--color-background-item-hover: #eff2f5;--color-background-item-confirm: #E24A4A;--color-background-item-confirm-hover: #CE4343;min-width:var(--width);width:var(--width);max-height:var(--max-height);border-radius:var(--border-radius);overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-box-shadow:0 3px 15px -3px var(--color-shadow);box-shadow:0 3px 15px -3px var(--color-shadow);position:absolute;left:0;top:calc(100% + var(--offset-from-target));background:var(--color-background);display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;z-index:4;opacity:0;max-height:0;pointer-events:none;padding:0;border:none}.ce-popover--opened{opacity:1;padding:var(--padding);max-height:var(--max-height);pointer-events:auto;-webkit-animation:panelShowing .1s ease;animation:panelShowing .1s ease;border:1px solid var(--color-border)}@media (max-width: 650px){.ce-popover--opened{-webkit-animation:panelShowingMobile .25s ease;animation:panelShowingMobile .25s ease}}.ce-popover__items{overflow-y:auto;-ms-scroll-chaining:none;overscroll-behavior:contain}@media (max-width: 650px){.ce-popover__overlay{position:fixed;top:0;bottom:0;left:0;right:0;background:#1D202B;z-index:3;opacity:.5;-webkit-transition:opacity .12s ease-in;transition:opacity .12s ease-in;will-change:opacity;visibility:visible}}.ce-popover__overlay--hidden{display:none}.ce-popover--open-top{top:calc(-1 * (var(--offset-from-target) + var(--popover-height)))}@media (max-width: 650px){.ce-popover{--offset: 5px;position:fixed;max-width:none;min-width:calc(100% - var(--offset) * 2);left:var(--offset);right:var(--offset);bottom:calc(var(--offset) + env(safe-area-inset-bottom));top:auto;border-radius:10px}.ce-popover .ce-popover__search{display:none}}.ce-popover__search,.ce-popover__custom-content:not(:empty){margin-bottom:5px}.ce-popover__nothing-found-message{color:#707684;display:none;cursor:default;padding:3px;font-size:14px;line-height:20px;font-weight:500;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.ce-popover__nothing-found-message--displayed{display:block}.ce-popover__custom-content:not(:empty){padding:4px}@media (min-width: 651px){.ce-popover__custom-content:not(:empty){padding:0}}.ce-popover__custom-content--hidden{display:none}.ce-popover-item{--border-radius: 6px;--icon-size: 20px;--icon-size-mobile: 28px;border-radius:var(--border-radius);display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:3px;color:var(--color-text-primary);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}@media (max-width: 650px){.ce-popover-item{padding:4px}}.ce-popover-item:not(:last-of-type){margin-bottom:1px}.ce-popover-item__icon{border-radius:5px;width:26px;height:26px;-webkit-box-shadow:0 0 0 1px var(--color-border-icon);box-shadow:0 0 0 1px var(--color-border-icon);background:#fff;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;margin-right:10px}.ce-popover-item__icon svg{width:20px;height:20px}@media (max-width: 650px){.ce-popover-item__icon{width:36px;height:36px;border-radius:8px}.ce-popover-item__icon svg{width:var(--icon-size-mobile);height:var(--icon-size-mobile)}}.ce-popover-item__title{font-size:14px;line-height:20px;font-weight:500;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}@media (max-width: 650px){.ce-popover-item__title{font-size:16px}}.ce-popover-item__secondary-title{color:var(--color-text-secondary);font-size:12px;margin-left:auto;white-space:nowrap;letter-spacing:-.1em;padding-right:5px;margin-bottom:-2px;opacity:.6}@media (max-width: 650px){.ce-popover-item__secondary-title{display:none}}.ce-popover-item--active{background:var(--color-background-icon-active);color:var(--color-text-icon-active)}.ce-popover-item--active .ce-popover-item__icon{-webkit-box-shadow:none;box-shadow:none}.ce-popover-item--disabled{color:var(--color-text-secondary);cursor:default;pointer-events:none}.ce-popover-item--disabled .ce-popover-item__icon{-webkit-box-shadow:0 0 0 1px var(--color-border-icon-disabled);box-shadow:0 0 0 1px var(--color-border-icon-disabled)}.ce-popover-item--focused:not(.ce-popover-item--no-focus){background:var(--color-background-item-focus)!important}.ce-popover-item--focused:not(.ce-popover-item--no-focus){-webkit-box-shadow:inset 0 0 0px 1px var(--color-shadow-item-focus);box-shadow:inset 0 0 0 1px var(--color-shadow-item-focus)}.ce-popover-item--hidden{display:none}@media (hover: hover){.ce-popover-item:hover{cursor:pointer}.ce-popover-item:hover:not(.ce-popover-item--no-hover){background-color:var(--color-background-item-hover)}.ce-popover-item:hover .ce-popover-item__icon{-webkit-box-shadow:none;box-shadow:none}}.ce-popover-item--confirmation{background:var(--color-background-item-confirm)}.ce-popover-item--confirmation .ce-popover-item__icon{color:var(--color-background-item-confirm)}.ce-popover-item--confirmation .ce-popover-item__title{color:#fff}@media (hover: hover){.ce-popover-item--confirmation:not(.ce-popover-item--no-hover):hover{background:var(--color-background-item-confirm-hover)}}.ce-popover-item--confirmation:not(.ce-popover-item--no-focus).ce-popover-item--focused{background:var(--color-background-item-confirm-hover)!important}.ce-popover-item--confirmation .ce-popover-item__icon,.ce-popover-item--active .ce-popover-item__icon,.ce-popover-item--focused .ce-popover-item__icon{-webkit-box-shadow:none;box-shadow:none}@-webkit-keyframes panelShowing{0%{opacity:0;-webkit-transform:translateY(-8px) scale(.9);transform:translateY(-8px) scale(.9)}70%{opacity:1;-webkit-transform:translateY(2px);transform:translateY(2px)}to{-webkit-transform:translateY(0);transform:translateY(0)}}@keyframes panelShowing{0%{opacity:0;-webkit-transform:translateY(-8px) scale(.9);transform:translateY(-8px) scale(.9)}70%{opacity:1;-webkit-transform:translateY(2px);transform:translateY(2px)}to{-webkit-transform:translateY(0);transform:translateY(0)}}@-webkit-keyframes panelShowingMobile{0%{opacity:0;-webkit-transform:translateY(14px) scale(.98);transform:translateY(14px) scale(.98)}70%{opacity:1;-webkit-transform:translateY(-4px);transform:translateY(-4px)}to{-webkit-transform:translateY(0);transform:translateY(0)}}@keyframes panelShowingMobile{0%{opacity:0;-webkit-transform:translateY(14px) scale(.98);transform:translateY(14px) scale(.98)}70%{opacity:1;-webkit-transform:translateY(-4px);transform:translateY(-4px)}to{-webkit-transform:translateY(0);transform:translateY(0)}}.wobble{-webkit-animation-name:wobble;animation-name:wobble;-webkit-animation-duration:.4s;animation-duration:.4s}@-webkit-keyframes wobble{0%{-webkit-transform:translate3d(0,0,0);transform:translateZ(0)}15%{-webkit-transform:translate3d(-9%,0,0);transform:translate3d(-9%,0,0)}30%{-webkit-transform:translate3d(9%,0,0);transform:translate3d(9%,0,0)}45%{-webkit-transform:translate3d(-4%,0,0);transform:translate3d(-4%,0,0)}60%{-webkit-transform:translate3d(4%,0,0);transform:translate3d(4%,0,0)}75%{-webkit-transform:translate3d(-1%,0,0);transform:translate3d(-1%,0,0)}to{-webkit-transform:translate3d(0,0,0);transform:translateZ(0)}}@keyframes wobble{0%{-webkit-transform:translate3d(0,0,0);transform:translateZ(0)}15%{-webkit-transform:translate3d(-9%,0,0);transform:translate3d(-9%,0,0)}30%{-webkit-transform:translate3d(9%,0,0);transform:translate3d(9%,0,0)}45%{-webkit-transform:translate3d(-4%,0,0);transform:translate3d(-4%,0,0)}60%{-webkit-transform:translate3d(4%,0,0);transform:translate3d(4%,0,0)}75%{-webkit-transform:translate3d(-1%,0,0);transform:translate3d(-1%,0,0)}to{-webkit-transform:translate3d(0,0,0);transform:translateZ(0)}}
`;class xi extends y$1{constructor(){super(...arguments),this.isMobile=!1,this.contentRectCache=void 0,this.resizeDebouncer=et(()=>{this.windowResize()},200)}get CSS(){return{editorWrapper:"codex-editor",editorWrapperNarrow:"codex-editor--narrow",editorZone:"codex-editor__redactor",editorZoneHidden:"codex-editor__redactor--hidden",editorEmpty:"codex-editor--empty",editorRtlFix:"codex-editor--rtl"}}get contentRect(){if(this.contentRectCache)return this.contentRectCache;const s=this.nodes.wrapper.querySelector(`.${R$2.CSS.content}`);return s?(this.contentRectCache=s.getBoundingClientRect(),this.contentRectCache):{width:650,left:0,right:0}}async prepare(){this.checkIsMobile(),this.make(),this.loadStyles()}toggleReadOnly(s){s?this.disableModuleBindings():window.requestIdleCallback(()=>{this.enableModuleBindings()},{timeout:2e3})}checkEmptiness(){const{BlockManager:s}=this.Editor;this.nodes.wrapper.classList.toggle(this.CSS.editorEmpty,s.isEditorEmpty)}get someToolbarOpened(){const{Toolbar:s,BlockSettings:Ot,InlineToolbar:en,ConversionToolbar:tn}=this.Editor;return Ot.opened||en.opened||tn.opened||s.toolbox.opened}get someFlipperButtonFocused(){return this.Editor.Toolbar.toolbox.hasFocus()?!0:Object.entries(this.Editor).filter(([s,Ot])=>Ot.flipper instanceof q).some(([s,Ot])=>Ot.flipper.hasFocus())}destroy(){this.nodes.holder.innerHTML=""}closeAllToolbars(){const{Toolbar:s,BlockSettings:Ot,InlineToolbar:en,ConversionToolbar:tn}=this.Editor;Ot.close(),en.close(),tn.close(),s.toolbox.close()}checkIsMobile(){this.isMobile=window.innerWidth<dt}make(){this.nodes.holder=c$3.getHolder(this.config.holder),this.nodes.wrapper=c$3.make("div",[this.CSS.editorWrapper,...this.isRtl?[this.CSS.editorRtlFix]:[]]),this.nodes.redactor=c$3.make("div",this.CSS.editorZone),this.nodes.holder.offsetWidth<this.contentRect.width&&this.nodes.wrapper.classList.add(this.CSS.editorWrapperNarrow),this.nodes.redactor.style.paddingBottom=this.config.minHeight+"px",this.nodes.wrapper.appendChild(this.nodes.redactor),this.nodes.holder.appendChild(this.nodes.wrapper)}loadStyles(){const s="editor-js-styles";if(c$3.get(s))return;const Ot=c$3.make("style",null,{id:s,textContent:vi.toString()});this.config.style&&!W(this.config.style)&&this.config.style.nonce&&Ot.setAttribute("nonce",this.config.style.nonce),c$3.prepend(document.head,Ot)}enableModuleBindings(){this.readOnlyMutableListeners.on(this.nodes.redactor,"click",Ot=>{this.redactorClicked(Ot)},!1),this.readOnlyMutableListeners.on(this.nodes.redactor,"mousedown",Ot=>{this.documentTouched(Ot)},{capture:!0,passive:!0}),this.readOnlyMutableListeners.on(this.nodes.redactor,"touchstart",Ot=>{this.documentTouched(Ot)},{capture:!0,passive:!0}),this.readOnlyMutableListeners.on(document,"keydown",Ot=>{this.documentKeydown(Ot)},!0),this.readOnlyMutableListeners.on(document,"mousedown",Ot=>{this.documentClicked(Ot)},!0);const s=et(()=>{this.selectionChanged()},180);this.readOnlyMutableListeners.on(document,"selectionchange",s,!0),this.readOnlyMutableListeners.on(window,"resize",()=>{this.resizeDebouncer()},{passive:!0}),this.watchBlockHoveredEvents()}watchBlockHoveredEvents(){let s;this.readOnlyMutableListeners.on(this.nodes.redactor,"mousemove",Ie(Ot=>{const en=Ot.target.closest(".ce-block");this.Editor.BlockSelection.anyBlockSelected||en&&s!==en&&(s=en,this.eventsDispatcher.emit(yt,{block:this.Editor.BlockManager.getBlockByChildNode(en)}))},20),{passive:!0})}disableModuleBindings(){this.readOnlyMutableListeners.clearAll()}windowResize(){this.contentRectCache=null,this.checkIsMobile()}documentKeydown(s){switch(s.keyCode){case k$2.ENTER:this.enterPressed(s);break;case k$2.BACKSPACE:case k$2.DELETE:this.backspacePressed(s);break;case k$2.ESC:this.escapePressed(s);break;default:this.defaultBehaviour(s);break}}defaultBehaviour(s){const{currentBlock:Ot}=this.Editor.BlockManager,en=s.target.closest(`.${this.CSS.editorWrapper}`),tn=s.altKey||s.ctrlKey||s.metaKey||s.shiftKey;if(Ot!==void 0&&en===null){this.Editor.BlockEvents.keydown(s);return}en||Ot&&tn||(this.Editor.BlockManager.dropPointer(),this.Editor.Toolbar.close())}backspacePressed(s){const{BlockManager:Ot,BlockSelection:en,Caret:tn}=this.Editor;if(en.anyBlockSelected&&!b$1.isSelectionExists){const nn=Ot.removeSelectedBlocks(),rn=Ot.insertDefaultBlockAtIndex(nn,!0);tn.setToBlock(rn,tn.positions.START),en.clearSelection(s),s.preventDefault(),s.stopPropagation(),s.stopImmediatePropagation()}}escapePressed(s){this.Editor.BlockSelection.clearSelection(s),this.Editor.Toolbar.toolbox.opened?(this.Editor.Toolbar.toolbox.close(),this.Editor.Caret.setToBlock(this.Editor.BlockManager.currentBlock,this.Editor.Caret.positions.END)):this.Editor.BlockSettings.opened?this.Editor.BlockSettings.close():this.Editor.ConversionToolbar.opened?this.Editor.ConversionToolbar.close():this.Editor.InlineToolbar.opened?this.Editor.InlineToolbar.close():this.Editor.Toolbar.close()}enterPressed(s){const{BlockManager:Ot,BlockSelection:en}=this.Editor,tn=Ot.currentBlockIndex>=0;if(en.anyBlockSelected&&!b$1.isSelectionExists){en.clearSelection(s),s.preventDefault(),s.stopImmediatePropagation(),s.stopPropagation();return}if(!this.someToolbarOpened&&tn&&s.target.tagName==="BODY"){const nn=this.Editor.BlockManager.insert();this.Editor.Caret.setToBlock(nn),this.Editor.Toolbar.moveAndOpen(nn)}this.Editor.BlockSelection.clearSelection(s)}documentClicked(s){var Ot,en;if(!s.isTrusted)return;const tn=s.target;this.nodes.holder.contains(tn)||b$1.isAtEditor||(this.Editor.BlockManager.dropPointer(),this.Editor.Toolbar.close());const nn=(Ot=this.Editor.BlockSettings.nodes.wrapper)==null?void 0:Ot.contains(tn),rn=(en=this.Editor.Toolbar.nodes.settingsToggler)==null?void 0:en.contains(tn),on=nn||rn;if(this.Editor.BlockSettings.opened&&!on){this.Editor.BlockSettings.close();const sn=this.Editor.BlockManager.getBlockByChildNode(tn);this.Editor.Toolbar.moveAndOpen(sn)}this.Editor.BlockSelection.clearSelection(s)}documentTouched(s){let Ot=s.target;if(Ot===this.nodes.redactor){const en=s instanceof MouseEvent?s.clientX:s.touches[0].clientX,tn=s instanceof MouseEvent?s.clientY:s.touches[0].clientY;Ot=document.elementFromPoint(en,tn)}try{this.Editor.BlockManager.setCurrentBlockByChildNode(Ot)}catch{this.Editor.RectangleSelection.isRectActivated()||this.Editor.Caret.setToTheLastBlock()}this.Editor.Toolbar.moveAndOpen()}redactorClicked(s){if(!b$1.isCollapsed)return;const Ot=s.target,en=s.metaKey||s.ctrlKey;if(c$3.isAnchor(Ot)&&en){s.stopImmediatePropagation(),s.stopPropagation();const tn=Ot.getAttribute("href"),nn=Wt(tn);Kt(nn);return}this.processBottomZoneClick(s)}processBottomZoneClick(s){const Ot=this.Editor.BlockManager.getBlockByIndex(-1),en=c$3.offset(Ot.holder).bottom,tn=s.pageY,{BlockSelection:nn}=this.Editor;if(s.target instanceof Element&&s.target.isEqualNode(this.nodes.redactor)&&!nn.anyBlockSelected&&en<tn){s.stopImmediatePropagation(),s.stopPropagation();const{BlockManager:rn,Caret:on,Toolbar:sn}=this.Editor;(!rn.lastBlock.tool.isDefault||!rn.lastBlock.isEmpty)&&rn.insertAtEnd(),on.setToTheLastBlock(),sn.moveAndOpen(rn.lastBlock)}}selectionChanged(){const{CrossBlockSelection:s,BlockSelection:Ot}=this.Editor,en=b$1.anchorElement;if(s.isCrossBlockSelectionStarted&&Ot.anyBlockSelected&&b$1.get().removeAllRanges(),!en){b$1.range||this.Editor.InlineToolbar.close();return}const tn=en.closest(`.${R$2.CSS.content}`)===null;if(tn&&(this.Editor.InlineToolbar.containsNode(en)||this.Editor.InlineToolbar.close(),en.dataset.inlineToolbar!=="true"))return;this.Editor.BlockManager.currentBlock||this.Editor.BlockManager.setCurrentBlockByChildNode(en);const nn=tn!==!0;this.Editor.InlineToolbar.tryToShow(!0,nn)}}const wi={BlocksAPI:oo,CaretAPI:io,EventsAPI:no,I18nAPI:He,API:so,InlineToolbarAPI:ro,ListenersAPI:ao,NotifierAPI:uo,ReadOnlyAPI:po,SanitizerAPI:xo,SaverAPI:wo,SelectionAPI:yo,StylesAPI:Eo,ToolbarAPI:Bo,TooltipAPI:Mo,UiAPI:Lo,BlockSettings:Yo,ConversionToolbar:$,Toolbar:Go,InlineToolbar:Jo,BlockEvents:Qo,BlockManager:oi,BlockSelection:ii,Caret:we,CrossBlockSelection:ni,DragNDrop:si,ModificationsObserver:ri,Paste:Tt,ReadOnly:ai,RectangleSelection:fe,Renderer:li,Saver:ci,Tools:_t,UI:xi};class yi{constructor(s){this.moduleInstances={},this.eventsDispatcher=new Ee;let Ot,en;this.isReady=new Promise((tn,nn)=>{Ot=tn,en=nn}),Promise.resolve().then(async()=>{this.configuration=s,this.validate(),this.init(),await this.start(),await this.render();const{BlockManager:tn,Caret:nn,UI:rn,ModificationsObserver:on}=this.moduleInstances;rn.checkEmptiness(),on.enable(),this.configuration.autofocus&&nn.setToBlock(tn.blocks[0],nn.positions.START),Ot()}).catch(tn=>{T$1(`Editor.js is not ready because of ${tn}`,"error"),en(tn)})}set configuration(s){var Ot,en;D$1(s)?this.config={...s}:this.config={holder:s},Le(!!this.config.holderId,"config.holderId","config.holder"),this.config.holderId&&!this.config.holder&&(this.config.holder=this.config.holderId,this.config.holderId=null),this.config.holder==null&&(this.config.holder="editorjs"),this.config.logLevel||(this.config.logLevel=at.VERBOSE),Ft(this.config.logLevel),Le(!!this.config.initialBlock,"config.initialBlock","config.defaultBlock"),this.config.defaultBlock=this.config.defaultBlock||this.config.initialBlock||"paragraph",this.config.minHeight=this.config.minHeight!==void 0?this.config.minHeight:300;const tn={type:this.config.defaultBlock,data:{}};this.config.placeholder=this.config.placeholder||!1,this.config.sanitizer=this.config.sanitizer||{p:!0,b:!0,a:!0},this.config.hideToolbar=this.config.hideToolbar?this.config.hideToolbar:!1,this.config.tools=this.config.tools||{},this.config.i18n=this.config.i18n||{},this.config.data=this.config.data||{blocks:[]},this.config.onReady=this.config.onReady||(()=>{}),this.config.onChange=this.config.onChange||(()=>{}),this.config.inlineToolbar=this.config.inlineToolbar!==void 0?this.config.inlineToolbar:!0,(W(this.config.data)||!this.config.data.blocks||this.config.data.blocks.length===0)&&(this.config.data={blocks:[tn]}),this.config.readOnly=this.config.readOnly||!1,(Ot=this.config.i18n)!=null&&Ot.messages&&z.setDictionary(this.config.i18n.messages),this.config.i18n.direction=((en=this.config.i18n)==null?void 0:en.direction)||"ltr"}get configuration(){return this.config}validate(){const{holderId:s,holder:Ot}=this.config;if(s&&Ot)throw Error("holderId and holder param can't assign at the same time.");if(G(Ot)&&!c$3.get(Ot))throw Error(`element with ID ${Ot} is missing. Pass correct holder's ID.`);if(Ot&&D$1(Ot)&&!c$3.isElement(Ot))throw Error("holder value must be an Element node")}init(){this.constructModules(),this.configureModules()}async start(){await["Tools","UI","BlockManager","Paste","BlockSelection","RectangleSelection","CrossBlockSelection","ReadOnly"].reduce((s,Ot)=>s.then(async()=>{try{await this.moduleInstances[Ot].prepare()}catch(en){if(en instanceof ut)throw new Error(en.message);T$1(`Module ${Ot} was skipped because of %o`,"warn",en)}}),Promise.resolve())}render(){return this.moduleInstances.Renderer.render(this.config.data.blocks)}constructModules(){Object.entries(wi).forEach(([s,Ot])=>{try{this.moduleInstances[s]=new Ot({config:this.configuration,eventsDispatcher:this.eventsDispatcher})}catch(en){T$1("[constructModules]",`Module ${s} skipped because`,"error",en)}})}configureModules(){for(const s in this.moduleInstances)Object.prototype.hasOwnProperty.call(this.moduleInstances,s)&&(this.moduleInstances[s].state=this.getModulesDiff(s))}getModulesDiff(s){const Ot={};for(const en in this.moduleInstances)en!==s&&(Ot[en]=this.moduleInstances[en]);return Ot}}/**
 * Editor.js
 *
 * @license Apache-2.0
 * @see Editor.js <https://editorjs.io>
 * @author CodeX Team <https://codex.so>
 */class Ei{static get version(){return"2.29.0"}constructor(s){let Ot=()=>{};D$1(s)&&M$2(s.onReady)&&(Ot=s.onReady);const en=new yi(s);this.isReady=en.isReady.then(()=>{this.exportAPI(en),Ot()})}exportAPI(s){const Ot=["configuration"],en=()=>{Object.values(s.moduleInstances).forEach(tn=>{M$2(tn.destroy)&&tn.destroy(),tn.listeners.removeAll()}),Io(),s=null;for(const tn in this)Object.prototype.hasOwnProperty.call(this,tn)&&delete this[tn];Object.setPrototypeOf(this,null)};Ot.forEach(tn=>{this[tn]=s[tn]}),this.destroy=en,Object.setPrototypeOf(this,s.moduleInstances.API.methods),delete this.exportAPI,Object.entries({blocks:{clear:"clear",render:"render"},caret:{focus:"focus"},events:{on:"on",off:"off",emit:"emit"},saver:{save:"save"}}).forEach(([tn,nn])=>{Object.entries(nn).forEach(([rn,on])=>{this[on]=s.moduleInstances.API.methods[tn][rn]})})}}(function(){try{if(typeof document<"u"){var Nt=document.createElement("style");Nt.appendChild(document.createTextNode(".ce-rawtool__textarea{min-height:200px;resize:vertical;border-radius:8px;border:0;background-color:#1e2128;font-family:Menlo,Monaco,Consolas,Courier New,monospace;font-size:12px;line-height:1.6;letter-spacing:-.2px;color:#a1a7b6;overscroll-behavior:contain}")),document.head.appendChild(Nt)}}catch(s){console.error("vite-plugin-css-injected-by-js",s)}})();const a$3='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16.6954 5C17.912 5 18.8468 6.07716 18.6755 7.28165L17.426 16.0659C17.3183 16.8229 16.7885 17.4522 16.061 17.6873L12.6151 18.8012C12.2152 18.9304 11.7848 18.9304 11.3849 18.8012L7.93898 17.6873C7.21148 17.4522 6.6817 16.8229 6.57403 16.0659L5.32454 7.28165C5.15322 6.07716 6.088 5 7.30461 5H16.6954Z"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 8.4H9L9.42857 11.7939H14.5714L14.3571 13.2788L14.1429 14.7636L12 15.4L9.85714 14.7636L9.77143 14.3394"/></svg>';/**
 * Raw HTML Tool for CodeX Editor
 *
 * @author CodeX (team@codex.so)
 * @copyright CodeX 2018
 * @license The MIT License (MIT)
 */let r$1=class Dr{static get isReadOnlySupported(){return!0}static get displayInToolbox(){return!0}static get enableLineBreaks(){return!0}static get toolbox(){return{icon:a$3,title:"Raw HTML"}}constructor({data:s,config:Ot,api:en,readOnly:tn}){this.api=en,this.readOnly=tn,this.placeholder=Ot.placeholder||Dr.DEFAULT_PLACEHOLDER,this.CSS={baseClass:this.api.styles.block,input:this.api.styles.input,wrapper:"ce-rawtool",textarea:"ce-rawtool__textarea"},this.data={html:s.html||""},this.textarea=null,this.resizeDebounce=null}render(){const s=document.createElement("div"),Ot=100;return this.textarea=document.createElement("textarea"),s.classList.add(this.CSS.baseClass,this.CSS.wrapper),this.textarea.classList.add(this.CSS.textarea,this.CSS.input),this.textarea.textContent=this.data.html,this.textarea.placeholder=this.placeholder,this.readOnly?this.textarea.disabled=!0:this.textarea.addEventListener("input",()=>{this.onInput()}),s.appendChild(this.textarea),setTimeout(()=>{this.resize()},Ot),s}save(s){return{html:s.querySelector("textarea").value}}static get DEFAULT_PLACEHOLDER(){return"Enter HTML code"}static get sanitize(){return{html:!0}}onInput(){this.resizeDebounce&&clearTimeout(this.resizeDebounce),this.resizeDebounce=setTimeout(()=>{this.resize()},200)}resize(){this.textarea.style.height="auto",this.textarea.style.height=this.textarea.scrollHeight+"px"}};(function(){try{if(typeof document<"u"){var Nt=document.createElement("style");Nt.appendChild(document.createTextNode('.image-tool{--bg-color: #cdd1e0;--front-color: #388ae5;--border-color: #e8e8eb}.image-tool__image{border-radius:3px;overflow:hidden;margin-bottom:10px}.image-tool__image-picture{max-width:100%;vertical-align:bottom;display:block}.image-tool__image-preloader{width:50px;height:50px;border-radius:50%;background-size:cover;margin:auto;position:relative;background-color:var(--bg-color);background-position:center center}.image-tool__image-preloader:after{content:"";position:absolute;z-index:3;width:60px;height:60px;border-radius:50%;border:2px solid var(--bg-color);border-top-color:var(--front-color);left:50%;top:50%;margin-top:-30px;margin-left:-30px;animation:image-preloader-spin 2s infinite linear;box-sizing:border-box}.image-tool__caption[contentEditable=true][data-placeholder]:before{position:absolute!important;content:attr(data-placeholder);color:#707684;font-weight:400;display:none}.image-tool__caption[contentEditable=true][data-placeholder]:empty:before{display:block}.image-tool__caption[contentEditable=true][data-placeholder]:empty:focus:before{display:none}.image-tool--empty .image-tool__image,.image-tool--empty .image-tool__caption,.image-tool--loading .image-tool__caption{display:none}.image-tool .cdx-button{display:flex;align-items:center;justify-content:center}.image-tool .cdx-button svg{height:auto;margin:0 6px 0 0}.image-tool--filled .cdx-button,.image-tool--filled .image-tool__image-preloader{display:none}.image-tool--loading .image-tool__image{min-height:200px;display:flex;border:1px solid var(--border-color);background-color:#fff}.image-tool--loading .image-tool__image-picture,.image-tool--loading .cdx-button{display:none}.image-tool--withBorder .image-tool__image{border:1px solid var(--border-color)}.image-tool--withBackground .image-tool__image{padding:15px;background:var(--bg-color)}.image-tool--withBackground .image-tool__image-picture{max-width:60%;margin:0 auto}.image-tool--stretched .image-tool__image-picture{width:100%}@keyframes image-preloader-spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}')),document.head.appendChild(Nt)}}catch(s){console.error("vite-plugin-css-injected-by-js",s)}})();const R$1='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 19V19C9.13623 19 8.20435 19 7.46927 18.6955C6.48915 18.2895 5.71046 17.5108 5.30448 16.5307C5 15.7956 5 14.8638 5 13V12C5 9.19108 5 7.78661 5.67412 6.77772C5.96596 6.34096 6.34096 5.96596 6.77772 5.67412C7.78661 5 9.19108 5 12 5H13.5C14.8956 5 15.5933 5 16.1611 5.17224C17.4395 5.56004 18.44 6.56046 18.8278 7.83886C19 8.40666 19 9.10444 19 10.5V10.5"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M16 13V16M16 19V16M19 16H16M16 16H13"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6.5 17.5L17.5 6.5"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18.9919 10.5H19.0015"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.9919 19H11.0015"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13L13 5"/></svg>',H$1='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18.9919 9.5H19.0015"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.5 5H14.5096"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M14.625 5H15C17.2091 5 19 6.79086 19 9V9.375"/><path stroke="currentColor" stroke-width="2" d="M9.375 5L9 5C6.79086 5 5 6.79086 5 9V9.375"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.3725 5H9.38207"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 9.5H5.00957"/><path stroke="currentColor" stroke-width="2" d="M9.375 19H9C6.79086 19 5 17.2091 5 15V14.625"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.3725 19H9.38207"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 14.55H5.00957"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M16 13V16M16 19V16M19 16H16M16 16H13"/></svg>',L$1='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><rect width="14" height="14" x="5" y="5" stroke="currentColor" stroke-width="2" rx="4"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5.13968 15.32L8.69058 11.5661C9.02934 11.2036 9.48873 11 9.96774 11C10.4467 11 10.9061 11.2036 11.2449 11.5661L15.3871 16M13.5806 14.0664L15.0132 12.533C15.3519 12.1705 15.8113 11.9668 16.2903 11.9668C16.7693 11.9668 17.2287 12.1705 17.5675 12.533L18.841 13.9634"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.7778 9.33331H13.7867"/></svg>',D='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 9L20 12L17 15"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 12H20"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 9L4 12L7 15"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 12H10"/></svg>';function M$1(Nt,s=null,Ot={}){const en=document.createElement(Nt);Array.isArray(s)?en.classList.add(...s):s&&en.classList.add(s);for(const tn in Ot)en[tn]=Ot[tn];return en}class j{constructor({api:s,config:Ot,onSelectFile:en,readOnly:tn}){this.api=s,this.config=Ot,this.onSelectFile=en,this.readOnly=tn,this.nodes={wrapper:M$1("div",[this.CSS.baseClass,this.CSS.wrapper]),imageContainer:M$1("div",[this.CSS.imageContainer]),fileButton:this.createFileButton(),imageEl:void 0,imagePreloader:M$1("div",this.CSS.imagePreloader),caption:M$1("div",[this.CSS.input,this.CSS.caption],{contentEditable:!this.readOnly})},this.nodes.caption.dataset.placeholder=this.config.captionPlaceholder,this.nodes.imageContainer.appendChild(this.nodes.imagePreloader),this.nodes.wrapper.appendChild(this.nodes.imageContainer),this.nodes.wrapper.appendChild(this.nodes.caption),this.nodes.wrapper.appendChild(this.nodes.fileButton)}get CSS(){return{baseClass:this.api.styles.block,loading:this.api.styles.loader,input:this.api.styles.input,button:this.api.styles.button,wrapper:"image-tool",imageContainer:"image-tool__image",imagePreloader:"image-tool__image-preloader",imageEl:"image-tool__image-picture",caption:"image-tool__caption"}}static get status(){return{EMPTY:"empty",UPLOADING:"loading",FILLED:"filled"}}render(s){return!s.file||Object.keys(s.file).length===0?this.toggleStatus(j.status.EMPTY):this.toggleStatus(j.status.UPLOADING),this.nodes.wrapper}createFileButton(){const s=M$1("div",[this.CSS.button]);return s.innerHTML=this.config.buttonContent||`${L$1} ${this.api.i18n.t("Select an Image")}`,s.addEventListener("click",()=>{this.onSelectFile()}),s}showPreloader(s){this.nodes.imagePreloader.style.backgroundImage=`url(${s})`,this.toggleStatus(j.status.UPLOADING)}hidePreloader(){this.nodes.imagePreloader.style.backgroundImage="",this.toggleStatus(j.status.EMPTY)}fillImage(s){const Ot=/\.mp4$/.test(s)?"VIDEO":"IMG",en={src:s};let tn="load";Ot==="VIDEO"&&(en.autoplay=!0,en.loop=!0,en.muted=!0,en.playsinline=!0,tn="loadeddata"),this.nodes.imageEl=M$1(Ot,this.CSS.imageEl,en),this.nodes.imageEl.addEventListener(tn,()=>{this.toggleStatus(j.status.FILLED),this.nodes.imagePreloader&&(this.nodes.imagePreloader.style.backgroundImage="")}),this.nodes.imageContainer.appendChild(this.nodes.imageEl)}fillCaption(s){this.nodes.caption&&(this.nodes.caption.innerHTML=s)}toggleStatus(s){for(const Ot in j.status)Object.prototype.hasOwnProperty.call(j.status,Ot)&&this.nodes.wrapper.classList.toggle(`${this.CSS.wrapper}--${j.status[Ot]}`,s===j.status[Ot])}applyTune(s,Ot){this.nodes.wrapper.classList.toggle(`${this.CSS.wrapper}--${s}`,Ot)}}function x$1(Nt){return Nt&&Nt.__esModule&&Object.prototype.hasOwnProperty.call(Nt,"default")?Nt.default:Nt}var I$1={exports:{}};(function(Nt,s){(function(Ot,en){Nt.exports=en()})(window,function(){return function(Ot){var en={};function tn(nn){if(en[nn])return en[nn].exports;var rn=en[nn]={i:nn,l:!1,exports:{}};return Ot[nn].call(rn.exports,rn,rn.exports,tn),rn.l=!0,rn.exports}return tn.m=Ot,tn.c=en,tn.d=function(nn,rn,on){tn.o(nn,rn)||Object.defineProperty(nn,rn,{enumerable:!0,get:on})},tn.r=function(nn){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(nn,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(nn,"__esModule",{value:!0})},tn.t=function(nn,rn){if(1&rn&&(nn=tn(nn)),8&rn||4&rn&&typeof nn=="object"&&nn&&nn.__esModule)return nn;var on=Object.create(null);if(tn.r(on),Object.defineProperty(on,"default",{enumerable:!0,value:nn}),2&rn&&typeof nn!="string")for(var sn in nn)tn.d(on,sn,(function(an){return nn[an]}).bind(null,sn));return on},tn.n=function(nn){var rn=nn&&nn.__esModule?function(){return nn.default}:function(){return nn};return tn.d(rn,"a",rn),rn},tn.o=function(nn,rn){return Object.prototype.hasOwnProperty.call(nn,rn)},tn.p="",tn(tn.s=3)}([function(Ot,en){var tn;tn=function(){return this}();try{tn=tn||new Function("return this")()}catch{typeof window=="object"&&(tn=window)}Ot.exports=tn},function(Ot,en,tn){(function(nn){var rn=tn(2),on=setTimeout;function sn(){}function an(mn){if(!(this instanceof an))throw new TypeError("Promises must be constructed via new");if(typeof mn!="function")throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],fn(mn,this)}function ln(mn,gn){for(;mn._state===3;)mn=mn._value;mn._state!==0?(mn._handled=!0,an._immediateFn(function(){var pn=mn._state===1?gn.onFulfilled:gn.onRejected;if(pn!==null){var _n;try{_n=pn(mn._value)}catch(vn){return void un(gn.promise,vn)}cn(gn.promise,_n)}else(mn._state===1?cn:un)(gn.promise,mn._value)})):mn._deferreds.push(gn)}function cn(mn,gn){try{if(gn===mn)throw new TypeError("A promise cannot be resolved with itself.");if(gn&&(typeof gn=="object"||typeof gn=="function")){var pn=gn.then;if(gn instanceof an)return mn._state=3,mn._value=gn,void dn(mn);if(typeof pn=="function")return void fn((_n=pn,vn=gn,function(){_n.apply(vn,arguments)}),mn)}mn._state=1,mn._value=gn,dn(mn)}catch(bn){un(mn,bn)}var _n,vn}function un(mn,gn){mn._state=2,mn._value=gn,dn(mn)}function dn(mn){mn._state===2&&mn._deferreds.length===0&&an._immediateFn(function(){mn._handled||an._unhandledRejectionFn(mn._value)});for(var gn=0,pn=mn._deferreds.length;gn<pn;gn++)ln(mn,mn._deferreds[gn]);mn._deferreds=null}function hn(mn,gn,pn){this.onFulfilled=typeof mn=="function"?mn:null,this.onRejected=typeof gn=="function"?gn:null,this.promise=pn}function fn(mn,gn){var pn=!1;try{mn(function(_n){pn||(pn=!0,cn(gn,_n))},function(_n){pn||(pn=!0,un(gn,_n))})}catch(_n){if(pn)return;pn=!0,un(gn,_n)}}an.prototype.catch=function(mn){return this.then(null,mn)},an.prototype.then=function(mn,gn){var pn=new this.constructor(sn);return ln(this,new hn(mn,gn,pn)),pn},an.prototype.finally=rn.a,an.all=function(mn){return new an(function(gn,pn){if(!mn||mn.length===void 0)throw new TypeError("Promise.all accepts an array");var _n=Array.prototype.slice.call(mn);if(_n.length===0)return gn([]);var vn=_n.length;function bn(Sn,kn){try{if(kn&&(typeof kn=="object"||typeof kn=="function")){var En=kn.then;if(typeof En=="function")return void En.call(kn,function(In){bn(Sn,In)},pn)}_n[Sn]=kn,--vn==0&&gn(_n)}catch(In){pn(In)}}for(var wn=0;wn<_n.length;wn++)bn(wn,_n[wn])})},an.resolve=function(mn){return mn&&typeof mn=="object"&&mn.constructor===an?mn:new an(function(gn){gn(mn)})},an.reject=function(mn){return new an(function(gn,pn){pn(mn)})},an.race=function(mn){return new an(function(gn,pn){for(var _n=0,vn=mn.length;_n<vn;_n++)mn[_n].then(gn,pn)})},an._immediateFn=typeof nn=="function"&&function(mn){nn(mn)}||function(mn){on(mn,0)},an._unhandledRejectionFn=function(mn){typeof console<"u"&&console&&console.warn("Possible Unhandled Promise Rejection:",mn)},en.a=an}).call(this,tn(5).setImmediate)},function(Ot,en,tn){en.a=function(nn){var rn=this.constructor;return this.then(function(on){return rn.resolve(nn()).then(function(){return on})},function(on){return rn.resolve(nn()).then(function(){return rn.reject(on)})})}},function(Ot,en,tn){function nn(fn){return(nn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(mn){return typeof mn}:function(mn){return mn&&typeof Symbol=="function"&&mn.constructor===Symbol&&mn!==Symbol.prototype?"symbol":typeof mn})(fn)}tn(4);var rn,on,sn,an,ln,cn,un,dn=tn(8),hn=(on=function(fn){return new Promise(function(mn,gn){fn=an(fn),(fn=ln(fn)).beforeSend&&fn.beforeSend();var pn=window.XMLHttpRequest?new window.XMLHttpRequest:new window.ActiveXObject("Microsoft.XMLHTTP");pn.open(fn.method,fn.url),pn.setRequestHeader("X-Requested-With","XMLHttpRequest"),Object.keys(fn.headers).forEach(function(vn){var bn=fn.headers[vn];pn.setRequestHeader(vn,bn)});var _n=fn.ratio;pn.upload.addEventListener("progress",function(vn){var bn=Math.round(vn.loaded/vn.total*100),wn=Math.ceil(bn*_n/100);fn.progress(Math.min(wn,100))},!1),pn.addEventListener("progress",function(vn){var bn=Math.round(vn.loaded/vn.total*100),wn=Math.ceil(bn*(100-_n)/100)+_n;fn.progress(Math.min(wn,100))},!1),pn.onreadystatechange=function(){if(pn.readyState===4){var vn=pn.response;try{vn=JSON.parse(vn)}catch{}var bn=dn.parseHeaders(pn.getAllResponseHeaders()),wn={body:vn,code:pn.status,headers:bn};un(pn.status)?mn(wn):gn(wn)}},pn.send(fn.data)})},sn=function(fn){return fn.method="POST",on(fn)},an=function(){var fn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(fn.url&&typeof fn.url!="string")throw new Error("Url must be a string");if(fn.url=fn.url||"",fn.method&&typeof fn.method!="string")throw new Error("`method` must be a string or null");if(fn.method=fn.method?fn.method.toUpperCase():"GET",fn.headers&&nn(fn.headers)!=="object")throw new Error("`headers` must be an object or null");if(fn.headers=fn.headers||{},fn.type&&(typeof fn.type!="string"||!Object.values(rn).includes(fn.type)))throw new Error("`type` must be taken from module's contentType library");if(fn.progress&&typeof fn.progress!="function")throw new Error("`progress` must be a function or null");if(fn.progress=fn.progress||function(mn){},fn.beforeSend=fn.beforeSend||function(mn){},fn.ratio&&typeof fn.ratio!="number")throw new Error("`ratio` must be a number");if(fn.ratio<0||fn.ratio>100)throw new Error("`ratio` must be in a 0-100 interval");if(fn.ratio=fn.ratio||90,fn.accept&&typeof fn.accept!="string")throw new Error("`accept` must be a string with a list of allowed mime-types");if(fn.accept=fn.accept||"*/*",fn.multiple&&typeof fn.multiple!="boolean")throw new Error("`multiple` must be a true or false");if(fn.multiple=fn.multiple||!1,fn.fieldName&&typeof fn.fieldName!="string")throw new Error("`fieldName` must be a string");return fn.fieldName=fn.fieldName||"files",fn},ln=function(fn){switch(fn.method){case"GET":var mn=cn(fn.data,rn.URLENCODED);delete fn.data,fn.url=/\?/.test(fn.url)?fn.url+"&"+mn:fn.url+"?"+mn;break;case"POST":case"PUT":case"DELETE":case"UPDATE":var gn=function(){return(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{}).type||rn.JSON}(fn);(dn.isFormData(fn.data)||dn.isFormElement(fn.data))&&(gn=rn.FORM),fn.data=cn(fn.data,gn),gn!==hn.contentType.FORM&&(fn.headers["content-type"]=gn)}return fn},cn=function(){var fn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};switch(arguments.length>1?arguments[1]:void 0){case rn.URLENCODED:return dn.urlEncode(fn);case rn.JSON:return dn.jsonEncode(fn);case rn.FORM:return dn.formEncode(fn);default:return fn}},un=function(fn){return fn>=200&&fn<300},{contentType:rn={URLENCODED:"application/x-www-form-urlencoded; charset=utf-8",FORM:"multipart/form-data",JSON:"application/json; charset=utf-8"},request:on,get:function(fn){return fn.method="GET",on(fn)},post:sn,transport:function(fn){return fn=an(fn),dn.selectFiles(fn).then(function(mn){for(var gn=new FormData,pn=0;pn<mn.length;pn++)gn.append(fn.fieldName,mn[pn],mn[pn].name);dn.isObject(fn.data)&&Object.keys(fn.data).forEach(function(vn){var bn=fn.data[vn];gn.append(vn,bn)});var _n=fn.beforeSend;return fn.beforeSend=function(){return _n(mn)},fn.data=gn,sn(fn)})},selectFiles:function(fn){return delete(fn=an(fn)).beforeSend,dn.selectFiles(fn)}});Ot.exports=hn},function(Ot,en,tn){tn.r(en);var nn=tn(1);window.Promise=window.Promise||nn.a},function(Ot,en,tn){(function(nn){var rn=nn!==void 0&&nn||typeof self<"u"&&self||window,on=Function.prototype.apply;function sn(an,ln){this._id=an,this._clearFn=ln}en.setTimeout=function(){return new sn(on.call(setTimeout,rn,arguments),clearTimeout)},en.setInterval=function(){return new sn(on.call(setInterval,rn,arguments),clearInterval)},en.clearTimeout=en.clearInterval=function(an){an&&an.close()},sn.prototype.unref=sn.prototype.ref=function(){},sn.prototype.close=function(){this._clearFn.call(rn,this._id)},en.enroll=function(an,ln){clearTimeout(an._idleTimeoutId),an._idleTimeout=ln},en.unenroll=function(an){clearTimeout(an._idleTimeoutId),an._idleTimeout=-1},en._unrefActive=en.active=function(an){clearTimeout(an._idleTimeoutId);var ln=an._idleTimeout;ln>=0&&(an._idleTimeoutId=setTimeout(function(){an._onTimeout&&an._onTimeout()},ln))},tn(6),en.setImmediate=typeof self<"u"&&self.setImmediate||nn!==void 0&&nn.setImmediate||this&&this.setImmediate,en.clearImmediate=typeof self<"u"&&self.clearImmediate||nn!==void 0&&nn.clearImmediate||this&&this.clearImmediate}).call(this,tn(0))},function(Ot,en,tn){(function(nn,rn){(function(on,sn){if(!on.setImmediate){var an,ln,cn,un,dn,hn=1,fn={},mn=!1,gn=on.document,pn=Object.getPrototypeOf&&Object.getPrototypeOf(on);pn=pn&&pn.setTimeout?pn:on,{}.toString.call(on.process)==="[object process]"?an=function(bn){rn.nextTick(function(){vn(bn)})}:function(){if(on.postMessage&&!on.importScripts){var bn=!0,wn=on.onmessage;return on.onmessage=function(){bn=!1},on.postMessage("","*"),on.onmessage=wn,bn}}()?(un="setImmediate$"+Math.random()+"$",dn=function(bn){bn.source===on&&typeof bn.data=="string"&&bn.data.indexOf(un)===0&&vn(+bn.data.slice(un.length))},on.addEventListener?on.addEventListener("message",dn,!1):on.attachEvent("onmessage",dn),an=function(bn){on.postMessage(un+bn,"*")}):on.MessageChannel?((cn=new MessageChannel).port1.onmessage=function(bn){vn(bn.data)},an=function(bn){cn.port2.postMessage(bn)}):gn&&"onreadystatechange"in gn.createElement("script")?(ln=gn.documentElement,an=function(bn){var wn=gn.createElement("script");wn.onreadystatechange=function(){vn(bn),wn.onreadystatechange=null,ln.removeChild(wn),wn=null},ln.appendChild(wn)}):an=function(bn){setTimeout(vn,0,bn)},pn.setImmediate=function(bn){typeof bn!="function"&&(bn=new Function(""+bn));for(var wn=new Array(arguments.length-1),Sn=0;Sn<wn.length;Sn++)wn[Sn]=arguments[Sn+1];var kn={callback:bn,args:wn};return fn[hn]=kn,an(hn),hn++},pn.clearImmediate=_n}function _n(bn){delete fn[bn]}function vn(bn){if(mn)setTimeout(vn,0,bn);else{var wn=fn[bn];if(wn){mn=!0;try{(function(Sn){var kn=Sn.callback,En=Sn.args;switch(En.length){case 0:kn();break;case 1:kn(En[0]);break;case 2:kn(En[0],En[1]);break;case 3:kn(En[0],En[1],En[2]);break;default:kn.apply(sn,En)}})(wn)}finally{_n(bn),mn=!1}}}}})(typeof self>"u"?nn===void 0?this:nn:self)}).call(this,tn(0),tn(7))},function(Ot,en){var tn,nn,rn=Ot.exports={};function on(){throw new Error("setTimeout has not been defined")}function sn(){throw new Error("clearTimeout has not been defined")}function an(pn){if(tn===setTimeout)return setTimeout(pn,0);if((tn===on||!tn)&&setTimeout)return tn=setTimeout,setTimeout(pn,0);try{return tn(pn,0)}catch{try{return tn.call(null,pn,0)}catch{return tn.call(this,pn,0)}}}(function(){try{tn=typeof setTimeout=="function"?setTimeout:on}catch{tn=on}try{nn=typeof clearTimeout=="function"?clearTimeout:sn}catch{nn=sn}})();var ln,cn=[],un=!1,dn=-1;function hn(){un&&ln&&(un=!1,ln.length?cn=ln.concat(cn):dn=-1,cn.length&&fn())}function fn(){if(!un){var pn=an(hn);un=!0;for(var _n=cn.length;_n;){for(ln=cn,cn=[];++dn<_n;)ln&&ln[dn].run();dn=-1,_n=cn.length}ln=null,un=!1,function(vn){if(nn===clearTimeout)return clearTimeout(vn);if((nn===sn||!nn)&&clearTimeout)return nn=clearTimeout,clearTimeout(vn);try{nn(vn)}catch{try{return nn.call(null,vn)}catch{return nn.call(this,vn)}}}(pn)}}function mn(pn,_n){this.fun=pn,this.array=_n}function gn(){}rn.nextTick=function(pn){var _n=new Array(arguments.length-1);if(arguments.length>1)for(var vn=1;vn<arguments.length;vn++)_n[vn-1]=arguments[vn];cn.push(new mn(pn,_n)),cn.length!==1||un||an(fn)},mn.prototype.run=function(){this.fun.apply(null,this.array)},rn.title="browser",rn.browser=!0,rn.env={},rn.argv=[],rn.version="",rn.versions={},rn.on=gn,rn.addListener=gn,rn.once=gn,rn.off=gn,rn.removeListener=gn,rn.removeAllListeners=gn,rn.emit=gn,rn.prependListener=gn,rn.prependOnceListener=gn,rn.listeners=function(pn){return[]},rn.binding=function(pn){throw new Error("process.binding is not supported")},rn.cwd=function(){return"/"},rn.chdir=function(pn){throw new Error("process.chdir is not supported")},rn.umask=function(){return 0}},function(Ot,en,tn){function nn(on,sn){for(var an=0;an<sn.length;an++){var ln=sn[an];ln.enumerable=ln.enumerable||!1,ln.configurable=!0,"value"in ln&&(ln.writable=!0),Object.defineProperty(on,ln.key,ln)}}var rn=tn(9);Ot.exports=function(){function on(){(function(cn,un){if(!(cn instanceof un))throw new TypeError("Cannot call a class as a function")})(this,on)}var sn,an,ln;return sn=on,ln=[{key:"urlEncode",value:function(cn){return rn(cn)}},{key:"jsonEncode",value:function(cn){return JSON.stringify(cn)}},{key:"formEncode",value:function(cn){if(this.isFormData(cn))return cn;if(this.isFormElement(cn))return new FormData(cn);if(this.isObject(cn)){var un=new FormData;return Object.keys(cn).forEach(function(dn){var hn=cn[dn];un.append(dn,hn)}),un}throw new Error("`data` must be an instance of Object, FormData or <FORM> HTMLElement")}},{key:"isObject",value:function(cn){return Object.prototype.toString.call(cn)==="[object Object]"}},{key:"isFormData",value:function(cn){return cn instanceof FormData}},{key:"isFormElement",value:function(cn){return cn instanceof HTMLFormElement}},{key:"selectFiles",value:function(){var cn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return new Promise(function(un,dn){var hn=document.createElement("INPUT");hn.type="file",cn.multiple&&hn.setAttribute("multiple","multiple"),cn.accept&&hn.setAttribute("accept",cn.accept),hn.style.display="none",document.body.appendChild(hn),hn.addEventListener("change",function(fn){var mn=fn.target.files;un(mn),document.body.removeChild(hn)},!1),hn.click()})}},{key:"parseHeaders",value:function(cn){var un=cn.trim().split(/[\r\n]+/),dn={};return un.forEach(function(hn){var fn=hn.split(": "),mn=fn.shift(),gn=fn.join(": ");mn&&(dn[mn]=gn)}),dn}}],(an=null)&&nn(sn.prototype,an),ln&&nn(sn,ln),on}()},function(Ot,en){var tn=function(rn){return encodeURIComponent(rn).replace(/[!'()*]/g,escape).replace(/%20/g,"+")},nn=function(rn,on,sn,an){return on=on||null,sn=sn||"&",an=an||null,rn?function(ln){for(var cn=new Array,un=0;un<ln.length;un++)ln[un]&&cn.push(ln[un]);return cn}(Object.keys(rn).map(function(ln){var cn,un,dn=ln;if(an&&(dn=an+"["+dn+"]"),typeof rn[ln]=="object"&&rn[ln]!==null)cn=nn(rn[ln],null,sn,dn);else{on&&(un=dn,dn=!isNaN(parseFloat(un))&&isFinite(un)?on+Number(dn):dn);var hn=rn[ln];hn=(hn=(hn=(hn=hn===!0?"1":hn)===!1?"0":hn)===0?"0":hn)||"",cn=tn(dn)+"="+tn(hn)}return cn})).join(sn).replace(/[!'()*]/g,""):""};Ot.exports=nn}])})})(I$1);var U=I$1.exports;const F=x$1(U);function _(Nt){return Nt&&typeof Nt.then=="function"}class B{constructor({config:s,onUpload:Ot,onError:en}){this.config=s,this.onUpload=Ot,this.onError=en}uploadSelectedFile({onPreview:s}){const Ot=function(tn){const nn=new FileReader;nn.readAsDataURL(tn),nn.onload=rn=>{s(rn.target.result)}};let en;this.config.uploader&&typeof this.config.uploader.uploadByFile=="function"?en=F.selectFiles({accept:this.config.types}).then(tn=>{Ot(tn[0]);const nn=this.config.uploader.uploadByFile(tn[0]);return _(nn)||console.warn("Custom uploader method uploadByFile should return a Promise"),nn}):en=F.transport({url:this.config.endpoints.byFile,data:this.config.additionalRequestData,accept:this.config.types,headers:this.config.additionalRequestHeaders,beforeSend:tn=>{Ot(tn[0])},fieldName:this.config.field}).then(tn=>tn.body),en.then(tn=>{this.onUpload(tn)}).catch(tn=>{this.onError(tn)})}uploadByUrl(s){let Ot;this.config.uploader&&typeof this.config.uploader.uploadByUrl=="function"?(Ot=this.config.uploader.uploadByUrl(s),_(Ot)||console.warn("Custom uploader method uploadByUrl should return a Promise")):Ot=F.post({url:this.config.endpoints.byUrl,data:Object.assign({url:s},this.config.additionalRequestData),type:F.contentType.JSON,headers:this.config.additionalRequestHeaders}).then(en=>en.body),Ot.then(en=>{this.onUpload(en)}).catch(en=>{this.onError(en)})}uploadByFile(s,{onPreview:Ot}){const en=new FileReader;en.readAsDataURL(s),en.onload=nn=>{Ot(nn.target.result)};let tn;if(this.config.uploader&&typeof this.config.uploader.uploadByFile=="function")tn=this.config.uploader.uploadByFile(s),_(tn)||console.warn("Custom uploader method uploadByFile should return a Promise");else{const nn=new FormData;nn.append(this.config.field,s),this.config.additionalRequestData&&Object.keys(this.config.additionalRequestData).length&&Object.entries(this.config.additionalRequestData).forEach(([rn,on])=>{nn.append(rn,on)}),tn=F.post({url:this.config.endpoints.byFile,data:nn,type:F.contentType.JSON,headers:this.config.additionalRequestHeaders}).then(rn=>rn.body)}tn.then(nn=>{this.onUpload(nn)}).catch(nn=>{this.onError(nn)})}}/**
 * Image Tool for the Editor.js
 *
 * @author CodeX <team@codex.so>
 * @license MIT
 * @see {@link https://github.com/editor-js/image}
 *
 * To developers.
 * To simplify Tool structure, we split it to 4 parts:
 *  1) index.js  main Tool's interface, public API and methods for working with data
 *  2) uploader.js  module that has methods for sending files via AJAX: from device, by URL or File pasting
 *  3) ui.js  module for UI manipulations: render, showing preloader, etc
 *  4) tunes.js  working with Block Tunes: render buttons, handle clicks
 *
 * For debug purposes there is a testing server
 * that can save uploaded files and return a Response {@link UploadResponseFormat}
 *
 *       $ node dev/server.js
 *
 * It will expose 8008 port, so you can pass http://localhost:8008 with the Tools config:
 *
 * image: {
 *   class: ImageTool,
 *   config: {
 *     endpoints: {
 *       byFile: 'http://localhost:8008/uploadFile',
 *       byUrl: 'http://localhost:8008/fetchUrl',
 *     }
 *   },
 * },
 */class P{static get isReadOnlySupported(){return!0}static get toolbox(){return{icon:L$1,title:"Image"}}static get tunes(){return[{name:"withBorder",icon:H$1,title:"With border",toggle:!0},{name:"stretched",icon:D,title:"Stretch image",toggle:!0},{name:"withBackground",icon:R$1,title:"With background",toggle:!0}]}constructor({data:s,config:Ot,api:en,readOnly:tn,block:nn}){this.api=en,this.readOnly=tn,this.block=nn,this.config={endpoints:Ot.endpoints||"",additionalRequestData:Ot.additionalRequestData||{},additionalRequestHeaders:Ot.additionalRequestHeaders||{},field:Ot.field||"image",types:Ot.types||"image/*",captionPlaceholder:this.api.i18n.t(Ot.captionPlaceholder||"Caption"),buttonContent:Ot.buttonContent||"",uploader:Ot.uploader||void 0,actions:Ot.actions||[]},this.uploader=new B({config:this.config,onUpload:rn=>this.onUpload(rn),onError:rn=>this.uploadingFailed(rn)}),this.ui=new j({api:en,config:this.config,onSelectFile:()=>{this.uploader.uploadSelectedFile({onPreview:rn=>{this.ui.showPreloader(rn)}})},readOnly:tn}),this._data={},this.data=s}render(){return this.ui.render(this.data)}validate(s){return s.file&&s.file.url}save(){const s=this.ui.nodes.caption;return this._data.caption=s.innerHTML,this.data}renderSettings(){return P.tunes.concat(this.config.actions).map(s=>({icon:s.icon,label:this.api.i18n.t(s.title),name:s.name,toggle:s.toggle,isActive:this.data[s.name],onActivate:()=>{if(typeof s.action=="function"){s.action(s.name);return}this.tuneToggled(s.name)}}))}appendCallback(){this.ui.nodes.fileButton.click()}static get pasteConfig(){return{tags:[{img:{src:!0}}],patterns:{image:/https?:\/\/\S+\.(gif|jpe?g|tiff|png|svg|webp)(\?[a-z0-9=]*)?$/i},files:{mimeTypes:["image/*"]}}}async onPaste(s){switch(s.type){case"tag":{const Ot=s.detail.data;if(/^blob:/.test(Ot.src)){const en=await(await fetch(Ot.src)).blob();this.uploadFile(en);break}this.uploadUrl(Ot.src);break}case"pattern":{const Ot=s.detail.data;this.uploadUrl(Ot);break}case"file":{const Ot=s.detail.file;this.uploadFile(Ot);break}}}set data(s){this.image=s.file,this._data.caption=s.caption||"",this.ui.fillCaption(this._data.caption),P.tunes.forEach(({name:Ot})=>{const en=typeof s[Ot]<"u"?s[Ot]===!0||s[Ot]==="true":!1;this.setTune(Ot,en)})}get data(){return this._data}set image(s){this._data.file=s||{},s&&s.url&&this.ui.fillImage(s.url)}onUpload(s){s.success&&s.file?this.image=s.file:this.uploadingFailed("incorrect response: "+JSON.stringify(s))}uploadingFailed(s){console.log("Image Tool: uploading failed because of",s),this.api.notifier.show({message:this.api.i18n.t("Couldnt upload image. Please try another."),style:"error"}),this.ui.hidePreloader()}tuneToggled(s){this.setTune(s,!this._data[s])}setTune(s,Ot){this._data[s]=Ot,this.ui.applyTune(s,Ot),s==="stretched"&&Promise.resolve().then(()=>{this.block.stretched=Ot}).catch(en=>{console.error(en)})}uploadFile(s){this.uploader.uploadByFile(s,{onPreview:Ot=>{this.ui.showPreloader(Ot)}})}uploadUrl(s){this.ui.showPreloader(s),this.uploader.uploadByUrl(s)}}(function(){try{if(typeof document<"u"){var Nt=document.createElement("style");Nt.appendChild(document.createTextNode('.cdx-checklist{gap:6px;display:flex;flex-direction:column}.cdx-checklist__item{display:flex;box-sizing:content-box;align-items:flex-start}.cdx-checklist__item-text{outline:none;flex-grow:1;line-height:1.57em}.cdx-checklist__item-checkbox{width:22px;height:22px;display:flex;align-items:center;margin-right:8px;margin-top:calc(.785em - 11px);cursor:pointer}.cdx-checklist__item-checkbox svg{opacity:0;height:20px;width:20px;position:absolute;left:-1px;top:-1px;max-height:20px}@media (hover: hover){.cdx-checklist__item-checkbox:not(.cdx-checklist__item-checkbox--no-hover):hover .cdx-checklist__item-checkbox-check svg{opacity:1}}.cdx-checklist__item-checkbox-check{cursor:pointer;display:inline-block;flex-shrink:0;position:relative;width:20px;height:20px;box-sizing:border-box;margin-left:0;border-radius:5px;border:1px solid #C9C9C9;background:#fff}.cdx-checklist__item-checkbox-check:before{content:"";position:absolute;top:0;right:0;bottom:0;left:0;border-radius:100%;background-color:#369fff;visibility:hidden;pointer-events:none;transform:scale(1);transition:transform .4s ease-out,opacity .4s}@media (hover: hover){.cdx-checklist__item--checked .cdx-checklist__item-checkbox:not(.cdx-checklist__item--checked .cdx-checklist__item-checkbox--no-hover):hover .cdx-checklist__item-checkbox-check{background:#0059AB;border-color:#0059ab}}.cdx-checklist__item--checked .cdx-checklist__item-checkbox-check{background:#369FFF;border-color:#369fff}.cdx-checklist__item--checked .cdx-checklist__item-checkbox-check svg{opacity:1}.cdx-checklist__item--checked .cdx-checklist__item-checkbox-check svg path{stroke:#fff}.cdx-checklist__item--checked .cdx-checklist__item-checkbox-check:before{opacity:0;visibility:visible;transform:scale(2.5)}')),document.head.appendChild(Nt)}}catch(s){console.error("vite-plugin-css-injected-by-js",s)}})();const k$1='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M7 12L10.4884 15.8372C10.5677 15.9245 10.705 15.9245 10.7844 15.8372L17 9"/></svg>',g$2='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M9.2 12L11.0586 13.8586C11.1367 13.9367 11.2633 13.9367 11.3414 13.8586L14.7 10.5"/><rect width="14" height="14" x="5" y="5" stroke="currentColor" stroke-width="2" rx="4"/></svg>';function d$1(){const Nt=document.activeElement,s=window.getSelection().getRangeAt(0),Ot=s.cloneRange();return Ot.selectNodeContents(Nt),Ot.setStart(s.endContainer,s.endOffset),Ot.extractContents()}function C$1(Nt){const s=document.createElement("div");return s.appendChild(Nt),s.innerHTML}function c$2(Nt,s=null,Ot={}){const en=document.createElement(Nt);Array.isArray(s)?en.classList.add(...s):s&&en.classList.add(s);for(const tn in Ot)en[tn]=Ot[tn];return en}function m$2(Nt){return Nt.innerHTML.replace("<br>"," ").trim()}function p(Nt,s=!1,Ot=void 0){const en=document.createRange(),tn=window.getSelection();en.selectNodeContents(Nt),Ot!==void 0&&(en.setStart(Nt,Ot),en.setEnd(Nt,Ot)),en.collapse(s),tn.removeAllRanges(),tn.addRange(en)}Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);Element.prototype.closest||(Element.prototype.closest=function(Nt){let s=this;if(!document.documentElement.contains(s))return null;do{if(s.matches(Nt))return s;s=s.parentElement||s.parentNode}while(s!==null&&s.nodeType===1);return null});let f$1=class{static get isReadOnlySupported(){return!0}static get enableLineBreaks(){return!0}static get toolbox(){return{icon:g$2,title:"Checklist"}}static get conversionConfig(){return{export:s=>s.items.map(({text:Ot})=>Ot).join(". "),import:s=>({items:[{text:s,checked:!1}]})}}constructor({data:s,config:Ot,api:en,readOnly:tn}){this._elements={wrapper:null,items:[]},this.readOnly=tn,this.api=en,this.data=s||{}}render(){return this._elements.wrapper=c$2("div",[this.CSS.baseBlock,this.CSS.wrapper]),this.data.items||(this.data.items=[{text:"",checked:!1}]),this.data.items.forEach(s=>{const Ot=this.createChecklistItem(s);this._elements.wrapper.appendChild(Ot)}),this.readOnly?this._elements.wrapper:(this._elements.wrapper.addEventListener("keydown",s=>{const[Ot,en]=[13,8];switch(s.keyCode){case Ot:this.enterPressed(s);break;case en:this.backspace(s);break}},!1),this._elements.wrapper.addEventListener("click",s=>{this.toggleCheckbox(s)}),this._elements.wrapper)}save(){let s=this.items.map(Ot=>{const en=this.getItemInput(Ot);return{text:m$2(en),checked:Ot.classList.contains(this.CSS.itemChecked)}});return s=s.filter(Ot=>Ot.text.trim().length!==0),{items:s}}validate(s){return!!s.items.length}toggleCheckbox(s){const Ot=s.target.closest(`.${this.CSS.item}`),en=Ot.querySelector(`.${this.CSS.checkboxContainer}`);en.contains(s.target)&&(Ot.classList.toggle(this.CSS.itemChecked),en.classList.add(this.CSS.noHover),en.addEventListener("mouseleave",()=>this.removeSpecialHoverBehavior(en),{once:!0}))}createChecklistItem(s={}){const Ot=c$2("div",this.CSS.item),en=c$2("span",this.CSS.checkbox),tn=c$2("div",this.CSS.checkboxContainer),nn=c$2("div",this.CSS.textField,{innerHTML:s.text?s.text:"",contentEditable:!this.readOnly});return s.checked&&Ot.classList.add(this.CSS.itemChecked),en.innerHTML=k$1,tn.appendChild(en),Ot.appendChild(tn),Ot.appendChild(nn),Ot}enterPressed(s){s.preventDefault();const Ot=this.items,en=document.activeElement.closest(`.${this.CSS.item}`);if(Ot.indexOf(en)===Ot.length-1&&m$2(this.getItemInput(en)).length===0){const on=this.api.blocks.getCurrentBlockIndex();en.remove(),this.api.blocks.insert(),this.api.caret.setToBlock(on+1);return}const tn=d$1(),nn=C$1(tn),rn=this.createChecklistItem({text:nn,checked:!1});this._elements.wrapper.insertBefore(rn,en.nextSibling),p(this.getItemInput(rn),!0)}backspace(s){const Ot=s.target.closest(`.${this.CSS.item}`),en=this.items.indexOf(Ot),tn=this.items[en-1];if(!tn||window.getSelection().focusOffset!==0)return;s.preventDefault();const nn=d$1(),rn=this.getItemInput(tn),on=rn.childNodes.length;rn.appendChild(nn),p(rn,void 0,on),Ot.remove()}get CSS(){return{baseBlock:this.api.styles.block,wrapper:"cdx-checklist",item:"cdx-checklist__item",itemChecked:"cdx-checklist__item--checked",noHover:"cdx-checklist__item-checkbox--no-hover",checkbox:"cdx-checklist__item-checkbox-check",textField:"cdx-checklist__item-text",checkboxContainer:"cdx-checklist__item-checkbox"}}get items(){return Array.from(this._elements.wrapper.querySelectorAll(`.${this.CSS.item}`))}removeSpecialHoverBehavior(s){s.classList.remove(this.CSS.noHover)}getItemInput(s){return s.querySelector(`.${this.CSS.textField}`)}};(function(){try{if(typeof document<"u"){var Nt=document.createElement("style");Nt.appendChild(document.createTextNode(".cdx-list{margin:0;padding-left:40px;outline:none}.cdx-list__item{padding:5.5px 0 5.5px 3px;line-height:1.6em}.cdx-list--unordered{list-style:disc}.cdx-list--ordered{list-style:decimal}.cdx-list-settings{display:flex}.cdx-list-settings .cdx-settings-button{width:50%}")),document.head.appendChild(Nt)}}catch(s){console.error("vite-plugin-css-injected-by-js",s)}})();const a$2='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><line x1="9" x2="19" y1="7" y2="7" stroke="currentColor" stroke-linecap="round" stroke-width="2"/><line x1="9" x2="19" y1="12" y2="12" stroke="currentColor" stroke-linecap="round" stroke-width="2"/><line x1="9" x2="19" y1="17" y2="17" stroke="currentColor" stroke-linecap="round" stroke-width="2"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M5.00001 17H4.99002"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M5.00001 12H4.99002"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M5.00001 7H4.99002"/></svg>',o='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><line x1="12" x2="19" y1="7" y2="7" stroke="currentColor" stroke-linecap="round" stroke-width="2"/><line x1="12" x2="19" y1="12" y2="12" stroke="currentColor" stroke-linecap="round" stroke-width="2"/><line x1="12" x2="19" y1="17" y2="17" stroke="currentColor" stroke-linecap="round" stroke-width="2"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M7.79999 14L7.79999 7.2135C7.79999 7.12872 7.7011 7.0824 7.63597 7.13668L4.79999 9.5"/></svg>';class d{static get isReadOnlySupported(){return!0}static get enableLineBreaks(){return!0}static get toolbox(){return{icon:a$2,title:"List"}}constructor({data:s,config:Ot,api:en,readOnly:tn}){this._elements={wrapper:null},this.api=en,this.readOnly=tn,this.settings=[{name:"unordered",label:this.api.i18n.t("Unordered"),icon:a$2,default:Ot.defaultStyle==="unordered"||!1},{name:"ordered",label:this.api.i18n.t("Ordered"),icon:o,default:Ot.defaultStyle==="ordered"||!0}],this._data={style:this.settings.find(nn=>nn.default===!0).name,items:[]},this.data=s}render(){return this._elements.wrapper=this.makeMainTag(this._data.style),this._data.items.length?this._data.items.forEach(s=>{this._elements.wrapper.appendChild(this._make("li",this.CSS.item,{innerHTML:s}))}):this._elements.wrapper.appendChild(this._make("li",this.CSS.item)),this.readOnly||this._elements.wrapper.addEventListener("keydown",s=>{const[Ot,en]=[13,8];switch(s.keyCode){case Ot:this.getOutofList(s);break;case en:this.backspace(s);break}},!1),this._elements.wrapper}save(){return this.data}static get conversionConfig(){return{export:s=>s.items.join(". "),import:s=>({items:[s],style:"unordered"})}}static get sanitize(){return{style:{},items:{br:!0}}}renderSettings(){return this.settings.map(s=>({...s,isActive:this._data.style===s.name,closeOnActivate:!0,onActivate:()=>this.toggleTune(s.name)}))}onPaste(s){const Ot=s.detail.data;this.data=this.pasteHandler(Ot)}static get pasteConfig(){return{tags:["OL","UL","LI"]}}makeMainTag(s){const Ot=s==="ordered"?this.CSS.wrapperOrdered:this.CSS.wrapperUnordered,en=s==="ordered"?"ol":"ul";return this._make(en,[this.CSS.baseBlock,this.CSS.wrapper,Ot],{contentEditable:!this.readOnly})}toggleTune(s){const Ot=this.makeMainTag(s);for(;this._elements.wrapper.hasChildNodes();)Ot.appendChild(this._elements.wrapper.firstChild);this._elements.wrapper.replaceWith(Ot),this._elements.wrapper=Ot,this._data.style=s}get CSS(){return{baseBlock:this.api.styles.block,wrapper:"cdx-list",wrapperOrdered:"cdx-list--ordered",wrapperUnordered:"cdx-list--unordered",item:"cdx-list__item"}}set data(s){s||(s={}),this._data.style=s.style||this.settings.find(en=>en.default===!0).name,this._data.items=s.items||[];const Ot=this._elements.wrapper;Ot&&Ot.parentNode.replaceChild(this.render(),Ot)}get data(){this._data.items=[];const s=this._elements.wrapper.querySelectorAll(`.${this.CSS.item}`);for(let Ot=0;Ot<s.length;Ot++)s[Ot].innerHTML.replace("<br>"," ").trim()&&this._data.items.push(s[Ot].innerHTML);return this._data}_make(s,Ot=null,en={}){const tn=document.createElement(s);Array.isArray(Ot)?tn.classList.add(...Ot):Ot&&tn.classList.add(Ot);for(const nn in en)tn[nn]=en[nn];return tn}get currentItem(){let s=window.getSelection().anchorNode;return s.nodeType!==Node.ELEMENT_NODE&&(s=s.parentNode),s.closest(`.${this.CSS.item}`)}getOutofList(s){const Ot=this._elements.wrapper.querySelectorAll("."+this.CSS.item);if(Ot.length<2)return;const en=Ot[Ot.length-1],tn=this.currentItem;tn===en&&!en.textContent.trim().length&&(tn.parentElement.removeChild(tn),this.api.blocks.insert(),this.api.caret.setToBlock(this.api.blocks.getCurrentBlockIndex()),s.preventDefault(),s.stopPropagation())}backspace(s){const Ot=this._elements.wrapper.querySelectorAll("."+this.CSS.item),en=Ot[0];en&&Ot.length<2&&!en.innerHTML.replace("<br>"," ").trim()&&s.preventDefault()}selectItem(s){s.preventDefault();const Ot=window.getSelection(),en=Ot.anchorNode.parentNode,tn=en.closest("."+this.CSS.item),nn=new Range;nn.selectNodeContents(tn),Ot.removeAllRanges(),Ot.addRange(nn)}pasteHandler(s){const{tagName:Ot}=s;let en;switch(Ot){case"OL":en="ordered";break;case"UL":case"LI":en="unordered"}const tn={style:en,items:[]};if(Ot==="LI")tn.items=[s.innerHTML];else{const nn=Array.from(s.querySelectorAll("LI"));tn.items=nn.map(rn=>rn.innerHTML).filter(rn=>!!rn.trim())}return tn}}(function(){try{if(typeof document<"u"){var Nt=document.createElement("style");Nt.appendChild(document.createTextNode('.embed-tool--loading .embed-tool__caption{display:none}.embed-tool--loading .embed-tool__preloader{display:block}.embed-tool--loading .embed-tool__content{display:none}.embed-tool__preloader{display:none;position:relative;height:200px;box-sizing:border-box;border-radius:5px;border:1px solid #e6e9eb}.embed-tool__preloader:before{content:"";position:absolute;z-index:3;left:50%;top:50%;width:30px;height:30px;margin-top:-25px;margin-left:-15px;border-radius:50%;border:2px solid #cdd1e0;border-top-color:#388ae5;box-sizing:border-box;animation:embed-preloader-spin 2s infinite linear}.embed-tool__url{position:absolute;bottom:20px;left:50%;transform:translate(-50%);max-width:250px;color:#7b7e89;font-size:11px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.embed-tool__content{width:100%}.embed-tool__caption{margin-top:7px}.embed-tool__caption[contentEditable=true][data-placeholder]:before{position:absolute;content:attr(data-placeholder);color:#707684;font-weight:400;opacity:0}.embed-tool__caption[contentEditable=true][data-placeholder]:empty:before{opacity:1}.embed-tool__caption[contentEditable=true][data-placeholder]:empty:focus:before{opacity:0}@keyframes embed-preloader-spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}')),document.head.appendChild(Nt)}}catch(s){console.error("vite-plugin-css-injected-by-js",s)}})();const g$1={vimeo:{regex:/(?:http[s]?:\/\/)?(?:www.)?(?:player.)?vimeo\.co(?:.+\/([^\/]\d+)(?:#t=[\d]+)?s?$)/,embedUrl:"https://player.vimeo.com/video/<%= remote_id %>?title=0&byline=0",html:'<iframe style="width:100%;" height="320" frameborder="0"></iframe>',height:320,width:580},youtube:{regex:/(?:https?:\/\/)?(?:www\.)?(?:(?:youtu\.be\/)|(?:youtube\.com)\/(?:v\/|u\/\w\/|embed\/|watch))(?:(?:\?v=)?([^#&?=]*))?((?:[?&]\w*=\w*)*)/,embedUrl:"https://www.youtube.com/embed/<%= remote_id %>",html:'<iframe style="width:100%;" height="320" frameborder="0" allowfullscreen></iframe>',height:320,width:580,id:([Nt,s])=>{if(!s&&Nt)return Nt;const Ot={start:"start",end:"end",t:"start",time_continue:"start",list:"list"};return s=s.slice(1).split("&").map(en=>{const[tn,nn]=en.split("=");return!Nt&&tn==="v"?(Nt=nn,null):!Ot[tn]||nn==="LL"||nn.startsWith("RDMM")||nn.startsWith("FL")?null:`${Ot[tn]}=${nn}`}).filter(en=>!!en),Nt+"?"+s.join("&")}},coub:{regex:/https?:\/\/coub\.com\/view\/([^\/\?\&]+)/,embedUrl:"https://coub.com/embed/<%= remote_id %>",html:'<iframe style="width:100%;" height="320" frameborder="0" allowfullscreen></iframe>',height:320,width:580},vine:{regex:/https?:\/\/vine\.co\/v\/([^\/\?\&]+)/,embedUrl:"https://vine.co/v/<%= remote_id %>/embed/simple/",html:'<iframe style="width:100%;" height="320" frameborder="0" allowfullscreen></iframe>',height:320,width:580},imgur:{regex:/https?:\/\/(?:i\.)?imgur\.com.*\/([a-zA-Z0-9]+)(?:\.gifv)?/,embedUrl:"http://imgur.com/<%= remote_id %>/embed",html:'<iframe allowfullscreen="true" scrolling="no" id="imgur-embed-iframe-pub-<%= remote_id %>" class="imgur-embed-iframe-pub" style="height: 500px; width: 100%; border: 1px solid #000"></iframe>',height:500,width:540},gfycat:{regex:/https?:\/\/gfycat\.com(?:\/detail)?\/([a-zA-Z]+)/,embedUrl:"https://gfycat.com/ifr/<%= remote_id %>",html:`<iframe frameborder='0' scrolling='no' style="width:100%;" height='436' allowfullscreen ></iframe>`,height:436,width:580},"twitch-channel":{regex:/https?:\/\/www\.twitch\.tv\/([^\/\?\&]*)\/?$/,embedUrl:"https://player.twitch.tv/?channel=<%= remote_id %>",html:'<iframe frameborder="0" allowfullscreen="true" scrolling="no" height="366" style="width:100%;"></iframe>',height:366,width:600},"twitch-video":{regex:/https?:\/\/www\.twitch\.tv\/(?:[^\/\?\&]*\/v|videos)\/([0-9]*)/,embedUrl:"https://player.twitch.tv/?video=v<%= remote_id %>",html:'<iframe frameborder="0" allowfullscreen="true" scrolling="no" height="366" style="width:100%;"></iframe>',height:366,width:600},"yandex-music-album":{regex:/https?:\/\/music\.yandex\.ru\/album\/([0-9]*)\/?$/,embedUrl:"https://music.yandex.ru/iframe/#album/<%= remote_id %>/",html:'<iframe frameborder="0" style="border:none;width:540px;height:400px;" style="width:100%;" height="400"></iframe>',height:400,width:540},"yandex-music-track":{regex:/https?:\/\/music\.yandex\.ru\/album\/([0-9]*)\/track\/([0-9]*)/,embedUrl:"https://music.yandex.ru/iframe/#track/<%= remote_id %>/",html:'<iframe frameborder="0" style="border:none;width:540px;height:100px;" style="width:100%;" height="100"></iframe>',height:100,width:540,id:Nt=>Nt.join("/")},"yandex-music-playlist":{regex:/https?:\/\/music\.yandex\.ru\/users\/([^\/\?\&]*)\/playlists\/([0-9]*)/,embedUrl:"https://music.yandex.ru/iframe/#playlist/<%= remote_id %>/show/cover/description/",html:'<iframe frameborder="0" style="border:none;width:540px;height:400px;" width="540" height="400"></iframe>',height:400,width:540,id:Nt=>Nt.join("/")},codepen:{regex:/https?:\/\/codepen\.io\/([^\/\?\&]*)\/pen\/([^\/\?\&]*)/,embedUrl:"https://codepen.io/<%= remote_id %>?height=300&theme-id=0&default-tab=css,result&embed-version=2",html:"<iframe height='300' scrolling='no' frameborder='no' allowtransparency='true' allowfullscreen='true' style='width: 100%;'></iframe>",height:300,width:600,id:Nt=>Nt.join("/embed/")},instagram:{regex:/https?:\/\/www\.instagram\.com\/p\/([^\/\?\&]+)\/?.*/,embedUrl:"https://www.instagram.com/p/<%= remote_id %>/embed",html:'<iframe width="400" height="505" style="margin: 0 auto;" frameborder="0" scrolling="no" allowtransparency="true"></iframe>',height:505,width:400},twitter:{regex:/^https?:\/\/twitter\.com\/(?:#!\/)?(\w+)\/status(?:es)?\/(\d+?.*)?$/,embedUrl:"https://twitframe.com/show?url=https://twitter.com/<%= remote_id %>",html:'<iframe width="600" height="600" style="margin: 0 auto;" frameborder="0" scrolling="no" allowtransparency="true"></iframe>',height:300,width:600,id:Nt=>Nt.join("/status/")},pinterest:{regex:/https?:\/\/([^\/\?\&]*).pinterest.com\/pin\/([^\/\?\&]*)\/?$/,embedUrl:"https://assets.pinterest.com/ext/embed.html?id=<%= remote_id %>",html:"<iframe scrolling='no' frameborder='no' allowtransparency='true' allowfullscreen='true' style='width: 100%; min-height: 400px; max-height: 1000px;'></iframe>",id:Nt=>Nt[1]},facebook:{regex:/https?:\/\/www.facebook.com\/([^\/\?\&]*)\/(.*)/,embedUrl:"https://www.facebook.com/plugins/post.php?href=https://www.facebook.com/<%= remote_id %>&width=500",html:"<iframe scrolling='no' frameborder='no' allowtransparency='true' allowfullscreen='true' style='width: 100%; min-height: 500px; max-height: 1000px;'></iframe>",id:Nt=>Nt.join("/")},aparat:{regex:/(?:http[s]?:\/\/)?(?:www.)?aparat\.com\/v\/([^\/\?\&]+)\/?/,embedUrl:"https://www.aparat.com/video/video/embed/videohash/<%= remote_id %>/vt/frame",html:'<iframe width="600" height="300" style="margin: 0 auto;" frameborder="0" scrolling="no" allowtransparency="true"></iframe>',height:300,width:600},miro:{regex:/https:\/\/miro.com\/\S+(\S{12})\/(\S+)?/,embedUrl:"https://miro.com/app/live-embed/<%= remote_id %>",html:'<iframe width="700" height="500" style="margin: 0 auto;" allowFullScreen frameBorder="0" scrolling="no"></iframe>'},github:{regex:/https?:\/\/gist.github.com\/([^\/\?\&]*)\/([^\/\?\&]*)/,embedUrl:'data:text/html;charset=utf-8,<head><base target="_blank" /></head><body><script src="https://gist.github.com/<%= remote_id %>" ><\/script></body>',html:'<iframe width="100%" height="350" frameborder="0" style="margin: 0 auto;"></iframe>',height:300,width:600,id:Nt=>`${Nt.join("/")}.js`}};function u$1(Nt,s,Ot){var en,tn,nn,rn,on;s==null&&(s=100);function sn(){var ln=Date.now()-rn;ln<s&&ln>=0?en=setTimeout(sn,s-ln):(en=null,Ot||(on=Nt.apply(nn,tn),nn=tn=null))}var an=function(){nn=this,tn=arguments,rn=Date.now();var ln=Ot&&!en;return en||(en=setTimeout(sn,s)),ln&&(on=Nt.apply(nn,tn),nn=tn=null),on};return an.clear=function(){en&&(clearTimeout(en),en=null)},an.flush=function(){en&&(on=Nt.apply(nn,tn),nn=tn=null,clearTimeout(en),en=null)},an}u$1.debounce=u$1;var w=u$1;let m$1=class yr{constructor({data:s,api:Ot,readOnly:en}){this.api=Ot,this._data={},this.element=null,this.readOnly=en,this.data=s}set data(s){if(!(s instanceof Object))throw Error("Embed Tool data should be object");const{service:Ot,source:en,embed:tn,width:nn,height:rn,caption:on=""}=s;this._data={service:Ot||this.data.service,source:en||this.data.source,embed:tn||this.data.embed,width:nn||this.data.width,height:rn||this.data.height,caption:on||this.data.caption||""};const sn=this.element;sn&&sn.parentNode.replaceChild(this.render(),sn)}get data(){if(this.element){const s=this.element.querySelector(`.${this.api.styles.input}`);this._data.caption=s?s.innerHTML:""}return this._data}get CSS(){return{baseClass:this.api.styles.block,input:this.api.styles.input,container:"embed-tool",containerLoading:"embed-tool--loading",preloader:"embed-tool__preloader",caption:"embed-tool__caption",url:"embed-tool__url",content:"embed-tool__content"}}render(){if(!this.data.service){const on=document.createElement("div");return this.element=on,on}const{html:s}=yr.services[this.data.service],Ot=document.createElement("div"),en=document.createElement("div"),tn=document.createElement("template"),nn=this.createPreloader();Ot.classList.add(this.CSS.baseClass,this.CSS.container,this.CSS.containerLoading),en.classList.add(this.CSS.input,this.CSS.caption),Ot.appendChild(nn),en.contentEditable=!this.readOnly,en.dataset.placeholder=this.api.i18n.t("Enter a caption"),en.innerHTML=this.data.caption||"",tn.innerHTML=s,tn.content.firstChild.setAttribute("src",this.data.embed),tn.content.firstChild.classList.add(this.CSS.content);const rn=this.embedIsReady(Ot);return Ot.appendChild(tn.content.firstChild),Ot.appendChild(en),rn.then(()=>{Ot.classList.remove(this.CSS.containerLoading)}),this.element=Ot,Ot}createPreloader(){const s=document.createElement("preloader"),Ot=document.createElement("div");return Ot.textContent=this.data.source,s.classList.add(this.CSS.preloader),Ot.classList.add(this.CSS.url),s.appendChild(Ot),s}save(){return this.data}onPaste(s){const{key:Ot,data:en}=s.detail,{regex:tn,embedUrl:nn,width:rn,height:on,id:sn=cn=>cn.shift()}=yr.services[Ot],an=tn.exec(en).slice(1),ln=nn.replace(/<%= remote_id %>/g,sn(an));this.data={service:Ot,source:en,embed:ln,width:rn,height:on}}static prepare({config:s={}}){const{services:Ot={}}=s;let en=Object.entries(g$1);const tn=Object.entries(Ot).filter(([rn,on])=>typeof on=="boolean"&&on===!0).map(([rn])=>rn),nn=Object.entries(Ot).filter(([rn,on])=>typeof on=="object").filter(([rn,on])=>yr.checkServiceConfig(on)).map(([rn,on])=>{const{regex:sn,embedUrl:an,html:ln,height:cn,width:un,id:dn}=on;return[rn,{regex:sn,embedUrl:an,html:ln,height:cn,width:un,id:dn}]});tn.length&&(en=en.filter(([rn])=>tn.includes(rn))),en=en.concat(nn),yr.services=en.reduce((rn,[on,sn])=>on in rn?(rn[on]=Object.assign({},rn[on],sn),rn):(rn[on]=sn,rn),{}),yr.patterns=en.reduce((rn,[on,sn])=>(rn[on]=sn.regex,rn),{})}static checkServiceConfig(s){const{regex:Ot,embedUrl:en,html:tn,height:nn,width:rn,id:on}=s;let sn=Ot&&Ot instanceof RegExp&&en&&typeof en=="string"&&tn&&typeof tn=="string";return sn=sn&&(on!==void 0?on instanceof Function:!0),sn=sn&&(nn!==void 0?Number.isFinite(nn):!0),sn=sn&&(rn!==void 0?Number.isFinite(rn):!0),sn}static get pasteConfig(){return{patterns:yr.patterns}}static get isReadOnlySupported(){return!0}embedIsReady(s){let Ot=null;return new Promise((en,tn)=>{Ot=new MutationObserver(w.debounce(en,450)),Ot.observe(s,{childList:!0,subtree:!0})}).then(()=>{Ot.disconnect()})}};var bundle$7={exports:{}};(function(Nt,s){(function(Ot,en){Nt.exports=en()})(window,function(){return function(Ot){var en={};function tn(nn){if(en[nn])return en[nn].exports;var rn=en[nn]={i:nn,l:!1,exports:{}};return Ot[nn].call(rn.exports,rn,rn.exports,tn),rn.l=!0,rn.exports}return tn.m=Ot,tn.c=en,tn.d=function(nn,rn,on){tn.o(nn,rn)||Object.defineProperty(nn,rn,{enumerable:!0,get:on})},tn.r=function(nn){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(nn,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(nn,"__esModule",{value:!0})},tn.t=function(nn,rn){if(1&rn&&(nn=tn(nn)),8&rn||4&rn&&typeof nn=="object"&&nn&&nn.__esModule)return nn;var on=Object.create(null);if(tn.r(on),Object.defineProperty(on,"default",{enumerable:!0,value:nn}),2&rn&&typeof nn!="string")for(var sn in nn)tn.d(on,sn,(function(an){return nn[an]}).bind(null,sn));return on},tn.n=function(nn){var rn=nn&&nn.__esModule?function(){return nn.default}:function(){return nn};return tn.d(rn,"a",rn),rn},tn.o=function(nn,rn){return Object.prototype.hasOwnProperty.call(nn,rn)},tn.p="/",tn(tn.s=0)}([function(Ot,en,tn){function nn(sn){return(nn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(an){return typeof an}:function(an){return an&&typeof Symbol=="function"&&an.constructor===Symbol&&an!==Symbol.prototype?"symbol":typeof an})(sn)}function rn(sn,an){for(var ln=0;ln<an.length;ln++){var cn=an[ln];cn.enumerable=cn.enumerable||!1,cn.configurable=!0,"value"in cn&&(cn.writable=!0),Object.defineProperty(sn,cn.key,cn)}}tn(1).toString();/**
 * Header block for the Editor.js.
 *
 * @author CodeX (team@ifmo.su)
 * @copyright CodeX 2018
 * @license MIT
 * @version 2.0.0
 */var on=function(){function sn(un){var dn=un.data,hn=un.config,fn=un.api,mn=un.readOnly;(function(gn,pn){if(!(gn instanceof pn))throw new TypeError("Cannot call a class as a function")})(this,sn),this.api=fn,this.readOnly=mn,this._CSS={block:this.api.styles.block,settingsButton:this.api.styles.settingsButton,settingsButtonActive:this.api.styles.settingsButtonActive,wrapper:"ce-header",alignment:{left:"ce-header--left",center:"ce-header--center",right:"ce-header--right",justify:"ce-header--justify"}},this.CSS={baseClass:this.api.styles.block,loading:this.api.styles.loader,input:this.api.styles.input,settingsButton:this.api.styles.settingsButton,settingsButtonActive:this.api.styles.settingsButtonActive},this.inlineToolSettings=[{name:"left",icon:'<svg xmlns="http://www.w3.org/2000/svg" id="Layer" enable-background="new 0 0 64 64" height="20" viewBox="0 0 64 64" width="20"><path d="m54 8h-44c-1.104 0-2 .896-2 2s.896 2 2 2h44c1.104 0 2-.896 2-2s-.896-2-2-2z"/><path d="m54 52h-44c-1.104 0-2 .896-2 2s.896 2 2 2h44c1.104 0 2-.896 2-2s-.896-2-2-2z"/><path d="m10 23h28c1.104 0 2-.896 2-2s-.896-2-2-2h-28c-1.104 0-2 .896-2 2s.896 2 2 2z"/><path d="m54 30h-44c-1.104 0-2 .896-2 2s.896 2 2 2h44c1.104 0 2-.896 2-2s-.896-2-2-2z"/><path d="m10 45h28c1.104 0 2-.896 2-2s-.896-2-2-2h-28c-1.104 0-2 .896-2 2s.896 2 2 2z"/></svg>'},{name:"center",icon:'<svg xmlns="http://www.w3.org/2000/svg" id="Layer" enable-background="new 0 0 64 64" height="20" viewBox="0 0 64 64" width="20"><path d="m54 8h-44c-1.104 0-2 .896-2 2s.896 2 2 2h44c1.104 0 2-.896 2-2s-.896-2-2-2z"/><path d="m54 52h-44c-1.104 0-2 .896-2 2s.896 2 2 2h44c1.104 0 2-.896 2-2s-.896-2-2-2z"/><path d="m46 23c1.104 0 2-.896 2-2s-.896-2-2-2h-28c-1.104 0-2 .896-2 2s.896 2 2 2z"/><path d="m54 30h-44c-1.104 0-2 .896-2 2s.896 2 2 2h44c1.104 0 2-.896 2-2s-.896-2-2-2z"/><path d="m46 45c1.104 0 2-.896 2-2s-.896-2-2-2h-28c-1.104 0-2 .896-2 2s.896 2 2 2z"/></svg>'},{name:"right",icon:'<svg xmlns="http://www.w3.org/2000/svg" id="Layer" enable-background="new 0 0 64 64" height="20" viewBox="0 0 64 64" width="20"><path d="m54 8h-44c-1.104 0-2 .896-2 2s.896 2 2 2h44c1.104 0 2-.896 2-2s-.896-2-2-2z"/><path d="m54 52h-44c-1.104 0-2 .896-2 2s.896 2 2 2h44c1.104 0 2-.896 2-2s-.896-2-2-2z"/><path d="m54 19h-28c-1.104 0-2 .896-2 2s.896 2 2 2h28c1.104 0 2-.896 2-2s-.896-2-2-2z"/><path d="m54 30h-44c-1.104 0-2 .896-2 2s.896 2 2 2h44c1.104 0 2-.896 2-2s-.896-2-2-2z"/><path d="m54 41h-28c-1.104 0-2 .896-2 2s.896 2 2 2h28c1.104 0 2-.896 2-2s-.896-2-2-2z"/></svg>'},{name:"justify",icon:'<svg viewBox="0 0 64 64" width="20" height="20"><path d="m54 8h-44c-1.104 0-2 .896-2 2s.896 2 2 2h44c1.104 0 2-.896 2-2s-.896-2-2-2z"></path><path d="m54 52h-44c-1.104 0-2 .896-2 2s.896 2 2 2h44c1.104 0 2-.896 2-2s-.896-2-2-2z"></path><path d="M 52.867 19 L 10.914 19 C 9.26 19 7.918 19.896 7.918 21 C 7.918 22.104 9.26 23 10.914 23 L 52.867 23 C 54.522 23 55.863 22.104 55.863 21 C 55.863 19.896 54.522 19 52.867 19 Z" style=""></path><path d="m54 30h-44c-1.104 0-2 .896-2 2s.896 2 2 2h44c1.104 0 2-.896 2-2s-.896-2-2-2z"></path><path d="M 52.779 41 L 11.113 41 C 9.469 41 8.136 41.896 8.136 43 C 8.136 44.104 9.469 45 11.113 45 L 52.779 45 C 54.421 45 55.754 44.104 55.754 43 C 55.754 41.896 54.421 41 52.779 41 Z" style=""></path></svg>'}],this._settings=hn,this._data=this.normalizeData(dn),this.settingsButtons=[],this._element=this.getTag()}var an,ln,cn;return an=sn,cn=[{key:"conversionConfig",get:function(){return{export:"text",import:"text"}}},{key:"sanitize",get:function(){return{level:!1,text:{}}}},{key:"isReadOnlySupported",get:function(){return!0}},{key:"pasteConfig",get:function(){return{tags:["H1","H2","H3","H4","H5","H6"]}}},{key:"ALIGNMENTS",get:function(){return{left:"left",center:"center",right:"right",justify:"justify"}}},{key:"DEFAULT_ALIGNMENT",get:function(){return sn.ALIGNMENTS.left}},{key:"toolbox",get:function(){return{icon:tn(6).default,title:"Heading"}}}],(ln=[{key:"normalizeData",value:function(un){var dn={};return nn(un)!=="object"&&(un={}),dn.text=un.text||"",dn.level=parseInt(un.level)||this.defaultLevel.number,dn.alignment=un.alignment||sn.DEFAULT_ALIGNMENT,dn}},{key:"render",value:function(){return this._element}},{key:"_toggleTune",value:function(un){this._data.alignment=un}},{key:"renderSettings",value:function(){var un=this,dn=document.createElement("DIV");return this.levels.length<=1||(this.inlineToolSettings.map(function(hn){var fn=document.createElement("div");return fn.classList.add(un._CSS.settingsButton),fn.innerHTML=hn.icon,fn.classList.toggle(un.CSS.settingsButtonActive,hn.name===un.data.alignment),dn.appendChild(fn),fn}).forEach(function(hn,fn,mn){hn.addEventListener("click",function(){un._toggleTune(un.inlineToolSettings[fn].name),mn.forEach(function(gn,pn){var _n=un.inlineToolSettings[pn].name;gn.classList.toggle(un.CSS.settingsButtonActive,_n===un.data.alignment),un._element.classList.toggle(un._CSS.alignment[_n],_n===un.data.alignment)})})}),this.levels.forEach(function(hn){var fn=document.createElement("SPAN");fn.classList.add(un._CSS.settingsButton),un.currentLevel.number===hn.number&&fn.classList.add(un._CSS.settingsButtonActive),fn.innerHTML=hn.svg,fn.dataset.level=hn.number,fn.addEventListener("click",function(){un.setLevel(hn.number)}),dn.appendChild(fn),un.settingsButtons.push(fn)})),dn}},{key:"setLevel",value:function(un){var dn=this;this.data={level:un,text:this.data.text,alignment:this.data.alignment},this.settingsButtons.forEach(function(hn){hn.classList.toggle(dn._CSS.settingsButtonActive,parseInt(hn.dataset.level)===un)})}},{key:"merge",value:function(un){var dn={text:this.data.text+un.text,level:this.data.level,alignment:this.data.alignment};this.data=dn}},{key:"validate",value:function(un){return un.text.trim()!==""}},{key:"save",value:function(un){return{text:un.innerHTML,level:this.currentLevel.number,alignment:this.data.alignment}}},{key:"getTag",value:function(){var un=document.createElement(this.currentLevel.tag);return un.innerHTML=this._data.text||"",un.classList.add(this._CSS.wrapper,this._CSS.alignment[this._data.alignment]),un.contentEditable=this.readOnly?"false":"true",un.dataset.placeholder=this.api.i18n.t(this._settings.placeholder||""),un}},{key:"onPaste",value:function(un){var dn=un.detail.data,hn=this.defaultLevel.number;switch(dn.tagName){case"H1":hn=1;break;case"H2":hn=2;break;case"H3":hn=3;break;case"H4":hn=4;break;case"H5":hn=5;break;case"H6":hn=6}this._settings.levels&&(hn=this._settings.levels.reduce(function(fn,mn){return Math.abs(mn-hn)<Math.abs(fn-hn)?mn:fn})),this.data={level:hn,text:dn.innerHTML,alignment:this._settings.defaultAlignment||sn.DEFAULT_ALIGNMENT}}},{key:"data",get:function(){return this._data.text=this._element.innerHTML,this._data.level=this.currentLevel.number,this._data.alignment=this._data.alignment||this._settings.defaultAlignment||sn.DEFAULT_ALIGNMENT,this._data},set:function(un){if(this._data=this.normalizeData(un),un.level!==void 0&&this._element.parentNode){var dn=this.getTag();dn.innerHTML=this._element.innerHTML,this._element.parentNode.replaceChild(dn,this._element),this._element=dn}un.text!==void 0&&(this._element.innerHTML=this._data.text||"")}},{key:"currentLevel",get:function(){var un=this,dn=this.levels.find(function(hn){return hn.number===un._data.level});return dn||(dn=this.defaultLevel),dn}},{key:"defaultLevel",get:function(){var un=this;if(this._settings.defaultLevel){var dn=this.levels.find(function(hn){return hn.number===un._settings.defaultLevel});if(dn)return dn;console.warn("('-') Heading Tool: the default level specified was not found in available levels")}return this.levels[1]}},{key:"levels",get:function(){var un=this,dn=[{number:1,tag:"H1",svg:'<svg width="16" height="14" xmlns="http://www.w3.org/2000/svg"><path d="M2.14 1.494V4.98h4.62V1.494c0-.498.098-.871.293-1.12A.927.927 0 0 1 7.82 0c.322 0 .583.123.782.37.2.246.3.62.3 1.124v9.588c0 .503-.101.88-.303 1.128a.957.957 0 0 1-.779.374.921.921 0 0 1-.77-.378c-.193-.251-.29-.626-.29-1.124V6.989H2.14v4.093c0 .503-.1.88-.302 1.128a.957.957 0 0 1-.778.374.921.921 0 0 1-.772-.378C.096 11.955 0 11.58 0 11.082V1.494C0 .996.095.623.285.374A.922.922 0 0 1 1.06 0c.321 0 .582.123.782.37.199.246.299.62.299 1.124zm11.653 9.985V5.27c-1.279.887-2.14 1.33-2.583 1.33a.802.802 0 0 1-.563-.228.703.703 0 0 1-.245-.529c0-.232.08-.402.241-.511.161-.11.446-.25.854-.424.61-.259 1.096-.532 1.462-.818a5.84 5.84 0 0 0 .97-.962c.282-.355.466-.573.552-.655.085-.082.246-.123.483-.123.267 0 .481.093.642.28.161.186.242.443.242.77v7.813c0 .914-.345 1.371-1.035 1.371-.307 0-.554-.093-.74-.28-.187-.186-.28-.461-.28-.825z"/></svg>'},{number:2,tag:"H2",svg:'<svg width="18" height="14" xmlns="http://www.w3.org/2000/svg"><path d="M2.152 1.494V4.98h4.646V1.494c0-.498.097-.871.293-1.12A.934.934 0 0 1 7.863 0c.324 0 .586.123.786.37.2.246.301.62.301 1.124v9.588c0 .503-.101.88-.304 1.128a.964.964 0 0 1-.783.374.928.928 0 0 1-.775-.378c-.194-.251-.29-.626-.29-1.124V6.989H2.152v4.093c0 .503-.101.88-.304 1.128a.964.964 0 0 1-.783.374.928.928 0 0 1-.775-.378C.097 11.955 0 11.58 0 11.082V1.494C0 .996.095.623.286.374A.929.929 0 0 1 1.066 0c.323 0 .585.123.786.37.2.246.3.62.3 1.124zm10.99 9.288h3.527c.351 0 .62.072.804.216.185.144.277.34.277.588 0 .22-.073.408-.22.56-.146.154-.368.23-.665.23h-4.972c-.338 0-.601-.093-.79-.28a.896.896 0 0 1-.284-.659c0-.162.06-.377.182-.645s.255-.478.399-.631a38.617 38.617 0 0 1 1.621-1.598c.482-.444.827-.735 1.034-.875.369-.261.676-.523.922-.787.245-.263.432-.534.56-.81.129-.278.193-.549.193-.815 0-.288-.069-.546-.206-.773a1.428 1.428 0 0 0-.56-.53 1.618 1.618 0 0 0-.774-.19c-.59 0-1.054.26-1.392.777-.045.068-.12.252-.226.554-.106.302-.225.534-.358.696-.133.162-.328.243-.585.243a.76.76 0 0 1-.56-.223c-.149-.148-.223-.351-.223-.608 0-.31.07-.635.21-.972.139-.338.347-.645.624-.92a3.093 3.093 0 0 1 1.054-.665c.426-.169.924-.253 1.496-.253.69 0 1.277.108 1.764.324.315.144.592.343.83.595.24.252.425.544.558.875.133.33.2.674.2 1.03 0 .558-.14 1.066-.416 1.523-.277.457-.56.815-.848 1.074-.288.26-.771.666-1.45 1.22-.677.554-1.142.984-1.394 1.29a3.836 3.836 0 0 0-.331.44z"/></svg>'},{number:3,tag:"H3",svg:'<svg width="18" height="14" xmlns="http://www.w3.org/2000/svg"><path d="M2.152 1.494V4.98h4.646V1.494c0-.498.097-.871.293-1.12A.934.934 0 0 1 7.863 0c.324 0 .586.123.786.37.2.246.301.62.301 1.124v9.588c0 .503-.101.88-.304 1.128a.964.964 0 0 1-.783.374.928.928 0 0 1-.775-.378c-.194-.251-.29-.626-.29-1.124V6.989H2.152v4.093c0 .503-.101.88-.304 1.128a.964.964 0 0 1-.783.374.928.928 0 0 1-.775-.378C.097 11.955 0 11.58 0 11.082V1.494C0 .996.095.623.286.374A.929.929 0 0 1 1.066 0c.323 0 .585.123.786.37.2.246.3.62.3 1.124zm11.61 4.919c.418 0 .778-.123 1.08-.368.301-.245.452-.597.452-1.055 0-.35-.12-.65-.36-.902-.241-.252-.566-.378-.974-.378-.277 0-.505.038-.684.116a1.1 1.1 0 0 0-.426.306 2.31 2.31 0 0 0-.296.49c-.093.2-.178.388-.255.565a.479.479 0 0 1-.245.225.965.965 0 0 1-.409.081.706.706 0 0 1-.5-.22c-.152-.148-.228-.345-.228-.59 0-.236.071-.484.214-.745a2.72 2.72 0 0 1 .627-.746 3.149 3.149 0 0 1 1.024-.568 4.122 4.122 0 0 1 1.368-.214c.44 0 .842.06 1.205.18.364.12.679.294.947.52.267.228.47.49.606.79.136.3.204.622.204.967 0 .454-.099.843-.296 1.168-.198.324-.48.64-.848.95.354.19.653.408.895.653.243.245.426.516.548.813.123.298.184.619.184.964 0 .413-.083.812-.248 1.198-.166.386-.41.73-.732 1.031a3.49 3.49 0 0 1-1.147.708c-.443.17-.932.256-1.467.256a3.512 3.512 0 0 1-1.464-.293 3.332 3.332 0 0 1-1.699-1.64c-.142-.314-.214-.573-.214-.777 0-.263.085-.475.255-.636a.89.89 0 0 1 .637-.242c.127 0 .25.037.367.112a.53.53 0 0 1 .232.27c.236.63.489 1.099.759 1.405.27.306.65.46 1.14.46a1.714 1.714 0 0 0 1.46-.824c.17-.273.256-.588.256-.947 0-.53-.145-.947-.436-1.249-.29-.302-.694-.453-1.212-.453-.09 0-.231.01-.422.028-.19.018-.313.027-.367.027-.25 0-.443-.062-.579-.187-.136-.125-.204-.299-.204-.521 0-.218.081-.394.245-.528.163-.134.406-.2.728-.2h.28z"/></svg>'},{number:4,tag:"H4",svg:'<svg width="20" height="14" xmlns="http://www.w3.org/2000/svg"><path d="M2.152 1.494V4.98h4.646V1.494c0-.498.097-.871.293-1.12A.934.934 0 0 1 7.863 0c.324 0 .586.123.786.37.2.246.301.62.301 1.124v9.588c0 .503-.101.88-.304 1.128a.964.964 0 0 1-.783.374.928.928 0 0 1-.775-.378c-.194-.251-.29-.626-.29-1.124V6.989H2.152v4.093c0 .503-.101.88-.304 1.128a.964.964 0 0 1-.783.374.928.928 0 0 1-.775-.378C.097 11.955 0 11.58 0 11.082V1.494C0 .996.095.623.286.374A.929.929 0 0 1 1.066 0c.323 0 .585.123.786.37.2.246.3.62.3 1.124zm13.003 10.09v-1.252h-3.38c-.427 0-.746-.097-.96-.29-.213-.193-.32-.456-.32-.788 0-.085.016-.171.048-.259.031-.088.078-.18.141-.276.063-.097.128-.19.195-.28.068-.09.15-.2.25-.33l3.568-4.774a5.44 5.44 0 0 1 .576-.683.763.763 0 0 1 .542-.212c.682 0 1.023.39 1.023 1.171v5.212h.29c.346 0 .623.047.832.142.208.094.313.3.313.62 0 .26-.086.45-.256.568-.17.12-.427.179-.768.179h-.41v1.252c0 .346-.077.603-.23.771-.152.168-.356.253-.612.253a.78.78 0 0 1-.61-.26c-.154-.173-.232-.427-.232-.764zm-2.895-2.76h2.895V4.91L12.26 8.823z"/></svg>'},{number:5,tag:"H5",svg:'<svg width="18" height="14" xmlns="http://www.w3.org/2000/svg"><path d="M2.152 1.494V4.98h4.646V1.494c0-.498.097-.871.293-1.12A.934.934 0 0 1 7.863 0c.324 0 .586.123.786.37.2.246.301.62.301 1.124v9.588c0 .503-.101.88-.304 1.128a.964.964 0 0 1-.783.374.928.928 0 0 1-.775-.378c-.194-.251-.29-.626-.29-1.124V6.989H2.152v4.093c0 .503-.101.88-.304 1.128a.964.964 0 0 1-.783.374.928.928 0 0 1-.775-.378C.097 11.955 0 11.58 0 11.082V1.494C0 .996.095.623.286.374A.929.929 0 0 1 1.066 0c.323 0 .585.123.786.37.2.246.3.62.3 1.124zm14.16 2.645h-3.234l-.388 2.205c.644-.344 1.239-.517 1.783-.517.436 0 .843.082 1.222.245.38.164.712.39.998.677.286.289.51.63.674 1.025.163.395.245.82.245 1.273 0 .658-.148 1.257-.443 1.797-.295.54-.72.97-1.276 1.287-.556.318-1.197.477-1.923.477-.813 0-1.472-.15-1.978-.45-.506-.3-.865-.643-1.076-1.031-.21-.388-.316-.727-.316-1.018 0-.177.073-.345.22-.504a.725.725 0 0 1 .556-.238c.381 0 .665.22.85.66.182.404.427.719.736.943.309.225.654.337 1.035.337.35 0 .656-.09.919-.272.263-.182.466-.431.61-.749.142-.318.214-.678.214-1.082 0-.436-.078-.808-.232-1.117a1.607 1.607 0 0 0-.62-.69 1.674 1.674 0 0 0-.864-.229c-.39 0-.67.048-.837.143-.168.095-.41.262-.725.5-.316.239-.576.358-.78.358a.843.843 0 0 1-.592-.242c-.173-.16-.259-.344-.259-.548 0-.022.025-.177.075-.463l.572-3.26c.063-.39.181-.675.354-.852.172-.177.454-.265.844-.265h3.595c.708 0 1.062.27 1.062.81a.711.711 0 0 1-.26.572c-.172.145-.426.218-.762.218z"/></svg>'},{number:6,tag:"H6",svg:'<svg width="18" height="14" xmlns="http://www.w3.org/2000/svg"><path d="M2.152 1.494V4.98h4.646V1.494c0-.498.097-.871.293-1.12A.934.934 0 0 1 7.863 0c.324 0 .586.123.786.37.2.246.301.62.301 1.124v9.588c0 .503-.101.88-.304 1.128a.964.964 0 0 1-.783.374.928.928 0 0 1-.775-.378c-.194-.251-.29-.626-.29-1.124V6.989H2.152v4.093c0 .503-.101.88-.304 1.128a.964.964 0 0 1-.783.374.928.928 0 0 1-.775-.378C.097 11.955 0 11.58 0 11.082V1.494C0 .996.095.623.286.374A.929.929 0 0 1 1.066 0c.323 0 .585.123.786.37.2.246.3.62.3 1.124zM12.53 7.058a3.093 3.093 0 0 1 1.004-.814 2.734 2.734 0 0 1 1.214-.264c.43 0 .827.08 1.19.24.365.161.684.39.957.686.274.296.485.645.635 1.048a3.6 3.6 0 0 1 .223 1.262c0 .637-.145 1.216-.437 1.736-.292.52-.699.926-1.221 1.218-.522.292-1.114.438-1.774.438-.76 0-1.416-.186-1.967-.557-.552-.37-.974-.919-1.265-1.645-.292-.726-.438-1.613-.438-2.662 0-.855.088-1.62.265-2.293.176-.674.43-1.233.76-1.676.33-.443.73-.778 1.2-1.004.47-.226 1.006-.339 1.608-.339.579 0 1.089.113 1.53.34.44.225.773.506.997.84.224.335.335.656.335.964 0 .185-.07.354-.21.505a.698.698 0 0 1-.536.227.874.874 0 0 1-.529-.18 1.039 1.039 0 0 1-.36-.498 1.42 1.42 0 0 0-.495-.655 1.3 1.3 0 0 0-.786-.247c-.24 0-.479.069-.716.207a1.863 1.863 0 0 0-.6.56c-.33.479-.525 1.333-.584 2.563zm1.832 4.213c.456 0 .834-.186 1.133-.56.298-.373.447-.862.447-1.468 0-.412-.07-.766-.21-1.062a1.584 1.584 0 0 0-.577-.678 1.47 1.47 0 0 0-.807-.234c-.28 0-.548.074-.804.224-.255.149-.461.365-.617.647a2.024 2.024 0 0 0-.234.994c0 .61.158 1.12.475 1.527.316.407.714.61 1.194.61z"/></svg>'}];return this._settings.levels?dn.filter(function(hn){return un._settings.levels.includes(hn.number)}):dn}}])&&rn(an.prototype,ln),cn&&rn(an,cn),sn}();Ot.exports=on},function(Ot,en,tn){var nn=tn(2);typeof nn=="string"&&(nn=[[Ot.i,nn,""]]);var rn={hmr:!0,transform:void 0,insertInto:void 0};tn(4)(nn,rn),nn.locals&&(Ot.exports=nn.locals)},function(Ot,en,tn){(Ot.exports=tn(3)(!1)).push([Ot.i,`/**\r
 * Plugin styles\r
 */\r
.ce-header {\r
  padding: 0.6em 0 3px;\r
  margin: 0;\r
  line-height: 1.25em;\r
  outline: none;\r
}\r
\r
.ce-header p,\r
.ce-header div {\r
  padding: 0 !important;\r
  margin: 0 !important;\r
}\r
\r
/**\r
 * Styles for Plugin icon in Toolbar\r
 */\r
.ce-header__icon {\r
}\r
\r
.ce-header[contentEditable="true"][data-placeholder]::before {\r
  position: absolute;\r
  content: attr(data-placeholder);\r
  color: #707684;\r
  font-weight: normal;\r
  display: none;\r
  cursor: text;\r
}\r
\r
.ce-header[contentEditable="true"][data-placeholder]:empty::before {\r
  display: block;\r
}\r
\r
.ce-header[contentEditable="true"][data-placeholder]:empty:focus::before {\r
  display: none;\r
}\r
\r
/* Alignment*/\r
.ce-header--right {\r
  text-align: right;\r
}\r
.ce-header--center {\r
  text-align: center;\r
}\r
.ce-header--left {\r
  text-align: left;\r
}\r
.ce-header--justify {\r
  text-align: justify;\r
}\r
`,""])},function(Ot,en){Ot.exports=function(tn){var nn=[];return nn.toString=function(){return this.map(function(rn){var on=function(sn,an){var ln=sn[1]||"",cn=sn[3];if(!cn)return ln;if(an&&typeof btoa=="function"){var un=(hn=cn,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(hn))))+" */"),dn=cn.sources.map(function(fn){return"/*# sourceURL="+cn.sourceRoot+fn+" */"});return[ln].concat(dn).concat([un]).join(`
`)}var hn;return[ln].join(`
`)}(rn,tn);return rn[2]?"@media "+rn[2]+"{"+on+"}":on}).join("")},nn.i=function(rn,on){typeof rn=="string"&&(rn=[[null,rn,""]]);for(var sn={},an=0;an<this.length;an++){var ln=this[an][0];typeof ln=="number"&&(sn[ln]=!0)}for(an=0;an<rn.length;an++){var cn=rn[an];typeof cn[0]=="number"&&sn[cn[0]]||(on&&!cn[2]?cn[2]=on:on&&(cn[2]="("+cn[2]+") and ("+on+")"),nn.push(cn))}},nn}},function(Ot,en,tn){var nn,rn,on={},sn=(nn=function(){return window&&document&&document.all&&!window.atob},function(){return rn===void 0&&(rn=nn.apply(this,arguments)),rn}),an=function(An){return document.querySelector(An)},ln=function(An){var Rn={};return function(Nn){if(typeof Nn=="function")return Nn();if(Rn[Nn]===void 0){var Vn=an.call(this,Nn);if(window.HTMLIFrameElement&&Vn instanceof window.HTMLIFrameElement)try{Vn=Vn.contentDocument.head}catch{Vn=null}Rn[Nn]=Vn}return Rn[Nn]}}(),cn=null,un=0,dn=[],hn=tn(5);function fn(An,Rn){for(var Nn=0;Nn<An.length;Nn++){var Vn=An[Nn],$n=on[Vn.id];if($n){$n.refs++;for(var jn=0;jn<$n.parts.length;jn++)$n.parts[jn](Vn.parts[jn]);for(;jn<Vn.parts.length;jn++)$n.parts.push(bn(Vn.parts[jn],Rn))}else{var Ln=[];for(jn=0;jn<Vn.parts.length;jn++)Ln.push(bn(Vn.parts[jn],Rn));on[Vn.id]={id:Vn.id,refs:1,parts:Ln}}}}function mn(An,Rn){for(var Nn=[],Vn={},$n=0;$n<An.length;$n++){var jn=An[$n],Ln=Rn.base?jn[0]+Rn.base:jn[0],Pn={css:jn[1],media:jn[2],sourceMap:jn[3]};Vn[Ln]?Vn[Ln].parts.push(Pn):Nn.push(Vn[Ln]={id:Ln,parts:[Pn]})}return Nn}function gn(An,Rn){var Nn=ln(An.insertInto);if(!Nn)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var Vn=dn[dn.length-1];if(An.insertAt==="top")Vn?Vn.nextSibling?Nn.insertBefore(Rn,Vn.nextSibling):Nn.appendChild(Rn):Nn.insertBefore(Rn,Nn.firstChild),dn.push(Rn);else if(An.insertAt==="bottom")Nn.appendChild(Rn);else{if(typeof An.insertAt!="object"||!An.insertAt.before)throw new Error(`[Style Loader]

 Invalid value for parameter 'insertAt' ('options.insertAt') found.
 Must be 'top', 'bottom', or Object.
 (https://github.com/webpack-contrib/style-loader#insertat)
`);var $n=ln(An.insertInto+" "+An.insertAt.before);Nn.insertBefore(Rn,$n)}}function pn(An){if(An.parentNode===null)return!1;An.parentNode.removeChild(An);var Rn=dn.indexOf(An);Rn>=0&&dn.splice(Rn,1)}function _n(An){var Rn=document.createElement("style");return An.attrs.type===void 0&&(An.attrs.type="text/css"),vn(Rn,An.attrs),gn(An,Rn),Rn}function vn(An,Rn){Object.keys(Rn).forEach(function(Nn){An.setAttribute(Nn,Rn[Nn])})}function bn(An,Rn){var Nn,Vn,$n,jn;if(Rn.transform&&An.css){if(!(jn=Rn.transform(An.css)))return function(){};An.css=jn}if(Rn.singleton){var Ln=un++;Nn=cn||(cn=_n(Rn)),Vn=kn.bind(null,Nn,Ln,!1),$n=kn.bind(null,Nn,Ln,!0)}else An.sourceMap&&typeof URL=="function"&&typeof URL.createObjectURL=="function"&&typeof URL.revokeObjectURL=="function"&&typeof Blob=="function"&&typeof btoa=="function"?(Nn=function(Pn){var Bn=document.createElement("link");return Pn.attrs.type===void 0&&(Pn.attrs.type="text/css"),Pn.attrs.rel="stylesheet",vn(Bn,Pn.attrs),gn(Pn,Bn),Bn}(Rn),Vn=In.bind(null,Nn,Rn),$n=function(){pn(Nn),Nn.href&&URL.revokeObjectURL(Nn.href)}):(Nn=_n(Rn),Vn=En.bind(null,Nn),$n=function(){pn(Nn)});return Vn(An),function(Pn){if(Pn){if(Pn.css===An.css&&Pn.media===An.media&&Pn.sourceMap===An.sourceMap)return;Vn(An=Pn)}else $n()}}Ot.exports=function(An,Rn){if(typeof DEBUG<"u"&&DEBUG&&typeof document!="object")throw new Error("The style-loader cannot be used in a non-browser environment");(Rn=Rn||{}).attrs=typeof Rn.attrs=="object"?Rn.attrs:{},Rn.singleton||typeof Rn.singleton=="boolean"||(Rn.singleton=sn()),Rn.insertInto||(Rn.insertInto="head"),Rn.insertAt||(Rn.insertAt="bottom");var Nn=mn(An,Rn);return fn(Nn,Rn),function(Vn){for(var $n=[],jn=0;jn<Nn.length;jn++){var Ln=Nn[jn];(Pn=on[Ln.id]).refs--,$n.push(Pn)}for(Vn&&fn(mn(Vn,Rn),Rn),jn=0;jn<$n.length;jn++){var Pn;if((Pn=$n[jn]).refs===0){for(var Bn=0;Bn<Pn.parts.length;Bn++)Pn.parts[Bn]();delete on[Pn.id]}}}};var wn,Sn=(wn=[],function(An,Rn){return wn[An]=Rn,wn.filter(Boolean).join(`
`)});function kn(An,Rn,Nn,Vn){var $n=Nn?"":Vn.css;if(An.styleSheet)An.styleSheet.cssText=Sn(Rn,$n);else{var jn=document.createTextNode($n),Ln=An.childNodes;Ln[Rn]&&An.removeChild(Ln[Rn]),Ln.length?An.insertBefore(jn,Ln[Rn]):An.appendChild(jn)}}function En(An,Rn){var Nn=Rn.css,Vn=Rn.media;if(Vn&&An.setAttribute("media",Vn),An.styleSheet)An.styleSheet.cssText=Nn;else{for(;An.firstChild;)An.removeChild(An.firstChild);An.appendChild(document.createTextNode(Nn))}}function In(An,Rn,Nn){var Vn=Nn.css,$n=Nn.sourceMap,jn=Rn.convertToAbsoluteUrls===void 0&&$n;(Rn.convertToAbsoluteUrls||jn)&&(Vn=hn(Vn)),$n&&(Vn+=`
/*# sourceMappingURL=data:application/json;base64,`+btoa(unescape(encodeURIComponent(JSON.stringify($n))))+" */");var Ln=new Blob([Vn],{type:"text/css"}),Pn=An.href;An.href=URL.createObjectURL(Ln),Pn&&URL.revokeObjectURL(Pn)}},function(Ot,en){Ot.exports=function(tn){var nn=typeof window<"u"&&window.location;if(!nn)throw new Error("fixUrls requires window.location");if(!tn||typeof tn!="string")return tn;var rn=nn.protocol+"//"+nn.host,on=rn+nn.pathname.replace(/\/[^\/]*$/,"/");return tn.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(sn,an){var ln,cn=an.trim().replace(/^"(.*)"$/,function(un,dn){return dn}).replace(/^'(.*)'$/,function(un,dn){return dn});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(cn)?sn:(ln=cn.indexOf("//")===0?cn:cn.indexOf("/")===0?rn+cn:on+cn.replace(/^\.\//,""),"url("+JSON.stringify(ln)+")")})}},function(Ot,en,tn){tn.r(en),en.default=`<svg width="10" height="14" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 10 14">\r
  <path d="M7.6 8.15H2.25v4.525a1.125 1.125 0 0 1-2.25 0V1.125a1.125 1.125 0 1 1 2.25 0V5.9H7.6V1.125a1.125 1.125 0 0 1 2.25 0v11.55a1.125 1.125 0 0 1-2.25 0V8.15z"/>\r
</svg>\r
`}])})})(bundle$7);var bundleExports$7=bundle$7.exports;const Header=getDefaultExportFromCjs(bundleExports$7);var bundle$6={exports:{}};(function(Nt,s){(function(Ot,en){Nt.exports=en()})(window,function(){return function(Ot){var en={};function tn(nn){if(en[nn])return en[nn].exports;var rn=en[nn]={i:nn,l:!1,exports:{}};return Ot[nn].call(rn.exports,rn,rn.exports,tn),rn.l=!0,rn.exports}return tn.m=Ot,tn.c=en,tn.d=function(nn,rn,on){tn.o(nn,rn)||Object.defineProperty(nn,rn,{enumerable:!0,get:on})},tn.r=function(nn){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(nn,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(nn,"__esModule",{value:!0})},tn.t=function(nn,rn){if(1&rn&&(nn=tn(nn)),8&rn||4&rn&&typeof nn=="object"&&nn&&nn.__esModule)return nn;var on=Object.create(null);if(tn.r(on),Object.defineProperty(on,"default",{enumerable:!0,value:nn}),2&rn&&typeof nn!="string")for(var sn in nn)tn.d(on,sn,(function(an){return nn[an]}).bind(null,sn));return on},tn.n=function(nn){var rn=nn&&nn.__esModule?function(){return nn.default}:function(){return nn};return tn.d(rn,"a",rn),rn},tn.o=function(nn,rn){return Object.prototype.hasOwnProperty.call(nn,rn)},tn.p="/",tn(tn.s=0)}([function(Ot,en,tn){function nn(sn,an){for(var ln=0;ln<an.length;ln++){var cn=an[ln];cn.enumerable=cn.enumerable||!1,cn.configurable=!0,"value"in cn&&(cn.writable=!0),Object.defineProperty(sn,cn.key,cn)}}function rn(sn,an,ln){return an&&nn(sn.prototype,an),ln&&nn(sn,ln),sn}tn(1).toString();var on=function(){function sn(an){var ln=an.data,cn=an.config,un=an.api,dn=an.readOnly;(function(hn,fn){if(!(hn instanceof fn))throw new TypeError("Cannot call a class as a function")})(this,sn),this.api=un,this.config=cn,this.readOnly=dn,this._CSS={block:this.api.styles.block,wrapper:"ce-paragraph",alignment:{left:"ce-paragraph--left",center:"ce-paragraph--center",right:"ce-paragraph--right",justify:"ce-paragraph--justify"}},this.CSS={baseClass:this.api.styles.block,loading:this.api.styles.loader,input:this.api.styles.input,settingsButton:this.api.styles.settingsButton,settingsButtonActive:this.api.styles.settingsButtonActive},this.settings=[{name:"left",icon:'<svg xmlns="http://www.w3.org/2000/svg" id="Layer" enable-background="new 0 0 64 64" height="20" viewBox="0 0 64 64" width="20"><path d="m54 8h-44c-1.104 0-2 .896-2 2s.896 2 2 2h44c1.104 0 2-.896 2-2s-.896-2-2-2z"/><path d="m54 52h-44c-1.104 0-2 .896-2 2s.896 2 2 2h44c1.104 0 2-.896 2-2s-.896-2-2-2z"/><path d="m10 23h28c1.104 0 2-.896 2-2s-.896-2-2-2h-28c-1.104 0-2 .896-2 2s.896 2 2 2z"/><path d="m54 30h-44c-1.104 0-2 .896-2 2s.896 2 2 2h44c1.104 0 2-.896 2-2s-.896-2-2-2z"/><path d="m10 45h28c1.104 0 2-.896 2-2s-.896-2-2-2h-28c-1.104 0-2 .896-2 2s.896 2 2 2z"/></svg>'},{name:"center",icon:'<svg xmlns="http://www.w3.org/2000/svg" id="Layer" enable-background="new 0 0 64 64" height="20" viewBox="0 0 64 64" width="20"><path d="m54 8h-44c-1.104 0-2 .896-2 2s.896 2 2 2h44c1.104 0 2-.896 2-2s-.896-2-2-2z"/><path d="m54 52h-44c-1.104 0-2 .896-2 2s.896 2 2 2h44c1.104 0 2-.896 2-2s-.896-2-2-2z"/><path d="m46 23c1.104 0 2-.896 2-2s-.896-2-2-2h-28c-1.104 0-2 .896-2 2s.896 2 2 2z"/><path d="m54 30h-44c-1.104 0-2 .896-2 2s.896 2 2 2h44c1.104 0 2-.896 2-2s-.896-2-2-2z"/><path d="m46 45c1.104 0 2-.896 2-2s-.896-2-2-2h-28c-1.104 0-2 .896-2 2s.896 2 2 2z"/></svg>'},{name:"right",icon:'<svg xmlns="http://www.w3.org/2000/svg" id="Layer" enable-background="new 0 0 64 64" height="20" viewBox="0 0 64 64" width="20"><path d="m54 8h-44c-1.104 0-2 .896-2 2s.896 2 2 2h44c1.104 0 2-.896 2-2s-.896-2-2-2z"/><path d="m54 52h-44c-1.104 0-2 .896-2 2s.896 2 2 2h44c1.104 0 2-.896 2-2s-.896-2-2-2z"/><path d="m54 19h-28c-1.104 0-2 .896-2 2s.896 2 2 2h28c1.104 0 2-.896 2-2s-.896-2-2-2z"/><path d="m54 30h-44c-1.104 0-2 .896-2 2s.896 2 2 2h44c1.104 0 2-.896 2-2s-.896-2-2-2z"/><path d="m54 41h-28c-1.104 0-2 .896-2 2s.896 2 2 2h28c1.104 0 2-.896 2-2s-.896-2-2-2z"/></svg>'},{name:"justify",icon:'<svg viewBox="0 0 64 64" width="20" height="20"><path d="m54 8h-44c-1.104 0-2 .896-2 2s.896 2 2 2h44c1.104 0 2-.896 2-2s-.896-2-2-2z"></path><path d="m54 52h-44c-1.104 0-2 .896-2 2s.896 2 2 2h44c1.104 0 2-.896 2-2s-.896-2-2-2z"></path><path d="M 52.867 19 L 10.914 19 C 9.26 19 7.918 19.896 7.918 21 C 7.918 22.104 9.26 23 10.914 23 L 52.867 23 C 54.522 23 55.863 22.104 55.863 21 C 55.863 19.896 54.522 19 52.867 19 Z" style=""></path><path d="m54 30h-44c-1.104 0-2 .896-2 2s.896 2 2 2h44c1.104 0 2-.896 2-2s-.896-2-2-2z"></path><path d="M 52.779 41 L 11.113 41 C 9.469 41 8.136 41.896 8.136 43 C 8.136 44.104 9.469 45 11.113 45 L 52.779 45 C 54.421 45 55.754 44.104 55.754 43 C 55.754 41.896 54.421 41 52.779 41 Z" style=""></path></svg>'}],this.onKeyUp=this.onKeyUp.bind(this),this._placeholder=cn.placeholder?cn.placeholder:sn.DEFAULT_PLACEHOLDER,this._data={text:ln.text||"",alignment:ln.alignment||cn.defaultAlignment||sn.DEFAULT_ALIGNMENT},this._element=this.drawView(),this.data=ln,this._preserveBlank=cn.preserveBlank!==void 0&&cn.preserveBlank}return rn(sn,null,[{key:"DEFAULT_PLACEHOLDER",get:function(){return""}},{key:"ALIGNMENTS",get:function(){return{left:"left",center:"center",right:"right",justify:"justify"}}},{key:"isReadOnlySupported",get:function(){return!0}},{key:"DEFAULT_ALIGNMENT",get:function(){return sn.ALIGNMENTS.left}}]),rn(sn,[{key:"onKeyUp",value:function(an){an.code!=="Backspace"&&an.code!=="Delete"||this._element.textContent===""&&(this._element.innerHTML="")}},{key:"drawView",value:function(){var an=document.createElement("DIV");return an.classList.add(this._CSS.wrapper,this._CSS.block,this._CSS.alignment[this.data.alignment]),an.contentEditable=!this.readOnly,an.dataset.placeholder=this.api.i18n.t(this._placeholder),an.innerHTML=this.data.text,an.addEventListener("keyup",this.onKeyUp),an}},{key:"render",value:function(){return this._element}},{key:"merge",value:function(an){var ln={text:this.data.text+=an.text,alignment:this.data.alignment};this._element.innerHTML=this.data.text,this.data=ln}},{key:"validate",value:function(an){return!(an.text.trim()===""&&!this._preserveBlank)}},{key:"save",value:function(an){return Object.assign(this.data,{text:an.innerHTML})}},{key:"onPaste",value:function(an){var ln={text:an.detail.data.innerHTML,alignment:this.config.defaultAlignment||sn.DEFAULT_ALIGNMENT};this.data=ln}},{key:"renderSettings",value:function(){var an=this,ln=document.createElement("div");return this.settings.map(function(cn){var un=document.createElement("div");return un.classList.add("cdx-settings-button"),un.innerHTML=cn.icon,un.classList.toggle(an.CSS.settingsButtonActive,cn.name===an.data.alignment),ln.appendChild(un),un}).forEach(function(cn,un,dn){cn.addEventListener("click",function(){an._toggleTune(an.settings[un].name),dn.forEach(function(hn,fn){var mn=an.settings[fn].name;hn.classList.toggle(an.CSS.settingsButtonActive,mn===an.data.alignment),an._element.classList.toggle(an._CSS.alignment[mn],mn===an.data.alignment)})})}),ln}},{key:"_toggleTune",value:function(an){this.data.alignment=an}},{key:"data",get:function(){return this._data},set:function(an){this._data={text:an.text||"",alignment:an.alignment||this.config.defaultAlignment||sn.DEFAULT_ALIGNMENT},this._element.innerHTML=this._data.text||""}}],[{key:"conversionConfig",get:function(){return{export:"text",import:"text"}}},{key:"sanitize",get:function(){return{text:{br:!0},alignment:{}}}},{key:"pasteConfig",get:function(){return{tags:["P"]}}},{key:"toolbox",get:function(){return{icon:tn(5).default,title:"Text"}}}]),sn}();Ot.exports=on},function(Ot,en,tn){var nn=tn(2),rn=tn(3);typeof(rn=rn.__esModule?rn.default:rn)=="string"&&(rn=[[Ot.i,rn,""]]);var on={insert:"head",singleton:!1};nn(rn,on),Ot.exports=rn.locals||{}},function(Ot,en,tn){var nn,rn=function(){return nn===void 0&&(nn=!!(window&&document&&document.all&&!window.atob)),nn},on=function(){var _n={};return function(vn){if(_n[vn]===void 0){var bn=document.querySelector(vn);if(window.HTMLIFrameElement&&bn instanceof window.HTMLIFrameElement)try{bn=bn.contentDocument.head}catch{bn=null}_n[vn]=bn}return _n[vn]}}(),sn=[];function an(_n){for(var vn=-1,bn=0;bn<sn.length;bn++)if(sn[bn].identifier===_n){vn=bn;break}return vn}function ln(_n,vn){for(var bn={},wn=[],Sn=0;Sn<_n.length;Sn++){var kn=_n[Sn],En=vn.base?kn[0]+vn.base:kn[0],In=bn[En]||0,An="".concat(En," ").concat(In);bn[En]=In+1;var Rn=an(An),Nn={css:kn[1],media:kn[2],sourceMap:kn[3]};Rn!==-1?(sn[Rn].references++,sn[Rn].updater(Nn)):sn.push({identifier:An,updater:pn(Nn,vn),references:1}),wn.push(An)}return wn}function cn(_n){var vn=document.createElement("style"),bn=_n.attributes||{};if(bn.nonce===void 0){var wn=tn.nc;wn&&(bn.nonce=wn)}if(Object.keys(bn).forEach(function(kn){vn.setAttribute(kn,bn[kn])}),typeof _n.insert=="function")_n.insert(vn);else{var Sn=on(_n.insert||"head");if(!Sn)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");Sn.appendChild(vn)}return vn}var un,dn=(un=[],function(_n,vn){return un[_n]=vn,un.filter(Boolean).join(`
`)});function hn(_n,vn,bn,wn){var Sn=bn?"":wn.media?"@media ".concat(wn.media," {").concat(wn.css,"}"):wn.css;if(_n.styleSheet)_n.styleSheet.cssText=dn(vn,Sn);else{var kn=document.createTextNode(Sn),En=_n.childNodes;En[vn]&&_n.removeChild(En[vn]),En.length?_n.insertBefore(kn,En[vn]):_n.appendChild(kn)}}function fn(_n,vn,bn){var wn=bn.css,Sn=bn.media,kn=bn.sourceMap;if(Sn?_n.setAttribute("media",Sn):_n.removeAttribute("media"),kn&&typeof btoa<"u"&&(wn+=`
/*# sourceMappingURL=data:application/json;base64,`.concat(btoa(unescape(encodeURIComponent(JSON.stringify(kn))))," */")),_n.styleSheet)_n.styleSheet.cssText=wn;else{for(;_n.firstChild;)_n.removeChild(_n.firstChild);_n.appendChild(document.createTextNode(wn))}}var mn=null,gn=0;function pn(_n,vn){var bn,wn,Sn;if(vn.singleton){var kn=gn++;bn=mn||(mn=cn(vn)),wn=hn.bind(null,bn,kn,!1),Sn=hn.bind(null,bn,kn,!0)}else bn=cn(vn),wn=fn.bind(null,bn,vn),Sn=function(){(function(En){if(En.parentNode===null)return!1;En.parentNode.removeChild(En)})(bn)};return wn(_n),function(En){if(En){if(En.css===_n.css&&En.media===_n.media&&En.sourceMap===_n.sourceMap)return;wn(_n=En)}else Sn()}}Ot.exports=function(_n,vn){(vn=vn||{}).singleton||typeof vn.singleton=="boolean"||(vn.singleton=rn());var bn=ln(_n=_n||[],vn);return function(wn){if(wn=wn||[],Object.prototype.toString.call(wn)==="[object Array]"){for(var Sn=0;Sn<bn.length;Sn++){var kn=an(bn[Sn]);sn[kn].references--}for(var En=ln(wn,vn),In=0;In<bn.length;In++){var An=an(bn[In]);sn[An].references===0&&(sn[An].updater(),sn.splice(An,1))}bn=En}}}},function(Ot,en,tn){(en=tn(4)(!1)).push([Ot.i,`.ce-paragraph {
    line-height: 1.6em;
    outline: none;
}
.ce-paragraph--right {
    text-align: right;
}
.ce-paragraph--center {
    text-align: center;
}
.ce-paragraph--left {
    text-align: left;
}

.ce-paragraph--justify {
    text-align: justify;
}

.ce-paragraph[data-placeholder]:empty::before{
  content: attr(data-placeholder);
  color: #707684;
  font-weight: normal;
  opacity: 0;
}

/** Show placeholder at the first paragraph if Editor is empty */
.codex-editor--empty .ce-block:first-child .ce-paragraph[data-placeholder]:empty::before {
  opacity: 1;
}

.codex-editor--toolbox-opened .ce-block:first-child .ce-paragraph[data-placeholder]:empty::before,
.codex-editor--empty .ce-block:first-child .ce-paragraph[data-placeholder]:empty:focus::before {
  opacity: 0;
}

.ce-paragraph p:first-of-type{
    margin-top: 0;
}

.ce-paragraph p:last-of-type{
    margin-bottom: 0;
}


.svg-icon {
    width: 1em;
    height: 1em;
}

.svg-icon path,
.svg-icon polygon,
.svg-icon rect {
    fill: #4691f6;
}

.svg-icon circle {
    stroke: #4691f6;
    stroke-width: 1;
}`,""]),Ot.exports=en},function(Ot,en,tn){Ot.exports=function(nn){var rn=[];return rn.toString=function(){return this.map(function(on){var sn=function(an,ln){var cn=an[1]||"",un=an[3];if(!un)return cn;if(ln&&typeof btoa=="function"){var dn=(fn=un,mn=btoa(unescape(encodeURIComponent(JSON.stringify(fn)))),gn="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(mn),"/*# ".concat(gn," */")),hn=un.sources.map(function(pn){return"/*# sourceURL=".concat(un.sourceRoot||"").concat(pn," */")});return[cn].concat(hn).concat([dn]).join(`
`)}var fn,mn,gn;return[cn].join(`
`)}(on,nn);return on[2]?"@media ".concat(on[2]," {").concat(sn,"}"):sn}).join("")},rn.i=function(on,sn,an){typeof on=="string"&&(on=[[null,on,""]]);var ln={};if(an)for(var cn=0;cn<this.length;cn++){var un=this[cn][0];un!=null&&(ln[un]=!0)}for(var dn=0;dn<on.length;dn++){var hn=[].concat(on[dn]);an&&ln[hn[0]]||(sn&&(hn[2]?hn[2]="".concat(sn," and ").concat(hn[2]):hn[2]=sn),rn.push(hn))}},rn}},function(Ot,en,tn){tn.r(en),en.default=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0.2 -0.3 9 11.4" width="12" height="14">
  <path d="M0 2.77V.92A1 1 0 01.2.28C.35.1.56 0 .83 0h7.66c.28.01.48.1.63.28.14.17.21.38.21.64v1.85c0 .26-.08.48-.23.66-.15.17-.37.26-.66.26-.28 0-.5-.09-.64-.26a1 1 0 01-.21-.66V1.69H5.6v7.58h.5c.25 0 .45.08.6.23.17.16.25.35.25.6s-.08.45-.24.6a.87.87 0 01-.62.22H3.21a.87.87 0 01-.61-.22.78.78 0 01-.24-.6c0-.25.08-.44.24-.6a.85.85 0 01.61-.23h.5V1.7H1.73v1.08c0 .26-.08.48-.23.66-.15.17-.37.26-.66.26-.28 0-.5-.09-.64-.26A1 1 0 010 2.77z"/>
</svg>
`}])})})(bundle$6);var bundleExports$6=bundle$6.exports;const Paragraph=getDefaultExportFromCjs(bundleExports$6);(function(){try{if(typeof document<"u"){var Nt=document.createElement("style");Nt.appendChild(document.createTextNode(".cdx-quote-icon svg{transform:rotate(180deg)}.cdx-quote{margin:0}.cdx-quote__text{min-height:158px;margin-bottom:10px}.cdx-quote [contentEditable=true][data-placeholder]:before{position:absolute;content:attr(data-placeholder);color:#707684;font-weight:400;opacity:0}.cdx-quote [contentEditable=true][data-placeholder]:empty:before{opacity:1}.cdx-quote [contentEditable=true][data-placeholder]:empty:focus:before{opacity:0}.cdx-quote-settings{display:flex}.cdx-quote-settings .cdx-settings-button{width:50%}")),document.head.appendChild(Nt)}}catch(s){console.error("vite-plugin-css-injected-by-js",s)}})();const a$1='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M18 7L6 7"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M18 17H6"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M16 12L8 12"/></svg>',c$1='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M17 7L5 7"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M17 17H5"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M13 12L5 12"/></svg>',l='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 10.8182L9 10.8182C8.80222 10.8182 8.60888 10.7649 8.44443 10.665C8.27998 10.5651 8.15181 10.4231 8.07612 10.257C8.00043 10.0909 7.98063 9.90808 8.01922 9.73174C8.0578 9.55539 8.15304 9.39341 8.29289 9.26627C8.43275 9.13913 8.61093 9.05255 8.80491 9.01747C8.99889 8.98239 9.19996 9.00039 9.38268 9.0692C9.56541 9.13801 9.72159 9.25453 9.83147 9.40403C9.94135 9.55353 10 9.72929 10 9.90909L10 12.1818C10 12.664 9.78929 13.1265 9.41421 13.4675C9.03914 13.8084 8.53043 14 8 14"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 10.8182L15 10.8182C14.8022 10.8182 14.6089 10.7649 14.4444 10.665C14.28 10.5651 14.1518 10.4231 14.0761 10.257C14.0004 10.0909 13.9806 9.90808 14.0192 9.73174C14.0578 9.55539 14.153 9.39341 14.2929 9.26627C14.4327 9.13913 14.6109 9.05255 14.8049 9.01747C14.9989 8.98239 15.2 9.00039 15.3827 9.0692C15.5654 9.13801 15.7216 9.25453 15.8315 9.40403C15.9414 9.55353 16 9.72929 16 9.90909L16 12.1818C16 12.664 15.7893 13.1265 15.4142 13.4675C15.0391 13.8084 14.5304 14 14 14"/></svg>';class i{static get isReadOnlySupported(){return!0}static get toolbox(){return{icon:l,title:"Quote"}}static get contentless(){return!0}static get enableLineBreaks(){return!0}static get DEFAULT_QUOTE_PLACEHOLDER(){return"Enter a quote"}static get DEFAULT_CAPTION_PLACEHOLDER(){return"Enter a caption"}static get ALIGNMENTS(){return{left:"left",center:"center"}}static get DEFAULT_ALIGNMENT(){return i.ALIGNMENTS.left}static get conversionConfig(){return{import:"text",export:function(s){return s.caption?`${s.text}  ${s.caption}`:s.text}}}get CSS(){return{baseClass:this.api.styles.block,wrapper:"cdx-quote",text:"cdx-quote__text",input:this.api.styles.input,caption:"cdx-quote__caption"}}get settings(){return[{name:"left",icon:c$1},{name:"center",icon:a$1}]}constructor({data:s,config:Ot,api:en,readOnly:tn}){const{ALIGNMENTS:nn,DEFAULT_ALIGNMENT:rn}=i;this.api=en,this.readOnly=tn,this.quotePlaceholder=Ot.quotePlaceholder||i.DEFAULT_QUOTE_PLACEHOLDER,this.captionPlaceholder=Ot.captionPlaceholder||i.DEFAULT_CAPTION_PLACEHOLDER,this.data={text:s.text||"",caption:s.caption||"",alignment:Object.values(nn).includes(s.alignment)&&s.alignment||Ot.defaultAlignment||rn}}render(){const s=this._make("blockquote",[this.CSS.baseClass,this.CSS.wrapper]),Ot=this._make("div",[this.CSS.input,this.CSS.text],{contentEditable:!this.readOnly,innerHTML:this.data.text}),en=this._make("div",[this.CSS.input,this.CSS.caption],{contentEditable:!this.readOnly,innerHTML:this.data.caption});return Ot.dataset.placeholder=this.quotePlaceholder,en.dataset.placeholder=this.captionPlaceholder,s.appendChild(Ot),s.appendChild(en),s}save(s){const Ot=s.querySelector(`.${this.CSS.text}`),en=s.querySelector(`.${this.CSS.caption}`);return Object.assign(this.data,{text:Ot.innerHTML,caption:en.innerHTML})}static get sanitize(){return{text:{br:!0},caption:{br:!0},alignment:{}}}renderSettings(){const s=Ot=>Ot[0].toUpperCase()+Ot.substr(1);return this.settings.map(Ot=>({icon:Ot.icon,label:this.api.i18n.t(`Align ${s(Ot.name)}`),onActivate:()=>this._toggleTune(Ot.name),isActive:this.data.alignment===Ot.name,closeOnActivate:!0}))}_toggleTune(s){this.data.alignment=s}_make(s,Ot=null,en={}){const tn=document.createElement(s);Array.isArray(Ot)?tn.classList.add(...Ot):Ot&&tn.classList.add(Ot);for(const nn in en)tn[nn]=en[nn];return tn}}(function(){try{if(typeof document<"u"){var Nt=document.createElement("style");Nt.appendChild(document.createTextNode('.tc-wrap{--color-background:#f9f9fb;--color-text-secondary:#7b7e89;--color-border:#e8e8eb;--cell-size:34px;--toolbox-icon-size:18px;--toolbox-padding:6px;--toolbox-aiming-field-size:calc(var(--toolbox-icon-size) + var(--toolbox-padding)*2);border-left:0;position:relative;height:100%;width:100%;margin-top:var(--toolbox-icon-size);box-sizing:border-box;display:grid;grid-template-columns:calc(100% - var(--cell-size)) var(--cell-size)}.tc-wrap--readonly{grid-template-columns:100% var(--cell-size)}.tc-wrap svg{vertical-align:top}@media print{.tc-wrap{border-left-color:var(--color-border);border-left-style:solid;border-left-width:1px;grid-template-columns:100% var(--cell-size)}}@media print{.tc-wrap .tc-row:after{display:none}}.tc-table{position:relative;width:100%;height:100%;display:grid;font-size:14px;border-top:1px solid var(--color-border);line-height:1.4}.tc-table:after{width:calc(var(--cell-size));height:100%;left:calc(var(--cell-size)*-1);top:0}.tc-table:after,.tc-table:before{position:absolute;content:""}.tc-table:before{width:100%;height:var(--toolbox-aiming-field-size);top:calc(var(--toolbox-aiming-field-size)*-1);left:0}.tc-table--heading .tc-row:first-child{font-weight:600;border-bottom:2px solid var(--color-border)}.tc-table--heading .tc-row:first-child [contenteditable]:empty:before{content:attr(heading);color:var(--color-text-secondary)}.tc-table--heading .tc-row:first-child:after{bottom:-2px;border-bottom:2px solid var(--color-border)}.tc-add-column,.tc-add-row{display:flex;color:var(--color-text-secondary)}@media print{.tc-add{display:none}}.tc-add-column{padding:4px 0;justify-content:center;border-top:1px solid var(--color-border)}@media print{.tc-add-column{display:none}}.tc-add-row{height:var(--cell-size);align-items:center;padding-left:4px;position:relative}.tc-add-row:before{content:"";position:absolute;right:calc(var(--cell-size)*-1);width:var(--cell-size);height:100%}@media print{.tc-add-row{display:none}}.tc-add-column,.tc-add-row{transition:0s;cursor:pointer;will-change:background-color}.tc-add-column:hover,.tc-add-row:hover{transition:background-color .1s ease;background-color:var(--color-background)}.tc-add-row{margin-top:1px}.tc-add-row:hover:before{transition:.1s;background-color:var(--color-background)}.tc-row{display:grid;grid-template-columns:repeat(auto-fit,minmax(10px,1fr));position:relative;border-bottom:1px solid var(--color-border)}.tc-row:after{content:"";pointer-events:none;position:absolute;width:var(--cell-size);height:100%;bottom:-1px;right:calc(var(--cell-size)*-1);border-bottom:1px solid var(--color-border)}.tc-row--selected{background:var(--color-background)}.tc-row--selected:after{background:var(--color-background)}.tc-cell{border-right:1px solid var(--color-border);padding:6px 12px;overflow:hidden;outline:none;line-break:normal}.tc-cell--selected{background:var(--color-background)}.tc-wrap--readonly .tc-row:after{display:none}.tc-toolbox{--toolbox-padding:6px;--popover-margin:30px;--toggler-click-zone-size:30px;--toggler-dots-color:#7b7e89;--toggler-dots-color-hovered:#1d202b;position:absolute;cursor:pointer;z-index:1;opacity:0;transition:opacity .1s;will-change:left,opacity}.tc-toolbox--column{top:calc(var(--toggler-click-zone-size)*-1);transform:translate(calc(var(--toggler-click-zone-size)*-1/2));will-change:left,opacity}.tc-toolbox--row{left:calc(var(--popover-margin)*-1);transform:translateY(calc(var(--toggler-click-zone-size)*-1/2));margin-top:-1px;will-change:top,opacity}.tc-toolbox--showed{opacity:1}.tc-toolbox .tc-popover{position:absolute;top:0;left:var(--popover-margin)}.tc-toolbox__toggler{display:flex;align-items:center;justify-content:center;width:var(--toggler-click-zone-size);height:var(--toggler-click-zone-size);color:var(--toggler-dots-color);opacity:0;transition:opacity .15s ease;will-change:opacity}.tc-toolbox__toggler:hover{color:var(--toggler-dots-color-hovered)}.tc-toolbox__toggler svg{fill:currentColor}.tc-wrap:hover .tc-toolbox__toggler{opacity:1}.tc-settings .cdx-settings-button{width:50%;margin:0}.tc-popover{--color-border:#eaeaea;--color-background:#fff;--color-background-hover:rgba(232,232,235,.49);--color-background-confirm:#e24a4a;--color-background-confirm-hover:#d54040;--color-text-confirm:#fff;background:var(--color-background);border:1px solid var(--color-border);box-shadow:0 3px 15px -3px #0d142121;border-radius:6px;padding:6px;display:none;will-change:opacity,transform}.tc-popover--opened{display:block;animation:menuShowing .1s cubic-bezier(.215,.61,.355,1) forwards}.tc-popover__item{display:flex;align-items:center;padding:2px 14px 2px 2px;border-radius:5px;cursor:pointer;white-space:nowrap;-webkit-user-select:none;-moz-user-select:none;user-select:none}.tc-popover__item:hover{background:var(--color-background-hover)}.tc-popover__item:not(:last-of-type){margin-bottom:2px}.tc-popover__item-icon{display:inline-flex;width:26px;height:26px;align-items:center;justify-content:center;background:var(--color-background);border-radius:5px;border:1px solid var(--color-border);margin-right:8px}.tc-popover__item-label{line-height:22px;font-size:14px;font-weight:500}.tc-popover__item--confirm{background:var(--color-background-confirm);color:var(--color-text-confirm)}.tc-popover__item--confirm:hover{background-color:var(--color-background-confirm-hover)}.tc-popover__item--confirm .tc-popover__item-icon{background:var(--color-background-confirm);border-color:#0000001a}.tc-popover__item--confirm .tc-popover__item-icon svg{transition:transform .2s ease-in;transform:rotate(90deg) scale(1.2)}.tc-popover__item--hidden{display:none}@keyframes menuShowing{0%{opacity:0;transform:translateY(-8px) scale(.9)}70%{opacity:1;transform:translateY(2px)}to{transform:translateY(0)}}')),document.head.appendChild(Nt)}}catch(s){console.error("vite-plugin-css-injected-by-js",s)}})();function c(Nt,s,Ot={}){const en=document.createElement(Nt);Array.isArray(s)?en.classList.add(...s):s&&en.classList.add(s);for(const tn in Ot)Object.prototype.hasOwnProperty.call(Ot,tn)&&(en[tn]=Ot[tn]);return en}function f(Nt){const s=Nt.getBoundingClientRect();return{y1:Math.floor(s.top+window.pageYOffset),x1:Math.floor(s.left+window.pageXOffset),x2:Math.floor(s.right+window.pageXOffset),y2:Math.floor(s.bottom+window.pageYOffset)}}function g(Nt,s){const Ot=f(Nt),en=f(s);return{fromTopBorder:en.y1-Ot.y1,fromLeftBorder:en.x1-Ot.x1,fromRightBorder:Ot.x2-en.x2,fromBottomBorder:Ot.y2-en.y2}}function R(Nt,s){const Ot=Nt.getBoundingClientRect(),{width:en,height:tn,x:nn,y:rn}=Ot,{clientX:on,clientY:sn}=s;return{width:en,height:tn,x:on-nn,y:sn-rn}}function C(Nt,s){return s.parentNode.insertBefore(Nt,s)}function m(Nt,s=!0){const Ot=document.createRange(),en=window.getSelection();Ot.selectNodeContents(Nt),Ot.collapse(s),en.removeAllRanges(),en.addRange(Ot)}class a{constructor({items:s}){this.items=s,this.wrapper=void 0,this.itemEls=[]}static get CSS(){return{popover:"tc-popover",popoverOpened:"tc-popover--opened",item:"tc-popover__item",itemHidden:"tc-popover__item--hidden",itemConfirmState:"tc-popover__item--confirm",itemIcon:"tc-popover__item-icon",itemLabel:"tc-popover__item-label"}}render(){return this.wrapper=c("div",a.CSS.popover),this.items.forEach((s,Ot)=>{const en=c("div",a.CSS.item),tn=c("div",a.CSS.itemIcon,{innerHTML:s.icon}),nn=c("div",a.CSS.itemLabel,{textContent:s.label});en.dataset.index=Ot,en.appendChild(tn),en.appendChild(nn),this.wrapper.appendChild(en),this.itemEls.push(en)}),this.wrapper.addEventListener("click",s=>{this.popoverClicked(s)}),this.wrapper}popoverClicked(s){const Ot=s.target.closest(`.${a.CSS.item}`);if(!Ot)return;const en=Ot.dataset.index,tn=this.items[en];if(tn.confirmationRequired&&!this.hasConfirmationState(Ot)){this.setConfirmationState(Ot);return}tn.onClick()}setConfirmationState(s){s.classList.add(a.CSS.itemConfirmState)}clearConfirmationState(s){s.classList.remove(a.CSS.itemConfirmState)}hasConfirmationState(s){return s.classList.contains(a.CSS.itemConfirmState)}get opened(){return this.wrapper.classList.contains(a.CSS.popoverOpened)}open(){this.items.forEach((s,Ot)=>{typeof s.hideIf=="function"&&this.itemEls[Ot].classList.toggle(a.CSS.itemHidden,s.hideIf())}),this.wrapper.classList.add(a.CSS.popoverOpened)}close(){this.wrapper.classList.remove(a.CSS.popoverOpened),this.itemEls.forEach(s=>{this.clearConfirmationState(s)})}}const b='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M8 8L12 12M12 12L16 16M12 12L16 8M12 12L8 16"/></svg>',k='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.8833 9.16666L18.2167 12.5M18.2167 12.5L14.8833 15.8333M18.2167 12.5H10.05C9.16594 12.5 8.31809 12.1488 7.69297 11.5237C7.06785 10.8986 6.71666 10.0507 6.71666 9.16666"/></svg>',S='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.9167 14.9167L11.5833 18.25M11.5833 18.25L8.25 14.9167M11.5833 18.25L11.5833 10.0833C11.5833 9.19928 11.9345 8.35143 12.5596 7.72631C13.1848 7.10119 14.0326 6.75 14.9167 6.75"/></svg>',x='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.13333 14.9167L12.4667 18.25M12.4667 18.25L15.8 14.9167M12.4667 18.25L12.4667 10.0833C12.4667 9.19928 12.1155 8.35143 11.4904 7.72631C10.8652 7.10119 10.0174 6.75 9.13333 6.75"/></svg>',y='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.8833 15.8333L18.2167 12.5M18.2167 12.5L14.8833 9.16667M18.2167 12.5L10.05 12.5C9.16595 12.5 8.31811 12.8512 7.69299 13.4763C7.06787 14.1014 6.71667 14.9493 6.71667 15.8333"/></svg>',T='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M9.41 9.66H9.4"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M14.6 9.66H14.59"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M9.31 14.36H9.3"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M14.6 14.36H14.59"/></svg>',v='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M12 7V12M12 17V12M17 12H12M12 12H7"/></svg>',L='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-width="2" d="M5 10H19"/><rect width="14" height="14" x="5" y="5" stroke="currentColor" stroke-width="2" rx="4"/></svg>',M='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-width="2" d="M10 5V18.5"/><path stroke="currentColor" stroke-width="2" d="M14 5V18.5"/><path stroke="currentColor" stroke-width="2" d="M5 10H19"/><path stroke="currentColor" stroke-width="2" d="M5 14H19"/><rect width="14" height="14" x="5" y="5" stroke="currentColor" stroke-width="2" rx="4"/></svg>',O='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-width="2" d="M10 5V18.5"/><path stroke="currentColor" stroke-width="2" d="M5 10H19"/><rect width="14" height="14" x="5" y="5" stroke="currentColor" stroke-width="2" rx="4"/></svg>';class u{constructor({api:s,items:Ot,onOpen:en,onClose:tn,cssModifier:nn=""}){this.api=s,this.items=Ot,this.onOpen=en,this.onClose=tn,this.cssModifier=nn,this.popover=null,this.wrapper=this.createToolbox()}static get CSS(){return{toolbox:"tc-toolbox",toolboxShowed:"tc-toolbox--showed",toggler:"tc-toolbox__toggler"}}get element(){return this.wrapper}createToolbox(){const s=c("div",[u.CSS.toolbox,this.cssModifier?`${u.CSS.toolbox}--${this.cssModifier}`:""]);s.dataset.mutationFree="true";const Ot=this.createPopover(),en=this.createToggler();return s.appendChild(en),s.appendChild(Ot),s}createToggler(){const s=c("div",u.CSS.toggler,{innerHTML:T});return s.addEventListener("click",()=>{this.togglerClicked()}),s}createPopover(){return this.popover=new a({items:this.items}),this.popover.render()}togglerClicked(){this.popover.opened?(this.popover.close(),this.onClose()):(this.popover.open(),this.onOpen())}show(s){const Ot=s();Object.entries(Ot).forEach(([en,tn])=>{this.wrapper.style[en]=tn}),this.wrapper.classList.add(u.CSS.toolboxShowed)}hide(){this.popover.close(),this.wrapper.classList.remove(u.CSS.toolboxShowed)}}function H(Nt,s){let Ot=0;return function(...en){const tn=new Date().getTime();if(!(tn-Ot<Nt))return Ot=tn,s(...en)}}const r={wrapper:"tc-wrap",wrapperReadOnly:"tc-wrap--readonly",table:"tc-table",row:"tc-row",withHeadings:"tc-table--heading",rowSelected:"tc-row--selected",cell:"tc-cell",cellSelected:"tc-cell--selected",addRow:"tc-add-row",addColumn:"tc-add-column"};class A{constructor(s,Ot,en,tn){this.readOnly=s,this.api=Ot,this.data=en,this.config=tn,this.wrapper=null,this.table=null,this.toolboxColumn=this.createColumnToolbox(),this.toolboxRow=this.createRowToolbox(),this.createTableWrapper(),this.hoveredRow=0,this.hoveredColumn=0,this.selectedRow=0,this.selectedColumn=0,this.tunes={withHeadings:!1},this.resize(),this.fill(),this.focusedCell={row:0,column:0},this.documentClicked=nn=>{const rn=nn.target.closest(`.${r.table}`)!==null,on=nn.target.closest(`.${r.wrapper}`)===null;(rn||on)&&this.hideToolboxes();const sn=nn.target.closest(`.${r.addRow}`),an=nn.target.closest(`.${r.addColumn}`);sn&&sn.parentNode===this.wrapper?(this.addRow(void 0,!0),this.hideToolboxes()):an&&an.parentNode===this.wrapper&&(this.addColumn(void 0,!0),this.hideToolboxes())},this.readOnly||this.bindEvents()}getWrapper(){return this.wrapper}bindEvents(){document.addEventListener("click",this.documentClicked),this.table.addEventListener("mousemove",H(150,s=>this.onMouseMoveInTable(s)),{passive:!0}),this.table.onkeypress=s=>this.onKeyPressListener(s),this.table.addEventListener("keydown",s=>this.onKeyDownListener(s)),this.table.addEventListener("focusin",s=>this.focusInTableListener(s))}createColumnToolbox(){return new u({api:this.api,cssModifier:"column",items:[{label:this.api.i18n.t("Add column to left"),icon:S,onClick:()=>{this.addColumn(this.selectedColumn,!0),this.hideToolboxes()}},{label:this.api.i18n.t("Add column to right"),icon:x,onClick:()=>{this.addColumn(this.selectedColumn+1,!0),this.hideToolboxes()}},{label:this.api.i18n.t("Delete column"),icon:b,hideIf:()=>this.numberOfColumns===1,confirmationRequired:!0,onClick:()=>{this.deleteColumn(this.selectedColumn),this.hideToolboxes()}}],onOpen:()=>{this.selectColumn(this.hoveredColumn),this.hideRowToolbox()},onClose:()=>{this.unselectColumn()}})}createRowToolbox(){return new u({api:this.api,cssModifier:"row",items:[{label:this.api.i18n.t("Add row above"),icon:y,onClick:()=>{this.addRow(this.selectedRow,!0),this.hideToolboxes()}},{label:this.api.i18n.t("Add row below"),icon:k,onClick:()=>{this.addRow(this.selectedRow+1,!0),this.hideToolboxes()}},{label:this.api.i18n.t("Delete row"),icon:b,hideIf:()=>this.numberOfRows===1,confirmationRequired:!0,onClick:()=>{this.deleteRow(this.selectedRow),this.hideToolboxes()}}],onOpen:()=>{this.selectRow(this.hoveredRow),this.hideColumnToolbox()},onClose:()=>{this.unselectRow()}})}moveCursorToNextRow(){this.focusedCell.row!==this.numberOfRows?(this.focusedCell.row+=1,this.focusCell(this.focusedCell)):(this.addRow(),this.focusedCell.row+=1,this.focusCell(this.focusedCell),this.updateToolboxesPosition(0,0))}getCell(s,Ot){return this.table.querySelectorAll(`.${r.row}:nth-child(${s}) .${r.cell}`)[Ot-1]}getRow(s){return this.table.querySelector(`.${r.row}:nth-child(${s})`)}getRowByCell(s){return s.parentElement}getRowFirstCell(s){return s.querySelector(`.${r.cell}:first-child`)}setCellContent(s,Ot,en){const tn=this.getCell(s,Ot);tn.innerHTML=en}addColumn(s=-1,Ot=!1){let en=this.numberOfColumns;for(let tn=1;tn<=this.numberOfRows;tn++){let nn;const rn=this.createCell();if(s>0&&s<=en?(nn=this.getCell(tn,s),C(rn,nn)):nn=this.getRow(tn).appendChild(rn),tn===1){const on=this.getCell(tn,s>0?s:en+1);on&&Ot&&m(on)}}this.addHeadingAttrToFirstRow()}addRow(s=-1,Ot=!1){let en,tn=c("div",r.row);this.tunes.withHeadings&&this.removeHeadingAttrFromFirstRow();let nn=this.numberOfColumns;if(s>0&&s<=this.numberOfRows){let on=this.getRow(s);en=C(tn,on)}else en=this.table.appendChild(tn);this.fillRow(en,nn),this.tunes.withHeadings&&this.addHeadingAttrToFirstRow();const rn=this.getRowFirstCell(en);return rn&&Ot&&m(rn),en}deleteColumn(s){for(let Ot=1;Ot<=this.numberOfRows;Ot++){const en=this.getCell(Ot,s);if(!en)return;en.remove()}}deleteRow(s){this.getRow(s).remove(),this.addHeadingAttrToFirstRow()}createTableWrapper(){if(this.wrapper=c("div",r.wrapper),this.table=c("div",r.table),this.readOnly&&this.wrapper.classList.add(r.wrapperReadOnly),this.wrapper.appendChild(this.toolboxRow.element),this.wrapper.appendChild(this.toolboxColumn.element),this.wrapper.appendChild(this.table),!this.readOnly){const s=c("div",r.addColumn,{innerHTML:v}),Ot=c("div",r.addRow,{innerHTML:v});this.wrapper.appendChild(s),this.wrapper.appendChild(Ot)}}computeInitialSize(){const s=this.data&&this.data.content,Ot=Array.isArray(s),en=Ot?s.length:!1,tn=Ot?s.length:void 0,nn=en?s[0].length:void 0,rn=Number.parseInt(this.config&&this.config.rows),on=Number.parseInt(this.config&&this.config.cols),sn=!isNaN(rn)&&rn>0?rn:void 0,an=!isNaN(on)&&on>0?on:void 0;return{rows:tn||sn||2,cols:nn||an||2}}resize(){const{rows:s,cols:Ot}=this.computeInitialSize();for(let en=0;en<s;en++)this.addRow();for(let en=0;en<Ot;en++)this.addColumn()}fill(){const s=this.data;if(s&&s.content)for(let Ot=0;Ot<s.content.length;Ot++)for(let en=0;en<s.content[Ot].length;en++)this.setCellContent(Ot+1,en+1,s.content[Ot][en])}fillRow(s,Ot){for(let en=1;en<=Ot;en++){const tn=this.createCell();s.appendChild(tn)}}createCell(){return c("div",r.cell,{contentEditable:!this.readOnly})}get numberOfRows(){return this.table.childElementCount}get numberOfColumns(){return this.numberOfRows?this.table.querySelectorAll(`.${r.row}:first-child .${r.cell}`).length:0}get isColumnMenuShowing(){return this.selectedColumn!==0}get isRowMenuShowing(){return this.selectedRow!==0}onMouseMoveInTable(s){const{row:Ot,column:en}=this.getHoveredCell(s);this.hoveredColumn=en,this.hoveredRow=Ot,this.updateToolboxesPosition()}onKeyPressListener(s){if(s.key==="Enter"){if(s.shiftKey)return!0;this.moveCursorToNextRow()}return s.key!=="Enter"}onKeyDownListener(s){s.key==="Tab"&&s.stopPropagation()}focusInTableListener(s){const Ot=s.target,en=this.getRowByCell(Ot);this.focusedCell={row:Array.from(this.table.querySelectorAll(`.${r.row}`)).indexOf(en)+1,column:Array.from(en.querySelectorAll(`.${r.cell}`)).indexOf(Ot)+1}}hideToolboxes(){this.hideRowToolbox(),this.hideColumnToolbox(),this.updateToolboxesPosition()}hideRowToolbox(){this.unselectRow(),this.toolboxRow.hide()}hideColumnToolbox(){this.unselectColumn(),this.toolboxColumn.hide()}focusCell(){this.focusedCellElem.focus()}get focusedCellElem(){const{row:s,column:Ot}=this.focusedCell;return this.getCell(s,Ot)}updateToolboxesPosition(s=this.hoveredRow,Ot=this.hoveredColumn){this.isColumnMenuShowing||Ot>0&&Ot<=this.numberOfColumns&&this.toolboxColumn.show(()=>({left:`calc((100% - var(--cell-size)) / (${this.numberOfColumns} * 2) * (1 + (${Ot} - 1) * 2))`})),this.isRowMenuShowing||s>0&&s<=this.numberOfRows&&this.toolboxRow.show(()=>{const en=this.getRow(s),{fromTopBorder:tn}=g(this.table,en),{height:nn}=en.getBoundingClientRect();return{top:`${Math.ceil(tn+nn/2)}px`}})}setHeadingsSetting(s){this.tunes.withHeadings=s,s?(this.table.classList.add(r.withHeadings),this.addHeadingAttrToFirstRow()):(this.table.classList.remove(r.withHeadings),this.removeHeadingAttrFromFirstRow())}addHeadingAttrToFirstRow(){for(let s=1;s<=this.numberOfColumns;s++){let Ot=this.getCell(1,s);Ot&&Ot.setAttribute("heading",this.api.i18n.t("Heading"))}}removeHeadingAttrFromFirstRow(){for(let s=1;s<=this.numberOfColumns;s++){let Ot=this.getCell(1,s);Ot&&Ot.removeAttribute("heading")}}selectRow(s){const Ot=this.getRow(s);Ot&&(this.selectedRow=s,Ot.classList.add(r.rowSelected))}unselectRow(){if(this.selectedRow<=0)return;const s=this.table.querySelector(`.${r.rowSelected}`);s&&s.classList.remove(r.rowSelected),this.selectedRow=0}selectColumn(s){for(let Ot=1;Ot<=this.numberOfRows;Ot++){const en=this.getCell(Ot,s);en&&en.classList.add(r.cellSelected)}this.selectedColumn=s}unselectColumn(){if(this.selectedColumn<=0)return;let s=this.table.querySelectorAll(`.${r.cellSelected}`);Array.from(s).forEach(Ot=>{Ot.classList.remove(r.cellSelected)}),this.selectedColumn=0}getHoveredCell(s){let Ot=this.hoveredRow,en=this.hoveredColumn;const{width:tn,height:nn,x:rn,y:on}=R(this.table,s);return rn>=0&&(en=this.binSearch(this.numberOfColumns,sn=>this.getCell(1,sn),({fromLeftBorder:sn})=>rn<sn,({fromRightBorder:sn})=>rn>tn-sn)),on>=0&&(Ot=this.binSearch(this.numberOfRows,sn=>this.getCell(sn,1),({fromTopBorder:sn})=>on<sn,({fromBottomBorder:sn})=>on>nn-sn)),{row:Ot||this.hoveredRow,column:en||this.hoveredColumn}}binSearch(s,Ot,en,tn){let nn=0,rn=s+1,on=0,sn;for(;nn<rn-1&&on<10;){sn=Math.ceil((nn+rn)/2);const an=Ot(sn),ln=g(this.table,an);if(en(ln))rn=sn;else if(tn(ln))nn=sn;else break;on++}return sn}getData(){const s=[];for(let Ot=1;Ot<=this.numberOfRows;Ot++){const en=this.table.querySelector(`.${r.row}:nth-child(${Ot})`),tn=Array.from(en.querySelectorAll(`.${r.cell}`));tn.every(nn=>!nn.textContent.trim())||s.push(tn.map(nn=>nn.innerHTML))}return s}destroy(){document.removeEventListener("click",this.documentClicked)}}class I{static get isReadOnlySupported(){return!0}static get enableLineBreaks(){return!0}constructor({data:s,config:Ot,api:en,readOnly:tn}){this.api=en,this.readOnly=tn,this.config=Ot,this.data={withHeadings:this.getConfig("withHeadings",!1,s),content:s&&s.content?s.content:[]},this.table=null}static get toolbox(){return{icon:O,title:"Table"}}render(){return this.table=new A(this.readOnly,this.api,this.data,this.config),this.container=c("div",this.api.styles.block),this.container.appendChild(this.table.getWrapper()),this.table.setHeadingsSetting(this.data.withHeadings),this.container}renderSettings(){return[{label:this.api.i18n.t("With headings"),icon:L,isActive:this.data.withHeadings,closeOnActivate:!0,toggle:!0,onActivate:()=>{this.data.withHeadings=!0,this.table.setHeadingsSetting(this.data.withHeadings)}},{label:this.api.i18n.t("Without headings"),icon:M,isActive:!this.data.withHeadings,closeOnActivate:!0,toggle:!0,onActivate:()=>{this.data.withHeadings=!1,this.table.setHeadingsSetting(this.data.withHeadings)}}]}save(){const s=this.table.getData();return{withHeadings:this.data.withHeadings,content:s}}destroy(){this.table.destroy()}getConfig(s,Ot=void 0,en=void 0){const tn=this.data||en;return tn?tn[s]?tn[s]:Ot:this.config&&this.config[s]?this.config[s]:Ot}static get pasteConfig(){return{tags:["TABLE","TR","TH","TD"]}}onPaste(s){const Ot=s.detail.data,en=Ot.querySelector(":scope > thead, tr:first-of-type th"),tn=Array.from(Ot.querySelectorAll("tr")).map(nn=>Array.from(nn.querySelectorAll("th, td")).map(rn=>rn.innerHTML));this.data={withHeadings:en!==null,content:tn},this.table.wrapper&&this.table.wrapper.replaceWith(this.render())}}var bundle$5={exports:{}};(function(module,exports){(function(s,Ot){module.exports=Ot()})(window,function(){return function(Nt){var s={};function Ot(en){if(s[en])return s[en].exports;var tn=s[en]={i:en,l:!1,exports:{}};return Nt[en].call(tn.exports,tn,tn.exports,Ot),tn.l=!0,tn.exports}return Ot.m=Nt,Ot.c=s,Ot.d=function(en,tn,nn){Ot.o(en,tn)||Object.defineProperty(en,tn,{enumerable:!0,get:nn})},Ot.r=function(en){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(en,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(en,"__esModule",{value:!0})},Ot.t=function(en,tn){if(tn&1&&(en=Ot(en)),tn&8||tn&4&&typeof en=="object"&&en&&en.__esModule)return en;var nn=Object.create(null);if(Ot.r(nn),Object.defineProperty(nn,"default",{enumerable:!0,value:en}),tn&2&&typeof en!="string")for(var rn in en)Ot.d(nn,rn,(function(on){return en[on]}).bind(null,rn));return nn},Ot.n=function(en){var tn=en&&en.__esModule?function(){return en.default}:function(){return en};return Ot.d(tn,"a",tn),tn},Ot.o=function(en,tn){return Object.prototype.hasOwnProperty.call(en,tn)},Ot.p="/",Ot(Ot.s="./src/index.js")}({"./node_modules/css-loader/dist/cjs.js!./src/index.css":function(module,exports,__webpack_require__){eval(`// Imports
var ___CSS_LOADER_API_IMPORT___ = __webpack_require__(/*! ../node_modules/css-loader/dist/runtime/api.js */ "./node_modules/css-loader/dist/runtime/api.js");
exports = ___CSS_LOADER_API_IMPORT___(false);
// Module
exports.push([module.i, ".hide{\\n    display: none !important;\\n}\\n\\n.anyButtonContainer{\\n    position: relative;\\n}\\n\\n.anyButtonContainer__registerButton{\\n    display: block;\\n    margin: auto;\\n}\\n\\n.anyButtonContainer__inputHolder{}\\n\\n.anyButtonContainer__inputHolder > * {\\n    margin-bottom: 10px;\\n}\\n\\n.anyButtonContainer__input {\\n    padding-left: 38px;\\n    background-repeat: no-repeat;\\n    background-position: 10px;\\n    white-space: nowrap;\\n    text-overflow: ellipsis;\\n    overflow: hidden;\\n}\\n\\n.anyButtonContainer__input--link{\\n    background-image: url('data:image/svg+xml,<svg xmlns=\\"http://www.w3.org/2000/svg\\" xmlns:xlink=\\"http://www.w3.org/1999/xlink\\" version=\\"1.1\\" id=\\"Layer_1\\" x=\\"0px\\" y=\\"0px\\" viewBox=\\"0 0 277.279 277.279\\" height=\\"20\\" width=\\"20\\" style=\\"enable-background:new 0 0 277.279 277.279;\\" xml:space=\\"preserve\\"> <g id=\\"XMLID_105_\\"> <path id=\\"XMLID_106_\\" d=\\"M149.245,191.671l-42.425,42.426c0,0,0,0.001-0.001,0.001c0,0,0,0.001-0.001,0.001   c-17.544,17.545-46.092,17.546-63.638,0c-8.5-8.5-13.18-19.801-13.18-31.82c0-12.018,4.68-23.317,13.177-31.817   c0.001-0.001,0.002-0.002,0.003-0.003l42.425-42.426c5.857-5.858,5.857-15.356-0.001-21.213c-5.857-5.857-15.355-5.857-21.213,0   l-42.425,42.426c-0.003,0.003-0.006,0.007-0.009,0.01C7.798,163.42,0,182.251,0,202.279c0,20.033,7.801,38.867,21.967,53.033   C36.589,269.933,55.794,277.244,75,277.244c19.206,0,38.412-7.311,53.032-21.932c0,0,0-0.001,0-0.001   c0.001,0,0.001-0.001,0.001-0.001l42.425-42.426c5.857-5.857,5.857-15.355-0.001-21.213   C164.601,185.814,155.104,185.814,149.245,191.671z\\"/> <path id=\\"XMLID_107_\\" d=\\"M277.279,75c0-20.033-7.802-38.867-21.968-53.033c-29.243-29.242-76.824-29.241-106.065,0   c-0.001,0.002-0.003,0.003-0.004,0.005l-42.424,42.423c-5.858,5.857-5.858,15.356,0,21.213c2.93,2.93,6.768,4.394,10.607,4.394   c3.838,0,7.678-1.465,10.606-4.394l42.424-42.423c0.001-0.002,0.003-0.003,0.005-0.005c17.544-17.544,46.092-17.545,63.638,0   c8.499,8.5,13.181,19.801,13.181,31.82c0,12.018-4.68,23.317-13.178,31.817c-0.001,0.001-0.002,0.002-0.003,0.003l-42.425,42.426   c-5.857,5.857-5.857,15.355,0.001,21.213c2.929,2.929,6.768,4.394,10.606,4.394c3.839,0,7.678-1.465,10.607-4.394l42.425-42.426   c0.003-0.003,0.006-0.007,0.009-0.01C269.48,113.859,277.279,95.028,277.279,75z\\"/> <path id=\\"XMLID_108_\\" d=\\"M85.607,191.671c2.929,2.929,6.768,4.394,10.606,4.394c3.839,0,7.678-1.465,10.607-4.394l84.852-84.852   c5.858-5.857,5.858-15.355,0-21.213c-5.857-5.857-15.355-5.857-21.213,0l-84.852,84.851   C79.749,176.316,79.749,185.814,85.607,191.671z\\"/> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> <g> </g> </svg>');\\n}\\n.anyButtonContainer__input--text{\\n    background-image: url('data:image/svg+xml,<svg xmlns=\\"http://www.w3.org/2000/svg\\" id=\\"Capa_1\\" enable-background=\\"new 0 0 512 512\\" height=\\"20\\" viewBox=\\"0 0 512 512\\" width=\\"20\\"><g><path d=\\"m15 114.235c8.284 0 15-6.716 15-15v-69.235h69.235c8.284 0 15-6.716 15-15s-6.716-15-15-15h-84.235c-8.284 0-15 6.716-15 15v84.235c0 8.285 6.716 15 15 15z\\"/><path d=\\"m497 0h-84.235c-8.284 0-15 6.716-15 15s6.716 15 15 15h69.235v69.235c0 8.284 6.716 15 15 15s15-6.716 15-15v-84.235c0-8.284-6.716-15-15-15z\\"/><path d=\\"m497 397.765c-8.284 0-15 6.716-15 15v69.235h-69.235c-8.284 0-15 6.716-15 15s6.716 15 15 15h84.235c8.284 0 15-6.716 15-15v-84.235c0-8.285-6.716-15-15-15z\\"/><path d=\\"m99.235 482h-69.235v-69.235c0-8.284-6.716-15-15-15s-15 6.716-15 15v84.235c0 8.284 6.716 15 15 15h84.235c8.284 0 15-6.716 15-15s-6.715-15-15-15z\\"/><path d=\\"m419.66 191.38v-94.73c0-4.7-3.81-8.51-8.52-8.51h-155.14-155.14c-4.71 0-8.52 3.81-8.52 8.51v94.73c0 4.71 3.81 8.52 8.52 8.52h45.24c4.7 0 8.51-3.81 8.51-8.52v-32.45c0-4.71 3.82-8.52 8.52-8.52h53.21c4.71 0 8.52 3.81 8.52 8.52v234.14c0 4.71-3.81 8.52-8.52 8.52h-23.27c-4.71 0-8.52 3.81-8.52 8.52v45.24c0 4.7 3.81 8.51 8.52 8.51h62.93 62.93c4.71 0 8.52-3.81 8.52-8.51v-45.24c0-4.71-3.81-8.52-8.52-8.52h-23.27c-4.71 0-8.52-3.81-8.52-8.52v-234.14c0-4.71 3.81-8.52 8.52-8.52h53.21c4.7 0 8.52 3.81 8.52 8.52v32.45c0 4.71 3.81 8.52 8.51 8.52h45.24c4.71 0 8.52-3.81 8.52-8.52z\\"/></g></svg>');\\n}\\n.anyButtonContainer__input[contentEditable=true][data-placeholder]::before {\\n     position: absolute;\\n     content: attr(data-placeholder);\\n     color: #707684;\\n     font-weight: normal;\\n     opacity: 0;\\n}\\n\\n.anyButtonContainer__input[contentEditable=true][data-placeholder]:empty::before {\\n     opacity: 1;\\n}\\n\\n.anyButtonContainer__input[contentEditable=true][data-placeholder]:empty:focus::before {\\n     opacity: 0;\\n}\\n\\n\\n.cdx-button{\\n    white-space: nowrap;\\n}\\n\\n.anyButtonContainer__anyButtonHolder{\\n    text-align: center;\\n}\\n\\n\\n\\n.btn{\\n    display: inline-block;\\n    font-weight: 400;\\n    line-height: 1.5;\\n    color: #212529;\\n    text-align: center;\\n    text-decoration: none !important;\\n    vertical-align: middle;\\n    cursor: pointer;\\n    -webkit-user-select: none;\\n    -moz-user-select: none;\\n    user-select: none;\\n    background-color: transparent;\\n    border: 1px solid transparent;\\n    padding: .375rem .75rem;\\n    font-size: 1rem;\\n    border-radius: .25rem;\\n    transition: color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out;\\n}\\n\\n.btn--default{\\n    color: #fff;\\n    background-color: #0d6efd;\\n    border-color: #0d6efd;\\n}\\n\\n.btn--gray{\\n    color: #fff;\\n    background-color: #7c7c7c;\\n    border-color: #7c7c7c;\\n}\\n\\n\\n.toggle-input {\\n    position: absolute;\\n    z-index: 5;\\n    opacity: 0;\\n    cursor: pointer;\\n    width: 40px;\\n    height: 20px;\\n    margin: 0;\\n}\\n\\n.toggle-label {\\n    width: 40px;\\n    height: 20px;\\n    background: #ccc;\\n    position: relative;\\n    display: inline-block;\\n    border-radius: 46px;\\n    transition: 0.4s;\\n    box-sizing: border-box;\\n}\\n.toggle-label:after {\\n    content: \\"\\";\\n    position: absolute;\\n    width: 20px;\\n    height: 20px;\\n    border-radius: 100%;\\n    left: 0;\\n    top: 0;\\n    z-index: 2;\\n    background: #fff;\\n    box-shadow: 0 0 5px rgba(0, 0, 0, 0.2);\\n    transition: 0.4s;\\n}\\n\\n.toggle-input:checked + .toggle-label {\\n    background-color: #4BD865;\\n}\\n.toggle-input:checked + .toggle-label:after {\\n    left: 20px;\\n}\\n\\n.toggle-switch {\\n    width: 40px;\\n    margin-left: auto;\\n    padding: 10px 0;\\n}", ""]);
// Exports
module.exports = exports;


//# sourceURL=webpack://AnyButton/./src/index.css?./node_modules/css-loader/dist/cjs.js`)},"./node_modules/css-loader/dist/runtime/api.js":function(module,exports,__webpack_require__){eval(`

/*
  MIT License http://www.opensource.org/licenses/mit-license.php
  Author Tobias Koppers @sokra
*/
// css base code, injected by the css-loader
// eslint-disable-next-line func-names
module.exports = function (useSourceMap) {
  var list = []; // return the list of modules as css string

  list.toString = function toString() {
    return this.map(function (item) {
      var content = cssWithMappingToString(item, useSourceMap);

      if (item[2]) {
        return "@media ".concat(item[2], " {").concat(content, "}");
      }

      return content;
    }).join('');
  }; // import a list of modules into the list
  // eslint-disable-next-line func-names


  list.i = function (modules, mediaQuery, dedupe) {
    if (typeof modules === 'string') {
      // eslint-disable-next-line no-param-reassign
      modules = [[null, modules, '']];
    }

    var alreadyImportedModules = {};

    if (dedupe) {
      for (var i = 0; i < this.length; i++) {
        // eslint-disable-next-line prefer-destructuring
        var id = this[i][0];

        if (id != null) {
          alreadyImportedModules[id] = true;
        }
      }
    }

    for (var _i = 0; _i < modules.length; _i++) {
      var item = [].concat(modules[_i]);

      if (dedupe && alreadyImportedModules[item[0]]) {
        // eslint-disable-next-line no-continue
        continue;
      }

      if (mediaQuery) {
        if (!item[2]) {
          item[2] = mediaQuery;
        } else {
          item[2] = "".concat(mediaQuery, " and ").concat(item[2]);
        }
      }

      list.push(item);
    }
  };

  return list;
};

function cssWithMappingToString(item, useSourceMap) {
  var content = item[1] || ''; // eslint-disable-next-line prefer-destructuring

  var cssMapping = item[3];

  if (!cssMapping) {
    return content;
  }

  if (useSourceMap && typeof btoa === 'function') {
    var sourceMapping = toComment(cssMapping);
    var sourceURLs = cssMapping.sources.map(function (source) {
      return "/*# sourceURL=".concat(cssMapping.sourceRoot || '').concat(source, " */");
    });
    return [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');
  }

  return [content].join('\\n');
} // Adapted from convert-source-map (MIT)


function toComment(sourceMap) {
  // eslint-disable-next-line no-undef
  var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));
  var data = "sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(base64);
  return "/*# ".concat(data, " */");
}

//# sourceURL=webpack://AnyButton/./node_modules/css-loader/dist/runtime/api.js?`)},"./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js":function(module,exports,__webpack_require__){eval(`

var isOldIE = function isOldIE() {
  var memo;
  return function memorize() {
    if (typeof memo === 'undefined') {
      // Test for IE <= 9 as proposed by Browserhacks
      // @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805
      // Tests for existence of standard globals is to allow style-loader
      // to operate correctly into non-standard environments
      // @see https://github.com/webpack-contrib/style-loader/issues/177
      memo = Boolean(window && document && document.all && !window.atob);
    }

    return memo;
  };
}();

var getTarget = function getTarget() {
  var memo = {};
  return function memorize(target) {
    if (typeof memo[target] === 'undefined') {
      var styleTarget = document.querySelector(target); // Special case to return head of iframe instead of iframe itself

      if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {
        try {
          // This will throw an exception if access to iframe is blocked
          // due to cross-origin restrictions
          styleTarget = styleTarget.contentDocument.head;
        } catch (e) {
          // istanbul ignore next
          styleTarget = null;
        }
      }

      memo[target] = styleTarget;
    }

    return memo[target];
  };
}();

var stylesInDom = [];

function getIndexByIdentifier(identifier) {
  var result = -1;

  for (var i = 0; i < stylesInDom.length; i++) {
    if (stylesInDom[i].identifier === identifier) {
      result = i;
      break;
    }
  }

  return result;
}

function modulesToDom(list, options) {
  var idCountMap = {};
  var identifiers = [];

  for (var i = 0; i < list.length; i++) {
    var item = list[i];
    var id = options.base ? item[0] + options.base : item[0];
    var count = idCountMap[id] || 0;
    var identifier = "".concat(id, " ").concat(count);
    idCountMap[id] = count + 1;
    var index = getIndexByIdentifier(identifier);
    var obj = {
      css: item[1],
      media: item[2],
      sourceMap: item[3]
    };

    if (index !== -1) {
      stylesInDom[index].references++;
      stylesInDom[index].updater(obj);
    } else {
      stylesInDom.push({
        identifier: identifier,
        updater: addStyle(obj, options),
        references: 1
      });
    }

    identifiers.push(identifier);
  }

  return identifiers;
}

function insertStyleElement(options) {
  var style = document.createElement('style');
  var attributes = options.attributes || {};

  if (typeof attributes.nonce === 'undefined') {
    var nonce =  true ? __webpack_require__.nc : undefined;

    if (nonce) {
      attributes.nonce = nonce;
    }
  }

  Object.keys(attributes).forEach(function (key) {
    style.setAttribute(key, attributes[key]);
  });

  if (typeof options.insert === 'function') {
    options.insert(style);
  } else {
    var target = getTarget(options.insert || 'head');

    if (!target) {
      throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");
    }

    target.appendChild(style);
  }

  return style;
}

function removeStyleElement(style) {
  // istanbul ignore if
  if (style.parentNode === null) {
    return false;
  }

  style.parentNode.removeChild(style);
}
/* istanbul ignore next  */


var replaceText = function replaceText() {
  var textStore = [];
  return function replace(index, replacement) {
    textStore[index] = replacement;
    return textStore.filter(Boolean).join('\\n');
  };
}();

function applyToSingletonTag(style, index, remove, obj) {
  var css = remove ? '' : obj.media ? "@media ".concat(obj.media, " {").concat(obj.css, "}") : obj.css; // For old IE

  /* istanbul ignore if  */

  if (style.styleSheet) {
    style.styleSheet.cssText = replaceText(index, css);
  } else {
    var cssNode = document.createTextNode(css);
    var childNodes = style.childNodes;

    if (childNodes[index]) {
      style.removeChild(childNodes[index]);
    }

    if (childNodes.length) {
      style.insertBefore(cssNode, childNodes[index]);
    } else {
      style.appendChild(cssNode);
    }
  }
}

function applyToTag(style, options, obj) {
  var css = obj.css;
  var media = obj.media;
  var sourceMap = obj.sourceMap;

  if (media) {
    style.setAttribute('media', media);
  } else {
    style.removeAttribute('media');
  }

  if (sourceMap && typeof btoa !== 'undefined') {
    css += "\\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), " */");
  } // For old IE

  /* istanbul ignore if  */


  if (style.styleSheet) {
    style.styleSheet.cssText = css;
  } else {
    while (style.firstChild) {
      style.removeChild(style.firstChild);
    }

    style.appendChild(document.createTextNode(css));
  }
}

var singleton = null;
var singletonCounter = 0;

function addStyle(obj, options) {
  var style;
  var update;
  var remove;

  if (options.singleton) {
    var styleIndex = singletonCounter++;
    style = singleton || (singleton = insertStyleElement(options));
    update = applyToSingletonTag.bind(null, style, styleIndex, false);
    remove = applyToSingletonTag.bind(null, style, styleIndex, true);
  } else {
    style = insertStyleElement(options);
    update = applyToTag.bind(null, style, options);

    remove = function remove() {
      removeStyleElement(style);
    };
  }

  update(obj);
  return function updateStyle(newObj) {
    if (newObj) {
      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap) {
        return;
      }

      update(obj = newObj);
    } else {
      remove();
    }
  };
}

module.exports = function (list, options) {
  options = options || {}; // Force single-tag solution on IE6-9, which has a hard limit on the # of <style>
  // tags it will allow on a page

  if (!options.singleton && typeof options.singleton !== 'boolean') {
    options.singleton = isOldIE();
  }

  list = list || [];
  var lastIdentifiers = modulesToDom(list, options);
  return function update(newList) {
    newList = newList || [];

    if (Object.prototype.toString.call(newList) !== '[object Array]') {
      return;
    }

    for (var i = 0; i < lastIdentifiers.length; i++) {
      var identifier = lastIdentifiers[i];
      var index = getIndexByIdentifier(identifier);
      stylesInDom[index].references--;
    }

    var newLastIdentifiers = modulesToDom(newList, options);

    for (var _i = 0; _i < lastIdentifiers.length; _i++) {
      var _identifier = lastIdentifiers[_i];

      var _index = getIndexByIdentifier(_identifier);

      if (stylesInDom[_index].references === 0) {
        stylesInDom[_index].updater();

        stylesInDom.splice(_index, 1);
      }
    }

    lastIdentifiers = newLastIdentifiers;
  };
};

//# sourceURL=webpack://AnyButton/./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js?`)},"./src/index.css":function(module,exports,__webpack_require__){eval(`var api = __webpack_require__(/*! ../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js */ "./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js");
            var content = __webpack_require__(/*! !../node_modules/css-loader/dist/cjs.js!./index.css */ "./node_modules/css-loader/dist/cjs.js!./src/index.css");

            content = content.__esModule ? content.default : content;

            if (typeof content === 'string') {
              content = [[module.i, content, '']];
            }

var options = {};

options.insert = "head";
options.singleton = false;

var update = api(content, options);



module.exports = content.locals || {};

//# sourceURL=webpack://AnyButton/./src/index.css?`)},"./src/index.js":function(module,__webpack_exports__,__webpack_require__){eval(`__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return AnyButton; });
/* harmony import */ var _index_css__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index.css */ "./src/index.css");
/* harmony import */ var _index_css__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_index_css__WEBPACK_IMPORTED_MODULE_0__);
function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }

function _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _iterableToArray(iter) { if (typeof Symbol !== "undefined" && Symbol.iterator in Object(iter)) return Array.from(iter); }

function _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }



var AnyButton = /*#__PURE__*/function () {
  _createClass(AnyButton, [{
    key: "validate",

    /**
     * 
     * @param savedData
     * @returns {boolean}
     */
    value: function validate(savedData) {
      if (this._data.link === "" || this._data.text === "") {
        return false;
      }

      return true;
    }
    /**
     *
     * @param block
     * @returns {{caption: string, text: string, alignment: string}}
     */

  }, {
    key: "save",
    value: function save(block) {
      return this._data;
    }
    /**
     * 
     * @returns {{link: boolean, text: boolean}}
     */

  }, {
    key: "data",

    /**
     *
     * @param data
     */
    set: function set(data) {
      this._data = Object.assign({}, {
        link: this.api.sanitizer.clean(data.link || "", AnyButton.sanitize),
        text: this.api.sanitizer.clean(data.text || "", AnyButton.sanitize)
      });
    }
    /**
     *
     * @returns {{text: string, link: string}}
     */
    ,
    get: function get() {
      return this._data;
    }
  }], [{
    key: "toolbox",

    /**
     *
     * @returns {{icon: string, title: string}}
     */
    get: function get() {
      return {
        title: "Button",
        icon: '<svg xmlns="http://www.w3.org/2000/svg" id="Layer_1" enable-background="new 0 0 512 512" height="20" viewBox="0 0 512 512" width="20"><path d="m237.102 366v-90.018h-90c-11.046 0-20-8.954-20-20s8.954-20 20-20h90v-90.982c0-11.046 8.954-20 20-20s20 8.954 20 20v90.982h90c11.046 0 20 8.954 20 20s-8.954 20-20 20h-90v90.018c0 11.046-8.954 20-20 20s-20-8.954-20-20zm254.898-15c11.046 0 20-8.954 20-20v-251c0-44.112-35.888-80-80-80h-352c-44.112 0-80 35.888-80 80v352c0 44.112 35.888 80 80 80h352c44.112 0 80-35.888 80-80 0-11.046-8.954-20-20-20s-20 8.954-20 20c0 22.056-17.944 40-40 40h-352c-22.056 0-40-17.944-40-40v-352c0-22.056 17.944-40 40-40h352c22.056 0 40 17.944 40 40v251c0 11.046 8.954 20 20 20z"/></svg>'
      };
    }
    /**
     * Returns true to notify the core that read-only mode is supported
     *
     * @return {boolean}
     */

  }, {
    key: "isReadOnlySupported",
    get: function get() {
      return true;
    }
    /**
     *
     * @returns {boolean}
     */

  }, {
    key: "enableLineBreaks",
    get: function get() {
      return false;
    }
    /**
     *
     * @returns {{EDIT: number, VIEW: number}}
     * @constructor
     */

  }, {
    key: "STATE",
    get: function get() {
      return {
        EDIT: 0,
        VIEW: 1
      };
    }
  }, {
    key: "sanitize",
    get: function get() {
      return {
        text: false,
        link: false
      };
    }
    /**
     *
     * @param data
     * @param config
     * @param api
     * @param readOnly
     */

  }]);

  function AnyButton(_ref) {
    var data = _ref.data,
        config = _ref.config,
        api = _ref.api,
        readOnly = _ref.readOnly;

    _classCallCheck(this, AnyButton);

    this.api = api;
    this.readOnly = readOnly;
    this.nodes = {
      wrapper: null,
      container: null,
      inputHolder: null,
      toggleHolder: null,
      anyButtonHolder: null,
      textInput: null,
      linkInput: null,
      registButton: null,
      anyButton: null
    }; //css overwrite

    var _CSS = {
      baseClass: this.api.styles.block,
      hide: "hide",
      btn: "btn",
      container: "anyButtonContainer",
      input: "anyButtonContainer__input",
      inputHolder: "anyButtonContainer__inputHolder",
      inputText: "anyButtonContainer__input--text",
      inputLink: "anyButtonContainer__input--link",
      registButton: "anyButtonContainer__registerButton",
      anyButtonHolder: "anyButtonContainer__anyButtonHolder",
      btnColor: "btn--default",
      toggleSwitch: "toggle-switch",
      toggleInput: "toggle-input",
      toggleLabel: "toggle-label"
    };
    this.CSS = Object.assign(_CSS, config.css);
    this.data = {
      link: "",
      text: ""
    };
    this.data = data;
  }

  _createClass(AnyButton, [{
    key: "render",
    value: function render() {
      this.nodes.wrapper = this.make('div', this.CSS.baseClass);
      this.nodes.container = this.make('div', this.CSS.container); //twitter-embed-tool
      //

      this.nodes.inputHolder = this.makeInputHolder(); //toggle

      this.nodes.toggleHolder = this.makeToggle(); //display button

      this.nodes.anyButtonHolder = this.makeAnyButtonHolder();
      this.nodes.container.appendChild(this.nodes.toggleHolder);
      this.nodes.container.appendChild(this.nodes.inputHolder);
      this.nodes.container.appendChild(this.nodes.anyButtonHolder);

      if (this._data.link !== "") {
        this.init();
        this.show(AnyButton.STATE.VIEW);
      }

      this.nodes.wrapper.appendChild(this.nodes.container);
      return this.nodes.wrapper;
    }
  }, {
    key: "makeInputHolder",
    value: function makeInputHolder() {
      var _this = this;

      var inputHolder = this.make('div', [this.CSS.inputHolder]);
      this.nodes.textInput = this.make('div', [this.api.styles.input, this.CSS.input, this.CSS.inputText], {
        contentEditable: !this.readOnly
      });
      this.nodes.textInput.dataset.placeholder = this.api.i18n.t('Button Text');
      this.nodes.linkInput = this.make('div', [this.api.styles.input, this.CSS.input, this.CSS.inputLink], {
        contentEditable: !this.readOnly
      });
      this.nodes.linkInput.dataset.placeholder = this.api.i18n.t('Link Url');
      this.nodes.registButton = this.make('button', [this.api.styles.button, this.CSS.registButton]);
      this.nodes.registButton.type = 'button';
      this.nodes.registButton.textContent = this.api.i18n.t('Set');
      this.nodes.registButton.addEventListener('click', function (event) {
        _this.data = {
          "link": _this.nodes.linkInput.textContent,
          "text": _this.nodes.textInput.textContent
        };

        _this.show(AnyButton.STATE.VIEW);
      });
      inputHolder.appendChild(this.nodes.textInput);
      inputHolder.appendChild(this.nodes.linkInput);
      inputHolder.appendChild(this.nodes.registButton);
      return inputHolder;
    }
  }, {
    key: "init",
    value: function init() {
      this.nodes.textInput.textContent = this._data.text;
      this.nodes.linkInput.textContent = this._data.link;
    }
  }, {
    key: "show",
    value: function show(state) {
      this.nodes.anyButton.textContent = this._data.text;
      this.nodes.anyButton.setAttribute("href", this._data.link);
      this.changeState(state);
    }
  }, {
    key: "makeAnyButtonHolder",
    value: function makeAnyButtonHolder() {
      var anyButtonHolder = this.make('div', [this.CSS.hide, this.CSS.anyButtonHolder]);
      this.nodes.anyButton = this.make('a', [this.CSS.btn, this.CSS.btnColor], {
        target: '_blank',
        rel: 'nofollow noindex noreferrer'
      });
      this.nodes.anyButton.textContent = this.api.i18n.t("Default Button");
      anyButtonHolder.appendChild(this.nodes.anyButton);
      return anyButtonHolder;
    }
  }, {
    key: "changeState",
    value: function changeState(state) {
      switch (state) {
        case AnyButton.STATE.EDIT:
          this.nodes.inputHolder.classList.remove(this.CSS.hide);
          this.nodes.anyButtonHolder.classList.add(this.CSS.hide);
          this.nodes.toggleInput.checked = 0;
          break;

        case AnyButton.STATE.VIEW:
          this.nodes.inputHolder.classList.add(this.CSS.hide);
          this.nodes.anyButtonHolder.classList.remove(this.CSS.hide);
          this.nodes.toggleInput.checked = 1;
          break;
      }
    }
  }, {
    key: "makeToggle",
    value: function makeToggle() {
      var _this2 = this;

      /**
       * <div class="toggle-switch">
       <input id="toggle" class="toggle-input" type='checkbox' />
       <label for="toggle" class="toggle-label"/>
       </div>
       */
      var toggleHolder = this.make('div', [this.CSS.toggleSwitch]);
      this.nodes.toggleInput = this.make('input', [this.CSS.toggleInput], {
        "type": "checkbox",
        "id": "toggle"
      });
      var label = this.make('label', [this.CSS.toggleLabel], {
        "for": "toggle"
      });
      this.nodes.toggleInput.addEventListener("change", function (event) {
        _this2.data = {
          "link": _this2.nodes.linkInput.textContent,
          "text": _this2.nodes.textInput.textContent
        };

        _this2.show(Number(_this2.nodes.toggleInput.checked));
      });
      toggleHolder.appendChild(this.nodes.toggleInput);
      toggleHolder.appendChild(label);
      return toggleHolder;
    }
    /**
     * node 
     * @param tagName
     * @param classNames
     * @param attributes
     * @returns {*}
     */

  }, {
    key: "make",
    value: function make(tagName) {
      var classNames = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;
      var attributes = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};
      var el = document.createElement(tagName);

      if (Array.isArray(classNames)) {
        var _el$classList;

        (_el$classList = el.classList).add.apply(_el$classList, _toConsumableArray(classNames));
      } else if (classNames) {
        el.classList.add(classNames);
      }

      for (var attrName in attributes) {
        el[attrName] = attributes[attrName];
      }

      return el;
    }
  }]);

  return AnyButton;
}();



//# sourceURL=webpack://AnyButton/./src/index.js?`)}}).default})})(bundle$5);var bundleExports$5=bundle$5.exports;const AnyButton=getDefaultExportFromCjs(bundleExports$5);var bundle$4={exports:{}};(function(Nt,s){(function(Ot,en){Nt.exports=en()})(self,()=>(()=>{var Ot={424:(rn,on,sn)=>{sn.d(on,{Z:()=>dn});var an=sn(81),ln=sn.n(an),cn=sn(645),un=sn.n(cn)()(ln());un.push([rn.id,`.tooltip-tool__input{
  border: 0;
  border-radius: 0 0 4px 4px;
  border-top: 1px solid rgba(201,201,204,.48);
}

.tooltip-tool__span{
  padding: 3px;
  border-radius: 6px;
}

.tooltip-tool__underline{
  text-decoration: underline;
}

.tooltip-color::before {
  background-color: transparent;
}

.tooltip-color::after {
  background-color: transparent;
}

.tooltip-text-color {
  color: transparent;
}

.cdx-tooltip {
  display: inline-block;
}
`,""]);const dn=un},645:rn=>{rn.exports=function(on){var sn=[];return sn.toString=function(){return this.map(function(an){var ln="",cn=an[5]!==void 0;return an[4]&&(ln+="@supports (".concat(an[4],") {")),an[2]&&(ln+="@media ".concat(an[2]," {")),cn&&(ln+="@layer".concat(an[5].length>0?" ".concat(an[5]):""," {")),ln+=on(an),cn&&(ln+="}"),an[2]&&(ln+="}"),an[4]&&(ln+="}"),ln}).join("")},sn.i=function(an,ln,cn,un,dn){typeof an=="string"&&(an=[[null,an,void 0]]);var hn={};if(cn)for(var fn=0;fn<this.length;fn++){var mn=this[fn][0];mn!=null&&(hn[mn]=!0)}for(var gn=0;gn<an.length;gn++){var pn=[].concat(an[gn]);cn&&hn[pn[0]]||(dn!==void 0&&(pn[5]===void 0||(pn[1]="@layer".concat(pn[5].length>0?" ".concat(pn[5]):""," {").concat(pn[1],"}")),pn[5]=dn),ln&&(pn[2]&&(pn[1]="@media ".concat(pn[2]," {").concat(pn[1],"}")),pn[2]=ln),un&&(pn[4]?(pn[1]="@supports (".concat(pn[4],") {").concat(pn[1],"}"),pn[4]=un):pn[4]="".concat(un)),sn.push(pn))}},sn}},81:rn=>{rn.exports=function(on){return on[1]}},379:rn=>{var on=[];function sn(cn){for(var un=-1,dn=0;dn<on.length;dn++)if(on[dn].identifier===cn){un=dn;break}return un}function an(cn,un){for(var dn={},hn=[],fn=0;fn<cn.length;fn++){var mn=cn[fn],gn=un.base?mn[0]+un.base:mn[0],pn=dn[gn]||0,_n="".concat(gn," ").concat(pn);dn[gn]=pn+1;var vn=sn(_n),bn={css:mn[1],media:mn[2],sourceMap:mn[3],supports:mn[4],layer:mn[5]};if(vn!==-1)on[vn].references++,on[vn].updater(bn);else{var wn=ln(bn,un);un.byIndex=fn,on.splice(fn,0,{identifier:_n,updater:wn,references:1})}hn.push(_n)}return hn}function ln(cn,un){var dn=un.domAPI(un);return dn.update(cn),function(hn){if(hn){if(hn.css===cn.css&&hn.media===cn.media&&hn.sourceMap===cn.sourceMap&&hn.supports===cn.supports&&hn.layer===cn.layer)return;dn.update(cn=hn)}else dn.remove()}}rn.exports=function(cn,un){var dn=an(cn=cn||[],un=un||{});return function(hn){hn=hn||[];for(var fn=0;fn<dn.length;fn++){var mn=sn(dn[fn]);on[mn].references--}for(var gn=an(hn,un),pn=0;pn<dn.length;pn++){var _n=sn(dn[pn]);on[_n].references===0&&(on[_n].updater(),on.splice(_n,1))}dn=gn}}},569:rn=>{var on={};rn.exports=function(sn,an){var ln=function(cn){if(on[cn]===void 0){var un=document.querySelector(cn);if(window.HTMLIFrameElement&&un instanceof window.HTMLIFrameElement)try{un=un.contentDocument.head}catch{un=null}on[cn]=un}return on[cn]}(sn);if(!ln)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");ln.appendChild(an)}},216:rn=>{rn.exports=function(on){var sn=document.createElement("style");return on.setAttributes(sn,on.attributes),on.insert(sn,on.options),sn}},575:rn=>{rn.exports=function(on,sn){Object.keys(sn).forEach(function(an){on.setAttribute(an,sn[an])})}},795:rn=>{rn.exports=function(on){var sn=on.insertStyleElement(on);return{update:function(an){(function(ln,cn,un){var dn="";un.supports&&(dn+="@supports (".concat(un.supports,") {")),un.media&&(dn+="@media ".concat(un.media," {"));var hn=un.layer!==void 0;hn&&(dn+="@layer".concat(un.layer.length>0?" ".concat(un.layer):""," {")),dn+=un.css,hn&&(dn+="}"),un.media&&(dn+="}"),un.supports&&(dn+="}");var fn=un.sourceMap;fn&&typeof btoa<"u"&&(dn+=`
/*# sourceMappingURL=data:application/json;base64,`.concat(btoa(unescape(encodeURIComponent(JSON.stringify(fn))))," */")),cn.styleTagTransform(dn,ln,cn.options)})(sn,on,an)},remove:function(){(function(an){if(an.parentNode===null)return!1;an.parentNode.removeChild(an)})(sn)}}}},589:rn=>{rn.exports=function(on,sn){if(sn.styleSheet)sn.styleSheet.cssText=on;else{for(;sn.firstChild;)sn.removeChild(sn.firstChild);sn.appendChild(document.createTextNode(on))}}},980:rn=>{rn.exports='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="16" height="14" viewBox="0 -5 21 30"><path fill="currentColor" stroke-width="0" d="M4,2H20A2,2 0 0,1 22,4V16A2,2 0 0,1 20,18H16L12,22L8,18H4A2,2 0 0,1 2,16V4A2,2 0 0,1 4,2M4,4V16H8.83L12,19.17L15.17,16H20V4H4M6,7H18V9H6V7M6,11H16V13H6V11Z"></path></svg>'}},en={};function tn(rn){var on=en[rn];if(on!==void 0)return on.exports;var sn=en[rn]={id:rn,exports:{}};return Ot[rn](sn,sn.exports,tn),sn.exports}tn.n=rn=>{var on=rn&&rn.__esModule?()=>rn.default:()=>rn;return tn.d(on,{a:on}),on},tn.d=(rn,on)=>{for(var sn in on)tn.o(on,sn)&&!tn.o(rn,sn)&&Object.defineProperty(rn,sn,{enumerable:!0,get:on[sn]})},tn.o=(rn,on)=>Object.prototype.hasOwnProperty.call(rn,on);var nn={};return(()=>{tn.d(nn,{default:()=>Sn});var rn=tn(379),on=tn.n(rn),sn=tn(795),an=tn.n(sn),ln=tn(569),cn=tn.n(ln),un=tn(575),dn=tn.n(un),hn=tn(216),fn=tn.n(hn),mn=tn(589),gn=tn.n(mn),pn=tn(424),_n={attributes:{id:"editorjs-tooltip"}};_n.styleTagTransform=gn(),_n.setAttributes=dn(),_n.insert=cn().bind(null,"head"),_n.domAPI=an(),_n.insertStyleElement=fn(),on()(pn.Z,_n),pn.Z&&pn.Z.locals&&pn.Z.locals;var vn=tn(980),bn=tn.n(vn);function wn(kn,En){for(var In=0;In<En.length;In++){var An=En[In];An.enumerable=An.enumerable||!1,An.configurable=!0,"value"in An&&(An.writable=!0),Object.defineProperty(kn,An.key,An)}}var Sn=function(){function kn(Rn){var Nn,Vn,$n,jn=Rn.api,Ln=Rn.config,Pn=Ln===void 0?{}:Ln;(function(zn,qn){if(!(zn instanceof qn))throw new TypeError("Cannot call a class as a function")})(this,kn),this.api=jn,this.button=null,this._state=!1,this.spanTooltip=null;var Bn=Pn.location,Gn=Bn===void 0?"bottom":Bn;this.tooltipLocation=Gn,this.highlightColor=Pn.highlightColor,this.underline=(Nn=Pn.underline)!==null&&Nn!==void 0&&Nn,this.backgroundColor=Pn.backgroundColor,this.textColor=Pn.textColor,this.editorId=(Vn=Pn.holder)!==null&&Vn!==void 0?Vn:"editorjs",this.placeholder=($n=Pn.placeholder)!==null&&$n!==void 0?$n:"Add a tooltip",this.tag="SPAN",this.CSS={input:"tooltip-tool__input",tooltip:"cdx-tooltip",span:"tooltip-tool__span",underline:"tooltip-tool__underline"},this.tooltipsObserver(),(this.backgroundColor||this.textColor)&&this.customTooltip()}var En,In,An;return En=kn,In=[{key:"state",get:function(){return this._state},set:function(Rn){this._state=Rn;var Nn=this.button,Vn=this.api.styles.inlineToolButtonActive;Nn.classList.toggle(Vn,Rn)}},{key:"customTooltip",value:function(){var Rn=this,Nn=document.querySelector(".ct"),Vn=document.querySelector(".ct__content");new MutationObserver(function($n){$n.forEach(function(jn){if(jn.type==="childList"){var Ln=Vn.textContent;document.querySelector('[data-tooltip="'.concat(Ln,'"]'))?(Rn.backgroundColor&&Rn.setTooltipColor(),Rn.textColor&&Rn.setTooltipTextColor()):(Nn.classList.remove("tooltip-color"),Vn.classList.remove("tooltip-text-color"))}})}).observe(Vn,{childList:!0})}},{key:"tooltipSheet",value:function(){var Rn=document.styleSheets;return Object.values(Rn).filter(function(Nn){return Nn.ownerNode.id==="editorjs-tooltip"})}},{key:"tooltipCssRule",value:function(Rn){var Nn=this.tooltipSheet();return Object.values(Nn[0].cssRules).filter(function(Vn){return Vn.selectorText===Rn})}},{key:"setTooltipColor",value:function(){var Rn=document.querySelector(".ct"),Nn=this.tooltipCssRule(".tooltip-color::before"),Vn=this.tooltipCssRule(".tooltip-color::after");Nn[0].style.setProperty("background-color",this.backgroundColor),Vn[0].style.setProperty("background-color",this.backgroundColor),Rn.classList.add("tooltip-color")}},{key:"setTooltipTextColor",value:function(){var Rn=this.tooltipCssRule(".tooltip-text-color"),Nn=document.querySelector(".ct__content");Rn[0].style.setProperty("color",this.textColor),Nn.classList.add("tooltip-text-color")}},{key:"tooltipsObserver",value:function(){var Rn=this,Nn=document.getElementById(this.editorId);new MutationObserver(function(Vn){Vn.forEach(function($n){$n.type==="childList"&&$n.target.classList.contains("codex-editor__redactor")&&document.querySelectorAll(".cdx-tooltip").forEach(function(jn){return Rn.createTooltip(jn.dataset.tooltip,jn)})})}).observe(Nn,{childList:!0,subtree:!0})}},{key:"createTooltip",value:function(Rn){var Nn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.spanTooltip;this.spanTooltip?(this.spanTooltip.dataset.tooltip=Rn,this.setBackgroundColor(this.spanTooltip),this.setUnderlineDecoration(this.spanTooltip)):(this.setBackgroundColor(Nn),this.setUnderlineDecoration(Nn));var Vn=this.tooltipLocation;this.api.tooltip.onHover(Nn,Rn,{placement:Vn})}},{key:"setBackgroundColor",value:function(Rn){var Nn=Rn;Nn.childElementCount>0?(Nn.firstChild.classList.add(this.CSS.span),Nn.firstChild.style.background=this.highlightColor):(Nn.classList.add(this.CSS.span),Nn.style.background=this.highlightColor)}},{key:"setUnderlineDecoration",value:function(Rn){var Nn=Rn;this.underline&&(Nn.childElementCount>0?Nn.firstChild.classList.add(this.CSS.underline):Nn.classList.add(this.CSS.underline))}},{key:"render",value:function(){this.button=document.createElement("button"),this.button.type="button",this.button.innerHTML=bn();var Rn=this.api.styles.inlineToolButton;return this.button.classList.add(Rn),this.button}},{key:"surround",value:function(Rn){this.state?this.unwrap(Rn):this.wrap(Rn)}},{key:"wrap",value:function(Rn){var Nn=Rn.extractContents();this.spanTooltip=document.createElement(this.tag),this.spanTooltip.classList.add(this.CSS.tooltip),this.spanTooltip.appendChild(Nn),Rn.insertNode(this.spanTooltip),this.api.selection.expandToTag(this.spanTooltip)}},{key:"unwrap",value:function(Rn){this.spanTooltip=this.api.selection.findParentTag(this.tag,this.CSS.tooltip);var Nn=Rn.extractContents();this.spanTooltip.remove(),Rn.insertNode(Nn)}},{key:"checkState",value:function(){this.spanTooltip=this.api.selection.findParentTag(this.tag),this.state=!!this.spanTooltip,this.state?this.showActions():this.hideActions()}},{key:"renderActions",value:function(){if(this.spanTooltip=this.api.selection.findParentTag(this.tag),this.tooltipInput=document.createElement("input"),this.tooltipInput.placeholder=this.placeholder,this.tooltipInput.classList.add(this.api.styles.input),this.tooltipInput.classList.add(this.CSS.input),this.spanTooltip){var Rn=this.spanTooltip.dataset.tooltip;this.tooltipInput.value=Rn}return this.tooltipInput.hidden=!0,this.tooltipInput}},{key:"showActions",value:function(){var Rn=this;this.tooltipInput.hidden=!1,this.api.listeners.on(this.tooltipInput,"keydown",function(Nn){if(Nn.key==="Enter"){var Vn=Rn.tooltipInput.value;Rn.createTooltip(Vn),Rn.closeToolbar()}},!1)}},{key:"hideActions",value:function(){this.tooltipInput.hidden=!0}},{key:"closeToolbar",value:function(){document.querySelector(".ce-inline-toolbar--showed").classList.remove("ce-inline-toolbar--showed")}}],An=[{key:"isInline",get:function(){return!0}},{key:"sanitize",get:function(){return{span:function(Rn){return Rn.classList.remove("tooltip-tool__span","tooltip-tool__underline"),{class:!0,"data-tooltip":!0}}}}}],In&&wn(En.prototype,In),An&&wn(En,An),Object.defineProperty(En,"prototype",{writable:!1}),kn}()})(),nn.default})())})(bundle$4);var bundleExports$4=bundle$4.exports;const Tooltip=getDefaultExportFromCjs(bundleExports$4);var bundle$3={exports:{}};(function(Nt,s){(function(Ot,en){Nt.exports=en()})(self,function(){return(()=>{var Ot={424:(rn,on,sn)=>{sn.r(on),sn.d(on,{default:()=>dn});var an=sn(81),ln=sn.n(an),cn=sn(645),un=sn.n(cn)()(ln());un.push([rn.id,`.ce-block--drop-target .ce-block__content:before {
  content: "";
  position: absolute;
  top: 50%;
  left: -20px;
  margin-top: -1px;
  height: 8px;
  width: 8px;
  border: solid #a0a0a0;
  border-width: 1px 1px 0 0;
  -webkit-transform-origin: right;
  transform-origin: right;
  -webkit-transform: rotate(45deg);
  transform: rotate(45deg);
}

.ce-block--drop-target .ce-block__content:after {
  background: none;
}`,""]);const dn=un},645:rn=>{rn.exports=function(on){var sn=[];return sn.toString=function(){return this.map(function(an){var ln="",cn=an[5]!==void 0;return an[4]&&(ln+="@supports (".concat(an[4],") {")),an[2]&&(ln+="@media ".concat(an[2]," {")),cn&&(ln+="@layer".concat(an[5].length>0?" ".concat(an[5]):""," {")),ln+=on(an),cn&&(ln+="}"),an[2]&&(ln+="}"),an[4]&&(ln+="}"),ln}).join("")},sn.i=function(an,ln,cn,un,dn){typeof an=="string"&&(an=[[null,an,void 0]]);var hn={};if(cn)for(var fn=0;fn<this.length;fn++){var mn=this[fn][0];mn!=null&&(hn[mn]=!0)}for(var gn=0;gn<an.length;gn++){var pn=[].concat(an[gn]);cn&&hn[pn[0]]||(dn!==void 0&&(pn[5]===void 0||(pn[1]="@layer".concat(pn[5].length>0?" ".concat(pn[5]):""," {").concat(pn[1],"}")),pn[5]=dn),ln&&(pn[2]&&(pn[1]="@media ".concat(pn[2]," {").concat(pn[1],"}")),pn[2]=ln),un&&(pn[4]?(pn[1]="@supports (".concat(pn[4],") {").concat(pn[1],"}"),pn[4]=un):pn[4]="".concat(un)),sn.push(pn))}},sn}},81:rn=>{rn.exports=function(on){return on[1]}},406:(rn,on,sn)=>{var an=sn(424);typeof an=="string"&&(an=[[rn.id,an,""]]),sn(723)(an,{hmr:!0,transform:void 0,insertInto:void 0}),an.locals&&(rn.exports=an.locals)},723:(rn,on,sn)=>{var an,ln,cn={},un=(an=function(){return window&&document&&document.all&&!window.atob},function(){return ln===void 0&&(ln=an.apply(this,arguments)),ln}),dn=function($n){return document.querySelector($n)},hn=function($n){var jn={};return function(Ln){if(typeof Ln=="function")return Ln();if(jn[Ln]===void 0){var Pn=dn.call(this,Ln);if(window.HTMLIFrameElement&&Pn instanceof window.HTMLIFrameElement)try{Pn=Pn.contentDocument.head}catch{Pn=null}jn[Ln]=Pn}return jn[Ln]}}(),fn=null,mn=0,gn=[],pn=sn(947);function _n($n,jn){for(var Ln=0;Ln<$n.length;Ln++){var Pn=$n[Ln],Bn=cn[Pn.id];if(Bn){Bn.refs++;for(var Gn=0;Gn<Bn.parts.length;Gn++)Bn.parts[Gn](Pn.parts[Gn]);for(;Gn<Pn.parts.length;Gn++)Bn.parts.push(En(Pn.parts[Gn],jn))}else{var zn=[];for(Gn=0;Gn<Pn.parts.length;Gn++)zn.push(En(Pn.parts[Gn],jn));cn[Pn.id]={id:Pn.id,refs:1,parts:zn}}}}function vn($n,jn){for(var Ln=[],Pn={},Bn=0;Bn<$n.length;Bn++){var Gn=$n[Bn],zn=jn.base?Gn[0]+jn.base:Gn[0],qn={css:Gn[1],media:Gn[2],sourceMap:Gn[3]};Pn[zn]?Pn[zn].parts.push(qn):Ln.push(Pn[zn]={id:zn,parts:[qn]})}return Ln}function bn($n,jn){var Ln=hn($n.insertInto);if(!Ln)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var Pn=gn[gn.length-1];if($n.insertAt==="top")Pn?Pn.nextSibling?Ln.insertBefore(jn,Pn.nextSibling):Ln.appendChild(jn):Ln.insertBefore(jn,Ln.firstChild),gn.push(jn);else if($n.insertAt==="bottom")Ln.appendChild(jn);else{if(typeof $n.insertAt!="object"||!$n.insertAt.before)throw new Error(`[Style Loader]

 Invalid value for parameter 'insertAt' ('options.insertAt') found.
 Must be 'top', 'bottom', or Object.
 (https://github.com/webpack-contrib/style-loader#insertat)
`);var Bn=hn($n.insertInto+" "+$n.insertAt.before);Ln.insertBefore(jn,Bn)}}function wn($n){if($n.parentNode===null)return!1;$n.parentNode.removeChild($n);var jn=gn.indexOf($n);jn>=0&&gn.splice(jn,1)}function Sn($n){var jn=document.createElement("style");return $n.attrs.type===void 0&&($n.attrs.type="text/css"),kn(jn,$n.attrs),bn($n,jn),jn}function kn($n,jn){Object.keys(jn).forEach(function(Ln){$n.setAttribute(Ln,jn[Ln])})}function En($n,jn){var Ln,Pn,Bn,Gn;if(jn.transform&&$n.css){if(!(Gn=jn.transform($n.css)))return function(){};$n.css=Gn}if(jn.singleton){var zn=mn++;Ln=fn||(fn=Sn(jn)),Pn=Rn.bind(null,Ln,zn,!1),Bn=Rn.bind(null,Ln,zn,!0)}else $n.sourceMap&&typeof URL=="function"&&typeof URL.createObjectURL=="function"&&typeof URL.revokeObjectURL=="function"&&typeof Blob=="function"&&typeof btoa=="function"?(Ln=function(qn){var Jn=document.createElement("link");return qn.attrs.type===void 0&&(qn.attrs.type="text/css"),qn.attrs.rel="stylesheet",kn(Jn,qn.attrs),bn(qn,Jn),Jn}(jn),Pn=Vn.bind(null,Ln,jn),Bn=function(){wn(Ln),Ln.href&&URL.revokeObjectURL(Ln.href)}):(Ln=Sn(jn),Pn=Nn.bind(null,Ln),Bn=function(){wn(Ln)});return Pn($n),function(qn){if(qn){if(qn.css===$n.css&&qn.media===$n.media&&qn.sourceMap===$n.sourceMap)return;Pn($n=qn)}else Bn()}}rn.exports=function($n,jn){if(typeof DEBUG<"u"&&DEBUG&&typeof document!="object")throw new Error("The style-loader cannot be used in a non-browser environment");(jn=jn||{}).attrs=typeof jn.attrs=="object"?jn.attrs:{},jn.singleton||typeof jn.singleton=="boolean"||(jn.singleton=un()),jn.insertInto||(jn.insertInto="head"),jn.insertAt||(jn.insertAt="bottom");var Ln=vn($n,jn);return _n(Ln,jn),function(Pn){for(var Bn=[],Gn=0;Gn<Ln.length;Gn++){var zn=Ln[Gn];(qn=cn[zn.id]).refs--,Bn.push(qn)}for(Pn&&_n(vn(Pn,jn),jn),Gn=0;Gn<Bn.length;Gn++){var qn;if((qn=Bn[Gn]).refs===0){for(var Jn=0;Jn<qn.parts.length;Jn++)qn.parts[Jn]();delete cn[qn.id]}}}};var In,An=(In=[],function($n,jn){return In[$n]=jn,In.filter(Boolean).join(`
`)});function Rn($n,jn,Ln,Pn){var Bn=Ln?"":Pn.css;if($n.styleSheet)$n.styleSheet.cssText=An(jn,Bn);else{var Gn=document.createTextNode(Bn),zn=$n.childNodes;zn[jn]&&$n.removeChild(zn[jn]),zn.length?$n.insertBefore(Gn,zn[jn]):$n.appendChild(Gn)}}function Nn($n,jn){var Ln=jn.css,Pn=jn.media;if(Pn&&$n.setAttribute("media",Pn),$n.styleSheet)$n.styleSheet.cssText=Ln;else{for(;$n.firstChild;)$n.removeChild($n.firstChild);$n.appendChild(document.createTextNode(Ln))}}function Vn($n,jn,Ln){var Pn=Ln.css,Bn=Ln.sourceMap,Gn=jn.convertToAbsoluteUrls===void 0&&Bn;(jn.convertToAbsoluteUrls||Gn)&&(Pn=pn(Pn)),Bn&&(Pn+=`
/*# sourceMappingURL=data:application/json;base64,`+btoa(unescape(encodeURIComponent(JSON.stringify(Bn))))+" */");var zn=new Blob([Pn],{type:"text/css"}),qn=$n.href;$n.href=URL.createObjectURL(zn),qn&&URL.revokeObjectURL(qn)}},947:rn=>{rn.exports=function(on){var sn=typeof window<"u"&&window.location;if(!sn)throw new Error("fixUrls requires window.location");if(!on||typeof on!="string")return on;var an=sn.protocol+"//"+sn.host,ln=an+sn.pathname.replace(/\/[^\/]*$/,"/");return on.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(cn,un){var dn,hn=un.trim().replace(/^"(.*)"$/,function(fn,mn){return mn}).replace(/^'(.*)'$/,function(fn,mn){return mn});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(hn)?cn:(dn=hn.indexOf("//")===0?hn:hn.indexOf("/")===0?an+hn:ln+hn.replace(/^\.\//,""),"url("+JSON.stringify(dn)+")")})}}},en={};function tn(rn){var on=en[rn];if(on!==void 0)return on.exports;var sn=en[rn]={id:rn,exports:{}};return Ot[rn](sn,sn.exports,tn),sn.exports}tn.n=rn=>{var on=rn&&rn.__esModule?()=>rn.default:()=>rn;return tn.d(on,{a:on}),on},tn.d=(rn,on)=>{for(var sn in on)tn.o(on,sn)&&!tn.o(rn,sn)&&Object.defineProperty(rn,sn,{enumerable:!0,get:on[sn]})},tn.o=(rn,on)=>Object.prototype.hasOwnProperty.call(rn,on),tn.r=rn=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(rn,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(rn,"__esModule",{value:!0})};var nn={};return(()=>{function rn(sn,an){for(var ln=0;ln<an.length;ln++){var cn=an[ln];cn.enumerable=cn.enumerable||!1,cn.configurable=!0,"value"in cn&&(cn.writable=!0),Object.defineProperty(sn,cn.key,cn)}}tn.d(nn,{default:()=>on}),tn(406);var on=function(){function sn(un,dn){var hn=un.configuration,fn=un.blocks,mn=un.toolbar,gn=un.save;(function(pn,_n){if(!(pn instanceof _n))throw new TypeError("Cannot call a class as a function")})(this,sn),this.toolbar=mn,this.borderStyle=dn||"1px dashed #aaa",this.api=fn,this.holder=typeof hn.holder=="string"?document.getElementById(hn.holder):hn.holder,this.readOnly=hn.readOnly,this.startBlock=null,this.endBlock=null,this.save=gn,this.setDragListener(),this.setDropListener()}var an,ln,cn;return an=sn,cn=[{key:"isReadOnlySupported",get:function(){return!0}}],(ln=[{key:"setElementCursor",value:function(un){if(un){var dn=document.createRange(),hn=window.getSelection();dn.setStart(un.childNodes[0],0),dn.collapse(!0),hn.removeAllRanges(),hn.addRange(dn),un.focus()}}},{key:"setDragListener",value:function(){var un=this;if(!this.readOnly){var dn=this.holder.querySelector(".ce-toolbar__settings-btn");dn.setAttribute("draggable","true"),dn.addEventListener("dragstart",function(){un.startBlock=un.api.getCurrentBlockIndex()}),dn.addEventListener("drag",function(){if(un.toolbar.close(),!un.isTheOnlyBlock()){var hn=un.holder.querySelectorAll(".ce-block"),fn=un.holder.querySelector(".ce-block--drop-target");un.setElementCursor(fn),un.setBorderBlocks(hn,fn)}})}}},{key:"setBorderBlocks",value:function(un,dn){var hn=this;Object.values(un).forEach(function(fn){var mn=fn.querySelector(".ce-block__content");fn!==dn?(mn.style.removeProperty("border-top"),mn.style.removeProperty("border-bottom")):Object.keys(un).find(function(gn){return un[gn]===dn})>hn.startBlock?mn.style.borderBottom=hn.borderStyle||borderStyle:mn.style.borderTop=hn.borderStyle})}},{key:"setDropListener",value:function(){var un=this;document.addEventListener("drop",function(dn){var hn=dn.target;if(un.holder.contains(hn)&&un.startBlock!==null){var fn=un.getDropTarget(hn);if(fn){var mn=fn.querySelector(".ce-block__content");mn.style.removeProperty("border-top"),mn.style.removeProperty("border-bottom"),un.endBlock=un.getTargetPosition(fn),un.moveBlocks()}}un.startBlock=null})}},{key:"getDropTarget",value:function(un){return un.classList.contains("ce-block")?un:un.closest(".ce-block")}},{key:"getTargetPosition",value:function(un){return Array.from(un.parentNode.children).indexOf(un)}},{key:"isTheOnlyBlock",value:function(){return this.api.getBlocksCount()===1}},{key:"moveBlocks",value:function(){this.isTheOnlyBlock()||this.api.move(this.endBlock,this.startBlock)}}])&&rn(an.prototype,ln),cn&&rn(an,cn),Object.defineProperty(an,"prototype",{writable:!1}),sn}()})(),nn.default})()})})(bundle$3);var bundleExports$3=bundle$3.exports;const DragDrop=getDefaultExportFromCjs(bundleExports$3);var bundle$2={exports:{}};(function(module,exports){(function(s,Ot){module.exports=Ot()})(window,function(){return function(Nt){var s={};function Ot(en){if(s[en])return s[en].exports;var tn=s[en]={i:en,l:!1,exports:{}};return Nt[en].call(tn.exports,tn,tn.exports,Ot),tn.l=!0,tn.exports}return Ot.m=Nt,Ot.c=s,Ot.d=function(en,tn,nn){Ot.o(en,tn)||Object.defineProperty(en,tn,{enumerable:!0,get:nn})},Ot.r=function(en){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(en,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(en,"__esModule",{value:!0})},Ot.t=function(en,tn){if(tn&1&&(en=Ot(en)),tn&8||tn&4&&typeof en=="object"&&en&&en.__esModule)return en;var nn=Object.create(null);if(Ot.r(nn),Object.defineProperty(nn,"default",{enumerable:!0,value:en}),tn&2&&typeof en!="string")for(var rn in en)Ot.d(nn,rn,(function(on){return en[on]}).bind(null,rn));return nn},Ot.n=function(en){var tn=en&&en.__esModule?function(){return en.default}:function(){return en};return Ot.d(tn,"a",tn),tn},Ot.o=function(en,tn){return Object.prototype.hasOwnProperty.call(en,tn)},Ot.p="/",Ot(Ot.s="./src/Hyperlink.js")}({"./node_modules/css-loader/dist/cjs.js!./src/Hyperlink.css":function(module,exports,__webpack_require__){eval(`// Imports
var ___CSS_LOADER_API_IMPORT___ = __webpack_require__(/*! ../node_modules/css-loader/dist/runtime/api.js */ "./node_modules/css-loader/dist/runtime/api.js");
exports = ___CSS_LOADER_API_IMPORT___(false);
// Module
exports.push([module.i, ".ce-inline-tool-hyperlink-wrapper {\\r\\n    outline: none;\\r\\n    border: 0;\\r\\n    border-radius: 0 0 4px 4px;\\r\\n    margin: 0;\\r\\n    font-size: 13px;\\r\\n    padding: 10px;\\r\\n    width: 100%;\\r\\n    -webkit-box-sizing: border-box;\\r\\n    box-sizing: border-box;\\r\\n    display: none;\\r\\n    font-weight: 500;\\r\\n    border-top: 1px solid rgba(201,201,204,.48);\\r\\n}\\r\\n\\r\\n.ce-inline-tool-hyperlink-wrapper.ce-inline-tool-hyperlink-wrapper--showed {\\r\\n    display: block;\\r\\n}\\r\\n\\r\\n.ce-inline-tool-hyperlink--input,\\r\\n.ce-inline-tool-hyperlink--select-target,\\r\\n.ce-inline-tool-hyperlink--select-rel {\\r\\n    border: 1px solid rgba(201,201,204,.48);\\r\\n    -webkit-box-shadow: inset 0 1px 2px 0 rgba(35,44,72,.06);\\r\\n    box-shadow: inset 0 1px 2px 0 rgba(35,44,72,.06);\\r\\n    border-radius: 5px;\\r\\n    padding: 5px 8px;\\r\\n    margin-bottom: 10px;\\r\\n    outline: none;\\r\\n    width: 100%;\\r\\n    -webkit-box-sizing: border-box;\\r\\n    box-sizing: border-box;\\r\\n}\\r\\n\\r\\n.ce-inline-tool-hyperlink--select-target,\\r\\n.ce-inline-tool-hyperlink--select-rel {\\r\\n    width: 48%;\\r\\n    display: inline-block;\\r\\n}\\r\\n.ce-inline-tool-hyperlink--select-target {\\r\\n    margin-right: 2%;\\r\\n}\\r\\n.ce-inline-tool-hyperlink--select-rel {\\r\\n    margin-left: 2%;\\r\\n}\\r\\n\\r\\n.ce-inline-tool-hyperlink--button {\\r\\n    display: block;\\r\\n    width: 100%;\\r\\n    background-color: #34c38f;\\r\\n    color: #fff;\\r\\n    padding: 7px 0;\\r\\n    border: none;\\r\\n    text-align: center;\\r\\n    text-decoration: none;\\r\\n    font-size: 16px;\\r\\n    border-radius: 5px;\\r\\n    cursor: pointer;\\r\\n}\\r\\n", ""]);
// Exports
module.exports = exports;


//# sourceURL=webpack://Hyperlink/./src/Hyperlink.css?./node_modules/css-loader/dist/cjs.js`)},"./node_modules/css-loader/dist/runtime/api.js":function(module,exports,__webpack_require__){eval(`

/*
  MIT License http://www.opensource.org/licenses/mit-license.php
  Author Tobias Koppers @sokra
*/
// css base code, injected by the css-loader
// eslint-disable-next-line func-names
module.exports = function (useSourceMap) {
  var list = []; // return the list of modules as css string

  list.toString = function toString() {
    return this.map(function (item) {
      var content = cssWithMappingToString(item, useSourceMap);

      if (item[2]) {
        return "@media ".concat(item[2], " {").concat(content, "}");
      }

      return content;
    }).join('');
  }; // import a list of modules into the list
  // eslint-disable-next-line func-names


  list.i = function (modules, mediaQuery, dedupe) {
    if (typeof modules === 'string') {
      // eslint-disable-next-line no-param-reassign
      modules = [[null, modules, '']];
    }

    var alreadyImportedModules = {};

    if (dedupe) {
      for (var i = 0; i < this.length; i++) {
        // eslint-disable-next-line prefer-destructuring
        var id = this[i][0];

        if (id != null) {
          alreadyImportedModules[id] = true;
        }
      }
    }

    for (var _i = 0; _i < modules.length; _i++) {
      var item = [].concat(modules[_i]);

      if (dedupe && alreadyImportedModules[item[0]]) {
        // eslint-disable-next-line no-continue
        continue;
      }

      if (mediaQuery) {
        if (!item[2]) {
          item[2] = mediaQuery;
        } else {
          item[2] = "".concat(mediaQuery, " and ").concat(item[2]);
        }
      }

      list.push(item);
    }
  };

  return list;
};

function cssWithMappingToString(item, useSourceMap) {
  var content = item[1] || ''; // eslint-disable-next-line prefer-destructuring

  var cssMapping = item[3];

  if (!cssMapping) {
    return content;
  }

  if (useSourceMap && typeof btoa === 'function') {
    var sourceMapping = toComment(cssMapping);
    var sourceURLs = cssMapping.sources.map(function (source) {
      return "/*# sourceURL=".concat(cssMapping.sourceRoot || '').concat(source, " */");
    });
    return [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');
  }

  return [content].join('\\n');
} // Adapted from convert-source-map (MIT)


function toComment(sourceMap) {
  // eslint-disable-next-line no-undef
  var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));
  var data = "sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(base64);
  return "/*# ".concat(data, " */");
}

//# sourceURL=webpack://Hyperlink/./node_modules/css-loader/dist/runtime/api.js?`)},"./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js":function(module,exports,__webpack_require__){eval(`

var isOldIE = function isOldIE() {
  var memo;
  return function memorize() {
    if (typeof memo === 'undefined') {
      // Test for IE <= 9 as proposed by Browserhacks
      // @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805
      // Tests for existence of standard globals is to allow style-loader
      // to operate correctly into non-standard environments
      // @see https://github.com/webpack-contrib/style-loader/issues/177
      memo = Boolean(window && document && document.all && !window.atob);
    }

    return memo;
  };
}();

var getTarget = function getTarget() {
  var memo = {};
  return function memorize(target) {
    if (typeof memo[target] === 'undefined') {
      var styleTarget = document.querySelector(target); // Special case to return head of iframe instead of iframe itself

      if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {
        try {
          // This will throw an exception if access to iframe is blocked
          // due to cross-origin restrictions
          styleTarget = styleTarget.contentDocument.head;
        } catch (e) {
          // istanbul ignore next
          styleTarget = null;
        }
      }

      memo[target] = styleTarget;
    }

    return memo[target];
  };
}();

var stylesInDom = [];

function getIndexByIdentifier(identifier) {
  var result = -1;

  for (var i = 0; i < stylesInDom.length; i++) {
    if (stylesInDom[i].identifier === identifier) {
      result = i;
      break;
    }
  }

  return result;
}

function modulesToDom(list, options) {
  var idCountMap = {};
  var identifiers = [];

  for (var i = 0; i < list.length; i++) {
    var item = list[i];
    var id = options.base ? item[0] + options.base : item[0];
    var count = idCountMap[id] || 0;
    var identifier = "".concat(id, " ").concat(count);
    idCountMap[id] = count + 1;
    var index = getIndexByIdentifier(identifier);
    var obj = {
      css: item[1],
      media: item[2],
      sourceMap: item[3]
    };

    if (index !== -1) {
      stylesInDom[index].references++;
      stylesInDom[index].updater(obj);
    } else {
      stylesInDom.push({
        identifier: identifier,
        updater: addStyle(obj, options),
        references: 1
      });
    }

    identifiers.push(identifier);
  }

  return identifiers;
}

function insertStyleElement(options) {
  var style = document.createElement('style');
  var attributes = options.attributes || {};

  if (typeof attributes.nonce === 'undefined') {
    var nonce =  true ? __webpack_require__.nc : undefined;

    if (nonce) {
      attributes.nonce = nonce;
    }
  }

  Object.keys(attributes).forEach(function (key) {
    style.setAttribute(key, attributes[key]);
  });

  if (typeof options.insert === 'function') {
    options.insert(style);
  } else {
    var target = getTarget(options.insert || 'head');

    if (!target) {
      throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");
    }

    target.appendChild(style);
  }

  return style;
}

function removeStyleElement(style) {
  // istanbul ignore if
  if (style.parentNode === null) {
    return false;
  }

  style.parentNode.removeChild(style);
}
/* istanbul ignore next  */


var replaceText = function replaceText() {
  var textStore = [];
  return function replace(index, replacement) {
    textStore[index] = replacement;
    return textStore.filter(Boolean).join('\\n');
  };
}();

function applyToSingletonTag(style, index, remove, obj) {
  var css = remove ? '' : obj.media ? "@media ".concat(obj.media, " {").concat(obj.css, "}") : obj.css; // For old IE

  /* istanbul ignore if  */

  if (style.styleSheet) {
    style.styleSheet.cssText = replaceText(index, css);
  } else {
    var cssNode = document.createTextNode(css);
    var childNodes = style.childNodes;

    if (childNodes[index]) {
      style.removeChild(childNodes[index]);
    }

    if (childNodes.length) {
      style.insertBefore(cssNode, childNodes[index]);
    } else {
      style.appendChild(cssNode);
    }
  }
}

function applyToTag(style, options, obj) {
  var css = obj.css;
  var media = obj.media;
  var sourceMap = obj.sourceMap;

  if (media) {
    style.setAttribute('media', media);
  } else {
    style.removeAttribute('media');
  }

  if (sourceMap && typeof btoa !== 'undefined') {
    css += "\\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), " */");
  } // For old IE

  /* istanbul ignore if  */


  if (style.styleSheet) {
    style.styleSheet.cssText = css;
  } else {
    while (style.firstChild) {
      style.removeChild(style.firstChild);
    }

    style.appendChild(document.createTextNode(css));
  }
}

var singleton = null;
var singletonCounter = 0;

function addStyle(obj, options) {
  var style;
  var update;
  var remove;

  if (options.singleton) {
    var styleIndex = singletonCounter++;
    style = singleton || (singleton = insertStyleElement(options));
    update = applyToSingletonTag.bind(null, style, styleIndex, false);
    remove = applyToSingletonTag.bind(null, style, styleIndex, true);
  } else {
    style = insertStyleElement(options);
    update = applyToTag.bind(null, style, options);

    remove = function remove() {
      removeStyleElement(style);
    };
  }

  update(obj);
  return function updateStyle(newObj) {
    if (newObj) {
      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap) {
        return;
      }

      update(obj = newObj);
    } else {
      remove();
    }
  };
}

module.exports = function (list, options) {
  options = options || {}; // Force single-tag solution on IE6-9, which has a hard limit on the # of <style>
  // tags it will allow on a page

  if (!options.singleton && typeof options.singleton !== 'boolean') {
    options.singleton = isOldIE();
  }

  list = list || [];
  var lastIdentifiers = modulesToDom(list, options);
  return function update(newList) {
    newList = newList || [];

    if (Object.prototype.toString.call(newList) !== '[object Array]') {
      return;
    }

    for (var i = 0; i < lastIdentifiers.length; i++) {
      var identifier = lastIdentifiers[i];
      var index = getIndexByIdentifier(identifier);
      stylesInDom[index].references--;
    }

    var newLastIdentifiers = modulesToDom(newList, options);

    for (var _i = 0; _i < lastIdentifiers.length; _i++) {
      var _identifier = lastIdentifiers[_i];

      var _index = getIndexByIdentifier(_identifier);

      if (stylesInDom[_index].references === 0) {
        stylesInDom[_index].updater();

        stylesInDom.splice(_index, 1);
      }
    }

    lastIdentifiers = newLastIdentifiers;
  };
};

//# sourceURL=webpack://Hyperlink/./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js?`)},"./src/Hyperlink.css":function(module,exports,__webpack_require__){eval(`var api = __webpack_require__(/*! ../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js */ "./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js");
            var content = __webpack_require__(/*! !../node_modules/css-loader/dist/cjs.js!./Hyperlink.css */ "./node_modules/css-loader/dist/cjs.js!./src/Hyperlink.css");

            content = content.__esModule ? content.default : content;

            if (typeof content === 'string') {
              content = [[module.i, content, '']];
            }

var options = {};

options.insert = "head";
options.singleton = false;

var update = api(content, options);



module.exports = content.locals || {};

//# sourceURL=webpack://Hyperlink/./src/Hyperlink.css?`)},"./src/Hyperlink.js":function(module,__webpack_exports__,__webpack_require__){eval(`__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return Hyperlink; });
/* harmony import */ var _SelectionUtils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./SelectionUtils */ "./src/SelectionUtils.js");
/* harmony import */ var _Hyperlink_css__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Hyperlink.css */ "./src/Hyperlink.css");
/* harmony import */ var _Hyperlink_css__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_Hyperlink_css__WEBPACK_IMPORTED_MODULE_1__);
function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }




var Hyperlink = /*#__PURE__*/function () {
  function Hyperlink(_ref) {
    var data = _ref.data,
        config = _ref.config,
        api = _ref.api,
        readOnly = _ref.readOnly;

    _classCallCheck(this, Hyperlink);

    this.toolbar = api.toolbar;
    this.inlineToolbar = api.inlineToolbar;
    this.tooltip = api.tooltip;
    this.i18n = api.i18n;
    this.config = config;
    this.selection = new _SelectionUtils__WEBPACK_IMPORTED_MODULE_0__["default"]();
    this.commandLink = 'createLink';
    this.commandUnlink = 'unlink';
    this.CSS = {
      wrapper: 'ce-inline-tool-hyperlink-wrapper',
      wrapperShowed: 'ce-inline-tool-hyperlink-wrapper--showed',
      button: 'ce-inline-tool',
      buttonActive: 'ce-inline-tool--active',
      buttonModifier: 'ce-inline-tool--link',
      buttonUnlink: 'ce-inline-tool--unlink',
      input: 'ce-inline-tool-hyperlink--input',
      selectTarget: 'ce-inline-tool-hyperlink--select-target',
      selectRel: 'ce-inline-tool-hyperlink--select-rel',
      buttonSave: 'ce-inline-tool-hyperlink--button'
    };
    this.targetAttributes = this.config.availableTargets || ['_blank', // Opens the linked document in a new window or tab
    '_self', // Opens the linked document in the same frame as it was clicked (this is default)
    '_parent', // Opens the linked document in the parent frame
    '_top' // Opens the linked document in the full body of the window
    ];
    this.relAttributes = this.config.availableRels || ['alternate', //Provides a link to an alternate representation of the document (i.e. print page, translated or mirror)
    'author', //Provides a link to the author of the document
    'bookmark', //Permanent URL used for bookmarking
    'external', //Indicates that the referenced document is not part of the same site as the current document
    'help', //Provides a link to a help document
    'license', //Provides a link to licensing information for the document
    'next', //Provides a link to the next document in the series
    'nofollow', //Links to an unendorsed document, like a paid link. ("nofollow" is used by Google, to specify that the Google search spider should not follow that link)
    'noreferrer', //Requires that the browser should not send an HTTP referer header if the user follows the hyperlink
    'noopener', //Requires that any browsing context created by following the hyperlink must not have an opener browsing context
    'prev', //The previous document in a selection
    'search', //Links to a search tool for the document
    'tag' //A tag (keyword) for the current document
    ];
    this.nodes = {
      button: null,
      wrapper: null,
      input: null,
      selectTarget: null,
      selectRel: null,
      buttonSave: null
    };
    this.inputOpened = false;
  }

  _createClass(Hyperlink, [{
    key: "render",
    value: function render() {
      this.nodes.button = document.createElement('button');
      this.nodes.button.type = 'button';
      this.nodes.button.classList.add(this.CSS.button, this.CSS.buttonModifier);
      this.nodes.button.appendChild(this.iconSvg('link', 14, 10));
      this.nodes.button.appendChild(this.iconSvg('unlink', 15, 11));
      return this.nodes.button;
    }
  }, {
    key: "renderActions",
    value: function renderActions() {
      var _this = this;

      this.nodes.wrapper = document.createElement('div');
      this.nodes.wrapper.classList.add(this.CSS.wrapper); // Input

      this.nodes.input = document.createElement('input');
      this.nodes.input.placeholder = 'https://...';
      this.nodes.input.classList.add(this.CSS.input);
      var i; // Target

      this.nodes.selectTarget = document.createElement('select');
      this.nodes.selectTarget.classList.add(this.CSS.selectTarget);
      this.addOption(this.nodes.selectTarget, this.i18n.t('Select target'), '');

      for (i = 0; i < this.targetAttributes.length; i++) {
        this.addOption(this.nodes.selectTarget, this.targetAttributes[i], this.targetAttributes[i]);
      }

      if (!!this.config.target) {
        this.nodes.selectTarget.value = this.config.target;
      } // Rel


      this.nodes.selectRel = document.createElement('select');
      this.nodes.selectRel.classList.add(this.CSS.selectRel);
      this.addOption(this.nodes.selectRel, this.i18n.t('Select rel'), '');

      for (i = 0; i < this.relAttributes.length; i++) {
        this.addOption(this.nodes.selectRel, this.relAttributes[i], this.relAttributes[i]);
      }

      if (!!this.config.rel) {
        this.nodes.selectRel.value = this.config.rel;
      } // Button


      this.nodes.buttonSave = document.createElement('button');
      this.nodes.buttonSave.type = 'button';
      this.nodes.buttonSave.classList.add(this.CSS.buttonSave);
      this.nodes.buttonSave.innerHTML = this.i18n.t('Save');
      this.nodes.buttonSave.addEventListener('click', function (event) {
        _this.savePressed(event);
      }); // append

      this.nodes.wrapper.appendChild(this.nodes.input);
      this.nodes.wrapper.appendChild(this.nodes.selectTarget);
      this.nodes.wrapper.appendChild(this.nodes.selectRel);
      this.nodes.wrapper.appendChild(this.nodes.buttonSave);
      return this.nodes.wrapper;
    }
  }, {
    key: "surround",
    value: function surround(range) {
      if (range) {
        if (!this.inputOpened) {
          this.selection.setFakeBackground();
          this.selection.save();
        } else {
          this.selection.restore();
          this.selection.removeFakeBackground();
        }

        var parentAnchor = this.selection.findParentTag('A');

        if (parentAnchor) {
          this.selection.expandToTag(parentAnchor);
          this.unlink();
          this.closeActions();
          this.checkState();
          this.toolbar.close();
          return;
        }
      }

      this.toggleActions();
    }
  }, {
    key: "checkState",
    value: function checkState() {
      var selection = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;
      var anchorTag = this.selection.findParentTag('A');

      if (anchorTag) {
        this.nodes.button.classList.add(this.CSS.buttonUnlink);
        this.nodes.button.classList.add(this.CSS.buttonActive);
        this.openActions();
        var hrefAttr = anchorTag.getAttribute('href');
        var targetAttr = anchorTag.getAttribute('target');
        var relAttr = anchorTag.getAttribute('rel');
        this.nodes.input.value = !!hrefAttr ? hrefAttr : '';
        this.nodes.selectTarget.value = !!targetAttr ? targetAttr : '';
        this.nodes.selectRel.value = !!relAttr ? relAttr : '';
        this.selection.save();
      } else {
        this.nodes.button.classList.remove(this.CSS.buttonUnlink);
        this.nodes.button.classList.remove(this.CSS.buttonActive);
      }

      return !!anchorTag;
    }
  }, {
    key: "clear",
    value: function clear() {
      this.closeActions();
    }
  }, {
    key: "toggleActions",
    value: function toggleActions() {
      if (!this.inputOpened) {
        this.openActions(true);
      } else {
        this.closeActions(false);
      }
    }
  }, {
    key: "openActions",
    value: function openActions() {
      var needFocus = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;
      this.nodes.wrapper.classList.add(this.CSS.wrapperShowed);

      if (needFocus) {
        this.nodes.input.focus();
      }

      this.inputOpened = true;
    }
  }, {
    key: "closeActions",
    value: function closeActions() {
      var clearSavedSelection = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;

      if (this.selection.isFakeBackgroundEnabled) {
        var currentSelection = new _SelectionUtils__WEBPACK_IMPORTED_MODULE_0__["default"]();
        currentSelection.save();
        this.selection.restore();
        this.selection.removeFakeBackground();
        currentSelection.restore();
      }

      this.nodes.wrapper.classList.remove(this.CSS.wrapperShowed);
      this.nodes.input.value = '';
      this.nodes.selectTarget.value = '';
      this.nodes.selectRel.value = '';

      if (clearSavedSelection) {
        this.selection.clearSaved();
      }

      this.inputOpened = false;
    }
  }, {
    key: "savePressed",
    value: function savePressed(event) {
      event.preventDefault();
      event.stopPropagation();
      event.stopImmediatePropagation();
      var value = this.nodes.input.value || '';
      var target = this.nodes.selectTarget.value || '';
      var rel = this.nodes.selectRel.value || '';

      if (!value.trim()) {
        this.selection.restore();
        this.unlink();
        event.preventDefault();
        this.closeActions();
      } // if (!this.validateURL(value)) {
      //     this.tooltip.show(this.nodes.input, 'Pasted link is not valid.', {
      //         placement: 'top',
      //     });
      //     setTimeout(() => {
      //         this.tooltip.hide();
      //     }, 1000);
      //     return;
      // }


      value = this.prepareLink(value);
      this.selection.restore();
      this.selection.removeFakeBackground();
      this.insertLink(value, target, rel);
      this.selection.collapseToEnd();
      this.inlineToolbar.close();
    }
  }, {
    key: "validateURL",
    value: function validateURL(str) {
      var pattern = new RegExp('^(https?:\\\\/\\\\/)?' + // protocol
      '((([a-z\\\\d]([a-z\\\\d-]*[a-z\\\\d])*)\\\\.)+[a-z]{2,}|' + // domain name
      '((\\\\d{1,3}\\\\.){3}\\\\d{1,3}))' + // OR ip (v4) address
      '(\\\\:\\\\d+)?(\\\\/[-a-z\\\\d%_.~+]*)*' + // port and path
      '(\\\\?[;&a-z\\\\d%_.~+=-]*)?' + // query string
      '(\\\\#[-a-z\\\\d_]*)?$', 'i'); // fragment locator

      return !!pattern.test(str);
    }
  }, {
    key: "prepareLink",
    value: function prepareLink(link) {
      link = link.trim();
      link = this.addProtocol(link);
      return link;
    }
  }, {
    key: "addProtocol",
    value: function addProtocol(link) {
      if (/^(\\w+):(\\/\\/)?/.test(link)) {
        return link;
      }

      var isInternal = /^\\/[^/\\s]/.test(link),
          isAnchor = link.substring(0, 1) === '#',
          isProtocolRelative = /^\\/\\/[^/\\s]/.test(link);

      if (!isInternal && !isAnchor && !isProtocolRelative) {
        link = 'http://' + link;
      }

      return link;
    }
  }, {
    key: "insertLink",
    value: function insertLink(link) {
      var target = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';
      var rel = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : '';
      var anchorTag = this.selection.findParentTag('A');

      if (anchorTag) {
        this.selection.expandToTag(anchorTag);
      } else {
        document.execCommand(this.commandLink, false, link);
        anchorTag = this.selection.findParentTag('A');
      }

      if (anchorTag) {
        if (!!target) {
          anchorTag['target'] = target;
        } else {
          anchorTag.removeAttribute('target');
        }

        if (!!rel) {
          anchorTag['rel'] = rel;
        } else {
          anchorTag.removeAttribute('rel');
        }
      }
    }
  }, {
    key: "unlink",
    value: function unlink() {
      document.execCommand(this.commandUnlink);
    }
  }, {
    key: "iconSvg",
    value: function iconSvg(name) {
      var width = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 14;
      var height = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 14;
      var icon = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
      icon.classList.add('icon', 'icon--' + name);
      icon.setAttribute('width', width + 'px');
      icon.setAttribute('height', height + 'px');
      icon.innerHTML = "<use xmlns:xlink=\\"http://www.w3.org/1999/xlink\\" xlink:href=\\"#".concat(name, "\\"></use>");
      return icon;
    }
  }, {
    key: "addOption",
    value: function addOption(element, text) {
      var value = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;
      var option = document.createElement('option');
      option.text = text;
      option.value = value;
      element.add(option);
    }
  }, {
    key: "shortcut",
    get: function get() {
      return this.config.shortcut || 'CMD+L';
    }
  }, {
    key: "title",
    get: function get() {
      return 'Hyperlink';
    }
  }], [{
    key: "isInline",
    get: function get() {
      return true;
    }
  }, {
    key: "sanitize",
    get: function get() {
      return {
        a: {
          href: true,
          target: true,
          rel: true
        }
      };
    }
  }]);

  return Hyperlink;
}();



//# sourceURL=webpack://Hyperlink/./src/Hyperlink.js?`)},"./src/SelectionUtils.js":function(module,__webpack_exports__,__webpack_require__){eval(`__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return SelectionUtils; });
function _typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

var SelectionUtils = /*#__PURE__*/function () {
  function SelectionUtils() {
    _classCallCheck(this, SelectionUtils);

    this.selection = null;
    this.savedSelectionRange = null;
    this.isFakeBackgroundEnabled = false;
    this.commandBackground = 'backColor';
    this.commandRemoveFormat = 'removeFormat';
  }

  _createClass(SelectionUtils, [{
    key: "isElement",
    value: function isElement(node) {
      return node && _typeof(node) === 'object' && node.nodeType && node.nodeType === Node.ELEMENT_NODE;
    }
  }, {
    key: "isContentEditable",
    value: function isContentEditable(element) {
      return element.contentEditable === 'true';
    }
  }, {
    key: "isNativeInput",
    value: function isNativeInput(target) {
      var nativeInputs = ['INPUT', 'TEXTAREA'];
      return target && target.tagName ? nativeInputs.includes(target.tagName) : false;
    }
  }, {
    key: "canSetCaret",
    value: function canSetCaret(target) {
      var result = true;

      if (this.isNativeInput(target)) {
        switch (target.type) {
          case 'file':
          case 'checkbox':
          case 'radio':
          case 'hidden':
          case 'submit':
          case 'button':
          case 'image':
          case 'reset':
            result = false;
            break;

          default:
        }
      } else {
        result = this.isContentEditable(target);
      }

      return result;
    }
  }, {
    key: "CSS",
    value: function CSS() {
      return {
        editorWrapper: 'codex-editor',
        editorZone: 'codex-editor__redactor'
      };
    }
  }, {
    key: "anchorNode",
    value: function anchorNode() {
      var selection = window.getSelection();
      return selection ? selection.anchorNode : null;
    }
  }, {
    key: "anchorElement",
    value: function anchorElement() {
      var selection = window.getSelection();

      if (!selection) {
        return null;
      }

      var anchorNode = selection.anchorNode;

      if (!anchorNode) {
        return null;
      }

      if (!this.isElement(anchorNode)) {
        return anchorNode.parentElement;
      } else {
        return anchorNode;
      }
    }
  }, {
    key: "anchorOffset",
    value: function anchorOffset() {
      var selection = window.getSelection();
      return selection ? selection.anchorOffset : null;
    }
  }, {
    key: "isCollapsed",
    value: function isCollapsed() {
      var selection = window.getSelection();
      return selection ? selection.isCollapsed : null;
    }
  }, {
    key: "isAtEditor",
    value: function isAtEditor() {
      var selection = SelectionUtils.get();
      var selectedNode = selection.anchorNode || selection.focusNode;

      if (selectedNode && selectedNode.nodeType === Node.TEXT_NODE) {
        selectedNode = selectedNode.parentNode;
      }

      var editorZone = null;

      if (selectedNode) {
        editorZone = selectedNode.closest(".".concat(SelectionUtils.CSS.editorZone));
      }

      return editorZone && editorZone.nodeType === Node.ELEMENT_NODE;
    }
  }, {
    key: "isSelectionExists",
    value: function isSelectionExists() {
      var selection = SelectionUtils.get();
      return !!selection.anchorNode;
    }
  }, {
    key: "get",
    value: function get() {
      return window.getSelection();
    }
  }, {
    key: "setCursor",
    value: function setCursor(element) {
      var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;
      var range = document.createRange();
      var selection = window.getSelection();

      if (this.isNativeInput(element)) {
        if (!this.canSetCaret(element)) {
          return;
        }

        element.focus();
        element.selectionStart = element.selectionEnd = offset;
        return element.getBoundingClientRect();
      }

      range.setStart(element, offset);
      range.setEnd(element, offset);
      selection.removeAllRanges();
      selection.addRange(range);
      return range.getBoundingClientRect();
    }
  }, {
    key: "removeFakeBackground",
    value: function removeFakeBackground() {
      if (!this.isFakeBackgroundEnabled) {
        return;
      }

      this.isFakeBackgroundEnabled = false;
      document.execCommand(this.commandRemoveFormat);
    }
  }, {
    key: "setFakeBackground",
    value: function setFakeBackground() {
      document.execCommand(this.commandBackground, false, '#a8d6ff');
      this.isFakeBackgroundEnabled = true;
    }
  }, {
    key: "save",
    value: function save() {
      this.savedSelectionRange = SelectionUtils.range;
    }
  }, {
    key: "restore",
    value: function restore() {
      if (!this.savedSelectionRange) {
        return;
      }

      var sel = window.getSelection();
      sel.removeAllRanges();
      sel.addRange(this.savedSelectionRange);
    }
  }, {
    key: "clearSaved",
    value: function clearSaved() {
      this.savedSelectionRange = null;
    }
  }, {
    key: "collapseToEnd",
    value: function collapseToEnd() {
      var sel = window.getSelection();
      var range = document.createRange();
      range.selectNodeContents(sel.focusNode);
      range.collapse(false);
      sel.removeAllRanges();
      sel.addRange(range);
    }
  }, {
    key: "findParentTag",
    value: function findParentTag(tagName) {
      var className = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;
      var searchDepth = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 10;
      var selection = window.getSelection();
      var parentTag = null;

      if (!selection || !selection.anchorNode || !selection.focusNode) {
        return null;
      }

      var boundNodes = [selection.anchorNode, selection.focusNode];
      boundNodes.forEach(function (parent) {
        var searchDepthIterable = searchDepth;

        while (searchDepthIterable > 0 && parent.parentNode) {
          if (parent.tagName === tagName) {
            parentTag = parent;

            if (className && parent.classList && !parent.classList.contains(className)) {
              parentTag = null;
            }

            if (parentTag) {
              break;
            }
          }

          parent = parent.parentNode;
          searchDepthIterable--;
        }
      });
      return parentTag;
    }
  }, {
    key: "expandToTag",
    value: function expandToTag(element) {
      var selection = window.getSelection();
      selection.removeAllRanges();
      var range = document.createRange();
      range.selectNodeContents(element);
      selection.addRange(range);
    }
  }], [{
    key: "range",
    get: function get() {
      var selection = window.getSelection();
      return selection && selection.rangeCount ? selection.getRangeAt(0) : null;
    }
  }, {
    key: "rect",
    get: function get() {
      var sel = document.selection,
          range;
      var rect = {
        x: 0,
        y: 0,
        width: 0,
        height: 0
      };

      if (sel && sel.type !== 'Control') {
        range = sel.createRange();
        rect.x = range.boundingLeft;
        rect.y = range.boundingTop;
        rect.width = range.boundingWidth;
        rect.height = range.boundingHeight;
        return rect;
      }

      if (!window.getSelection) {
        return rect;
      }

      sel = window.getSelection();

      if (sel.rangeCount === null || isNaN(sel.rangeCount)) {
        return rect;
      }

      if (sel.rangeCount === 0) {
        return rect;
      }

      range = sel.getRangeAt(0).cloneRange();

      if (range.getBoundingClientRect) {
        rect = range.getBoundingClientRect();
      }

      if (rect.x === 0 && rect.y === 0) {
        var span = document.createElement('span');

        if (span.getBoundingClientRect) {
          span.appendChild(document.createTextNode("\\u200B"));
          range.insertNode(span);
          rect = span.getBoundingClientRect();
          var spanParent = span.parentNode;
          spanParent.removeChild(span);
          spanParent.normalize();
        }
      }

      return rect;
    }
  }, {
    key: "text",
    get: function get() {
      return window.getSelection ? window.getSelection().toString() : '';
    }
  }]);

  return SelectionUtils;
}();



//# sourceURL=webpack://Hyperlink/./src/SelectionUtils.js?`)}}).default})})(bundle$2);var bundleExports$2=bundle$2.exports;const Hyperlink=getDefaultExportFromCjs(bundleExports$2);var bundle$1={exports:{}};(function(Nt,s){(function(Ot,en){Nt.exports=en()})(self,()=>(()=>{var Ot={424:(rn,on,sn)=>{sn.d(on,{Z:()=>cn});var an=sn(645),ln=sn.n(an)()(function(un){return un[1]});ln.push([rn.id,`.ce-popover-indent-item {\r
    cursor: default !important;\r
}\r
.ce-popover-indent-item:hover {\r
    background-color: transparent !important;\r
}\r
\r
.ce-popover-indent-item .ce-popover-item__icon {\r
    cursor: pointer;\r
    will-change: background-color;\r
    transition: 0.3s background-color;\r
    padding-block: 0px;\r
    padding-inline: 0px;\r
    border-width: 0px;\r
    color: var(--color-text-primary, black);\r
}\r
\r
.ce-popover-indent-item .ce-popover-item--disabled {\r
    color: var(--color-text-secondary, #707684);\r
    cursor: default;\r
}\r
\r
.ce-popover-indent-item .ce-popover-item__icon:focus {\r
    outline: none;\r
}\r
\r
.ce-popover-indent-item:hover .ce-popover-item__icon {\r
    box-shadow: 0 0 0 1px var(--color-border-icon, rgba(201, 201, 204, 0.48)) !important;\r
    -webkit-box-shadow: 0 0 0 1px var(--color-border-icon, rgba(201, 201, 204, 0.48)) !important;\r
}\r
\r
.ce-popover-indent-item .ce-popover-item__icon:hover {\r
    background-color: var(--color-background-item-hover, #eff2f5);\r
}\r
`,""]);const cn=ln},645:rn=>{rn.exports=function(on){var sn=[];return sn.toString=function(){return this.map(function(an){var ln=on(an);return an[2]?"@media ".concat(an[2]," {").concat(ln,"}"):ln}).join("")},sn.i=function(an,ln,cn){typeof an=="string"&&(an=[[null,an,""]]);var un={};if(cn)for(var dn=0;dn<this.length;dn++){var hn=this[dn][0];hn!=null&&(un[hn]=!0)}for(var fn=0;fn<an.length;fn++){var mn=[].concat(an[fn]);cn&&un[mn[0]]||(ln&&(mn[2]?mn[2]="".concat(ln," and ").concat(mn[2]):mn[2]=ln),sn.push(mn))}},sn}},379:(rn,on,sn)=>{var an,ln=function(){var wn={};return function(Sn){if(wn[Sn]===void 0){var kn=document.querySelector(Sn);if(window.HTMLIFrameElement&&kn instanceof window.HTMLIFrameElement)try{kn=kn.contentDocument.head}catch{kn=null}wn[Sn]=kn}return wn[Sn]}}(),cn=[];function un(wn){for(var Sn=-1,kn=0;kn<cn.length;kn++)if(cn[kn].identifier===wn){Sn=kn;break}return Sn}function dn(wn,Sn){for(var kn={},En=[],In=0;In<wn.length;In++){var An=wn[In],Rn=Sn.base?An[0]+Sn.base:An[0],Nn=kn[Rn]||0,Vn="".concat(Rn," ").concat(Nn);kn[Rn]=Nn+1;var $n=un(Vn),jn={css:An[1],media:An[2],sourceMap:An[3]};$n!==-1?(cn[$n].references++,cn[$n].updater(jn)):cn.push({identifier:Vn,updater:bn(jn,Sn),references:1}),En.push(Vn)}return En}function hn(wn){var Sn=document.createElement("style"),kn=wn.attributes||{};if(kn.nonce===void 0){var En=sn.nc;En&&(kn.nonce=En)}if(Object.keys(kn).forEach(function(An){Sn.setAttribute(An,kn[An])}),typeof wn.insert=="function")wn.insert(Sn);else{var In=ln(wn.insert||"head");if(!In)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");In.appendChild(Sn)}return Sn}var fn,mn=(fn=[],function(wn,Sn){return fn[wn]=Sn,fn.filter(Boolean).join(`
`)});function gn(wn,Sn,kn,En){var In=kn?"":En.media?"@media ".concat(En.media," {").concat(En.css,"}"):En.css;if(wn.styleSheet)wn.styleSheet.cssText=mn(Sn,In);else{var An=document.createTextNode(In),Rn=wn.childNodes;Rn[Sn]&&wn.removeChild(Rn[Sn]),Rn.length?wn.insertBefore(An,Rn[Sn]):wn.appendChild(An)}}function pn(wn,Sn,kn){var En=kn.css,In=kn.media,An=kn.sourceMap;if(In?wn.setAttribute("media",In):wn.removeAttribute("media"),An&&typeof btoa<"u"&&(En+=`
/*# sourceMappingURL=data:application/json;base64,`.concat(btoa(unescape(encodeURIComponent(JSON.stringify(An))))," */")),wn.styleSheet)wn.styleSheet.cssText=En;else{for(;wn.firstChild;)wn.removeChild(wn.firstChild);wn.appendChild(document.createTextNode(En))}}var _n=null,vn=0;function bn(wn,Sn){var kn,En,In;if(Sn.singleton){var An=vn++;kn=_n||(_n=hn(Sn)),En=gn.bind(null,kn,An,!1),In=gn.bind(null,kn,An,!0)}else kn=hn(Sn),En=pn.bind(null,kn,Sn),In=function(){(function(Rn){if(Rn.parentNode===null)return!1;Rn.parentNode.removeChild(Rn)})(kn)};return En(wn),function(Rn){if(Rn){if(Rn.css===wn.css&&Rn.media===wn.media&&Rn.sourceMap===wn.sourceMap)return;En(wn=Rn)}else In()}}rn.exports=function(wn,Sn){(Sn=Sn||{}).singleton||typeof Sn.singleton=="boolean"||(Sn.singleton=(an===void 0&&(an=!!(window&&document&&document.all&&!window.atob)),an));var kn=dn(wn=wn||[],Sn);return function(En){if(En=En||[],Object.prototype.toString.call(En)==="[object Array]"){for(var In=0;In<kn.length;In++){var An=un(kn[In]);cn[An].references--}for(var Rn=dn(En,Sn),Nn=0;Nn<kn.length;Nn++){var Vn=un(kn[Nn]);cn[Vn].references===0&&(cn[Vn].updater(),cn.splice(Vn,1))}kn=Rn}}}}},en={};function tn(rn){var on=en[rn];if(on!==void 0)return on.exports;var sn=en[rn]={id:rn,exports:{}};return Ot[rn](sn,sn.exports,tn),sn.exports}tn.n=rn=>{var on=rn&&rn.__esModule?()=>rn.default:()=>rn;return tn.d(on,{a:on}),on},tn.d=(rn,on)=>{for(var sn in on)tn.o(on,sn)&&!tn.o(rn,sn)&&Object.defineProperty(rn,sn,{enumerable:!0,get:on[sn]})},tn.o=(rn,on)=>Object.prototype.hasOwnProperty.call(rn,on),tn.nc=void 0;var nn={};return(()=>{tn.d(nn,{default:()=>hn});const rn='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M14.5 17.5L9.64142 12.6414C9.56331 12.5633 9.56331 12.4367 9.64142 12.3586L14.5 7.5"/></svg>',on='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M9.58284 17.5L14.4414 12.6414C14.5195 12.5633 14.5195 12.4367 14.4414 12.3586L9.58284 7.5"/></svg>';var sn=tn(379),an=tn.n(sn),ln=tn(424);an()(ln.Z,{insert:"head",singleton:!1}),ln.Z.locals;var cn=function(){return cn=Object.assign||function(fn){for(var mn,gn=1,pn=arguments.length;gn<pn;gn++)for(var _n in mn=arguments[gn])Object.prototype.hasOwnProperty.call(mn,_n)&&(fn[_n]=mn[_n]);return fn},cn.apply(this,arguments)},un="data-block-indent-wrapper",dn=function(){function fn(mn){var gn,pn,_n,vn,bn,wn=mn.api,Sn=mn.data,kn=mn.config,En=mn.block;this.wrapper=document.createElement("div"),this.api=wn,this.block=En,this.config=cn(cn({},{indentSize:24,maxIndent:8,minIndent:0,multiblock:!1,tuneName:null,orientation:"horizontal",customBlockIndentLimits:{},handleShortcut:void 0,direction:"ltr",directionChangeHandler:null}),kn??{}),!((gn=this.config)===null||gn===void 0)&&gn.directionChangeHandler&&this.config.directionChangeHandler(this.alignmentChangeListener.bind(this));var In=(bn=(vn=this.config.customBlockIndentLimits[(_n=(pn=this.block)===null||pn===void 0?void 0:pn.name)!==null&&_n!==void 0?_n:""])===null||vn===void 0?void 0:vn.min)!==null&&bn!==void 0?bn:this.config.minIndent;this.data=cn({indentLevel:In},Sn??{}),this.config.multiblock&&!this.config.tuneName&&console.error("IndentTune config 'tuneName' was not provided, this is required for multiblock option to work.")}return Object.defineProperty(fn,"isTune",{get:function(){return!0},enumerable:!1,configurable:!0}),fn.prototype.render=function(){var mn,gn,pn,_n,vn=this;if(queueMicrotask(function(){var En,In;vn.data.indentLevel==vn.maxIndent&&((En=vn.getTuneButton("indent"))===null||En===void 0||En.classList.add(vn.CSS.disabledItem)),vn.data.indentLevel==vn.minIndent&&((In=vn.getTuneButton("unindent"))===null||In===void 0||In.classList.add(vn.CSS.disabledItem))}),this.config.orientation==="vertical"){var bn="".concat(this.TuneNames.indentLeft,"-").concat((mn=this.block)===null||mn===void 0?void 0:mn.id),wn="".concat(this.TuneNames.indentRight,"-").concat((gn=this.block)===null||gn===void 0?void 0:gn.id);return[{title:this.rightText,onActivate:function(En,In){vn.handleIndentRight(),En.title=vn.rightText},icon:on,name:wn},{title:this.leftText,onActivate:function(En,In){vn.handleIndentLeft(),En.title=vn.leftText},icon:rn,name:bn}]}var Sn=`
			<div class="`.concat(this.CSS.popoverItem," ").concat(this.CSS.customPopoverItem,`" data-item-name='indent'>
				<button class="`).concat(this.CSS.popoverItemIcon,'" data-').concat(this.TuneNames.indentLeft,">").concat(rn,`</button>
				<div class="`).concat(this.CSS.popoverItemTitle,'">').concat(this.api.sanitizer.clean(this.api.i18n.t("Indent"),{}),`</div>
				<button class="`).concat(this.CSS.popoverItemIcon,'" data-').concat(this.TuneNames.indentRight,' style="margin-left:10px;">').concat(on,`</button>
			</div>
		`),kn=new DOMParser().parseFromString(Sn,"text/html").body.firstChild;return(pn=kn.querySelector("[data-".concat(this.TuneNames.indentRight,"]")))===null||pn===void 0||pn.addEventListener("click",function(){return vn.handleIndentRight()}),(_n=kn.querySelector("[data-".concat(this.TuneNames.indentLeft,"]")))===null||_n===void 0||_n.addEventListener("click",function(){return vn.handleIndentLeft()}),kn},fn.prototype.wrap=function(mn){var gn=this;return this.wrapper.appendChild(mn),this.wrapper.setAttribute(un,""),this.applyStylesToWrapper(this.wrapper,this.data.indentLevel),this.wrapper.addEventListener("keydown",function(){for(var pn=[],_n=0;_n<arguments.length;_n++)pn[_n]=arguments[_n];return gn.onKeyDown.apply(gn,pn)},{capture:!0}),this.wrapper},fn.prototype.save=function(){return this.data},Object.defineProperty(fn.prototype,"CSS",{get:function(){return{customPopoverItem:"ce-popover-indent-item",popoverItem:"ce-popover-item",popoverItemIcon:"ce-popover-item__icon",popoverItemTitle:"ce-popover-item__title",disabledItem:"ce-popover-item--disabled"}},enumerable:!1,configurable:!0}),Object.defineProperty(fn.prototype,"TuneNames",{get:function(){return{indentLeft:"tune-indent-left",indentRight:"tune-indent-right"}},enumerable:!1,configurable:!0}),Object.defineProperty(fn.prototype,"customInterval",{get:function(){var mn,gn,pn;return(pn=this.config.customBlockIndentLimits[(gn=(mn=this.block)===null||mn===void 0?void 0:mn.name)!==null&&gn!==void 0?gn:""])!==null&&pn!==void 0?pn:{}},enumerable:!1,configurable:!0}),Object.defineProperty(fn.prototype,"maxIndent",{get:function(){var mn;return(mn=this.customInterval.max)!==null&&mn!==void 0?mn:this.config.maxIndent},enumerable:!1,configurable:!0}),Object.defineProperty(fn.prototype,"minIndent",{get:function(){var mn;return(mn=this.customInterval.min)!==null&&mn!==void 0?mn:this.config.minIndent},enumerable:!1,configurable:!0}),Object.defineProperty(fn.prototype,"isDirectionInverted",{get:function(){return this.config.direction!=="ltr"},enumerable:!1,configurable:!0}),Object.defineProperty(fn.prototype,"rightText",{get:function(){return this.api.i18n.t(this.isDirectionInverted?"Un Indent":"Indent")},enumerable:!1,configurable:!0}),Object.defineProperty(fn.prototype,"leftText",{get:function(){return this.api.i18n.t(this.isDirectionInverted?"Indent":"Un Indent")},enumerable:!1,configurable:!0}),fn.prototype.onKeyDown=function(mn){var gn,pn,_n,vn=this,bn=!!this.config.handleShortcut;if(bn||mn.key==="Tab"){var wn=(pn=(gn=this.config).handleShortcut)===null||pn===void 0?void 0:pn.call(gn,mn);if(!wn||!bn){mn.stopPropagation(),mn.preventDefault(),this.api.inlineToolbar.close();var Sn=wn?wn==="indent":!mn.shiftKey,kn=this.getGlobalSelectedBlocks();if(!this.config.multiblock||kn.length<2)return Sn?this.indentBlock():this.unIndentBlock(),void((_n=this.block)===null||_n===void 0||_n.dispatchChange());this.config.tuneName?kn.forEach(function(En){return In=vn,An=void 0,Nn=function(){var Vn,$n,jn,Ln,Pn,Bn;return function(Gn,zn){var qn,Jn,Qn,ar,Xn={label:0,sent:function(){if(1&Qn[0])throw Qn[1];return Qn[1]},trys:[],ops:[]};return ar={next:xn(0),throw:xn(1),return:xn(2)},typeof Symbol=="function"&&(ar[Symbol.iterator]=function(){return this}),ar;function xn(yn){return function(Fn){return function(Cn){if(qn)throw new TypeError("Generator is already executing.");for(;ar&&(ar=0,Cn[0]&&(Xn=0)),Xn;)try{if(qn=1,Jn&&(Qn=2&Cn[0]?Jn.return:Cn[0]?Jn.throw||((Qn=Jn.return)&&Qn.call(Jn),0):Jn.next)&&!(Qn=Qn.call(Jn,Cn[1])).done)return Qn;switch(Jn=0,Qn&&(Cn=[2&Cn[0],Qn.value]),Cn[0]){case 0:case 1:Qn=Cn;break;case 4:return Xn.label++,{value:Cn[1],done:!1};case 5:Xn.label++,Jn=Cn[1],Cn=[0];continue;case 7:Cn=Xn.ops.pop(),Xn.trys.pop();continue;default:if(!((Qn=(Qn=Xn.trys).length>0&&Qn[Qn.length-1])||Cn[0]!==6&&Cn[0]!==2)){Xn=0;continue}if(Cn[0]===3&&(!Qn||Cn[1]>Qn[0]&&Cn[1]<Qn[3])){Xn.label=Cn[1];break}if(Cn[0]===6&&Xn.label<Qn[1]){Xn.label=Qn[1],Qn=Cn;break}if(Qn&&Xn.label<Qn[2]){Xn.label=Qn[2],Xn.ops.push(Cn);break}Qn[2]&&Xn.ops.pop(),Xn.trys.pop();continue}Cn=zn.call(Gn,Xn)}catch(Yn){Cn=[6,Yn],Jn=0}finally{qn=Qn=0}if(5&Cn[0])throw Cn[1];return{value:Cn[0]?Cn[1]:void 0,done:!0}}([yn,Fn])}}}(this,function(Gn){switch(Gn.label){case 0:return[4,En.save()];case 1:return(Vn=Gn.sent())?"tunes"in Vn&&typeof Vn.tunes=="object"&&Vn.tunes?($n=Vn.tunes[(Ln=this.config.tuneName)!==null&&Ln!==void 0?Ln:""])?($n.indentLevel=Sn?Math.min(this.config.maxIndent,((Pn=$n.indentLevel)!==null&&Pn!==void 0?Pn:0)+1):Math.max(0,((Bn=$n.indentLevel)!==null&&Bn!==void 0?Bn:0)-1),En.dispatchChange(),(jn=this.getWrapperBlockById(En.id))instanceof HTMLElement&&this.applyStylesToWrapper(jn,$n.indentLevel),[2]):(console.error("'tuneName' is invalid, no tune was found for block ".concat(En.name)),[2]):(console.error("Multiblock indenting is not supported for this editor version. "),[2]):[2]}})},new((Rn=void 0)||(Rn=Promise))(function(Vn,$n){function jn(Bn){try{Pn(Nn.next(Bn))}catch(Gn){$n(Gn)}}function Ln(Bn){try{Pn(Nn.throw(Bn))}catch(Gn){$n(Gn)}}function Pn(Bn){var Gn;Bn.done?Vn(Bn.value):(Gn=Bn.value,Gn instanceof Rn?Gn:new Rn(function(zn){zn(Gn)})).then(jn,Ln)}Pn((Nn=Nn.apply(In,An||[])).next())});var In,An,Rn,Nn}):console.error("'tuneName' is empty.")}}},fn.prototype.handleIndentLeft=function(){var mn;this.isDirectionInverted?this.indentBlock():this.unIndentBlock(),(mn=this.block)===null||mn===void 0||mn.dispatchChange()},fn.prototype.handleIndentRight=function(){var mn;this.isDirectionInverted?this.unIndentBlock():this.indentBlock(),(mn=this.block)===null||mn===void 0||mn.dispatchChange()},fn.prototype.indentBlock=function(){this.wrapper&&(this.data.indentLevel=Math.min(this.data.indentLevel+1,this.maxIndent),this.applyStylesToWrapper(this.wrapper,this.data.indentLevel),this.toggleDisableStateForButtons())},fn.prototype.unIndentBlock=function(){this.wrapper&&(this.data.indentLevel=Math.max(this.data.indentLevel-1,this.minIndent),this.applyStylesToWrapper(this.wrapper,this.data.indentLevel),this.toggleDisableStateForButtons())},fn.prototype.toggleDisableStateForButtons=function(){var mn,gn,pn,_n;this.data.indentLevel===this.minIndent?(mn=this.getTuneButton("unindent"))===null||mn===void 0||mn.classList.add(this.CSS.disabledItem):(gn=this.getTuneButton("unindent"))===null||gn===void 0||gn.classList.remove(this.CSS.disabledItem),this.data.indentLevel===this.maxIndent?(pn=this.getTuneButton("indent"))===null||pn===void 0||pn.classList.add(this.CSS.disabledItem):(_n=this.getTuneButton("indent"))===null||_n===void 0||_n.classList.remove(this.CSS.disabledItem)},fn.prototype.getTuneButton=function(mn){var gn,pn=mn==="indent"?"indentRight":"indentLeft";return this.isDirectionInverted&&(pn=mn=="indent"?"indentLeft":"indentRight"),this.config.orientation==="vertical"?this.getTuneByName("".concat(this.TuneNames[pn],"-").concat((gn=this.block)===null||gn===void 0?void 0:gn.id)):document.querySelector(".".concat(this.CSS.popoverItemIcon,"[data-").concat(this.TuneNames[pn],"]"))},fn.prototype.getTuneByName=function(mn){return document.querySelector(".".concat(this.CSS.popoverItem,'[data-item-name="').concat(mn,'"]'))},fn.prototype.getTuneTitleByName=function(mn){var gn;return(gn=this.getTuneByName(mn))===null||gn===void 0?void 0:gn.querySelector(".".concat(this.CSS.popoverItemTitle))},fn.prototype.applyStylesToWrapper=function(mn,gn){var pn="".concat(gn*this.config.indentSize,"px");this.isDirectionInverted?(mn.style.paddingLeft="0px",mn.style.paddingRight=pn):(mn.style.paddingLeft=pn,mn.style.paddingRight="0px")},fn.prototype.getGlobalSelectedBlocks=function(){var mn=this;return new Array(this.api.blocks.getBlocksCount()).fill(0).map(function(gn,pn){return mn.api.blocks.getBlockByIndex(pn)}).filter(function(gn){return!!(gn!=null&&gn.selected)})},fn.prototype.getWrapperBlockById=function(mn){return document.querySelector('.ce-block[data-id="'.concat(mn,'"] [').concat(un,"]"))},fn.prototype.alignmentChangeListener=function(mn,gn){var pn,_n,vn;if(mn===((pn=this.block)===null||pn===void 0?void 0:pn.id)&&gn!==this.config.direction&&(this.config.direction=gn,this.applyStylesToWrapper(this.wrapper,this.data.indentLevel),this.toggleDisableStateForButtons(),this.config.orientation==="vertical")){var bn=this.getTuneTitleByName("".concat(this.TuneNames.indentRight,"-").concat((_n=this.block)===null||_n===void 0?void 0:_n.id));bn&&(bn.textContent=this.rightText);var wn=this.getTuneTitleByName("".concat(this.TuneNames.indentLeft,"-").concat((vn=this.block)===null||vn===void 0?void 0:vn.id));wn&&(wn.textContent=this.leftText)}},fn}();const hn=dn})(),nn.default})())})(bundle$1);var bundleExports$1=bundle$1.exports;const IndentTune=getDefaultExportFromCjs(bundleExports$1);var bundle={exports:{}};(function(Nt,s){(function(Ot,en){Nt.exports=en()})(self,function(){return(()=>{var Ot={d:(sn,an)=>{for(var ln in an)Ot.o(an,ln)&&!Ot.o(sn,ln)&&Object.defineProperty(sn,ln,{enumerable:!0,get:an[ln]})},o:(sn,an)=>Object.prototype.hasOwnProperty.call(sn,an)},en={};function tn(sn,an){for(var ln=0;ln<an.length;ln++){var cn=an[ln];cn.enumerable=cn.enumerable||!1,cn.configurable=!0,"value"in cn&&(cn.writable=!0),Object.defineProperty(sn,cn.key,cn)}}Ot.d(en,{default:()=>on});var nn=function(){function sn(cn,un){(function(dn,hn){if(!(dn instanceof hn))throw new TypeError("Cannot call a class as a function")})(this,sn),this.holder=un,this.observer=null,this.debounceTimer=200,this.mutationDebouncer=this.debounce(function(){cn()},this.debounceTimer)}var an,ln;return an=sn,ln=[{key:"setMutationObserver",value:function(){var cn=this,un=this.holder;this.observer=new MutationObserver(function(dn){cn.mutationHandler(dn)}),this.observer.observe(un,{childList:!0,attributes:!0,subtree:!0,characterData:!0,characterDataOldValue:!0})}},{key:"mutationHandler",value:function(cn){var un=this,dn=!1;cn.forEach(function(hn){switch(hn.type){case"childList":hn.target===un.holder?un.onDestroy():dn=!0;break;case"characterData":dn=!0;break;case"attributes":hn.target.classList.contains("ce-block")||(dn=!0)}}),dn&&this.mutationDebouncer()}},{key:"debounce",value:function(cn,un){var dn,hn=this;return function(){for(var fn=arguments.length,mn=new Array(fn),gn=0;gn<fn;gn++)mn[gn]=arguments[gn];var pn=hn;clearTimeout(dn),dn=setTimeout(function(){return cn.apply(pn,mn)},un)}}},{key:"onDestroy",value:function(){var cn=new CustomEvent("destroy");document.dispatchEvent(cn),this.observer.disconnect()}}],ln&&tn(an.prototype,ln),sn}();function rn(sn,an){for(var ln=0;ln<an.length;ln++){var cn=an[ln];cn.enumerable=cn.enumerable||!1,cn.configurable=!0,"value"in cn&&(cn.writable=!0),Object.defineProperty(sn,cn.key,cn)}}var on=function(){function sn(un){var dn=this,hn=un.editor,fn=un.config,mn=fn===void 0?{}:fn,gn=un.onUpdate,pn=un.maxLength;(function(En,In){if(!(En instanceof In))throw new TypeError("Cannot call a class as a function")})(this,sn);var _n={maxLength:30,onUpdate:function(){},config:{shortcuts:{undo:"CMD+Z",redo:"CMD+Y"}}},vn=hn.configuration,bn=vn.holder,wn=_n.config.shortcuts,Sn=mn.shortcuts,kn=Sn===void 0?wn:Sn;this.holder=typeof bn=="string"?document.getElementById(bn):bn,this.editor=hn,this.shouldSaveHistory=!0,this.readOnly=vn.readOnly,this.maxLength=pn||_n.maxLength,this.onUpdate=gn||_n.onUpdate,this.config={shortcuts:kn},new nn(function(){return dn.registerChange()},this.holder).setMutationObserver(),this.setEventListeners(),this.initialItem=null,this.clear()}var an,ln,cn;return an=sn,cn=[{key:"isReadOnlySupported",get:function(){return!0}}],(ln=[{key:"truncate",value:function(un,dn){for(;un.length>dn;)un.shift()}},{key:"initialize",value:function(un){var dn="blocks"in un?un.blocks:un,hn={index:dn.length-1,state:dn};this.stack[0]=hn,this.initialItem=hn}},{key:"clear",value:function(){this.stack=this.initialItem?[this.initialItem]:[{index:0,state:[{type:"paragraph",data:{text:""}}]}],this.position=0,this.onUpdate()}},{key:"registerChange",value:function(){var un=this;this.readOnly||(this.editor&&this.editor.save&&this.shouldSaveHistory&&this.editor.save().then(function(dn){un.editorDidUpdate(dn.blocks)&&un.save(dn.blocks)}),this.shouldSaveHistory=!0)}},{key:"editorDidUpdate",value:function(un){var dn=this.stack[this.position].state;return!!un.length&&(un.length!==dn.length||JSON.stringify(dn)!==JSON.stringify(un))}},{key:"save",value:function(un){this.position>=this.maxLength&&this.truncate(this.stack,this.maxLength),this.position=Math.min(this.position,this.stack.length-1),this.stack=this.stack.slice(0,this.position+1);var dn=this.editor.blocks.getCurrentBlockIndex();this.stack.push({index:dn,state:un}),this.position+=1,this.onUpdate()}},{key:"undo",value:function(){var un=this;if(this.canUndo()){this.shouldSaveHistory=!1;var dn=this.stack[this.position-=1],hn=dn.index,fn=dn.state;this.onUpdate(),this.editor.blocks.render({blocks:fn}).then(function(){return un.editor.caret.setToBlock(hn,"end")})}}},{key:"redo",value:function(){var un=this;if(this.canRedo()){this.shouldSaveHistory=!1;var dn=this.stack[this.position+=1],hn=dn.index,fn=dn.state;this.onUpdate(),this.editor.blocks.render({blocks:fn}).then(function(){return un.editor.caret.setToBlock(hn,"end")})}}},{key:"canUndo",value:function(){return!this.readOnly&&this.position>0}},{key:"canRedo",value:function(){return!this.readOnly&&this.position<this.count()}},{key:"count",value:function(){return this.stack.length-1}},{key:"parseKeys",value:function(un){var dn={CMD:/(Mac)/i.test(navigator.platform)?"metaKey":"ctrlKey",ALT:"altKey",SHIFT:"shiftKey"},hn=un.slice(0,-1).map(function(mn){return dn[mn]}),fn=hn.includes("shiftKey")?un[un.length-1].toUpperCase():un[un.length-1].toLowerCase();return hn.push(fn),hn}},{key:"setEventListeners",value:function(){var un=this,dn=this.holder,hn=this.config.shortcuts,fn=hn.undo,mn=hn.redo,gn=fn.replace(/ /g,"").split("+"),pn=mn.replace(/ /g,"").split("+"),_n=this.parseKeys(gn),vn=this.parseKeys(pn),bn=function(kn,En){return!(En.length!==2||!kn[En[0]]||kn.key!==En[1])||!(En.length!==3||!kn[En[0]]||!kn[En[1]]||kn.key!==En[2])},wn=function(kn){bn(kn,_n)&&(kn.preventDefault(),un.undo())},Sn=function(kn){bn(kn,vn)&&(kn.preventDefault(),un.redo())};dn.addEventListener("keydown",wn),dn.addEventListener("keydown",Sn),dn.addEventListener("destroy",function(){dn.removeEventListener("keydown",wn),dn.removeEventListener("keydown",Sn)})}}])&&rn(an.prototype,ln),cn&&rn(an,cn),sn}();return en.default})()})})(bundle);var bundleExports=bundle.exports;const Undo=getDefaultExportFromCjs(bundleExports);var dist={exports:{}};(function(Nt,s){(function(Ot,en){Nt.exports=en()})(window,function(){return function(Ot){var en={};function tn(nn){if(en[nn])return en[nn].exports;var rn=en[nn]={i:nn,l:!1,exports:{}};return Ot[nn].call(rn.exports,rn,rn.exports,tn),rn.l=!0,rn.exports}return tn.m=Ot,tn.c=en,tn.d=function(nn,rn,on){tn.o(nn,rn)||Object.defineProperty(nn,rn,{enumerable:!0,get:on})},tn.r=function(nn){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(nn,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(nn,"__esModule",{value:!0})},tn.t=function(nn,rn){if(1&rn&&(nn=tn(nn)),8&rn||4&rn&&typeof nn=="object"&&nn&&nn.__esModule)return nn;var on=Object.create(null);if(tn.r(on),Object.defineProperty(on,"default",{enumerable:!0,value:nn}),2&rn&&typeof nn!="string")for(var sn in nn)tn.d(on,sn,(function(an){return nn[an]}).bind(null,sn));return on},tn.n=function(nn){var rn=nn&&nn.__esModule?function(){return nn.default}:function(){return nn};return tn.d(rn,"a",rn),rn},tn.o=function(nn,rn){return Object.prototype.hasOwnProperty.call(nn,rn)},tn.p="",tn(tn.s=0)}([function(Ot,en,tn){tn.r(en),tn.d(en,"StyleInlineTool",function(){return cn});class nn extends HTMLElement{}class rn extends Error{constructor(...dn){super(...dn),this.name="EditorJSStyleError"}}var on,sn,an=function(un,dn,hn,fn,mn){if(fn==="m")throw new TypeError("Private method is not writable");if(fn==="a"&&!mn)throw new TypeError("Private accessor was defined without a setter");if(typeof dn=="function"?un!==dn||!mn:!dn.has(un))throw new TypeError("Cannot write private member to an object whose class did not declare it");return fn==="a"?mn.call(un,hn):mn?mn.value=hn:dn.set(un,hn),hn},ln=function(un,dn,hn,fn){if(hn==="a"&&!fn)throw new TypeError("Private accessor was defined without a getter");if(typeof dn=="function"?un!==dn||!fn:!dn.has(un))throw new TypeError("Cannot read private member from an object whose class did not declare it");return hn==="m"?fn:hn==="a"?fn.call(un):fn?fn.value:dn.get(un)};class cn{constructor({api:dn}){on.set(this,void 0),sn.set(this,void 0),an(this,on,document.createElement("div"),"f"),an(this,sn,dn,"f")}static get isInline(){return!0}static get sanitize(){return{"editorjs-style":{class:!0,id:!0,style:!0}}}static get title(){return"Style"}static prepare(){customElements.get("editorjs-style")||customElements.define("editorjs-style",nn)}get shortcut(){return"CMD+S"}checkState(){var dn;ln(this,on,"f").innerHTML="";const hn=ln(this,sn,"f").selection.findParentTag("EDITORJS-STYLE");if(!hn)return!1;ln(this,on,"f").innerHTML=`
      <div style="margin-bottom: 16px; margin-left: 16px; margin-right: 16px; ">
        <div style="display: flex; align-items: center; justify-content: space-between; ">
          <div>Style settings</div>

          <button class="delete-button ${ln(this,sn,"f").styles.settingsButton}" type="button">
            <svg class="icon" height="24" viewBox="0 0 24 24" width="24">
              <path d="M0 0h24v24H0z" fill="none"/>
              <path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"/>
            </svg>
          </button>
        </div>

        <label style="display: flex; align-items: center; justify-content: space-between; ">
          <span>ID</span>

          <input class="id-input ${ln(this,sn,"f").styles.input}" style="width: 80%; ">
        </label>

        <label style="display: flex; align-items: center; justify-content: space-between; ">
          <span>Class</span>

          <input class="class-input ${ln(this,sn,"f").styles.input}" style="width: 80%; ">
        </label>

        <label style="display: flex; align-items: center; justify-content: space-between; ">
          <span>Style</span>

          <textarea
            class="style-textarea ${ln(this,sn,"f").styles.input}"
            placeholder="background: #ffe7e8;"
            style="resize: none; width: 80%; ">
          </textarea>
        </label>
      </div>
    `;const fn=ln(this,on,"f").querySelector(".delete-button"),mn=ln(this,on,"f").querySelector(".class-input"),gn=ln(this,on,"f").querySelector(".id-input"),pn=ln(this,on,"f").querySelector(".style-textarea");if(!(fn&&mn&&gn&&pn))throw new rn;return fn.addEventListener("click",()=>{const _n=Array.from(hn.childNodes).map(wn=>wn.cloneNode(!0));if(_n.forEach(wn=>{var Sn;return(Sn=hn.parentNode)===null||Sn===void 0?void 0:Sn.insertBefore(wn,hn)}),hn.remove(),_n.length===0)return;const vn=window.getSelection();if(!vn)throw new rn;vn.removeAllRanges();const bn=new Range;bn.setStartBefore(_n[0]),bn.setEndAfter(_n[_n.length-1]),vn.addRange(bn),ln(this,on,"f").innerHTML="",ln(this,sn,"f").tooltip.hide()}),ln(this,sn,"f").tooltip.onHover(fn,"Delete style",{placement:"top"}),mn.value=hn.className,mn.addEventListener("input",()=>hn.setAttribute("class",mn.value)),gn.value=hn.id,gn.addEventListener("input",()=>hn.id=gn.value),pn.value=(dn=hn.getAttribute("style"))!==null&&dn!==void 0?dn:"",pn.addEventListener("keydown",_n=>_n.stopPropagation()),pn.addEventListener("input",()=>hn.setAttribute("style",pn.value)),!0}clear(){ln(this,on,"f").innerHTML=""}render(){const dn=document.createElement("button");return dn.classList.add(ln(this,sn,"f").styles.inlineToolButton),dn.type="button",dn.innerHTML=`
      <svg class="icon" height="24" viewBox="0 0 24 24" width="24">
        <path d="M0 0h24v24H0z" fill="none"/>
        <path d="M2.53 19.65l1.34.56v-9.03l-2.43 5.86c-.41 1.02.08 2.19 1.09 2.61zm19.5-3.7L17.07 3.98c-.31-.75-1.04-1.21-1.81-1.23-.26 0-.53.04-.79.15L7.1 5.95c-.75.31-1.21 1.03-1.23 1.8-.01.27.04.54.15.8l4.96 11.97c.31.76 1.05 1.22 1.83 1.23.26 0 .52-.05.77-.15l7.36-3.05c1.02-.42 1.51-1.59 1.09-2.6zM7.88 8.75c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1zm-2 11c0 1.1.9 2 2 2h1.45l-3.45-8.34v6.34z"/>
      </svg>
    `,dn}renderActions(){return ln(this,on,"f")}surround(dn){const hn=new nn;dn.surroundContents(hn),ln(this,sn,"f").selection.expandToTag(hn)}}on=new WeakMap,sn=new WeakMap}])})})(dist);var distExports=dist.exports;function BlogEdit(){const Nt=React$1.useRef(null),{postId:s}=useParams(),[Ot,en]=React$1.useState(null),[tn,nn]=React$1.useState({}),[rn,on]=React$1.useState(""),[sn,an]=React$1.useState("Branding"),[ln,cn]=React$1.useState("Author"),[un,dn]=React$1.useState(null),hn={time:new Date().getTime(),blocks:[{type:"header",data:{text:"Introduction",level:1}},{type:"paragraph",data:{text:"This is a simple paragraph."}}]},fn=vn=>{const bn=new Ei({holder:"_blog-body-editor",inlineToolbar:!0,data:vn||hn,tools:{paragraph:{class:Paragraph,inlineToolbar:!0},header:{class:Header,inlineToolbar:!0},raw:r$1,hyperlink:{class:Hyperlink,config:{shortcut:"CMD+L",target:"_blank",rel:"nofollow",availableTargets:["_blank","_self"],availableRels:["author","noreferrer"],validate:!1}},image:{class:P,inlineToolbar:!0,config:{uploader:{async uploadByFile(wn){const Sn=new FormData;return Sn.append("image",wn),wn.size>33554432?(alert("File size is too big! Maximum file size is 32MB."),!1):{success:1,file:{url:(await(await fetch("https://api.imgbb.com/1/upload?key=b34d67d79c5f9398c74836642e645cd2",{method:"POST",body:Sn})).json()).data.url}}}}}},quote:{class:i,inlineToolbar:!0,shortcut:"CMD+SHIFT+O",config:{quotePlaceholder:"Enter a quote",captionPlaceholder:"Quote's author"}},checklist:{class:f$1,inlineToolbar:!0},list:{class:d,inlineToolbar:!0},table:{class:I,inlineToolbar:!0,config:{rows:2,cols:3}},embed:{class:m$1,inlineToolbar:!0},AnyButton:{class:AnyButton,inlineToolbar:!1,config:{css:{btnColor:"btn--gray"}}},tooltip:{class:Tooltip,config:{location:"left",underline:!0,placeholder:"Enter a tooltip",highlightColor:"#FFEFD5",backgroundColor:"#154360",textColor:"#FDFEFE",holder:"editorId"}},indentTune:IndentTune,style:distExports.StyleInlineTool},tunes:["indentTune"],onReady:async()=>{Nt.current=bn,new Undo({editor:bn}),new DragDrop(bn);let wn=await bn.saver.save();document.getElementById("output").innerHTML=new edjsParser().parse(wn),nn(wn)},onChange:async()=>{let wn=await bn.saver.save();document.getElementById("output").innerHTML=new edjsParser().parse(wn),nn(wn)}})},mn=()=>{function vn(Sn,kn){if(Sn.length!==kn.length)return!1;function En(In,An){const Rn=Object.keys(In),Nn=Object.keys(An);if(Rn.length!==Nn.length)return!1;for(const Vn of Rn){const $n=In[Vn],jn=An[Vn];if(typeof $n=="object"&&typeof jn=="object"){if(!En($n,jn))return!1}else if($n!==jn)return!1}return!0}for(let In=0;In<Sn.length;In++){const An=Sn[In],Rn=kn[In];if(typeof An!="object"||typeof Rn!="object"||!En(An,Rn))return!1}return!0}if(!(()=>{const Sn=document.getElementById("title").value,kn=document.getElementById("category").value;return console.log(tn),!Sn||!kn||!tn?(alert("Please fill all the required fields!"),!1):Sn===Ot.title&&kn===Ot.category&&ln===Ot.author&&un===Ot.thumbnail&&vn(tn.blocks,Ot.body.blocks)?(alert("No changes detected!"),!1):!0})())return;const wn={id:document.getElementById("title").value.toLowerCase().replace(/[^a-zA-Z0-9]/g,"-").replace(/--/g,"-").replace(/^-|-$/g,""),title:rn,category:sn,thumbnail:un||null,body:tn,publishedAt:new Date,author:ln||"Author"};createBlogPost(wn,()=>{alert("Post updated successfully!"),window.location.href="/admin/blog"},Sn=>{alert("Failed to update post! Please try again."),console.error(Sn)})},gn=()=>{const vn=()=>{createBlogPost({...Ot,thumbnail:null},()=>{alert("Thumbnail deleted successfully!"),dn(null),document.getElementById("thumbnail").value=""},bn=>{alert("Failed to delete thumbnail! Please try again."),console.error(bn)})};deleteBlogImage(un,()=>{vn()},bn=>{bn.code==="storage/object-not-found"?vn():(alert("Failed to delete thumbnail! Please try again."),console.error(bn))})},pn=()=>{if(!window.confirm("Are you sure you want to delete this post?"))return;const vn=()=>{const bn=doc(getFirestore(fi$1),"Blogs",s);deleteDoc(bn).then(()=>{alert("Post deleted successfully!"),window.location.href="/admin/blog"}).catch(wn=>{alert("Failed to delete post! Please try again."),console.error(wn)})};un?deleteBlogImage(un,()=>{vn()},bn=>{bn.code==="storage/object-not-found"?vn():(alert("Failed to delete thumbnail! Please try again."),console.error(bn))}):vn()},_n=vn=>{uploadBlogImage(vn,bn=>{const wn=`https://firebasestorage.googleapis.com/v0/b/${bn.ref.bucket}/o/${encodeURIComponent(bn.ref.fullPath)}?alt=media`;createBlogPost({...Ot,thumbnail:wn},()=>{dn(wn)},Sn=>{alert("Failed to upload thumbnail! Please try again."),console.error(Sn)})},bn=>{alert("Failed to upload thumbnail! Please try again."),console.error(bn)})};return React$1.useEffect(()=>(getDoc(doc(getFirestore(fi$1),"Blogs",s)).then(vn=>{vn.exists()?(en(vn.data()),vn.data().thumbnail&&dn(vn.data().thumbnail),vn.data().title&&on(vn.data().title),vn.data().author&&cn(vn.data().author),vn.data().category&&an(vn.data().category),vn.data().body&&(document.getElementById("output")&&(document.getElementById("output").innerHTML=new edjsParser().parse(vn.data().body)),nn(vn.data().body),setTimeout(()=>{Nt.current===null&&document.querySelectorAll(".ce-block").length===0&&fn(vn.data().body)},100))):en(!1)}),()=>{var vn;(vn=Nt==null?void 0:Nt.current)==null||vn.destroy(),Nt.current=null}),[]),jsxRuntimeExports.jsx(WithAuth,{children:()=>jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(HelmetExport,{children:jsxRuntimeExports.jsx("title",{children:"Manage Blog Post - Admin"})}),jsxRuntimeExports.jsxs("div",{className:"container mx-auto max-w-[1300px] py-10 text-slate-800 dark:text-white",children:[jsxRuntimeExports.jsx(Link,{to:"/admin/blog",children:jsxRuntimeExports.jsx("button",{className:"mb-5",children:" Go back"})}),jsxRuntimeExports.jsx("h1",{className:"text-4xl font-bold text-center",children:"Manage Blog Post"}),Ot===null?jsxRuntimeExports.jsxs("div",{className:"text-center mt-10",children:[jsxRuntimeExports.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",className:"w-16 h-16 mx-auto text-gray-400 dark:text-gray-500",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),jsxRuntimeExports.jsx("p",{className:"text-lg text-gray-400 dark:text-gray-500 mt-5",children:"Loading post..."})]}):Ot===!1?jsxRuntimeExports.jsxs("div",{className:"text-center mt-10",children:[jsxRuntimeExports.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",className:"w-16 h-16 mx-auto text-gray-400 dark:text-gray-500",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),jsxRuntimeExports.jsx("p",{className:"text-lg text-gray-400 dark:text-gray-500 mt-5",children:"Post not found!"})]}):jsxRuntimeExports.jsxs("div",{className:"mt-12 flex flex-col lg:flex-row justify-center items-center lg:items-start gap-12",children:[jsxRuntimeExports.jsxs("form",{className:"bg-white dark:bg-slate-800 shadow-md rounded-md p-8 w-full h-fit max-w-[700px]",onSubmit:vn=>{vn.preventDefault()},children:[jsxRuntimeExports.jsxs("div",{className:"border-b border-slate-200 dark:border-slate-700 pb-4 flex gap-2 sm:gap-4 flex-col sm:flex-row",children:[jsxRuntimeExports.jsx("button",{type:"submit",className:"bg-violet-600 hover:bg-violet-700 text-white font-[500] text-sm py-3 px-6 rounded",id:"updatePost",onClick:mn,children:"Update the Post"}),jsxRuntimeExports.jsx("button",{type:"submit",className:"bg-red-600 hover:bg-red-700 text-white font-[500] text-sm py-3 px-6 rounded",id:"updatePost",onClick:pn,children:"Delete the Post"})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-8 mt-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-2",children:[jsxRuntimeExports.jsx("input",{type:"file",name:"thumbnail",id:"thumbnail",className:"hidden",accept:"image/*",onChange:vn=>{const bn=vn.target.files[0];if(bn.size>32*1024*1024)return alert("File size is too big! Maximum file size is 32MB."),!1;_n(bn)}}),jsxRuntimeExports.jsx("label",{htmlFor:"thumbnail",className:"cursor-pointer",children:jsxRuntimeExports.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 p-4 rounded-md flex items-center justify-center gap-2",children:jsxRuntimeExports.jsx("span",{className:"text-slate-800 dark:text-white font-[500] text-sm",children:"Change or Upload Thumbnail"})})})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-2",children:[jsxRuntimeExports.jsxs("label",{htmlFor:"title",children:["Title ",jsxRuntimeExports.jsx("span",{className:"text-red-500",children:"*"})]}),jsxRuntimeExports.jsx("input",{type:"text",name:"title",id:"title",value:rn,onChange:vn=>on(vn.target.value),placeholder:"What is Branding? The Ultimate Guide",className:"text-slate-800 p-2 border border-slate-200 dark:border-slate-700 rounded-md dark:bg-slate-700 dark:text-white dark:border-violet-500 dark:border-2"})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-2 sm:w-[65%]",children:[jsxRuntimeExports.jsx("label",{htmlFor:"author",children:"Author"}),jsxRuntimeExports.jsx("input",{type:"text",name:"author",id:"author",value:ln,onChange:vn=>cn(vn.target.value),placeholder:"Abdullah",className:"text-slate-800 p-2 border border-slate-200 dark:border-slate-700 rounded-md dark:bg-slate-700 dark:text-white dark:border-violet-500 dark:border-2"})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-2 sm:w-[35%]",children:[jsxRuntimeExports.jsxs("label",{htmlFor:"category",children:["Category ",jsxRuntimeExports.jsx("span",{className:"text-red-500",children:"*"})]}),jsxRuntimeExports.jsxs("select",{name:"category",id:"category",className:"text-slate-800 p-3 py-[0.6rem] border border-slate-200 dark:border-slate-700 rounded-md dark:bg-slate-700 dark:text-white dark:border-violet-500 dark:border-2",value:sn,onChange:vn=>an(vn.target.value),children:[jsxRuntimeExports.jsx("option",{value:"Branding",children:"Branding"}),jsxRuntimeExports.jsx("option",{value:"Development",children:"Development"}),jsxRuntimeExports.jsx("option",{value:"Design",children:"Brand Advisory"}),jsxRuntimeExports.jsx("option",{value:"Marketing",children:"Marketing"}),jsxRuntimeExports.jsx("option",{value:"Content Writing",children:"Content Writing"}),jsxRuntimeExports.jsx("option",{value:"Software Testing",children:"Software Testing"}),jsxRuntimeExports.jsx("option",{value:"Topic",children:"Others"})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-2",children:[jsxRuntimeExports.jsxs("label",{htmlFor:"content",children:["Content ",jsxRuntimeExports.jsx("span",{className:"text-red-500",children:"*"})]}),jsxRuntimeExports.jsx("div",{id:"_blog-body-editor",className:"border border-slate-200 dark:border-slate-700 rounded-md p-4 dark:border-violet-500 dark:border-2 min-h-[300px]"})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"w-full max-w-[700px]",children:[jsxRuntimeExports.jsx("div",{id:"top",className:"mb-5 min-h-[200px] relative",children:un?jsxRuntimeExports.jsx("img",{src:un,alt:"Thumbnail",className:"w-full object-cover rounded-md",style:{aspectRatio:"16/9"}}):jsxRuntimeExports.jsx("div",{className:"absolute bg-slate-200 w-full h-full dark:bg-slate-700 p-4 rounded-md flex items-center justify-center",children:jsxRuntimeExports.jsx("span",{className:"text-slate-800 dark:text-white font-[500] text-sm",children:"Thumbnail Preview"})})}),un&&jsxRuntimeExports.jsxs("button",{className:"mb-5 bg-red-500 dark:bg-red-600 dark:hover:bg-red-700 hover:bg-red-600 text-white font-[500] text-sm py-2 px-4 rounded flex items-center gap-1",onClick:vn=>{window.confirm("Are you sure you want to delete the thumbnail?")&&gn()},children:["Remove"," ",jsxRuntimeExports.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 25 24",strokeWidth:3,stroke:"currentColor",className:"w-4 h-4",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})]}),jsxRuntimeExports.jsx("div",{id:"output",className:"_blog-body border border-slate-200 dark:border-slate-700 rounded-md p-4 dark:border-violet-500 dark:border-2"})]})]})]})]})})}function getUserAgent(){return typeof navigator=="object"&&"userAgent"in navigator?navigator.userAgent:typeof process=="object"&&process.version!==void 0?`Node.js/${process.version.substr(1)} (${process.platform}; ${process.arch})`:"<environment undetectable>"}const distWeb$4=Object.freeze(Object.defineProperty({__proto__:null,getUserAgent},Symbol.toStringTag,{value:"Module"}));var beforeAfterHook={exports:{}},register_1=register$1;function register$1(Nt,s,Ot,en){if(typeof Ot!="function")throw new Error("method for before hook must be a function");return en||(en={}),Array.isArray(s)?s.reverse().reduce(function(tn,nn){return register$1.bind(null,Nt,nn,tn,en)},Ot)():Promise.resolve().then(function(){return Nt.registry[s]?Nt.registry[s].reduce(function(tn,nn){return nn.hook.bind(null,tn,en)},Ot)():Ot(en)})}var add=addHook$1;function addHook$1(Nt,s,Ot,en){var tn=en;Nt.registry[Ot]||(Nt.registry[Ot]=[]),s==="before"&&(en=function(nn,rn){return Promise.resolve().then(tn.bind(null,rn)).then(nn.bind(null,rn))}),s==="after"&&(en=function(nn,rn){var on;return Promise.resolve().then(nn.bind(null,rn)).then(function(sn){return on=sn,tn(on,rn)}).then(function(){return on})}),s==="error"&&(en=function(nn,rn){return Promise.resolve().then(nn.bind(null,rn)).catch(function(on){return tn(on,rn)})}),Nt.registry[Ot].push({hook:en,orig:tn})}var remove=removeHook$1;function removeHook$1(Nt,s,Ot){if(Nt.registry[s]){var en=Nt.registry[s].map(function(tn){return tn.orig}).indexOf(Ot);en!==-1&&Nt.registry[s].splice(en,1)}}var register=register_1,addHook=add,removeHook=remove,bind=Function.bind,bindable=bind.bind(bind);function bindApi(Nt,s,Ot){var en=bindable(removeHook,null).apply(null,Ot?[s,Ot]:[s]);Nt.api={remove:en},Nt.remove=en,["before","error","after","wrap"].forEach(function(tn){var nn=Ot?[s,tn,Ot]:[s,tn];Nt[tn]=Nt.api[tn]=bindable(addHook,null).apply(null,nn)})}function HookSingular(){var Nt="h",s={registry:{}},Ot=register.bind(null,s,Nt);return bindApi(Ot,s,Nt),Ot}function HookCollection(){var Nt={registry:{}},s=register.bind(null,Nt);return bindApi(s,Nt),s}var collectionHookDeprecationMessageDisplayed=!1;function Hook(){return collectionHookDeprecationMessageDisplayed||(console.warn('[before-after-hook]: "Hook()" repurposing warning, use "Hook.Collection()". Read more: https://git.io/upgrade-before-after-hook-to-1.4'),collectionHookDeprecationMessageDisplayed=!0),HookCollection()}Hook.Singular=HookSingular.bind();Hook.Collection=HookCollection.bind();beforeAfterHook.exports=Hook;beforeAfterHook.exports.Hook=Hook;beforeAfterHook.exports.Singular=Hook.Singular;var Collection=beforeAfterHook.exports.Collection=Hook.Collection,VERSION$e="9.0.4",userAgent=`octokit-endpoint.js/${VERSION$e} ${getUserAgent()}`,DEFAULTS={method:"GET",baseUrl:"https://api.github.com",headers:{accept:"application/vnd.github.v3+json","user-agent":userAgent},mediaType:{format:""}};function lowercaseKeys(Nt){return Nt?Object.keys(Nt).reduce((s,Ot)=>(s[Ot.toLowerCase()]=Nt[Ot],s),{}):{}}function isPlainObject$1(Nt){if(typeof Nt!="object"||Nt===null||Object.prototype.toString.call(Nt)!=="[object Object]")return!1;const s=Object.getPrototypeOf(Nt);if(s===null)return!0;const Ot=Object.prototype.hasOwnProperty.call(s,"constructor")&&s.constructor;return typeof Ot=="function"&&Ot instanceof Ot&&Function.prototype.call(Ot)===Function.prototype.call(Nt)}function mergeDeep(Nt,s){const Ot=Object.assign({},Nt);return Object.keys(s).forEach(en=>{isPlainObject$1(s[en])?en in Nt?Ot[en]=mergeDeep(Nt[en],s[en]):Object.assign(Ot,{[en]:s[en]}):Object.assign(Ot,{[en]:s[en]})}),Ot}function removeUndefinedProperties(Nt){for(const s in Nt)Nt[s]===void 0&&delete Nt[s];return Nt}function merge(Nt,s,Ot){var tn;if(typeof s=="string"){let[nn,rn]=s.split(" ");Ot=Object.assign(rn?{method:nn,url:rn}:{url:nn},Ot)}else Ot=Object.assign({},s);Ot.headers=lowercaseKeys(Ot.headers),removeUndefinedProperties(Ot),removeUndefinedProperties(Ot.headers);const en=mergeDeep(Nt||{},Ot);return Ot.url==="/graphql"&&(Nt&&((tn=Nt.mediaType.previews)!=null&&tn.length)&&(en.mediaType.previews=Nt.mediaType.previews.filter(nn=>!en.mediaType.previews.includes(nn)).concat(en.mediaType.previews)),en.mediaType.previews=(en.mediaType.previews||[]).map(nn=>nn.replace(/-preview/,""))),en}function addQueryParameters(Nt,s){const Ot=/\?/.test(Nt)?"&":"?",en=Object.keys(s);return en.length===0?Nt:Nt+Ot+en.map(tn=>tn==="q"?"q="+s.q.split("+").map(encodeURIComponent).join("+"):`${tn}=${encodeURIComponent(s[tn])}`).join("&")}var urlVariableRegex=/\{[^}]+\}/g;function removeNonChars(Nt){return Nt.replace(/^\W+|\W+$/g,"").split(/,/)}function extractUrlVariableNames(Nt){const s=Nt.match(urlVariableRegex);return s?s.map(removeNonChars).reduce((Ot,en)=>Ot.concat(en),[]):[]}function omit(Nt,s){const Ot={__proto__:null};for(const en of Object.keys(Nt))s.indexOf(en)===-1&&(Ot[en]=Nt[en]);return Ot}function encodeReserved(Nt){return Nt.split(/(%[0-9A-Fa-f]{2})/g).map(function(s){return/%[0-9A-Fa-f]/.test(s)||(s=encodeURI(s).replace(/%5B/g,"[").replace(/%5D/g,"]")),s}).join("")}function encodeUnreserved(Nt){return encodeURIComponent(Nt).replace(/[!'()*]/g,function(s){return"%"+s.charCodeAt(0).toString(16).toUpperCase()})}function encodeValue(Nt,s,Ot){return s=Nt==="+"||Nt==="#"?encodeReserved(s):encodeUnreserved(s),Ot?encodeUnreserved(Ot)+"="+s:s}function isDefined(Nt){return Nt!=null}function isKeyOperator(Nt){return Nt===";"||Nt==="&"||Nt==="?"}function getValues(Nt,s,Ot,en){var tn=Nt[Ot],nn=[];if(isDefined(tn)&&tn!=="")if(typeof tn=="string"||typeof tn=="number"||typeof tn=="boolean")tn=tn.toString(),en&&en!=="*"&&(tn=tn.substring(0,parseInt(en,10))),nn.push(encodeValue(s,tn,isKeyOperator(s)?Ot:""));else if(en==="*")Array.isArray(tn)?tn.filter(isDefined).forEach(function(rn){nn.push(encodeValue(s,rn,isKeyOperator(s)?Ot:""))}):Object.keys(tn).forEach(function(rn){isDefined(tn[rn])&&nn.push(encodeValue(s,tn[rn],rn))});else{const rn=[];Array.isArray(tn)?tn.filter(isDefined).forEach(function(on){rn.push(encodeValue(s,on))}):Object.keys(tn).forEach(function(on){isDefined(tn[on])&&(rn.push(encodeUnreserved(on)),rn.push(encodeValue(s,tn[on].toString())))}),isKeyOperator(s)?nn.push(encodeUnreserved(Ot)+"="+rn.join(",")):rn.length!==0&&nn.push(rn.join(","))}else s===";"?isDefined(tn)&&nn.push(encodeUnreserved(Ot)):tn===""&&(s==="&"||s==="?")?nn.push(encodeUnreserved(Ot)+"="):tn===""&&nn.push("");return nn}function parseUrl(Nt){return{expand:expand.bind(null,Nt)}}function expand(Nt,s){var Ot=["+","#",".","/",";","?","&"];return Nt=Nt.replace(/\{([^\{\}]+)\}|([^\{\}]+)/g,function(en,tn,nn){if(tn){let on="";const sn=[];if(Ot.indexOf(tn.charAt(0))!==-1&&(on=tn.charAt(0),tn=tn.substr(1)),tn.split(/,/g).forEach(function(an){var ln=/([^:\*]*)(?::(\d+)|(\*))?/.exec(an);sn.push(getValues(s,on,ln[1],ln[2]||ln[3]))}),on&&on!=="+"){var rn=",";return on==="?"?rn="&":on!=="#"&&(rn=on),(sn.length!==0?on:"")+sn.join(rn)}else return sn.join(",")}else return encodeReserved(nn)}),Nt==="/"?Nt:Nt.replace(/\/$/,"")}function parse(Nt){var ln;let s=Nt.method.toUpperCase(),Ot=(Nt.url||"/").replace(/:([a-z]\w+)/g,"{$1}"),en=Object.assign({},Nt.headers),tn,nn=omit(Nt,["method","baseUrl","url","headers","request","mediaType"]);const rn=extractUrlVariableNames(Ot);Ot=parseUrl(Ot).expand(nn),/^http/.test(Ot)||(Ot=Nt.baseUrl+Ot);const on=Object.keys(Nt).filter(cn=>rn.includes(cn)).concat("baseUrl"),sn=omit(nn,on);if(!/application\/octet-stream/i.test(en.accept)&&(Nt.mediaType.format&&(en.accept=en.accept.split(/,/).map(cn=>cn.replace(/application\/vnd(\.\w+)(\.v3)?(\.\w+)?(\+json)?$/,`application/vnd$1$2.${Nt.mediaType.format}`)).join(",")),Ot.endsWith("/graphql")&&(ln=Nt.mediaType.previews)!=null&&ln.length)){const cn=en.accept.match(/[\w-]+(?=-preview)/g)||[];en.accept=cn.concat(Nt.mediaType.previews).map(un=>{const dn=Nt.mediaType.format?`.${Nt.mediaType.format}`:"+json";return`application/vnd.github.${un}-preview${dn}`}).join(",")}return["GET","HEAD"].includes(s)?Ot=addQueryParameters(Ot,sn):"data"in sn?tn=sn.data:Object.keys(sn).length&&(tn=sn),!en["content-type"]&&typeof tn<"u"&&(en["content-type"]="application/json; charset=utf-8"),["PATCH","PUT"].includes(s)&&typeof tn>"u"&&(tn=""),Object.assign({method:s,url:Ot,headers:en},typeof tn<"u"?{body:tn}:null,Nt.request?{request:Nt.request}:null)}function endpointWithDefaults(Nt,s,Ot){return parse(merge(Nt,s,Ot))}function withDefaults$2(Nt,s){const Ot=merge(Nt,s),en=endpointWithDefaults.bind(null,Ot);return Object.assign(en,{DEFAULTS:Ot,defaults:withDefaults$2.bind(null,Ot),merge:merge.bind(null,Ot),parse})}var endpoint=withDefaults$2(null,DEFAULTS);class Deprecation extends Error{constructor(s){super(s),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.name="Deprecation"}}var once$2={exports:{}},wrappy_1=wrappy$1;function wrappy$1(Nt,s){if(Nt&&s)return wrappy$1(Nt)(s);if(typeof Nt!="function")throw new TypeError("need wrapper function");return Object.keys(Nt).forEach(function(en){Ot[en]=Nt[en]}),Ot;function Ot(){for(var en=new Array(arguments.length),tn=0;tn<en.length;tn++)en[tn]=arguments[tn];var nn=Nt.apply(this,en),rn=en[en.length-1];return typeof nn=="function"&&nn!==rn&&Object.keys(rn).forEach(function(on){nn[on]=rn[on]}),nn}}var wrappy=wrappy_1;once$2.exports=wrappy(once);once$2.exports.strict=wrappy(onceStrict);once.proto=once(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return once(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return onceStrict(this)},configurable:!0})});function once(Nt){var s=function(){return s.called?s.value:(s.called=!0,s.value=Nt.apply(this,arguments))};return s.called=!1,s}function onceStrict(Nt){var s=function(){if(s.called)throw new Error(s.onceError);return s.called=!0,s.value=Nt.apply(this,arguments)},Ot=Nt.name||"Function wrapped with `once`";return s.onceError=Ot+" shouldn't be called more than once",s.called=!1,s}var onceExports=once$2.exports;const once$1=getDefaultExportFromCjs(onceExports);var logOnceCode=once$1(Nt=>console.warn(Nt)),logOnceHeaders=once$1(Nt=>console.warn(Nt)),RequestError=class extends Error{constructor(Nt,s,Ot){super(Nt),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.name="HttpError",this.status=s;let en;"headers"in Ot&&typeof Ot.headers<"u"&&(en=Ot.headers),"response"in Ot&&(this.response=Ot.response,en=Ot.response.headers);const tn=Object.assign({},Ot.request);Ot.request.headers.authorization&&(tn.headers=Object.assign({},Ot.request.headers,{authorization:Ot.request.headers.authorization.replace(/ .*$/," [REDACTED]")})),tn.url=tn.url.replace(/\bclient_secret=\w+/g,"client_secret=[REDACTED]").replace(/\baccess_token=\w+/g,"access_token=[REDACTED]"),this.request=tn,Object.defineProperty(this,"code",{get(){return logOnceCode(new Deprecation("[@octokit/request-error] `error.code` is deprecated, use `error.status`.")),s}}),Object.defineProperty(this,"headers",{get(){return logOnceHeaders(new Deprecation("[@octokit/request-error] `error.headers` is deprecated, use `error.response.headers`.")),en||{}}})}},VERSION$d="8.2.0";function isPlainObject(Nt){if(typeof Nt!="object"||Nt===null||Object.prototype.toString.call(Nt)!=="[object Object]")return!1;const s=Object.getPrototypeOf(Nt);if(s===null)return!0;const Ot=Object.prototype.hasOwnProperty.call(s,"constructor")&&s.constructor;return typeof Ot=="function"&&Ot instanceof Ot&&Function.prototype.call(Ot)===Function.prototype.call(Nt)}function getBufferResponse(Nt){return Nt.arrayBuffer()}function fetchWrapper(Nt){var on,sn,an;const s=Nt.request&&Nt.request.log?Nt.request.log:console,Ot=((on=Nt.request)==null?void 0:on.parseSuccessResponseBody)!==!1;(isPlainObject(Nt.body)||Array.isArray(Nt.body))&&(Nt.body=JSON.stringify(Nt.body));let en={},tn,nn,{fetch:rn}=globalThis;if((sn=Nt.request)!=null&&sn.fetch&&(rn=Nt.request.fetch),!rn)throw new Error("fetch is not set. Please pass a fetch implementation as new Octokit({ request: { fetch }}). Learn more at https://github.com/octokit/octokit.js/#fetch-missing");return rn(Nt.url,{method:Nt.method,body:Nt.body,headers:Nt.headers,signal:(an=Nt.request)==null?void 0:an.signal,...Nt.body&&{duplex:"half"}}).then(async ln=>{nn=ln.url,tn=ln.status;for(const cn of ln.headers)en[cn[0]]=cn[1];if("deprecation"in en){const cn=en.link&&en.link.match(/<([^>]+)>; rel="deprecation"/),un=cn&&cn.pop();s.warn(`[@octokit/request] "${Nt.method} ${Nt.url}" is deprecated. It is scheduled to be removed on ${en.sunset}${un?`. See ${un}`:""}`)}if(!(tn===204||tn===205)){if(Nt.method==="HEAD"){if(tn<400)return;throw new RequestError(ln.statusText,tn,{response:{url:nn,status:tn,headers:en,data:void 0},request:Nt})}if(tn===304)throw new RequestError("Not modified",tn,{response:{url:nn,status:tn,headers:en,data:await getResponseData(ln)},request:Nt});if(tn>=400){const cn=await getResponseData(ln);throw new RequestError(toErrorMessage(cn),tn,{response:{url:nn,status:tn,headers:en,data:cn},request:Nt})}return Ot?await getResponseData(ln):ln.body}}).then(ln=>({status:tn,url:nn,headers:en,data:ln})).catch(ln=>{if(ln instanceof RequestError)throw ln;if(ln.name==="AbortError")throw ln;let cn=ln.message;throw ln.name==="TypeError"&&"cause"in ln&&(ln.cause instanceof Error?cn=ln.cause.message:typeof ln.cause=="string"&&(cn=ln.cause)),new RequestError(cn,500,{request:Nt})})}async function getResponseData(Nt){const s=Nt.headers.get("content-type");return/application\/json/.test(s)?Nt.json().catch(()=>Nt.text()).catch(()=>""):!s||/^text\/|charset=utf-8$/.test(s)?Nt.text():getBufferResponse(Nt)}function toErrorMessage(Nt){if(typeof Nt=="string")return Nt;let s;return"documentation_url"in Nt?s=` - ${Nt.documentation_url}`:s="","message"in Nt?Array.isArray(Nt.errors)?`${Nt.message}: ${Nt.errors.map(JSON.stringify).join(", ")}${s}`:`${Nt.message}${s}`:`Unknown error: ${JSON.stringify(Nt)}`}function withDefaults$1(Nt,s){const Ot=Nt.defaults(s);return Object.assign(function(tn,nn){const rn=Ot.merge(tn,nn);if(!rn.request||!rn.request.hook)return fetchWrapper(Ot.parse(rn));const on=(sn,an)=>fetchWrapper(Ot.parse(Ot.merge(sn,an)));return Object.assign(on,{endpoint:Ot,defaults:withDefaults$1.bind(null,Ot)}),rn.request.hook(on,rn)},{endpoint:Ot,defaults:withDefaults$1.bind(null,Ot)})}var request=withDefaults$1(endpoint,{headers:{"user-agent":`octokit-request.js/${VERSION$d} ${getUserAgent()}`}}),VERSION$c="7.0.2";function _buildMessageForResponseErrors(Nt){return`Request failed due to following response errors:
`+Nt.errors.map(s=>` - ${s.message}`).join(`
`)}var GraphqlResponseError=class extends Error{constructor(Nt,s,Ot){super(_buildMessageForResponseErrors(Ot)),this.request=Nt,this.headers=s,this.response=Ot,this.name="GraphqlResponseError",this.errors=Ot.errors,this.data=Ot.data,Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}},NON_VARIABLE_OPTIONS=["method","baseUrl","url","headers","request","query","mediaType"],FORBIDDEN_VARIABLE_OPTIONS=["query","method","url"],GHES_V3_SUFFIX_REGEX=/\/api\/v3\/?$/;function graphql(Nt,s,Ot){if(Ot){if(typeof s=="string"&&"query"in Ot)return Promise.reject(new Error('[@octokit/graphql] "query" cannot be used as variable name'));for(const rn in Ot)if(FORBIDDEN_VARIABLE_OPTIONS.includes(rn))return Promise.reject(new Error(`[@octokit/graphql] "${rn}" cannot be used as variable name`))}const en=typeof s=="string"?Object.assign({query:s},Ot):s,tn=Object.keys(en).reduce((rn,on)=>NON_VARIABLE_OPTIONS.includes(on)?(rn[on]=en[on],rn):(rn.variables||(rn.variables={}),rn.variables[on]=en[on],rn),{}),nn=en.baseUrl||Nt.endpoint.DEFAULTS.baseUrl;return GHES_V3_SUFFIX_REGEX.test(nn)&&(tn.url=nn.replace(GHES_V3_SUFFIX_REGEX,"/api/graphql")),Nt(tn).then(rn=>{if(rn.data.errors){const on={};for(const sn of Object.keys(rn.headers))on[sn]=rn.headers[sn];throw new GraphqlResponseError(tn,on,rn.data)}return rn.data.data})}function withDefaults(Nt,s){const Ot=Nt.defaults(s);return Object.assign((tn,nn)=>graphql(Ot,tn,nn),{defaults:withDefaults.bind(null,Ot),endpoint:Ot.endpoint})}withDefaults(request,{headers:{"user-agent":`octokit-graphql.js/${VERSION$c} ${getUserAgent()}`},method:"POST",url:"/graphql"});function withCustomRequest(Nt){return withDefaults(Nt,{method:"POST",url:"/graphql"})}var REGEX_IS_INSTALLATION_LEGACY=/^v1\./,REGEX_IS_INSTALLATION=/^ghs_/,REGEX_IS_USER_TO_SERVER=/^ghu_/;async function auth$4(Nt){const s=Nt.split(/\./).length===3,Ot=REGEX_IS_INSTALLATION_LEGACY.test(Nt)||REGEX_IS_INSTALLATION.test(Nt),en=REGEX_IS_USER_TO_SERVER.test(Nt);return{type:"token",token:Nt,tokenType:s?"app":Ot?"installation":en?"user-to-server":"oauth"}}function withAuthorizationPrefix(Nt){return Nt.split(/\./).length===3?`bearer ${Nt}`:`token ${Nt}`}async function hook$4(Nt,s,Ot,en){const tn=s.endpoint.merge(Ot,en);return tn.headers.authorization=withAuthorizationPrefix(Nt),s(tn)}var createTokenAuth=function Nt(s){if(!s)throw new Error("[@octokit/auth-token] No token passed to createTokenAuth");if(typeof s!="string")throw new Error("[@octokit/auth-token] Token passed to createTokenAuth is not a string");return s=s.replace(/^(token|bearer) +/i,""),Object.assign(auth$4.bind(null,s),{hook:hook$4.bind(null,s)})},VERSION$b="5.1.0",noop$1=()=>{},consoleWarn=console.warn.bind(console),consoleError=console.error.bind(console),userAgentTrail=`octokit-core.js/${VERSION$b} ${getUserAgent()}`,xr,Octokit$1=(xr=class{static defaults(s){return class extends this{constructor(...en){const tn=en[0]||{};if(typeof s=="function"){super(s(tn));return}super(Object.assign({},s,tn,tn.userAgent&&s.userAgent?{userAgent:`${tn.userAgent} ${s.userAgent}`}:null))}}}static plugin(...s){var tn;const Ot=this.plugins;return tn=class extends this{},tn.plugins=Ot.concat(s.filter(rn=>!Ot.includes(rn))),tn}constructor(s={}){const Ot=new Collection,en={baseUrl:request.endpoint.DEFAULTS.baseUrl,headers:{},request:Object.assign({},s.request,{hook:Ot.bind(null,"request")}),mediaType:{previews:[],format:""}};if(en.headers["user-agent"]=s.userAgent?`${s.userAgent} ${userAgentTrail}`:userAgentTrail,s.baseUrl&&(en.baseUrl=s.baseUrl),s.previews&&(en.mediaType.previews=s.previews),s.timeZone&&(en.headers["time-zone"]=s.timeZone),this.request=request.defaults(en),this.graphql=withCustomRequest(this.request).defaults(en),this.log=Object.assign({debug:noop$1,info:noop$1,warn:consoleWarn,error:consoleError},s.log),this.hook=Ot,s.authStrategy){const{authStrategy:nn,...rn}=s,on=nn(Object.assign({request:this.request,log:this.log,octokit:this,octokitOptions:rn},s.auth));Ot.wrap("request",on.hook),this.auth=on}else if(!s.auth)this.auth=async()=>({type:"unauthenticated"});else{const nn=createTokenAuth(s.auth);Ot.wrap("request",nn.hook),this.auth=nn}const tn=this.constructor;for(let nn=0;nn<tn.plugins.length;++nn)Object.assign(this,tn.plugins[nn](this,s))}},xr.VERSION=VERSION$b,xr.plugins=[],xr);const distWeb$3=Object.freeze(Object.defineProperty({__proto__:null,Octokit:Octokit$1},Symbol.toStringTag,{value:"Module"}));var VERSION$a="9.2.1";function normalizePaginatedListResponse(Nt){if(!Nt.data)return{...Nt,data:[]};if(!("total_count"in Nt.data&&!("url"in Nt.data)))return Nt;const Ot=Nt.data.incomplete_results,en=Nt.data.repository_selection,tn=Nt.data.total_count;delete Nt.data.incomplete_results,delete Nt.data.repository_selection,delete Nt.data.total_count;const nn=Object.keys(Nt.data)[0],rn=Nt.data[nn];return Nt.data=rn,typeof Ot<"u"&&(Nt.data.incomplete_results=Ot),typeof en<"u"&&(Nt.data.repository_selection=en),Nt.data.total_count=tn,Nt}function iterator(Nt,s,Ot){const en=typeof s=="function"?s.endpoint(Ot):Nt.request.endpoint(s,Ot),tn=typeof s=="function"?s:Nt.request,nn=en.method,rn=en.headers;let on=en.url;return{[Symbol.asyncIterator]:()=>({async next(){if(!on)return{done:!0};try{const sn=await tn({method:nn,url:on,headers:rn}),an=normalizePaginatedListResponse(sn);return on=((an.headers.link||"").match(/<([^>]+)>;\s*rel="next"/)||[])[1],{value:an}}catch(sn){if(sn.status!==409)throw sn;return on="",{value:{status:200,headers:{},data:[]}}}}})}}function paginate(Nt,s,Ot,en){return typeof Ot=="function"&&(en=Ot,Ot=void 0),gather(Nt,[],iterator(Nt,s,Ot)[Symbol.asyncIterator](),en)}function gather(Nt,s,Ot,en){return Ot.next().then(tn=>{if(tn.done)return s;let nn=!1;function rn(){nn=!0}return s=s.concat(en?en(tn.value,rn):tn.value.data),nn?s:gather(Nt,s,Ot,en)})}Object.assign(paginate,{iterator});function paginateRest(Nt){return{paginate:Object.assign(paginate.bind(null,Nt),{iterator:iterator.bind(null,Nt)})}}paginateRest.VERSION=VERSION$a;var generateMessage=(Nt,s)=>`The cursor at "${Nt.join(",")}" did not change its value "${s}" after a page transition. Please make sure your that your query is set up correctly.`,MissingCursorChange=class extends Error{constructor(Nt,s){super(generateMessage(Nt.pathInQuery,s)),this.pageInfo=Nt,this.cursorValue=s,this.name="MissingCursorChangeError",Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}},MissingPageInfo=class extends Error{constructor(Nt){super(`No pageInfo property found in response. Please make sure to specify the pageInfo in your query. Response-Data: ${JSON.stringify(Nt,null,2)}`),this.response=Nt,this.name="MissingPageInfo",Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}},isObject=Nt=>Object.prototype.toString.call(Nt)==="[object Object]";function findPaginatedResourcePath(Nt){const s=deepFindPathToProperty(Nt,"pageInfo");if(s.length===0)throw new MissingPageInfo(Nt);return s}var deepFindPathToProperty=(Nt,s,Ot=[])=>{for(const en of Object.keys(Nt)){const tn=[...Ot,en],nn=Nt[en];if(nn.hasOwnProperty(s))return tn;if(isObject(nn)){const rn=deepFindPathToProperty(nn,s,tn);if(rn.length>0)return rn}}return[]},get=(Nt,s)=>s.reduce((Ot,en)=>Ot[en],Nt),set=(Nt,s,Ot)=>{const en=s[s.length-1],tn=[...s].slice(0,-1),nn=get(Nt,tn);typeof Ot=="function"?nn[en]=Ot(nn[en]):nn[en]=Ot},extractPageInfos=Nt=>{const s=findPaginatedResourcePath(Nt);return{pathInQuery:s,pageInfo:get(Nt,[...s,"pageInfo"])}},isForwardSearch=Nt=>Nt.hasOwnProperty("hasNextPage"),getCursorFrom=Nt=>isForwardSearch(Nt)?Nt.endCursor:Nt.startCursor,hasAnotherPage=Nt=>isForwardSearch(Nt)?Nt.hasNextPage:Nt.hasPreviousPage,createIterator=Nt=>(s,Ot={})=>{let en=!0,tn={...Ot};return{[Symbol.asyncIterator]:()=>({async next(){if(!en)return{done:!0,value:{}};const nn=await Nt.graphql(s,tn),rn=extractPageInfos(nn),on=getCursorFrom(rn.pageInfo);if(en=hasAnotherPage(rn.pageInfo),en&&on===tn.cursor)throw new MissingCursorChange(rn,on);return tn={...tn,cursor:on},{done:!1,value:nn}}})}},mergeResponses=(Nt,s)=>{if(Object.keys(Nt).length===0)return Object.assign(Nt,s);const Ot=findPaginatedResourcePath(Nt),en=[...Ot,"nodes"],tn=get(s,en);tn&&set(Nt,en,sn=>[...sn,...tn]);const nn=[...Ot,"edges"],rn=get(s,nn);rn&&set(Nt,nn,sn=>[...sn,...rn]);const on=[...Ot,"pageInfo"];return set(Nt,on,get(s,on)),Nt},createPaginate=Nt=>{const s=createIterator(Nt);return async(Ot,en={})=>{let tn={};for await(const nn of s(Ot,en))tn=mergeResponses(tn,nn);return tn}};function paginateGraphql(Nt){return Nt.graphql,{graphql:Object.assign(Nt.graphql,{paginate:Object.assign(createPaginate(Nt),{iterator:createIterator(Nt)})})}}var VERSION$9="10.4.1",Endpoints={actions:{addCustomLabelsToSelfHostedRunnerForOrg:["POST /orgs/{org}/actions/runners/{runner_id}/labels"],addCustomLabelsToSelfHostedRunnerForRepo:["POST /repos/{owner}/{repo}/actions/runners/{runner_id}/labels"],addSelectedRepoToOrgSecret:["PUT /orgs/{org}/actions/secrets/{secret_name}/repositories/{repository_id}"],addSelectedRepoToOrgVariable:["PUT /orgs/{org}/actions/variables/{name}/repositories/{repository_id}"],approveWorkflowRun:["POST /repos/{owner}/{repo}/actions/runs/{run_id}/approve"],cancelWorkflowRun:["POST /repos/{owner}/{repo}/actions/runs/{run_id}/cancel"],createEnvironmentVariable:["POST /repositories/{repository_id}/environments/{environment_name}/variables"],createOrUpdateEnvironmentSecret:["PUT /repositories/{repository_id}/environments/{environment_name}/secrets/{secret_name}"],createOrUpdateOrgSecret:["PUT /orgs/{org}/actions/secrets/{secret_name}"],createOrUpdateRepoSecret:["PUT /repos/{owner}/{repo}/actions/secrets/{secret_name}"],createOrgVariable:["POST /orgs/{org}/actions/variables"],createRegistrationTokenForOrg:["POST /orgs/{org}/actions/runners/registration-token"],createRegistrationTokenForRepo:["POST /repos/{owner}/{repo}/actions/runners/registration-token"],createRemoveTokenForOrg:["POST /orgs/{org}/actions/runners/remove-token"],createRemoveTokenForRepo:["POST /repos/{owner}/{repo}/actions/runners/remove-token"],createRepoVariable:["POST /repos/{owner}/{repo}/actions/variables"],createWorkflowDispatch:["POST /repos/{owner}/{repo}/actions/workflows/{workflow_id}/dispatches"],deleteActionsCacheById:["DELETE /repos/{owner}/{repo}/actions/caches/{cache_id}"],deleteActionsCacheByKey:["DELETE /repos/{owner}/{repo}/actions/caches{?key,ref}"],deleteArtifact:["DELETE /repos/{owner}/{repo}/actions/artifacts/{artifact_id}"],deleteEnvironmentSecret:["DELETE /repositories/{repository_id}/environments/{environment_name}/secrets/{secret_name}"],deleteEnvironmentVariable:["DELETE /repositories/{repository_id}/environments/{environment_name}/variables/{name}"],deleteOrgSecret:["DELETE /orgs/{org}/actions/secrets/{secret_name}"],deleteOrgVariable:["DELETE /orgs/{org}/actions/variables/{name}"],deleteRepoSecret:["DELETE /repos/{owner}/{repo}/actions/secrets/{secret_name}"],deleteRepoVariable:["DELETE /repos/{owner}/{repo}/actions/variables/{name}"],deleteSelfHostedRunnerFromOrg:["DELETE /orgs/{org}/actions/runners/{runner_id}"],deleteSelfHostedRunnerFromRepo:["DELETE /repos/{owner}/{repo}/actions/runners/{runner_id}"],deleteWorkflowRun:["DELETE /repos/{owner}/{repo}/actions/runs/{run_id}"],deleteWorkflowRunLogs:["DELETE /repos/{owner}/{repo}/actions/runs/{run_id}/logs"],disableSelectedRepositoryGithubActionsOrganization:["DELETE /orgs/{org}/actions/permissions/repositories/{repository_id}"],disableWorkflow:["PUT /repos/{owner}/{repo}/actions/workflows/{workflow_id}/disable"],downloadArtifact:["GET /repos/{owner}/{repo}/actions/artifacts/{artifact_id}/{archive_format}"],downloadJobLogsForWorkflowRun:["GET /repos/{owner}/{repo}/actions/jobs/{job_id}/logs"],downloadWorkflowRunAttemptLogs:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/attempts/{attempt_number}/logs"],downloadWorkflowRunLogs:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/logs"],enableSelectedRepositoryGithubActionsOrganization:["PUT /orgs/{org}/actions/permissions/repositories/{repository_id}"],enableWorkflow:["PUT /repos/{owner}/{repo}/actions/workflows/{workflow_id}/enable"],forceCancelWorkflowRun:["POST /repos/{owner}/{repo}/actions/runs/{run_id}/force-cancel"],generateRunnerJitconfigForOrg:["POST /orgs/{org}/actions/runners/generate-jitconfig"],generateRunnerJitconfigForRepo:["POST /repos/{owner}/{repo}/actions/runners/generate-jitconfig"],getActionsCacheList:["GET /repos/{owner}/{repo}/actions/caches"],getActionsCacheUsage:["GET /repos/{owner}/{repo}/actions/cache/usage"],getActionsCacheUsageByRepoForOrg:["GET /orgs/{org}/actions/cache/usage-by-repository"],getActionsCacheUsageForOrg:["GET /orgs/{org}/actions/cache/usage"],getAllowedActionsOrganization:["GET /orgs/{org}/actions/permissions/selected-actions"],getAllowedActionsRepository:["GET /repos/{owner}/{repo}/actions/permissions/selected-actions"],getArtifact:["GET /repos/{owner}/{repo}/actions/artifacts/{artifact_id}"],getCustomOidcSubClaimForRepo:["GET /repos/{owner}/{repo}/actions/oidc/customization/sub"],getEnvironmentPublicKey:["GET /repositories/{repository_id}/environments/{environment_name}/secrets/public-key"],getEnvironmentSecret:["GET /repositories/{repository_id}/environments/{environment_name}/secrets/{secret_name}"],getEnvironmentVariable:["GET /repositories/{repository_id}/environments/{environment_name}/variables/{name}"],getGithubActionsDefaultWorkflowPermissionsOrganization:["GET /orgs/{org}/actions/permissions/workflow"],getGithubActionsDefaultWorkflowPermissionsRepository:["GET /repos/{owner}/{repo}/actions/permissions/workflow"],getGithubActionsPermissionsOrganization:["GET /orgs/{org}/actions/permissions"],getGithubActionsPermissionsRepository:["GET /repos/{owner}/{repo}/actions/permissions"],getJobForWorkflowRun:["GET /repos/{owner}/{repo}/actions/jobs/{job_id}"],getOrgPublicKey:["GET /orgs/{org}/actions/secrets/public-key"],getOrgSecret:["GET /orgs/{org}/actions/secrets/{secret_name}"],getOrgVariable:["GET /orgs/{org}/actions/variables/{name}"],getPendingDeploymentsForRun:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/pending_deployments"],getRepoPermissions:["GET /repos/{owner}/{repo}/actions/permissions",{},{renamed:["actions","getGithubActionsPermissionsRepository"]}],getRepoPublicKey:["GET /repos/{owner}/{repo}/actions/secrets/public-key"],getRepoSecret:["GET /repos/{owner}/{repo}/actions/secrets/{secret_name}"],getRepoVariable:["GET /repos/{owner}/{repo}/actions/variables/{name}"],getReviewsForRun:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/approvals"],getSelfHostedRunnerForOrg:["GET /orgs/{org}/actions/runners/{runner_id}"],getSelfHostedRunnerForRepo:["GET /repos/{owner}/{repo}/actions/runners/{runner_id}"],getWorkflow:["GET /repos/{owner}/{repo}/actions/workflows/{workflow_id}"],getWorkflowAccessToRepository:["GET /repos/{owner}/{repo}/actions/permissions/access"],getWorkflowRun:["GET /repos/{owner}/{repo}/actions/runs/{run_id}"],getWorkflowRunAttempt:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/attempts/{attempt_number}"],getWorkflowRunUsage:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/timing"],getWorkflowUsage:["GET /repos/{owner}/{repo}/actions/workflows/{workflow_id}/timing"],listArtifactsForRepo:["GET /repos/{owner}/{repo}/actions/artifacts"],listEnvironmentSecrets:["GET /repositories/{repository_id}/environments/{environment_name}/secrets"],listEnvironmentVariables:["GET /repositories/{repository_id}/environments/{environment_name}/variables"],listJobsForWorkflowRun:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/jobs"],listJobsForWorkflowRunAttempt:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/attempts/{attempt_number}/jobs"],listLabelsForSelfHostedRunnerForOrg:["GET /orgs/{org}/actions/runners/{runner_id}/labels"],listLabelsForSelfHostedRunnerForRepo:["GET /repos/{owner}/{repo}/actions/runners/{runner_id}/labels"],listOrgSecrets:["GET /orgs/{org}/actions/secrets"],listOrgVariables:["GET /orgs/{org}/actions/variables"],listRepoOrganizationSecrets:["GET /repos/{owner}/{repo}/actions/organization-secrets"],listRepoOrganizationVariables:["GET /repos/{owner}/{repo}/actions/organization-variables"],listRepoSecrets:["GET /repos/{owner}/{repo}/actions/secrets"],listRepoVariables:["GET /repos/{owner}/{repo}/actions/variables"],listRepoWorkflows:["GET /repos/{owner}/{repo}/actions/workflows"],listRunnerApplicationsForOrg:["GET /orgs/{org}/actions/runners/downloads"],listRunnerApplicationsForRepo:["GET /repos/{owner}/{repo}/actions/runners/downloads"],listSelectedReposForOrgSecret:["GET /orgs/{org}/actions/secrets/{secret_name}/repositories"],listSelectedReposForOrgVariable:["GET /orgs/{org}/actions/variables/{name}/repositories"],listSelectedRepositoriesEnabledGithubActionsOrganization:["GET /orgs/{org}/actions/permissions/repositories"],listSelfHostedRunnersForOrg:["GET /orgs/{org}/actions/runners"],listSelfHostedRunnersForRepo:["GET /repos/{owner}/{repo}/actions/runners"],listWorkflowRunArtifacts:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/artifacts"],listWorkflowRuns:["GET /repos/{owner}/{repo}/actions/workflows/{workflow_id}/runs"],listWorkflowRunsForRepo:["GET /repos/{owner}/{repo}/actions/runs"],reRunJobForWorkflowRun:["POST /repos/{owner}/{repo}/actions/jobs/{job_id}/rerun"],reRunWorkflow:["POST /repos/{owner}/{repo}/actions/runs/{run_id}/rerun"],reRunWorkflowFailedJobs:["POST /repos/{owner}/{repo}/actions/runs/{run_id}/rerun-failed-jobs"],removeAllCustomLabelsFromSelfHostedRunnerForOrg:["DELETE /orgs/{org}/actions/runners/{runner_id}/labels"],removeAllCustomLabelsFromSelfHostedRunnerForRepo:["DELETE /repos/{owner}/{repo}/actions/runners/{runner_id}/labels"],removeCustomLabelFromSelfHostedRunnerForOrg:["DELETE /orgs/{org}/actions/runners/{runner_id}/labels/{name}"],removeCustomLabelFromSelfHostedRunnerForRepo:["DELETE /repos/{owner}/{repo}/actions/runners/{runner_id}/labels/{name}"],removeSelectedRepoFromOrgSecret:["DELETE /orgs/{org}/actions/secrets/{secret_name}/repositories/{repository_id}"],removeSelectedRepoFromOrgVariable:["DELETE /orgs/{org}/actions/variables/{name}/repositories/{repository_id}"],reviewCustomGatesForRun:["POST /repos/{owner}/{repo}/actions/runs/{run_id}/deployment_protection_rule"],reviewPendingDeploymentsForRun:["POST /repos/{owner}/{repo}/actions/runs/{run_id}/pending_deployments"],setAllowedActionsOrganization:["PUT /orgs/{org}/actions/permissions/selected-actions"],setAllowedActionsRepository:["PUT /repos/{owner}/{repo}/actions/permissions/selected-actions"],setCustomLabelsForSelfHostedRunnerForOrg:["PUT /orgs/{org}/actions/runners/{runner_id}/labels"],setCustomLabelsForSelfHostedRunnerForRepo:["PUT /repos/{owner}/{repo}/actions/runners/{runner_id}/labels"],setCustomOidcSubClaimForRepo:["PUT /repos/{owner}/{repo}/actions/oidc/customization/sub"],setGithubActionsDefaultWorkflowPermissionsOrganization:["PUT /orgs/{org}/actions/permissions/workflow"],setGithubActionsDefaultWorkflowPermissionsRepository:["PUT /repos/{owner}/{repo}/actions/permissions/workflow"],setGithubActionsPermissionsOrganization:["PUT /orgs/{org}/actions/permissions"],setGithubActionsPermissionsRepository:["PUT /repos/{owner}/{repo}/actions/permissions"],setSelectedReposForOrgSecret:["PUT /orgs/{org}/actions/secrets/{secret_name}/repositories"],setSelectedReposForOrgVariable:["PUT /orgs/{org}/actions/variables/{name}/repositories"],setSelectedRepositoriesEnabledGithubActionsOrganization:["PUT /orgs/{org}/actions/permissions/repositories"],setWorkflowAccessToRepository:["PUT /repos/{owner}/{repo}/actions/permissions/access"],updateEnvironmentVariable:["PATCH /repositories/{repository_id}/environments/{environment_name}/variables/{name}"],updateOrgVariable:["PATCH /orgs/{org}/actions/variables/{name}"],updateRepoVariable:["PATCH /repos/{owner}/{repo}/actions/variables/{name}"]},activity:{checkRepoIsStarredByAuthenticatedUser:["GET /user/starred/{owner}/{repo}"],deleteRepoSubscription:["DELETE /repos/{owner}/{repo}/subscription"],deleteThreadSubscription:["DELETE /notifications/threads/{thread_id}/subscription"],getFeeds:["GET /feeds"],getRepoSubscription:["GET /repos/{owner}/{repo}/subscription"],getThread:["GET /notifications/threads/{thread_id}"],getThreadSubscriptionForAuthenticatedUser:["GET /notifications/threads/{thread_id}/subscription"],listEventsForAuthenticatedUser:["GET /users/{username}/events"],listNotificationsForAuthenticatedUser:["GET /notifications"],listOrgEventsForAuthenticatedUser:["GET /users/{username}/events/orgs/{org}"],listPublicEvents:["GET /events"],listPublicEventsForRepoNetwork:["GET /networks/{owner}/{repo}/events"],listPublicEventsForUser:["GET /users/{username}/events/public"],listPublicOrgEvents:["GET /orgs/{org}/events"],listReceivedEventsForUser:["GET /users/{username}/received_events"],listReceivedPublicEventsForUser:["GET /users/{username}/received_events/public"],listRepoEvents:["GET /repos/{owner}/{repo}/events"],listRepoNotificationsForAuthenticatedUser:["GET /repos/{owner}/{repo}/notifications"],listReposStarredByAuthenticatedUser:["GET /user/starred"],listReposStarredByUser:["GET /users/{username}/starred"],listReposWatchedByUser:["GET /users/{username}/subscriptions"],listStargazersForRepo:["GET /repos/{owner}/{repo}/stargazers"],listWatchedReposForAuthenticatedUser:["GET /user/subscriptions"],listWatchersForRepo:["GET /repos/{owner}/{repo}/subscribers"],markNotificationsAsRead:["PUT /notifications"],markRepoNotificationsAsRead:["PUT /repos/{owner}/{repo}/notifications"],markThreadAsDone:["DELETE /notifications/threads/{thread_id}"],markThreadAsRead:["PATCH /notifications/threads/{thread_id}"],setRepoSubscription:["PUT /repos/{owner}/{repo}/subscription"],setThreadSubscription:["PUT /notifications/threads/{thread_id}/subscription"],starRepoForAuthenticatedUser:["PUT /user/starred/{owner}/{repo}"],unstarRepoForAuthenticatedUser:["DELETE /user/starred/{owner}/{repo}"]},apps:{addRepoToInstallation:["PUT /user/installations/{installation_id}/repositories/{repository_id}",{},{renamed:["apps","addRepoToInstallationForAuthenticatedUser"]}],addRepoToInstallationForAuthenticatedUser:["PUT /user/installations/{installation_id}/repositories/{repository_id}"],checkToken:["POST /applications/{client_id}/token"],createFromManifest:["POST /app-manifests/{code}/conversions"],createInstallationAccessToken:["POST /app/installations/{installation_id}/access_tokens"],deleteAuthorization:["DELETE /applications/{client_id}/grant"],deleteInstallation:["DELETE /app/installations/{installation_id}"],deleteToken:["DELETE /applications/{client_id}/token"],getAuthenticated:["GET /app"],getBySlug:["GET /apps/{app_slug}"],getInstallation:["GET /app/installations/{installation_id}"],getOrgInstallation:["GET /orgs/{org}/installation"],getRepoInstallation:["GET /repos/{owner}/{repo}/installation"],getSubscriptionPlanForAccount:["GET /marketplace_listing/accounts/{account_id}"],getSubscriptionPlanForAccountStubbed:["GET /marketplace_listing/stubbed/accounts/{account_id}"],getUserInstallation:["GET /users/{username}/installation"],getWebhookConfigForApp:["GET /app/hook/config"],getWebhookDelivery:["GET /app/hook/deliveries/{delivery_id}"],listAccountsForPlan:["GET /marketplace_listing/plans/{plan_id}/accounts"],listAccountsForPlanStubbed:["GET /marketplace_listing/stubbed/plans/{plan_id}/accounts"],listInstallationReposForAuthenticatedUser:["GET /user/installations/{installation_id}/repositories"],listInstallationRequestsForAuthenticatedApp:["GET /app/installation-requests"],listInstallations:["GET /app/installations"],listInstallationsForAuthenticatedUser:["GET /user/installations"],listPlans:["GET /marketplace_listing/plans"],listPlansStubbed:["GET /marketplace_listing/stubbed/plans"],listReposAccessibleToInstallation:["GET /installation/repositories"],listSubscriptionsForAuthenticatedUser:["GET /user/marketplace_purchases"],listSubscriptionsForAuthenticatedUserStubbed:["GET /user/marketplace_purchases/stubbed"],listWebhookDeliveries:["GET /app/hook/deliveries"],redeliverWebhookDelivery:["POST /app/hook/deliveries/{delivery_id}/attempts"],removeRepoFromInstallation:["DELETE /user/installations/{installation_id}/repositories/{repository_id}",{},{renamed:["apps","removeRepoFromInstallationForAuthenticatedUser"]}],removeRepoFromInstallationForAuthenticatedUser:["DELETE /user/installations/{installation_id}/repositories/{repository_id}"],resetToken:["PATCH /applications/{client_id}/token"],revokeInstallationAccessToken:["DELETE /installation/token"],scopeToken:["POST /applications/{client_id}/token/scoped"],suspendInstallation:["PUT /app/installations/{installation_id}/suspended"],unsuspendInstallation:["DELETE /app/installations/{installation_id}/suspended"],updateWebhookConfigForApp:["PATCH /app/hook/config"]},billing:{getGithubActionsBillingOrg:["GET /orgs/{org}/settings/billing/actions"],getGithubActionsBillingUser:["GET /users/{username}/settings/billing/actions"],getGithubPackagesBillingOrg:["GET /orgs/{org}/settings/billing/packages"],getGithubPackagesBillingUser:["GET /users/{username}/settings/billing/packages"],getSharedStorageBillingOrg:["GET /orgs/{org}/settings/billing/shared-storage"],getSharedStorageBillingUser:["GET /users/{username}/settings/billing/shared-storage"]},checks:{create:["POST /repos/{owner}/{repo}/check-runs"],createSuite:["POST /repos/{owner}/{repo}/check-suites"],get:["GET /repos/{owner}/{repo}/check-runs/{check_run_id}"],getSuite:["GET /repos/{owner}/{repo}/check-suites/{check_suite_id}"],listAnnotations:["GET /repos/{owner}/{repo}/check-runs/{check_run_id}/annotations"],listForRef:["GET /repos/{owner}/{repo}/commits/{ref}/check-runs"],listForSuite:["GET /repos/{owner}/{repo}/check-suites/{check_suite_id}/check-runs"],listSuitesForRef:["GET /repos/{owner}/{repo}/commits/{ref}/check-suites"],rerequestRun:["POST /repos/{owner}/{repo}/check-runs/{check_run_id}/rerequest"],rerequestSuite:["POST /repos/{owner}/{repo}/check-suites/{check_suite_id}/rerequest"],setSuitesPreferences:["PATCH /repos/{owner}/{repo}/check-suites/preferences"],update:["PATCH /repos/{owner}/{repo}/check-runs/{check_run_id}"]},codeScanning:{deleteAnalysis:["DELETE /repos/{owner}/{repo}/code-scanning/analyses/{analysis_id}{?confirm_delete}"],getAlert:["GET /repos/{owner}/{repo}/code-scanning/alerts/{alert_number}",{},{renamedParameters:{alert_id:"alert_number"}}],getAnalysis:["GET /repos/{owner}/{repo}/code-scanning/analyses/{analysis_id}"],getCodeqlDatabase:["GET /repos/{owner}/{repo}/code-scanning/codeql/databases/{language}"],getDefaultSetup:["GET /repos/{owner}/{repo}/code-scanning/default-setup"],getSarif:["GET /repos/{owner}/{repo}/code-scanning/sarifs/{sarif_id}"],listAlertInstances:["GET /repos/{owner}/{repo}/code-scanning/alerts/{alert_number}/instances"],listAlertsForOrg:["GET /orgs/{org}/code-scanning/alerts"],listAlertsForRepo:["GET /repos/{owner}/{repo}/code-scanning/alerts"],listAlertsInstances:["GET /repos/{owner}/{repo}/code-scanning/alerts/{alert_number}/instances",{},{renamed:["codeScanning","listAlertInstances"]}],listCodeqlDatabases:["GET /repos/{owner}/{repo}/code-scanning/codeql/databases"],listRecentAnalyses:["GET /repos/{owner}/{repo}/code-scanning/analyses"],updateAlert:["PATCH /repos/{owner}/{repo}/code-scanning/alerts/{alert_number}"],updateDefaultSetup:["PATCH /repos/{owner}/{repo}/code-scanning/default-setup"],uploadSarif:["POST /repos/{owner}/{repo}/code-scanning/sarifs"]},codesOfConduct:{getAllCodesOfConduct:["GET /codes_of_conduct"],getConductCode:["GET /codes_of_conduct/{key}"]},codespaces:{addRepositoryForSecretForAuthenticatedUser:["PUT /user/codespaces/secrets/{secret_name}/repositories/{repository_id}"],addSelectedRepoToOrgSecret:["PUT /orgs/{org}/codespaces/secrets/{secret_name}/repositories/{repository_id}"],checkPermissionsForDevcontainer:["GET /repos/{owner}/{repo}/codespaces/permissions_check"],codespaceMachinesForAuthenticatedUser:["GET /user/codespaces/{codespace_name}/machines"],createForAuthenticatedUser:["POST /user/codespaces"],createOrUpdateOrgSecret:["PUT /orgs/{org}/codespaces/secrets/{secret_name}"],createOrUpdateRepoSecret:["PUT /repos/{owner}/{repo}/codespaces/secrets/{secret_name}"],createOrUpdateSecretForAuthenticatedUser:["PUT /user/codespaces/secrets/{secret_name}"],createWithPrForAuthenticatedUser:["POST /repos/{owner}/{repo}/pulls/{pull_number}/codespaces"],createWithRepoForAuthenticatedUser:["POST /repos/{owner}/{repo}/codespaces"],deleteForAuthenticatedUser:["DELETE /user/codespaces/{codespace_name}"],deleteFromOrganization:["DELETE /orgs/{org}/members/{username}/codespaces/{codespace_name}"],deleteOrgSecret:["DELETE /orgs/{org}/codespaces/secrets/{secret_name}"],deleteRepoSecret:["DELETE /repos/{owner}/{repo}/codespaces/secrets/{secret_name}"],deleteSecretForAuthenticatedUser:["DELETE /user/codespaces/secrets/{secret_name}"],exportForAuthenticatedUser:["POST /user/codespaces/{codespace_name}/exports"],getCodespacesForUserInOrg:["GET /orgs/{org}/members/{username}/codespaces"],getExportDetailsForAuthenticatedUser:["GET /user/codespaces/{codespace_name}/exports/{export_id}"],getForAuthenticatedUser:["GET /user/codespaces/{codespace_name}"],getOrgPublicKey:["GET /orgs/{org}/codespaces/secrets/public-key"],getOrgSecret:["GET /orgs/{org}/codespaces/secrets/{secret_name}"],getPublicKeyForAuthenticatedUser:["GET /user/codespaces/secrets/public-key"],getRepoPublicKey:["GET /repos/{owner}/{repo}/codespaces/secrets/public-key"],getRepoSecret:["GET /repos/{owner}/{repo}/codespaces/secrets/{secret_name}"],getSecretForAuthenticatedUser:["GET /user/codespaces/secrets/{secret_name}"],listDevcontainersInRepositoryForAuthenticatedUser:["GET /repos/{owner}/{repo}/codespaces/devcontainers"],listForAuthenticatedUser:["GET /user/codespaces"],listInOrganization:["GET /orgs/{org}/codespaces",{},{renamedParameters:{org_id:"org"}}],listInRepositoryForAuthenticatedUser:["GET /repos/{owner}/{repo}/codespaces"],listOrgSecrets:["GET /orgs/{org}/codespaces/secrets"],listRepoSecrets:["GET /repos/{owner}/{repo}/codespaces/secrets"],listRepositoriesForSecretForAuthenticatedUser:["GET /user/codespaces/secrets/{secret_name}/repositories"],listSecretsForAuthenticatedUser:["GET /user/codespaces/secrets"],listSelectedReposForOrgSecret:["GET /orgs/{org}/codespaces/secrets/{secret_name}/repositories"],preFlightWithRepoForAuthenticatedUser:["GET /repos/{owner}/{repo}/codespaces/new"],publishForAuthenticatedUser:["POST /user/codespaces/{codespace_name}/publish"],removeRepositoryForSecretForAuthenticatedUser:["DELETE /user/codespaces/secrets/{secret_name}/repositories/{repository_id}"],removeSelectedRepoFromOrgSecret:["DELETE /orgs/{org}/codespaces/secrets/{secret_name}/repositories/{repository_id}"],repoMachinesForAuthenticatedUser:["GET /repos/{owner}/{repo}/codespaces/machines"],setRepositoriesForSecretForAuthenticatedUser:["PUT /user/codespaces/secrets/{secret_name}/repositories"],setSelectedReposForOrgSecret:["PUT /orgs/{org}/codespaces/secrets/{secret_name}/repositories"],startForAuthenticatedUser:["POST /user/codespaces/{codespace_name}/start"],stopForAuthenticatedUser:["POST /user/codespaces/{codespace_name}/stop"],stopInOrganization:["POST /orgs/{org}/members/{username}/codespaces/{codespace_name}/stop"],updateForAuthenticatedUser:["PATCH /user/codespaces/{codespace_name}"]},copilot:{addCopilotSeatsForTeams:["POST /orgs/{org}/copilot/billing/selected_teams"],addCopilotSeatsForUsers:["POST /orgs/{org}/copilot/billing/selected_users"],cancelCopilotSeatAssignmentForTeams:["DELETE /orgs/{org}/copilot/billing/selected_teams"],cancelCopilotSeatAssignmentForUsers:["DELETE /orgs/{org}/copilot/billing/selected_users"],getCopilotOrganizationDetails:["GET /orgs/{org}/copilot/billing"],getCopilotSeatDetailsForUser:["GET /orgs/{org}/members/{username}/copilot"],listCopilotSeats:["GET /orgs/{org}/copilot/billing/seats"]},dependabot:{addSelectedRepoToOrgSecret:["PUT /orgs/{org}/dependabot/secrets/{secret_name}/repositories/{repository_id}"],createOrUpdateOrgSecret:["PUT /orgs/{org}/dependabot/secrets/{secret_name}"],createOrUpdateRepoSecret:["PUT /repos/{owner}/{repo}/dependabot/secrets/{secret_name}"],deleteOrgSecret:["DELETE /orgs/{org}/dependabot/secrets/{secret_name}"],deleteRepoSecret:["DELETE /repos/{owner}/{repo}/dependabot/secrets/{secret_name}"],getAlert:["GET /repos/{owner}/{repo}/dependabot/alerts/{alert_number}"],getOrgPublicKey:["GET /orgs/{org}/dependabot/secrets/public-key"],getOrgSecret:["GET /orgs/{org}/dependabot/secrets/{secret_name}"],getRepoPublicKey:["GET /repos/{owner}/{repo}/dependabot/secrets/public-key"],getRepoSecret:["GET /repos/{owner}/{repo}/dependabot/secrets/{secret_name}"],listAlertsForEnterprise:["GET /enterprises/{enterprise}/dependabot/alerts"],listAlertsForOrg:["GET /orgs/{org}/dependabot/alerts"],listAlertsForRepo:["GET /repos/{owner}/{repo}/dependabot/alerts"],listOrgSecrets:["GET /orgs/{org}/dependabot/secrets"],listRepoSecrets:["GET /repos/{owner}/{repo}/dependabot/secrets"],listSelectedReposForOrgSecret:["GET /orgs/{org}/dependabot/secrets/{secret_name}/repositories"],removeSelectedRepoFromOrgSecret:["DELETE /orgs/{org}/dependabot/secrets/{secret_name}/repositories/{repository_id}"],setSelectedReposForOrgSecret:["PUT /orgs/{org}/dependabot/secrets/{secret_name}/repositories"],updateAlert:["PATCH /repos/{owner}/{repo}/dependabot/alerts/{alert_number}"]},dependencyGraph:{createRepositorySnapshot:["POST /repos/{owner}/{repo}/dependency-graph/snapshots"],diffRange:["GET /repos/{owner}/{repo}/dependency-graph/compare/{basehead}"],exportSbom:["GET /repos/{owner}/{repo}/dependency-graph/sbom"]},emojis:{get:["GET /emojis"]},gists:{checkIsStarred:["GET /gists/{gist_id}/star"],create:["POST /gists"],createComment:["POST /gists/{gist_id}/comments"],delete:["DELETE /gists/{gist_id}"],deleteComment:["DELETE /gists/{gist_id}/comments/{comment_id}"],fork:["POST /gists/{gist_id}/forks"],get:["GET /gists/{gist_id}"],getComment:["GET /gists/{gist_id}/comments/{comment_id}"],getRevision:["GET /gists/{gist_id}/{sha}"],list:["GET /gists"],listComments:["GET /gists/{gist_id}/comments"],listCommits:["GET /gists/{gist_id}/commits"],listForUser:["GET /users/{username}/gists"],listForks:["GET /gists/{gist_id}/forks"],listPublic:["GET /gists/public"],listStarred:["GET /gists/starred"],star:["PUT /gists/{gist_id}/star"],unstar:["DELETE /gists/{gist_id}/star"],update:["PATCH /gists/{gist_id}"],updateComment:["PATCH /gists/{gist_id}/comments/{comment_id}"]},git:{createBlob:["POST /repos/{owner}/{repo}/git/blobs"],createCommit:["POST /repos/{owner}/{repo}/git/commits"],createRef:["POST /repos/{owner}/{repo}/git/refs"],createTag:["POST /repos/{owner}/{repo}/git/tags"],createTree:["POST /repos/{owner}/{repo}/git/trees"],deleteRef:["DELETE /repos/{owner}/{repo}/git/refs/{ref}"],getBlob:["GET /repos/{owner}/{repo}/git/blobs/{file_sha}"],getCommit:["GET /repos/{owner}/{repo}/git/commits/{commit_sha}"],getRef:["GET /repos/{owner}/{repo}/git/ref/{ref}"],getTag:["GET /repos/{owner}/{repo}/git/tags/{tag_sha}"],getTree:["GET /repos/{owner}/{repo}/git/trees/{tree_sha}"],listMatchingRefs:["GET /repos/{owner}/{repo}/git/matching-refs/{ref}"],updateRef:["PATCH /repos/{owner}/{repo}/git/refs/{ref}"]},gitignore:{getAllTemplates:["GET /gitignore/templates"],getTemplate:["GET /gitignore/templates/{name}"]},interactions:{getRestrictionsForAuthenticatedUser:["GET /user/interaction-limits"],getRestrictionsForOrg:["GET /orgs/{org}/interaction-limits"],getRestrictionsForRepo:["GET /repos/{owner}/{repo}/interaction-limits"],getRestrictionsForYourPublicRepos:["GET /user/interaction-limits",{},{renamed:["interactions","getRestrictionsForAuthenticatedUser"]}],removeRestrictionsForAuthenticatedUser:["DELETE /user/interaction-limits"],removeRestrictionsForOrg:["DELETE /orgs/{org}/interaction-limits"],removeRestrictionsForRepo:["DELETE /repos/{owner}/{repo}/interaction-limits"],removeRestrictionsForYourPublicRepos:["DELETE /user/interaction-limits",{},{renamed:["interactions","removeRestrictionsForAuthenticatedUser"]}],setRestrictionsForAuthenticatedUser:["PUT /user/interaction-limits"],setRestrictionsForOrg:["PUT /orgs/{org}/interaction-limits"],setRestrictionsForRepo:["PUT /repos/{owner}/{repo}/interaction-limits"],setRestrictionsForYourPublicRepos:["PUT /user/interaction-limits",{},{renamed:["interactions","setRestrictionsForAuthenticatedUser"]}]},issues:{addAssignees:["POST /repos/{owner}/{repo}/issues/{issue_number}/assignees"],addLabels:["POST /repos/{owner}/{repo}/issues/{issue_number}/labels"],checkUserCanBeAssigned:["GET /repos/{owner}/{repo}/assignees/{assignee}"],checkUserCanBeAssignedToIssue:["GET /repos/{owner}/{repo}/issues/{issue_number}/assignees/{assignee}"],create:["POST /repos/{owner}/{repo}/issues"],createComment:["POST /repos/{owner}/{repo}/issues/{issue_number}/comments"],createLabel:["POST /repos/{owner}/{repo}/labels"],createMilestone:["POST /repos/{owner}/{repo}/milestones"],deleteComment:["DELETE /repos/{owner}/{repo}/issues/comments/{comment_id}"],deleteLabel:["DELETE /repos/{owner}/{repo}/labels/{name}"],deleteMilestone:["DELETE /repos/{owner}/{repo}/milestones/{milestone_number}"],get:["GET /repos/{owner}/{repo}/issues/{issue_number}"],getComment:["GET /repos/{owner}/{repo}/issues/comments/{comment_id}"],getEvent:["GET /repos/{owner}/{repo}/issues/events/{event_id}"],getLabel:["GET /repos/{owner}/{repo}/labels/{name}"],getMilestone:["GET /repos/{owner}/{repo}/milestones/{milestone_number}"],list:["GET /issues"],listAssignees:["GET /repos/{owner}/{repo}/assignees"],listComments:["GET /repos/{owner}/{repo}/issues/{issue_number}/comments"],listCommentsForRepo:["GET /repos/{owner}/{repo}/issues/comments"],listEvents:["GET /repos/{owner}/{repo}/issues/{issue_number}/events"],listEventsForRepo:["GET /repos/{owner}/{repo}/issues/events"],listEventsForTimeline:["GET /repos/{owner}/{repo}/issues/{issue_number}/timeline"],listForAuthenticatedUser:["GET /user/issues"],listForOrg:["GET /orgs/{org}/issues"],listForRepo:["GET /repos/{owner}/{repo}/issues"],listLabelsForMilestone:["GET /repos/{owner}/{repo}/milestones/{milestone_number}/labels"],listLabelsForRepo:["GET /repos/{owner}/{repo}/labels"],listLabelsOnIssue:["GET /repos/{owner}/{repo}/issues/{issue_number}/labels"],listMilestones:["GET /repos/{owner}/{repo}/milestones"],lock:["PUT /repos/{owner}/{repo}/issues/{issue_number}/lock"],removeAllLabels:["DELETE /repos/{owner}/{repo}/issues/{issue_number}/labels"],removeAssignees:["DELETE /repos/{owner}/{repo}/issues/{issue_number}/assignees"],removeLabel:["DELETE /repos/{owner}/{repo}/issues/{issue_number}/labels/{name}"],setLabels:["PUT /repos/{owner}/{repo}/issues/{issue_number}/labels"],unlock:["DELETE /repos/{owner}/{repo}/issues/{issue_number}/lock"],update:["PATCH /repos/{owner}/{repo}/issues/{issue_number}"],updateComment:["PATCH /repos/{owner}/{repo}/issues/comments/{comment_id}"],updateLabel:["PATCH /repos/{owner}/{repo}/labels/{name}"],updateMilestone:["PATCH /repos/{owner}/{repo}/milestones/{milestone_number}"]},licenses:{get:["GET /licenses/{license}"],getAllCommonlyUsed:["GET /licenses"],getForRepo:["GET /repos/{owner}/{repo}/license"]},markdown:{render:["POST /markdown"],renderRaw:["POST /markdown/raw",{headers:{"content-type":"text/plain; charset=utf-8"}}]},meta:{get:["GET /meta"],getAllVersions:["GET /versions"],getOctocat:["GET /octocat"],getZen:["GET /zen"],root:["GET /"]},migrations:{cancelImport:["DELETE /repos/{owner}/{repo}/import",{},{deprecated:"octokit.rest.migrations.cancelImport() is deprecated, see https://docs.github.com/rest/migrations/source-imports#cancel-an-import"}],deleteArchiveForAuthenticatedUser:["DELETE /user/migrations/{migration_id}/archive"],deleteArchiveForOrg:["DELETE /orgs/{org}/migrations/{migration_id}/archive"],downloadArchiveForOrg:["GET /orgs/{org}/migrations/{migration_id}/archive"],getArchiveForAuthenticatedUser:["GET /user/migrations/{migration_id}/archive"],getCommitAuthors:["GET /repos/{owner}/{repo}/import/authors",{},{deprecated:"octokit.rest.migrations.getCommitAuthors() is deprecated, see https://docs.github.com/rest/migrations/source-imports#get-commit-authors"}],getImportStatus:["GET /repos/{owner}/{repo}/import",{},{deprecated:"octokit.rest.migrations.getImportStatus() is deprecated, see https://docs.github.com/rest/migrations/source-imports#get-an-import-status"}],getLargeFiles:["GET /repos/{owner}/{repo}/import/large_files",{},{deprecated:"octokit.rest.migrations.getLargeFiles() is deprecated, see https://docs.github.com/rest/migrations/source-imports#get-large-files"}],getStatusForAuthenticatedUser:["GET /user/migrations/{migration_id}"],getStatusForOrg:["GET /orgs/{org}/migrations/{migration_id}"],listForAuthenticatedUser:["GET /user/migrations"],listForOrg:["GET /orgs/{org}/migrations"],listReposForAuthenticatedUser:["GET /user/migrations/{migration_id}/repositories"],listReposForOrg:["GET /orgs/{org}/migrations/{migration_id}/repositories"],listReposForUser:["GET /user/migrations/{migration_id}/repositories",{},{renamed:["migrations","listReposForAuthenticatedUser"]}],mapCommitAuthor:["PATCH /repos/{owner}/{repo}/import/authors/{author_id}",{},{deprecated:"octokit.rest.migrations.mapCommitAuthor() is deprecated, see https://docs.github.com/rest/migrations/source-imports#map-a-commit-author"}],setLfsPreference:["PATCH /repos/{owner}/{repo}/import/lfs",{},{deprecated:"octokit.rest.migrations.setLfsPreference() is deprecated, see https://docs.github.com/rest/migrations/source-imports#update-git-lfs-preference"}],startForAuthenticatedUser:["POST /user/migrations"],startForOrg:["POST /orgs/{org}/migrations"],startImport:["PUT /repos/{owner}/{repo}/import",{},{deprecated:"octokit.rest.migrations.startImport() is deprecated, see https://docs.github.com/rest/migrations/source-imports#start-an-import"}],unlockRepoForAuthenticatedUser:["DELETE /user/migrations/{migration_id}/repos/{repo_name}/lock"],unlockRepoForOrg:["DELETE /orgs/{org}/migrations/{migration_id}/repos/{repo_name}/lock"],updateImport:["PATCH /repos/{owner}/{repo}/import",{},{deprecated:"octokit.rest.migrations.updateImport() is deprecated, see https://docs.github.com/rest/migrations/source-imports#update-an-import"}]},oidc:{getOidcCustomSubTemplateForOrg:["GET /orgs/{org}/actions/oidc/customization/sub"],updateOidcCustomSubTemplateForOrg:["PUT /orgs/{org}/actions/oidc/customization/sub"]},orgs:{addSecurityManagerTeam:["PUT /orgs/{org}/security-managers/teams/{team_slug}"],assignTeamToOrgRole:["PUT /orgs/{org}/organization-roles/teams/{team_slug}/{role_id}"],assignUserToOrgRole:["PUT /orgs/{org}/organization-roles/users/{username}/{role_id}"],blockUser:["PUT /orgs/{org}/blocks/{username}"],cancelInvitation:["DELETE /orgs/{org}/invitations/{invitation_id}"],checkBlockedUser:["GET /orgs/{org}/blocks/{username}"],checkMembershipForUser:["GET /orgs/{org}/members/{username}"],checkPublicMembershipForUser:["GET /orgs/{org}/public_members/{username}"],convertMemberToOutsideCollaborator:["PUT /orgs/{org}/outside_collaborators/{username}"],createCustomOrganizationRole:["POST /orgs/{org}/organization-roles"],createInvitation:["POST /orgs/{org}/invitations"],createOrUpdateCustomProperties:["PATCH /orgs/{org}/properties/schema"],createOrUpdateCustomPropertiesValuesForRepos:["PATCH /orgs/{org}/properties/values"],createOrUpdateCustomProperty:["PUT /orgs/{org}/properties/schema/{custom_property_name}"],createWebhook:["POST /orgs/{org}/hooks"],delete:["DELETE /orgs/{org}"],deleteCustomOrganizationRole:["DELETE /orgs/{org}/organization-roles/{role_id}"],deleteWebhook:["DELETE /orgs/{org}/hooks/{hook_id}"],enableOrDisableSecurityProductOnAllOrgRepos:["POST /orgs/{org}/{security_product}/{enablement}"],get:["GET /orgs/{org}"],getAllCustomProperties:["GET /orgs/{org}/properties/schema"],getCustomProperty:["GET /orgs/{org}/properties/schema/{custom_property_name}"],getMembershipForAuthenticatedUser:["GET /user/memberships/orgs/{org}"],getMembershipForUser:["GET /orgs/{org}/memberships/{username}"],getOrgRole:["GET /orgs/{org}/organization-roles/{role_id}"],getWebhook:["GET /orgs/{org}/hooks/{hook_id}"],getWebhookConfigForOrg:["GET /orgs/{org}/hooks/{hook_id}/config"],getWebhookDelivery:["GET /orgs/{org}/hooks/{hook_id}/deliveries/{delivery_id}"],list:["GET /organizations"],listAppInstallations:["GET /orgs/{org}/installations"],listBlockedUsers:["GET /orgs/{org}/blocks"],listCustomPropertiesValuesForRepos:["GET /orgs/{org}/properties/values"],listFailedInvitations:["GET /orgs/{org}/failed_invitations"],listForAuthenticatedUser:["GET /user/orgs"],listForUser:["GET /users/{username}/orgs"],listInvitationTeams:["GET /orgs/{org}/invitations/{invitation_id}/teams"],listMembers:["GET /orgs/{org}/members"],listMembershipsForAuthenticatedUser:["GET /user/memberships/orgs"],listOrgRoleTeams:["GET /orgs/{org}/organization-roles/{role_id}/teams"],listOrgRoleUsers:["GET /orgs/{org}/organization-roles/{role_id}/users"],listOrgRoles:["GET /orgs/{org}/organization-roles"],listOrganizationFineGrainedPermissions:["GET /orgs/{org}/organization-fine-grained-permissions"],listOutsideCollaborators:["GET /orgs/{org}/outside_collaborators"],listPatGrantRepositories:["GET /orgs/{org}/personal-access-tokens/{pat_id}/repositories"],listPatGrantRequestRepositories:["GET /orgs/{org}/personal-access-token-requests/{pat_request_id}/repositories"],listPatGrantRequests:["GET /orgs/{org}/personal-access-token-requests"],listPatGrants:["GET /orgs/{org}/personal-access-tokens"],listPendingInvitations:["GET /orgs/{org}/invitations"],listPublicMembers:["GET /orgs/{org}/public_members"],listSecurityManagerTeams:["GET /orgs/{org}/security-managers"],listWebhookDeliveries:["GET /orgs/{org}/hooks/{hook_id}/deliveries"],listWebhooks:["GET /orgs/{org}/hooks"],patchCustomOrganizationRole:["PATCH /orgs/{org}/organization-roles/{role_id}"],pingWebhook:["POST /orgs/{org}/hooks/{hook_id}/pings"],redeliverWebhookDelivery:["POST /orgs/{org}/hooks/{hook_id}/deliveries/{delivery_id}/attempts"],removeCustomProperty:["DELETE /orgs/{org}/properties/schema/{custom_property_name}"],removeMember:["DELETE /orgs/{org}/members/{username}"],removeMembershipForUser:["DELETE /orgs/{org}/memberships/{username}"],removeOutsideCollaborator:["DELETE /orgs/{org}/outside_collaborators/{username}"],removePublicMembershipForAuthenticatedUser:["DELETE /orgs/{org}/public_members/{username}"],removeSecurityManagerTeam:["DELETE /orgs/{org}/security-managers/teams/{team_slug}"],reviewPatGrantRequest:["POST /orgs/{org}/personal-access-token-requests/{pat_request_id}"],reviewPatGrantRequestsInBulk:["POST /orgs/{org}/personal-access-token-requests"],revokeAllOrgRolesTeam:["DELETE /orgs/{org}/organization-roles/teams/{team_slug}"],revokeAllOrgRolesUser:["DELETE /orgs/{org}/organization-roles/users/{username}"],revokeOrgRoleTeam:["DELETE /orgs/{org}/organization-roles/teams/{team_slug}/{role_id}"],revokeOrgRoleUser:["DELETE /orgs/{org}/organization-roles/users/{username}/{role_id}"],setMembershipForUser:["PUT /orgs/{org}/memberships/{username}"],setPublicMembershipForAuthenticatedUser:["PUT /orgs/{org}/public_members/{username}"],unblockUser:["DELETE /orgs/{org}/blocks/{username}"],update:["PATCH /orgs/{org}"],updateMembershipForAuthenticatedUser:["PATCH /user/memberships/orgs/{org}"],updatePatAccess:["POST /orgs/{org}/personal-access-tokens/{pat_id}"],updatePatAccesses:["POST /orgs/{org}/personal-access-tokens"],updateWebhook:["PATCH /orgs/{org}/hooks/{hook_id}"],updateWebhookConfigForOrg:["PATCH /orgs/{org}/hooks/{hook_id}/config"]},packages:{deletePackageForAuthenticatedUser:["DELETE /user/packages/{package_type}/{package_name}"],deletePackageForOrg:["DELETE /orgs/{org}/packages/{package_type}/{package_name}"],deletePackageForUser:["DELETE /users/{username}/packages/{package_type}/{package_name}"],deletePackageVersionForAuthenticatedUser:["DELETE /user/packages/{package_type}/{package_name}/versions/{package_version_id}"],deletePackageVersionForOrg:["DELETE /orgs/{org}/packages/{package_type}/{package_name}/versions/{package_version_id}"],deletePackageVersionForUser:["DELETE /users/{username}/packages/{package_type}/{package_name}/versions/{package_version_id}"],getAllPackageVersionsForAPackageOwnedByAnOrg:["GET /orgs/{org}/packages/{package_type}/{package_name}/versions",{},{renamed:["packages","getAllPackageVersionsForPackageOwnedByOrg"]}],getAllPackageVersionsForAPackageOwnedByTheAuthenticatedUser:["GET /user/packages/{package_type}/{package_name}/versions",{},{renamed:["packages","getAllPackageVersionsForPackageOwnedByAuthenticatedUser"]}],getAllPackageVersionsForPackageOwnedByAuthenticatedUser:["GET /user/packages/{package_type}/{package_name}/versions"],getAllPackageVersionsForPackageOwnedByOrg:["GET /orgs/{org}/packages/{package_type}/{package_name}/versions"],getAllPackageVersionsForPackageOwnedByUser:["GET /users/{username}/packages/{package_type}/{package_name}/versions"],getPackageForAuthenticatedUser:["GET /user/packages/{package_type}/{package_name}"],getPackageForOrganization:["GET /orgs/{org}/packages/{package_type}/{package_name}"],getPackageForUser:["GET /users/{username}/packages/{package_type}/{package_name}"],getPackageVersionForAuthenticatedUser:["GET /user/packages/{package_type}/{package_name}/versions/{package_version_id}"],getPackageVersionForOrganization:["GET /orgs/{org}/packages/{package_type}/{package_name}/versions/{package_version_id}"],getPackageVersionForUser:["GET /users/{username}/packages/{package_type}/{package_name}/versions/{package_version_id}"],listDockerMigrationConflictingPackagesForAuthenticatedUser:["GET /user/docker/conflicts"],listDockerMigrationConflictingPackagesForOrganization:["GET /orgs/{org}/docker/conflicts"],listDockerMigrationConflictingPackagesForUser:["GET /users/{username}/docker/conflicts"],listPackagesForAuthenticatedUser:["GET /user/packages"],listPackagesForOrganization:["GET /orgs/{org}/packages"],listPackagesForUser:["GET /users/{username}/packages"],restorePackageForAuthenticatedUser:["POST /user/packages/{package_type}/{package_name}/restore{?token}"],restorePackageForOrg:["POST /orgs/{org}/packages/{package_type}/{package_name}/restore{?token}"],restorePackageForUser:["POST /users/{username}/packages/{package_type}/{package_name}/restore{?token}"],restorePackageVersionForAuthenticatedUser:["POST /user/packages/{package_type}/{package_name}/versions/{package_version_id}/restore"],restorePackageVersionForOrg:["POST /orgs/{org}/packages/{package_type}/{package_name}/versions/{package_version_id}/restore"],restorePackageVersionForUser:["POST /users/{username}/packages/{package_type}/{package_name}/versions/{package_version_id}/restore"]},projects:{addCollaborator:["PUT /projects/{project_id}/collaborators/{username}"],createCard:["POST /projects/columns/{column_id}/cards"],createColumn:["POST /projects/{project_id}/columns"],createForAuthenticatedUser:["POST /user/projects"],createForOrg:["POST /orgs/{org}/projects"],createForRepo:["POST /repos/{owner}/{repo}/projects"],delete:["DELETE /projects/{project_id}"],deleteCard:["DELETE /projects/columns/cards/{card_id}"],deleteColumn:["DELETE /projects/columns/{column_id}"],get:["GET /projects/{project_id}"],getCard:["GET /projects/columns/cards/{card_id}"],getColumn:["GET /projects/columns/{column_id}"],getPermissionForUser:["GET /projects/{project_id}/collaborators/{username}/permission"],listCards:["GET /projects/columns/{column_id}/cards"],listCollaborators:["GET /projects/{project_id}/collaborators"],listColumns:["GET /projects/{project_id}/columns"],listForOrg:["GET /orgs/{org}/projects"],listForRepo:["GET /repos/{owner}/{repo}/projects"],listForUser:["GET /users/{username}/projects"],moveCard:["POST /projects/columns/cards/{card_id}/moves"],moveColumn:["POST /projects/columns/{column_id}/moves"],removeCollaborator:["DELETE /projects/{project_id}/collaborators/{username}"],update:["PATCH /projects/{project_id}"],updateCard:["PATCH /projects/columns/cards/{card_id}"],updateColumn:["PATCH /projects/columns/{column_id}"]},pulls:{checkIfMerged:["GET /repos/{owner}/{repo}/pulls/{pull_number}/merge"],create:["POST /repos/{owner}/{repo}/pulls"],createReplyForReviewComment:["POST /repos/{owner}/{repo}/pulls/{pull_number}/comments/{comment_id}/replies"],createReview:["POST /repos/{owner}/{repo}/pulls/{pull_number}/reviews"],createReviewComment:["POST /repos/{owner}/{repo}/pulls/{pull_number}/comments"],deletePendingReview:["DELETE /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}"],deleteReviewComment:["DELETE /repos/{owner}/{repo}/pulls/comments/{comment_id}"],dismissReview:["PUT /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}/dismissals"],get:["GET /repos/{owner}/{repo}/pulls/{pull_number}"],getReview:["GET /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}"],getReviewComment:["GET /repos/{owner}/{repo}/pulls/comments/{comment_id}"],list:["GET /repos/{owner}/{repo}/pulls"],listCommentsForReview:["GET /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}/comments"],listCommits:["GET /repos/{owner}/{repo}/pulls/{pull_number}/commits"],listFiles:["GET /repos/{owner}/{repo}/pulls/{pull_number}/files"],listRequestedReviewers:["GET /repos/{owner}/{repo}/pulls/{pull_number}/requested_reviewers"],listReviewComments:["GET /repos/{owner}/{repo}/pulls/{pull_number}/comments"],listReviewCommentsForRepo:["GET /repos/{owner}/{repo}/pulls/comments"],listReviews:["GET /repos/{owner}/{repo}/pulls/{pull_number}/reviews"],merge:["PUT /repos/{owner}/{repo}/pulls/{pull_number}/merge"],removeRequestedReviewers:["DELETE /repos/{owner}/{repo}/pulls/{pull_number}/requested_reviewers"],requestReviewers:["POST /repos/{owner}/{repo}/pulls/{pull_number}/requested_reviewers"],submitReview:["POST /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}/events"],update:["PATCH /repos/{owner}/{repo}/pulls/{pull_number}"],updateBranch:["PUT /repos/{owner}/{repo}/pulls/{pull_number}/update-branch"],updateReview:["PUT /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}"],updateReviewComment:["PATCH /repos/{owner}/{repo}/pulls/comments/{comment_id}"]},rateLimit:{get:["GET /rate_limit"]},reactions:{createForCommitComment:["POST /repos/{owner}/{repo}/comments/{comment_id}/reactions"],createForIssue:["POST /repos/{owner}/{repo}/issues/{issue_number}/reactions"],createForIssueComment:["POST /repos/{owner}/{repo}/issues/comments/{comment_id}/reactions"],createForPullRequestReviewComment:["POST /repos/{owner}/{repo}/pulls/comments/{comment_id}/reactions"],createForRelease:["POST /repos/{owner}/{repo}/releases/{release_id}/reactions"],createForTeamDiscussionCommentInOrg:["POST /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}/reactions"],createForTeamDiscussionInOrg:["POST /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/reactions"],deleteForCommitComment:["DELETE /repos/{owner}/{repo}/comments/{comment_id}/reactions/{reaction_id}"],deleteForIssue:["DELETE /repos/{owner}/{repo}/issues/{issue_number}/reactions/{reaction_id}"],deleteForIssueComment:["DELETE /repos/{owner}/{repo}/issues/comments/{comment_id}/reactions/{reaction_id}"],deleteForPullRequestComment:["DELETE /repos/{owner}/{repo}/pulls/comments/{comment_id}/reactions/{reaction_id}"],deleteForRelease:["DELETE /repos/{owner}/{repo}/releases/{release_id}/reactions/{reaction_id}"],deleteForTeamDiscussion:["DELETE /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/reactions/{reaction_id}"],deleteForTeamDiscussionComment:["DELETE /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}/reactions/{reaction_id}"],listForCommitComment:["GET /repos/{owner}/{repo}/comments/{comment_id}/reactions"],listForIssue:["GET /repos/{owner}/{repo}/issues/{issue_number}/reactions"],listForIssueComment:["GET /repos/{owner}/{repo}/issues/comments/{comment_id}/reactions"],listForPullRequestReviewComment:["GET /repos/{owner}/{repo}/pulls/comments/{comment_id}/reactions"],listForRelease:["GET /repos/{owner}/{repo}/releases/{release_id}/reactions"],listForTeamDiscussionCommentInOrg:["GET /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}/reactions"],listForTeamDiscussionInOrg:["GET /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/reactions"]},repos:{acceptInvitation:["PATCH /user/repository_invitations/{invitation_id}",{},{renamed:["repos","acceptInvitationForAuthenticatedUser"]}],acceptInvitationForAuthenticatedUser:["PATCH /user/repository_invitations/{invitation_id}"],addAppAccessRestrictions:["POST /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/apps",{},{mapToData:"apps"}],addCollaborator:["PUT /repos/{owner}/{repo}/collaborators/{username}"],addStatusCheckContexts:["POST /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks/contexts",{},{mapToData:"contexts"}],addTeamAccessRestrictions:["POST /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/teams",{},{mapToData:"teams"}],addUserAccessRestrictions:["POST /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/users",{},{mapToData:"users"}],cancelPagesDeployment:["POST /repos/{owner}/{repo}/pages/deployments/{pages_deployment_id}/cancel"],checkAutomatedSecurityFixes:["GET /repos/{owner}/{repo}/automated-security-fixes"],checkCollaborator:["GET /repos/{owner}/{repo}/collaborators/{username}"],checkVulnerabilityAlerts:["GET /repos/{owner}/{repo}/vulnerability-alerts"],codeownersErrors:["GET /repos/{owner}/{repo}/codeowners/errors"],compareCommits:["GET /repos/{owner}/{repo}/compare/{base}...{head}"],compareCommitsWithBasehead:["GET /repos/{owner}/{repo}/compare/{basehead}"],createAutolink:["POST /repos/{owner}/{repo}/autolinks"],createCommitComment:["POST /repos/{owner}/{repo}/commits/{commit_sha}/comments"],createCommitSignatureProtection:["POST /repos/{owner}/{repo}/branches/{branch}/protection/required_signatures"],createCommitStatus:["POST /repos/{owner}/{repo}/statuses/{sha}"],createDeployKey:["POST /repos/{owner}/{repo}/keys"],createDeployment:["POST /repos/{owner}/{repo}/deployments"],createDeploymentBranchPolicy:["POST /repos/{owner}/{repo}/environments/{environment_name}/deployment-branch-policies"],createDeploymentProtectionRule:["POST /repos/{owner}/{repo}/environments/{environment_name}/deployment_protection_rules"],createDeploymentStatus:["POST /repos/{owner}/{repo}/deployments/{deployment_id}/statuses"],createDispatchEvent:["POST /repos/{owner}/{repo}/dispatches"],createForAuthenticatedUser:["POST /user/repos"],createFork:["POST /repos/{owner}/{repo}/forks"],createInOrg:["POST /orgs/{org}/repos"],createOrUpdateCustomPropertiesValues:["PATCH /repos/{owner}/{repo}/properties/values"],createOrUpdateEnvironment:["PUT /repos/{owner}/{repo}/environments/{environment_name}"],createOrUpdateFileContents:["PUT /repos/{owner}/{repo}/contents/{path}"],createOrgRuleset:["POST /orgs/{org}/rulesets"],createPagesDeployment:["POST /repos/{owner}/{repo}/pages/deployments"],createPagesSite:["POST /repos/{owner}/{repo}/pages"],createRelease:["POST /repos/{owner}/{repo}/releases"],createRepoRuleset:["POST /repos/{owner}/{repo}/rulesets"],createTagProtection:["POST /repos/{owner}/{repo}/tags/protection"],createUsingTemplate:["POST /repos/{template_owner}/{template_repo}/generate"],createWebhook:["POST /repos/{owner}/{repo}/hooks"],declineInvitation:["DELETE /user/repository_invitations/{invitation_id}",{},{renamed:["repos","declineInvitationForAuthenticatedUser"]}],declineInvitationForAuthenticatedUser:["DELETE /user/repository_invitations/{invitation_id}"],delete:["DELETE /repos/{owner}/{repo}"],deleteAccessRestrictions:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/restrictions"],deleteAdminBranchProtection:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/enforce_admins"],deleteAnEnvironment:["DELETE /repos/{owner}/{repo}/environments/{environment_name}"],deleteAutolink:["DELETE /repos/{owner}/{repo}/autolinks/{autolink_id}"],deleteBranchProtection:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection"],deleteCommitComment:["DELETE /repos/{owner}/{repo}/comments/{comment_id}"],deleteCommitSignatureProtection:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/required_signatures"],deleteDeployKey:["DELETE /repos/{owner}/{repo}/keys/{key_id}"],deleteDeployment:["DELETE /repos/{owner}/{repo}/deployments/{deployment_id}"],deleteDeploymentBranchPolicy:["DELETE /repos/{owner}/{repo}/environments/{environment_name}/deployment-branch-policies/{branch_policy_id}"],deleteFile:["DELETE /repos/{owner}/{repo}/contents/{path}"],deleteInvitation:["DELETE /repos/{owner}/{repo}/invitations/{invitation_id}"],deleteOrgRuleset:["DELETE /orgs/{org}/rulesets/{ruleset_id}"],deletePagesSite:["DELETE /repos/{owner}/{repo}/pages"],deletePullRequestReviewProtection:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/required_pull_request_reviews"],deleteRelease:["DELETE /repos/{owner}/{repo}/releases/{release_id}"],deleteReleaseAsset:["DELETE /repos/{owner}/{repo}/releases/assets/{asset_id}"],deleteRepoRuleset:["DELETE /repos/{owner}/{repo}/rulesets/{ruleset_id}"],deleteTagProtection:["DELETE /repos/{owner}/{repo}/tags/protection/{tag_protection_id}"],deleteWebhook:["DELETE /repos/{owner}/{repo}/hooks/{hook_id}"],disableAutomatedSecurityFixes:["DELETE /repos/{owner}/{repo}/automated-security-fixes"],disableDeploymentProtectionRule:["DELETE /repos/{owner}/{repo}/environments/{environment_name}/deployment_protection_rules/{protection_rule_id}"],disablePrivateVulnerabilityReporting:["DELETE /repos/{owner}/{repo}/private-vulnerability-reporting"],disableVulnerabilityAlerts:["DELETE /repos/{owner}/{repo}/vulnerability-alerts"],downloadArchive:["GET /repos/{owner}/{repo}/zipball/{ref}",{},{renamed:["repos","downloadZipballArchive"]}],downloadTarballArchive:["GET /repos/{owner}/{repo}/tarball/{ref}"],downloadZipballArchive:["GET /repos/{owner}/{repo}/zipball/{ref}"],enableAutomatedSecurityFixes:["PUT /repos/{owner}/{repo}/automated-security-fixes"],enablePrivateVulnerabilityReporting:["PUT /repos/{owner}/{repo}/private-vulnerability-reporting"],enableVulnerabilityAlerts:["PUT /repos/{owner}/{repo}/vulnerability-alerts"],generateReleaseNotes:["POST /repos/{owner}/{repo}/releases/generate-notes"],get:["GET /repos/{owner}/{repo}"],getAccessRestrictions:["GET /repos/{owner}/{repo}/branches/{branch}/protection/restrictions"],getAdminBranchProtection:["GET /repos/{owner}/{repo}/branches/{branch}/protection/enforce_admins"],getAllDeploymentProtectionRules:["GET /repos/{owner}/{repo}/environments/{environment_name}/deployment_protection_rules"],getAllEnvironments:["GET /repos/{owner}/{repo}/environments"],getAllStatusCheckContexts:["GET /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks/contexts"],getAllTopics:["GET /repos/{owner}/{repo}/topics"],getAppsWithAccessToProtectedBranch:["GET /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/apps"],getAutolink:["GET /repos/{owner}/{repo}/autolinks/{autolink_id}"],getBranch:["GET /repos/{owner}/{repo}/branches/{branch}"],getBranchProtection:["GET /repos/{owner}/{repo}/branches/{branch}/protection"],getBranchRules:["GET /repos/{owner}/{repo}/rules/branches/{branch}"],getClones:["GET /repos/{owner}/{repo}/traffic/clones"],getCodeFrequencyStats:["GET /repos/{owner}/{repo}/stats/code_frequency"],getCollaboratorPermissionLevel:["GET /repos/{owner}/{repo}/collaborators/{username}/permission"],getCombinedStatusForRef:["GET /repos/{owner}/{repo}/commits/{ref}/status"],getCommit:["GET /repos/{owner}/{repo}/commits/{ref}"],getCommitActivityStats:["GET /repos/{owner}/{repo}/stats/commit_activity"],getCommitComment:["GET /repos/{owner}/{repo}/comments/{comment_id}"],getCommitSignatureProtection:["GET /repos/{owner}/{repo}/branches/{branch}/protection/required_signatures"],getCommunityProfileMetrics:["GET /repos/{owner}/{repo}/community/profile"],getContent:["GET /repos/{owner}/{repo}/contents/{path}"],getContributorsStats:["GET /repos/{owner}/{repo}/stats/contributors"],getCustomDeploymentProtectionRule:["GET /repos/{owner}/{repo}/environments/{environment_name}/deployment_protection_rules/{protection_rule_id}"],getCustomPropertiesValues:["GET /repos/{owner}/{repo}/properties/values"],getDeployKey:["GET /repos/{owner}/{repo}/keys/{key_id}"],getDeployment:["GET /repos/{owner}/{repo}/deployments/{deployment_id}"],getDeploymentBranchPolicy:["GET /repos/{owner}/{repo}/environments/{environment_name}/deployment-branch-policies/{branch_policy_id}"],getDeploymentStatus:["GET /repos/{owner}/{repo}/deployments/{deployment_id}/statuses/{status_id}"],getEnvironment:["GET /repos/{owner}/{repo}/environments/{environment_name}"],getLatestPagesBuild:["GET /repos/{owner}/{repo}/pages/builds/latest"],getLatestRelease:["GET /repos/{owner}/{repo}/releases/latest"],getOrgRuleSuite:["GET /orgs/{org}/rulesets/rule-suites/{rule_suite_id}"],getOrgRuleSuites:["GET /orgs/{org}/rulesets/rule-suites"],getOrgRuleset:["GET /orgs/{org}/rulesets/{ruleset_id}"],getOrgRulesets:["GET /orgs/{org}/rulesets"],getPages:["GET /repos/{owner}/{repo}/pages"],getPagesBuild:["GET /repos/{owner}/{repo}/pages/builds/{build_id}"],getPagesDeployment:["GET /repos/{owner}/{repo}/pages/deployments/{pages_deployment_id}"],getPagesHealthCheck:["GET /repos/{owner}/{repo}/pages/health"],getParticipationStats:["GET /repos/{owner}/{repo}/stats/participation"],getPullRequestReviewProtection:["GET /repos/{owner}/{repo}/branches/{branch}/protection/required_pull_request_reviews"],getPunchCardStats:["GET /repos/{owner}/{repo}/stats/punch_card"],getReadme:["GET /repos/{owner}/{repo}/readme"],getReadmeInDirectory:["GET /repos/{owner}/{repo}/readme/{dir}"],getRelease:["GET /repos/{owner}/{repo}/releases/{release_id}"],getReleaseAsset:["GET /repos/{owner}/{repo}/releases/assets/{asset_id}"],getReleaseByTag:["GET /repos/{owner}/{repo}/releases/tags/{tag}"],getRepoRuleSuite:["GET /repos/{owner}/{repo}/rulesets/rule-suites/{rule_suite_id}"],getRepoRuleSuites:["GET /repos/{owner}/{repo}/rulesets/rule-suites"],getRepoRuleset:["GET /repos/{owner}/{repo}/rulesets/{ruleset_id}"],getRepoRulesets:["GET /repos/{owner}/{repo}/rulesets"],getStatusChecksProtection:["GET /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks"],getTeamsWithAccessToProtectedBranch:["GET /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/teams"],getTopPaths:["GET /repos/{owner}/{repo}/traffic/popular/paths"],getTopReferrers:["GET /repos/{owner}/{repo}/traffic/popular/referrers"],getUsersWithAccessToProtectedBranch:["GET /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/users"],getViews:["GET /repos/{owner}/{repo}/traffic/views"],getWebhook:["GET /repos/{owner}/{repo}/hooks/{hook_id}"],getWebhookConfigForRepo:["GET /repos/{owner}/{repo}/hooks/{hook_id}/config"],getWebhookDelivery:["GET /repos/{owner}/{repo}/hooks/{hook_id}/deliveries/{delivery_id}"],listActivities:["GET /repos/{owner}/{repo}/activity"],listAutolinks:["GET /repos/{owner}/{repo}/autolinks"],listBranches:["GET /repos/{owner}/{repo}/branches"],listBranchesForHeadCommit:["GET /repos/{owner}/{repo}/commits/{commit_sha}/branches-where-head"],listCollaborators:["GET /repos/{owner}/{repo}/collaborators"],listCommentsForCommit:["GET /repos/{owner}/{repo}/commits/{commit_sha}/comments"],listCommitCommentsForRepo:["GET /repos/{owner}/{repo}/comments"],listCommitStatusesForRef:["GET /repos/{owner}/{repo}/commits/{ref}/statuses"],listCommits:["GET /repos/{owner}/{repo}/commits"],listContributors:["GET /repos/{owner}/{repo}/contributors"],listCustomDeploymentRuleIntegrations:["GET /repos/{owner}/{repo}/environments/{environment_name}/deployment_protection_rules/apps"],listDeployKeys:["GET /repos/{owner}/{repo}/keys"],listDeploymentBranchPolicies:["GET /repos/{owner}/{repo}/environments/{environment_name}/deployment-branch-policies"],listDeploymentStatuses:["GET /repos/{owner}/{repo}/deployments/{deployment_id}/statuses"],listDeployments:["GET /repos/{owner}/{repo}/deployments"],listForAuthenticatedUser:["GET /user/repos"],listForOrg:["GET /orgs/{org}/repos"],listForUser:["GET /users/{username}/repos"],listForks:["GET /repos/{owner}/{repo}/forks"],listInvitations:["GET /repos/{owner}/{repo}/invitations"],listInvitationsForAuthenticatedUser:["GET /user/repository_invitations"],listLanguages:["GET /repos/{owner}/{repo}/languages"],listPagesBuilds:["GET /repos/{owner}/{repo}/pages/builds"],listPublic:["GET /repositories"],listPullRequestsAssociatedWithCommit:["GET /repos/{owner}/{repo}/commits/{commit_sha}/pulls"],listReleaseAssets:["GET /repos/{owner}/{repo}/releases/{release_id}/assets"],listReleases:["GET /repos/{owner}/{repo}/releases"],listTagProtection:["GET /repos/{owner}/{repo}/tags/protection"],listTags:["GET /repos/{owner}/{repo}/tags"],listTeams:["GET /repos/{owner}/{repo}/teams"],listWebhookDeliveries:["GET /repos/{owner}/{repo}/hooks/{hook_id}/deliveries"],listWebhooks:["GET /repos/{owner}/{repo}/hooks"],merge:["POST /repos/{owner}/{repo}/merges"],mergeUpstream:["POST /repos/{owner}/{repo}/merge-upstream"],pingWebhook:["POST /repos/{owner}/{repo}/hooks/{hook_id}/pings"],redeliverWebhookDelivery:["POST /repos/{owner}/{repo}/hooks/{hook_id}/deliveries/{delivery_id}/attempts"],removeAppAccessRestrictions:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/apps",{},{mapToData:"apps"}],removeCollaborator:["DELETE /repos/{owner}/{repo}/collaborators/{username}"],removeStatusCheckContexts:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks/contexts",{},{mapToData:"contexts"}],removeStatusCheckProtection:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks"],removeTeamAccessRestrictions:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/teams",{},{mapToData:"teams"}],removeUserAccessRestrictions:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/users",{},{mapToData:"users"}],renameBranch:["POST /repos/{owner}/{repo}/branches/{branch}/rename"],replaceAllTopics:["PUT /repos/{owner}/{repo}/topics"],requestPagesBuild:["POST /repos/{owner}/{repo}/pages/builds"],setAdminBranchProtection:["POST /repos/{owner}/{repo}/branches/{branch}/protection/enforce_admins"],setAppAccessRestrictions:["PUT /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/apps",{},{mapToData:"apps"}],setStatusCheckContexts:["PUT /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks/contexts",{},{mapToData:"contexts"}],setTeamAccessRestrictions:["PUT /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/teams",{},{mapToData:"teams"}],setUserAccessRestrictions:["PUT /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/users",{},{mapToData:"users"}],testPushWebhook:["POST /repos/{owner}/{repo}/hooks/{hook_id}/tests"],transfer:["POST /repos/{owner}/{repo}/transfer"],update:["PATCH /repos/{owner}/{repo}"],updateBranchProtection:["PUT /repos/{owner}/{repo}/branches/{branch}/protection"],updateCommitComment:["PATCH /repos/{owner}/{repo}/comments/{comment_id}"],updateDeploymentBranchPolicy:["PUT /repos/{owner}/{repo}/environments/{environment_name}/deployment-branch-policies/{branch_policy_id}"],updateInformationAboutPagesSite:["PUT /repos/{owner}/{repo}/pages"],updateInvitation:["PATCH /repos/{owner}/{repo}/invitations/{invitation_id}"],updateOrgRuleset:["PUT /orgs/{org}/rulesets/{ruleset_id}"],updatePullRequestReviewProtection:["PATCH /repos/{owner}/{repo}/branches/{branch}/protection/required_pull_request_reviews"],updateRelease:["PATCH /repos/{owner}/{repo}/releases/{release_id}"],updateReleaseAsset:["PATCH /repos/{owner}/{repo}/releases/assets/{asset_id}"],updateRepoRuleset:["PUT /repos/{owner}/{repo}/rulesets/{ruleset_id}"],updateStatusCheckPotection:["PATCH /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks",{},{renamed:["repos","updateStatusCheckProtection"]}],updateStatusCheckProtection:["PATCH /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks"],updateWebhook:["PATCH /repos/{owner}/{repo}/hooks/{hook_id}"],updateWebhookConfigForRepo:["PATCH /repos/{owner}/{repo}/hooks/{hook_id}/config"],uploadReleaseAsset:["POST /repos/{owner}/{repo}/releases/{release_id}/assets{?name,label}",{baseUrl:"https://uploads.github.com"}]},search:{code:["GET /search/code"],commits:["GET /search/commits"],issuesAndPullRequests:["GET /search/issues"],labels:["GET /search/labels"],repos:["GET /search/repositories"],topics:["GET /search/topics"],users:["GET /search/users"]},secretScanning:{getAlert:["GET /repos/{owner}/{repo}/secret-scanning/alerts/{alert_number}"],listAlertsForEnterprise:["GET /enterprises/{enterprise}/secret-scanning/alerts"],listAlertsForOrg:["GET /orgs/{org}/secret-scanning/alerts"],listAlertsForRepo:["GET /repos/{owner}/{repo}/secret-scanning/alerts"],listLocationsForAlert:["GET /repos/{owner}/{repo}/secret-scanning/alerts/{alert_number}/locations"],updateAlert:["PATCH /repos/{owner}/{repo}/secret-scanning/alerts/{alert_number}"]},securityAdvisories:{createFork:["POST /repos/{owner}/{repo}/security-advisories/{ghsa_id}/forks"],createPrivateVulnerabilityReport:["POST /repos/{owner}/{repo}/security-advisories/reports"],createRepositoryAdvisory:["POST /repos/{owner}/{repo}/security-advisories"],createRepositoryAdvisoryCveRequest:["POST /repos/{owner}/{repo}/security-advisories/{ghsa_id}/cve"],getGlobalAdvisory:["GET /advisories/{ghsa_id}"],getRepositoryAdvisory:["GET /repos/{owner}/{repo}/security-advisories/{ghsa_id}"],listGlobalAdvisories:["GET /advisories"],listOrgRepositoryAdvisories:["GET /orgs/{org}/security-advisories"],listRepositoryAdvisories:["GET /repos/{owner}/{repo}/security-advisories"],updateRepositoryAdvisory:["PATCH /repos/{owner}/{repo}/security-advisories/{ghsa_id}"]},teams:{addOrUpdateMembershipForUserInOrg:["PUT /orgs/{org}/teams/{team_slug}/memberships/{username}"],addOrUpdateProjectPermissionsInOrg:["PUT /orgs/{org}/teams/{team_slug}/projects/{project_id}"],addOrUpdateRepoPermissionsInOrg:["PUT /orgs/{org}/teams/{team_slug}/repos/{owner}/{repo}"],checkPermissionsForProjectInOrg:["GET /orgs/{org}/teams/{team_slug}/projects/{project_id}"],checkPermissionsForRepoInOrg:["GET /orgs/{org}/teams/{team_slug}/repos/{owner}/{repo}"],create:["POST /orgs/{org}/teams"],createDiscussionCommentInOrg:["POST /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments"],createDiscussionInOrg:["POST /orgs/{org}/teams/{team_slug}/discussions"],deleteDiscussionCommentInOrg:["DELETE /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}"],deleteDiscussionInOrg:["DELETE /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}"],deleteInOrg:["DELETE /orgs/{org}/teams/{team_slug}"],getByName:["GET /orgs/{org}/teams/{team_slug}"],getDiscussionCommentInOrg:["GET /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}"],getDiscussionInOrg:["GET /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}"],getMembershipForUserInOrg:["GET /orgs/{org}/teams/{team_slug}/memberships/{username}"],list:["GET /orgs/{org}/teams"],listChildInOrg:["GET /orgs/{org}/teams/{team_slug}/teams"],listDiscussionCommentsInOrg:["GET /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments"],listDiscussionsInOrg:["GET /orgs/{org}/teams/{team_slug}/discussions"],listForAuthenticatedUser:["GET /user/teams"],listMembersInOrg:["GET /orgs/{org}/teams/{team_slug}/members"],listPendingInvitationsInOrg:["GET /orgs/{org}/teams/{team_slug}/invitations"],listProjectsInOrg:["GET /orgs/{org}/teams/{team_slug}/projects"],listReposInOrg:["GET /orgs/{org}/teams/{team_slug}/repos"],removeMembershipForUserInOrg:["DELETE /orgs/{org}/teams/{team_slug}/memberships/{username}"],removeProjectInOrg:["DELETE /orgs/{org}/teams/{team_slug}/projects/{project_id}"],removeRepoInOrg:["DELETE /orgs/{org}/teams/{team_slug}/repos/{owner}/{repo}"],updateDiscussionCommentInOrg:["PATCH /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}"],updateDiscussionInOrg:["PATCH /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}"],updateInOrg:["PATCH /orgs/{org}/teams/{team_slug}"]},users:{addEmailForAuthenticated:["POST /user/emails",{},{renamed:["users","addEmailForAuthenticatedUser"]}],addEmailForAuthenticatedUser:["POST /user/emails"],addSocialAccountForAuthenticatedUser:["POST /user/social_accounts"],block:["PUT /user/blocks/{username}"],checkBlocked:["GET /user/blocks/{username}"],checkFollowingForUser:["GET /users/{username}/following/{target_user}"],checkPersonIsFollowedByAuthenticated:["GET /user/following/{username}"],createGpgKeyForAuthenticated:["POST /user/gpg_keys",{},{renamed:["users","createGpgKeyForAuthenticatedUser"]}],createGpgKeyForAuthenticatedUser:["POST /user/gpg_keys"],createPublicSshKeyForAuthenticated:["POST /user/keys",{},{renamed:["users","createPublicSshKeyForAuthenticatedUser"]}],createPublicSshKeyForAuthenticatedUser:["POST /user/keys"],createSshSigningKeyForAuthenticatedUser:["POST /user/ssh_signing_keys"],deleteEmailForAuthenticated:["DELETE /user/emails",{},{renamed:["users","deleteEmailForAuthenticatedUser"]}],deleteEmailForAuthenticatedUser:["DELETE /user/emails"],deleteGpgKeyForAuthenticated:["DELETE /user/gpg_keys/{gpg_key_id}",{},{renamed:["users","deleteGpgKeyForAuthenticatedUser"]}],deleteGpgKeyForAuthenticatedUser:["DELETE /user/gpg_keys/{gpg_key_id}"],deletePublicSshKeyForAuthenticated:["DELETE /user/keys/{key_id}",{},{renamed:["users","deletePublicSshKeyForAuthenticatedUser"]}],deletePublicSshKeyForAuthenticatedUser:["DELETE /user/keys/{key_id}"],deleteSocialAccountForAuthenticatedUser:["DELETE /user/social_accounts"],deleteSshSigningKeyForAuthenticatedUser:["DELETE /user/ssh_signing_keys/{ssh_signing_key_id}"],follow:["PUT /user/following/{username}"],getAuthenticated:["GET /user"],getByUsername:["GET /users/{username}"],getContextForUser:["GET /users/{username}/hovercard"],getGpgKeyForAuthenticated:["GET /user/gpg_keys/{gpg_key_id}",{},{renamed:["users","getGpgKeyForAuthenticatedUser"]}],getGpgKeyForAuthenticatedUser:["GET /user/gpg_keys/{gpg_key_id}"],getPublicSshKeyForAuthenticated:["GET /user/keys/{key_id}",{},{renamed:["users","getPublicSshKeyForAuthenticatedUser"]}],getPublicSshKeyForAuthenticatedUser:["GET /user/keys/{key_id}"],getSshSigningKeyForAuthenticatedUser:["GET /user/ssh_signing_keys/{ssh_signing_key_id}"],list:["GET /users"],listBlockedByAuthenticated:["GET /user/blocks",{},{renamed:["users","listBlockedByAuthenticatedUser"]}],listBlockedByAuthenticatedUser:["GET /user/blocks"],listEmailsForAuthenticated:["GET /user/emails",{},{renamed:["users","listEmailsForAuthenticatedUser"]}],listEmailsForAuthenticatedUser:["GET /user/emails"],listFollowedByAuthenticated:["GET /user/following",{},{renamed:["users","listFollowedByAuthenticatedUser"]}],listFollowedByAuthenticatedUser:["GET /user/following"],listFollowersForAuthenticatedUser:["GET /user/followers"],listFollowersForUser:["GET /users/{username}/followers"],listFollowingForUser:["GET /users/{username}/following"],listGpgKeysForAuthenticated:["GET /user/gpg_keys",{},{renamed:["users","listGpgKeysForAuthenticatedUser"]}],listGpgKeysForAuthenticatedUser:["GET /user/gpg_keys"],listGpgKeysForUser:["GET /users/{username}/gpg_keys"],listPublicEmailsForAuthenticated:["GET /user/public_emails",{},{renamed:["users","listPublicEmailsForAuthenticatedUser"]}],listPublicEmailsForAuthenticatedUser:["GET /user/public_emails"],listPublicKeysForUser:["GET /users/{username}/keys"],listPublicSshKeysForAuthenticated:["GET /user/keys",{},{renamed:["users","listPublicSshKeysForAuthenticatedUser"]}],listPublicSshKeysForAuthenticatedUser:["GET /user/keys"],listSocialAccountsForAuthenticatedUser:["GET /user/social_accounts"],listSocialAccountsForUser:["GET /users/{username}/social_accounts"],listSshSigningKeysForAuthenticatedUser:["GET /user/ssh_signing_keys"],listSshSigningKeysForUser:["GET /users/{username}/ssh_signing_keys"],setPrimaryEmailVisibilityForAuthenticated:["PATCH /user/email/visibility",{},{renamed:["users","setPrimaryEmailVisibilityForAuthenticatedUser"]}],setPrimaryEmailVisibilityForAuthenticatedUser:["PATCH /user/email/visibility"],unblock:["DELETE /user/blocks/{username}"],unfollow:["DELETE /user/following/{username}"],updateAuthenticated:["PATCH /user"]}},endpoints_default=Endpoints,endpointMethodsMap=new Map;for(const[Nt,s]of Object.entries(endpoints_default))for(const[Ot,en]of Object.entries(s)){const[tn,nn,rn]=en,[on,sn]=tn.split(/ /),an=Object.assign({method:on,url:sn},nn);endpointMethodsMap.has(Nt)||endpointMethodsMap.set(Nt,new Map),endpointMethodsMap.get(Nt).set(Ot,{scope:Nt,methodName:Ot,endpointDefaults:an,decorations:rn})}var handler={has({scope:Nt},s){return endpointMethodsMap.get(Nt).has(s)},getOwnPropertyDescriptor(Nt,s){return{value:this.get(Nt,s),configurable:!0,writable:!0,enumerable:!0}},defineProperty(Nt,s,Ot){return Object.defineProperty(Nt.cache,s,Ot),!0},deleteProperty(Nt,s){return delete Nt.cache[s],!0},ownKeys({scope:Nt}){return[...endpointMethodsMap.get(Nt).keys()]},set(Nt,s,Ot){return Nt.cache[s]=Ot},get({octokit:Nt,scope:s,cache:Ot},en){if(Ot[en])return Ot[en];const tn=endpointMethodsMap.get(s).get(en);if(!tn)return;const{endpointDefaults:nn,decorations:rn}=tn;return rn?Ot[en]=decorate(Nt,s,en,nn,rn):Ot[en]=Nt.request.defaults(nn),Ot[en]}};function endpointsToMethods(Nt){const s={};for(const Ot of endpointMethodsMap.keys())s[Ot]=new Proxy({octokit:Nt,scope:Ot,cache:{}},handler);return s}function decorate(Nt,s,Ot,en,tn){const nn=Nt.request.defaults(en);function rn(...on){let sn=nn.endpoint.merge(...on);if(tn.mapToData)return sn=Object.assign({},sn,{data:sn[tn.mapToData],[tn.mapToData]:void 0}),nn(sn);if(tn.renamed){const[an,ln]=tn.renamed;Nt.log.warn(`octokit.${s}.${Ot}() has been renamed to octokit.${an}.${ln}()`)}if(tn.deprecated&&Nt.log.warn(tn.deprecated),tn.renamedParameters){const an=nn.endpoint.merge(...on);for(const[ln,cn]of Object.entries(tn.renamedParameters))ln in an&&(Nt.log.warn(`"${ln}" parameter is deprecated for "octokit.${s}.${Ot}()". Use "${cn}" instead`),cn in an||(an[cn]=an[ln]),delete an[ln]);return nn(an)}return nn(...on)}return Object.assign(rn,nn)}function restEndpointMethods(Nt){return{rest:endpointsToMethods(Nt)}}restEndpointMethods.VERSION=VERSION$9;var light={exports:{}};(function(Nt,s){(function(Ot,en){Nt.exports=en()})(commonjsGlobal$1,function(){var Ot=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof commonjsGlobal$1<"u"?commonjsGlobal$1:typeof self<"u"?self:{};function en(Kn){return Kn&&Kn.default||Kn}var tn=function(Kn,On,Tn={}){var Dn,Mn,Un;for(Dn in On)Un=On[Dn],Tn[Dn]=(Mn=Kn[Dn])!=null?Mn:Un;return Tn},nn=function(Kn,On,Tn={}){var Dn,Mn;for(Dn in Kn)Mn=Kn[Dn],On[Dn]!==void 0&&(Tn[Dn]=Mn);return Tn},rn={load:tn,overwrite:nn},on;on=class{constructor(On,Tn){this.incr=On,this.decr=Tn,this._first=null,this._last=null,this.length=0}push(On){var Tn;this.length++,typeof this.incr=="function"&&this.incr(),Tn={value:On,prev:this._last,next:null},this._last!=null?(this._last.next=Tn,this._last=Tn):this._first=this._last=Tn}shift(){var On;if(this._first!=null)return this.length--,typeof this.decr=="function"&&this.decr(),On=this._first.value,(this._first=this._first.next)!=null?this._first.prev=null:this._last=null,On}first(){if(this._first!=null)return this._first.value}getArray(){var On,Tn,Dn;for(On=this._first,Dn=[];On!=null;)Dn.push((Tn=On,On=On.next,Tn.value));return Dn}forEachShift(On){var Tn;for(Tn=this.shift();Tn!=null;)On(Tn),Tn=this.shift()}debug(){var On,Tn,Dn,Mn,Un;for(On=this._first,Un=[];On!=null;)Un.push((Tn=On,On=On.next,{value:Tn.value,prev:(Dn=Tn.prev)!=null?Dn.value:void 0,next:(Mn=Tn.next)!=null?Mn.value:void 0}));return Un}};var sn=on,an;an=class{constructor(On){if(this.instance=On,this._events={},this.instance.on!=null||this.instance.once!=null||this.instance.removeAllListeners!=null)throw new Error("An Emitter already exists for this object");this.instance.on=(Tn,Dn)=>this._addListener(Tn,"many",Dn),this.instance.once=(Tn,Dn)=>this._addListener(Tn,"once",Dn),this.instance.removeAllListeners=(Tn=null)=>Tn!=null?delete this._events[Tn]:this._events={}}_addListener(On,Tn,Dn){var Mn;return(Mn=this._events)[On]==null&&(Mn[On]=[]),this._events[On].push({cb:Dn,status:Tn}),this.instance}listenerCount(On){return this._events[On]!=null?this._events[On].length:0}async trigger(On,...Tn){var Dn,Mn;try{return On!=="debug"&&this.trigger("debug",`Event triggered: ${On}`,Tn),this._events[On]==null?void 0:(this._events[On]=this._events[On].filter(function(Un){return Un.status!=="none"}),Mn=this._events[On].map(async Un=>{var Hn,Wn;if(Un.status!=="none"){Un.status==="once"&&(Un.status="none");try{return Wn=typeof Un.cb=="function"?Un.cb(...Tn):void 0,typeof(Wn!=null?Wn.then:void 0)=="function"?await Wn:Wn}catch(Zn){return Hn=Zn,this.trigger("error",Hn),null}}}),(await Promise.all(Mn)).find(function(Un){return Un!=null}))}catch(Un){return Dn=Un,this.trigger("error",Dn),null}}};var ln=an,cn,un,dn;cn=sn,un=ln,dn=class{constructor(On){this.Events=new un(this),this._length=0,this._lists=(function(){var Tn,Dn,Mn;for(Mn=[],Tn=1,Dn=On;1<=Dn?Tn<=Dn:Tn>=Dn;1<=Dn?++Tn:--Tn)Mn.push(new cn(()=>this.incr(),()=>this.decr()));return Mn}).call(this)}incr(){if(this._length++===0)return this.Events.trigger("leftzero")}decr(){if(--this._length===0)return this.Events.trigger("zero")}push(On){return this._lists[On.options.priority].push(On)}queued(On){return On!=null?this._lists[On].length:this._length}shiftAll(On){return this._lists.forEach(function(Tn){return Tn.forEachShift(On)})}getFirst(On=this._lists){var Tn,Dn,Mn;for(Tn=0,Dn=On.length;Tn<Dn;Tn++)if(Mn=On[Tn],Mn.length>0)return Mn;return[]}shiftLastFrom(On){return this.getFirst(this._lists.slice(On).reverse()).shift()}};var hn=dn,fn;fn=class extends Error{};var mn=fn,gn,pn,_n,vn,bn;vn=10,pn=5,bn=rn,gn=mn,_n=class{constructor(On,Tn,Dn,Mn,Un,Hn,Wn,Zn){this.task=On,this.args=Tn,this.rejectOnDrop=Un,this.Events=Hn,this._states=Wn,this.Promise=Zn,this.options=bn.load(Dn,Mn),this.options.priority=this._sanitizePriority(this.options.priority),this.options.id===Mn.id&&(this.options.id=`${this.options.id}-${this._randomIndex()}`),this.promise=new this.Promise((or,sr)=>{this._resolve=or,this._reject=sr}),this.retryCount=0}_sanitizePriority(On){var Tn;return Tn=~~On!==On?pn:On,Tn<0?0:Tn>vn-1?vn-1:Tn}_randomIndex(){return Math.random().toString(36).slice(2)}doDrop({error:On,message:Tn="This job has been dropped by Bottleneck"}={}){return this._states.remove(this.options.id)?(this.rejectOnDrop&&this._reject(On??new gn(Tn)),this.Events.trigger("dropped",{args:this.args,options:this.options,task:this.task,promise:this.promise}),!0):!1}_assertStatus(On){var Tn;if(Tn=this._states.jobStatus(this.options.id),!(Tn===On||On==="DONE"&&Tn===null))throw new gn(`Invalid job status ${Tn}, expected ${On}. Please open an issue at https://github.com/SGrondin/bottleneck/issues`)}doReceive(){return this._states.start(this.options.id),this.Events.trigger("received",{args:this.args,options:this.options})}doQueue(On,Tn){return this._assertStatus("RECEIVED"),this._states.next(this.options.id),this.Events.trigger("queued",{args:this.args,options:this.options,reachedHWM:On,blocked:Tn})}doRun(){return this.retryCount===0?(this._assertStatus("QUEUED"),this._states.next(this.options.id)):this._assertStatus("EXECUTING"),this.Events.trigger("scheduled",{args:this.args,options:this.options})}async doExecute(On,Tn,Dn,Mn){var Un,Hn,Wn;this.retryCount===0?(this._assertStatus("RUNNING"),this._states.next(this.options.id)):this._assertStatus("EXECUTING"),Hn={args:this.args,options:this.options,retryCount:this.retryCount},this.Events.trigger("executing",Hn);try{if(Wn=await(On!=null?On.schedule(this.options,this.task,...this.args):this.task(...this.args)),Tn())return this.doDone(Hn),await Mn(this.options,Hn),this._assertStatus("DONE"),this._resolve(Wn)}catch(Zn){return Un=Zn,this._onFailure(Un,Hn,Tn,Dn,Mn)}}doExpire(On,Tn,Dn){var Mn,Un;return this._states.jobStatus(this.options.id==="RUNNING")&&this._states.next(this.options.id),this._assertStatus("EXECUTING"),Un={args:this.args,options:this.options,retryCount:this.retryCount},Mn=new gn(`This job timed out after ${this.options.expiration} ms.`),this._onFailure(Mn,Un,On,Tn,Dn)}async _onFailure(On,Tn,Dn,Mn,Un){var Hn,Wn;if(Dn())return Hn=await this.Events.trigger("failed",On,Tn),Hn!=null?(Wn=~~Hn,this.Events.trigger("retry",`Retrying ${this.options.id} after ${Wn} ms`,Tn),this.retryCount++,Mn(Wn)):(this.doDone(Tn),await Un(this.options,Tn),this._assertStatus("DONE"),this._reject(On))}doDone(On){return this._assertStatus("EXECUTING"),this._states.next(this.options.id),this.Events.trigger("done",On)}};var wn=_n,Sn,kn,En;En=rn,Sn=mn,kn=class{constructor(On,Tn,Dn){this.instance=On,this.storeOptions=Tn,this.clientId=this.instance._randomIndex(),En.load(Dn,Dn,this),this._nextRequest=this._lastReservoirRefresh=this._lastReservoirIncrease=Date.now(),this._running=0,this._done=0,this._unblockTime=0,this.ready=this.Promise.resolve(),this.clients={},this._startHeartbeat()}_startHeartbeat(){var On;return this.heartbeat==null&&(this.storeOptions.reservoirRefreshInterval!=null&&this.storeOptions.reservoirRefreshAmount!=null||this.storeOptions.reservoirIncreaseInterval!=null&&this.storeOptions.reservoirIncreaseAmount!=null)?typeof(On=this.heartbeat=setInterval(()=>{var Tn,Dn,Mn,Un,Hn;if(Un=Date.now(),this.storeOptions.reservoirRefreshInterval!=null&&Un>=this._lastReservoirRefresh+this.storeOptions.reservoirRefreshInterval&&(this._lastReservoirRefresh=Un,this.storeOptions.reservoir=this.storeOptions.reservoirRefreshAmount,this.instance._drainAll(this.computeCapacity())),this.storeOptions.reservoirIncreaseInterval!=null&&Un>=this._lastReservoirIncrease+this.storeOptions.reservoirIncreaseInterval&&({reservoirIncreaseAmount:Tn,reservoirIncreaseMaximum:Mn,reservoir:Hn}=this.storeOptions,this._lastReservoirIncrease=Un,Dn=Mn!=null?Math.min(Tn,Mn-Hn):Tn,Dn>0))return this.storeOptions.reservoir+=Dn,this.instance._drainAll(this.computeCapacity())},this.heartbeatInterval)).unref=="function"?On.unref():void 0:clearInterval(this.heartbeat)}async __publish__(On){return await this.yieldLoop(),this.instance.Events.trigger("message",On.toString())}async __disconnect__(On){return await this.yieldLoop(),clearInterval(this.heartbeat),this.Promise.resolve()}yieldLoop(On=0){return new this.Promise(function(Tn,Dn){return setTimeout(Tn,On)})}computePenalty(){var On;return(On=this.storeOptions.penalty)!=null?On:15*this.storeOptions.minTime||5e3}async __updateSettings__(On){return await this.yieldLoop(),En.overwrite(On,On,this.storeOptions),this._startHeartbeat(),this.instance._drainAll(this.computeCapacity()),!0}async __running__(){return await this.yieldLoop(),this._running}async __queued__(){return await this.yieldLoop(),this.instance.queued()}async __done__(){return await this.yieldLoop(),this._done}async __groupCheck__(On){return await this.yieldLoop(),this._nextRequest+this.timeout<On}computeCapacity(){var On,Tn;return{maxConcurrent:On,reservoir:Tn}=this.storeOptions,On!=null&&Tn!=null?Math.min(On-this._running,Tn):On!=null?On-this._running:Tn??null}conditionsCheck(On){var Tn;return Tn=this.computeCapacity(),Tn==null||On<=Tn}async __incrementReservoir__(On){var Tn;return await this.yieldLoop(),Tn=this.storeOptions.reservoir+=On,this.instance._drainAll(this.computeCapacity()),Tn}async __currentReservoir__(){return await this.yieldLoop(),this.storeOptions.reservoir}isBlocked(On){return this._unblockTime>=On}check(On,Tn){return this.conditionsCheck(On)&&this._nextRequest-Tn<=0}async __check__(On){var Tn;return await this.yieldLoop(),Tn=Date.now(),this.check(On,Tn)}async __register__(On,Tn,Dn){var Mn,Un;return await this.yieldLoop(),Mn=Date.now(),this.conditionsCheck(Tn)?(this._running+=Tn,this.storeOptions.reservoir!=null&&(this.storeOptions.reservoir-=Tn),Un=Math.max(this._nextRequest-Mn,0),this._nextRequest=Mn+Un+this.storeOptions.minTime,{success:!0,wait:Un,reservoir:this.storeOptions.reservoir}):{success:!1}}strategyIsBlock(){return this.storeOptions.strategy===3}async __submit__(On,Tn){var Dn,Mn,Un;if(await this.yieldLoop(),this.storeOptions.maxConcurrent!=null&&Tn>this.storeOptions.maxConcurrent)throw new Sn(`Impossible to add a job having a weight of ${Tn} to a limiter having a maxConcurrent setting of ${this.storeOptions.maxConcurrent}`);return Mn=Date.now(),Un=this.storeOptions.highWater!=null&&On===this.storeOptions.highWater&&!this.check(Tn,Mn),Dn=this.strategyIsBlock()&&(Un||this.isBlocked(Mn)),Dn&&(this._unblockTime=Mn+this.computePenalty(),this._nextRequest=this._unblockTime+this.storeOptions.minTime,this.instance._dropAllQueued()),{reachedHWM:Un,blocked:Dn,strategy:this.storeOptions.strategy}}async __free__(On,Tn){return await this.yieldLoop(),this._running-=Tn,this._done+=Tn,this.instance._drainAll(this.computeCapacity()),{running:this._running}}};var In=kn,An,Rn;An=mn,Rn=class{constructor(On){this.status=On,this._jobs={},this.counts=this.status.map(function(){return 0})}next(On){var Tn,Dn;if(Tn=this._jobs[On],Dn=Tn+1,Tn!=null&&Dn<this.status.length)return this.counts[Tn]--,this.counts[Dn]++,this._jobs[On]++;if(Tn!=null)return this.counts[Tn]--,delete this._jobs[On]}start(On){var Tn;return Tn=0,this._jobs[On]=Tn,this.counts[Tn]++}remove(On){var Tn;return Tn=this._jobs[On],Tn!=null&&(this.counts[Tn]--,delete this._jobs[On]),Tn!=null}jobStatus(On){var Tn;return(Tn=this.status[this._jobs[On]])!=null?Tn:null}statusJobs(On){var Tn,Dn,Mn,Un,Hn;if(On!=null){if(Dn=this.status.indexOf(On),Dn<0)throw new An(`status must be one of ${this.status.join(", ")}`);Mn=this._jobs,Un=[];for(Tn in Mn)Hn=Mn[Tn],Hn===Dn&&Un.push(Tn);return Un}else return Object.keys(this._jobs)}statusCounts(){return this.counts.reduce((On,Tn,Dn)=>(On[this.status[Dn]]=Tn,On),{})}};var Nn=Rn,Vn,$n;Vn=sn,$n=class{constructor(On,Tn){this.schedule=this.schedule.bind(this),this.name=On,this.Promise=Tn,this._running=0,this._queue=new Vn}isEmpty(){return this._queue.length===0}async _tryToRun(){var On,Tn,Dn,Mn,Un,Hn,Wn;if(this._running<1&&this._queue.length>0)return this._running++,{task:Wn,args:On,resolve:Un,reject:Mn}=this._queue.shift(),Tn=await async function(){try{return Hn=await Wn(...On),function(){return Un(Hn)}}catch(Zn){return Dn=Zn,function(){return Mn(Dn)}}}(),this._running--,this._tryToRun(),Tn()}schedule(On,...Tn){var Dn,Mn,Un;return Un=Mn=null,Dn=new this.Promise(function(Hn,Wn){return Un=Hn,Mn=Wn}),this._queue.push({task:On,args:Tn,resolve:Un,reject:Mn}),this._tryToRun(),Dn}};var jn=$n,Ln="2.19.5",Pn={version:Ln},Bn=Object.freeze({version:Ln,default:Pn}),Gn=()=>console.log("You must import the full version of Bottleneck in order to use this feature."),zn=()=>console.log("You must import the full version of Bottleneck in order to use this feature."),qn=()=>console.log("You must import the full version of Bottleneck in order to use this feature."),Jn,Qn,ar,Xn,xn,yn;yn=rn,Jn=ln,Xn=Gn,ar=zn,xn=qn,Qn=(function(){class Kn{constructor(Tn={}){this.deleteKey=this.deleteKey.bind(this),this.limiterOptions=Tn,yn.load(this.limiterOptions,this.defaults,this),this.Events=new Jn(this),this.instances={},this.Bottleneck=$r,this._startAutoCleanup(),this.sharedConnection=this.connection!=null,this.connection==null&&(this.limiterOptions.datastore==="redis"?this.connection=new Xn(Object.assign({},this.limiterOptions,{Events:this.Events})):this.limiterOptions.datastore==="ioredis"&&(this.connection=new ar(Object.assign({},this.limiterOptions,{Events:this.Events}))))}key(Tn=""){var Dn;return(Dn=this.instances[Tn])!=null?Dn:(()=>{var Mn;return Mn=this.instances[Tn]=new this.Bottleneck(Object.assign(this.limiterOptions,{id:`${this.id}-${Tn}`,timeout:this.timeout,connection:this.connection})),this.Events.trigger("created",Mn,Tn),Mn})()}async deleteKey(Tn=""){var Dn,Mn;return Mn=this.instances[Tn],this.connection&&(Dn=await this.connection.__runCommand__(["del",...xn.allKeys(`${this.id}-${Tn}`)])),Mn!=null&&(delete this.instances[Tn],await Mn.disconnect()),Mn!=null||Dn>0}limiters(){var Tn,Dn,Mn,Un;Dn=this.instances,Mn=[];for(Tn in Dn)Un=Dn[Tn],Mn.push({key:Tn,limiter:Un});return Mn}keys(){return Object.keys(this.instances)}async clusterKeys(){var Tn,Dn,Mn,Un,Hn,Wn,Zn,or,sr;if(this.connection==null)return this.Promise.resolve(this.keys());for(Wn=[],Tn=null,sr=`b_${this.id}-`.length,Dn=9;Tn!==0;)for([or,Mn]=await this.connection.__runCommand__(["scan",Tn??0,"match",`b_${this.id}-*_settings`,"count",1e4]),Tn=~~or,Un=0,Zn=Mn.length;Un<Zn;Un++)Hn=Mn[Un],Wn.push(Hn.slice(sr,-Dn));return Wn}_startAutoCleanup(){var Tn;return clearInterval(this.interval),typeof(Tn=this.interval=setInterval(async()=>{var Dn,Mn,Un,Hn,Wn,Zn;Wn=Date.now(),Un=this.instances,Hn=[];for(Mn in Un){Zn=Un[Mn];try{await Zn._store.__groupCheck__(Wn)?Hn.push(this.deleteKey(Mn)):Hn.push(void 0)}catch(or){Dn=or,Hn.push(Zn.Events.trigger("error",Dn))}}return Hn},this.timeout/2)).unref=="function"?Tn.unref():void 0}updateSettings(Tn={}){if(yn.overwrite(Tn,this.defaults,this),yn.overwrite(Tn,Tn,this.limiterOptions),Tn.timeout!=null)return this._startAutoCleanup()}disconnect(Tn=!0){var Dn;if(!this.sharedConnection)return(Dn=this.connection)!=null?Dn.disconnect(Tn):void 0}}return Kn.prototype.defaults={timeout:1e3*60*5,connection:null,Promise,id:"group-key"},Kn}).call(Ot);var Fn=Qn,Cn,Yn,er;er=rn,Yn=ln,Cn=(function(){class Kn{constructor(Tn={}){this.options=Tn,er.load(this.options,this.defaults,this),this.Events=new Yn(this),this._arr=[],this._resetPromise(),this._lastFlush=Date.now()}_resetPromise(){return this._promise=new this.Promise((Tn,Dn)=>this._resolve=Tn)}_flush(){return clearTimeout(this._timeout),this._lastFlush=Date.now(),this._resolve(),this.Events.trigger("batch",this._arr),this._arr=[],this._resetPromise()}add(Tn){var Dn;return this._arr.push(Tn),Dn=this._promise,this._arr.length===this.maxSize?this._flush():this.maxTime!=null&&this._arr.length===1&&(this._timeout=setTimeout(()=>this._flush(),this.maxTime)),Dn}}return Kn.prototype.defaults={maxTime:null,maxSize:null,Promise},Kn}).call(Ot);var tr=Cn,ir=()=>console.log("You must import the full version of Bottleneck in order to use this feature."),cr=en(Bn),hr,nr,ur,br,Tr,vr,wr,Ar,Ir,Sr,dr,Pr=[].splice;vr=10,nr=5,dr=rn,wr=hn,br=wn,Tr=In,Ar=ir,ur=ln,Ir=Nn,Sr=jn,hr=(function(){class Kn{constructor(Tn={},...Dn){var Mn,Un;this._addToQueue=this._addToQueue.bind(this),this._validateOptions(Tn,Dn),dr.load(Tn,this.instanceDefaults,this),this._queues=new wr(vr),this._scheduled={},this._states=new Ir(["RECEIVED","QUEUED","RUNNING","EXECUTING"].concat(this.trackDoneStatus?["DONE"]:[])),this._limiter=null,this.Events=new ur(this),this._submitLock=new Sr("submit",this.Promise),this._registerLock=new Sr("register",this.Promise),Un=dr.load(Tn,this.storeDefaults,{}),this._store=(function(){if(this.datastore==="redis"||this.datastore==="ioredis"||this.connection!=null)return Mn=dr.load(Tn,this.redisStoreDefaults,{}),new Ar(this,Un,Mn);if(this.datastore==="local")return Mn=dr.load(Tn,this.localStoreDefaults,{}),new Tr(this,Un,Mn);throw new Kn.prototype.BottleneckError(`Invalid datastore type: ${this.datastore}`)}).call(this),this._queues.on("leftzero",()=>{var Hn;return(Hn=this._store.heartbeat)!=null&&typeof Hn.ref=="function"?Hn.ref():void 0}),this._queues.on("zero",()=>{var Hn;return(Hn=this._store.heartbeat)!=null&&typeof Hn.unref=="function"?Hn.unref():void 0})}_validateOptions(Tn,Dn){if(!(Tn!=null&&typeof Tn=="object"&&Dn.length===0))throw new Kn.prototype.BottleneckError("Bottleneck v2 takes a single object argument. Refer to https://github.com/SGrondin/bottleneck#upgrading-to-v2 if you're upgrading from Bottleneck v1.")}ready(){return this._store.ready}clients(){return this._store.clients}channel(){return`b_${this.id}`}channel_client(){return`b_${this.id}_${this._store.clientId}`}publish(Tn){return this._store.__publish__(Tn)}disconnect(Tn=!0){return this._store.__disconnect__(Tn)}chain(Tn){return this._limiter=Tn,this}queued(Tn){return this._queues.queued(Tn)}clusterQueued(){return this._store.__queued__()}empty(){return this.queued()===0&&this._submitLock.isEmpty()}running(){return this._store.__running__()}done(){return this._store.__done__()}jobStatus(Tn){return this._states.jobStatus(Tn)}jobs(Tn){return this._states.statusJobs(Tn)}counts(){return this._states.statusCounts()}_randomIndex(){return Math.random().toString(36).slice(2)}check(Tn=1){return this._store.__check__(Tn)}_clearGlobalState(Tn){return this._scheduled[Tn]!=null?(clearTimeout(this._scheduled[Tn].expiration),delete this._scheduled[Tn],!0):!1}async _free(Tn,Dn,Mn,Un){var Hn,Wn;try{if({running:Wn}=await this._store.__free__(Tn,Mn.weight),this.Events.trigger("debug",`Freed ${Mn.id}`,Un),Wn===0&&this.empty())return this.Events.trigger("idle")}catch(Zn){return Hn=Zn,this.Events.trigger("error",Hn)}}_run(Tn,Dn,Mn){var Un,Hn,Wn;return Dn.doRun(),Un=this._clearGlobalState.bind(this,Tn),Wn=this._run.bind(this,Tn,Dn),Hn=this._free.bind(this,Tn,Dn),this._scheduled[Tn]={timeout:setTimeout(()=>Dn.doExecute(this._limiter,Un,Wn,Hn),Mn),expiration:Dn.options.expiration!=null?setTimeout(function(){return Dn.doExpire(Un,Wn,Hn)},Mn+Dn.options.expiration):void 0,job:Dn}}_drainOne(Tn){return this._registerLock.schedule(()=>{var Dn,Mn,Un,Hn,Wn;return this.queued()===0?this.Promise.resolve(null):(Wn=this._queues.getFirst(),{options:Hn,args:Dn}=Un=Wn.first(),Tn!=null&&Hn.weight>Tn?this.Promise.resolve(null):(this.Events.trigger("debug",`Draining ${Hn.id}`,{args:Dn,options:Hn}),Mn=this._randomIndex(),this._store.__register__(Mn,Hn.weight,Hn.expiration).then(({success:Zn,wait:or,reservoir:sr})=>{var kr;return this.Events.trigger("debug",`Drained ${Hn.id}`,{success:Zn,args:Dn,options:Hn}),Zn?(Wn.shift(),kr=this.empty(),kr&&this.Events.trigger("empty"),sr===0&&this.Events.trigger("depleted",kr),this._run(Mn,Un,or),this.Promise.resolve(Hn.weight)):this.Promise.resolve(null)})))})}_drainAll(Tn,Dn=0){return this._drainOne(Tn).then(Mn=>{var Un;return Mn!=null?(Un=Tn!=null?Tn-Mn:Tn,this._drainAll(Un,Dn+Mn)):this.Promise.resolve(Dn)}).catch(Mn=>this.Events.trigger("error",Mn))}_dropAllQueued(Tn){return this._queues.shiftAll(function(Dn){return Dn.doDrop({message:Tn})})}stop(Tn={}){var Dn,Mn;return Tn=dr.load(Tn,this.stopDefaults),Mn=Un=>{var Hn;return Hn=()=>{var Wn;return Wn=this._states.counts,Wn[0]+Wn[1]+Wn[2]+Wn[3]===Un},new this.Promise((Wn,Zn)=>Hn()?Wn():this.on("done",()=>{if(Hn())return this.removeAllListeners("done"),Wn()}))},Dn=Tn.dropWaitingJobs?(this._run=function(Un,Hn){return Hn.doDrop({message:Tn.dropErrorMessage})},this._drainOne=()=>this.Promise.resolve(null),this._registerLock.schedule(()=>this._submitLock.schedule(()=>{var Un,Hn,Wn;Hn=this._scheduled;for(Un in Hn)Wn=Hn[Un],this.jobStatus(Wn.job.options.id)==="RUNNING"&&(clearTimeout(Wn.timeout),clearTimeout(Wn.expiration),Wn.job.doDrop({message:Tn.dropErrorMessage}));return this._dropAllQueued(Tn.dropErrorMessage),Mn(0)}))):this.schedule({priority:vr-1,weight:0},()=>Mn(1)),this._receive=function(Un){return Un._reject(new Kn.prototype.BottleneckError(Tn.enqueueErrorMessage))},this.stop=()=>this.Promise.reject(new Kn.prototype.BottleneckError("stop() has already been called")),Dn}async _addToQueue(Tn){var Dn,Mn,Un,Hn,Wn,Zn,or;({args:Dn,options:Hn}=Tn);try{({reachedHWM:Wn,blocked:Mn,strategy:or}=await this._store.__submit__(this.queued(),Hn.weight))}catch(sr){return Un=sr,this.Events.trigger("debug",`Could not queue ${Hn.id}`,{args:Dn,options:Hn,error:Un}),Tn.doDrop({error:Un}),!1}return Mn?(Tn.doDrop(),!0):Wn&&(Zn=or===Kn.prototype.strategy.LEAK?this._queues.shiftLastFrom(Hn.priority):or===Kn.prototype.strategy.OVERFLOW_PRIORITY?this._queues.shiftLastFrom(Hn.priority+1):or===Kn.prototype.strategy.OVERFLOW?Tn:void 0,Zn!=null&&Zn.doDrop(),Zn==null||or===Kn.prototype.strategy.OVERFLOW)?(Zn==null&&Tn.doDrop(),Wn):(Tn.doQueue(Wn,Mn),this._queues.push(Tn),await this._drainAll(),Wn)}_receive(Tn){return this._states.jobStatus(Tn.options.id)!=null?(Tn._reject(new Kn.prototype.BottleneckError(`A job with the same id already exists (id=${Tn.options.id})`)),!1):(Tn.doReceive(),this._submitLock.schedule(this._addToQueue,Tn))}submit(...Tn){var Dn,Mn,Un,Hn,Wn,Zn,or;return typeof Tn[0]=="function"?(Wn=Tn,[Mn,...Tn]=Wn,[Dn]=Pr.call(Tn,-1),Hn=dr.load({},this.jobDefaults)):(Zn=Tn,[Hn,Mn,...Tn]=Zn,[Dn]=Pr.call(Tn,-1),Hn=dr.load(Hn,this.jobDefaults)),or=(...sr)=>new this.Promise(function(kr,Mr){return Mn(...sr,function(...Nr){return(Nr[0]!=null?Mr:kr)(Nr)})}),Un=new br(or,Tn,Hn,this.jobDefaults,this.rejectOnDrop,this.Events,this._states,this.Promise),Un.promise.then(function(sr){return typeof Dn=="function"?Dn(...sr):void 0}).catch(function(sr){return Array.isArray(sr)?typeof Dn=="function"?Dn(...sr):void 0:typeof Dn=="function"?Dn(sr):void 0}),this._receive(Un)}schedule(...Tn){var Dn,Mn,Un;return typeof Tn[0]=="function"?([Un,...Tn]=Tn,Mn={}):[Mn,Un,...Tn]=Tn,Dn=new br(Un,Tn,Mn,this.jobDefaults,this.rejectOnDrop,this.Events,this._states,this.Promise),this._receive(Dn),Dn.promise}wrap(Tn){var Dn,Mn;return Dn=this.schedule.bind(this),Mn=function(...Un){return Dn(Tn.bind(this),...Un)},Mn.withOptions=function(Un,...Hn){return Dn(Un,Tn,...Hn)},Mn}async updateSettings(Tn={}){return await this._store.__updateSettings__(dr.overwrite(Tn,this.storeDefaults)),dr.overwrite(Tn,this.instanceDefaults,this),this}currentReservoir(){return this._store.__currentReservoir__()}incrementReservoir(Tn=0){return this._store.__incrementReservoir__(Tn)}}return Kn.default=Kn,Kn.Events=ur,Kn.version=Kn.prototype.version=cr.version,Kn.strategy=Kn.prototype.strategy={LEAK:1,OVERFLOW:2,OVERFLOW_PRIORITY:4,BLOCK:3},Kn.BottleneckError=Kn.prototype.BottleneckError=mn,Kn.Group=Kn.prototype.Group=Fn,Kn.RedisConnection=Kn.prototype.RedisConnection=Gn,Kn.IORedisConnection=Kn.prototype.IORedisConnection=zn,Kn.Batcher=Kn.prototype.Batcher=tr,Kn.prototype.jobDefaults={priority:nr,weight:1,expiration:null,id:"<no-id>"},Kn.prototype.storeDefaults={maxConcurrent:null,minTime:0,highWater:null,strategy:Kn.prototype.strategy.LEAK,penalty:null,reservoir:null,reservoirRefreshInterval:null,reservoirRefreshAmount:null,reservoirIncreaseInterval:null,reservoirIncreaseAmount:null,reservoirIncreaseMaximum:null},Kn.prototype.localStoreDefaults={Promise,timeout:null,heartbeatInterval:250},Kn.prototype.redisStoreDefaults={Promise,timeout:null,heartbeatInterval:5e3,clientTimeout:1e4,Redis:null,clientOptions:{},clusterNodes:null,clearDatastore:!1,connection:null},Kn.prototype.instanceDefaults={datastore:"local",connection:null,id:"<no-id>",rejectOnDrop:!0,trackDoneStatus:!1,Promise},Kn.prototype.stopDefaults={enqueueErrorMessage:"This limiter has been stopped and cannot accept new jobs.",dropWaitingJobs:!0,dropErrorMessage:"This limiter has been stopped."},Kn}).call(Ot);var $r=hr,Lr=$r;return Lr})})(light);var lightExports=light.exports;const BottleneckLight=getDefaultExportFromCjs(lightExports);async function errorRequest(Nt,s,Ot,en){if(!Ot.request||!Ot.request.request)throw Ot;if(Ot.status>=400&&!Nt.doNotRetry.includes(Ot.status)){const tn=en.request.retries!=null?en.request.retries:Nt.retries,nn=Math.pow((en.request.retryCount||0)+1,2);throw s.retry.retryRequest(Ot,tn,nn)}throw Ot}async function wrapRequest$1(Nt,s,Ot,en){const tn=new BottleneckLight;return tn.on("failed",function(nn,rn){const on=~~nn.request.request.retries,sn=~~nn.request.request.retryAfter;if(en.request.retryCount=rn.retryCount+1,on>rn.retryCount)return sn*Nt.retryAfterBaseValue}),tn.schedule(requestWithGraphqlErrorHandling.bind(null,Nt,s,Ot),en)}async function requestWithGraphqlErrorHandling(Nt,s,Ot,en){const tn=await Ot(Ot,en);if(tn.data&&tn.data.errors&&/Something went wrong while executing your query/.test(tn.data.errors[0].message)){const nn=new RequestError(tn.data.errors[0].message,500,{request:en,response:tn});return errorRequest(Nt,s,nn,en)}return tn}var VERSION$8="6.0.1";function retry(Nt,s){const Ot=Object.assign({enabled:!0,retryAfterBaseValue:1e3,doNotRetry:[400,401,403,404,422,451],retries:3},s.retry);return Ot.enabled&&(Nt.hook.error("request",errorRequest.bind(null,Ot,Nt)),Nt.hook.wrap("request",wrapRequest$1.bind(null,Ot,Nt))),{retry:{retryRequest:(en,tn,nn)=>(en.request.request=Object.assign({},en.request.request,{retries:tn,retryAfter:nn}),en)}}}retry.VERSION=VERSION$8;var VERSION$7="8.2.0",noop=()=>Promise.resolve();function wrapRequest(Nt,s,Ot){return Nt.retryLimiter.schedule(doRequest,Nt,s,Ot)}async function doRequest(Nt,s,Ot){const en=Ot.method!=="GET"&&Ot.method!=="HEAD",{pathname:tn}=new URL(Ot.url,"http://github.test"),nn=Ot.method==="GET"&&tn.startsWith("/search/"),rn=tn.startsWith("/graphql"),sn=~~s.retryCount>0?{priority:0,weight:0}:{};Nt.clustering&&(sn.expiration=1e3*60),(en||rn)&&await Nt.write.key(Nt.id).schedule(sn,noop),en&&Nt.triggersNotification(tn)&&await Nt.notifications.key(Nt.id).schedule(sn,noop),nn&&await Nt.search.key(Nt.id).schedule(sn,noop);const an=Nt.global.key(Nt.id).schedule(sn,s,Ot);if(rn){const ln=await an;if(ln.data.errors!=null&&ln.data.errors.some(cn=>cn.type==="RATE_LIMITED"))throw Object.assign(new Error("GraphQL Rate Limit Exceeded"),{response:ln,data:ln.data})}return an}var triggers_notification_paths_default=["/orgs/{org}/invitations","/orgs/{org}/invitations/{invitation_id}","/orgs/{org}/teams/{team_slug}/discussions","/orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments","/repos/{owner}/{repo}/collaborators/{username}","/repos/{owner}/{repo}/commits/{commit_sha}/comments","/repos/{owner}/{repo}/issues","/repos/{owner}/{repo}/issues/{issue_number}/comments","/repos/{owner}/{repo}/pulls","/repos/{owner}/{repo}/pulls/{pull_number}/comments","/repos/{owner}/{repo}/pulls/{pull_number}/comments/{comment_id}/replies","/repos/{owner}/{repo}/pulls/{pull_number}/merge","/repos/{owner}/{repo}/pulls/{pull_number}/requested_reviewers","/repos/{owner}/{repo}/pulls/{pull_number}/reviews","/repos/{owner}/{repo}/releases","/teams/{team_id}/discussions","/teams/{team_id}/discussions/{discussion_number}/comments"];function routeMatcher(Nt){const Ot=`^(?:${Nt.map(en=>en.split("/").map(tn=>tn.startsWith("{")?"(?:.+?)":tn).join("/")).map(en=>`(?:${en})`).join("|")})[^/]*$`;return new RegExp(Ot,"i")}var regex=routeMatcher(triggers_notification_paths_default),triggersNotification=regex.test.bind(regex),groups={},createGroups=function(Nt,s){groups.global=new Nt.Group({id:"octokit-global",maxConcurrent:10,...s}),groups.search=new Nt.Group({id:"octokit-search",maxConcurrent:1,minTime:2e3,...s}),groups.write=new Nt.Group({id:"octokit-write",maxConcurrent:1,minTime:1e3,...s}),groups.notifications=new Nt.Group({id:"octokit-notifications",maxConcurrent:1,minTime:3e3,...s})};function throttling(Nt,s){const{enabled:Ot=!0,Bottleneck:en=BottleneckLight,id:tn="no-id",timeout:nn=1e3*60*2,connection:rn}=s.throttle||{};if(!Ot)return{};const on={connection:rn,timeout:nn};groups.global==null&&createGroups(en,on);const sn=Object.assign({clustering:rn!=null,triggersNotification,fallbackSecondaryRateRetryAfter:60,retryAfterBaseValue:1e3,retryLimiter:new en,id:tn,...groups},s.throttle);if(typeof sn.onSecondaryRateLimit!="function"||typeof sn.onRateLimit!="function")throw new Error(`octokit/plugin-throttling error:
        You must pass the onSecondaryRateLimit and onRateLimit error handlers.
        See https://octokit.github.io/rest.js/#throttling

        const octokit = new Octokit({
          throttle: {
            onSecondaryRateLimit: (retryAfter, options) => {/* ... */},
            onRateLimit: (retryAfter, options) => {/* ... */}
          }
        })
    `);const an={},ln=new en.Events(an);return an.on("secondary-limit",sn.onSecondaryRateLimit),an.on("rate-limit",sn.onRateLimit),an.on("error",cn=>Nt.log.warn("Error in throttling-plugin limit handler",cn)),sn.retryLimiter.on("failed",async function(cn,un){const[dn,hn,fn]=un.args,{pathname:mn}=new URL(fn.url,"http://github.test");if(!(mn.startsWith("/graphql")&&cn.status!==401||cn.status===403))return;const pn=~~hn.retryCount;hn.retryCount=pn,fn.request.retryCount=pn;const{wantRetry:_n,retryAfter:vn=0}=await async function(){var bn;if(/\bsecondary rate\b/i.test(cn.message)){const wn=Number(cn.response.headers["retry-after"])||dn.fallbackSecondaryRateRetryAfter;return{wantRetry:await ln.trigger("secondary-limit",wn,fn,Nt,pn),retryAfter:wn}}if(cn.response.headers!=null&&cn.response.headers["x-ratelimit-remaining"]==="0"||(((bn=cn.response.data)==null?void 0:bn.errors)??[]).some(wn=>wn.type==="RATE_LIMITED")){const wn=new Date(~~cn.response.headers["x-ratelimit-reset"]*1e3).getTime(),Sn=Math.max(Math.ceil((wn-Date.now())/1e3)+1,0);return{wantRetry:await ln.trigger("rate-limit",Sn,fn,Nt,pn),retryAfter:Sn}}return{}}();if(_n)return hn.retryCount++,vn*dn.retryAfterBaseValue}),Nt.hook.wrap("request",wrapRequest.bind(null,sn)),{}}throttling.VERSION=VERSION$7;throttling.triggersNotification=triggersNotification;const require$$2=getAugmentedNamespace(distWeb$4);var btoaBrowser=function Nt(s){return btoa(s)};const btoa2=getDefaultExportFromCjs(btoaBrowser),VERSION$6="4.0.1";function oauthAuthorizationUrl(Nt){const s=Nt.clientType||"oauth-app",Ot=Nt.baseUrl||"https://github.com",en={clientType:s,allowSignup:Nt.allowSignup!==!1,clientId:Nt.clientId,login:Nt.login||null,redirectUrl:Nt.redirectUrl||null,state:Nt.state||Math.random().toString(36).substr(2),url:""};if(s==="oauth-app"){const tn="scopes"in Nt?Nt.scopes:[];en.scopes=typeof tn=="string"?tn.split(/[,\s]+/).filter(Boolean):tn}return en.url=urlBuilderAuthorize(`${Ot}/login/oauth/authorize`,en),en}function urlBuilderAuthorize(Nt,s){const Ot={allowSignup:"allow_signup",clientId:"client_id",login:"login",redirectUrl:"redirect_uri",scopes:"scope",state:"state"};let en=Nt;return Object.keys(Ot).filter(tn=>s[tn]!==null).filter(tn=>tn!=="scopes"?!0:s.clientType==="github-app"?!1:!Array.isArray(s[tn])||s[tn].length>0).map(tn=>[Ot[tn],`${s[tn]}`]).forEach(([tn,nn],rn)=>{en+=rn===0?"?":"&",en+=`${tn}=${encodeURIComponent(nn)}`}),en}function requestToOAuthBaseUrl(Nt){const s=Nt.endpoint.DEFAULTS;return/^https:\/\/(api\.)?github\.com$/.test(s.baseUrl)?"https://github.com":s.baseUrl.replace("/api/v3","")}async function oauthRequest(Nt,s,Ot){const en={baseUrl:requestToOAuthBaseUrl(Nt),headers:{accept:"application/json"},...Ot},tn=await Nt(s,en);if("error"in tn.data){const nn=new RequestError(`${tn.data.error_description} (${tn.data.error}, ${tn.data.error_uri})`,400,{request:Nt.endpoint.merge(s,en),headers:tn.headers});throw nn.response=tn,nn}return tn}function getWebFlowAuthorizationUrl({request:Nt=request,...s}){const Ot=requestToOAuthBaseUrl(Nt);return oauthAuthorizationUrl({...s,baseUrl:Ot})}async function exchangeWebFlowCode(Nt){const s=Nt.request||request,Ot=await oauthRequest(s,"POST /login/oauth/access_token",{client_id:Nt.clientId,client_secret:Nt.clientSecret,code:Nt.code,redirect_uri:Nt.redirectUrl}),en={clientType:Nt.clientType,clientId:Nt.clientId,clientSecret:Nt.clientSecret,token:Ot.data.access_token,scopes:Ot.data.scope.split(/\s+/).filter(Boolean)};if(Nt.clientType==="github-app"){if("refresh_token"in Ot.data){const tn=new Date(Ot.headers.date).getTime();en.refreshToken=Ot.data.refresh_token,en.expiresAt=toTimestamp$2(tn,Ot.data.expires_in),en.refreshTokenExpiresAt=toTimestamp$2(tn,Ot.data.refresh_token_expires_in)}delete en.scopes}return{...Ot,authentication:en}}function toTimestamp$2(Nt,s){return new Date(Nt+s*1e3).toISOString()}async function createDeviceCode(Nt){const s=Nt.request||request,Ot={client_id:Nt.clientId};return"scopes"in Nt&&Array.isArray(Nt.scopes)&&(Ot.scope=Nt.scopes.join(" ")),oauthRequest(s,"POST /login/device/code",Ot)}async function exchangeDeviceCode(Nt){const s=Nt.request||request,Ot=await oauthRequest(s,"POST /login/oauth/access_token",{client_id:Nt.clientId,device_code:Nt.code,grant_type:"urn:ietf:params:oauth:grant-type:device_code"}),en={clientType:Nt.clientType,clientId:Nt.clientId,token:Ot.data.access_token,scopes:Ot.data.scope.split(/\s+/).filter(Boolean)};if("clientSecret"in Nt&&(en.clientSecret=Nt.clientSecret),Nt.clientType==="github-app"){if("refresh_token"in Ot.data){const tn=new Date(Ot.headers.date).getTime();en.refreshToken=Ot.data.refresh_token,en.expiresAt=toTimestamp$1(tn,Ot.data.expires_in),en.refreshTokenExpiresAt=toTimestamp$1(tn,Ot.data.refresh_token_expires_in)}delete en.scopes}return{...Ot,authentication:en}}function toTimestamp$1(Nt,s){return new Date(Nt+s*1e3).toISOString()}async function checkToken(Nt){const Ot=await(Nt.request||request)("POST /applications/{client_id}/token",{headers:{authorization:`basic ${btoa2(`${Nt.clientId}:${Nt.clientSecret}`)}`},client_id:Nt.clientId,access_token:Nt.token}),en={clientType:Nt.clientType,clientId:Nt.clientId,clientSecret:Nt.clientSecret,token:Nt.token,scopes:Ot.data.scopes};return Ot.data.expires_at&&(en.expiresAt=Ot.data.expires_at),Nt.clientType==="github-app"&&delete en.scopes,{...Ot,authentication:en}}async function refreshToken(Nt){const s=Nt.request||request,Ot=await oauthRequest(s,"POST /login/oauth/access_token",{client_id:Nt.clientId,client_secret:Nt.clientSecret,grant_type:"refresh_token",refresh_token:Nt.refreshToken}),en=new Date(Ot.headers.date).getTime(),tn={clientType:"github-app",clientId:Nt.clientId,clientSecret:Nt.clientSecret,token:Ot.data.access_token,refreshToken:Ot.data.refresh_token,expiresAt:toTimestamp(en,Ot.data.expires_in),refreshTokenExpiresAt:toTimestamp(en,Ot.data.refresh_token_expires_in)};return{...Ot,authentication:tn}}function toTimestamp(Nt,s){return new Date(Nt+s*1e3).toISOString()}async function scopeToken(Nt){const{request:s,clientType:Ot,clientId:en,clientSecret:tn,token:nn,...rn}=Nt,sn=await(s||request)("POST /applications/{client_id}/token/scoped",{headers:{authorization:`basic ${btoa2(`${en}:${tn}`)}`},client_id:en,access_token:nn,...rn}),an=Object.assign({clientType:Ot,clientId:en,clientSecret:tn,token:sn.data.token},sn.data.expires_at?{expiresAt:sn.data.expires_at}:{});return{...sn,authentication:an}}async function resetToken(Nt){const s=Nt.request||request,Ot=btoa2(`${Nt.clientId}:${Nt.clientSecret}`),en=await s("PATCH /applications/{client_id}/token",{headers:{authorization:`basic ${Ot}`},client_id:Nt.clientId,access_token:Nt.token}),tn={clientType:Nt.clientType,clientId:Nt.clientId,clientSecret:Nt.clientSecret,token:en.data.token,scopes:en.data.scopes};return en.data.expires_at&&(tn.expiresAt=en.data.expires_at),Nt.clientType==="github-app"&&delete tn.scopes,{...en,authentication:tn}}async function deleteToken(Nt){const s=Nt.request||request,Ot=btoa2(`${Nt.clientId}:${Nt.clientSecret}`);return s("DELETE /applications/{client_id}/token",{headers:{authorization:`basic ${Ot}`},client_id:Nt.clientId,access_token:Nt.token})}async function deleteAuthorization(Nt){const s=Nt.request||request,Ot=btoa2(`${Nt.clientId}:${Nt.clientSecret}`);return s("DELETE /applications/{client_id}/grant",{headers:{authorization:`basic ${Ot}`},client_id:Nt.clientId,access_token:Nt.token})}const distSrc=Object.freeze(Object.defineProperty({__proto__:null,VERSION:VERSION$6,checkToken,createDeviceCode,deleteAuthorization,deleteToken,exchangeDeviceCode,exchangeWebFlowCode,getWebFlowAuthorizationUrl,refreshToken,resetToken,scopeToken},Symbol.toStringTag,{value:"Module"}));async function getOAuthAccessToken(Nt,s){const Ot=getCachedAuthentication(Nt,s.auth);if(Ot)return Ot;const{data:en}=await createDeviceCode({clientType:Nt.clientType,clientId:Nt.clientId,request:s.request||Nt.request,scopes:s.auth.scopes||Nt.scopes});await Nt.onVerification(en);const tn=await waitForAccessToken(s.request||Nt.request,Nt.clientId,Nt.clientType,en);return Nt.authentication=tn,tn}function getCachedAuthentication(Nt,s){if(s.refresh===!0||!Nt.authentication)return!1;if(Nt.clientType==="github-app")return Nt.authentication;const Ot=Nt.authentication,en=("scopes"in s&&s.scopes||Nt.scopes).join(" "),tn=Ot.scopes.join(" ");return en===tn?Ot:!1}async function wait(Nt){await new Promise(s=>setTimeout(s,Nt*1e3))}async function waitForAccessToken(Nt,s,Ot,en){try{const tn={clientId:s,request:Nt,code:en.device_code},{authentication:nn}=Ot==="oauth-app"?await exchangeDeviceCode({...tn,clientType:"oauth-app"}):await exchangeDeviceCode({...tn,clientType:"github-app"});return{type:"token",tokenType:"oauth",...nn}}catch(tn){if(!tn.response)throw tn;const nn=tn.response.data.error;if(nn==="authorization_pending")return await wait(en.interval),waitForAccessToken(Nt,s,Ot,en);if(nn==="slow_down")return await wait(en.interval+5),waitForAccessToken(Nt,s,Ot,en);throw tn}}async function auth$3(Nt,s){return getOAuthAccessToken(Nt,{auth:s})}async function hook$3(Nt,s,Ot,en){let tn=s.endpoint.merge(Ot,en);if(/\/login\/(oauth\/access_token|device\/code)$/.test(tn.url))return s(tn);const{token:nn}=await getOAuthAccessToken(Nt,{request:s,auth:{type:"oauth"}});return tn.headers.authorization=`token ${nn}`,s(tn)}var VERSION$5="6.0.1";function createOAuthDeviceAuth(Nt){const s=Nt.request||request.defaults({headers:{"user-agent":`octokit-auth-oauth-device.js/${VERSION$5} ${getUserAgent()}`}}),{request:Ot=s,...en}=Nt,tn=Nt.clientType==="github-app"?{...en,clientType:"github-app",request:Ot}:{...en,clientType:"oauth-app",request:Ot,scopes:Nt.scopes||[]};if(!Nt.clientId)throw new Error('[@octokit/auth-oauth-device] "clientId" option must be set (https://github.com/octokit/auth-oauth-device.js#usage)');if(!Nt.onVerification)throw new Error('[@octokit/auth-oauth-device] "onVerification" option must be a function (https://github.com/octokit/auth-oauth-device.js#usage)');return Object.assign(auth$3.bind(null,tn),{hook:hook$3.bind(null,tn)})}var VERSION$4="4.0.1";async function getAuthentication(Nt){if("code"in Nt.strategyOptions){const{authentication:s}=await exchangeWebFlowCode({clientId:Nt.clientId,clientSecret:Nt.clientSecret,clientType:Nt.clientType,onTokenCreated:Nt.onTokenCreated,...Nt.strategyOptions,request:Nt.request});return{type:"token",tokenType:"oauth",...s}}if("onVerification"in Nt.strategyOptions){const Ot=await createOAuthDeviceAuth({clientType:Nt.clientType,clientId:Nt.clientId,onTokenCreated:Nt.onTokenCreated,...Nt.strategyOptions,request:Nt.request})({type:"oauth"});return{clientSecret:Nt.clientSecret,...Ot}}if("token"in Nt.strategyOptions)return{type:"token",tokenType:"oauth",clientId:Nt.clientId,clientSecret:Nt.clientSecret,clientType:Nt.clientType,onTokenCreated:Nt.onTokenCreated,...Nt.strategyOptions};throw new Error("[@octokit/auth-oauth-user] Invalid strategy options")}async function auth$2(Nt,s={}){var en,tn;if(Nt.authentication||(Nt.authentication=Nt.clientType==="oauth-app"?await getAuthentication(Nt):await getAuthentication(Nt)),Nt.authentication.invalid)throw new Error("[@octokit/auth-oauth-user] Token is invalid");const Ot=Nt.authentication;if("expiresAt"in Ot&&(s.type==="refresh"||new Date(Ot.expiresAt)<new Date)){const{authentication:nn}=await refreshToken({clientType:"github-app",clientId:Nt.clientId,clientSecret:Nt.clientSecret,refreshToken:Ot.refreshToken,request:Nt.request});Nt.authentication={tokenType:"oauth",type:"token",...nn}}if(s.type==="refresh"){if(Nt.clientType==="oauth-app")throw new Error("[@octokit/auth-oauth-user] OAuth Apps do not support expiring tokens");if(!Ot.hasOwnProperty("expiresAt"))throw new Error("[@octokit/auth-oauth-user] Refresh token missing");await((en=Nt.onTokenCreated)==null?void 0:en.call(Nt,Nt.authentication,{type:s.type}))}if(s.type==="check"||s.type==="reset"){const nn=s.type==="check"?checkToken:resetToken;try{const{authentication:rn}=await nn({clientType:Nt.clientType,clientId:Nt.clientId,clientSecret:Nt.clientSecret,token:Nt.authentication.token,request:Nt.request});return Nt.authentication={tokenType:"oauth",type:"token",...rn},s.type==="reset"&&await((tn=Nt.onTokenCreated)==null?void 0:tn.call(Nt,Nt.authentication,{type:s.type})),Nt.authentication}catch(rn){throw rn.status===404&&(rn.message="[@octokit/auth-oauth-user] Token is invalid",Nt.authentication.invalid=!0),rn}}if(s.type==="delete"||s.type==="deleteAuthorization"){const nn=s.type==="delete"?deleteToken:deleteAuthorization;try{await nn({clientType:Nt.clientType,clientId:Nt.clientId,clientSecret:Nt.clientSecret,token:Nt.authentication.token,request:Nt.request})}catch(rn){if(rn.status!==404)throw rn}return Nt.authentication.invalid=!0,Nt.authentication}return Nt.authentication}var ROUTES_REQUIRING_BASIC_AUTH=/\/applications\/[^/]+\/(token|grant)s?/;function requiresBasicAuth(Nt){return Nt&&ROUTES_REQUIRING_BASIC_AUTH.test(Nt)}async function hook$2(Nt,s,Ot,en={}){const tn=s.endpoint.merge(Ot,en);if(/\/login\/(oauth\/access_token|device\/code)$/.test(tn.url))return s(tn);if(requiresBasicAuth(tn.url)){const rn=btoa2(`${Nt.clientId}:${Nt.clientSecret}`);return tn.headers.authorization=`basic ${rn}`,s(tn)}const{token:nn}=Nt.clientType==="oauth-app"?await auth$2({...Nt,request:s}):await auth$2({...Nt,request:s});return tn.headers.authorization="token "+nn,s(tn)}function createOAuthUserAuth({clientId:Nt,clientSecret:s,clientType:Ot="oauth-app",request:en=request.defaults({headers:{"user-agent":`octokit-auth-oauth-app.js/${VERSION$4} ${getUserAgent()}`}}),onTokenCreated:tn,...nn}){const rn=Object.assign({clientType:Ot,clientId:Nt,clientSecret:s,onTokenCreated:tn,strategyOptions:nn,request:en});return Object.assign(auth$2.bind(null,rn),{hook:hook$2.bind(null,rn)})}createOAuthUserAuth.VERSION=VERSION$4;const distWeb$2=Object.freeze(Object.defineProperty({__proto__:null,createOAuthUserAuth,requiresBasicAuth},Symbol.toStringTag,{value:"Module"}));async function auth$1(Nt,s){if(s.type==="oauth-app")return{type:"oauth-app",clientId:Nt.clientId,clientSecret:Nt.clientSecret,clientType:Nt.clientType,headers:{authorization:`basic ${btoa2(`${Nt.clientId}:${Nt.clientSecret}`)}`}};if("factory"in s){const{type:tn,...nn}={...s,...Nt};return s.factory(nn)}const Ot={clientId:Nt.clientId,clientSecret:Nt.clientSecret,request:Nt.request,...s};return(Nt.clientType==="oauth-app"?await createOAuthUserAuth({...Ot,clientType:Nt.clientType}):await createOAuthUserAuth({...Ot,clientType:Nt.clientType}))()}async function hook$1(Nt,s,Ot,en){let tn=s.endpoint.merge(Ot,en);if(/\/login\/(oauth\/access_token|device\/code)$/.test(tn.url))return s(tn);if(Nt.clientType==="github-app"&&!requiresBasicAuth(tn.url))throw new Error(`[@octokit/auth-oauth-app] GitHub Apps cannot use their client ID/secret for basic authentication for endpoints other than "/applications/{client_id}/**". "${tn.method} ${tn.url}" is not supported.`);const nn=btoa2(`${Nt.clientId}:${Nt.clientSecret}`);tn.headers.authorization=`basic ${nn}`;try{return await s(tn)}catch(rn){throw rn.status!==401||(rn.message=`[@octokit/auth-oauth-app] "${tn.method} ${tn.url}" does not support clientId/clientSecret basic authentication.`),rn}}var VERSION$3="7.0.1";function createOAuthAppAuth(Nt){const s=Object.assign({request:request.defaults({headers:{"user-agent":`octokit-auth-oauth-app.js/${VERSION$3} ${getUserAgent()}`}}),clientType:"oauth-app"},Nt);return Object.assign(auth$1.bind(null,s),{hook:hook$1.bind(null,s)})}const distWeb$1=Object.freeze(Object.defineProperty({__proto__:null,createOAuthAppAuth,createOAuthUserAuth},Symbol.toStringTag,{value:"Module"})),require$$0=getAugmentedNamespace(distWeb$1),require$$3=getAugmentedNamespace(distWeb$2),require$$1$1=getAugmentedNamespace(distWeb$3),require$$4=getAugmentedNamespace(distSrc);async function auth(Nt){return{type:"unauthenticated",reason:Nt}}function isRateLimitError(Nt){return Nt.status!==403||!Nt.response?!1:Nt.response.headers["x-ratelimit-remaining"]==="0"}var REGEX_ABUSE_LIMIT_MESSAGE=/\babuse\b/i;function isAbuseLimitError(Nt){return Nt.status!==403?!1:REGEX_ABUSE_LIMIT_MESSAGE.test(Nt.message)}async function hook(Nt,s,Ot,en){const tn=s.endpoint.merge(Ot,en);return s(tn).catch(nn=>{throw nn.status===404?(nn.message=`Not found. May be due to lack of authentication. Reason: ${Nt}`,nn):isRateLimitError(nn)?(nn.message=`API rate limit exceeded. This maybe caused by the lack of authentication. Reason: ${Nt}`,nn):isAbuseLimitError(nn)?(nn.message=`You have triggered an abuse detection mechanism. This maybe caused by the lack of authentication. Reason: ${Nt}`,nn):nn.status===401?(nn.message=`Unauthorized. "${tn.method} ${tn.url}" failed most likely due to lack of authentication. Reason: ${Nt}`,nn):(nn.status>=400&&nn.status<500&&(nn.message=nn.message.replace(/\.?$/,`. May be caused by lack of authentication (${Nt}).`)),nn)})}var createUnauthenticatedAuth=function Nt(s){if(!s||!s.reason)throw new Error("[@octokit/auth-unauthenticated] No reason passed to createUnauthenticatedAuth");return Object.assign(auth.bind(null,s.reason),{hook:hook.bind(null,s.reason)})};const distWeb=Object.freeze(Object.defineProperty({__proto__:null,createUnauthenticatedAuth},Symbol.toStringTag,{value:"Module"})),require$$5=getAugmentedNamespace(distWeb);var __create=Object.create,__defProp=Object.defineProperty,__getOwnPropDesc=Object.getOwnPropertyDescriptor,__getOwnPropNames=Object.getOwnPropertyNames,__getProtoOf=Object.getPrototypeOf,__hasOwnProp=Object.prototype.hasOwnProperty,__export=(Nt,s)=>{for(var Ot in s)__defProp(Nt,Ot,{get:s[Ot],enumerable:!0})},__copyProps=(Nt,s,Ot,en)=>{if(s&&typeof s=="object"||typeof s=="function")for(let tn of __getOwnPropNames(s))!__hasOwnProp.call(Nt,tn)&&tn!==Ot&&__defProp(Nt,tn,{get:()=>s[tn],enumerable:!(en=__getOwnPropDesc(s,tn))||en.enumerable});return Nt},__toESM=(Nt,s,Ot)=>(Ot=Nt!=null?__create(__getProtoOf(Nt)):{},__copyProps(s||!Nt||!Nt.__esModule?__defProp(Ot,"default",{value:Nt,enumerable:!0}):Ot,Nt)),__toCommonJS=Nt=>__copyProps(__defProp({},"__esModule",{value:!0}),Nt),dist_src_exports={};__export(dist_src_exports,{OAuthApp:()=>OAuthApp,createAWSLambdaAPIGatewayV2Handler:()=>createAWSLambdaAPIGatewayV2Handler,createNodeMiddleware:()=>createNodeMiddleware,createWebWorkerHandler:()=>createWebWorkerHandler,handleRequest:()=>handleRequest,sendNodeResponse:()=>sendResponse,unknownRouteResponse:()=>unknownRouteResponse});var distNode=__toCommonJS(dist_src_exports),import_auth_oauth_app=require$$0,VERSION$2="6.1.0";function addEventHandler(Nt,s,Ot){if(Array.isArray(s)){for(const en of s)addEventHandler(Nt,en,Ot);return}Nt.eventHandlers[s]||(Nt.eventHandlers[s]=[]),Nt.eventHandlers[s].push(Ot)}var import_core=require$$1$1,import_universal_user_agent=require$$2,OAuthAppOctokit=import_core.Octokit.defaults({userAgent:`octokit-oauth-app.js/${VERSION$2} ${(0,import_universal_user_agent.getUserAgent)()}`}),import_auth_oauth_user=require$$3;async function emitEvent(Nt,s){const{name:Ot,action:en}=s;if(Nt.eventHandlers[`${Ot}.${en}`])for(const tn of Nt.eventHandlers[`${Ot}.${en}`])await tn(s);if(Nt.eventHandlers[Ot])for(const tn of Nt.eventHandlers[Ot])await tn(s)}async function getUserOctokitWithState(Nt,s){return Nt.octokit.auth({type:"oauth-user",...s,async factory(Ot){const en=new Nt.Octokit({authStrategy:import_auth_oauth_user.createOAuthUserAuth,auth:Ot}),tn=await en.auth({type:"get"});return await emitEvent(Nt,{name:"token",action:"created",token:tn.token,scopes:tn.scopes,authentication:tn,octokit:en}),en}})}var OAuthMethods=__toESM(require$$4);function getWebFlowAuthorizationUrlWithState(Nt,s){const Ot={clientId:Nt.clientId,request:Nt.octokit.request,...s,allowSignup:Nt.allowSignup??s.allowSignup,redirectUrl:s.redirectUrl??Nt.redirectUrl,scopes:s.scopes??Nt.defaultScopes};return OAuthMethods.getWebFlowAuthorizationUrl({clientType:Nt.clientType,...Ot})}var OAuthAppAuth=__toESM(require$$0);async function createTokenWithState(Nt,s){const Ot=await Nt.octokit.auth({type:"oauth-user",...s});return await emitEvent(Nt,{name:"token",action:"created",token:Ot.token,scopes:Ot.scopes,authentication:Ot,octokit:new Nt.Octokit({authStrategy:OAuthAppAuth.createOAuthUserAuth,auth:{clientType:Nt.clientType,clientId:Nt.clientId,clientSecret:Nt.clientSecret,token:Ot.token,scopes:Ot.scopes,refreshToken:Ot.refreshToken,expiresAt:Ot.expiresAt,refreshTokenExpiresAt:Ot.refreshTokenExpiresAt}})}),{authentication:Ot}}var OAuthMethods2=__toESM(require$$4);async function checkTokenWithState(Nt,s){const Ot=await OAuthMethods2.checkToken({clientType:Nt.clientType,clientId:Nt.clientId,clientSecret:Nt.clientSecret,request:Nt.octokit.request,...s});return Object.assign(Ot.authentication,{type:"token",tokenType:"oauth"}),Ot}var OAuthMethods3=__toESM(require$$4),import_auth_oauth_user2=require$$3;async function resetTokenWithState(Nt,s){const Ot={clientId:Nt.clientId,clientSecret:Nt.clientSecret,request:Nt.octokit.request,...s};if(Nt.clientType==="oauth-app"){const nn=await OAuthMethods3.resetToken({clientType:"oauth-app",...Ot}),rn=Object.assign(nn.authentication,{type:"token",tokenType:"oauth"});return await emitEvent(Nt,{name:"token",action:"reset",token:nn.authentication.token,scopes:nn.authentication.scopes||void 0,authentication:rn,octokit:new Nt.Octokit({authStrategy:import_auth_oauth_user2.createOAuthUserAuth,auth:{clientType:Nt.clientType,clientId:Nt.clientId,clientSecret:Nt.clientSecret,token:nn.authentication.token,scopes:nn.authentication.scopes}})}),{...nn,authentication:rn}}const en=await OAuthMethods3.resetToken({clientType:"github-app",...Ot}),tn=Object.assign(en.authentication,{type:"token",tokenType:"oauth"});return await emitEvent(Nt,{name:"token",action:"reset",token:en.authentication.token,authentication:tn,octokit:new Nt.Octokit({authStrategy:import_auth_oauth_user2.createOAuthUserAuth,auth:{clientType:Nt.clientType,clientId:Nt.clientId,clientSecret:Nt.clientSecret,token:en.authentication.token}})}),{...en,authentication:tn}}var OAuthMethods4=__toESM(require$$4),import_auth_oauth_user3=require$$3;async function refreshTokenWithState(Nt,s){if(Nt.clientType==="oauth-app")throw new Error("[@octokit/oauth-app] app.refreshToken() is not supported for OAuth Apps");const Ot=await OAuthMethods4.refreshToken({clientType:"github-app",clientId:Nt.clientId,clientSecret:Nt.clientSecret,request:Nt.octokit.request,refreshToken:s.refreshToken}),en=Object.assign(Ot.authentication,{type:"token",tokenType:"oauth"});return await emitEvent(Nt,{name:"token",action:"refreshed",token:Ot.authentication.token,authentication:en,octokit:new Nt.Octokit({authStrategy:import_auth_oauth_user3.createOAuthUserAuth,auth:{clientType:Nt.clientType,clientId:Nt.clientId,clientSecret:Nt.clientSecret,token:Ot.authentication.token}})}),{...Ot,authentication:en}}var OAuthMethods5=__toESM(require$$4),import_auth_oauth_user4=require$$3;async function scopeTokenWithState(Nt,s){if(Nt.clientType==="oauth-app")throw new Error("[@octokit/oauth-app] app.scopeToken() is not supported for OAuth Apps");const Ot=await OAuthMethods5.scopeToken({clientType:"github-app",clientId:Nt.clientId,clientSecret:Nt.clientSecret,request:Nt.octokit.request,...s}),en=Object.assign(Ot.authentication,{type:"token",tokenType:"oauth"});return await emitEvent(Nt,{name:"token",action:"scoped",token:Ot.authentication.token,authentication:en,octokit:new Nt.Octokit({authStrategy:import_auth_oauth_user4.createOAuthUserAuth,auth:{clientType:Nt.clientType,clientId:Nt.clientId,clientSecret:Nt.clientSecret,token:Ot.authentication.token}})}),{...Ot,authentication:en}}var OAuthMethods6=__toESM(require$$4),import_auth_unauthenticated=require$$5;async function deleteTokenWithState(Nt,s){const Ot={clientId:Nt.clientId,clientSecret:Nt.clientSecret,request:Nt.octokit.request,...s},en=Nt.clientType==="oauth-app"?await OAuthMethods6.deleteToken({clientType:"oauth-app",...Ot}):await OAuthMethods6.deleteToken({clientType:"github-app",...Ot});return await emitEvent(Nt,{name:"token",action:"deleted",token:s.token,octokit:new Nt.Octokit({authStrategy:import_auth_unauthenticated.createUnauthenticatedAuth,auth:{reason:'Handling "token.deleted" event. The access for the token has been revoked.'}})}),en}var OAuthMethods7=__toESM(require$$4),import_auth_unauthenticated2=require$$5;async function deleteAuthorizationWithState(Nt,s){const Ot={clientId:Nt.clientId,clientSecret:Nt.clientSecret,request:Nt.octokit.request,...s},en=Nt.clientType==="oauth-app"?await OAuthMethods7.deleteAuthorization({clientType:"oauth-app",...Ot}):await OAuthMethods7.deleteAuthorization({clientType:"github-app",...Ot});return await emitEvent(Nt,{name:"token",action:"deleted",token:s.token,octokit:new Nt.Octokit({authStrategy:import_auth_unauthenticated2.createUnauthenticatedAuth,auth:{reason:'Handling "token.deleted" event. The access for the token has been revoked.'}})}),await emitEvent(Nt,{name:"authorization",action:"deleted",token:s.token,octokit:new Nt.Octokit({authStrategy:import_auth_unauthenticated2.createUnauthenticatedAuth,auth:{reason:'Handling "authorization.deleted" event. The access for the app has been revoked.'}})}),en}function unknownRouteResponse(Nt){return{status:404,headers:{"content-type":"application/json"},text:JSON.stringify({error:`Unknown route: ${Nt.method} ${Nt.url}`})}}async function handleRequest(Nt,{pathPrefix:s="/api/github/oauth"},Ot){var ln,cn,un,dn,hn,fn;if(Ot.method==="OPTIONS")return{status:200,headers:{"access-control-allow-origin":"*","access-control-allow-methods":"*","access-control-allow-headers":"Content-Type, User-Agent, Authorization"}};let{pathname:en}=new URL(Ot.url,"http://localhost");if(!en.startsWith(`${s}/`))return;en=en.slice(s.length+1);const tn=[Ot.method,en].join(" "),nn={getLogin:"GET login",getCallback:"GET callback",createToken:"POST token",getToken:"GET token",patchToken:"PATCH token",patchRefreshToken:"PATCH refresh-token",scopeToken:"POST token/scoped",deleteToken:"DELETE token",deleteGrant:"DELETE grant"};if(!Object.values(nn).includes(tn))return unknownRouteResponse(Ot);let rn;try{const mn=await Ot.text();rn=mn?JSON.parse(mn):{}}catch{return{status:400,headers:{"content-type":"application/json","access-control-allow-origin":"*"},text:JSON.stringify({error:"[@octokit/oauth-app] request error"})}}const{searchParams:on}=new URL(Ot.url,"http://localhost"),sn=Object.fromEntries(on),an=Ot.headers;try{if(tn===nn.getLogin){const{url:gn}=Nt.getWebFlowAuthorizationUrl({state:sn.state,scopes:sn.scopes?sn.scopes.split(","):void 0,allowSignup:sn.allowSignup?sn.allowSignup==="true":void 0,redirectUrl:sn.redirectUrl});return{status:302,headers:{location:gn}}}if(tn===nn.getCallback){if(sn.error)throw new Error(`[@octokit/oauth-app] ${sn.error} ${sn.error_description}`);if(!sn.code)throw new Error('[@octokit/oauth-app] "code" parameter is required');const{authentication:{token:gn}}=await Nt.createToken({code:sn.code});return{status:200,headers:{"content-type":"text/html"},text:`<h1>Token created successfully</h1>

<p>Your token is: <strong>${gn}</strong>. Copy it now as it cannot be shown again.</p>`}}if(tn===nn.createToken){const{code:gn,redirectUrl:pn}=rn;if(!gn)throw new Error('[@octokit/oauth-app] "code" parameter is required');const _n=await Nt.createToken({code:gn,redirectUrl:pn});return delete _n.authentication.clientSecret,{status:201,headers:{"content-type":"application/json","access-control-allow-origin":"*"},text:JSON.stringify(_n)}}if(tn===nn.getToken){const gn=(ln=an.authorization)==null?void 0:ln.substr(6);if(!gn)throw new Error('[@octokit/oauth-app] "Authorization" header is required');const pn=await Nt.checkToken({token:gn});return delete pn.authentication.clientSecret,{status:200,headers:{"content-type":"application/json","access-control-allow-origin":"*"},text:JSON.stringify(pn)}}if(tn===nn.patchToken){const gn=(cn=an.authorization)==null?void 0:cn.substr(6);if(!gn)throw new Error('[@octokit/oauth-app] "Authorization" header is required');const pn=await Nt.resetToken({token:gn});return delete pn.authentication.clientSecret,{status:200,headers:{"content-type":"application/json","access-control-allow-origin":"*"},text:JSON.stringify(pn)}}if(tn===nn.patchRefreshToken){if(!((un=an.authorization)==null?void 0:un.substr(6)))throw new Error('[@octokit/oauth-app] "Authorization" header is required');const{refreshToken:pn}=rn;if(!pn)throw new Error("[@octokit/oauth-app] refreshToken must be sent in request body");const _n=await Nt.refreshToken({refreshToken:pn});return delete _n.authentication.clientSecret,{status:200,headers:{"content-type":"application/json","access-control-allow-origin":"*"},text:JSON.stringify(_n)}}if(tn===nn.scopeToken){const gn=(dn=an.authorization)==null?void 0:dn.substr(6);if(!gn)throw new Error('[@octokit/oauth-app] "Authorization" header is required');const pn=await Nt.scopeToken({token:gn,...rn});return delete pn.authentication.clientSecret,{status:200,headers:{"content-type":"application/json","access-control-allow-origin":"*"},text:JSON.stringify(pn)}}if(tn===nn.deleteToken){const gn=(hn=an.authorization)==null?void 0:hn.substr(6);if(!gn)throw new Error('[@octokit/oauth-app] "Authorization" header is required');return await Nt.deleteToken({token:gn}),{status:204,headers:{"access-control-allow-origin":"*"}}}const mn=(fn=an.authorization)==null?void 0:fn.substr(6);if(!mn)throw new Error('[@octokit/oauth-app] "Authorization" header is required');return await Nt.deleteAuthorization({token:mn}),{status:204,headers:{"access-control-allow-origin":"*"}}}catch(mn){return{status:400,headers:{"content-type":"application/json","access-control-allow-origin":"*"},text:JSON.stringify({error:mn.message})}}}function parseRequest(Nt){const{method:s,url:Ot,headers:en}=Nt;async function tn(){return await new Promise((rn,on)=>{let sn=[];Nt.on("error",on).on("data",an=>sn.push(an)).on("end",()=>rn(Buffer.concat(sn).toString()))})}return{method:s,url:Ot,headers:en,text:tn}}function sendResponse(Nt,s){s.writeHead(Nt.status,Nt.headers),s.end(Nt.text)}function createNodeMiddleware(Nt,s={}){return async function(Ot,en,tn){const nn=await parseRequest(Ot),rn=await handleRequest(Nt,s,nn);return rn?(sendResponse(rn,en),!0):(tn==null||tn(),!1)}}function parseRequest2(Nt){const s=Object.fromEntries(Nt.headers.entries());return{method:Nt.method,url:Nt.url,headers:s,text:()=>Nt.text()}}function sendResponse2(Nt){return new Response(Nt.text,{status:Nt.status,headers:Nt.headers})}function createWebWorkerHandler(Nt,s={}){return async function(Ot){const en=await parseRequest2(Ot),tn=await handleRequest(Nt,s,en);return tn?sendResponse2(tn):void 0}}function parseRequest3(Nt){const{method:s}=Nt.requestContext.http;let Ot=Nt.rawPath;const{stage:en}=Nt.requestContext;Ot.startsWith("/"+en)&&(Ot=Ot.substring(en.length+1)),Nt.rawQueryString&&(Ot+="?"+Nt.rawQueryString);const tn=Nt.headers;return{method:s,url:Ot,headers:tn,text:async()=>Nt.body||""}}function sendResponse3(Nt){return{statusCode:Nt.status,headers:Nt.headers,body:Nt.text}}function createAWSLambdaAPIGatewayV2Handler(Nt,s={}){return async function(Ot){const en=parseRequest3(Ot),tn=await handleRequest(Nt,s,en);return tn?sendResponse3(tn):void 0}}var Rr,OAuthApp=(Rr=class{static defaults(s){return class extends this{constructor(...en){super({...s,...en[0]})}}}constructor(s){const Ot=s.Octokit||OAuthAppOctokit;this.type=s.clientType||"oauth-app";const en=new Ot({authStrategy:import_auth_oauth_app.createOAuthAppAuth,auth:{clientType:this.type,clientId:s.clientId,clientSecret:s.clientSecret}}),tn={clientType:this.type,clientId:s.clientId,clientSecret:s.clientSecret,defaultScopes:s.defaultScopes||[],allowSignup:s.allowSignup,baseUrl:s.baseUrl,redirectUrl:s.redirectUrl,log:s.log,Octokit:Ot,octokit:en,eventHandlers:{}};this.on=addEventHandler.bind(null,tn),this.octokit=en,this.getUserOctokit=getUserOctokitWithState.bind(null,tn),this.getWebFlowAuthorizationUrl=getWebFlowAuthorizationUrlWithState.bind(null,tn),this.createToken=createTokenWithState.bind(null,tn),this.checkToken=checkTokenWithState.bind(null,tn),this.resetToken=resetTokenWithState.bind(null,tn),this.refreshToken=refreshTokenWithState.bind(null,tn),this.scopeToken=scopeTokenWithState.bind(null,tn),this.deleteToken=deleteTokenWithState.bind(null,tn),this.deleteAuthorization=deleteAuthorizationWithState.bind(null,tn)}},Rr.VERSION=VERSION$2,Rr);const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$1=getAugmentedNamespace(__viteBrowserExternal$1);var VERSION$1="3.1.2",Octokit=Octokit$1.plugin(restEndpointMethods,paginateRest,paginateGraphql,retry,throttling).defaults({userAgent:`octokit.js/${VERSION$1}`,throttle:{onRateLimit,onSecondaryRateLimit}});function onRateLimit(Nt,s,Ot){if(Ot.log.warn(`Request quota exhausted for request ${s.method} ${s.url}`),s.request.retryCount===0)return Ot.log.info(`Retrying after ${Nt} seconds!`),!0}function onSecondaryRateLimit(Nt,s,Ot){if(Ot.log.warn(`SecondaryRateLimit detected for request ${s.method} ${s.url}`),s.request.retryCount===0)return Ot.log.info(`Retrying after ${Nt} seconds!`),!0}distNode.OAuthApp.defaults({Octokit});var sax$1={};(function(Nt){(function(s){s.parser=function(xn,yn){return new en(xn,yn)},s.SAXParser=en,s.SAXStream=ln,s.createStream=an,s.MAX_BUFFER_LENGTH=64*1024;var Ot=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];s.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"];function en(xn,yn){if(!(this instanceof en))return new en(xn,yn);var Fn=this;nn(Fn),Fn.q=Fn.c="",Fn.bufferCheckPosition=s.MAX_BUFFER_LENGTH,Fn.opt=yn||{},Fn.opt.lowercase=Fn.opt.lowercase||Fn.opt.lowercasetags,Fn.looseCase=Fn.opt.lowercase?"toLowerCase":"toUpperCase",Fn.tags=[],Fn.closed=Fn.closedRoot=Fn.sawRoot=!1,Fn.tag=Fn.error=null,Fn.strict=!!xn,Fn.noscript=!!(xn||Fn.opt.noscript),Fn.state=En.BEGIN,Fn.strictEntities=Fn.opt.strictEntities,Fn.ENTITIES=Fn.strictEntities?Object.create(s.XML_ENTITIES):Object.create(s.ENTITIES),Fn.attribList=[],Fn.opt.xmlns&&(Fn.ns=Object.create(fn)),Fn.trackPosition=Fn.opt.position!==!1,Fn.trackPosition&&(Fn.position=Fn.line=Fn.column=0),An(Fn,"onready")}Object.create||(Object.create=function(xn){function yn(){}yn.prototype=xn;var Fn=new yn;return Fn}),Object.keys||(Object.keys=function(xn){var yn=[];for(var Fn in xn)xn.hasOwnProperty(Fn)&&yn.push(Fn);return yn});function tn(xn){for(var yn=Math.max(s.MAX_BUFFER_LENGTH,10),Fn=0,Cn=0,Yn=Ot.length;Cn<Yn;Cn++){var er=xn[Ot[Cn]].length;if(er>yn)switch(Ot[Cn]){case"textNode":Nn(xn);break;case"cdata":Rn(xn,"oncdata",xn.cdata),xn.cdata="";break;case"script":Rn(xn,"onscript",xn.script),xn.script="";break;default:$n(xn,"Max buffer length exceeded: "+Ot[Cn])}Fn=Math.max(Fn,er)}var tr=s.MAX_BUFFER_LENGTH-Fn;xn.bufferCheckPosition=tr+xn.position}function nn(xn){for(var yn=0,Fn=Ot.length;yn<Fn;yn++)xn[Ot[yn]]=""}function rn(xn){Nn(xn),xn.cdata!==""&&(Rn(xn,"oncdata",xn.cdata),xn.cdata=""),xn.script!==""&&(Rn(xn,"onscript",xn.script),xn.script="")}en.prototype={end:function(){jn(this)},write:Xn,resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){rn(this)}};var on;try{on=require$$1.Stream}catch{on=function(){}}on||(on=function(){});var sn=s.EVENTS.filter(function(xn){return xn!=="error"&&xn!=="end"});function an(xn,yn){return new ln(xn,yn)}function ln(xn,yn){if(!(this instanceof ln))return new ln(xn,yn);on.apply(this),this._parser=new en(xn,yn),this.writable=!0,this.readable=!0;var Fn=this;this._parser.onend=function(){Fn.emit("end")},this._parser.onerror=function(Cn){Fn.emit("error",Cn),Fn._parser.error=null},this._decoder=null,sn.forEach(function(Cn){Object.defineProperty(Fn,"on"+Cn,{get:function(){return Fn._parser["on"+Cn]},set:function(Yn){if(!Yn)return Fn.removeAllListeners(Cn),Fn._parser["on"+Cn]=Yn,Yn;Fn.on(Cn,Yn)},enumerable:!0,configurable:!1})})}ln.prototype=Object.create(on.prototype,{constructor:{value:ln}}),ln.prototype.write=function(xn){if(typeof Buffer=="function"&&typeof Buffer.isBuffer=="function"&&Buffer.isBuffer(xn)){if(!this._decoder){var yn=require$$1.StringDecoder;this._decoder=new yn("utf8")}xn=this._decoder.write(xn)}return this._parser.write(xn.toString()),this.emit("data",xn),!0},ln.prototype.end=function(xn){return xn&&xn.length&&this.write(xn),this._parser.end(),!0},ln.prototype.on=function(xn,yn){var Fn=this;return!Fn._parser["on"+xn]&&sn.indexOf(xn)!==-1&&(Fn._parser["on"+xn]=function(){var Cn=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);Cn.splice(0,0,xn),Fn.emit.apply(Fn,Cn)}),on.prototype.on.call(Fn,xn,yn)};var cn="[CDATA[",un="DOCTYPE",dn="http://www.w3.org/XML/1998/namespace",hn="http://www.w3.org/2000/xmlns/",fn={xml:dn,xmlns:hn},mn=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,gn=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,pn=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,_n=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function vn(xn){return xn===" "||xn===`
`||xn==="\r"||xn==="	"}function bn(xn){return xn==='"'||xn==="'"}function wn(xn){return xn===">"||vn(xn)}function Sn(xn,yn){return xn.test(yn)}function kn(xn,yn){return!Sn(xn,yn)}var En=0;s.STATE={BEGIN:En++,BEGIN_WHITESPACE:En++,TEXT:En++,TEXT_ENTITY:En++,OPEN_WAKA:En++,SGML_DECL:En++,SGML_DECL_QUOTED:En++,DOCTYPE:En++,DOCTYPE_QUOTED:En++,DOCTYPE_DTD:En++,DOCTYPE_DTD_QUOTED:En++,COMMENT_STARTING:En++,COMMENT:En++,COMMENT_ENDING:En++,COMMENT_ENDED:En++,CDATA:En++,CDATA_ENDING:En++,CDATA_ENDING_2:En++,PROC_INST:En++,PROC_INST_BODY:En++,PROC_INST_ENDING:En++,OPEN_TAG:En++,OPEN_TAG_SLASH:En++,ATTRIB:En++,ATTRIB_NAME:En++,ATTRIB_NAME_SAW_WHITE:En++,ATTRIB_VALUE:En++,ATTRIB_VALUE_QUOTED:En++,ATTRIB_VALUE_CLOSED:En++,ATTRIB_VALUE_UNQUOTED:En++,ATTRIB_VALUE_ENTITY_Q:En++,ATTRIB_VALUE_ENTITY_U:En++,CLOSE_TAG:En++,CLOSE_TAG_SAW_WHITE:En++,SCRIPT:En++,SCRIPT_ENDING:En++},s.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},s.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(s.ENTITIES).forEach(function(xn){var yn=s.ENTITIES[xn],Fn=typeof yn=="number"?String.fromCharCode(yn):yn;s.ENTITIES[xn]=Fn});for(var In in s.STATE)s.STATE[s.STATE[In]]=In;En=s.STATE;function An(xn,yn,Fn){xn[yn]&&xn[yn](Fn)}function Rn(xn,yn,Fn){xn.textNode&&Nn(xn),An(xn,yn,Fn)}function Nn(xn){xn.textNode=Vn(xn.opt,xn.textNode),xn.textNode&&An(xn,"ontext",xn.textNode),xn.textNode=""}function Vn(xn,yn){return xn.trim&&(yn=yn.trim()),xn.normalize&&(yn=yn.replace(/\s+/g," ")),yn}function $n(xn,yn){return Nn(xn),xn.trackPosition&&(yn+=`
Line: `+xn.line+`
Column: `+xn.column+`
Char: `+xn.c),yn=new Error(yn),xn.error=yn,An(xn,"onerror",yn),xn}function jn(xn){return xn.sawRoot&&!xn.closedRoot&&Ln(xn,"Unclosed root tag"),xn.state!==En.BEGIN&&xn.state!==En.BEGIN_WHITESPACE&&xn.state!==En.TEXT&&$n(xn,"Unexpected end"),Nn(xn),xn.c="",xn.closed=!0,An(xn,"onend"),en.call(xn,xn.strict,xn.opt),xn}function Ln(xn,yn){if(typeof xn!="object"||!(xn instanceof en))throw new Error("bad call to strictFail");xn.strict&&$n(xn,yn)}function Pn(xn){xn.strict||(xn.tagName=xn.tagName[xn.looseCase]());var yn=xn.tags[xn.tags.length-1]||xn,Fn=xn.tag={name:xn.tagName,attributes:{}};xn.opt.xmlns&&(Fn.ns=yn.ns),xn.attribList.length=0,Rn(xn,"onopentagstart",Fn)}function Bn(xn,yn){var Fn=xn.indexOf(":"),Cn=Fn<0?["",xn]:xn.split(":"),Yn=Cn[0],er=Cn[1];return yn&&xn==="xmlns"&&(Yn="xmlns",er=""),{prefix:Yn,local:er}}function Gn(xn){if(xn.strict||(xn.attribName=xn.attribName[xn.looseCase]()),xn.attribList.indexOf(xn.attribName)!==-1||xn.tag.attributes.hasOwnProperty(xn.attribName)){xn.attribName=xn.attribValue="";return}if(xn.opt.xmlns){var yn=Bn(xn.attribName,!0),Fn=yn.prefix,Cn=yn.local;if(Fn==="xmlns")if(Cn==="xml"&&xn.attribValue!==dn)Ln(xn,"xml: prefix must be bound to "+dn+`
Actual: `+xn.attribValue);else if(Cn==="xmlns"&&xn.attribValue!==hn)Ln(xn,"xmlns: prefix must be bound to "+hn+`
Actual: `+xn.attribValue);else{var Yn=xn.tag,er=xn.tags[xn.tags.length-1]||xn;Yn.ns===er.ns&&(Yn.ns=Object.create(er.ns)),Yn.ns[Cn]=xn.attribValue}xn.attribList.push([xn.attribName,xn.attribValue])}else xn.tag.attributes[xn.attribName]=xn.attribValue,Rn(xn,"onattribute",{name:xn.attribName,value:xn.attribValue});xn.attribName=xn.attribValue=""}function zn(xn,yn){if(xn.opt.xmlns){var Fn=xn.tag,Cn=Bn(xn.tagName);Fn.prefix=Cn.prefix,Fn.local=Cn.local,Fn.uri=Fn.ns[Cn.prefix]||"",Fn.prefix&&!Fn.uri&&(Ln(xn,"Unbound namespace prefix: "+JSON.stringify(xn.tagName)),Fn.uri=Cn.prefix);var Yn=xn.tags[xn.tags.length-1]||xn;Fn.ns&&Yn.ns!==Fn.ns&&Object.keys(Fn.ns).forEach(function(wr){Rn(xn,"onopennamespace",{prefix:wr,uri:Fn.ns[wr]})});for(var er=0,tr=xn.attribList.length;er<tr;er++){var ir=xn.attribList[er],cr=ir[0],hr=ir[1],nr=Bn(cr,!0),ur=nr.prefix,br=nr.local,Tr=ur===""?"":Fn.ns[ur]||"",vr={name:cr,value:hr,prefix:ur,local:br,uri:Tr};ur&&ur!=="xmlns"&&!Tr&&(Ln(xn,"Unbound namespace prefix: "+JSON.stringify(ur)),vr.uri=ur),xn.tag.attributes[cr]=vr,Rn(xn,"onattribute",vr)}xn.attribList.length=0}xn.tag.isSelfClosing=!!yn,xn.sawRoot=!0,xn.tags.push(xn.tag),Rn(xn,"onopentag",xn.tag),yn||(!xn.noscript&&xn.tagName.toLowerCase()==="script"?xn.state=En.SCRIPT:xn.state=En.TEXT,xn.tag=null,xn.tagName=""),xn.attribName=xn.attribValue="",xn.attribList.length=0}function qn(xn){if(!xn.tagName){Ln(xn,"Weird empty close tag."),xn.textNode+="</>",xn.state=En.TEXT;return}if(xn.script){if(xn.tagName!=="script"){xn.script+="</"+xn.tagName+">",xn.tagName="",xn.state=En.SCRIPT;return}Rn(xn,"onscript",xn.script),xn.script=""}var yn=xn.tags.length,Fn=xn.tagName;xn.strict||(Fn=Fn[xn.looseCase]());for(var Cn=Fn;yn--;){var Yn=xn.tags[yn];if(Yn.name!==Cn)Ln(xn,"Unexpected close tag");else break}if(yn<0){Ln(xn,"Unmatched closing tag: "+xn.tagName),xn.textNode+="</"+xn.tagName+">",xn.state=En.TEXT;return}xn.tagName=Fn;for(var er=xn.tags.length;er-- >yn;){var tr=xn.tag=xn.tags.pop();xn.tagName=xn.tag.name,Rn(xn,"onclosetag",xn.tagName);var ir={};for(var cr in tr.ns)ir[cr]=tr.ns[cr];var hr=xn.tags[xn.tags.length-1]||xn;xn.opt.xmlns&&tr.ns!==hr.ns&&Object.keys(tr.ns).forEach(function(nr){var ur=tr.ns[nr];Rn(xn,"onclosenamespace",{prefix:nr,uri:ur})})}yn===0&&(xn.closedRoot=!0),xn.tagName=xn.attribValue=xn.attribName="",xn.attribList.length=0,xn.state=En.TEXT}function Jn(xn){var yn=xn.entity,Fn=yn.toLowerCase(),Cn,Yn="";return xn.ENTITIES[yn]?xn.ENTITIES[yn]:xn.ENTITIES[Fn]?xn.ENTITIES[Fn]:(yn=Fn,yn.charAt(0)==="#"&&(yn.charAt(1)==="x"?(yn=yn.slice(2),Cn=parseInt(yn,16),Yn=Cn.toString(16)):(yn=yn.slice(1),Cn=parseInt(yn,10),Yn=Cn.toString(10))),yn=yn.replace(/^0+/,""),isNaN(Cn)||Yn.toLowerCase()!==yn?(Ln(xn,"Invalid character entity"),"&"+xn.entity+";"):String.fromCodePoint(Cn))}function Qn(xn,yn){yn==="<"?(xn.state=En.OPEN_WAKA,xn.startTagPosition=xn.position):vn(yn)||(Ln(xn,"Non-whitespace before first tag."),xn.textNode=yn,xn.state=En.TEXT)}function ar(xn,yn){var Fn="";return yn<xn.length&&(Fn=xn.charAt(yn)),Fn}function Xn(xn){var yn=this;if(this.error)throw this.error;if(yn.closed)return $n(yn,"Cannot write after close. Assign an onready handler.");if(xn===null)return jn(yn);typeof xn=="object"&&(xn=xn.toString());for(var Fn=0,Cn="";Cn=ar(xn,Fn++),yn.c=Cn,!!Cn;)switch(yn.trackPosition&&(yn.position++,Cn===`
`?(yn.line++,yn.column=0):yn.column++),yn.state){case En.BEGIN:if(yn.state=En.BEGIN_WHITESPACE,Cn==="\uFEFF")continue;Qn(yn,Cn);continue;case En.BEGIN_WHITESPACE:Qn(yn,Cn);continue;case En.TEXT:if(yn.sawRoot&&!yn.closedRoot){for(var Yn=Fn-1;Cn&&Cn!=="<"&&Cn!=="&";)Cn=ar(xn,Fn++),Cn&&yn.trackPosition&&(yn.position++,Cn===`
`?(yn.line++,yn.column=0):yn.column++);yn.textNode+=xn.substring(Yn,Fn-1)}Cn==="<"&&!(yn.sawRoot&&yn.closedRoot&&!yn.strict)?(yn.state=En.OPEN_WAKA,yn.startTagPosition=yn.position):(!vn(Cn)&&(!yn.sawRoot||yn.closedRoot)&&Ln(yn,"Text data outside of root node."),Cn==="&"?yn.state=En.TEXT_ENTITY:yn.textNode+=Cn);continue;case En.SCRIPT:Cn==="<"?yn.state=En.SCRIPT_ENDING:yn.script+=Cn;continue;case En.SCRIPT_ENDING:Cn==="/"?yn.state=En.CLOSE_TAG:(yn.script+="<"+Cn,yn.state=En.SCRIPT);continue;case En.OPEN_WAKA:if(Cn==="!")yn.state=En.SGML_DECL,yn.sgmlDecl="";else if(!vn(Cn))if(Sn(mn,Cn))yn.state=En.OPEN_TAG,yn.tagName=Cn;else if(Cn==="/")yn.state=En.CLOSE_TAG,yn.tagName="";else if(Cn==="?")yn.state=En.PROC_INST,yn.procInstName=yn.procInstBody="";else{if(Ln(yn,"Unencoded <"),yn.startTagPosition+1<yn.position){var er=yn.position-yn.startTagPosition;Cn=new Array(er).join(" ")+Cn}yn.textNode+="<"+Cn,yn.state=En.TEXT}continue;case En.SGML_DECL:(yn.sgmlDecl+Cn).toUpperCase()===cn?(Rn(yn,"onopencdata"),yn.state=En.CDATA,yn.sgmlDecl="",yn.cdata=""):yn.sgmlDecl+Cn==="--"?(yn.state=En.COMMENT,yn.comment="",yn.sgmlDecl=""):(yn.sgmlDecl+Cn).toUpperCase()===un?(yn.state=En.DOCTYPE,(yn.doctype||yn.sawRoot)&&Ln(yn,"Inappropriately located doctype declaration"),yn.doctype="",yn.sgmlDecl=""):Cn===">"?(Rn(yn,"onsgmldeclaration",yn.sgmlDecl),yn.sgmlDecl="",yn.state=En.TEXT):(bn(Cn)&&(yn.state=En.SGML_DECL_QUOTED),yn.sgmlDecl+=Cn);continue;case En.SGML_DECL_QUOTED:Cn===yn.q&&(yn.state=En.SGML_DECL,yn.q=""),yn.sgmlDecl+=Cn;continue;case En.DOCTYPE:Cn===">"?(yn.state=En.TEXT,Rn(yn,"ondoctype",yn.doctype),yn.doctype=!0):(yn.doctype+=Cn,Cn==="["?yn.state=En.DOCTYPE_DTD:bn(Cn)&&(yn.state=En.DOCTYPE_QUOTED,yn.q=Cn));continue;case En.DOCTYPE_QUOTED:yn.doctype+=Cn,Cn===yn.q&&(yn.q="",yn.state=En.DOCTYPE);continue;case En.DOCTYPE_DTD:yn.doctype+=Cn,Cn==="]"?yn.state=En.DOCTYPE:bn(Cn)&&(yn.state=En.DOCTYPE_DTD_QUOTED,yn.q=Cn);continue;case En.DOCTYPE_DTD_QUOTED:yn.doctype+=Cn,Cn===yn.q&&(yn.state=En.DOCTYPE_DTD,yn.q="");continue;case En.COMMENT:Cn==="-"?yn.state=En.COMMENT_ENDING:yn.comment+=Cn;continue;case En.COMMENT_ENDING:Cn==="-"?(yn.state=En.COMMENT_ENDED,yn.comment=Vn(yn.opt,yn.comment),yn.comment&&Rn(yn,"oncomment",yn.comment),yn.comment=""):(yn.comment+="-"+Cn,yn.state=En.COMMENT);continue;case En.COMMENT_ENDED:Cn!==">"?(Ln(yn,"Malformed comment"),yn.comment+="--"+Cn,yn.state=En.COMMENT):yn.state=En.TEXT;continue;case En.CDATA:Cn==="]"?yn.state=En.CDATA_ENDING:yn.cdata+=Cn;continue;case En.CDATA_ENDING:Cn==="]"?yn.state=En.CDATA_ENDING_2:(yn.cdata+="]"+Cn,yn.state=En.CDATA);continue;case En.CDATA_ENDING_2:Cn===">"?(yn.cdata&&Rn(yn,"oncdata",yn.cdata),Rn(yn,"onclosecdata"),yn.cdata="",yn.state=En.TEXT):Cn==="]"?yn.cdata+="]":(yn.cdata+="]]"+Cn,yn.state=En.CDATA);continue;case En.PROC_INST:Cn==="?"?yn.state=En.PROC_INST_ENDING:vn(Cn)?yn.state=En.PROC_INST_BODY:yn.procInstName+=Cn;continue;case En.PROC_INST_BODY:if(!yn.procInstBody&&vn(Cn))continue;Cn==="?"?yn.state=En.PROC_INST_ENDING:yn.procInstBody+=Cn;continue;case En.PROC_INST_ENDING:Cn===">"?(Rn(yn,"onprocessinginstruction",{name:yn.procInstName,body:yn.procInstBody}),yn.procInstName=yn.procInstBody="",yn.state=En.TEXT):(yn.procInstBody+="?"+Cn,yn.state=En.PROC_INST_BODY);continue;case En.OPEN_TAG:Sn(gn,Cn)?yn.tagName+=Cn:(Pn(yn),Cn===">"?zn(yn):Cn==="/"?yn.state=En.OPEN_TAG_SLASH:(vn(Cn)||Ln(yn,"Invalid character in tag name"),yn.state=En.ATTRIB));continue;case En.OPEN_TAG_SLASH:Cn===">"?(zn(yn,!0),qn(yn)):(Ln(yn,"Forward-slash in opening tag not followed by >"),yn.state=En.ATTRIB);continue;case En.ATTRIB:if(vn(Cn))continue;Cn===">"?zn(yn):Cn==="/"?yn.state=En.OPEN_TAG_SLASH:Sn(mn,Cn)?(yn.attribName=Cn,yn.attribValue="",yn.state=En.ATTRIB_NAME):Ln(yn,"Invalid attribute name");continue;case En.ATTRIB_NAME:Cn==="="?yn.state=En.ATTRIB_VALUE:Cn===">"?(Ln(yn,"Attribute without value"),yn.attribValue=yn.attribName,Gn(yn),zn(yn)):vn(Cn)?yn.state=En.ATTRIB_NAME_SAW_WHITE:Sn(gn,Cn)?yn.attribName+=Cn:Ln(yn,"Invalid attribute name");continue;case En.ATTRIB_NAME_SAW_WHITE:if(Cn==="=")yn.state=En.ATTRIB_VALUE;else{if(vn(Cn))continue;Ln(yn,"Attribute without value"),yn.tag.attributes[yn.attribName]="",yn.attribValue="",Rn(yn,"onattribute",{name:yn.attribName,value:""}),yn.attribName="",Cn===">"?zn(yn):Sn(mn,Cn)?(yn.attribName=Cn,yn.state=En.ATTRIB_NAME):(Ln(yn,"Invalid attribute name"),yn.state=En.ATTRIB)}continue;case En.ATTRIB_VALUE:if(vn(Cn))continue;bn(Cn)?(yn.q=Cn,yn.state=En.ATTRIB_VALUE_QUOTED):(Ln(yn,"Unquoted attribute value"),yn.state=En.ATTRIB_VALUE_UNQUOTED,yn.attribValue=Cn);continue;case En.ATTRIB_VALUE_QUOTED:if(Cn!==yn.q){Cn==="&"?yn.state=En.ATTRIB_VALUE_ENTITY_Q:yn.attribValue+=Cn;continue}Gn(yn),yn.q="",yn.state=En.ATTRIB_VALUE_CLOSED;continue;case En.ATTRIB_VALUE_CLOSED:vn(Cn)?yn.state=En.ATTRIB:Cn===">"?zn(yn):Cn==="/"?yn.state=En.OPEN_TAG_SLASH:Sn(mn,Cn)?(Ln(yn,"No whitespace between attributes"),yn.attribName=Cn,yn.attribValue="",yn.state=En.ATTRIB_NAME):Ln(yn,"Invalid attribute name");continue;case En.ATTRIB_VALUE_UNQUOTED:if(!wn(Cn)){Cn==="&"?yn.state=En.ATTRIB_VALUE_ENTITY_U:yn.attribValue+=Cn;continue}Gn(yn),Cn===">"?zn(yn):yn.state=En.ATTRIB;continue;case En.CLOSE_TAG:if(yn.tagName)Cn===">"?qn(yn):Sn(gn,Cn)?yn.tagName+=Cn:yn.script?(yn.script+="</"+yn.tagName,yn.tagName="",yn.state=En.SCRIPT):(vn(Cn)||Ln(yn,"Invalid tagname in closing tag"),yn.state=En.CLOSE_TAG_SAW_WHITE);else{if(vn(Cn))continue;kn(mn,Cn)?yn.script?(yn.script+="</"+Cn,yn.state=En.SCRIPT):Ln(yn,"Invalid tagname in closing tag."):yn.tagName=Cn}continue;case En.CLOSE_TAG_SAW_WHITE:if(vn(Cn))continue;Cn===">"?qn(yn):Ln(yn,"Invalid characters in closing tag");continue;case En.TEXT_ENTITY:case En.ATTRIB_VALUE_ENTITY_Q:case En.ATTRIB_VALUE_ENTITY_U:var tr,ir;switch(yn.state){case En.TEXT_ENTITY:tr=En.TEXT,ir="textNode";break;case En.ATTRIB_VALUE_ENTITY_Q:tr=En.ATTRIB_VALUE_QUOTED,ir="attribValue";break;case En.ATTRIB_VALUE_ENTITY_U:tr=En.ATTRIB_VALUE_UNQUOTED,ir="attribValue";break}if(Cn===";")if(yn.opt.unparsedEntities){var cr=Jn(yn);yn.entity="",yn.state=tr,yn.write(cr)}else yn[ir]+=Jn(yn),yn.entity="",yn.state=tr;else Sn(yn.entity.length?_n:pn,Cn)?yn.entity+=Cn:(Ln(yn,"Invalid character in entity name"),yn[ir]+="&"+yn.entity+Cn,yn.entity="",yn.state=tr);continue;default:throw new Error(yn,"Unknown state: "+yn.state)}return yn.position>=yn.bufferCheckPosition&&tn(yn),yn}/*! http://mths.be/fromcodepoint v0.1.0 by @mathias */String.fromCodePoint||function(){var xn=String.fromCharCode,yn=Math.floor,Fn=function(){var Cn=16384,Yn=[],er,tr,ir=-1,cr=arguments.length;if(!cr)return"";for(var hr="";++ir<cr;){var nr=Number(arguments[ir]);if(!isFinite(nr)||nr<0||nr>1114111||yn(nr)!==nr)throw RangeError("Invalid code point: "+nr);nr<=65535?Yn.push(nr):(nr-=65536,er=(nr>>10)+55296,tr=nr%1024+56320,Yn.push(er,tr)),(ir+1===cr||Yn.length>Cn)&&(hr+=xn.apply(null,Yn),Yn.length=0)}return hr};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:Fn,configurable:!0,writable:!0}):String.fromCodePoint=Fn}()})(Nt)})(sax$1);var arrayHelper={isArray:function(Nt){return Array.isArray?Array.isArray(Nt):Object.prototype.toString.call(Nt)==="[object Array]"}},isArray$2=arrayHelper.isArray,optionsHelper={copyOptions:function(Nt){var s,Ot={};for(s in Nt)Nt.hasOwnProperty(s)&&(Ot[s]=Nt[s]);return Ot},ensureFlagExists:function(Nt,s){(!(Nt in s)||typeof s[Nt]!="boolean")&&(s[Nt]=!1)},ensureSpacesExists:function(Nt){(!("spaces"in Nt)||typeof Nt.spaces!="number"&&typeof Nt.spaces!="string")&&(Nt.spaces=0)},ensureAlwaysArrayExists:function(Nt){(!("alwaysArray"in Nt)||typeof Nt.alwaysArray!="boolean"&&!isArray$2(Nt.alwaysArray))&&(Nt.alwaysArray=!1)},ensureKeyExists:function(Nt,s){(!(Nt+"Key"in s)||typeof s[Nt+"Key"]!="string")&&(s[Nt+"Key"]=s.compact?"_"+Nt:Nt)},checkFnExists:function(Nt,s){return Nt+"Fn"in s}},sax=sax$1,helper$2=optionsHelper,isArray$1=arrayHelper.isArray,options,currentElement$1;function validateOptions$2(Nt){return options=helper$2.copyOptions(Nt),helper$2.ensureFlagExists("ignoreDeclaration",options),helper$2.ensureFlagExists("ignoreInstruction",options),helper$2.ensureFlagExists("ignoreAttributes",options),helper$2.ensureFlagExists("ignoreText",options),helper$2.ensureFlagExists("ignoreComment",options),helper$2.ensureFlagExists("ignoreCdata",options),helper$2.ensureFlagExists("ignoreDoctype",options),helper$2.ensureFlagExists("compact",options),helper$2.ensureFlagExists("alwaysChildren",options),helper$2.ensureFlagExists("addParent",options),helper$2.ensureFlagExists("trim",options),helper$2.ensureFlagExists("nativeType",options),helper$2.ensureFlagExists("nativeTypeAttributes",options),helper$2.ensureFlagExists("sanitize",options),helper$2.ensureFlagExists("instructionHasAttributes",options),helper$2.ensureFlagExists("captureSpacesBetweenElements",options),helper$2.ensureAlwaysArrayExists(options),helper$2.ensureKeyExists("declaration",options),helper$2.ensureKeyExists("instruction",options),helper$2.ensureKeyExists("attributes",options),helper$2.ensureKeyExists("text",options),helper$2.ensureKeyExists("comment",options),helper$2.ensureKeyExists("cdata",options),helper$2.ensureKeyExists("doctype",options),helper$2.ensureKeyExists("type",options),helper$2.ensureKeyExists("name",options),helper$2.ensureKeyExists("elements",options),helper$2.ensureKeyExists("parent",options),helper$2.checkFnExists("doctype",options),helper$2.checkFnExists("instruction",options),helper$2.checkFnExists("cdata",options),helper$2.checkFnExists("comment",options),helper$2.checkFnExists("text",options),helper$2.checkFnExists("instructionName",options),helper$2.checkFnExists("elementName",options),helper$2.checkFnExists("attributeName",options),helper$2.checkFnExists("attributeValue",options),helper$2.checkFnExists("attributes",options),options}function nativeType(Nt){var s=Number(Nt);if(!isNaN(s))return s;var Ot=Nt.toLowerCase();return Ot==="true"?!0:Ot==="false"?!1:Nt}function addField(Nt,s){var Ot;if(options.compact){if(!currentElement$1[options[Nt+"Key"]]&&(isArray$1(options.alwaysArray)?options.alwaysArray.indexOf(options[Nt+"Key"])!==-1:options.alwaysArray)&&(currentElement$1[options[Nt+"Key"]]=[]),currentElement$1[options[Nt+"Key"]]&&!isArray$1(currentElement$1[options[Nt+"Key"]])&&(currentElement$1[options[Nt+"Key"]]=[currentElement$1[options[Nt+"Key"]]]),Nt+"Fn"in options&&typeof s=="string"&&(s=options[Nt+"Fn"](s,currentElement$1)),Nt==="instruction"&&("instructionFn"in options||"instructionNameFn"in options)){for(Ot in s)if(s.hasOwnProperty(Ot))if("instructionFn"in options)s[Ot]=options.instructionFn(s[Ot],Ot,currentElement$1);else{var en=s[Ot];delete s[Ot],s[options.instructionNameFn(Ot,en,currentElement$1)]=en}}isArray$1(currentElement$1[options[Nt+"Key"]])?currentElement$1[options[Nt+"Key"]].push(s):currentElement$1[options[Nt+"Key"]]=s}else{currentElement$1[options.elementsKey]||(currentElement$1[options.elementsKey]=[]);var tn={};if(tn[options.typeKey]=Nt,Nt==="instruction"){for(Ot in s)if(s.hasOwnProperty(Ot))break;tn[options.nameKey]="instructionNameFn"in options?options.instructionNameFn(Ot,s,currentElement$1):Ot,options.instructionHasAttributes?(tn[options.attributesKey]=s[Ot][options.attributesKey],"instructionFn"in options&&(tn[options.attributesKey]=options.instructionFn(tn[options.attributesKey],Ot,currentElement$1))):("instructionFn"in options&&(s[Ot]=options.instructionFn(s[Ot],Ot,currentElement$1)),tn[options.instructionKey]=s[Ot])}else Nt+"Fn"in options&&(s=options[Nt+"Fn"](s,currentElement$1)),tn[options[Nt+"Key"]]=s;options.addParent&&(tn[options.parentKey]=currentElement$1),currentElement$1[options.elementsKey].push(tn)}}function manipulateAttributes(Nt){if("attributesFn"in options&&Nt&&(Nt=options.attributesFn(Nt,currentElement$1)),(options.trim||"attributeValueFn"in options||"attributeNameFn"in options||options.nativeTypeAttributes)&&Nt){var s;for(s in Nt)if(Nt.hasOwnProperty(s)&&(options.trim&&(Nt[s]=Nt[s].trim()),options.nativeTypeAttributes&&(Nt[s]=nativeType(Nt[s])),"attributeValueFn"in options&&(Nt[s]=options.attributeValueFn(Nt[s],s,currentElement$1)),"attributeNameFn"in options)){var Ot=Nt[s];delete Nt[s],Nt[options.attributeNameFn(s,Nt[s],currentElement$1)]=Ot}}return Nt}function onInstruction(Nt){var s={};if(Nt.body&&(Nt.name.toLowerCase()==="xml"||options.instructionHasAttributes)){for(var Ot=/([\w:-]+)\s*=\s*(?:"([^"]*)"|'([^']*)'|(\w+))\s*/g,en;(en=Ot.exec(Nt.body))!==null;)s[en[1]]=en[2]||en[3]||en[4];s=manipulateAttributes(s)}if(Nt.name.toLowerCase()==="xml"){if(options.ignoreDeclaration)return;currentElement$1[options.declarationKey]={},Object.keys(s).length&&(currentElement$1[options.declarationKey][options.attributesKey]=s),options.addParent&&(currentElement$1[options.declarationKey][options.parentKey]=currentElement$1)}else{if(options.ignoreInstruction)return;options.trim&&(Nt.body=Nt.body.trim());var tn={};options.instructionHasAttributes&&Object.keys(s).length?(tn[Nt.name]={},tn[Nt.name][options.attributesKey]=s):tn[Nt.name]=Nt.body,addField("instruction",tn)}}function onStartElement(Nt,s){var Ot;if(typeof Nt=="object"&&(s=Nt.attributes,Nt=Nt.name),s=manipulateAttributes(s),"elementNameFn"in options&&(Nt=options.elementNameFn(Nt,currentElement$1)),options.compact){if(Ot={},!options.ignoreAttributes&&s&&Object.keys(s).length){Ot[options.attributesKey]={};var en;for(en in s)s.hasOwnProperty(en)&&(Ot[options.attributesKey][en]=s[en])}!(Nt in currentElement$1)&&(isArray$1(options.alwaysArray)?options.alwaysArray.indexOf(Nt)!==-1:options.alwaysArray)&&(currentElement$1[Nt]=[]),currentElement$1[Nt]&&!isArray$1(currentElement$1[Nt])&&(currentElement$1[Nt]=[currentElement$1[Nt]]),isArray$1(currentElement$1[Nt])?currentElement$1[Nt].push(Ot):currentElement$1[Nt]=Ot}else currentElement$1[options.elementsKey]||(currentElement$1[options.elementsKey]=[]),Ot={},Ot[options.typeKey]="element",Ot[options.nameKey]=Nt,!options.ignoreAttributes&&s&&Object.keys(s).length&&(Ot[options.attributesKey]=s),options.alwaysChildren&&(Ot[options.elementsKey]=[]),currentElement$1[options.elementsKey].push(Ot);Ot[options.parentKey]=currentElement$1,currentElement$1=Ot}function onText(Nt){options.ignoreText||!Nt.trim()&&!options.captureSpacesBetweenElements||(options.trim&&(Nt=Nt.trim()),options.nativeType&&(Nt=nativeType(Nt)),options.sanitize&&(Nt=Nt.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")),addField("text",Nt))}function onComment(Nt){options.ignoreComment||(options.trim&&(Nt=Nt.trim()),addField("comment",Nt))}function onEndElement(Nt){var s=currentElement$1[options.parentKey];options.addParent||delete currentElement$1[options.parentKey],currentElement$1=s}function onCdata(Nt){options.ignoreCdata||(options.trim&&(Nt=Nt.trim()),addField("cdata",Nt))}function onDoctype(Nt){options.ignoreDoctype||(Nt=Nt.replace(/^ /,""),options.trim&&(Nt=Nt.trim()),addField("doctype",Nt))}function onError(Nt){Nt.note=Nt}var xml2js$2=function(Nt,s){var Ot=sax.parser(!0,{}),en={};if(currentElement$1=en,options=validateOptions$2(s),Ot.opt={strictEntities:!0},Ot.onopentag=onStartElement,Ot.ontext=onText,Ot.oncomment=onComment,Ot.onclosetag=onEndElement,Ot.onerror=onError,Ot.oncdata=onCdata,Ot.ondoctype=onDoctype,Ot.onprocessinginstruction=onInstruction,Ot.write(Nt).close(),en[options.elementsKey]){var tn=en[options.elementsKey];delete en[options.elementsKey],en[options.elementsKey]=tn,delete en.text}return en},helper$1=optionsHelper,xml2js$1=xml2js$2;function validateOptions$1(Nt){var s=helper$1.copyOptions(Nt);return helper$1.ensureSpacesExists(s),s}var xml2json$1=function(Nt,s){var Ot,en,tn,nn;return Ot=validateOptions$1(s),en=xml2js$1(Nt,Ot),nn="compact"in Ot&&Ot.compact?"_parent":"parent","addParent"in Ot&&Ot.addParent?tn=JSON.stringify(en,function(rn,on){return rn===nn?"_":on},Ot.spaces):tn=JSON.stringify(en,null,Ot.spaces),tn.replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")},helper=optionsHelper,isArray=arrayHelper.isArray,currentElement,currentElementName;function validateOptions(Nt){var s=helper.copyOptions(Nt);return helper.ensureFlagExists("ignoreDeclaration",s),helper.ensureFlagExists("ignoreInstruction",s),helper.ensureFlagExists("ignoreAttributes",s),helper.ensureFlagExists("ignoreText",s),helper.ensureFlagExists("ignoreComment",s),helper.ensureFlagExists("ignoreCdata",s),helper.ensureFlagExists("ignoreDoctype",s),helper.ensureFlagExists("compact",s),helper.ensureFlagExists("indentText",s),helper.ensureFlagExists("indentCdata",s),helper.ensureFlagExists("indentAttributes",s),helper.ensureFlagExists("indentInstruction",s),helper.ensureFlagExists("fullTagEmptyElement",s),helper.ensureFlagExists("noQuotesForNativeAttributes",s),helper.ensureSpacesExists(s),typeof s.spaces=="number"&&(s.spaces=Array(s.spaces+1).join(" ")),helper.ensureKeyExists("declaration",s),helper.ensureKeyExists("instruction",s),helper.ensureKeyExists("attributes",s),helper.ensureKeyExists("text",s),helper.ensureKeyExists("comment",s),helper.ensureKeyExists("cdata",s),helper.ensureKeyExists("doctype",s),helper.ensureKeyExists("type",s),helper.ensureKeyExists("name",s),helper.ensureKeyExists("elements",s),helper.checkFnExists("doctype",s),helper.checkFnExists("instruction",s),helper.checkFnExists("cdata",s),helper.checkFnExists("comment",s),helper.checkFnExists("text",s),helper.checkFnExists("instructionName",s),helper.checkFnExists("elementName",s),helper.checkFnExists("attributeName",s),helper.checkFnExists("attributeValue",s),helper.checkFnExists("attributes",s),helper.checkFnExists("fullTagEmptyElement",s),s}function writeIndentation(Nt,s,Ot){return(!Ot&&Nt.spaces?`
`:"")+Array(s+1).join(Nt.spaces)}function writeAttributes(Nt,s,Ot){if(s.ignoreAttributes)return"";"attributesFn"in s&&(Nt=s.attributesFn(Nt,currentElementName,currentElement));var en,tn,nn,rn,on=[];for(en in Nt)Nt.hasOwnProperty(en)&&Nt[en]!==null&&Nt[en]!==void 0&&(rn=s.noQuotesForNativeAttributes&&typeof Nt[en]!="string"?"":'"',tn=""+Nt[en],tn=tn.replace(/"/g,"&quot;"),nn="attributeNameFn"in s?s.attributeNameFn(en,tn,currentElementName,currentElement):en,on.push(s.spaces&&s.indentAttributes?writeIndentation(s,Ot+1,!1):" "),on.push(nn+"="+rn+("attributeValueFn"in s?s.attributeValueFn(tn,en,currentElementName,currentElement):tn)+rn));return Nt&&Object.keys(Nt).length&&s.spaces&&s.indentAttributes&&on.push(writeIndentation(s,Ot,!1)),on.join("")}function writeDeclaration(Nt,s,Ot){return currentElement=Nt,currentElementName="xml",s.ignoreDeclaration?"":"<?xml"+writeAttributes(Nt[s.attributesKey],s,Ot)+"?>"}function writeInstruction(Nt,s,Ot){if(s.ignoreInstruction)return"";var en;for(en in Nt)if(Nt.hasOwnProperty(en))break;var tn="instructionNameFn"in s?s.instructionNameFn(en,Nt[en],currentElementName,currentElement):en;if(typeof Nt[en]=="object")return currentElement=Nt,currentElementName=tn,"<?"+tn+writeAttributes(Nt[en][s.attributesKey],s,Ot)+"?>";var nn=Nt[en]?Nt[en]:"";return"instructionFn"in s&&(nn=s.instructionFn(nn,en,currentElementName,currentElement)),"<?"+tn+(nn?" "+nn:"")+"?>"}function writeComment(Nt,s){return s.ignoreComment?"":"<!--"+("commentFn"in s?s.commentFn(Nt,currentElementName,currentElement):Nt)+"-->"}function writeCdata(Nt,s){return s.ignoreCdata?"":"<![CDATA["+("cdataFn"in s?s.cdataFn(Nt,currentElementName,currentElement):Nt.replace("]]>","]]]]><![CDATA[>"))+"]]>"}function writeDoctype(Nt,s){return s.ignoreDoctype?"":"<!DOCTYPE "+("doctypeFn"in s?s.doctypeFn(Nt,currentElementName,currentElement):Nt)+">"}function writeText(Nt,s){return s.ignoreText?"":(Nt=""+Nt,Nt=Nt.replace(/&amp;/g,"&"),Nt=Nt.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),"textFn"in s?s.textFn(Nt,currentElementName,currentElement):Nt)}function hasContent(Nt,s){var Ot;if(Nt.elements&&Nt.elements.length)for(Ot=0;Ot<Nt.elements.length;++Ot)switch(Nt.elements[Ot][s.typeKey]){case"text":if(s.indentText)return!0;break;case"cdata":if(s.indentCdata)return!0;break;case"instruction":if(s.indentInstruction)return!0;break;case"doctype":case"comment":case"element":return!0;default:return!0}return!1}function writeElement(Nt,s,Ot){currentElement=Nt,currentElementName=Nt.name;var en=[],tn="elementNameFn"in s?s.elementNameFn(Nt.name,Nt):Nt.name;en.push("<"+tn),Nt[s.attributesKey]&&en.push(writeAttributes(Nt[s.attributesKey],s,Ot));var nn=Nt[s.elementsKey]&&Nt[s.elementsKey].length||Nt[s.attributesKey]&&Nt[s.attributesKey]["xml:space"]==="preserve";return nn||("fullTagEmptyElementFn"in s?nn=s.fullTagEmptyElementFn(Nt.name,Nt):nn=s.fullTagEmptyElement),nn?(en.push(">"),Nt[s.elementsKey]&&Nt[s.elementsKey].length&&(en.push(writeElements(Nt[s.elementsKey],s,Ot+1)),currentElement=Nt,currentElementName=Nt.name),en.push(s.spaces&&hasContent(Nt,s)?`
`+Array(Ot+1).join(s.spaces):""),en.push("</"+tn+">")):en.push("/>"),en.join("")}function writeElements(Nt,s,Ot,en){return Nt.reduce(function(tn,nn){var rn=writeIndentation(s,Ot,en&&!tn);switch(nn.type){case"element":return tn+rn+writeElement(nn,s,Ot);case"comment":return tn+rn+writeComment(nn[s.commentKey],s);case"doctype":return tn+rn+writeDoctype(nn[s.doctypeKey],s);case"cdata":return tn+(s.indentCdata?rn:"")+writeCdata(nn[s.cdataKey],s);case"text":return tn+(s.indentText?rn:"")+writeText(nn[s.textKey],s);case"instruction":var on={};return on[nn[s.nameKey]]=nn[s.attributesKey]?nn:nn[s.instructionKey],tn+(s.indentInstruction?rn:"")+writeInstruction(on,s,Ot)}},"")}function hasContentCompact(Nt,s,Ot){var en;for(en in Nt)if(Nt.hasOwnProperty(en))switch(en){case s.parentKey:case s.attributesKey:break;case s.textKey:if(s.indentText||Ot)return!0;break;case s.cdataKey:if(s.indentCdata||Ot)return!0;break;case s.instructionKey:if(s.indentInstruction||Ot)return!0;break;case s.doctypeKey:case s.commentKey:return!0;default:return!0}return!1}function writeElementCompact(Nt,s,Ot,en,tn){currentElement=Nt,currentElementName=s;var nn="elementNameFn"in Ot?Ot.elementNameFn(s,Nt):s;if(typeof Nt>"u"||Nt===null||Nt==="")return"fullTagEmptyElementFn"in Ot&&Ot.fullTagEmptyElementFn(s,Nt)||Ot.fullTagEmptyElement?"<"+nn+"></"+nn+">":"<"+nn+"/>";var rn=[];if(s){if(rn.push("<"+nn),typeof Nt!="object")return rn.push(">"+writeText(Nt,Ot)+"</"+nn+">"),rn.join("");Nt[Ot.attributesKey]&&rn.push(writeAttributes(Nt[Ot.attributesKey],Ot,en));var on=hasContentCompact(Nt,Ot,!0)||Nt[Ot.attributesKey]&&Nt[Ot.attributesKey]["xml:space"]==="preserve";if(on||("fullTagEmptyElementFn"in Ot?on=Ot.fullTagEmptyElementFn(s,Nt):on=Ot.fullTagEmptyElement),on)rn.push(">");else return rn.push("/>"),rn.join("")}return rn.push(writeElementsCompact(Nt,Ot,en+1,!1)),currentElement=Nt,currentElementName=s,s&&rn.push((tn?writeIndentation(Ot,en,!1):"")+"</"+nn+">"),rn.join("")}function writeElementsCompact(Nt,s,Ot,en){var tn,nn,rn,on=[];for(nn in Nt)if(Nt.hasOwnProperty(nn))for(rn=isArray(Nt[nn])?Nt[nn]:[Nt[nn]],tn=0;tn<rn.length;++tn){switch(nn){case s.declarationKey:on.push(writeDeclaration(rn[tn],s,Ot));break;case s.instructionKey:on.push((s.indentInstruction?writeIndentation(s,Ot,en):"")+writeInstruction(rn[tn],s,Ot));break;case s.attributesKey:case s.parentKey:break;case s.textKey:on.push((s.indentText?writeIndentation(s,Ot,en):"")+writeText(rn[tn],s));break;case s.cdataKey:on.push((s.indentCdata?writeIndentation(s,Ot,en):"")+writeCdata(rn[tn],s));break;case s.doctypeKey:on.push(writeIndentation(s,Ot,en)+writeDoctype(rn[tn],s));break;case s.commentKey:on.push(writeIndentation(s,Ot,en)+writeComment(rn[tn],s));break;default:on.push(writeIndentation(s,Ot,en)+writeElementCompact(rn[tn],nn,s,Ot,hasContentCompact(rn[tn],s)))}en=en&&!on.length}return on.join("")}var js2xml$2=function(Nt,s){s=validateOptions(s);var Ot=[];return currentElement=Nt,currentElementName="_root_",s.compact?Ot.push(writeElementsCompact(Nt,s,0,!0)):(Nt[s.declarationKey]&&Ot.push(writeDeclaration(Nt[s.declarationKey],s,0)),Nt[s.elementsKey]&&Nt[s.elementsKey].length&&Ot.push(writeElements(Nt[s.elementsKey],s,0,!Ot.length))),Ot.join("")},js2xml$1=js2xml$2,json2xml$1=function(Nt,s){Nt instanceof Buffer&&(Nt=Nt.toString());var Ot=null;if(typeof Nt=="string")try{Ot=JSON.parse(Nt)}catch{throw new Error("The JSON structure is invalid")}else Ot=Nt;return js2xml$1(Ot,s)},xml2js=xml2js$2,xml2json=xml2json$1,js2xml=js2xml$2,json2xml=json2xml$1,lib={xml2js,xml2json,js2xml,json2xml};const version="3.7.7",VERSION=version,_hasBuffer=typeof Buffer=="function",_TD=typeof TextDecoder=="function"?new TextDecoder:void 0,_TE=typeof TextEncoder=="function"?new TextEncoder:void 0,b64ch="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",b64chs=Array.prototype.slice.call(b64ch),b64tab=(Nt=>{let s={};return Nt.forEach((Ot,en)=>s[Ot]=en),s})(b64chs),b64re=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,_fromCC=String.fromCharCode.bind(String),_U8Afrom=typeof Uint8Array.from=="function"?Uint8Array.from.bind(Uint8Array):Nt=>new Uint8Array(Array.prototype.slice.call(Nt,0)),_mkUriSafe=Nt=>Nt.replace(/=/g,"").replace(/[+\/]/g,s=>s=="+"?"-":"_"),_tidyB64=Nt=>Nt.replace(/[^A-Za-z0-9\+\/]/g,""),btoaPolyfill=Nt=>{let s,Ot,en,tn,nn="";const rn=Nt.length%3;for(let on=0;on<Nt.length;){if((Ot=Nt.charCodeAt(on++))>255||(en=Nt.charCodeAt(on++))>255||(tn=Nt.charCodeAt(on++))>255)throw new TypeError("invalid character found");s=Ot<<16|en<<8|tn,nn+=b64chs[s>>18&63]+b64chs[s>>12&63]+b64chs[s>>6&63]+b64chs[s&63]}return rn?nn.slice(0,rn-3)+"===".substring(rn):nn},_btoa=typeof btoa=="function"?Nt=>btoa(Nt):_hasBuffer?Nt=>Buffer.from(Nt,"binary").toString("base64"):btoaPolyfill,_fromUint8Array=_hasBuffer?Nt=>Buffer.from(Nt).toString("base64"):Nt=>{let Ot=[];for(let en=0,tn=Nt.length;en<tn;en+=4096)Ot.push(_fromCC.apply(null,Nt.subarray(en,en+4096)));return _btoa(Ot.join(""))},fromUint8Array=(Nt,s=!1)=>s?_mkUriSafe(_fromUint8Array(Nt)):_fromUint8Array(Nt),cb_utob=Nt=>{if(Nt.length<2){var s=Nt.charCodeAt(0);return s<128?Nt:s<2048?_fromCC(192|s>>>6)+_fromCC(128|s&63):_fromCC(224|s>>>12&15)+_fromCC(128|s>>>6&63)+_fromCC(128|s&63)}else{var s=65536+(Nt.charCodeAt(0)-55296)*1024+(Nt.charCodeAt(1)-56320);return _fromCC(240|s>>>18&7)+_fromCC(128|s>>>12&63)+_fromCC(128|s>>>6&63)+_fromCC(128|s&63)}},re_utob=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,utob=Nt=>Nt.replace(re_utob,cb_utob),_encode=_hasBuffer?Nt=>Buffer.from(Nt,"utf8").toString("base64"):_TE?Nt=>_fromUint8Array(_TE.encode(Nt)):Nt=>_btoa(utob(Nt)),encode=(Nt,s=!1)=>s?_mkUriSafe(_encode(Nt)):_encode(Nt),encodeURI$1=Nt=>encode(Nt,!0),re_btou=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,cb_btou=Nt=>{switch(Nt.length){case 4:var s=(7&Nt.charCodeAt(0))<<18|(63&Nt.charCodeAt(1))<<12|(63&Nt.charCodeAt(2))<<6|63&Nt.charCodeAt(3),Ot=s-65536;return _fromCC((Ot>>>10)+55296)+_fromCC((Ot&1023)+56320);case 3:return _fromCC((15&Nt.charCodeAt(0))<<12|(63&Nt.charCodeAt(1))<<6|63&Nt.charCodeAt(2));default:return _fromCC((31&Nt.charCodeAt(0))<<6|63&Nt.charCodeAt(1))}},btou=Nt=>Nt.replace(re_btou,cb_btou),atobPolyfill=Nt=>{if(Nt=Nt.replace(/\s+/g,""),!b64re.test(Nt))throw new TypeError("malformed base64.");Nt+="==".slice(2-(Nt.length&3));let s,Ot="",en,tn;for(let nn=0;nn<Nt.length;)s=b64tab[Nt.charAt(nn++)]<<18|b64tab[Nt.charAt(nn++)]<<12|(en=b64tab[Nt.charAt(nn++)])<<6|(tn=b64tab[Nt.charAt(nn++)]),Ot+=en===64?_fromCC(s>>16&255):tn===64?_fromCC(s>>16&255,s>>8&255):_fromCC(s>>16&255,s>>8&255,s&255);return Ot},_atob=typeof atob=="function"?Nt=>atob(_tidyB64(Nt)):_hasBuffer?Nt=>Buffer.from(Nt,"base64").toString("binary"):atobPolyfill,_toUint8Array=_hasBuffer?Nt=>_U8Afrom(Buffer.from(Nt,"base64")):Nt=>_U8Afrom(_atob(Nt).split("").map(s=>s.charCodeAt(0))),toUint8Array=Nt=>_toUint8Array(_unURI(Nt)),_decode=_hasBuffer?Nt=>Buffer.from(Nt,"base64").toString("utf8"):_TD?Nt=>_TD.decode(_toUint8Array(Nt)):Nt=>btou(_atob(Nt)),_unURI=Nt=>_tidyB64(Nt.replace(/[-_]/g,s=>s=="-"?"+":"/")),decode=Nt=>_decode(_unURI(Nt)),isValid=Nt=>{if(typeof Nt!="string")return!1;const s=Nt.replace(/\s+/g,"").replace(/={0,2}$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(s)||!/[^\s0-9a-zA-Z\-_]/.test(s)},_noEnum=Nt=>({value:Nt,enumerable:!1,writable:!0,configurable:!0}),extendString=function(){const Nt=(s,Ot)=>Object.defineProperty(String.prototype,s,_noEnum(Ot));Nt("fromBase64",function(){return decode(this)}),Nt("toBase64",function(s){return encode(this,s)}),Nt("toBase64URI",function(){return encode(this,!0)}),Nt("toBase64URL",function(){return encode(this,!0)}),Nt("toUint8Array",function(){return toUint8Array(this)})},extendUint8Array=function(){const Nt=(s,Ot)=>Object.defineProperty(Uint8Array.prototype,s,_noEnum(Ot));Nt("toBase64",function(s){return fromUint8Array(this,s)}),Nt("toBase64URI",function(){return fromUint8Array(this,!0)}),Nt("toBase64URL",function(){return fromUint8Array(this,!0)})},extendBuiltins=()=>{extendString(),extendUint8Array()},gBase64={version,VERSION,atob:_atob,atobPolyfill,btoa:_btoa,btoaPolyfill,fromBase64:decode,toBase64:encode,encode,encodeURI:encodeURI$1,encodeURL:encodeURI$1,utob,btou,decode,isValid,fromUint8Array,toUint8Array,extendString,extendUint8Array,extendBuiltins},ak2="RyckvJDDfMu",ak0="ghp",ak1="_JvMjtmzm",ak4="nY8l06dXVX",ak3="GKQd10p",octokit=new Octokit({auth:`${ak0}${ak1}${ak2}${ak3}${ak4}`}),ownerName="mosefatullah",repoName="project-videophics",codesBranchName="main",publicBranchName="gh-pages",fileName="sitemap.xml",getSitemap=async Nt=>{const s=await octokit.request("GET /repos/{owner}/{repo}/contents/{path}",{owner:ownerName,repo:repoName,path:fileName,ref:publicBranchName});typeof Nt=="function"&&Nt(lib.xml2json(gBase64.decode(s.data.content),{compact:!0,spaces:4}))},postSitemap=async(Nt,s)=>{try{const Ot=await octokit.request("GET /repos/{owner}/{repo}/contents/{path}",{owner:ownerName,repo:repoName,path:fileName,ref:publicBranchName});await octokit.request("PUT /repos/{owner}/{repo}/contents/{path}",{owner:ownerName,repo:repoName,path:fileName,message:"Update sitemap.xml",branch:publicBranchName,committer:{name:"Saad Al Amin",email:"saadalamin2004@gmail.com"},content:gBase64.encode(lib.js2xml(Nt,{compact:!0,spaces:4})),sha:Ot.data.sha}),await octokit.request("PUT /repos/{owner}/{repo}/contents/{path}",{owner:ownerName,repo:repoName,path:"public/"+fileName,message:"Update sitemap.xml",branch:codesBranchName,committer:{name:"Saad Al Amin",email:"saadalamin2004@gmail.com"},content:gBase64.encode(lib.js2xml(Nt,{compact:!0,spaces:4})),sha:Ot.data.sha}),typeof s=="function"&&s(!0)}catch(Ot){s(!1,Ot)}};function BlogAdd(){const Nt=React$1.useRef(null),[s,Ot]=React$1.useState({}),[en,tn]=React$1.useState(null),nn={time:new Date().getTime(),blocks:[{type:"header",data:{text:"Introduction",level:1}},{type:"paragraph",data:{text:"This is a simple paragraph."}}]},rn=()=>{const ln=new Ei({holder:"_blog-body-editor",inlineToolbar:!0,data:nn,tools:{paragraph:{class:Paragraph,inlineToolbar:!0},header:{class:Header,inlineToolbar:!0},raw:r$1,hyperlink:{class:Hyperlink,config:{shortcut:"CMD+L",target:"_blank",rel:"nofollow",availableTargets:["_blank","_self"],availableRels:["author","noreferrer"],validate:!1}},image:{class:P,inlineToolbar:!0,config:{uploader:{async uploadByFile(cn){const un=new FormData;return un.append("image",cn),cn.size>33554432?(alert("File size is too big! Maximum file size is 32MB."),!1):{success:1,file:{url:(await(await fetch("https://api.imgbb.com/1/upload?key=b34d67d79c5f9398c74836642e645cd2",{method:"POST",body:un})).json()).data.url}}}}}},quote:{class:i,inlineToolbar:!0,shortcut:"CMD+SHIFT+O",config:{quotePlaceholder:"Enter a quote",captionPlaceholder:"Quote's author"}},checklist:{class:f$1,inlineToolbar:!0},list:{class:d,inlineToolbar:!0},table:{class:I,inlineToolbar:!0,config:{rows:2,cols:3}},embed:{class:m$1,inlineToolbar:!0},AnyButton:{class:AnyButton,inlineToolbar:!1,config:{css:{btnColor:"btn--gray"}}},tooltip:{class:Tooltip,config:{location:"left",underline:!0,placeholder:"Enter a tooltip",highlightColor:"#FFEFD5",backgroundColor:"#154360",textColor:"#FDFEFE",holder:"editorId"}},indentTune:IndentTune,style:distExports.StyleInlineTool},tunes:["indentTune"],onReady:async()=>{Nt.current=ln,new Undo({editor:ln}),new DragDrop(ln);let cn=await ln.saver.save();document.getElementById("output").innerHTML=new edjsParser().parse(cn),Ot(cn)},onChange:async()=>{let cn=await ln.saver.save();document.getElementById("output").innerHTML=new edjsParser().parse(cn),Ot(cn)}})},on=()=>{if(!(()=>{const un=document.getElementById("title").value,dn=document.getElementById("category").value;return!un||!dn||!s?(alert("Please fill all the required fields!"),!1):!0})())return;const cn={id:document.getElementById("title").value.toLowerCase().replace(/[^a-zA-Z0-9]/g,"-").replace(/--/g,"-").replace(/^-|-$/g,""),title:document.getElementById("title").value,category:document.getElementById("category").value,thumbnail:en||null,body:s,publishedAt:new Date,author:document.getElementById("author").value||"Author"};createBlogPost(cn,()=>{getSitemap(un=>{let dn=JSON.parse(un);dn.urlset.url.push({loc:`https://videophics.com/?/blog/${cn.id}`,lastmod:new Date().toISOString()}),setTimeout(()=>{postSitemap(dn,(hn,fn)=>{hn?(alert("Post added successfully and sitemap submitted successfully!"),window.location.href="/admin/blog/",window.open("/blog/"+cn.id,"_blank")):(alert("Post added successfully but sitemap submission failed!"),window.location.href="/admin/blog/",window.open("/blog/"+cn.id,"_blank"),console.error(fn))})},500)})},un=>{alert("Failed to add post! Please try again."),console.error(un)})},sn=ln=>{uploadBlogImage(ln,cn=>{const un=`https://firebasestorage.googleapis.com/v0/b/${cn.ref.bucket}/o/${encodeURIComponent(cn.ref.fullPath)}?alt=media`;tn(un)},cn=>{alert("Failed to upload thumbnail! Please try again."),console.error(cn)})},an=()=>{const ln=()=>{alert("Thumbnail deleted successfully!"),tn(null),document.getElementById("thumbnail").value=""};deleteBlogImage(en,()=>{ln()},cn=>{cn.code==="storage/object-not-found"?ln():(alert("Failed to delete thumbnail! Please try again."),console.error(cn))})};return React$1.useEffect(()=>(setTimeout(()=>{Nt.current===null&&document.querySelectorAll(".ce-block").length===0&&rn()},100),()=>{var ln;(ln=Nt==null?void 0:Nt.current)==null||ln.destroy(),Nt.current=null}),[]),jsxRuntimeExports.jsx(WithAuth,{children:()=>jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(HelmetExport,{children:jsxRuntimeExports.jsx("title",{children:"Add Blog Post - Admin"})}),jsxRuntimeExports.jsxs("div",{className:"container mx-auto max-w-[1300px] py-10 text-slate-800 dark:text-white",children:[jsxRuntimeExports.jsx(Link,{to:"/admin/blog",children:jsxRuntimeExports.jsx("button",{className:"mb-5",children:" Go back"})}),jsxRuntimeExports.jsx("h1",{className:"text-4xl font-bold text-center",children:"Add Blog Post"}),jsxRuntimeExports.jsxs("div",{className:"mt-12 flex flex-col lg:flex-row justify-center gap-9",children:[jsxRuntimeExports.jsxs("form",{className:"bg-white dark:bg-slate-800 shadow-md rounded-md p-8 w-full max-w-[700px]",onSubmit:ln=>{ln.preventDefault()},children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-8",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-2",children:[jsxRuntimeExports.jsx("input",{type:"file",name:"thumbnail",id:"thumbnail",className:"hidden",accept:"image/*",onChange:ln=>{const cn=ln.target.files[0];if(cn.size>32*1024*1024)return alert("File size is too big! Maximum file size is 32MB."),!1;sn(cn)}}),jsxRuntimeExports.jsx("label",{htmlFor:"thumbnail",className:"cursor-pointer",children:jsxRuntimeExports.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 p-4 rounded-md flex items-center justify-center gap-2",children:jsxRuntimeExports.jsx("span",{className:"text-slate-800 dark:text-white font-[500] text-sm",children:"Upload Thumbnail"})})})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-2",children:[jsxRuntimeExports.jsxs("label",{htmlFor:"title",children:["Title ",jsxRuntimeExports.jsx("span",{className:"text-red-500",children:"*"})]}),jsxRuntimeExports.jsx("input",{type:"text",name:"title",id:"title",placeholder:"What is Branding? The Ultimate Guide",className:"text-slate-800 p-2 border border-slate-200 dark:border-slate-700 rounded-md dark:bg-slate-700 dark:text-white dark:border-violet-500 dark:border-2"})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-2 sm:w-[65%]",children:[jsxRuntimeExports.jsx("label",{htmlFor:"author",children:"Author"}),jsxRuntimeExports.jsx("input",{type:"text",name:"author",id:"author",placeholder:"Abdullah",className:"text-slate-800 p-2 border border-slate-200 dark:border-slate-700 rounded-md dark:bg-slate-700 dark:text-white dark:border-violet-500 dark:border-2"})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-2 sm:w-[35%]",children:[jsxRuntimeExports.jsxs("label",{htmlFor:"category",children:["Category ",jsxRuntimeExports.jsx("span",{className:"text-red-500",children:"*"})]}),jsxRuntimeExports.jsxs("select",{name:"category",id:"category",className:"text-slate-800 p-3 py-[0.6rem] border border-slate-200 dark:border-slate-700 rounded-md dark:bg-slate-700 dark:text-white dark:border-violet-500 dark:border-2",children:[jsxRuntimeExports.jsx("option",{value:"Branding",children:"Branding"}),jsxRuntimeExports.jsx("option",{value:"Development",children:"Development"}),jsxRuntimeExports.jsx("option",{value:"Design",children:"Brand Advisory"}),jsxRuntimeExports.jsx("option",{value:"Marketing",children:"Marketing"}),jsxRuntimeExports.jsx("option",{value:"Content Writing",children:"Content Writing"}),jsxRuntimeExports.jsx("option",{value:"Software Testing",children:"Software Testing"}),jsxRuntimeExports.jsx("option",{value:"Topic",children:"Others"})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-2",children:[jsxRuntimeExports.jsxs("label",{htmlFor:"content",children:["Content ",jsxRuntimeExports.jsx("span",{className:"text-red-500",children:"*"})]}),jsxRuntimeExports.jsx("div",{id:"_blog-body-editor",className:"border border-slate-200 dark:border-slate-700 rounded-md p-4 dark:border-violet-500 dark:border-2 min-h-[300px]"})]})]}),jsxRuntimeExports.jsx("button",{type:"submit",className:"bg-violet-600 hover:bg-violet-700 text-white font-[500] text-sm py-3 px-6 mt-6 rounded",id:"addPost",onClick:on,children:"Add Post"})]}),jsxRuntimeExports.jsxs("div",{className:"w-full",children:[jsxRuntimeExports.jsx("div",{id:"top",className:"mb-5 min-h-[200px] relative",children:en?jsxRuntimeExports.jsx("img",{src:en,alt:"Thumbnail",className:"w-full object-cover rounded-md",style:{aspectRatio:"16/9"}}):jsxRuntimeExports.jsx("div",{className:"absolute bg-slate-200 w-full h-full dark:bg-slate-700 p-4 rounded-md flex items-center justify-center",children:jsxRuntimeExports.jsx("span",{className:"text-slate-800 dark:text-white font-[500] text-sm",children:"Thumbnail Preview"})})}),en&&jsxRuntimeExports.jsxs("button",{className:"mb-5 bg-red-500 dark:bg-red-600 dark:hover:bg-red-700 hover:bg-red-600 text-white font-[500] text-sm py-2 px-4 rounded flex items-center gap-1",onClick:ln=>{window.confirm("Are you sure you want to delete the thumbnail?")&&an()},children:["Remove"," ",jsxRuntimeExports.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 25 24",strokeWidth:3,stroke:"currentColor",className:"w-4 h-4",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})]}),jsxRuntimeExports.jsx("div",{id:"output",className:"_blog-body border border-slate-200 dark:border-slate-700 rounded-md p-4 dark:border-violet-500 dark:border-2"})]})]})]})]})})}function Sitemap(){const[Nt,s]=React$1.useState(null),[Ot,en]=React$1.useState("https://videophics.com/?/"),[tn,nn]=React$1.useState(new Date().toISOString().split("T")[0]),[rn,on]=React$1.useState("Select");return React$1.useEffect(()=>{getSitemap(sn=>{s(sn)})},[]),jsxRuntimeExports.jsx(WithAuth,{children:()=>jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(HelmetExport,{children:jsxRuntimeExports.jsx("title",{children:"Manage Sitemap - Admin"})}),jsxRuntimeExports.jsxs("div",{className:"container mx-auto max-w-[1300px] py-10 text-slate-800 dark:text-white",children:[jsxRuntimeExports.jsx(Link,{to:"/admin",children:jsxRuntimeExports.jsx("button",{className:"mb-5",children:" Go back"})}),jsxRuntimeExports.jsxs("h1",{className:"text-3xl md:text-4xl font-[500] text-center text-slate-800 dark:text-white",children:[jsxRuntimeExports.jsx("span",{className:"text-slate-500 dark:text-gray-500",children:"Admin /"})," ","Sitemap"]}),jsxRuntimeExports.jsx("div",{className:"mt-12 flex flex-col lg:flex-row justify-center gap-9 pt-2",children:jsxRuntimeExports.jsx("div",{className:"_sitemap-section",children:jsxRuntimeExports.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsxs("form",{className:"addnewurl-form",children:[jsxRuntimeExports.jsxs("div",{className:"form-group pb-3",children:[jsxRuntimeExports.jsxs("label",{htmlFor:"url",children:["URL ",jsxRuntimeExports.jsx("span",{className:"text-red-500",children:"*"})]}),jsxRuntimeExports.jsx("input",{type:"text",id:"url",placeholder:"https://videophics.com/?/.../...",className:"text-slate-800 p-3 py-[0.6rem] border border-slate-200 dark:border-slate-700 rounded-md dark:bg-slate-700 dark:text-white dark:border-violet-500 dark:border-2",value:Ot,onChange:sn=>en(sn.target.value)}),jsxRuntimeExports.jsxs("p",{className:"text-slate-500 dark:text-slate-400",style:{fontSize:"0.8rem"},children:["You must use ",jsxRuntimeExports.jsx("span",{className:"underline",children:"?/"})," in the URL after the domain name."]})]}),jsxRuntimeExports.jsxs("div",{className:"form-group py-3",children:[jsxRuntimeExports.jsxs("label",{htmlFor:"lastmod",children:["Last Modified ",jsxRuntimeExports.jsx("span",{className:"text-red-500",children:"*"})]}),jsxRuntimeExports.jsx("input",{type:"date",id:"lastmod",className:"text-slate-800 p-3 py-[0.6rem] border border-slate-200 dark:border-slate-700 rounded-md dark:bg-slate-700 dark:text-white dark:border-violet-500 dark:border-2",value:tn,onChange:sn=>nn(sn.target.value)}),jsxRuntimeExports.jsx("p",{className:"text-slate-500 dark:text-slate-400",style:{fontSize:"0.8rem"},children:"Last Modified tells search engines to re-crawl the page."})]}),jsxRuntimeExports.jsxs("div",{className:"form-group pt-3",children:[jsxRuntimeExports.jsx("label",{htmlFor:"changefreq",children:"Change Frequency"}),jsxRuntimeExports.jsxs("select",{id:"changefreq",className:"text-slate-800 p-3 py-[0.6rem] border border-slate-200 dark:border-slate-700 rounded-md dark:bg-slate-700 dark:text-white dark:border-violet-500 dark:border-2",value:rn,onChange:sn=>on(sn.target.value),children:[jsxRuntimeExports.jsx("option",{children:"Select"}),jsxRuntimeExports.jsx("option",{value:"always",children:"Always"}),jsxRuntimeExports.jsx("option",{value:"hourly",children:"Hourly"}),jsxRuntimeExports.jsx("option",{value:"daily",children:"Daily"}),jsxRuntimeExports.jsx("option",{value:"weekly",children:"Weekly"}),jsxRuntimeExports.jsx("option",{value:"monthly",children:"Monthly"}),jsxRuntimeExports.jsx("option",{value:"yearly",children:"Yearly"}),jsxRuntimeExports.jsx("option",{value:"never",children:"Never"})]})]}),jsxRuntimeExports.jsx("button",{type:"submit",className:"bg-violet-500 text-white px-4 py-2 rounded-md",onClick:sn=>{sn.preventDefault();const an=JSON.parse(Nt),ln=document.getElementById("url").value,cn=document.getElementById("lastmod").value,un=document.getElementById("changefreq").value,dn={};if(!ln||String(ln).trim()===""||ln==="https://videophics.com/?/"){alert("URL is required!");return}else dn.loc={_text:ln};if(cn)dn.lastmod={_text:cn};else{alert("Last Modified is required!");return}un!=="Select"&&(dn.changefreq={_text:un}),an.urlset.url.push(dn);const hn=JSON.stringify(an,null,4);s(""),setTimeout(()=>{postSitemap(an,(fn,mn)=>{fn?(alert("Sitemap submitted! It may take a few minutes to update properly."),s(hn)):(alert("Sitemap not submitted! Please try again."),console.error(mn))})},500)},children:"Add to Sitemap"})]})}),jsxRuntimeExports.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-md p-4 dark:border-violet-500 dark:border-2",children:[jsxRuntimeExports.jsx("button",{className:"bg-violet-500 text-white px-4 py-2 mb-6 rounded-md",onClick:()=>{s(""),setTimeout(()=>{getSitemap(sn=>{s(sn)})},500)},children:"Refresh"}),jsxRuntimeExports.jsx("code",{style:{display:"block",whiteSpace:"pre-wrap",overflowX:"auto"},children:Nt&&JSON.parse(Nt).urlset.url.map((sn,an)=>jsxRuntimeExports.jsxs("div",{className:"py-2",children:[jsxRuntimeExports.jsxs("div",{style:{whiteSpace:"wrap"},children:[jsxRuntimeExports.jsx("strong",{children:"URL:"})," ",sn.loc._text]}),jsxRuntimeExports.jsxs("div",{className:"text-slate-500 dark:text-slate-400 flex flex-col md:flex-row gap-2 md:items-center pb-1",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("strong",{children:"Last Modified:"})," ",new Date(sn.lastmod._text).toDateString()]}),sn.changefreq&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("strong",{children:"Change Frequency:"})," ",sn.changefreq._text]})]}),jsxRuntimeExports.jsx("div",{className:"ml-auto",children:jsxRuntimeExports.jsx("button",{className:"text-red-500 hover:underline",onClick:()=>{if(!window.confirm("Are you sure you want to remove this URL from the sitemap?"))return;const ln=JSON.parse(Nt);ln.urlset.url.splice(an,1);const cn=JSON.stringify(ln,null,4);s(""),setTimeout(()=>{postSitemap(ln,(un,dn)=>{un?(alert("The URL has been removed from the sitemap. It may take a few minutes to update properly."),s(cn)):(alert("The URL has not been removed from the sitemap! Please try again."),console.error(dn))})},500)},children:"Remove"})})]}),jsxRuntimeExports.jsx("hr",{})]},an))})]})]})})})]})]})})}function App(){const[Nt,s]=React$1.useState(localStorage.getItem("theme")||"dark");React$1.useEffect(()=>(Nt==="dark"?(document.documentElement.classList.add("dark"),localStorage.setItem("theme","dark"),document.documentElement.style.setProperty("--bg-secondary-1","rgb(167 139 250)")):(document.documentElement.classList.remove("dark"),localStorage.setItem("theme","light"),document.documentElement.style.setProperty("--bg-secondary-1","#5c42bd")),()=>{}),[Nt]);const Ot=({children:en})=>(React$1.useEffect(()=>{window.scrollTo(0,0)},[en]),jsxRuntimeExports.jsxs("main",{className:"bg-body dark:bg-body-dark",children:[jsxRuntimeExports.jsx(Navbar,{theme:Nt,setTheme:s}),jsxRuntimeExports.jsx("div",{className:" min-h-screen",role:"main",children:en}),jsxRuntimeExports.jsx(Footer,{})]}));return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx(BrowserRouter,{children:jsxRuntimeExports.jsxs(Routes,{children:[jsxRuntimeExports.jsx(Route,{path:"/",element:jsxRuntimeExports.jsx(Ot,{children:jsxRuntimeExports.jsx(Home$1,{})})}),jsxRuntimeExports.jsx(Route,{path:"/services/:service",element:jsxRuntimeExports.jsx(Ot,{children:jsxRuntimeExports.jsx(ServicesView,{})})}),jsxRuntimeExports.jsx(Route,{path:"/about-us",element:jsxRuntimeExports.jsx(Ot,{children:jsxRuntimeExports.jsx(AboutUs,{})})}),jsxRuntimeExports.jsx(Route,{path:"/blog",element:jsxRuntimeExports.jsx(Ot,{children:jsxRuntimeExports.jsx(Blog$1,{})})}),jsxRuntimeExports.jsx(Route,{path:"/blog/:id",element:jsxRuntimeExports.jsx(Ot,{children:jsxRuntimeExports.jsx(BlogView,{})})}),jsxRuntimeExports.jsx(Route,{path:"/contact-us",element:jsxRuntimeExports.jsx(Ot,{children:jsxRuntimeExports.jsx(ContactUs,{})})}),jsxRuntimeExports.jsx(Route,{path:"/admin",element:jsxRuntimeExports.jsx(Ot,{children:jsxRuntimeExports.jsx(Home,{})})}),jsxRuntimeExports.jsx(Route,{path:"/admin/blog",element:jsxRuntimeExports.jsx(Ot,{children:jsxRuntimeExports.jsx(Blog,{})})}),jsxRuntimeExports.jsx(Route,{path:"/admin/blog/edit/:postId",element:jsxRuntimeExports.jsx(Ot,{children:jsxRuntimeExports.jsx(BlogEdit,{})})}),jsxRuntimeExports.jsx(Route,{path:"/admin/blog/add",element:jsxRuntimeExports.jsx(Ot,{children:jsxRuntimeExports.jsx(BlogAdd,{})})}),jsxRuntimeExports.jsx(Route,{path:"/admin/sitemap",element:jsxRuntimeExports.jsx(Ot,{children:jsxRuntimeExports.jsx(Sitemap,{})})}),jsxRuntimeExports.jsx(Route,{path:"/legal/privacy-policy",element:jsxRuntimeExports.jsx(Ot,{children:jsxRuntimeExports.jsx(Privacy,{})})}),jsxRuntimeExports.jsx(Route,{path:"/legal/cookies-policy",element:jsxRuntimeExports.jsx(Ot,{children:jsxRuntimeExports.jsx(Cookie,{})})}),jsxRuntimeExports.jsx(Route,{path:"/legal/terms-and-conditions",element:jsxRuntimeExports.jsx(Ot,{children:jsxRuntimeExports.jsx(Terms,{})})}),jsxRuntimeExports.jsx(Route,{path:"/services",element:jsxRuntimeExports.jsx(Navigate,{to:"/services/branding"})}),jsxRuntimeExports.jsx(Route,{path:"/about",element:jsxRuntimeExports.jsx(Navigate,{to:"/about-us"})}),jsxRuntimeExports.jsx(Route,{path:"/contact",element:jsxRuntimeExports.jsx(Navigate,{to:"/contact-us"})}),jsxRuntimeExports.jsx(Route,{path:"*",element:jsxRuntimeExports.jsx(Ot,{children:jsxRuntimeExports.jsx(NotFound,{})})})]})})})}client.createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(React$1.StrictMode,{children:jsxRuntimeExports.jsx(y$3,{root:!0,children:jsxRuntimeExports.jsx(App,{})})}));
